/*! For license information please see views-2d-interactive-editingTools.js.LICENSE.txt */
(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[7215],{29976:function(t){function e(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}e.keys=function(){return[]},e.resolve=e,e.id=29976,t.exports=e},54038:function(t,e,n){"use strict";n.d(e,{i:function(){return r}});var i=n(82798);const r=()=>i.L2.isBrowser&&"undefined"!=typeof navigator&&"undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document},67646:function(t,e,n){"use strict";n.d(e,{f:function(){return o},s:function(){return c}});var i=n(82798);const r=globalThis.calciteConfig,o=r?.focusTrapStack||[],s=(i.L2.isTesting&&i.L2.isBrowser,"2.13.0"),a="2024-10-01",l="42c132913";function c(){if(r&&r.version)return;console.info(`Using Calcite Components ${s} [Date: ${a}, Revision: ${l}]`);const t=r||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:s,writable:!1}),globalThis.calciteConfig=t}},96367:function(t,e,n){"use strict";n.d(e,{C:function(){return o},D:function(){return s},a:function(){return i},d:function(){return r}});const i="calcite-mode-auto",r="calcite-mode-dark",o={autoMode:i,darkMode:r,lightMode:"calcite-mode-light",rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},s={filter:250,nextTick:0,resize:150,reposition:100}},82798:function(t,e,n){"use strict";n.d(e,{L2:function(){return s},FK:function(){return ke},wt:function(){return S},xr:function(){return it},lh:function(){return dt},$x:function(){return ee},OX:function(){return z},h:function(){return et},w$:function(){return Te},gv:function(){return Z},Qu:function(){return U}});var i={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},r="app",o=Object.defineProperty,s={isDev:!!i.isDev,isBrowser:!0,isServer:!1,isTesting:!!i.isTesting},a=i.hotModuleReplacement?window.__STENCIL_HOSTREFS__||(window.__STENCIL_HOSTREFS__=new WeakMap):new WeakMap,l=t=>a.get(t),c=(t,e)=>e in t,u=(t,e)=>(0,console.error)(t,e),d=i.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],h=(...t)=>console.error(...d,...t),p=(...t)=>console.warn(...d,...t),f=new Map,m=new Map,g=[],y="s-id",v="sty-id",_="c-id",b="http://www.w3.org/1999/xlink",x=["formAssociatedCallback","formResetCallback","formDisabledCallback","formStateRestoreCallback"],w="undefined"!=typeof window?window:{},M=w.document||{head:{}},S=w.HTMLElement||class{},C={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,i)=>t.addEventListener(e,n,i),rel:(t,e,n,i)=>t.removeEventListener(e,n,i),ce:(t,e)=>new CustomEvent(t,e)},T=i.shadowDom,k=(()=>{let t=!1;try{M.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(t){}return t})(),E=!!i.constructableCSS&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(t){}return!1})(),$=0,A=!1,P=[],I=[],R=[],O=(t,e)=>n=>{t.push(n),A||(A=!0,e&&4&C.$flags$?D(N):C.raf(N))},L=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(t){u(t)}t.length=0},V=(t,e)=>{let n=0,i=0;for(;n<t.length&&(i=performance.now())<e;)try{t[n++](i)}catch(t){u(t)}n===t.length?t.length=0:0!==n&&t.splice(0,n)},N=()=>{if(i.asyncQueue&&$++,L(P),i.asyncQueue){const t=2==(6&C.$flags$)?performance.now()+14*Math.ceil(.1*$):1/0;V(I,t),V(R,t),I.length>0&&(R.push(...I),I.length=0),(A=P.length+I.length+R.length>0)?C.raf(N):$=0}else L(I),(A=P.length>0)&&C.raf(N)},D=t=>Promise.resolve(void 0).then(t),Z=O(P,!1),G=O(I,!0),z=t=>{const e=new URL(t,C.$resourcesUrl$);return e.origin!==w.location.origin?e.href:e.pathname},U=t=>C.$resourcesUrl$=t,F={},H=t=>"object"==(t=typeof t)||"function"===t;((t,e)=>{for(var n in e)o(t,n,{get:e[n],enumerable:!0})})({},{err:()=>B,map:()=>W,ok:()=>j,unwrap:()=>X,unwrapErr:()=>Q});var j=t=>({isOk:!0,isErr:!1,value:t}),B=t=>({isOk:!1,isErr:!0,value:t});function W(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then((t=>j(t))):j(n)}if(t.isErr){const e=t.value;return B(e)}throw"should never get here"}var Y,q,K,X=t=>{if(t.isOk)return t.value;throw t.value},Q=t=>{if(t.isErr)return t.value;throw t.value},J=0,tt=(t,e="")=>{if(i.profile&&performance.mark){const n=`st:${t}:${e}:${J++}`;return performance.mark(n),()=>performance.measure(`[Stencil] ${t}() <${e}>`,n)}return()=>{}},et=(t,e,...n)=>{let r=null,o=null,s=null,a=!1,l=!1;const c=[],u=e=>{for(let n=0;n<e.length;n++)r=e[n],Array.isArray(r)?u(r):null!=r&&"boolean"!=typeof r&&((a="function"!=typeof t&&!H(r))?r=String(r):i.isDev&&"function"!=typeof t&&void 0===r.$flags$&&h("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),a&&l?c[c.length-1].$text$+=r:c.push(a?nt(null,r):r),l=a)};if(u(n),e&&(i.isDev&&"input"===t&&lt(e),i.vdomKey&&e.key&&(o=e.key),i.slotRelocation&&e.name&&(s=e.name),i.vdomClass)){const t=e.className||e.class;t&&(e.class="object"!=typeof t?t:Object.keys(t).filter((e=>t[e])).join(" "))}if(i.isDev&&c.some(rt)&&h("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),i.vdomFunctional&&"function"==typeof t)return t(null===e?{}:e,c,ot);const d=nt(t,null);return d.$attrs$=e,c.length>0&&(d.$children$=c),i.vdomKey&&(d.$key$=o),i.slotRelocation&&(d.$name$=s),d},nt=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.vdomAttribute&&(n.$attrs$=null),i.vdomKey&&(n.$key$=null),i.slotRelocation&&(n.$name$=null),n},it={},rt=t=>t&&t.$tag$===it,ot={forEach:(t,e)=>t.map(st).forEach(e),map:(t,e)=>t.map(st).map(e).map(at)},st=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),at=t=>{if("function"==typeof t.vtag){const e={...t.vattrs};return t.vkey&&(e.key=t.vkey),t.vname&&(e.name=t.vname),et(t.vtag,e,...t.vchildren||[])}const e=nt(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},lt=t=>{const e=Object.keys(t),n=e.indexOf("value");if(-1===n)return;const i=e.indexOf("type"),r=e.indexOf("min"),o=e.indexOf("max"),s=e.indexOf("step");(n<i||n<r||n<o||n<s)&&p('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},ct=(t,e,n,r,o,s,a)=>{let l,c,u,d;if(1===s.nodeType){if(l=s.getAttribute(_),l&&(c=l.split("."),c[0]!==a&&"0"!==c[0]||(u={$flags$:0,$hostId$:c[0],$nodeId$:c[1],$depth$:c[2],$index$:c[3],$tag$:s.tagName.toLowerCase(),$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},e.push(u),s.removeAttribute(_),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u,t=u,r&&"0"===u.$depth$&&(r[u.$index$]=u.$elm$))),s.shadowRoot)for(d=s.shadowRoot.childNodes.length-1;d>=0;d--)ct(t,e,n,r,o,s.shadowRoot.childNodes[d],a);for(d=s.childNodes.length-1;d>=0;d--)ct(t,e,n,r,o,s.childNodes[d],a)}else if(8===s.nodeType)c=s.nodeValue.split("."),c[1]!==a&&"0"!==c[1]||(l=c[0],u={$flags$:0,$hostId$:c[1],$nodeId$:c[2],$depth$:c[3],$index$:c[4],$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===l?(u.$elm$=s.nextSibling,u.$elm$&&3===u.$elm$.nodeType&&(u.$text$=u.$elm$.textContent,e.push(u),s.remove(),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u,r&&"0"===u.$depth$&&(r[u.$index$]=u.$elm$))):u.$hostId$===a&&("s"===l?(u.$tag$="slot",c[5]?s["s-sn"]=u.$name$=c[5]:s["s-sn"]="",s["s-sr"]=!0,i.shadowDom&&r&&(u.$elm$=M.createElement(u.$tag$),u.$name$&&u.$elm$.setAttribute("name",u.$name$),s.parentNode.insertBefore(u.$elm$,s),s.remove(),"0"===u.$depth$&&(r[u.$index$]=u.$elm$)),n.push(u),t.$children$||(t.$children$=[]),t.$children$[u.$index$]=u):"r"===l&&(i.shadowDom&&r?s.remove():i.slotRelocation&&(o["s-cr"]=s,s["s-cn"]=!0))));else if(t&&"style"===t.$tag$){const e=nt(null,s.textContent);e.$elm$=s,e.$index$="0",t.$children$=[e]}},ut=(t,e)=>{if(1===t.nodeType){let n=0;if(t.shadowRoot)for(;n<t.shadowRoot.childNodes.length;n++)ut(t.shadowRoot.childNodes[n],e);for(n=0;n<t.childNodes.length;n++)ut(t.childNodes[n],e)}else if(8===t.nodeType){const n=t.nodeValue.split(".");"o"===n[0]&&(e.set(n[1]+"."+n[2],t),t.nodeValue="",t["s-en"]=n[3])}},dt=(t,e,n)=>{const r=(t=>i.lazyLoad?l(t).$hostElement$:t)(t);return{emit:t=>(i.isDev&&!r.isConnected&&p(`The "${e}" event was emitted, but the dispatcher node is no longer connected to the dom.`),ht(r,e,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:t}))}},ht=(t,e,n)=>{const i=C.ce(e,n);return t.dispatchEvent(i),i},pt=new WeakMap,ft=(t,e,n)=>{var r;const o=mt(e,n),s=m.get(o);if(!i.attachStyles)return o;if(t=11===t.nodeType?t:M,s)if("string"==typeof s){t=t.head||t;let n,a=pt.get(t);if(a||pt.set(t,a=new Set),!a.has(o)){if(i.hydrateClientSide&&t.host&&(n=t.querySelector(`[${v}="${o}"]`)))n.innerHTML=s;else{n=M.createElement("style"),n.innerHTML=s;const a=null!=(r=C.$nonce$)?r:function(t){var e,n,i;return null!=(i=null==(n=null==(e=t.head)?void 0:e.querySelector('meta[name="csp-nonce"]'))?void 0:n.getAttribute("content"))?i:void 0}(M);null!=a&&n.setAttribute("nonce",a),(i.hydrateServerSide||i.hotModuleReplacement)&&2&e.$flags$&&n.setAttribute(v,o),(!(1&e.$flags$)||1&e.$flags$&&"HEAD"!==t.nodeName)&&t.insertBefore(n,t.querySelector("link"))}4&e.$flags$&&(n.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),a&&a.add(o)}}else i.constructableCSS&&!t.adoptedStyleSheets.includes(s)&&(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return o},mt=(t,e)=>"sc-"+(i.mode&&e&&32&t.$flags$?t.$tagName$+"-"+e:t.$tagName$),gt=(t,e,n,r,o,s)=>{if(n!==r){let a=c(t,e),l=e.toLowerCase();if(i.vdomClass&&"class"===e){const e=t.classList,i=vt(n),o=vt(r);e.remove(...i.filter((t=>t&&!o.includes(t)))),e.add(...o.filter((t=>t&&!i.includes(t))))}else if(i.vdomStyle&&"style"===e){if(i.updatable)for(const e in n)r&&null!=r[e]||(!i.hydrateServerSide&&e.includes("-")?t.style.removeProperty(e):t.style[e]="");for(const e in r)n&&r[e]===n[e]||(!i.hydrateServerSide&&e.includes("-")?t.style.setProperty(e,r[e]):t.style[e]=r[e])}else if(i.vdomKey&&"key"===e);else if(i.vdomRef&&"ref"===e)r&&r(t);else if(!i.vdomListener||(i.lazyLoad?a:t.__lookupSetter__(e))||"o"!==e[0]||"n"!==e[1]){if(i.vdomPropOrAttr){const c=H(r);if((a||c&&null!==r)&&!o)try{if(t.tagName.includes("-"))t[e]=r;else{const i=null==r?"":r;"list"===e?a=!1:null!=n&&t[e]==i||(t[e]=i)}}catch(t){}let u=!1;i.vdomXlink&&l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,u=!0),null==r||!1===r?!1===r&&""!==t.getAttribute(e)||(i.vdomXlink&&u?t.removeAttributeNS(b,e):t.removeAttribute(e)):(!a||4&s||o)&&!c&&(r=!0===r?"":r,i.vdomXlink&&u?t.setAttributeNS(b,e,r):t.setAttribute(e,r))}}else if(e="-"===e[2]?e.slice(3):c(w,l)?l.slice(2):l[2]+e.slice(3),n||r){const i=e.endsWith(_t);e=e.replace(bt,""),n&&C.rel(t,e,n,i),r&&C.ael(t,e,r,i)}}},yt=/\s/,vt=t=>t?t.split(yt):[],_t="Capture",bt=new RegExp(_t+"$"),xt=(t,e,n)=>{const r=11===e.$elm$.nodeType&&e.$elm$.host?e.$elm$.host:e.$elm$,o=t&&t.$attrs$||F,s=e.$attrs$||F;if(i.updatable)for(const t of wt(Object.keys(o)))t in s||gt(r,t,o[t],void 0,n,e.$flags$);for(const t of wt(Object.keys(s)))gt(r,t,o[t],s[t],n,e.$flags$)};function wt(t){return t.includes("ref")?[...t.filter((t=>"ref"!==t)),"ref"]:t}var Mt=!1,St=!1,Ct=!1,Tt=!1,kt=(t,e,n,r)=>{var o;const s=e.$children$[n];let a,l,c,u=0;if(i.slotRelocation&&!Mt&&(Ct=!0,"slot"===s.$tag$&&(Y&&r.classList.add(Y+"-s"),s.$flags$|=s.$children$?2:1)),i.isDev&&s.$elm$&&h(`The JSX ${null!==s.$text$?`"${s.$text$}" text`:`"${s.$tag$}" element`} node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes`),i.vdomText&&null!==s.$text$)a=s.$elm$=M.createTextNode(s.$text$);else if(i.slotRelocation&&1&s.$flags$)a=s.$elm$=i.isDebug||i.hydrateServerSide?jt(s):M.createTextNode("");else{if(i.svg&&!Tt&&(Tt="svg"===s.$tag$),a=s.$elm$=i.svg?M.createElementNS(Tt?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!Mt&&i.slotRelocation&&2&s.$flags$?"slot-fb":s.$tag$):M.createElement(!Mt&&i.slotRelocation&&2&s.$flags$?"slot-fb":s.$tag$),i.svg&&Tt&&"foreignObject"===s.$tag$&&(Tt=!1),i.vdomAttribute&&xt(null,s,Tt),!!a.getRootNode().querySelector("body")&&i.scoped&&null!=Y&&a["s-si"]!==Y&&a.classList.add(a["s-si"]=Y),i.scoped&&Ft(a,r),s.$children$)for(u=0;u<s.$children$.length;++u)l=kt(t,s,u,a),l&&a.appendChild(l);i.svg&&("svg"===s.$tag$?Tt=!1:"foreignObject"===a.tagName&&(Tt=!0))}return a["s-hn"]=K,i.slotRelocation&&3&s.$flags$&&(a["s-sr"]=!0,a["s-cr"]=q,a["s-sn"]=s.$name$||"",a["s-rf"]=null==(o=s.$attrs$)?void 0:o.ref,c=t&&t.$children$&&t.$children$[n],c&&c.$tag$===s.$tag$&&t.$elm$&&(i.experimentalSlotFixes?Et(t.$elm$):$t(t.$elm$,!1))),a},Et=t=>{C.$flags$|=1;const e=t.closest(K.toLowerCase());if(null!=e){const n=Array.from(e.childNodes).find((t=>t["s-cr"])),i=Array.from(t.childNodes);for(const t of n?i.reverse():i)null!=t["s-sh"]&&(zt(e,t,null!=n?n:null),t["s-sh"]=void 0,Ct=!0)}C.$flags$&=-2},$t=(t,e)=>{C.$flags$|=1;const n=Array.from(t.childNodes);if(t["s-sr"]&&i.experimentalSlotFixes){let e=t;for(;e=e.nextSibling;)e&&e["s-sn"]===t["s-sn"]&&e["s-sh"]===K&&n.push(e)}for(let t=n.length-1;t>=0;t--){const i=n[t];i["s-hn"]!==K&&i["s-ol"]&&(zt(Ot(i),i,Rt(i)),i["s-ol"].remove(),i["s-ol"]=void 0,i["s-sh"]=void 0,Ct=!0),e&&$t(i,e)}C.$flags$&=-2},At=(t,e,n,r,o,s)=>{let a,l=i.slotRelocation&&t["s-cr"]&&t["s-cr"].parentNode||t;for(i.shadowDom&&l.shadowRoot&&l.tagName===K&&(l=l.shadowRoot);o<=s;++o)r[o]&&(a=kt(null,n,o,t),a&&(r[o].$elm$=a,zt(l,a,i.slotRelocation?Rt(e):e)))},Pt=(t,e,n)=>{for(let r=e;r<=n;++r){const e=t[r];if(e){const t=e.$elm$;Gt(e),t&&(i.slotRelocation&&(St=!0,t["s-ol"]?t["s-ol"].remove():$t(t,!0)),t.remove())}}},It=(t,e,n=!1)=>!(t.$tag$!==e.$tag$||(i.slotRelocation&&"slot"===t.$tag$?"$nodeId$"in t&&n&&8!==t.$elm$.nodeType||t.$name$!==e.$name$:i.vdomKey&&!n&&t.$key$!==e.$key$)),Rt=t=>t&&t["s-ol"]||t,Ot=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Lt=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,o=t.$children$,s=e.$children$,a=e.$tag$,l=e.$text$;let c;i.vdomText&&null!==l?i.vdomText&&i.slotRelocation&&(c=r["s-cr"])?c.parentNode.textContent=l:i.vdomText&&t.$text$!==l&&(r.data=l):(i.svg&&(Tt="svg"===a||"foreignObject"!==a&&Tt),(i.vdomAttribute||i.reflect)&&(i.slot&&"slot"===a&&!Mt?i.experimentalSlotFixes&&t.$name$!==e.$name$&&(e.$elm$["s-sn"]=e.$name$||"",Et(e.$elm$.parentElement)):xt(t,e,Tt)),i.updatable&&null!==o&&null!==s?((t,e,n,r,o=!1)=>{let s,a,l=0,c=0,u=0,d=0,h=e.length-1,p=e[0],f=e[h],m=r.length-1,g=r[0],y=r[m];for(;l<=h&&c<=m;)if(null==p)p=e[++l];else if(null==f)f=e[--h];else if(null==g)g=r[++c];else if(null==y)y=r[--m];else if(It(p,g,o))Lt(p,g,o),p=e[++l],g=r[++c];else if(It(f,y,o))Lt(f,y,o),f=e[--h],y=r[--m];else if(It(p,y,o))!i.slotRelocation||"slot"!==p.$tag$&&"slot"!==y.$tag$||$t(p.$elm$.parentNode,!1),Lt(p,y,o),zt(t,p.$elm$,f.$elm$.nextSibling),p=e[++l],y=r[--m];else if(It(f,g,o))!i.slotRelocation||"slot"!==p.$tag$&&"slot"!==y.$tag$||$t(f.$elm$.parentNode,!1),Lt(f,g,o),zt(t,f.$elm$,p.$elm$),f=e[--h],g=r[++c];else{if(u=-1,i.vdomKey)for(d=l;d<=h;++d)if(e[d]&&null!==e[d].$key$&&e[d].$key$===g.$key$){u=d;break}i.vdomKey&&u>=0?(a=e[u],a.$tag$!==g.$tag$?s=kt(e&&e[c],n,u,t):(Lt(a,g,o),e[u]=void 0,s=a.$elm$),g=r[++c]):(s=kt(e&&e[c],n,c,t),g=r[++c]),s&&(i.slotRelocation?zt(Ot(p.$elm$),s,Rt(p.$elm$)):zt(p.$elm$.parentNode,s,p.$elm$))}l>h?At(t,null==r[m+1]?null:r[m+1].$elm$,n,r,c,m):i.updatable&&c>m&&Pt(e,l,h)})(r,o,e,s,n):null!==s?(i.updatable&&i.vdomText&&null!==t.$text$&&(r.textContent=""),At(r,null,e,s,0,s.length-1)):!n&&i.updatable&&null!==o&&Pt(o,0,o.length-1),i.svg&&Tt&&"svg"===a&&(Tt=!1))},Vt=t=>{const e=t.childNodes;for(const t of e)if(1===t.nodeType){if(t["s-sr"]){const n=t["s-sn"];t.hidden=!1;for(const i of e)if(i!==t)if(i["s-hn"]!==t["s-hn"]||""!==n){if(1===i.nodeType&&(n===i.getAttribute("slot")||n===i["s-sn"])||3===i.nodeType&&n===i["s-sn"]){t.hidden=!0;break}}else if(1===i.nodeType||3===i.nodeType&&""!==i.textContent.trim()){t.hidden=!0;break}}Vt(t)}},Nt=[],Dt=t=>{let e,n,r;for(const o of t.childNodes){if(o["s-sr"]&&(e=o["s-cr"])&&e.parentNode){n=e.parentNode.childNodes;const t=o["s-sn"];for(r=n.length-1;r>=0;r--)if(e=n[r],!(e["s-cn"]||e["s-nr"]||e["s-hn"]===o["s-hn"]||i.experimentalSlotFixes&&e["s-sh"]&&e["s-sh"]===o["s-hn"]))if(Zt(e,t)){let n=Nt.find((t=>t.$nodeToRelocate$===e));St=!0,e["s-sn"]=e["s-sn"]||t,n?(n.$nodeToRelocate$["s-sh"]=o["s-hn"],n.$slotRefNode$=o):(e["s-sh"]=o["s-hn"],Nt.push({$slotRefNode$:o,$nodeToRelocate$:e})),e["s-sr"]&&Nt.map((t=>{Zt(t.$nodeToRelocate$,e["s-sn"])&&(n=Nt.find((t=>t.$nodeToRelocate$===e)),n&&!t.$slotRefNode$&&(t.$slotRefNode$=n.$slotRefNode$))}))}else Nt.some((t=>t.$nodeToRelocate$===e))||Nt.push({$nodeToRelocate$:e})}1===o.nodeType&&Dt(o)}},Zt=(t,e)=>1===t.nodeType?null===t.getAttribute("slot")&&""===e||t.getAttribute("slot")===e:t["s-sn"]===e||""===e,Gt=t=>{i.vdomRef&&(t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(Gt))},zt=(t,e,n)=>{const r=null==t?void 0:t.insertBefore(e,n);return i.scoped&&Ft(e,t),r},Ut=t=>{const e=[];return t&&e.push(...t["s-scs"]||[],t["s-si"],t["s-sc"],...Ut(t.parentElement)),e},Ft=(t,e,n=!1)=>{var i;if(t&&e&&1===t.nodeType){const r=new Set(Ut(e).filter(Boolean));if(r.size&&(null==(i=t.classList)||i.add(...t["s-scs"]=[...r]),t["s-ol"]||n))for(const e of Array.from(t.childNodes))Ft(e,t,!0)}},Ht=(t,e,n=!1)=>{var r,o,s,a,l;const c=t.$hostElement$,u=t.$cmpMeta$,d=t.$vnode$||nt(null,null),h=rt(e)?e:et(null,null,e);if(K=c.tagName,i.isDev&&Array.isArray(e)&&e.some(rt))throw new Error(`The <Host> must be the single root component.\nLooks like the render() function of "${K.toLowerCase()}" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  `);if(i.reflect&&u.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},u.$attrsToReflect$.map((([t,e])=>h.$attrs$[e]=c[t]))),n&&h.$attrs$)for(const t of Object.keys(h.$attrs$))c.hasAttribute(t)&&!["key","ref","style","class"].includes(t)&&(h.$attrs$[t]=c[t]);if(h.$tag$=null,h.$flags$|=4,t.$vnode$=h,h.$elm$=d.$elm$=i.shadowDom&&c.shadowRoot||c,(i.scoped||i.shadowDom)&&(Y=c["s-sc"]),Mt=T&&!!(1&u.$flags$),i.slotRelocation&&(q=c["s-cr"],St=!1),Lt(d,h,n),i.slotRelocation){if(C.$flags$|=1,Ct){Dt(h.$elm$);for(const t of Nt){const e=t.$nodeToRelocate$;if(!e["s-ol"]){const t=i.isDebug||i.hydrateServerSide?Bt(e):M.createTextNode("");t["s-nr"]=e,zt(e.parentNode,e["s-ol"]=t,e)}}for(const t of Nt){const e=t.$nodeToRelocate$,l=t.$slotRefNode$;if(l){const t=l.parentNode;let n=l.nextSibling;if(!i.experimentalSlotFixes||n&&1===n.nodeType){let i=null==(r=e["s-ol"])?void 0:r.previousSibling;for(;i;){let r=null!=(o=i["s-nr"])?o:null;if(r&&r["s-sn"]===e["s-sn"]&&t===r.parentNode){for(r=r.nextSibling;r===e||(null==r?void 0:r["s-sr"]);)r=null==r?void 0:r.nextSibling;if(!r||!r["s-nr"]){n=r;break}}i=i.previousSibling}}(!n&&t!==e.parentNode||e.nextSibling!==n)&&e!==n&&(i.experimentalSlotFixes||e["s-hn"]||!e["s-ol"]||(e["s-hn"]=e["s-ol"].parentNode.nodeName),zt(t,e,n),1===e.nodeType&&(e.hidden=null!=(s=e["s-ih"])&&s)),e&&"function"==typeof l["s-rf"]&&l["s-rf"](e)}else 1===e.nodeType&&(n&&(e["s-ih"]=null!=(a=e.hidden)&&a),e.hidden=!0)}}St&&Vt(h.$elm$),C.$flags$&=-2,Nt.length=0}if(i.experimentalScopedSlotChanges&&2&u.$flags$)for(const t of h.$elm$.childNodes)t["s-hn"]===K||t["s-sh"]||(n&&null==t["s-ih"]&&(t["s-ih"]=null!=(l=t.hidden)&&l),t.hidden=!0);q=void 0},jt=t=>M.createComment(`<slot${t.$name$?' name="'+t.$name$+'"':""}> (host=${K.toLowerCase()})`),Bt=t=>M.createComment("org-location for "+(t.localName?`<${t.localName}> (host=${t["s-hn"]})`:`[${t.textContent}]`)),Wt=(t,e)=>{i.asyncLoading&&e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((e=>t.$onRenderResolve$=e)))},Yt=(t,e)=>{if(i.taskQueue&&i.updatable&&(t.$flags$|=16),i.asyncLoading&&4&t.$flags$)return void(t.$flags$|=512);Wt(t,t.$ancestorComponent$);const n=()=>qt(t,e);return i.taskQueue?G(n):n()},qt=(t,e)=>{const n=t.$hostElement$,r=tt("scheduleUpdate",t.$cmpMeta$.$tagName$),o=i.lazyLoad?t.$lazyInstance$:n;if(!o)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let s;return e?(i.lazyLoad&&i.hostListener&&(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map((([t,e])=>ie(o,t,e))),t.$queuedListeners$=void 0)),re(n,"componentWillLoad"),i.cmpWillLoad&&(s=ie(o,"componentWillLoad"))):(re(n,"componentWillUpdate"),i.cmpWillUpdate&&(s=ie(o,"componentWillUpdate"))),re(n,"componentWillRender"),i.cmpWillRender&&(s=Kt(s,(()=>ie(o,"componentWillRender")))),r(),Kt(s,(()=>Qt(t,o,e)))},Kt=(t,e)=>Xt(t)?t.then(e).catch((t=>{console.error(t),e()})):e(),Xt=t=>t instanceof Promise||t&&t.then&&"function"==typeof t.then,Qt=async(t,e,n)=>{var r;const o=t.$hostElement$,s=tt("update",t.$cmpMeta$.$tagName$),a=o["s-rc"];i.style&&n&&(t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$,o=tt("attachStyles",e.$tagName$),s=ft(i.shadowDom&&T&&n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);(i.shadowDom||i.scoped)&&i.cssAnnotations&&10&r&&2&r&&(n["s-sc"]=s,n.classList.add(s+"-h"),i.scoped&&2&r&&n.classList.add(s+"-s")),o()})(t);const l=tt("render",t.$cmpMeta$.$tagName$);if(i.isDev&&(t.$flags$|=1024),i.hydrateServerSide?await Jt(t,e,o,n):Jt(t,e,o,n),i.isDev&&(t.$renderCount$=void 0===t.$renderCount$?1:t.$renderCount$+1,t.$flags$&=-1025),i.hydrateServerSide)try{se(o),n&&(1&t.$cmpMeta$.$flags$?o["s-en"]="":2&t.$cmpMeta$.$flags$&&(o["s-en"]="c"))}catch(t){u(t,o)}if(i.asyncLoading&&a&&(a.map((t=>t())),o["s-rc"]=void 0),l(),s(),i.asyncLoading){const e=null!=(r=o["s-p"])?r:[],n=()=>te(t);0===e.length?n():(Promise.all(e).then(n),t.$flags$|=4,e.length=0)}else te(t)},Jt=(t,e,n,r)=>{const o=!!i.allRenderFn,s=!!i.lazyLoad,a=!!i.taskQueue,l=!!i.updatable;try{if(e=(o||e.render)&&e.render(),l&&a&&(t.$flags$&=-17),(l||s)&&(t.$flags$|=2),i.hasRenderFn||i.reflect)if(i.vdomRender||i.reflect){if(i.hydrateServerSide)return Promise.resolve(e).then((e=>Ht(t,e,r)));Ht(t,e,r)}else{const i=n.shadowRoot;1&t.$cmpMeta$.$flags$?i.textContent=e:n.textContent=e}}catch(e){u(e,t.$hostElement$)}return null},te=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,r=tt("postUpdate",e),o=i.lazyLoad?t.$lazyInstance$:n,s=t.$ancestorComponent$;i.cmpDidRender&&(i.isDev&&(t.$flags$|=1024),ie(o,"componentDidRender"),i.isDev&&(t.$flags$&=-1025)),re(n,"componentDidRender"),64&t.$flags$?(i.cmpDidUpdate&&(i.isDev&&(t.$flags$|=1024),ie(o,"componentDidUpdate"),i.isDev&&(t.$flags$&=-1025)),re(n,"componentDidUpdate"),r()):(t.$flags$|=64,i.asyncLoading&&i.cssAnnotations&&oe(n),i.cmpDidLoad&&(i.isDev&&(t.$flags$|=2048),ie(o,"componentDidLoad"),i.isDev&&(t.$flags$&=-2049)),re(n,"componentDidLoad"),r(),i.asyncLoading&&(t.$onReadyResolve$(n),s||ne(e))),i.method&&i.lazyLoad&&t.$onInstanceResolve$(n),i.asyncLoading&&(t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&D((()=>Yt(t,!1))),t.$flags$&=-517)},ee=t=>{if(i.updatable&&(s.isBrowser||s.isTesting)){const e=l(t),n=e.$hostElement$.isConnected;return n&&2==(18&e.$flags$)&&Yt(e,!1),n}return!1},ne=t=>{i.cssAnnotations&&oe(M.documentElement),i.asyncQueue&&(C.$flags$|=2),D((()=>ht(w,"appload",{detail:{namespace:r}}))),i.profile&&performance.measure&&performance.measure(`[Stencil] ${r} initial load (by ${t})`,"st:app:start")},ie=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(t){u(t)}},re=(t,e)=>{i.lifecycleDOMEvents&&ht(t,"stencil_"+e,{bubbles:!0,composed:!0,detail:{namespace:r}})},oe=t=>{var e,n;return i.hydratedClass?t.classList.add(null!=(e=i.hydratedSelectorName)?e:"hydrated"):i.hydratedAttribute?t.setAttribute(null!=(n=i.hydratedSelectorName)?n:"hydrated",""):void 0},se=t=>{const e=t.children;if(null!=e)for(let t=0,n=e.length;t<n;t++){const n=e[t];"function"==typeof n.connectedCallback&&n.connectedCallback(),se(n)}},ae=(t,e,n)=>{var r,o;const s=t.prototype;if(i.formAssociated&&64&e.$flags$&&1&n&&x.forEach((t=>Object.defineProperty(s,t,{value(...e){const n=l(this),r=i.lazyLoad?n.$hostElement$:this,o=i.lazyLoad?n.$lazyInstance$:r;if(o){const n=o[t];"function"==typeof n&&n.call(o,...e)}else n.$onReadyPromise$.then((n=>{const i=n[t];"function"==typeof i&&i.call(n,...e)}))}}))),i.member&&e.$members$||i.watchCallback&&(e.$watchers$||t.watchers)){i.watchCallback&&t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const a=Object.entries(null!=(r=e.$members$)?r:{});if(a.map((([t,[r]])=>{(i.prop||i.state)&&(31&r||(!i.lazyLoad||2&n)&&32&r)?Object.defineProperty(s,t,{get(){return e=t,l(this).$instanceValues$.get(e);var e},set(o){if(i.isDev){const i=l(this);1&n||0!==(i&&8&i.$flags$)||!(31&r)||1024&r||p(`@Prop() "${t}" on <${e.$tagName$}> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability`)}((t,e,n,r)=>{const o=l(t);if(i.lazyLoad&&!o)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const s=i.lazyLoad?o.$hostElement$:t,a=o.$instanceValues$.get(e),c=o.$flags$,d=i.lazyLoad?o.$lazyInstance$:s;var h,f;h=n,f=r.$members$[e][0],n=null==h||H(h)?h:i.propBoolean&&4&f?"false"!==h&&(""===h||!!h):i.propNumber&&2&f?parseFloat(h):i.propString&&1&f?String(h):h;const m=Number.isNaN(a)&&Number.isNaN(n);if((!i.lazyLoad||!(8&c)||void 0===a)&&n!==a&&!m&&(o.$instanceValues$.set(e,n),i.isDev&&(1024&o.$flags$?p(`The state/prop "${e}" changed during rendering. This can potentially lead to infinite-loops and other bugs.`,"\nElement",s,"\nNew value",n,"\nOld value",a):2048&o.$flags$&&p(`The state/prop "${e}" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"`,"\nElement",s,"\nNew value",n,"\nOld value",a)),!i.lazyLoad||d)){if(i.watchCallback&&r.$watchers$&&128&c){const t=r.$watchers$[e];t&&t.map((t=>{try{d[t](n,a,e)}catch(t){u(t,s)}}))}if(i.updatable&&2==(18&c)){if(i.cmpShouldUpdate&&d.componentShouldUpdate&&!1===d.componentShouldUpdate(n,a,e))return;Yt(o,!1)}}})(this,t,o,e)},configurable:!0,enumerable:!0}):i.lazyLoad&&i.method&&1&n&&64&r&&Object.defineProperty(s,t,{value(...e){var n;const i=l(this);return null==(n=null==i?void 0:i.$onInstancePromise$)?void 0:n.then((()=>{var n;return null==(n=i.$lazyInstance$)?void 0:n[t](...e)}))}})})),i.observeAttribute&&(!i.lazyLoad||1&n)){const n=new Map;s.attributeChangedCallback=function(t,r,o){C.jmp((()=>{var a;const c=n.get(t);if(this.hasOwnProperty(c))o=this[c],delete this[c];else{if(s.hasOwnProperty(c)&&"number"==typeof this[c]&&this[c]==o)return;if(null==c){const n=l(this),s=null==n?void 0:n.$flags$;if(s&&!(8&s)&&128&s&&o!==r){const s=i.lazyLoad?n.$hostElement$:this,l=i.lazyLoad?n.$lazyInstance$:s,c=null==(a=e.$watchers$)?void 0:a[t];null==c||c.forEach((e=>{null!=l[e]&&l[e].call(l,o,r,t)}))}return}}this[c]=(null!==o||"boolean"!=typeof this[c])&&o}))},t.observedAttributes=Array.from(new Set([...Object.keys(null!=(o=e.$watchers$)?o:{}),...a.filter((([t,e])=>15&e[0])).map((([t,r])=>{var o;const s=r[1]||t;return n.set(s,t),i.reflect&&512&r[0]&&(null==(o=e.$attrsToReflect$)||o.push([t,s])),s}))]))}}return t},le=async(t,e,r,o)=>{let s;if(!(32&e.$flags$)){e.$flags$|=32;const c=r.$lazyBundleId$;if((i.lazyLoad||i.hydrateClientSide)&&c){const t=((t,e,r)=>{const o=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$;if(i.isDev&&"string"!=typeof s)return void h(`Trying to lazily load component <${t.$tagName$}> with style mode "${e.$modeName$}", but it does not exist.`);if(!s)return;const a=!i.hotModuleReplacement&&f.get(s);return a?a[o]:n(29976)(`./${s}.entry.js${i.hotModuleReplacement&&r?"?s-hmr="+r:""}`).then((t=>(i.hotModuleReplacement||f.set(s,t),t[o])),u)})(r,e,o);if(t&&"then"in t){const n=(a=`st:load:${r.$tagName$}:${e.$modeName$}`,l=`[Stencil] Load module for <${r.$tagName$}>`,i.profile&&performance.mark?(0===performance.getEntriesByName(a,"mark").length&&performance.mark(a),()=>{0===performance.getEntriesByName(l,"measure").length&&performance.measure(l,a)}):()=>{});s=await t,n()}else s=t;if(!s)throw new Error(`Constructor for "${r.$tagName$}#${e.$modeName$}" was not found`);i.member&&!s.isProxied&&(i.watchCallback&&(r.$watchers$=s.watchers),ae(s,r,2),s.isProxied=!0);const c=tt("createInstance",r.$tagName$);i.member&&(e.$flags$|=8);try{new s(e)}catch(t){u(t)}i.member&&(e.$flags$&=-9),i.watchCallback&&(e.$flags$|=128),c(),ce(e.$lazyInstance$)}else{s=t.constructor;const n=t.localName;customElements.whenDefined(n).then((()=>e.$flags$|=128))}if(i.style&&s&&s.style){let o;"string"==typeof s.style?o=s.style:i.mode&&"string"!=typeof s.style&&(e.$modeName$=(t=>g.map((e=>e(t))).find((t=>!!t)))(t),e.$modeName$&&(o=s.style[e.$modeName$]),i.hydrateServerSide&&e.$modeName$&&t.setAttribute("s-mode",e.$modeName$));const a=mt(r,e.$modeName$);if(!m.has(a)){const t=tt("registerStyles",r.$tagName$);!i.hydrateServerSide&&i.shadowDom&&i.shadowDomShim&&8&r.$flags$&&(o=await n.e(7948).then(n.bind(n,47948)).then((t=>t.scopeCss(o,a)))),((t,e,n)=>{let i=m.get(t);E&&n?(i=i||new CSSStyleSheet,"string"==typeof i?i=e:i.replaceSync(e)):i=e,m.set(t,i)})(a,o,!!(1&r.$flags$)),t()}}}var a,l;const c=e.$ancestorComponent$,d=()=>Yt(e,!0);i.asyncLoading&&c&&c["s-rc"]?c["s-rc"].push(d):d()},ce=t=>{i.lazyLoad&&i.connectedCallback&&ie(t,"connectedCallback")},ue=t=>{const e=t["s-cr"]=M.createComment(i.isDebug?`content-ref (host=${t.localName})`:"");e["s-cn"]=!0,zt(t,e,t.firstChild)},de=t=>{i.lazyLoad&&i.disconnectedCallback&&ie(t,"disconnectedCallback"),i.cmpDidUnload&&ie(t,"componentDidUnload")},he=t=>{const e=t.cloneNode;t.cloneNode=function(t){const n=this,r=!!i.shadowDom&&n.shadowRoot&&T,o=e.call(n,!!r&&t);if(i.slot&&!r&&t){let t,e,r=0;const s=["s-id","s-cr","s-lr","s-rc","s-sc","s-p","s-cn","s-sr","s-sn","s-hn","s-ol","s-nr","s-si","s-rf","s-scs"];for(;r<n.childNodes.length;r++)t=n.childNodes[r]["s-nr"],e=s.every((t=>!n.childNodes[r][t])),t&&(i.appendChildSlotFix&&o.__appendChild?o.__appendChild(t.cloneNode(!0)):o.appendChild(t.cloneNode(!0))),e&&o.appendChild(n.childNodes[r].cloneNode(!0))}return o}},pe=t=>{t.__appendChild=t.appendChild,t.appendChild=function(t){const e=t["s-sn"]=Me(t),n=Se(this.childNodes,e,this.tagName);if(n){const i=Ce(n,e),r=i[i.length-1],o=zt(r.parentNode,t,r.nextSibling);return Vt(this),o}return this.__appendChild(t)}},fe=t=>{t.__removeChild=t.removeChild,t.removeChild=function(t){if(t&&void 0!==t["s-sn"]){const e=Se(this.childNodes,t["s-sn"],this.tagName);if(e){const n=Ce(e,t["s-sn"]).find((e=>e===t));if(n)return n.remove(),void Vt(this)}}return this.__removeChild(t)}},me=t=>{const e=t.prepend;t.prepend=function(...t){t.forEach((t=>{"string"==typeof t&&(t=this.ownerDocument.createTextNode(t));const n=t["s-sn"]=Me(t),i=Se(this.childNodes,n,this.tagName);if(i){const e=document.createTextNode("");e["s-nr"]=t,i["s-cr"].parentNode.__appendChild(e),t["s-ol"]=e;const r=Ce(i,n)[0];return zt(r.parentNode,t,r.nextSibling)}return 1===t.nodeType&&t.getAttribute("slot")&&(t.hidden=!0),e.call(this,t)}))}},ge=t=>{t.append=function(...t){t.forEach((t=>{"string"==typeof t&&(t=this.ownerDocument.createTextNode(t)),this.appendChild(t)}))}},ye=t=>{const e=t.insertAdjacentHTML;t.insertAdjacentHTML=function(t,n){if("afterbegin"!==t&&"beforeend"!==t)return e.call(this,t,n);const i=this.ownerDocument.createElement("_");let r;if(i.innerHTML=n,"afterbegin"===t)for(;r=i.firstChild;)this.prepend(r);else if("beforeend"===t)for(;r=i.firstChild;)this.append(r)}},ve=t=>{t.insertAdjacentText=function(t,e){this.insertAdjacentHTML(t,e)}},_e=t=>{const e=t.insertAdjacentElement;t.insertAdjacentElement=function(t,n){return"afterbegin"!==t&&"beforeend"!==t?e.call(this,t,n):"afterbegin"===t?(this.prepend(n),n):"beforeend"===t?(this.append(n),n):n}},be=t=>{const e=Object.getOwnPropertyDescriptor(Node.prototype,"textContent");Object.defineProperty(t,"__textContent",e),i.experimentalScopedSlotChanges?Object.defineProperty(t,"textContent",{get(){return" "+we(this.childNodes).map((t=>{var e,n;const i=[];let r=t.nextSibling;for(;r&&r["s-sn"]===t["s-sn"];)3!==r.nodeType&&1!==r.nodeType||i.push(null!=(n=null==(e=r.textContent)?void 0:e.trim())?n:""),r=r.nextSibling;return i.filter((t=>""!==t)).join(" ")})).filter((t=>""!==t)).join(" ")+" "},set(t){we(this.childNodes).forEach((e=>{let n=e.nextSibling;for(;n&&n["s-sn"]===e["s-sn"];){const t=n;n=n.nextSibling,t.remove()}if(""===e["s-sn"]){const n=this.ownerDocument.createTextNode(t);n["s-sn"]="",zt(e.parentElement,n,e.nextSibling)}else e.remove()}))}}):Object.defineProperty(t,"textContent",{get(){var t;const e=Se(this.childNodes,"",this.tagName);return 3===(null==(t=null==e?void 0:e.nextSibling)?void 0:t.nodeType)?e.nextSibling.textContent:e?e.textContent:this.__textContent},set(t){var e;const n=Se(this.childNodes,"",this.tagName);if(3===(null==(e=null==n?void 0:n.nextSibling)?void 0:e.nodeType))n.nextSibling.textContent=t;else if(n)n.textContent=t;else{this.__textContent=t;const e=this["s-cr"];e&&zt(this,e,this.firstChild)}}})},xe=(t,e)=>{class n extends Array{item(t){return this[t]}}if(8&e.$flags$){const e=t.__lookupGetter__("childNodes");Object.defineProperty(t,"children",{get(){return this.childNodes.map((t=>1===t.nodeType))}}),Object.defineProperty(t,"childElementCount",{get(){return t.children.length}}),Object.defineProperty(t,"childNodes",{get(){const t=e.call(this);if(!(1&C.$flags$)&&2&l(this).$flags$){const e=new n;for(let n=0;n<t.length;n++){const i=t[n]["s-nr"];i&&e.push(i)}return e}return n.from(t)}})}},we=t=>{const e=[];for(const n of Array.from(t))n["s-sr"]&&e.push(n),e.push(...we(n.childNodes));return e},Me=t=>t["s-sn"]||1===t.nodeType&&t.getAttribute("slot")||"",Se=(t,e,n)=>{let i,r=0;for(;r<t.length;r++){if(i=t[r],i["s-sr"]&&i["s-sn"]===e&&i["s-hn"]===n)return i;if(i=Se(i.childNodes,e,n),i)return i}return null},Ce=(t,e)=>{const n=[t];for(;(t=t.nextSibling)&&t["s-sn"]===e;)n.push(t);return n},Te=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};var r,o;i.member&&(n.$members$=e[2]),i.hostListener&&(n.$listeners$=e[3]),i.watchCallback&&(n.$watchers$=t.$watchers$),i.reflect&&(n.$attrsToReflect$=[]),i.shadowDom&&!T&&1&n.$flags$&&(n.$flags$|=8),i.experimentalSlotFixes?i.scoped&&2&n.$flags$&&(r=t.prototype,o=n,he(r),pe(r),ge(r),me(r),_e(r),ye(r),ve(r),be(r),xe(r,o),fe(r)):(i.slotChildNodesFix&&xe(t.prototype,n),i.cloneNodeFix&&he(t.prototype),i.appendChildSlotFix&&pe(t.prototype),i.scopedSlotTextContentFix&&2&n.$flags$&&be(t.prototype));const s=t.prototype.connectedCallback,c=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){((t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};i.isDev&&(n.$renderCount$=0),i.method&&i.lazyLoad&&(n.$onInstancePromise$=new Promise((t=>n.$onInstanceResolve$=t))),i.asyncLoading&&(n.$onReadyPromise$=new Promise((t=>n.$onReadyResolve$=t)),t["s-p"]=[],t["s-rc"]=[]),a.set(t,n)})(this,n)},connectedCallback(){const t=l(this);Ee(this,t,n.$listeners$,!1),(t=>{if(!(1&C.$flags$)){const e=l(t),n=e.$cmpMeta$,r=tt("connectedCallback",n.$tagName$);if(i.hostListenerTargetParent&&Ee(t,e,n.$listeners$,!0),1&e.$flags$)Ee(t,e,n.$listeners$,!1),(null==e?void 0:e.$lazyInstance$)?ce(e.$lazyInstance$):(null==e?void 0:e.$onReadyPromise$)&&e.$onReadyPromise$.then((()=>ce(e.$lazyInstance$)));else{let r;if(e.$flags$|=1,i.hydrateClientSide&&(r=t.getAttribute(y),r)){if(i.shadowDom&&T&&1&n.$flags$){const e=i.mode?ft(t.shadowRoot,n,t.getAttribute("s-mode")):ft(t.shadowRoot,n);t.classList.remove(e+"-h",e+"-s")}((t,e,n,r)=>{const o=tt("hydrateClient",e),s=t.shadowRoot,a=[],l=i.shadowDom&&s?[]:null,c=r.$vnode$=nt(e,null);C.$orgLocNodes$||ut(M.body,C.$orgLocNodes$=new Map),t[y]=n,t.removeAttribute(y),ct(c,a,[],l,t,t,n),a.map((t=>{const n=t.$hostId$+"."+t.$nodeId$,i=C.$orgLocNodes$.get(n),r=t.$elm$;i&&T&&""===i["s-en"]&&i.parentNode.insertBefore(r,i.nextSibling),s||(r["s-hn"]=e,i&&(r["s-ol"]=i,r["s-ol"]["s-nr"]=r)),C.$orgLocNodes$.delete(n)})),i.shadowDom&&s&&l.map((t=>{t&&s.appendChild(t)})),o()})(t,n.$tagName$,r,e)}if(i.slotRelocation&&!r&&(i.hydrateServerSide||(i.slot||i.shadowDom)&&12&n.$flags$)&&ue(t),i.asyncLoading){let n=t;for(;n=n.parentNode||n.host;)if(i.hydrateClientSide&&1===n.nodeType&&n.hasAttribute("s-id")&&n["s-p"]||n["s-p"]){Wt(e,e.$ancestorComponent$=n);break}}i.prop&&!i.hydrateServerSide&&n.$members$&&Object.entries(n.$members$).map((([e,[n]])=>{if(31&n&&t.hasOwnProperty(e)){const n=t[e];delete t[e],t[e]=n}})),i.initializeNextTick?D((()=>le(t,e,n))):le(t,e,n)}r()}})(this),i.connectedCallback&&s&&s.call(this)},disconnectedCallback(){(async t=>{if(!(1&C.$flags$)){const e=l(t);i.hostListener&&e.$rmListeners$&&(e.$rmListeners$.map((t=>t())),e.$rmListeners$=void 0),i.lazyLoad?(null==e?void 0:e.$lazyInstance$)?de(e.$lazyInstance$):(null==e?void 0:e.$onReadyPromise$)&&e.$onReadyPromise$.then((()=>de(e.$lazyInstance$))):de(t)}})(this),i.disconnectedCallback&&c&&c.call(this)},__attachShadow(){if(T)if(this.shadowRoot){if("open"!==this.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${n.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else i.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)}):this.attachShadow({mode:"open"});else this.shadowRoot=this}}),t.is=n.$tagName$,ae(t,n,3)},ke=(t,e)=>e,Ee=(t,e,n,r)=>{i.hostListener&&n&&(i.hostListenerTargetParent&&(n=r?n.filter((([t])=>32&t)):n.filter((([t])=>!(32&t)))),n.map((([n,r,o])=>{const s=i.hostListenerTarget?Ae(t,n):t,a=$e(e,o),l=Pe(n);C.ael(s,r,a,l),(e.$rmListeners$=e.$rmListeners$||[]).push((()=>C.rel(s,r,a,l)))})))},$e=(t,e)=>n=>{var r;try{i.lazyLoad?256&t.$flags$?null==(r=t.$lazyInstance$)||r[e](n):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,n]):t.$hostElement$[e](n)}catch(t){u(t)}},Ae=(t,e)=>i.hostListenerTargetDocument&&4&e?M:i.hostListenerTargetWindow&&8&e?w:i.hostListenerTargetBody&&16&e?M.body:i.hostListenerTargetParent&&32&e&&t.parentElement?t.parentElement:t,Pe=t=>k?{passive:!!(1&t),capture:!!(2&t)}:!!(2&t)},2075:function(t,e,n){"use strict";n.d(e,{a:function(){return v},b:function(){return j},c:function(){return _},f:function(){return b},g:function(){return M},h:function(){return A},u:function(){return x}}),n(58941);var i=n(40633),r=n(15774),o=n(89736),s=n(73364),a=n(39714),l=n(20551),c=n(32501),u=n(87416),d=n(72485),h=n(73313),p=n(5596),f=n(79578),m=n(29531),g=n(50973);const y=()=>i.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function v(t=N){return{plane:(0,p.vt)(t.plane),origin:(0,c.o8)(t.origin),basis1:(0,c.o8)(t.basis1),basis2:(0,c.o8)(t.basis2)}}function _(t,e=v()){return b(t.origin,t.basis1,t.basis2,e)}function b(t,e,n,i=v()){return(0,l.c)(i.origin,t),(0,l.c)(i.basis1,e),(0,l.c)(i.basis2,n),x(i),function(t,e){Math.abs((0,l.f)(t.basis1,t.basis2)/((0,l.l)(t.basis1)*(0,l.l)(t.basis2)))>1e-6&&y().warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,l.f)(t.basis1,I(t)))>1e-6&&y().warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,l.f)(I(t),t.origin)-t.plane[3])>1e-6&&y().warn(e,"Plane offset is not consistent with plane origin")}(i,"fromValues()"),i}function x(t){(0,p.mR)(t.basis2,t.basis1,t.origin,t.plane)}function w(t,e,n){t!==n&&_(t,n);const i=(0,l.h)(g.rq.get(),I(t),e);return(0,l.g)(n.origin,n.origin,i),n.plane[3]-=e,n}function M(t,e=v()){const n=(t[2]-t[0])/2,i=(t[3]-t[1])/2;return(0,l.i)(e.origin,t[0]+n,t[1]+i,0),(0,l.i)(e.basis1,n,0,0),(0,l.i)(e.basis2,0,i,0),(0,p.fA)(0,0,1,0,e.plane),e}function S(t,e,n){return!!(0,p.Ui)(t.plane,e,n)&&R(t,n)}function C(t,e,n){const i=D.get();V(t,e,i,D.get());let o=Number.POSITIVE_INFINITY;for(const s of U){const a=L(t,s,Z.get()),c=g.rq.get();if((0,p.T7)(i,a,c)){const t=(0,l.o)(g.rq.get(),e.origin,c),i=Math.abs((0,r.XM)((0,l.f)(e.direction,t)));i<o&&(o=i,(0,l.c)(n,c))}}return o===Number.POSITIVE_INFINITY?T(t,e,n):n}function T(t,e,n){if(S(t,e,n))return n;const i=D.get(),r=D.get();V(t,e,i,r);let o=Number.POSITIVE_INFINITY;for(const s of U){const a=L(t,s,Z.get()),c=g.rq.get();if((0,p.gv)(i,a,c)){const t=(0,f.kb)(e,c);if(!(0,p.Tj)(r,c))continue;t<o&&(o=t,(0,l.c)(n,c))}}return $(t,e.origin)<o&&k(t,e.origin,n),n}function k(t,e,n){const i=(0,p._I)(t.plane,e,g.rq.get()),r=(0,h.H6)(O(t,t.basis1),i,-1,1,g.rq.get()),o=(0,h.H6)(O(t,t.basis2),i,-1,1,g.rq.get());return(0,l.d)(n,(0,l.g)(g.rq.get(),r,o),t.origin),n}function E(t,e,n){const{origin:i,basis1:r,basis2:o}=t,s=(0,l.d)(g.rq.get(),e,i),a=(0,m.gr)(r,s),c=(0,m.gr)(o,s),u=(0,m.gr)(I(t),s);return(0,l.i)(n,a,c,u)}function $(t,e){const n=E(t,e,g.rq.get()),{basis1:i,basis2:r}=t,o=(0,l.l)(i),s=(0,l.l)(r),a=Math.max(Math.abs(n[0])-o,0),c=Math.max(Math.abs(n[1])-s,0),u=n[2];return a*a+c*c+u*u}function A(t,e){return Math.sqrt($(t,e))}function P(t,e){const n=-t.plane[3];return(0,m.gr)(I(t),e)-n}function I(t){return(0,p.Qj)(t.plane)}function R(t,e){const n=(0,l.d)(g.rq.get(),e,t.origin),i=(0,l.k)(t.basis1),r=(0,l.k)(t.basis2),o=(0,l.f)(t.basis1,n),s=(0,l.f)(t.basis2,n);return-o-i<0&&o-i<0&&-s-r<0&&s-r<0}function O(t,e){const n=Z.get();return(0,l.c)(n.origin,t.origin),(0,l.c)(n.vector,e),n}function L(t,e,n){const{basis1:i,basis2:r,origin:o}=t,s=(0,l.h)(g.rq.get(),i,e.origin[0]),a=(0,l.h)(g.rq.get(),r,e.origin[1]);(0,l.g)(n.origin,s,a),(0,l.g)(n.origin,n.origin,o);const c=(0,l.h)(g.rq.get(),i,e.direction[0]),u=(0,l.h)(g.rq.get(),r,e.direction[1]);return(0,l.h)(n.vector,(0,l.g)(c,c,u),2),n}function V(t,e,n,i){const r=I(t);(0,p.mR)(r,e.direction,e.origin,n),(0,p.mR)((0,p.Qj)(n),r,e.origin,i)}const N={plane:(0,p.vt)(),origin:(0,c.fA)(0,0,0),basis1:(0,c.fA)(1,0,0),basis2:(0,c.fA)(0,1,0)},D=new o.I(p.vt),Z=new o.I(h.vt),G=(0,c.vt)(),z=new o.I((()=>v())),U=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],F=(0,a.vt)(),H=(0,a.vt)(),j=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=(0,p.vt)(),this.origin=(0,c.vt)(),this.basis1=(0,c.vt)(),this.basis2=(0,c.vt)()}},altitudeAt:P,axisAt:function(t,e,n,i){return function(t,e,n){switch(e){case d._.X:(0,l.c)(n,t.basis1),(0,l.n)(n,n);break;case d._.Y:(0,l.c)(n,t.basis2),(0,l.n)(n,n);break;case d._.Z:(0,l.c)(n,I(t))}return n}(t,n,i)},cameraFrustumCoverage:function(t,e){return(e-t)/e},closestPoint:T,closestPointOnSilhouette:C,copy:_,copyWithoutVerify:function(t,e){(0,l.c)(e.origin,t.origin),(0,l.c)(e.basis1,t.basis1),(0,l.c)(e.basis2,t.basis2),(0,p.C)(e.plane,t.plane)},create:v,distance:A,distance2:$,distanceToSilhouette:function(t,e){let n=Number.NEGATIVE_INFINITY;for(const i of U){const r=L(t,i,Z.get()),o=(0,h.kb)(r,e);o>n&&(n=o)}return Math.sqrt(n)},elevate:w,equals:function(t,e){return(0,l.p)(t.basis1,e.basis1)&&(0,l.p)(t.basis2,e.basis2)&&(0,l.p)(t.origin,e.origin)},extrusionContainsPoint:function(t,e){return(0,p.Tj)(t.plane,e)&&R(t,e)},fromAABoundingRect:M,fromValues:b,getExtent:function(t,e){const n=t.basis1[0],i=t.basis2[1],[r,o]=t.origin;return(0,u.fA)(r-n,o-i,r+n,o+i,e)},intersectRay:S,intersectRayClosestSilhouette:function(t,e,n){if(S(t,e,n))return n;const i=C(t,e,g.rq.get());return(0,l.g)(n,e.origin,(0,l.h)(g.rq.get(),e.direction,(0,l.j)(e.origin,i)/(0,l.l)(e.direction))),n},normal:I,projectPoint:k,projectPointLocal:E,rotate:function(t,e,n,i){return t!==i&&_(t,i),(0,s.$0)(H,e,n),(0,l.t)(i.basis1,t.basis1,H),(0,l.t)(i.basis2,t.basis2,H),x(i),i},setAltitudeAt:function(t,e,n,i){const r=P(t,e),o=(0,l.h)(G,I(t),n-r);return(0,l.g)(i,e,o),i},setExtent:function(t,e,n){return M(e,n),w(n,P(t,t.origin),n),n},transform:function(t,e,n){return t!==n&&_(t,n),(0,s.B8)(F,e),(0,s.mg)(F,F),(0,l.t)(n.basis1,t.basis1,F),(0,l.t)(n.basis2,t.basis2,F),(0,l.t)((0,p.Qj)(n.plane),(0,p.Qj)(t.plane),F),(0,l.t)(n.origin,t.origin,e),(0,p.mP)(n.plane,n.plane,n.origin),n},up:N,updateUnboundedPlane:x,wrap:function(t,e,n){const i=z.get();return i.origin=t,i.basis1=e,i.basis2=n,i.plane=(0,p.LV)(0,0,0,0),x(i),i}},Symbol.toStringTag,{value:"Module"}))},59122:function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,o,a,l,c,u,h,p=e&&e.length,f=p?e[0]*n:t.length,m=r(t,0,f,n,!0),g=[];if(!m||m.next===m.prev)return g;if(p&&(m=d(t,e,m,n)),t.length>80*n){i=a=t[0],o=l=t[1];for(var y=n;y<f;y+=n)(c=t[y])<i&&(i=c),(u=t[y+1])<o&&(o=u),c>a&&(a=c),u>l&&(l=u);h=0!==(h=Math.max(a-i,l-o))?1/h:0}return s(m,g,n,i,o,h),g}function r(t,e,n,i,r){var o,s;if(r===P(t,e,n,i)>0)for(o=e;o<n;o+=i)s=E(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=E(o,t[o],t[o+1],s);if(s&&w(s,s.next)){var a=s.next;$(s),s=a}return s}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!w(i,i.next)&&0!==x(i.prev,i,i.next))i=i.next;else{var r=i.prev;if($(i),(i=e=r)===i.next)break;n=!0}}while(n||i!==e);return e}function s(t,e,n,i,r,d,h){if(t){!h&&d&&g(t,i,r,d);for(var p,f,m=t;t.prev!==t.next;)if(p=t.prev,f=t.next,d?l(t,i,r,d):a(t))e.push(p.i/n),e.push(t.i/n),e.push(f.i/n),$(t),t=f.next,m=f.next;else if((t=f)===m){h?1===h?s(t=c(o(t),e,n),e,n,i,r,d,2):2===h&&u(t,e,n,i,r,d):s(o(t),e,n,i,r,d,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(x(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&x(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,n,i){var r=t.prev,o=t,s=t.next;if(x(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,d=y(a,l,e,n,i),h=y(c,u,e,n,i),p=t.prevZ,f=t.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&_(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,o.x,o.y,s.x,s.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==t.prev&&f!==t.next&&_(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function c(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!w(r,s)&&M(r,i,i.next,s)&&T(r,s)&&T(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),$(i),$(i.next),i=t=s),i=i.next}while(i!==t);return o(i)}function u(t,e,n,i,r,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&b(l,c)){var u=k(l,c);return l=o(l,l.next),u=o(u,u.next),s(l,e,n,i,r,a),void s(u,e,n,i,r,a)}c=c.next}l=l.next}while(l!==t)}function d(t,e,n,i){var s,a,l,c=[];for(s=0,a=e.length;s<a;s++)(l=r(t,e[s]*i,s<a-1?e[s+1]*i:t.length,i,!1))===l.next&&(l.steiner=!0),c.push(v(l));for(c.sort(h),s=0;s<c.length;s++)n=o(n=f(c[s],n),n.next);return n}function h(t,e){return t.x-e.x}function p(t){if(t.next.prev===t)return t;let e=t;for(;;){const n=e.next;if(n.prev===e||n===e||n===t)break;e=n}return e}function f(t,e){var n=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n;var l,c=n,u=n.x,d=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&_(o<d?r:s,o,u,d,o<d?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),T(i,t)&&(l<h||l===h&&(i.x>n.x||i.x===n.x&&m(n,i)))&&(n=i,h=l)),i=i.next}while(i!==c);return n}(t,e);if(!n)return e;var i=k(n,t),r=o(n,n.next);let s=p(i);return o(s,s.next),r=p(r),p(e===n?r:e)}function m(t,e){return x(t.prev,t,e.prev)<0&&x(e.next,t,t.next)<0}function g(t,e,n,i){var r=t;do{null===r.z&&(r.z=y(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}function y(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function _(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(x(t.prev,t,e.prev)||x(t,e.prev,e))||w(t,e)&&x(t.prev,t,t.next)>0&&x(e.prev,e,e.next)>0)}function x(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,i){var r=C(x(t,e,n)),o=C(x(t,e,i)),s=C(x(n,i,t)),a=C(x(n,i,e));return r!==o&&s!==a||!(0!==r||!S(t,n,e))||!(0!==o||!S(t,i,e))||!(0!==s||!S(n,t,i))||!(0!==a||!S(n,e,i))}function S(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function C(t){return t>0?1:t<0?-1:0}function T(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function k(t,e){var n=new A(t.i,t.x,t.y),i=new A(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function E(t,e,n,i){var r=new A(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function $(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}n.d(e,{e:function(){return i}}),i.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(P(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;s-=Math.abs(P(t,c,u,n))}var d=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,p=i[a+1]*n,f=i[a+2]*n;d+=Math.abs((t[h]-t[f])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[f+1]-t[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},69296:function(t,e,n){"use strict";var i;n.d(e,{u:function(){return i}}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(i||(i={}))},85876:function(t,e,n){"use strict";n.d(e,{A:function(){return o}});var i=n(44567),r=n(87085);class o{constructor(t){this._observable=new r.I,this._set=new Set(t)}get size(){return(0,i.gc)(this._observable),this._set.size}add(t){const e=this._set.size;return this._set.add(t),this._set.size!==e&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const e=this._set.delete(t);return e&&this._observable.notify(),e}entries(){return(0,i.gc)(this._observable),this._set.entries()}forEach(t,e){(0,i.gc)(this._observable),this._set.forEach(((n,i)=>t.call(e,n,i,this)),e)}has(t){return(0,i.gc)(this._observable),this._set.has(t)}keys(){return(0,i.gc)(this._observable),this._set.keys()}values(){return(0,i.gc)(this._observable),this._set.values()}[Symbol.iterator](){return(0,i.gc)(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}},84016:function(t,e,n){"use strict";n.d(e,{O:function(){return r}});var i=n(25591);const r=()=>i.default.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches},72952:function(t,e,n){"use strict";n.d(e,{EB:function(){return p},Im:function(){return g},Mj:function(){return h},Ui:function(){return m},w2:function(){return f}});var i=n(83525),r=n(78879),o=n(63693);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(t){return t instanceof i.A}function l(t){return t instanceof r.A?Object.keys(t.items):a(t)?(0,o.oY)(t).keys():t?Object.keys(t):[]}function c(t,e){return t instanceof r.A?t.items[e]:t[e]}function u(t){return t?t.declaredClass:null}function d(t,e){const n=t.diff;if(n&&"function"==typeof n)return n(t,e);const i=l(t),r=l(e);if(0===i.length&&0===r.length)return;if(!i.length||!r.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,e))return{type:"complete",oldValue:t,newValue:e};const o=r.filter((t=>!i.includes(t))),h=i.filter((t=>!r.includes(t))),p=i.filter((n=>r.includes(n)&&c(t,n)!==c(e,n))).concat(o,h).sort(),f=u(t);if(f&&s.has(f)&&p.length)return{type:"complete",oldValue:t,newValue:e};let m;const g=a(t)&&a(e);for(const i of p){const r=c(t,i),o=c(e,i);let s;if((g||"function"!=typeof r&&"function"!=typeof o)&&r!==o&&(null!=r||null!=o)){if(n&&n[i]&&"function"==typeof n[i])s=n[i]?.(r,o);else if(r instanceof Date&&o instanceof Date){if(r.getTime()===o.getTime())continue;s={type:"complete",oldValue:r,newValue:o}}else s="object"==typeof r&&"object"==typeof o&&u(r)===u(o)?d(r,o):{type:"complete",oldValue:r,newValue:o};null!=s&&(null!=m?m.diff[i]=s:m={type:"partial",diff:{[i]:s}})}}return m}function h(t,e){return p(t,e)}function p(t,e){if(null==t)return!1;const n=e.split(".");let i=t;for(const t of n){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const e=i.diff[t];if(!e)return!1;i=e}}return!0}function f(t,e){if(!t)return!1;if("partial"===t.type){const n=Object.keys(t.diff);return 1===n.length&&n[0]===e}return!1}function m(t,e){if("function"!=typeof t&&"function"!=typeof e&&(null!=t||null!=e))return null==t||null==e||"object"==typeof t&&"object"==typeof e&&u(t)!==u(e)?{type:"complete",oldValue:t,newValue:e}:d(t,e)}function g(t){if(null==t)return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const t of e.added)if(!g(t))return!1;for(const t of e.removed)if(!g(t))return!1;for(const t of e.changed)if(!g(t))return!1;return!0}case"partial":for(const e in t.diff)if(!g(t.diff[e]))return!1;return!0}}},75505:function(t,e,n){"use strict";n.d(e,{$:function(){return v},IB:function(){return a},Iy:function(){return I},N2:function(){return _},QP:function(){return $},RH:function(){return x},Vl:function(){return E},Ws:function(){return w},ZD:function(){return b},_L:function(){return k},bJ:function(){return C},e$:function(){return T},f6:function(){return P},pW:function(){return M},pf:function(){return A}});var i=n(52874),r=n(50659),o=n(21609),s=(n(33400),n(41546));function a(t){return"r"in t&&"g"in t&&"b"in t}function l(t){return"h"in t&&"s"in t&&"v"in t}function c(t){return"l"in t&&"a"in t&&"b"in t}function u(t){return"l"in t&&"c"in t&&"h"in t}const d=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],h=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function p(t,e){const n=[];let i,r;if(t[0].length!==e.length)throw new Error("dimensions do not match");const o=t.length,s=t[0].length;let a=0;for(i=0;i<o;i++){for(a=0,r=0;r<s;r++)a+=t[i][r]*e[r];n.push(a)}return n}function f(t){const e=[t.r/255,t.g/255,t.b/255].map((t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4)),n=p(d,e);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function m(t){const e=p(h,[t.x/100,t.y/100,t.z/100]).map((t=>{const e=t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055;return Math.min(1,Math.max(e,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function g(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function y(t){const e=t.l,n=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((t=>t>6/29?t**3:3*(6/29)**2*(t-4/29)));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function v(t){return a(t)?t:u(t)?function(t){return m(y(function(t){const e=t.l,n=t.c,i=t.h;return{l:e,a:n*Math.cos(i),b:n*Math.sin(i)}}(t)))}(t):c(t)?function(t){return m(y(t))}(t):function(t){return"x"in t&&"y"in t&&"z"in t}(t)?m(t):l(t)?function(t){const e=(t.h+360)%360/60,n=t.s/100,i=t.v/100*255,r=i*n,o=r*(1-Math.abs(e%2-1));let s;switch(Math.floor(e)){case 0:s={r:r,g:o,b:0};break;case 1:s={r:o,g:r,b:0};break;case 2:s={r:0,g:r,b:o};break;case 3:s={r:0,g:o,b:r};break;case 4:s={r:o,g:0,b:r};break;case 5:case 6:s={r:r,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+i-r),s.g=Math.round(s.g+i-r),s.b=Math.round(s.b+i-r),s}(t):t}function _(t){return l(t)?t:function(t){const e=t.r,n=t.g,i=t.b,r=Math.max(e,n,i),o=r-Math.min(e,n,i);let s=r,a=0===o?0:r===e?(n-i)/o%6:r===n?(i-e)/o+2:(e-n)/o+4,l=0===o?0:o/s;return a<0&&(a+=6),a*=60,l*=100,s*=100/255,{h:a,s:l,v:s}}(v(t))}function b(t){return c(t)?t:function(t){return g(f(t))}(v(t))}function x(t){return u(t)?t:function(t){return function(t){const e=t.l,n=t.a,i=t.b,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o=o>0?o:o+2*Math.PI,{l:e,c:r,h:o}}(g(f(t)))}(v(t))}function w(t,e){const{r:n,g:r,b:o}=e?.ignoreAlpha?t:function(t){let{r:e,g:n,b:r,a:o}=t;return o<1&&(e=Math.round(o*e+255*(1-o)),n=Math.round(o*n+255*(1-o)),r=Math.round(o*r+255*(1-o))),new i.A({r:e,g:n,b:r})}(t);return.2126*n+.7152*r+.0722*o}var M,S;function C(t,e=M.High){return w(t,{ignoreAlpha:!0})>e?new i.A([0,0,0,t.a]):new i.A([255,255,255,t.a])}function T(t,e){const n=b(t);n.l*=1-e;const i=v(n),r=t.clone();return r.setColor(i),r.a=t.a,r}function k(t,e){const n=t.clone();return n.a*=e,n}function E(t,e){const n=_(t);n.s*=e;const i=v(n),r=t.clone();return r.setColor(i),r.a=t.a,r}function $(t){return i.A.toUnitRGBA(t)}function A(t){return(0,s.fA)(t[0],t[1],t[2],t.length>3?t[3]:1)}function P(t,e){const n=i.A.toUnitRGBA(t);return n[3]*=e,n}function I(t,e,n={}){if(0===t.length||e<=0)return[];if(1===(t=t.map((t=>"string"==typeof t?new i.A(t):t))).length||1===e){const n=[],i=t[0];for(let t=0;t<e;t++)n.push(i.clone());return n}if(n.shuffle&&(t=(0,r.k4)((0,o.o8)(t),n.seed)),t.length>=e){const n=[],i=(t.length-1)/(e-1);for(let r=0;r<e;r++){const e=Math.round(r*i);n.push(t[e].clone())}return n}return function(t,e,n={}){const i=[],o=t.length-1,s=Math.ceil((e-t.length)/o);t:for(let r=0;r<o;r++){const o=t[r],a=t[r+1];for(let r=1;r<=s;r++){const l=r/(s+1);if(i.push(O(o,a,l,n)),i.length+t.length===e)break t}}return[...t.map((t=>t.clone())),...(0,r.k4)(i,n.seed??1)]}(t,e,n)}(S=M||(M={}))[S.Low=160]="Low",S[S.High=225]="High";const R=(t,e)=>{const n=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+n))};function O(t,e,n,o={}){const s=t.r,a=t.g,l=t.b,c=e.r,u=e.g,d=e.b,h=Math.round(s+(c-s)*n),p=Math.round(a+(u-a)*n),f=Math.round(l+(d-l)*n);if(!o.offset)return new i.A([h,p,f]);const m=(0,r.Mo)(o.seed);return new i.A([R(h,m),R(p,m),R(f,m)])}},88264:function(t,e,n){"use strict";function i(t){return"string"==typeof t?document.getElementById(t):t??null}function r(t,e){for(;;){const n=t.firstChild;if(!n)break;e.appendChild(n)}}n.d(e,{$:function(){return i},y:function(){return r}})},12978:function(t,e,n){"use strict";function i(){return[1,0,0,1,0,0]}function r(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}n.d(e,{o8:function(){return r},vt:function(){return i}});Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:[1,0,0,1,0,0],clone:r,create:i,createView:function(t,e){return new Float64Array(t,e,6)},fromValues:function(t,e,n,i,r,o){return[t,e,n,i,r,o]}},Symbol.toStringTag,{value:"Module"}))},67348:function(t,e,n){"use strict";n.d(e,{$0:function(){return d},B8:function(){return s},CV:function(){return h},D_:function(){return r},Tl:function(){return u},e$:function(){return l},hZ:function(){return o},hs:function(){return c},kN:function(){return p},lw:function(){return a}});var i=n(8527);function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t,e,n,i,r,o,s){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t}function s(t,e){const n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5];let l=n*o-i*r;return l?(l=1/l,t[0]=o*l,t[1]=-i*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*a-o*s)*l,t[5]=(i*s-n*a)*l,t):null}function a(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=n[0],u=n[1],d=n[2],h=n[3],p=n[4],f=n[5];return t[0]=i*c+o*u,t[1]=r*c+s*u,t[2]=i*d+o*h,t[3]=r*d+s*h,t[4]=i*p+o*f+a,t[5]=r*p+s*f+l,t}function l(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*c,t[1]=r*u+s*c,t[2]=i*-c+o*u,t[3]=r*-c+s*u,t[4]=a,t[5]=l,t}function c(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i*c,t[1]=r*c,t[2]=o*u,t[3]=s*u,t[4]=a,t[5]=l,t}function u(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=s,t[4]=i*c+o*u+a,t[5]=r*c+s*u+l,t}function d(t,e){const n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function h(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function p(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}const m=a,g=f;Object.freeze(Object.defineProperty({__proto__:null,add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},equals:function(t,e){const n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=e[0],u=e[1],d=e[2],h=e[3],p=e[4],f=e[5],m=(0,i.FD)();return Math.abs(n-c)<=m*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-u)<=m*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-d)<=m*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-h)<=m*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(a-p)<=m*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(l-f)<=m*Math.max(1,Math.abs(l),Math.abs(f))},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},frob:function(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)},fromRotation:d,fromScaling:h,fromTranslation:p,identity:r,invert:s,mul:m,multiply:a,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},multiplyScalarAndAdd:function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t},rotate:l,scale:c,set:o,str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},sub:g,subtract:f,translate:u},Symbol.toStringTag,{value:"Module"}))},32237:function(t,e,n){"use strict";n.d(e,{A6:function(){return g},B8:function(){return p},Xd:function(){return u},Xr:function(){return f},Yc:function(){return P},hZ:function(){return v},lw:function(){return d},t2:function(){return $},x8:function(){return c}});var i=n(87725),r=n(61769),o=n(32501),s=n(8527),a=n(20551),l=n(33400);function c(t,e,n){n*=.5;const i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function u(t,e){const n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>(0,s.FD)()?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function d(t,e,n){const i=e[0],r=e[1],o=e[2],s=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+s*a+r*c-o*l,t[1]=r*u+s*l+o*a-i*c,t[2]=o*u+s*c+i*l-r*a,t[3]=s*u-i*a-r*l-o*c,t}function h(t,e,n,i){const r=e[0],o=e[1],a=e[2],l=e[3];let c,u,d,h,p,f=n[0],m=n[1],g=n[2],y=n[3];return u=r*f+o*m+a*g+l*y,u<0&&(u=-u,f=-f,m=-m,g=-g,y=-y),1-u>(0,s.FD)()?(c=Math.acos(u),d=Math.sin(c),h=Math.sin((1-i)*c)/d,p=Math.sin(i*c)/d):(h=1-i,p=i),t[0]=h*r+p*f,t[1]=h*o+p*m,t[2]=h*a+p*g,t[3]=h*l+p*y,t}function p(t,e){const n=e[0],i=e[1],r=e[2],o=e[3],s=n*n+i*i+r*r+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=o*a,t}function f(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function m(t,e){const n=e[0]+e[4]+e[8];let i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3;i=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*o+o]+1),t[n]=.5*i,i=.5/i,t[3]=(e[3*r+o]-e[3*o+r])*i,t[r]=(e[3*r+n]+e[3*n+r])*i,t[o]=(e[3*o+n]+e[3*n+o])*i}return t}function g(t,e,n,i){const r=.5*Math.PI/180;e*=r,n*=r,i*=r;const o=Math.sin(e),s=Math.cos(e),a=Math.sin(n),l=Math.cos(n),c=Math.sin(i),u=Math.cos(i);return t[0]=o*l*u-s*a*c,t[1]=s*a*u+o*l*c,t[2]=s*l*c-o*a*u,t[3]=s*l*u+o*a*c,t}const y=l.c,v=l.s,_=l.g,b=d,x=l.d,w=l.h,M=l.l,S=l.j,C=S,T=l.b,k=T,E=l.n,$=l.a,A=l.e;function P(t,e,n){const i=(0,a.f)(e,n);return i<-.999999?((0,a.e)(I,R,e),(0,a.G)(I)<1e-6&&(0,a.e)(I,O,e),(0,a.n)(I,I),c(t,I,Math.PI),t):i>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,a.e)(I,e,n),t[0]=I[0],t[1]=I[1],t[2]=I[2],t[3]=1+i,E(t,t))}const I=(0,o.vt)(),R=(0,o.fA)(1,0,0),O=(0,o.fA)(0,1,0),L=(0,r.vt)(),V=(0,r.vt)(),N=(0,i.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:_,calculateW:function(t,e){const n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},conjugate:f,copy:y,dot:w,equals:A,exactEquals:$,fromEuler:g,fromMat3:m,getAxisAngle:u,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:p,len:C,length:S,lerp:M,mul:b,multiply:d,normalize:E,random:function(t){const e=s.Ov,n=e(),i=e(),r=e(),o=Math.sqrt(1-n),a=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*i),t[1]=o*Math.cos(2*Math.PI*i),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t},rotateX:function(t,e,n){n*=.5;const i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+s*a,t[1]=r*l+o*a,t[2]=o*l-r*a,t[3]=s*l-i*a,t},rotateY:function(t,e,n){n*=.5;const i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-o*a,t[1]=r*l+s*a,t[2]=o*l+i*a,t[3]=s*l-r*a,t},rotateZ:function(t,e,n){n*=.5;const i=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=o*l+s*a,t[3]=s*l-o*a,t},rotationTo:P,scale:x,set:v,setAxes:function(t,e,n,i){const r=N;return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],E(t,m(t,r))},setAxisAngle:c,slerp:h,sqlerp:function(t,e,n,i,r,o){return h(L,e,r,o),h(V,n,i,o),h(t,L,V,2*o*(1-o)),t},sqrLen:k,squaredLength:T,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},7213:function(t,e,n){"use strict";function i(t){let e,n,i=[],r=!1;return function(...o){return r&&e===this&&function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(o,i)||(n=t.apply(this,o),e=this,i=o,r=!0),n}}n.d(e,{B:function(){return i}})},88226:function(t,e,n){"use strict";n.d(e,{Jd:function(){return p},Nk:function(){return l},OM:function(){return h},Oo:function(){return d},ix:function(){return c},yh:function(){return u}});var i=n(16691),r=n(56275),o=n(15999);function s(t,e,n,i=2,s="abbr"){return(0,o.zJ)(t,(0,r.kM)(e,n).value,n,i,s)}function a(t,e,n,i=2,s="abbr"){return(0,o.nD)(t,(0,r.kM)(e,n).value,n,i,s)}function l(t,e,n,r=i.ie,s=!0){return(0,o.Me)(t.value,t.unit,t.rotationType,e,n,r,s)}function c(t,e,n,i,r="abbr"){switch(i=i??2,n){case"imperial":return function(t,e,n=2,i="abbr"){return(0,o.tr)(t,e.value,e.unit,n,i)}(t,e,i,r);case"metric":return function(t,e,n=2,i="abbr"){return(0,o.Ee)(t,e.value,e.unit,n,i)}(t,e,i,r);default:return s(t,e,n,i,r)}}function u(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return function(t,e,n=2,i="abbr"){return(0,o.J1)(t,e.value,e.unit,n,i)}(t,e,i,r);case"metric":return function(t,e,n=2,i="abbr"){return(0,o.Mm)(t,e.value,e.unit,n,i)}(t,e,i,r);default:return a(t,e,n,i,r)}}function d(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return function(t,e,n=2,i="abbr"){return(0,o.t_)(t,e.value,e.unit,n,i)}(t,e,i,r);case"metric":return function(t,e,n=2,i="abbr"){return(0,o.W4)(t,e.value,e.unit,n,i)}(t,e,i,r);default:return s(t,e,n,i,r)}}function h(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return function(t,e,n=2,i="abbr"){return(0,o.LF)(t,e.value,e.unit,n,i)}(t,e,i,r);case"metric":return function(t,e,n=2,i="abbr"){return(0,o.e_)(t,e.value,e.unit,n,i)}(t,e,i,r);default:return a(t,e,n,i,r)}}function p(t,e,n,i=2,r="abbr"){switch(n){case"imperial":return function(t,e,n=2,i="abbr"){return(0,o.Sz)(t,e.value,e.unit,n,i)}(t,e,i,r);case"metric":return function(t,e,n=2,i="abbr"){return(0,o.zq)(t,e.value,e.unit,n,i)}(t,e,i,r);default:return s(t,e,n,i,r)}}},20248:function(t,e,n){"use strict";n.d(e,{U:function(){return u}});var i=n(53804),r=n(83525),o=n(61226),s=n(28181),a=n(74087),l=n(23502),c=n(65953);let u=class extends r.A{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,e,n={}){return this._installWatch(t,e,n,s.watch)}addWhen(t,e,n={}){return this._installWatch(t,e,n,s.when)}addOnCollectionChange(t,e,{initial:n=!1,final:i=!1}={}){const r=++this._handleId;return this.addHandles([(0,s.on)(t,"after-changes",this._createSyncUpdatingCallback(),s.OH),(0,s.on)(t,"change",e,{onListenerAdd:n?t=>e({added:t.toArray(),removed:[]}):void 0,onListenerRemove:i?t=>e({added:[],removed:t.toArray()}):void 0})],r),(0,o.hA)((()=>this.removeHandles(r)))}addPromise(t){if(null==t)return t;const e=++this._handleId;this.addHandles((0,o.hA)((()=>{this._pendingPromises.delete(t)&&(0!==this._pendingPromises.size||this.hasHandles(d)||this._set("updating",!1))})),e),this._pendingPromises.add(t),this._set("updating",!0);const n=()=>this.removeHandles(e);return t.then(n,n),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,e,n={},i){const r=++this._handleId;n.sync||this._installSyncUpdatingWatch(t,r);const s=i(t,e,n);return this.addHandles(s,r),(0,o.hA)((()=>this.removeHandles(r)))}_installSyncUpdatingWatch(t,e){const n=this._createSyncUpdatingCallback(),i=(0,s.watch)(t,n,{sync:!0,equals:()=>!1});return this.addHandles(i,e),i}_createSyncUpdatingCallback(){return()=>{this.removeHandles(d),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles((0,a._)((()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(d))})),d)}}};(0,i._)([(0,l.MZ)({readOnly:!0})],u.prototype,"updating",void 0),u=(0,i._)([(0,c.$)("esri.core.support.UpdatingHandles")],u);const d=-42},15999:function(t,e,n){"use strict";n.d(e,{Cq:function(){return u},Ee:function(){return p},J1:function(){return v},LF:function(){return b},Me:function(){return S},Mm:function(){return f},Sz:function(){return w},W4:function(){return m},e_:function(){return g},nD:function(){return h},t_:function(){return _},tr:function(){return y},v7:function(){return k},zJ:function(){return d},zq:function(){return x}});var i=n(69296),r=n(16691),o=n(15774),s=n(56275),a=n(50944),l=n(62938),c=n(2900);function u(t,e,n){return t.units[e][n]}function d(t,e,n,i=2,r="abbr"){return`${(0,c.ZV)(e,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:e>0?"never":"exceptZero"})} ${u(t,n,r)}`}function h(t,e,n,i=2,r="abbr"){return`${(0,c.ZV)(e,{minimumFractionDigits:i,maximumFractionDigits:i,signDisplay:"exceptZero"})} ${u(t,n,r)}`}function p(t,e,n,i=2,r="abbr"){const o=(0,l.x0)(e,n);return d(t,(0,l.oU)(e,n,o),o,i,r)}function f(t,e,n,i=2,r="abbr"){const o=(0,l.x0)(e,n);return h(t,(0,l.oU)(e,n,o),o,i,r)}function m(t,e,n,i=2,r="abbr"){const o=(0,l.x$)(e,n);return d(t,(0,l.oU)(e,n,o),o,i,r)}function g(t,e,n,i=2,r="abbr"){const o=(0,l.x$)(e,n);return h(t,(0,l.oU)(e,n,o),o,i,r)}function y(t,e,n,i=2,r="abbr"){const o=(0,l.OU)(e,n);return d(t,(0,l.oU)(e,n,o),o,i,r)}function v(t,e,n,i=2,r="abbr"){const o=(0,l.OU)(e,n);return h(t,(0,l.oU)(e,n,o),o,i,r)}function _(t,e,n,i=2,r="abbr"){const o=(0,l.y7)(e,n);return d(t,(0,l.oU)(e,n,o),o,i,r)}function b(t,e,n,i=2,r="abbr"){const o=(0,l.y7)(e,n);return h(t,(0,l.oU)(e,n,o),o,i,r)}function x(t,e,n,i=2,r="abbr"){const o=(0,l.wv)(e,n);return d(t,(0,l.oU)(e,n,o),o,i,r)}function w(t,e,n,i=2,r="abbr"){const o=(0,l.TL)(e,n);return d(t,(0,l.oU)(e,n,o),o,i,r)}const M=(t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"});function S(t,e,n,i,o,a=r.ie,u=!0){let d=a.normalize((0,s.g2)((0,l.oU)(t,e,"degrees"),n,i),0,u);const h=M(d,o??2);return d=function(t,e){const n=JSON.stringify(e);let i=C.get(n);return i||(i=new Intl.NumberFormat("en-US",e),C.set(n,i)),/^[-+]?360\.?0*?$/.test(i.format(t))?0:t}(d,h),(0,c.ZV)(d,h)}const C=new Map;const T=["B","kB","MB","GB","TB"];function k(t,e){let n=0===(e=Math.round(e))?0:Math.floor(Math.log(e)/Math.log(i.u.KILOBYTES));n=(0,o.qE)(n,0,T.length-1);const r=(0,c.ZV)(e/i.u.KILOBYTES**n,{maximumFractionDigits:2});return(0,a.HC)(t.units.bytes[T[n]],{fileSize:r})}},66110:function(t,e,n){"use strict";n.d(e,{AG:function(){return a},lk:function(){return r},vD:function(){return s},yS:function(){return o}});const i="randomUUID"in crypto;function r(){if(i)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=e=>t[e].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function o(){return`{${r().toUpperCase()}}`}function s(){return`{${r()}}`}function a(t){const e=t.toUpperCase();return"{"!==t[0]?`{${e}}`:e}},6338:function(t,e,n){"use strict";n.d(e,{Hh:function(){return c},mT:function(){return d},o6:function(){return u},s1:function(){return l},ts:function(){return h}});var i=n(39819),r=n(38305),o=n(45532),s=n(57165),a=n(2900);function l(){return(0,r.i)()}function c(){return(0,r.l)()}function u(t,e){const n=[];t=(t=(t=t.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("","'")).replaceAll("",'"');const a=function(t){let e=null;if(t||(t=s.A.WGS84),t.wkid){if(e=r.P.geogcs(t.wkid),!e)throw new i.A("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!t.wkt2&&!t.wkt)throw new i.A("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(e=r.P.fromString(r.a.PE_TYPE_GEOGCS,t.wkt2||t.wkt),!e)throw new i.A("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return e}(e);return r.c.dmsToGeog(a,1,[t],n)?new o.default(n[0][0],n[0][1],e||s.A.WGS84):null}function d(t){return t&&l()?(0,a.$J)(t)??u(`0 0' 0" N | ${t}`)?.longitude??u(`0 | ${t}`)?.longitude??null:null}function h(t){return t&&l()?(0,a.$J)(t)??u(`${t} | 0 0' 0" E`)?.latitude??u(`${t} | 0`)?.latitude??null:null}},96611:function(t,e,n){"use strict";n.d(e,{Y0:function(){return c},lO:function(){return u}});var i=n(61714),r=n(57165),o=n(57652);const s=new r.A(i.fv),a=new r.A(i.FY),l=new r.A(i.LJ),c=new r.A(i.Ro);function u(t){const e=d.get(t);if(e)return e;let n=s;if(t)if(t===a)n=a;else if(t===l)n=l;else{const e=t.wkid,i=t.latestWkid;if(null!=e||null!=i)(0,o.tl)(e)||(0,o.tl)(i)?n=a:((0,o.ZL)(e)||(0,o.ZL)(i))&&(n=l);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===h?n=a:t===p&&(n=l)}}}return d.set(t,n),n}const d=new Map,h=a.wkt.toUpperCase(),p=l.wkt.toUpperCase()},65907:function(t,e,n){"use strict";n.d(e,{A:function(){return d}});var i,r=n(53804),o=n(75743),s=n(30905),a=n(23502),l=(n(58941),n(40633),n(13798),n(74376)),c=n(65953);let u=i=class extends((0,o.O)(s.oY)){constructor(t){super(t),this.type="georeferenced",this.origin=null}};u.absolute=new i,(0,r._)([(0,l.e)({georeferenced:"georeferenced"},{readOnly:!0})],u.prototype,"type",void 0),(0,r._)([(0,a.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],u.prototype,"origin",void 0),u=i=(0,r._)([(0,c.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],u);const d=u},20460:function(t,e,n){"use strict";n.d(e,{A:function(){return d}});var i=n(53804),r=n(75743),o=n(30905),s=n(23502),a=(n(58941),n(40633),n(13798),n(74376)),l=n(65953),c=n(32501);let u=class extends((0,r.O)(o.oY)){constructor(t){super(t),this.type="local",this.origin=(0,c.vt)()}};(0,i._)([(0,a.e)({local:"local"},{readOnly:!0})],u.prototype,"type",void 0),(0,i._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"origin",void 0),u=(0,i._)([(0,l.$)("esri.geometry.support.MeshLocalVertexSpace")],u);const d=u},36405:function(t,e,n){"use strict";n.d(e,{A:function(){return g}});var i,r=n(53804),o=n(30905),s=n(23502),a=(n(58941),n(40633),n(13798),n(65953)),l=n(73364),c=n(39714),u=n(32237),d=n(61769),h=n(32501),p=n(26133);let f=i=class extends o.oY{constructor(t){super(t),this.translation=(0,h.vt)(),this.rotationAxis=(0,h.ci)(p.up),this.rotationAngle=0,this.scale=(0,h.fA)(1,1,1)}get rotation(){return(0,p.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,h.o8)((0,p.yo)(t)),this.rotationAngle=(0,p.g7)(t)}get localMatrix(){const t=(0,c.vt)();return(0,u.x8)(m,(0,p.yo)(this.rotation),(0,p.$I)(this.rotation)),(0,l.o1)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.B8)((0,c.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,l.t2)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,h.o8)(this.translation),rotationAxis:(0,h.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,h.o8)(this.scale)};return new i(t)}};(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"translation",void 0),(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAxis",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAngle",void 0),(0,r._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"scale",void 0),(0,r._)([(0,s.MZ)()],f.prototype,"rotation",null),(0,r._)([(0,s.MZ)()],f.prototype,"localMatrix",null),(0,r._)([(0,s.MZ)()],f.prototype,"localMatrixInverse",null),f=i=(0,r._)([(0,a.$)("esri.geometry.support.MeshTransform")],f);const m=(0,d.vt)(),g=f},26133:function(t,e,n){"use strict";n.d(e,{$I:function(){return y},AU:function(){return f},Cr:function(){return d},g7:function(){return g},i4:function(){return u},ui:function(){return h},up:function(){return _},vt:function(){return c},yo:function(){return m}});var i=n(15774),r=n(73364),o=n(32237),s=n(61769),a=n(20551),l=n(32501);function c(t=_){return[t[0],t[1],t[2],t[3]]}function u(t,e,n=c()){return(0,a.c)(n,t),n[3]=e,n}function d(t,e,n){return(0,a.e)(n,t,e),(0,a.n)(n,n),n[3]=-(0,a.r)(t,e),n}function h(t,e=c()){const n=(0,r.l)(b,t);return v(e,(0,i.KJ)((0,o.Xd)(e,n))),e}function p(t,e,n=c()){return(0,o.x8)(b,t,y(t)),(0,o.x8)(x,e,y(e)),(0,o.lw)(b,x,b),v(n,(0,i.KJ)((0,o.Xd)(n,b)))}function f(t,e,n,i=c()){return u(l.Cw,t,w),u(l.JP,e,M),u(l.Cb,n,S),p(w,M,w),p(w,S,i),i}function m(t){return t}function g(t){return t[3]}function y(t){return(0,i.kU)(t[3])}function v(t,e){return t[3]=e,t}const _=[0,0,1,0],b=(0,s.vt)(),x=(0,s.vt)(),w=(c(),c()),M=c(),S=c()},73313:function(t,e,n){"use strict";n.d(e,{C:function(){return c},Cr:function(){return d},H6:function(){return m},_I:function(){return p},dz:function(){return g},fA:function(){return u},kb:function(){return h},ld:function(){return y},sd:function(){return f},vt:function(){return l}});var i=n(15774),r=n(89736),o=n(20551),s=n(32501),a=n(50973);function l(t){return t?{origin:(0,s.o8)(t.origin),vector:(0,s.o8)(t.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function c(t,e=l()){return u(t.origin,t.vector,e)}function u(t,e,n=l()){return(0,o.c)(n.origin,t),(0,o.c)(n.vector,e),n}function d(t,e,n=l()){return(0,o.c)(n.origin,t),(0,o.d)(n.vector,e,t),n}function h(t,e){const n=(0,o.d)(a.rq.get(),e,t.origin),r=(0,o.f)(t.vector,n),s=(0,o.f)(t.vector,t.vector),l=(0,i.qE)(r/s,0,1),c=(0,o.d)(a.rq.get(),(0,o.h)(a.rq.get(),t.vector,l),n);return(0,o.f)(c,c)}function p(t,e,n){return m(t,e,0,1,n)}function f(t,e,n){return(0,o.g)(n,t.origin,(0,o.h)(n,t.vector,e))}function m(t,e,n,r,s){const{vector:l,origin:c}=t,u=(0,o.d)(a.rq.get(),e,c),d=(0,o.f)(l,u)/(0,o.k)(l);return(0,o.h)(s,l,(0,i.qE)(d,n,r)),(0,o.g)(s,s,t.origin)}function g(t,e){if(v(t,function(t,e){const n=b.get();return n.origin=t,n.vector=e,n}(e.origin,e.direction),!1,_)){const{tA:e,pB:n,distance2:i}=_;if(e>=0&&e<=1)return i;if(e<0)return(0,o.s)(t.origin,n);if(e>1)return(0,o.s)((0,o.g)(a.rq.get(),t.origin,t.vector),n)}return null}function y(t,e,n){return!!v(t,e,!0,_)&&((0,o.c)(n,_.pA),!0)}function v(t,e,n,r){const s=1e-6,l=t.origin,c=(0,o.g)(a.rq.get(),l,t.vector),u=e.origin,d=(0,o.g)(a.rq.get(),u,e.vector),h=a.rq.get(),p=a.rq.get();if(h[0]=l[0]-u[0],h[1]=l[1]-u[1],h[2]=l[2]-u[2],p[0]=d[0]-u[0],p[1]=d[1]-u[1],p[2]=d[2]-u[2],Math.abs(p[0])<s&&Math.abs(p[1])<s&&Math.abs(p[2])<s)return!1;const f=a.rq.get();if(f[0]=c[0]-l[0],f[1]=c[1]-l[1],f[2]=c[2]-l[2],Math.abs(f[0])<s&&Math.abs(f[1])<s&&Math.abs(f[2])<s)return!1;const m=h[0]*p[0]+h[1]*p[1]+h[2]*p[2],g=p[0]*f[0]+p[1]*f[1]+p[2]*f[2],y=h[0]*f[0]+h[1]*f[1]+h[2]*f[2],v=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],_=(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])*v-g*g;if(Math.abs(_)<s)return!1;let b=(m*g-y*v)/_,x=(m+g*b)/v;n&&(b=(0,i.qE)(b,0,1),x=(0,i.qE)(x,0,1));const w=a.rq.get(),M=a.rq.get();return w[0]=l[0]+b*f[0],w[1]=l[1]+b*f[1],w[2]=l[2]+b*f[2],M[0]=u[0]+x*p[0],M[1]=u[1]+x*p[1],M[2]=u[2]+x*p[2],r.tA=b,r.tB=x,r.pA=w,r.pB=M,r.distance2=(0,o.s)(w,M),!0}const _={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},b=new r.I((()=>l()))},67376:function(t,e,n){"use strict";n.d(e,{CK:function(){return h},E9:function(){return u},Hq:function(){return d},MW:function(){return p},TE:function(){return f},yJ:function(){return m}});var i=n(88022),r=n(40633),o=n(20551),s=n(45532),a=n(65907),l=n(20460);function c(){return r.A.getLogger("esri.geometry.Mesh")}function u(t){return!d(t)}function d(t){return null!=t.origin}function h(t){return d(t.vertexSpace)}function p(t,e){if(!d(t))return null;const[n,i,r]=t.origin;return new s.default({x:n,y:i,z:r,spatialReference:e})}function f(t,e){const{x:n,y:r,z:o,spatialReference:s}=t,u=[n,r,o??0];return void 0!==e?.geographic&&((0,i.io)(c(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),e.vertexSpace&&c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(e?.vertexSpace??(d=e?.geographic,null==d?void 0:d?"local":"georeferenced")??function(t){return t.isGeographic||t.isWebMercator?"local":"georeferenced"}(s))?new l.A({origin:u}):new a.A({origin:u});var d}function m(t,e){return t.type===e.type&&(t.origin===e.origin||null!=t.origin&&null!=e.origin&&(0,o.p)(t.origin,e.origin))}},67496:function(t,e,n){"use strict";n.d(e,{Fm:function(){return a},Q7:function(){return l}});var i=n(89736),r=n(20551),o=n(32501),s=n(73313);function a(t,e,n){const i=e[0]-t[0],r=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1];return.5*Math.abs(i*s-r*o)}function l(t,e,n){return(0,r.d)(c,e,t),(0,r.d)(u,n,t),.5*(0,r.l)((0,r.e)(c,c,u))}n(50973),new i.I(s.vt),new i.I((()=>{return t?{p0:(0,o.o8)(t.p0),p1:(0,o.o8)(t.p1),p2:(0,o.o8)(t.p2)}:{p0:(0,o.vt)(),p1:(0,o.vt)(),p2:(0,o.vt)()};var t}));const c=(0,o.vt)(),u=(0,o.vt)()},42413:function(t,e,n){"use strict";n.d(e,{CI:function(){return o},fk:function(){return s}}),n(58941);var i=n(15774),r=n(57652);function o(t,e){return t===e||null!=t&&null!=e&&(0,r.aI)(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function s(t,e,n){return t===e||null!=t&&null!=e&&(0,r.aI)(t.spatialReference,e.spatialReference)&&(0,i.Sp)(t.x,e.x,n)&&(0,i.Sp)(t.y,e.y,n)&&(0,i.Sp)(t.z??0,e.z??0,n)&&(0,i.Sp)(t.m??0,e.m??0,n)}},45328:function(t,e,n){"use strict";n.d(e,{EL:function(){return g},RS:function(){return y},gr:function(){return c},wP:function(){return d},wZ:function(){return h}}),n(50917);var i=n(59469),r=(n(58941),n(21609)),o=n(24540),s=n(74697),a=n(46460),l=n(57165);function c(t){return"declaredClass"in t}function u(t){return"declaredClass"in t}function d(t,e){return t?"declaredClass"in t?t:new i.default({layer:e,sourceLayer:e,visible:t.visible,symbol:(0,r.o8)(t.symbol),attributes:(0,r.o8)(t.attributes),geometry:h(t.geometry)}):null}function h(t){return null==t?null:c(t)?t:(0,s.rS)(function(t){const{wkid:e,wkt:n,wkt2:i,latestWkid:r}=t.spatialReference,o={wkid:e,wkt:n,wkt2:i,latestWkid:r};switch(t.type){case"point":{const{x:e,y:n,z:i,m:r}=t;return{x:e,y:n,z:i,m:r,spatialReference:o}}case"polygon":{const{rings:e,hasZ:n,hasM:i}=t;return{rings:p(e),hasZ:n,hasM:i,spatialReference:o}}case"polyline":{const{paths:e,hasZ:n,hasM:i}=t;return{paths:p(e),hasZ:n,hasM:i,spatialReference:o}}case"extent":{const{xmin:e,xmax:n,ymin:i,ymax:r,zmin:s,zmax:a,mmin:l,mmax:c,hasZ:u,hasM:d}=t;return{xmin:e,xmax:n,ymin:i,ymax:r,zmin:s,zmax:a,mmin:l,mmax:c,hasZ:u,hasM:d,spatialReference:o}}case"multipoint":{const{points:e,hasZ:n,hasM:i}=t;return{points:m(e)?f(e):e,hasZ:n,hasM:i,spatialReference:o}}default:return}}(t))}function p(t){return function(t){for(const e of t)if(0!==e.length)return m(e);return!1}(t)?t.map((t=>f(t))):t}function f(t){return t.map((t=>Array.from(t)))}function m(t){return t.length>0&&((0,o.vZ)(t[0])||(0,o.aI)(t[0]))}function g(t,e){if(!t)return null;let n;if(u(t)){if(null==e)return t.clone();if(u(e))return e.copy(t)}return null!=e?(n=e,n.x=t.x,n.y=t.y,n.spatialReference=t.spatialReference,t.hasZ?(n.z=t.z,n.hasZ=t.hasZ):(n.z=void 0,n.hasZ=!1),t.hasM?(n.m=t.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,a.T)(t.x,t.y,t.z,t.spatialReference),t.hasM&&(n.m=t.m,n.hasM=!0)),n}function y(t){const{wkid:e,wkt:n,wkt2:i,latestWkid:r}=t,o={wkid:e,wkt:n,wkt2:i,latestWkid:r};return l.A.fromJSON(o)}},47558:function(t,e,n){"use strict";n.d(e,{T:function(){return s}});var i=n(60539),r=n(85445),o=n(55213);class s{constructor(){this._tasks=new Array,this._runningTasks=(0,r.v)(0)}get length(){return this._tasks.length}get running(){return this._runningTasks.value>0}destroy(){this.cancelAll()}runTask(t){if(0===this.length)return o.G;for(;!t.done&&this._process(t);)t.madeProgress()}push(t,e,n){return++this._runningTasks.value,new Promise(((i,r)=>this._tasks.push(new a(i,r,t,e,n)))).finally((()=>--this._runningTasks.value))}unshift(t,e,n){return++this._runningTasks.value,new Promise(((i,r)=>this._tasks.unshift(new a(i,r,t,e,n)))).finally((()=>--this._runningTasks.value))}_process(t){if(0===this._tasks.length)return!1;const e=this._tasks.shift();try{const n=(0,i.G4)(e.signal);if(n&&!e.abortCallback)e.reject((0,i.NK)());else{const r=n?e.abortCallback?.((0,i.NK)()):e.callback(t);(0,i.$X)(r)?r.then(e.resolve,e.reject):e.resolve(r)}}catch(t){e.reject(t)}return!0}cancelAll(){const t=(0,i.NK)();for(const e of this._tasks)if(e.abortCallback){const n=e.abortCallback(t);e.resolve(n)}else e.reject(t);this._tasks.length=0}}class a{constructor(t,e,n,i=void 0,r=void 0){this.resolve=t,this.reject=e,this.callback=n,this.signal=i,this.abortCallback=r}}},92781:function(t,e,n){"use strict";n.d(e,{R:function(){return o},t:function(){return s}});var i=n(77528);const r={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{"-"===e.charAt(0)?t.style.setProperty(e,n):t.style[e]=n}};let o=t=>(0,i.X$)(r,t),s={create:(t,e)=>(e=o(e),(0,i.dj)(t,document.createElement("div"),void 0,e),(0,i.Av)(t,e)),append:(t,e,n)=>(n=o(n),(0,i.dj)(e,t,void 0,n),(0,i.Av)(e,n)),insertBefore:(t,e,n)=>(n=o(n),(0,i.dj)(e,t.parentNode,t,n),(0,i.Av)(e,n)),merge:(t,e,n)=>(n=o(n),e.domNode=t,(0,i.OM)(t,e,n),(0,i.Av)(e,n)),replace:(t,e,n)=>(n=o(n),(0,i.dj)(e,t.parentNode,t,n),t.parentNode.removeChild(t),(0,i.Av)(e,n))}},77528:function(t,e,n){"use strict";n.d(e,{Av:function(){return E},OM:function(){return M},X$:function(){return l},dj:function(){return S}});var i=n(10362);const r="http://www.w3.org/",o=`${r}2000/svg`,s=`${r}1999/xlink`;let a=[],l=(t,e)=>{let n={};return Object.keys(t).forEach((e=>{n[e]=t[e]})),e&&Object.keys(e).forEach((t=>{n[t]=e[t]})),n},c=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),u=t=>{if("string"!=typeof t)throw new Error("Style values must be strings")},d=(t,e,n)=>{if(""!==e.vnodeSelector)for(let i=n;i<t.length;i++)if(c(t[i],e))return i;return-1},h=(t,e,n,i)=>{let r=t[e];if(""===r.vnodeSelector)return;let o=r.properties;if(!(o?void 0===o.key?o.bind:o.key:void 0))for(let o=0;o<t.length;o++)if(o!==e){let e=t[o];if(c(e,r))throw new Error(`${n.vnodeSelector} had a ${r.vnodeSelector} child ${"added"===i?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},p=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},f=[],m=!1,g=t=>{(t.children||[]).forEach(g),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},y=()=>{m=!1,f.forEach(g),f.length=0},v=t=>{f.push(t),m||(m=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(y,{timeout:16}):setTimeout(y,16))},_=t=>{let e=t.domNode;if(t.properties){let n=t.properties.exitAnimation;if(n){e.style.pointerEvents="none";let i=()=>{e.parentNode&&(e.parentNode.removeChild(e),v(t))};return void n(e,i,t.properties)}}e.parentNode&&(e.parentNode.removeChild(e),v(t))},b=(t,e,n)=>{if(!e)return;let r=n.eventHandlerInterceptor,a=Object.keys(e),l=a.length;for(let c=0;c<l;c++){let l=a[c],d=e[l];if("className"===l)throw new Error('Property "className" is not supported, use "class".');if("class"===l)C(t,d,!0);else if("classes"===l){let e=Object.keys(d),n=e.length;for(let i=0;i<n;i++){let n=e[i];d[n]&&t.classList.add(n)}}else if("styles"===l){let e=Object.keys(d),i=e.length;for(let r=0;r<i;r++){let i=e[r],o=d[i];o&&(u(o),n.styleApplyer(t,i,o))}}else if("key"!==l&&null!=d){let a=typeof d;"function"===a?(0===l.lastIndexOf("on",0)&&(r&&(d=r(l,d,t,e)),"oninput"===l&&function(){let t=d;d=function(e){t.apply(this,[e]),e.target["oninput-value"]=e.target.value}}()),t[l]=d):n.namespace===o?"href"===l?t.setAttributeNS(s,l,d):t.setAttribute(l,d):"string"===a&&"value"!==l?"innerHTML"===l?t[l]=i.W5.sanitize(d):x(t)&&l in t?t[l]=d:t.setAttribute(l,d):t[l]=d}}};function x(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let w,M=(t,e,n)=>{((t,e,n)=>{if(e)for(let i of e)S(i,t,void 0,n)})(t,e.children,n),e.text&&(t.textContent=e.text),b(t,e.properties,n),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,n,e.vnodeSelector,e.properties,e.children])},S=(t,e,n,i)=>{let r,s=0,a=t.vnodeSelector,c=e.ownerDocument;if(""===a)r=t.domNode=c.createTextNode(t.text),void 0!==n?e.insertBefore(r,n):e.appendChild(r);else{for(let u=0;u<=a.length;++u){let d=a.charAt(u);if(u===a.length||"."===d||"#"===d){let d=a.charAt(s-1),h=a.slice(s,u);"."===d?r.classList.add(h):"#"===d?r.id=h:("svg"===h&&(i=l(i,{namespace:o})),void 0!==i.namespace?r=t.domNode=c.createElementNS(i.namespace,h):(r=t.domNode=t.domNode||c.createElement(h),"input"===h&&t.properties&&void 0!==t.properties.type&&r.setAttribute("type",t.properties.type)),void 0!==n?e.insertBefore(r,n):r.parentNode!==e&&e.appendChild(r)),s=u+1}}M(r,t,i)}},C=(t,e,n)=>{e&&e.split(" ").forEach((e=>{e&&t.classList.toggle(e,n)}))},T=(t,e,n,r)=>{if(!n)return;let a=!1,l=Object.keys(n),c=l.length;for(let d=0;d<c;d++){let c=l[d],h=n[c],p=e[c];if("class"===c)p!==h&&(C(t,p,!1),C(t,h,!0));else if("classes"===c){let e=t.classList,n=Object.keys(h),i=n.length;for(let t=0;t<i;t++){let i=n[t],r=!!h[i];r!==!!p[i]&&(a=!0,r?e.add(i):e.remove(i))}}else if("styles"===c){let e=Object.keys(h),n=e.length;for(let i=0;i<n;i++){let n=e[i],o=h[n];o!==p[n]&&(a=!0,o?(u(o),r.styleApplyer(t,n,o)):r.styleApplyer(t,n,""))}}else if(h||"string"!=typeof p||(h=""),"value"!==c||x(t)){if(h!==p){let e=typeof h;"function"===e&&r.eventHandlerInterceptor||(r.namespace===o?"href"===c?t.setAttributeNS(s,c,h):t.setAttribute(c,h):"string"===e?"innerHTML"===c?t[c]=i.W5.sanitize(h):"role"===c&&""===h?t.removeAttribute(c):x(t)&&c in t?t[c]=h:t.setAttribute(c,h):t[c]!==h&&(t[c]=h),a=!0)}}else{let e=t[c];e!==h&&(t["oninput-value"]?e===t["oninput-value"]:h!==p)&&(t[c]=h,t["oninput-value"]=void 0),h!==p&&(a=!0)}}return a},k=(t,e,n,i,r)=>{if(n===i)return!1;i=i||a;let o,s=(n=n||a).length,l=i.length,u=0,f=0,m=!1;for(;f<l;){let a=u<s?n[u]:void 0,l=i[f];if(void 0!==a&&c(a,l))m=w(a,l,r)||m,u++;else{let a=d(n,l,u+1);if(a>=0){for(o=u;o<a;o++)_(n[o]),h(n,o,t,"removed");m=w(n[a],l,r)||m,u=a+1}else S(l,e,u<s?n[u].domNode:void 0,r),p(l),h(i,f,t,"added")}f++}if(s>u)for(o=u;o<s;o++)_(n[o]),h(n,o,t,"removed");return m};w=(t,e,n)=>{let i=t.domNode,r=!1;if(t===e)return!1;let s=!1;if(""===e.vnodeSelector){if(e.text!==t.text){let t=i.ownerDocument.createTextNode(e.text);return i.parentNode.replaceChild(t,i),e.domNode=t,r=!0,r}e.domNode=i}else 0===e.vnodeSelector.lastIndexOf("svg",0)&&(n=l(n,{namespace:o})),t.text!==e.text&&(s=!0,void 0===e.text?i.removeChild(i.firstChild):i.textContent=e.text),e.domNode=i,s=k(e,i,t.children,e.children,n)||s,s=T(i,t.properties,e.properties,n)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[i,n,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(i,e.properties,t.properties),r};let E=(t,e)=>({getLastRender:()=>t,update:n=>{if(t.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=t;t=n,w(i,n,e)},domNode:t.domNode})},81401:function(t,e,n){"use strict";n.d(e,{F:function(){return a}});var i=n(92781);let r;r=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let o=(t,e)=>{let n=t;return e.forEach((t=>{n=n&&n.children?r(n.children,(e=>e.domNode===t)):void 0})),n},s=(t,e,n)=>{let i=function(i){n("domEvent",i);let r=e(),s=((t,e)=>{let n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n})(i.currentTarget,r.domNode);s.reverse();let a,l=o(r.getLastRender(),s);return t.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(t,e,n,r)=>i},a=t=>{let e,n,r=(0,i.R)(t),o=r.performanceLogger,a=!0,l=!1,c=[],u=[],d=(t,n,i)=>{let a;r.eventHandlerInterceptor=s(e,(()=>a),o),a=t(n,i(),r),c.push(a),u.push(i)},h=()=>{if(n=void 0,a){a=!1,o("renderStart",void 0);for(let t=0;t<c.length;t++){let e=u[t]();o("rendered",void 0),c[t].update(e),o("patched",void 0)}o("renderDone",void 0),a=!0}};return e={renderNow:h,scheduleRender:()=>{n||l||(n=requestAnimationFrame(h))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),l=!0},resume:()=>{l=!1,a=!0,e.scheduleRender()},append:(t,e)=>{d(i.t.append,t,e)},insertBefore:(t,e)=>{d(i.t.insertBefore,t,e)},merge:(t,e)=>{d(i.t.merge,t,e)},replace:(t,e)=>{d(i.t.replace,t,e)},detach:t=>{for(let e=0;e<u.length;e++)if(u[e]===t)return u.splice(e,1),c.splice(e,1)[0];throw new Error("renderFunction was not found")}},e}},82418:function(t,e,n){"use strict";function i(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function r(t,e){return"number"==typeof t?t:t?.stops?.length?function(t){let e=0,n=0;for(let i=0;i<t.length;i++){const r=t[i].size;"number"==typeof r&&(e+=r,n++)}return e/n}(t.stops):e}function o(t,e){if(!e)return t;const n=e.filter((t=>"size"===t.type)).map((e=>{const{maxSize:n,minSize:i}=e;return(r(n,t)+r(i,t))/2}));let i=0;const o=n.length;if(0===o)return t;for(let t=0;t<o;t++)i+=n[t];const s=Math.floor(i/o);return Math.max(s,t)}function s(t){const e=t?.renderer,n=t?.pointerType,r="touch"===n?9:6;if(!e)return r;const s="visualVariables"in e?o(r,e.visualVariables):r;if("simple"===e.type)return i(s,e.symbol);if("unique-value"===e.type){let t=s;return e.uniqueValueInfos?.forEach((e=>{t=i(t,e.symbol)})),t}if("class-breaks"===e.type){let t=s;return e.classBreakInfos.forEach((e=>{t=i(t,e.symbol)})),t}return"dot-density"===e.type||e.type,s}n.d(e,{o:function(){return s}})},76722:function(t,e,n){"use strict";n.d(e,{c:function(){return o}});var i=n(62938),r=n(51432);function o(t){const e="metric";if(null==t)return e;const n=t.map,o=(n&&"portalItem"in n?n.portalItem?.portal:null)??r.A.getDefault();switch(o.user?.units??o.units){case e:return e;case"english":return"imperial"}return(0,i.jM)(t.spatialReference)??e}},93839:function(t,e,n){"use strict";n.d(e,{fJ:function(){return o},g4:function(){return r},hY:function(){return s}});const i="calcite-mode-";function r(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}function o(){return`${i}${r()?"dark":"light"}`}function s(t){a(t),t.classList.add(o())}function a(t){Array.from(t.classList).forEach((e=>{e.startsWith(i)&&t.classList.remove(e)}))}},38821:function(t,e,n){"use strict";n.d(e,{D:function(){return o},K:function(){return r}});var i=n(33389);const r={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:i.fu.Loop,repeatdelay:0,easing:i.Hz.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}}},33389:function(t,e,n){"use strict";var i,r,o,s,a,l,c,u,d,h,p,f,m,g,y,v,_,b,x,w,M,S,C,T,k,E,$,A,P,I,R,O,L,V,N,D,Z,G,z,U,F,H,j,B,W,Y,q,K,X,Q,J,tt,et,nt,it,rt,ot,st,at,lt,ct,ut;n.d(e,{$2:function(){return a},C1:function(){return o},Hz:function(){return f},JO:function(){return r},M1:function(){return C},O$:function(){return st},Q1:function(){return q},TZ:function(){return _},WE:function(){return P},Y:function(){return c},YI:function(){return X},bj:function(){return u},e_:function(){return Y},f0:function(){return ot},fu:function(){return p},g7:function(){return d},ip:function(){return K},mU:function(){return I},oF:function(){return M},uQ:function(){return S},uT:function(){return Z},vG:function(){return lt},wd:function(){return F},xR:function(){return i},xn:function(){return b},xw:function(){return E},yS:function(){return G}}),function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(o||(o={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(s||(s={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(a||(a={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(l||(l={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(c||(c={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(u||(u={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(d||(d={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(h||(h={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(p||(p={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(f||(f={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(m||(m={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(g||(g={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(y||(y={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(v||(v={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(_||(_={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(b||(b={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(x||(x={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(w||(w={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(M||(M={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(S||(S={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(C||(C={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(T||(T={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(k||(k={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(E||(E={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}($||($={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(A||(A={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(P||(P={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(I||(I={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(R||(R={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(O||(O={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(L||(L={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AloneLine=1]="AloneLine"}(V||(V={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(N||(N={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(D||(D={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(Z||(Z={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(G||(G={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(z||(z={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(U||(U={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(F||(F={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}(H||(H={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(j||(j={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(B||(B={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(W||(W={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(Y||(Y={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(q||(q={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(K||(K={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(X||(X={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(Q||(Q={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(J||(J={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(tt||(tt={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(et||(et={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(nt||(nt={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(it||(it={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(rt||(rt={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(ot||(ot={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(st||(st={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(at||(at={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(lt||(lt={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(ct||(ct={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(ut||(ut={}))},7590:function(t,e,n){"use strict";n.d(e,{$w:function(){return y},Bu:function(){return A},DW:function(){return T},FH:function(){return G},FM:function(){return c},G9:function(){return o},GV:function(){return _},Go:function(){return u},K3:function(){return Z},Kn:function(){return S},MM:function(){return p},MO:function(){return F},Nl:function(){return P},Ny:function(){return b},O2:function(){return I},UE:function(){return R},YC:function(){return U},YF:function(){return L},ZO:function(){return N},_1:function(){return E},_H:function(){return w},_W:function(){return v},_d:function(){return C},bs:function(){return z},dI:function(){return q},e6:function(){return d},gQ:function(){return l},iA:function(){return D},jn:function(){return m},lW:function(){return h},mA:function(){return f},n5:function(){return O},pM:function(){return k},pV:function(){return M},pk:function(){return H},rB:function(){return j},s4:function(){return r},xo:function(){return $},yH:function(){return x},zb:function(){return V},zr:function(){return g}});var i=n(38821);function r(t,e,n,i){return function(t){return"function"==typeof t}(t)?t(e,n,i):t}function o(t){return[t.r,t.g,t.b,t.a]}const s=" /-,\n";function a(t){let e=t.length;for(;e--;)if(!s.includes(t.charAt(e)))return!1;return!0}function l(t,e){const n=[];let i=0,r=-1;do{if(r=t.indexOf("[",i),r>=i){if(r>i){const e=t.slice(i,r);n.push([e,null,a(e)])}if(i=r+1,r=t.indexOf("]",i),r>=i){if(r>i){const o=e[t.slice(i,r)];o&&n.push([null,o,!1])}i=r+1}}}while(-1!==r);if(i<t.length){const e=t.slice(i);n.push([e,null,a(e)])}return n}function c(t,e,n,i){let r="",o=null;for(const i of e){const[e,s,a]=i;if(e)a?o=e:(o&&(r+=o,o=null),r+=e);else{let e=s;null!=n&&(e=F(s,n));const i=t.attributes[e];i&&(o&&(r+=o,o=null),r+=i)}}return function(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}(r,i)}function u(t,e,n,i,r,o,s=!0){const a=e/r,l=n/o,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let n=0;n<o;n++)for(let d=0;d<r;d++){const h=4*(d+(s?o-n-1:n)*r);let p=0,f=0,m=0,g=0,y=0,v=0,_=0;const b=(n+.5)*l;for(let i=Math.floor(n*l);i<(n+1)*l;i++){const n=Math.abs(b-(i+.5))/u,r=(d+.5)*a,o=n*n;for(let n=Math.floor(d*a);n<(d+1)*a;n++){let s=Math.abs(r-(n+.5))/c;const a=Math.sqrt(o+s*s);a>=-1&&a<=1&&(p=2*a*a*a-3*a*a+1,p>0&&(s=4*(n+i*e),_+=p*t[s+3],m+=p,t[s+3]<255&&(p=p*t[s+3]/250),g+=p*t[s],y+=p*t[s+1],v+=p*t[s+2],f+=p))}}i[h]=g/f,i[h+1]=y/f,i[h+2]=v/f,i[h+3]=_/m}}function d(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function h(t){return t.data?.symbol??null}function p(t){return"CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function f(t){return"CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function m(t){return null!=t&&("CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type)}function g(t){return null!=t&&("CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type)}const y=(t,e=0)=>null==t||isNaN(t)?e:t,v=(t,e)=>null!=t?t:e,_=(t,e)=>t??e,b=t=>t.tintColor?d(t.tintColor):[255,255,255,1],x=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function w(){return n.e(4696).then(n.bind(n,28356))}function M(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function S(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function C(t){let e="normal",n="normal";if(t){const i=t.toLowerCase();i.includes("italic")?e="italic":i.includes("oblique")&&(e="oblique"),i.includes("bold")?n="bold":i.includes("light")&&(n="lighter")}return{style:e,weight:n}}function T(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function k(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const t=k(e);if(null!=t)return t}break;case"CIMTextSymbol":return k(t.symbol);case"CIMSolidFill":return t.color}return null}function E(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const t of e){const e=E(t);if(null!=e)return e}break}case"CIMTextSymbol":return E(t.symbol);case"CIMSolidStroke":return t.color}}function $(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const t=$(e);if(void 0!==t)return t}break;case"CIMTextSymbol":return $(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function A(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function P(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function I(t){return(t?Object.keys(t):[]).map((e=>({name:e,alias:e,type:"string"==typeof t[e]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const R=t=>t.includes("data:image/svg+xml");function O(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function L(t){return t?t.charAt(0).toLowerCase()+t.slice(1):t}function V(t,e,n,i,r,o,s=!0){const{infos:a}=o;let l=1,c=0,u=0,d=0,h=1;for(const{absoluteAnchorPoint:t,offsetX:e,offsetY:n,rotation:i,size:r,frameHeight:o,rotateClockWise:p,scaleSymbolsProportionally:f}of a)h=t?1:l,u=W(e,n,c,h,u),d=B(e,n,c,h,d),o&&(f||s)&&(l*=r/o),c=Y(i,p,c);const p=W(i,r,c,h,u),f=B(i,r,c,h,d);return{size:t*l,rotation:Y(e,n,c),offsetX:p,offsetY:f}}function N(t){if(null==t)return!1;if(Array.isArray(t))return t.every((t=>N(t)));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function D(t,e){if("color"===e||"outlinecolor"===e||"backgroundcolor"===e||"borderlinecolor"===e||"tintcolor"===e)return[...i.K[e]];const n=i.D[t];if(!n)throw new Error(`InternalError: default value for type ${t}.`);return n[e]}function Z(t){return"string"==typeof t?function(t){return t.split(" ").map((t=>Number(t)))}(t):t}function G(t){return t?.dashTemplate&&(t.dashTemplate=Z(t.dashTemplate)),t}function z(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const t of e)if("CIMVectorMarker"===t.type)return z(t)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const t of e)if(t.symbol)return z(t.symbol)}}return"Normal"}function U(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers)for(const n of t.symbolLayers)if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const t=n.size??i.D.CIMVectorMarker.size;t>e&&(e=t);break}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers)for(const n of t.symbolLayers)if(n)switch(n.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const t=n.width;null!=t&&t>e&&(e=t);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(n.markerPlacement&&g(n.markerPlacement)){const t=n.size??i.D.CIMVectorMarker.size;t>e&&(e=t)}break;case"CIMPictureFill":{const t=n.height;null!=t&&t>e&&(e=t)}}return e}}}function F(t,e){if(null!==e){const n=e.get(t);return n?n.name:t}return t}function H(t){return t.map((t=>({...t,propertyName:L(t.propertyName)})))}function j(t){const e={};for(const n in t){const i=t[n];e[L(n)]=i}return e}function B(t,e,n,i,r){const o=n*Math.PI/180;if(o){const n=Math.cos(o);return(Math.sin(o)*t+n*e)*i+r}return e*i+r}function W(t,e,n,i,r){const o=n*Math.PI/180;return o?(Math.cos(o)*t-Math.sin(o)*e)*i+r:t*i+r}function Y(t,e,n){return e?n-t:n+t}function q(t,e,n){const i="Color"===n||"TintColor"===n||"ToColor"===n,r="Rotation"===n||"Angle"===n||"ToRotation"===n;let o=e[L(n)];if(null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:r&&(o*=Math.PI/180)),null==o&&(o=D(e.type,n.toLowerCase()),null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:r&&(o*=Math.PI/180))),null!=e.primitiveName){const s=t[e.primitiveName];if(null!=s){const t=s[n];null==t||("string"==typeof t||"number"==typeof t||Array.isArray(t)?(o=t,null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:r&&(o*=Math.PI/180))):(o={valueExpressionInfo:t,defaultValue:o},null!=o&&(i?o={type:"Process",op:"ArcadeColor",value:o}:r&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(null==o)throw new Error(`Failed to derive a value or an expression for "${n}".`);return o}},77927:function(t,e,n){"use strict";n.d(e,{Fe:function(){return d},Km:function(){return o},Nk:function(){return l}});var i=n(52874),r=n(7590);function o(t,e,n,i){if(t)if("CIMTextSymbol"!==t.type){if(n&&t.effects)for(const n of t.effects)a(n,e);if(t.symbolLayers)for(const n of t.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":s(n,e,i);break;case"CIMPictureStroke":case"CIMSolidStroke":!i?.preserveOutlineWidth&&n.width&&(n.width*=e);break;case"CIMPictureFill":n.height&&(n.height*=e),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e);break;case"CIMHatchFill":o(n.lineSymbol,e,!0,{...i,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=e),n.offsetY&&(n.offsetY*=e),n.separation&&(n.separation*=e)}}else null!=t.height&&(t.height*=e)}function s(t,e,n){if(t&&(t.markerPlacement&&function(t,e){switch((0,r.zr)(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const n=t.placementTemplate.map((t=>t*e));t.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const n=t.placementTemplate.map((t=>t*e));t.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&"Absolute"===t.anchorPointUnits&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=null!=t.size?t.size*e:0,"CIMVectorMarker"===t.type&&t.markerGraphics))for(const i of t.markerGraphics)t.scaleSymbolsProportionally||o(i.symbol,e,!0,n)}function a(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const n=t.dashTemplate.map((t=>t*e));t.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function l(t){const e=[];return c((0,r.lW)(t),e),e.length?new i.A((0,r.e6)(e[0])):null}function c(t,e){if(!t)return;let n;n="CIMTextSymbol"===t.type?t.symbol:t;const i="CIMPolygonSymbol"===t.type;if(n?.symbolLayers)for(const t of n.symbolLayers)if(!(t.colorLocked||i&&((0,r.mA)(t)||(0,r.MM)(t)&&t.markerPlacement&&(0,r.zr)(t.markerPlacement))))switch(t.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":t.tintColor&&u(e,t.tintColor);break;case"CIMVectorMarker":t.markerGraphics?.forEach((t=>{c(t.symbol,e)}));break;case"CIMSolidStroke":case"CIMSolidFill":u(e,t.color);break;case"CIMHatchFill":c(t.lineSymbol,e)}}function u(t,e){for(const n of t)if(n.join(".")===e.join("."))return;t.push(e)}function d(t,e,n){e instanceof i.A||(e=new i.A(e));const o=(0,r.lW)(t);o&&h(o,e,n)}function h(t,e,n){if(!t)return;let i;i="CIMTextSymbol"===t.type?t.symbol:t;const o="CIMPolygonSymbol"===i?.type;if(i?.symbolLayers)for(const t of i.symbolLayers){if(t.colorLocked)continue;if(o)if(n){const{layersToColor:e}=n;if(((0,r.mA)(t)||(0,r.MM)(t)&&t.markerPlacement&&(0,r.zr)(t.markerPlacement))&&"fill"===e||(0,r.jn)(t)&&"outline"===e)continue}else if((0,r.mA)(t)||(0,r.MM)(t)&&t.markerPlacement&&(0,r.zr)(t.markerPlacement))continue;const i=e.toArray();switch(t.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":t.tintColor=i;break;case"CIMVectorMarker":t.markerGraphics?.forEach((t=>{h(t.symbol,e,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":t.color=i;break;case"CIMHatchFill":h(t.lineSymbol,e,n)}}}},74661:function(t,e,n){"use strict";n.d(e,{A7:function(){return c},Cx:function(){return u},Hk:function(){return d},JJ:function(){return m},SF:function(){return h},UK:function(){return l},jM:function(){return p},x3:function(){return f}}),n(58941);var i=n(8740),r=n(22198),o=n(90363),s=n(90972),a=n(6259);const l=o.A.fromJSON(a.Cb),c=r.A.fromJSON(a.yM),u=i.A.fromJSON(a.WR),d=s.A.fromJSON(a.JZ);function h(t){if(null==t)return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return c;case"polygon":case"extent":return u}return null}const p=o.A.fromJSON(a.nC),f=r.A.fromJSON(a.HW),m=i.A.fromJSON(a.b6)},6259:function(t,e,n){"use strict";n.d(e,{Cb:function(){return o},HW:function(){return u},JR:function(){return r},JZ:function(){return l},WR:function(){return a},b6:function(){return d},fT:function(){return i},nC:function(){return c},yM:function(){return s}});const i=[252,146,31,255],r=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},c={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},d={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},70684:function(t,e,n){"use strict";n.d(e,{J:function(){return b}}),n(50917);var i=n(59469),r=(n(10748),n(61226)),o=n(13520),s=n(67888),a=n(13786),l=n(1932),c=n(32501),u=n(33389),d=n(28397),h=n(21267),p=n(21858),f=n(45532),m=n(91508),g=n(57165),y=n(38164),v=n(90363),_=n(22198);class b extends p.b{constructor(t){super(),this._graphicsLayer=t,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(t,e){return this._visualizeSnappingIndicator(new f.default({x:t.intersectionPoint[0],y:t.intersectionPoint[1],spatialReference:e.spatialReference}),this._getOrCreateSymbol("intersectionPoint",e.view.effectiveTheme.accentColor))}visualizePoint(t,e){return this._visualizeSnappingIndicator(new f.default({x:t.point[0],y:t.point[1],spatialReference:e.spatialReference}),this._getOrCreateSymbol("point",e.view.effectiveTheme.accentColor))}visualizeLine(t,e){return this._visualizeSnappingIndicator(new m.A({paths:[[[...t.lineStart],[...t.lineEnd]]],spatialReference:(0,s.PZ)(g.A,e.spatialReference)}),this._getOrCreateSymbol("line",e.view.effectiveTheme.accentColor))}visualizeParallelSign(t,e){return this._visualizeSnappingIndicator(new m.A({paths:[[[...t.lineStart],[...t.lineEnd]]],spatialReference:(0,s.PZ)(g.A,e.spatialReference)}),this._getOrCreateSymbol("parallelSign",e.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(t,e){const n=(0,l.vt)(),i=(0,l.vt)(),r=(0,c.vt)();(0,a.Re)(n,(0,d.Xz)(t.centerVertex),(0,d.Xz)(t.previousVertex)),(0,a.Re)(i,(0,d.Xz)(t.nextVertex),(0,d.Xz)(t.previousVertex)),(0,a.$A)(r,n,i);const o="rightAngleQuad"+(r[2]<0?45:225);return this._visualizeSnappingIndicator(new m.A({paths:[[[...t.previousVertex],[...t.centerVertex],[...t.nextVertex]]],spatialReference:(0,s.PZ)(g.A,e.spatialReference)}),this._getOrCreateSymbol(o,e.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(t,e){const n=new i.default({geometry:t,symbol:e});return this._graphicsLayer.add(n),(0,r.hA)((()=>{this._graphicsLayer.remove(n)}))}_getOrCreateSymbol(t,e){const n=this._symbolPairingsByType;return n.get(t)?.color!==e&&n.set(t,{color:e,symbol:x(t,e)}),n.get(t).symbol}}function x(t,e){const n=[...e.toRgb(),255*e.a];switch(t){case"point":return new v.A({outline:{width:.5,color:[0,0,0,1]},size:10,color:e});case"intersectionPoint":return new v.A({outline:new _.A({width:1.5,color:e}),size:15,color:[0,0,0,0]});case"line":return new y.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:u.uT.Butt,joinStyle:u.wd.Round,miterLimit:10,width:(0,o.PN)(h.N.lineHintWidthTarget),color:n}]}}});case"parallelSign":return new y.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:n}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:n}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case"rightAngleQuad45":case"rightAngleQuad225":{const i="rightAngleQuad45"===t?45:225;return new y.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,o.PN)(h.N.rightAngleHintSize),rotation:i,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,o.PN)(h.N.rightAngleHintOutlineSize),color:n},{type:"CIMSolidFill",enable:!0,color:[...e.toRgb(),255*e.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}},65949:function(t,e,n){"use strict";n.r(e),n.d(e,{ControlPointsTransformTool:function(){return U},DrawGraphicTool2D:function(){return x},MediaTransformToolsWrapper:function(){return yt},TransformTool:function(){return mt}});var i=n(53804),r=(n(50917),n(59469)),o=n(61226),s=n(95929),a=n(28181),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953)),u=n(70684),d=(n(10748),n(38164)),h=n(90363);const p=new d.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}}),f=new h.A({style:"circle",size:6,color:[127,127,127,1],outline:{color:[50,50,50],width:1}}),m=new h.A({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});var g=n(93336),y=n(85499),v=n(99113),_=n(45532),b=n(71673);let x=class extends g.N{constructor(t){super(t),this._visualElementGraphics={regularVertices:null,activeVertex:null,activeEdge:null},this.activeFillSymbol=null,this.type="draw-2d",this._visualElementSymbols={outline:t.activeLineSymbol??p,regularVertices:t.regularVerticesSymbol??f,activeVertex:t.activeVertexSymbol??m,fill:t.activeFillSymbol},t.activeVertexSymbol||this.addHandles((0,a.watch)((()=>this.view?.effectiveTheme?.accentColor),(t=>{if(!t)return;const e=this._visualElementSymbols.activeVertex.clone().set({color:t});this._visualElementGraphics.activeVertex?.set("symbol",e),this._visualElementSymbols={...this._visualElementSymbols,activeVertex:e}}),a.Vh))}normalizeCtorArgs(t){const e={...t};return delete e.activeFillSymbol,delete e.activeVertexSymbol,delete e.regularVerticesSymbol,delete e.activeLineSymbol,e}initializeGraphic(t){return null!=this._visualElementSymbols.fill&&(t.symbol=this._visualElementSymbols.fill),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)()}makeDrawOperation(){const{defaultZ:t,hasZ:e,view:n}=this;return this._createOrUpdateGraphic(null),new y.O0({view:n,manipulators:this.manipulators,geometryType:(0,g.l)(this.geometryType),drawingMode:this.mode,hasZ:e,defaultZ:t,snapToSceneEnabled:this.snapToScene,drawSurface:new v.uF(n,e,t),hasM:!1,snappingManager:this.snappingManager,snappingVisualizer:new u.J(this.internalGraphicsLayer),graphic:this.graphic,cursor:this.cursor,constraintsEnabled:!0})}onActiveVertexChanged(t){if("point"===this.geometryType)return(0,o.hA)();const[e,n]=t,i=new _.default({x:e,y:n,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.activeVertex?(this._visualElementGraphics.activeVertex.geometry=i,(0,o.hA)()):(this._visualElementGraphics.activeVertex=new r.default({geometry:i,symbol:this._visualElementSymbols.activeVertex,attributes:{displayOrder:2}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeVertex),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)((()=>{null!=this._visualElementGraphics.activeVertex&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeVertex),this._visualElementGraphics.activeVertex=(0,s.pR)(this._visualElementGraphics.activeVertex))})))}onCursorEdgeChanged(t){return null!=this._visualElementGraphics.activeEdge?(this._visualElementGraphics.activeEdge.geometry=t,(0,o.hA)()):(this._visualElementGraphics.activeEdge=new r.default({geometry:t,symbol:this._visualElementSymbols.outline,attributes:{displayOrder:0}}),this.internalGraphicsLayer.add(this._visualElementGraphics.activeEdge),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)((()=>{null!=this._visualElementGraphics.activeEdge&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.activeEdge),this._visualElementGraphics.activeEdge=(0,s.pR)(this._visualElementGraphics.activeEdge))})))}onRegularVerticesChanged(t){const e=new b.A({points:t,spatialReference:this.view.spatialReference});return null!=this._visualElementGraphics.regularVertices?(this._visualElementGraphics.regularVertices.geometry=e,(0,o.hA)()):(this._visualElementGraphics.regularVertices=new r.default({geometry:e,symbol:this._visualElementSymbols.regularVertices,attributes:{displayOrder:1}}),this.internalGraphicsLayer.add(this._visualElementGraphics.regularVertices),this.internalGraphicsLayer.graphics.sort(w),(0,o.hA)((()=>{null!=this._visualElementGraphics.regularVertices&&(this.internalGraphicsLayer.remove(this._visualElementGraphics.regularVertices),this._visualElementGraphics.regularVertices=(0,s.pR)(this._visualElementGraphics.regularVertices))})))}};function w(t,e){return(t.attributes?.displayOrder??-1/0)-(e.attributes?.displayOrder??-1/0)}(0,i._)([(0,l.MZ)()],x.prototype,"activeFillSymbol",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],x.prototype,"type",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],x.prototype,"view",void 0),x=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.draw.DrawGraphicTool2D")],x);var M,S=n(52874),C=n(46157),T=n(57652),k=n(19702),E=n(77927),$=n(65420);class A{get hovering(){return this.someManipulator((t=>t.hovering))}get grabbing(){return this.someManipulator((t=>t.grabbing))}get dragging(){return this.someManipulator((t=>t.dragging))}hasManipulator(t){return this.someManipulator((e=>e===t))}someManipulator(t){let e=!1;return this.forEachManipulator((n=>{!e&&t(n)&&(e=!0)})),e}}!function(t){t[t.TRANSLATE_XY=0]="TRANSLATE_XY",t[t.SCALE=1]="SCALE",t[t.ROTATE=2]="ROTATE"}(M||(M={}));var P=n(2831),I=n(82067),R=n(34358),O=n(17921);class L extends A{constructor(t){super(),this._view=t.view,this._tool=t.tool,this._graphic=t.graphic,this._manipulator=this._createManipulator(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._graphic=null}forEachManipulator(t){t(this._manipulator,M.TRANSLATE_XY)}createDragPipeline(t,e){let n=null,i=null,r=0,o=0,s=0;const{offsetX:a,offsetY:l,size:c}=(0,O.T)(this._graphic.symbol);return(0,P.Xt)(this._manipulator,((u,d)=>{d.next((e=>{if("start"===e.action){const e=t();n=e.editGeometryOperations,i=e.constraints}return e})).next((0,P.y$)(this._view)).next((t=>{const{x:u,y:d,z:h}=t.mapEnd;if(i&&(u+a<i.xmin||d+l-c<i.ymin||u+a>i.xmax||d+l-c>i.ymax))return t;("start"===t.action||0===r&&0===o&&0===s)&&(r=t.mapStart.x,o=t.mapStart.y,s=t.mapStart.z);const p=u-r,f=d-o,m=h-s;r=u,o=d,s=h;const g="start"===t.action?R.Y.NEW_STEP:R.Y.ACCUMULATE_STEPS,y=n.move(p,f,m,g);return e(t,y),t}))}))}_createManipulator(){const t=this._view,e=this._graphic;return new I.l({view:t,graphic:e,selectable:!0,cursor:"move"})}}var V=n(25179),N=n(83202),D=n(7819);const Z="Shift",G=V.i,z=new S.A("#009af2");let U=class extends N.g{constructor(t){super(t),this._isOpacityToggled=!1,this._isModifierActive=!1,this._factor=1,this._initialControlPoints=null,this._graphicsLayer=new k.default({internal:!0,listMode:"hide",visible:!1,effect:"drop-shadow(0px, 0px, 3px)"}),this._undoStack=[],this._redoStack=[],this._sharedUndoStack=[],this._sharedRedoStack=[],this._highlightHandle=null,this.activeHandle=0,this.type="reshape"}initialize(){this._initialize()}destroy(){const{map:t}=this.view;this._controlPointManipulations.forEach((t=>t.destroy())),this._controlPointEditGeometryOperations.forEach((t=>t.destroy())),t.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,s.pR)(this._graphicsLayer),this._georeference=null,this._controlPointGraphics=null,this._controlPointManipulations=null,this._graphicsLayer=null,this._controlPointEditGeometryOperations=null,this._undoStack=null,this._redoStack=null,this._initialControlPoints=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _hasValidSpatialReference(){return(0,T.fn)(this.view.spatialReference)}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){const t=this._undoStack[this._undoStack.length-1];return null!=t&&this._controlPointEditGeometryOperations[t].canUndo}canRedo(){const t=this._redoStack[this._redoStack.length-1];return null!=t&&this._controlPointEditGeometryOperations[t].canRedo}undo(){if(this._undoStack.length>0){const t=this._undoStack.pop();this._controlPointEditGeometryOperations[t].undo(),this.updateGraphics(),this._redoStack.push(t)}}redo(){if(this._redoStack.length>0){const t=this._redoStack.pop();this._controlPointEditGeometryOperations[t].redo(),this.updateGraphics(),this._undoStack.push(t)}}refresh(){const{mediaElement:t}=this;if(null==t.georeference)return;const e=t.georeference;"control-points"===e.type&&null!=e.coords&&(this._georeference=e,this._georeference.controlPoints.forEach((({mapPoint:t},e)=>{const n=this._controlPointEditGeometryOperations[e],i=n.data.components[0].vertices[0];n.setVertexPosition(i,n.data.coordinateHelper.pointToVector(t))})),this.updateGraphics())}reset(){this._georeference.controlPoints=this._initialControlPoints,this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const t=this._georeference,e=t.controlPoints,n=e[0].mapPoint.spatialReference,i=this._hasValidSpatialReference;this._georeference.controlPoints=this._controlPointEditGeometryOperations.map(((r,o)=>{const s=r.data.geometry;return this._controlPointGraphics[o].geometry=s,{mapPoint:(0,C.project)(s,n),sourcePoint:i?e[o].sourcePoint:t.toSource(s)}}))}updateActiveHandle(t){if(this.activeHandle===t)return;const e=this._controlPointGraphics[this.activeHandle].symbol.clone();(0,E.Fe)(e,this.view.effectiveTheme.accentColor),this._controlPointGraphics[this.activeHandle].symbol=e;const n=this._controlPointGraphics[t].symbol.clone();(0,E.Fe)(n,z),this._controlPointGraphics[t].symbol=n,this.activeHandle=t,this.view.surface===document.activeElement&&this.highlightActiveHandle()}async highlightActiveHandle(){this.removeHighlightActiveHandle();const t=await this.view.whenLayerView(this._graphicsLayer);this._highlightHandle=t.highlight(this._controlPointGraphics[this.activeHandle])}removeHighlightActiveHandle(){this._highlightHandle&&this._highlightHandle.remove()}setSharedUndoStack(t){this._sharedUndoStack=t}setSharedRedoStack(t){this._sharedRedoStack=t}async _initialize(){const{view:t,mediaElement:e}=this;if(null==e.georeference)return;const n=e.georeference;"control-points"===n.type&&null!=n.coords&&(this._georeference=n,this._initialControlPoints=this._georeference.controlPoints,t.map.addMany([this._graphicsLayer]),t.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._controlPointEditGeometryOperations=this._georeference.controlPoints.map((({mapPoint:e})=>D.p.fromGeometry((0,C.project)(e,t.spatialReference),$.RT.Local))),this._controlPointGraphics=this._controlPointEditGeometryOperations.map(((t,e)=>new r.default({symbol:new d.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,colorLocked:!0,anchorPoint:{x:0,y:-15.75},anchorPointUnits:"Absolute",dominantSizeAxis3D:"Y",size:9,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:84.3,ymax:84.3},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[83.2,32.5],[84.3,40.7],[83.8,48.9],[81.7,56.9],[78.1,64.3],[73,70.9],[66.9,76.4],[59.7,80.5],[51.9,83.2],[43.7,84.3],[35.4,83.8],[27.4,81.7],[20,78],[13.4,73],[7.9,66.8],[3.8,59.7],[1.1,51.9],[0,43.7],[.5,35.4],[2.6,27.4],[6.3,20],[11.3,13.4],[17.5,7.9],[24.7,3.8],[32.5,1.1],[39.8,.1],[47.1,.3],[54.3,1.8],[61.1,4.5],[67.4,8.4],[72.9,13.3],[77.4,19.1],[80.9,25.5],[83.2,32.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:[255,255,255,255]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:"CIMClippingPath",clippingType:"Intersect",path:{rings:[[[0,0],[84.3,0],[84.3,84.3],[0,84.3],[0,0]]]}},rotation:0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-11.25},anchorPointUnits:"Absolute",dominantSizeAxis3D:"Y",size:22.5,billboardMode3D:"FaceNearPlane",frame:{xmin:0,ymin:0,xmax:197.7,ymax:294.7},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[98.9,0],[119.4,23.2],[139.4,49.3],[156.8,75.2],[171.2,100.8],[182.4,125.3],[190.6,148.8],[195.7,171.4],[197.7,192.9],[197.7,195.8],[197.7,200.3],[197.6,202.5],[197.5,204.8],[197.3,207.1],[197,209.4],[196.7,211.7],[196.4,214.1],[196,216.4],[195.5,218.7],[195,221.1],[194.4,223.4],[193.7,225.8],[193,228.1],[192.2,230.5],[191.4,232.8],[190.5,235.1],[189.5,237.5],[188.5,239.7],[187.4,242],[186.2,244.3],[185,246.5],[183.7,248.7],[182.4,250.9],[181,253.1],[179.5,255.2],[178,257.3],[176.4,259.4],[174.7,261.4],[173.1,263.3],[171.3,265.3],[169.5,267.2],[167.7,269],[165.8,270.8],[163.9,272.5],[161.9,274.2],[159.9,275.8],[157.8,277.4],[155.7,278.9],[153.6,280.4],[151.4,281.7],[149.2,283.1],[147,284.4],[144.8,285.6],[142.5,286.7],[140.3,287.8],[138,288.8],[135.7,289.8],[133.4,290.7],[131,291.5],[128.7,292.3],[126.4,293],[124,293.6],[121.7,294.2],[119.4,294.7],[117,295.2],[114.7,295.6],[112.4,296],[110.1,296.3],[107.8,296.5],[105.5,296.7],[103.3,296.8],[101.1,296.9],[98.8,296.9],[83.1,295.7],[67.8,292],[53.3,285.9],[39.9,277.5],[28.1,267.2],[18,255.1],[10,241.5],[4.2,226.9],[.9,211.5],[0,195.8],[.1,192.9],[2.1,171.4],[7.2,148.8],[15.4,125.3],[26.6,100.8],[41,75.2],[58.4,49.3],[78.4,23.2],[98.9,0]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:e===this.activeHandle?z.toArray():this.view.effectiveTheme.accentColor.toArray()}]}}],scaleSymbolsProportionally:!0,respectFrame:!0,clippingPath:{type:"CIMClippingPath",clippingType:"Intersect",path:{rings:[[[0,0],[197.7,0],[197.7,294.7],[0,294.7],[0,0]]]}},rotation:0}],haloSize:1,scaleX:1,angleAlignment:"Display",angle:0}}}),geometry:t.data.geometry}))),this._graphicsLayer.graphics.addMany([...this._controlPointGraphics]),this._controlPointManipulations=this._controlPointGraphics.map((e=>new L({tool:this,view:t,graphic:e}))),this.addHandles([...this._controlPointManipulations.map(((t,e)=>t.createDragPipeline(this._getInfo.bind(this,e),((t,n)=>{"start"===t.action&&(this._undoStack.push(e),this._redoStack=[],this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0),this.updateGraphics()})))),(0,a.watch)((()=>this.view.scale),(()=>this.active?this.updateGraphics():null))]),this._controlPointManipulations.forEach(((t,e)=>{t.forEachManipulator((t=>{this.addHandles([t.events.on(["click","grab-changed"],(t=>this.updateActiveHandle(e)))])}))})),this.addHandles([t.on("key-down",(n=>{t.activeTool===this&&(n.key!==Z||n.repeat||(this._isModifierActive=!0,n.stopPropagation()),"t"!==n.key||n.repeat||(e.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled,n.stopPropagation()),n.key!==G||n.repeat||(this._factor=10,n.stopPropagation()),this._isModifierActive&&("ArrowUp"===n.key&&(this._move(0,this._factor),n.stopPropagation()),"ArrowDown"===n.key&&(this._move(0,-this._factor),n.stopPropagation()),"ArrowLeft"===n.key&&(this._move(-this._factor,0),n.stopPropagation()),"ArrowRight"===n.key&&(this._move(this._factor,0),n.stopPropagation())))})),t.on("key-up",(e=>{t.activeTool===this&&(e.key===Z&&(this._isModifierActive=!1,e.stopPropagation()),e.key===G&&(this._factor=1,e.stopPropagation()))}))]))}async _loadProjectionEngine(){const t=this._georeference.controlPoints[0].mapPoint;return(0,C.initializeProjection)(t.spatialReference,this.view.spatialReference)}_getInfo(t){return{editGeometryOperations:this._controlPointEditGeometryOperations[t],constraints:this._hasValidSpatialReference?null:{xmin:0,ymin:0,xmax:this._georeference.width,ymax:this._georeference.height}}}_move(t,e){const n=this._controlPointEditGeometryOperations[this.activeHandle].move(t*this.view.resolution,e*this.view.resolution,0,R.Y.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0,this.updateGraphics()}};(0,i._)([(0,l.MZ)()],U.prototype,"_hasValidSpatialReference",null),(0,i._)([(0,l.MZ)()],U.prototype,"activeHandle",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],U.prototype,"mediaElement",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],U.prototype,"type",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],U.prototype,"view",void 0),U=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.ControlPointsTransformTool")],U);var F=n(75505),H=n(62938),j=n(13786),B=n(1932),W=n(20551),Y=n(32501),q=n(2075),K=n(14606),X=n(15774);function Q(t,e){"start"===t.action?e.cursor="grabbing":e.cursor="grab"}class J{constructor(){this._lastDragEvent=null,this.next=new P.rh,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent){const e={...this._lastDragEvent,action:"update"};t&&this._adjustScaleFactors(e),this.next.execute(e)}this._enabled=t}createDragEventPipelineStep(){return this._lastDragEvent=null,t=>(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled&&this._adjustScaleFactors(t),t)}_adjustScaleFactors(t){const e=0!==t.direction[0]&&0!==t.direction[1]?Math.max(Math.abs(t.factor1),Math.abs(t.factor2)):0===t.direction[0]?Math.abs(t.factor2):Math.abs(t.factor1);t.factor1=t.factor1<0?-e:e,t.factor2=t.factor2<0?-e:e}}class tt{constructor(){this._lastDragEvent=null,this.next=new P.rh,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent){const e={...this._lastDragEvent,action:"update"};t&&this._adjustRotateAngle(e),this.next.execute(e)}this._enabled=t}createDragEventPipelineStep(){return this._lastDragEvent=null,t=>(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled&&this._adjustRotateAngle(t),t)}_adjustRotateAngle(t){const e=(0,X.KJ)(t.rotateAngle);t.rotateAngle=(0,X.kU)(5*Math.round(e/5))}}var et=n(67060),nt=n(57665),it=n(41857);class rt extends A{constructor(t){super(),this._handles=new K.A,this._originCache=(0,Y.vt)(),this._view=t.view,this._tool=t.tool,this._graphic=t.graphic,this._snapRotation=t.snapRotation,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on("grab-changed",(t=>Q(t,this._manipulator)))]),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles.destroy(),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null,this._snapRotation=null,this._graphic=null,this._handles=null,this._originCache=null}forEachManipulator(t){t(this._manipulator,M.ROTATE)}createDragPipeline(t,e){let n=null,i=null;return(0,P.Xt)(this._manipulator,((r,o)=>{o.next((e=>{if("start"===e.action){r.cursor="grabbing";const e=t();n=e.plane,i=e.editGeometryOperations}return e})).next((0,P.y$)(this._view)).next((t=>({...t,rotateAngle:(0,et.UT)(t.mapStart,t.mapEnd,{x:n.origin[0],y:n.origin[1]},!0)}))).next(this._snapRotation.createDragEventPipelineStep(),this._snapRotation.next).next((t=>{const r=(0,W.c)(this._originCache,n.origin),o="start"===t.action?R.Y.NEW_STEP:R.Y.ACCUMULATE_STEPS,s=i.rotate(r,t.rotateAngle,o,nt.K.REPLACE);return(0,it.Bb)(s,n),e(t,s),t})).next((t=>("end"===t.action&&(r.cursor="grab"),t)))}))}_createManipulator(){const t=this._view,e=this._graphic;return new I.l({view:t,graphic:e,selectable:!0,cursor:"grab"})}}const ot=1e-6;function st(t){const e=(0,W.l)(t.basis1),n=(0,W.l)(t.basis2);return.3*Math.min(e,n)}class at extends A{constructor(t){super(),this._handles=new K.A,this._planeStart=(0,q.a)(),this._displayPlaneStart=(0,q.a)(),this._originCache=(0,Y.vt)(),this._axisCache=(0,B.vt)(),this._renderStartCache=(0,Y.vt)(),this._renderEndCache=(0,Y.vt)(),this._resizeOriginCache=(0,Y.vt)(),this._view=t.view,this._tool=t.tool,this._graphic=t.graphic,this._direction=t.direction,this._preserveAspectRatio=t.preserveAspectRatio,this._manipulator=this._createManipulator(),this._handles.add([this._manipulator.events.on("grab-changed",(t=>Q(t,this._manipulator)))]),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles.destroy(),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._graphic=null,this._manipulator=null,this._direction=null,this._handles=null,this._planeStart=null,this._displayPlaneStart=null,this._originCache=null,this._axisCache=null,this._renderStartCache=null,this._renderEndCache=null,this._resizeOriginCache=null,this._preserveAspectRatio=null}forEachManipulator(t){t(this._manipulator,M.SCALE)}createDragPipeline(t,e){let n=null,i=null,r=null,o=0,s=null,a=null;const l=this._planeStart,c=this._displayPlaneStart,u=this._direction;return(0,P.Xt)(this._manipulator,((d,h)=>{h.next((e=>{if("start"===e.action){d.cursor="grabbing";const e=t();n=e.plane,i=e.displayPlane,r=e.editGeometryOperations,o=10*this._view.resolution,(0,q.c)(n,l),(0,q.c)(i,c);const a=(0,T.Vp)(r.data.spatialReference);s=a?a.valid[1]-a.valid[0]-30*this._view.resolution:null}return e})).next((0,P.y$)(this._view)).next((t=>{const e=(0,W.c)(this._renderStartCache,[t.mapStart.x,t.mapStart.y,0]),n=(0,W.c)(this._renderEndCache,[t.mapEnd.x,t.mapEnd.y,0]),r=(0,W.c)(this._resizeOriginCache,c.origin);(0,W.b)(r,r,c.basis1,-u[0]),(0,W.b)(r,r,c.basis2,-u[1]),(0,W.d)(n,n,r),(0,W.d)(e,e,r);const s=0!==u[0]&&0!==u[1],a=st(c),l=st(i)/a,d=(t,i)=>{if(0===t)return 1;let r=(0,W.l)(i),a=.5*t*(0,W.f)(i,n)/r;const c=a<0?-1:1;s&&(a+=(r-.5*t*(0,W.f)(i,e)/r)*c*l);const u=r<1.5*o?1:ot;return r=Math.max(r-o,ot),c>0&&(a-=10*this._view.resolution),c*Math.max(c*(a/r),u)},h=d(u[0],c.basis1),p=d(u[1],c.basis2);return{...t,direction:u,factor1:h,factor2:p}})).next(this._preserveAspectRatio.createDragEventPipelineStep(),this._preserveAspectRatio.next).next((t=>{const i=(0,W.c)(this._originCache,l.origin);(0,W.b)(i,i,l.basis1,-u[0]),(0,W.b)(i,i,l.basis2,-u[1]);const o=(0,j.hZ)(this._axisCache,l.basis1[0],l.basis1[1]);(0,j.S8)(o,o);const c=r.data.allVertices,d="start"===t.action?R.Y.NEW_STEP:R.Y.ACCUMULATE_STEPS,h=r.scaleVertices(c,i,o,t.factor1,t.factor2,d,nt.K.REPLACE);return s&&s<r.data.geometry.extent.width&&a?r.updateVertices(c,a):((0,q.c)(l,n),(0,it.Bb)(h,n),a=h.operation,e(t,h)),t})).next((t=>("end"===t.action&&(d.cursor="grab"),t)))}))}_createManipulator(){return new I.l({view:this._view,graphic:this._graphic,selectable:!0,cursor:"grab"})}}var lt=n(37578),ct=n(2623),ut=n(32992),dt=n(62097),ht=n(44740),pt=n(8740);V.i;const ft=[[1,1],[1,-1],[-1,-1],[-1,1],[1,0],[0,-1],[-1,0],[0,1]];let mt=class extends N.g{constructor(t){super(t),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._planeCache=(0,q.a)(),this._displayPlaneCache=(0,q.a)(),this._mainAxisCache=(0,B.vt)(),this._rotationHandleCache=(0,Y.vt)(),this._cornerA=(0,Y.vt)(),this._cornerB=(0,Y.vt)(),this._cornerC=(0,Y.vt)(),this._cornerD=(0,Y.vt)(),this._avgAB=(0,Y.vt)(),this._avgBC=(0,Y.vt)(),this._avgCD=(0,Y.vt)(),this._avgDA=(0,Y.vt)(),this._preserveAspectRatio=new J,this._snapRotation=new tt,this._graphicsLayer=new k.default({internal:!0,listMode:"hide",visible:!1}),this._sharedUndoStack=[],this._sharedRedoStack=[],this._isOpacityToggled=!1,this._factor=1,this.preserveAspectRatio=null,this.snapRotation=null,this.type="transform"}initialize(){this._initialize()}destroy(){const{map:t}=this.view;this._dragManipulation.destroy(),this._rotateManipulation.destroy(),this._scaleManipulations.forEach((t=>t.destroy())),this._editGeometryOperations.destroy(),t.removeMany([this._graphicsLayer]),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,s.pR)(this._graphicsLayer),this._initialControlPoints=null,this._initialGeometry=null,this._graphic=null,this._preserveAspectRatio=null,this._snapRotation=null,this._planeCache=null,this._displayPlaneCache=null,this._rotationHandleCache=null,this._mainAxisCache=null,this._cornerA=null,this._cornerB=null,this._cornerC=null,this._cornerD=null,this._avgAB=null,this._avgBC=null,this._avgCD=null,this._avgDA=null,this._sharedUndoStack=null,this._sharedRedoStack=null}get _plane(){const t=this._graphic.geometry;if(null==t)return null;const e=this._editGeometryOperations.data,n=e.components[0].edges[0],i=(0,j.Re)(this._mainAxisCache,n.leftVertex.pos,n.rightVertex.pos);(0,j.S8)(i,i);let r=80*this.view.resolution;const o=this.view.spatialReference;return(0,T.aI)(o,t.spatialReference)&&(r*=(0,H.GA)(o)/(0,H.GA)(t.spatialReference)),(0,it.G3)(i,e,r,this._planeCache)}get _displayPlane(){const t=this._plane;if(!t)return null;const e=this._displayPlaneCache;(0,q.c)(t,e);const n=10*this.view.resolution;return(0,W.h)(e.basis1,e.basis1,1+n/(0,W.l)(e.basis1)),(0,W.h)(e.basis2,e.basis2,1+n/(0,W.l)(e.basis2)),e}get _backgroundGraphicGeometry(){const t=this._displayPlane;if(!t)return null;const e=this.view.spatialReference;return this._updateDisplayPlaneConrers(t),new ht.A({spatialReference:e,rings:[[this._cornerA,this._cornerB,this._cornerC,this._cornerD,this._cornerA]]})}get _rotateGraphicGeometry(){const t=this._plane;if(!t)return null;const e=this._rotationHandleCache;return(0,W.n)(e,t.basis1),(0,W.h)(e,e,30*this.view.resolution),(0,W.g)(e,e,t.origin),(0,W.g)(e,e,t.basis1),new _.default({x:e[0],y:e[1],spatialReference:this.view.spatialReference})}get _scaleGraphicGeometries(){const t=this._displayPlane;if(!t)return[];const e=this.view.spatialReference;this._updateDisplayPlaneConrers(t);const{_cornerA:n,_cornerB:i,_cornerC:r,_cornerD:o}=this,s=(0,W.m)(this._avgAB,n,i,.5),a=(0,W.m)(this._avgBC,i,r,.5),l=(0,W.m)(this._avgCD,r,o,.5),c=(0,W.m)(this._avgDA,o,n,.5);return[new _.default({x:n[0],y:n[1],spatialReference:e}),new _.default({x:i[0],y:i[1],spatialReference:e}),new _.default({x:r[0],y:r[1],spatialReference:e}),new _.default({x:o[0],y:o[1],spatialReference:e}),new _.default({x:s[0],y:s[1],spatialReference:e}),new _.default({x:a[0],y:a[1],spatialReference:e}),new _.default({x:l[0],y:l[1],spatialReference:e}),new _.default({x:c[0],y:c[1],spatialReference:e})]}onActivate(){this.visible=!0}onDeactivate(){this.visible=!1}onShow(){this._graphicsLayer.visible=!0}onHide(){this._graphicsLayer.visible=!1}canUndo(){return this._editGeometryOperations.canUndo}canRedo(){return this._editGeometryOperations.canRedo}undo(){this._editGeometryOperations.undo(),this.updateGraphics()}redo(){this._editGeometryOperations.redo(),this.updateGraphics()}refresh(){const{view:t,target:e}=this,n="georeference"in e?e.georeference.coords:e.geometry,i=this._editGeometryOperations,r=i.data.components[0].vertices,o=ct.ZE.fromGeometry((0,C.project)(n,t.spatialReference),$.RT.Local).components[0].vertices;r.forEach(((t,e)=>{i.setVertexPosition(t,o[e].pos)})),this.updateGraphics()}reset(){const{target:t}=this;if("georeference"in t){const e=t.georeference;"control-points"===e.type&&(e.controlPoints=this._initialControlPoints)}else t.geometry=this._initialGeometry;this.refresh(),this._sharedUndoStack.length=0,this._sharedRedoStack.length=0}updateGraphics(){const t=this._editGeometryOperations.data.geometry;"georeference"in this.target&&(this.target.georeference.coords=t),this._graphic.geometry=t,this._backgroundGraphic.geometry=this._backgroundGraphicGeometry,this._rotateGraphic.geometry=this._rotateGraphicGeometry,this._scaleGraphicGeometries.forEach(((t,e)=>{this._scaleGraphics[e].geometry=t}))}setSharedUndoStack(t){this._sharedUndoStack=t}setSharedRedoStack(t){this._sharedRedoStack=t}async _initialize(){const{view:t,target:e}=this;if("georeference"in e){const t=e.georeference;this._graphic=new r.default({geometry:t.coords}),this._initialControlPoints="control-points"===t.type?t.controlPoints:null}else this._graphic=e,this._initialGeometry=e.geometry;t.map.addMany([this._graphicsLayer]),t.focus(),this.visible=!1,this.finishToolCreation(),await this._loadProjectionEngine(),this._editGeometryOperations=D.p.fromGeometry((0,C.project)(this._graphic.geometry,t.spatialReference),$.RT.Local),this._backgroundGraphic=new r.default({symbol:new pt.A({color:"transparent",outline:{type:"simple-line",color:t.effectiveTheme.accentColor,width:2}}),geometry:this._backgroundGraphicGeometry}),this._rotateGraphic=new r.default({symbol:new h.A({color:(0,F.bJ)(t.effectiveTheme.accentColor),outline:{type:"simple-line",color:t.effectiveTheme.accentColor,width:1}}),geometry:this._rotateGraphicGeometry}),this._scaleGraphics=this._scaleGraphicGeometries.map((e=>new r.default({symbol:new h.A({size:6,style:"square",color:(0,F.bJ)(t.effectiveTheme.accentColor),outline:{type:"simple-line",color:t.effectiveTheme.accentColor,width:1}}),geometry:e}))),this._graphicsLayer.graphics.addMany([this._backgroundGraphic,this._rotateGraphic,...this._scaleGraphics]),this._dragManipulation=new L({tool:this,view:t,graphic:this._graphic}),this._rotateManipulation=new rt({tool:this,view:t,graphic:this._rotateGraphic,snapRotation:this._snapRotation}),this._scaleManipulations=this._scaleGraphics.map(((e,n)=>new at({tool:this,view:t,graphic:e,direction:ft[n],preserveAspectRatio:this._preserveAspectRatio}))),this.addHandles([this._dragManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),this._rotateManipulation.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)),...this._scaleManipulations.map((t=>t.createDragPipeline(this._getInfo.bind(this),this._updateGraphics.bind(this)))),(0,a.watch)((()=>this.view.scale),(()=>this.active?this.updateGraphics():null)),t.on("click",(async n=>{if(null!=t.activeTool&&t.activeTool!==this)return;const i=(0,dt.ZV)(n),r=[];t.map.allLayers.forEach((t=>{"vector-tile"!==t.type&&"imagery"!==t.type||r.push(t)}));const o=await this.view.hitTest(i,{exclude:r}),s=o.results;if(0===s.length)t.activeTool=null;else{const n=(0,ut.zF)(o.results),i="georeference"in e,r=s.map((t=>"media"===t.type?t.element:null)).filter(Boolean),a=new Set([...this._graphicsLayer.graphics,i?null:e].filter(Boolean));i&&r.includes(e)||null!=n&&a.has(n.graphic)?null==t.activeTool&&(t.activeTool=this):t.activeTool=null}}))]);const n=t=>{this.addHandles(t.events.on("grab-changed",(t=>{"georeference"in e&&("start"===t.action?e.opacity*=.5:"end"===t.action&&(e.opacity*=2))})))};this._dragManipulation.forEachManipulator(n),this._rotateManipulation.forEachManipulator(n),this._scaleManipulations.forEach((t=>t.forEachManipulator(n)));const i=new lt.oe;i.addToggle(lt.TU.preserveAspectRatio,(()=>{null==this.preserveAspectRatio&&(this._preserveAspectRatio.enabled=!this._preserveAspectRatio.enabled)})),i.addToggle(lt.TU.rotateIncrements,(()=>{null==this.snapRotation&&(this._snapRotation.enabled=!this._snapRotation.enabled)})),i.add(lt.TU.toggleOpacity,(()=>{"georeference"in e&&(e.opacity*=this._isOpacityToggled?2:.5,this._isOpacityToggled=!this._isOpacityToggled)})),i.addToggle(lt.TU.factorModifier,(t=>this._factor="key-down"===t.type?10:1)),i.add(lt.TU.scaleUp,(()=>this._scale(this._factor))),i.add(lt.TU.scaleDown,(()=>this._scale(-this._factor))),i.add(lt.TU.moveUp,(()=>this._move(0,this._factor))),i.add(lt.TU.moveDown,(()=>this._move(0,-this._factor))),i.add(lt.TU.moveLeft,(()=>this._move(-this._factor,0))),i.add(lt.TU.moveRight,(()=>this._move(this._factor,0))),this.addHandles([t.on("key-down",(e=>{t.activeTool===this&&i.dispatch(t.inputManager,e)})),t.on("key-up",(e=>{t.activeTool===this&&i.dispatch(t.inputManager,e)}))])}async _loadProjectionEngine(){const t=this._graphic.geometry;return(0,C.initializeProjection)(t.spatialReference,this.view.spatialReference)}_updateDisplayPlaneConrers(t){const{basis1:e,basis2:n,origin:i}=t,r=this._cornerA;(0,W.g)(r,i,e),(0,W.g)(r,r,n);const o=this._cornerB;(0,W.g)(o,i,e),(0,W.d)(o,o,n);const s=this._cornerC;(0,W.d)(s,i,e),(0,W.d)(s,s,n);const a=this._cornerD;(0,W.d)(a,i,e),(0,W.g)(a,a,n)}_getInfo(){return{editGeometryOperations:this._editGeometryOperations,plane:this._plane,displayPlane:this._displayPlane}}_updateGraphics(t,e){"start"===t.action&&(this._sharedUndoStack.push({tool:this,operation:e}),this._sharedRedoStack.length=0),this.updateGraphics()}_scale(t){const e=this._editGeometryOperations,n=e.data.geometry.extent?.width,i=(n+t*this.view.resolution)/n,r=e.scale(this._plane.origin,B.Cw,i,i,R.Y.NEW_STEP,nt.K.REPLACE);this._sharedUndoStack.push({tool:this,operation:r}),this._sharedRedoStack.length=0,this.updateGraphics()}_move(t,e){const n=this._editGeometryOperations.move(t*this.view.resolution,e*this.view.resolution,0,R.Y.NEW_STEP);this._sharedUndoStack.push({tool:this,operation:n}),this._sharedRedoStack.length=0,this.updateGraphics()}};(0,i._)([(0,l.MZ)()],mt.prototype,"_plane",null),(0,i._)([(0,l.MZ)()],mt.prototype,"_backgroundGraphicGeometry",null),(0,i._)([(0,l.MZ)()],mt.prototype,"_rotateGraphicGeometry",null),(0,i._)([(0,l.MZ)()],mt.prototype,"_scaleGraphicGeometries",null),(0,i._)([(0,l.MZ)()],mt.prototype,"preserveAspectRatio",void 0),(0,i._)([(0,l.MZ)()],mt.prototype,"snapRotation",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],mt.prototype,"target",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],mt.prototype,"type",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],mt.prototype,"view",void 0),mt=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.TransformTool")],mt);var gt=n(83525);let yt=class extends gt.A{constructor(t){super(t),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=[],this._sharedRedoStack=[],this._originalOpacity=null,this.activeHandle=0}initialize(){const{view:t,mediaElement:e,preserveAspectRatio:n,snapRotation:i,advancedMode:r}=this;this._originalOpacity=e.opacity,this._transformTool=new mt({target:e,view:t,preserveAspectRatio:n,snapRotation:i}),this._controlPointsTransformTool=new U({mediaElement:e,view:t}),this._advancedModeTransformTool=new U({mediaElement:r.mediaElement,view:r.view}),this._transformTool.setSharedUndoStack(this._sharedUndoStack),this._transformTool.setSharedRedoStack(this._sharedRedoStack),this._controlPointsTransformTool.setSharedUndoStack(this._sharedUndoStack),this._controlPointsTransformTool.setSharedRedoStack(this._sharedRedoStack),this._advancedModeTransformTool.setSharedUndoStack(this._sharedUndoStack),this._advancedModeTransformTool.setSharedRedoStack(this._sharedRedoStack);const o=e.georeference,s=r.mediaElement.georeference;r.view.tools.addMany([this._advancedModeTransformTool]),"controlPoints"in s&&"controlPoints"in o&&this.addHandles([r.view.on("key-down",(t=>{"z"===t.key&&this.canUndo()&&(this.undo(),t.stopPropagation()),"r"===t.key&&this.canRedo()&&(this.redo(),t.stopPropagation())})),r.view.on("focus",(async t=>{this._controlPointsTransformTool.removeHighlightActiveHandle(),this._advancedModeTransformTool.highlightActiveHandle()})),(0,a.watch)((()=>s.controlPoints),(t=>{o.controlPoints=t.map((({sourcePoint:t},e)=>({sourcePoint:t,mapPoint:o.controlPoints[e].mapPoint}))),this._activeTool?.refresh()})),(0,a.watch)((()=>this._controlPointsTransformTool.activeHandle),(t=>{this._advancedModeTransformTool.updateActiveHandle(t),this.activeHandle=t})),(0,a.watch)((()=>this._advancedModeTransformTool.activeHandle),(t=>{this._controlPointsTransformTool.updateActiveHandle(t),this.activeHandle=t}))]),this.addHandles([t.on("key-down",(t=>{"z"===t.key&&this.canUndo()&&(this.undo(),t.stopPropagation()),"r"===t.key&&this.canRedo()&&(this.redo(),t.stopPropagation())})),t.on("focus",(async t=>{this._advancedModeTransformTool.removeHighlightActiveHandle(),this._controlPointsTransformTool.highlightActiveHandle()}))]),t.tools.addMany([this._transformTool,this._controlPointsTransformTool]),t.activeTool=this._transformTool,this._activeTool=this._transformTool,t.focus()}destroy(){this._transformTool?.destroy(),this._controlPointsTransformTool?.destroy(),this._transformTool=null,this._controlPointsTransformTool=null,this._advancedModeTransformTool=null,this._activeTool=null,this._sharedUndoStack=null,this._sharedRedoStack=null}canUndo(){return this._sharedUndoStack.length>0}canRedo(){return this._sharedRedoStack.length>0}undo(){if(this._sharedUndoStack.length>0){const{tool:t,operation:e}=this._sharedUndoStack.pop();t!==this._activeTool&&t.refresh(),e.undo(),t.updateGraphics(),this._sharedRedoStack.push({tool:t,operation:e}),this._activeTool!==t&&this._activeTool?.refresh()}}redo(){if(this._sharedRedoStack.length>0){const{tool:t,operation:e}=this._sharedRedoStack.pop();t!==this._activeTool&&t.refresh(),e.apply(),t.updateGraphics(),this._sharedUndoStack.push({tool:t,operation:e}),this._activeTool!==t&&this._activeTool?.refresh()}}refresh(){this._activeTool.refresh()}reset(){this._activeTool.reset(),this._advancedModeTransformTool.reset()}async enableAdvancedMode(){this.view.activeTool=this._controlPointsTransformTool,this._activeTool=this._controlPointsTransformTool,this._activeTool.refresh(),await this.advancedMode.view.when(),this.advancedMode.view.activeTool=this._advancedModeTransformTool,this._originalOpacity=this._controlPointsTransformTool.mediaElement.opacity,this._controlPointsTransformTool.mediaElement.opacity=.25*this._originalOpacity}disableAdvancedMode(){this.view.activeTool=this._transformTool,this._activeTool=this._transformTool,this._activeTool.refresh(),this.advancedMode.view.activeTool=null,this._controlPointsTransformTool.mediaElement.opacity=this._originalOpacity}};(0,i._)([(0,l.MZ)()],yt.prototype,"activeHandle",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],yt.prototype,"advancedMode",void 0),(0,i._)([(0,l.MZ)()],yt.prototype,"preserveAspectRatio",void 0),(0,i._)([(0,l.MZ)()],yt.prototype,"snapRotation",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],yt.prototype,"mediaElement",void 0),(0,i._)([(0,l.MZ)({constructOnly:!0})],yt.prototype,"view",void 0),yt=(0,i._)([(0,c.$)("esri.views.2d.interactive.editingTools.MediaTransformToolsWrapper")],yt)},65420:function(t,e,n){"use strict";var i;n.d(e,{RT:function(){return i}}),function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"}(i||(i={}))},93336:function(t,e,n){"use strict";n.d(e,{N:function(){return Qt},l:function(){return ee}});var i,r,o=n(53804),s=n(59469),a=n(83525),l=n(78879),c=n(28181),u=n(23502),d=(n(58941),n(40633),n(13798),n(65953)),h=n(20248);!function(t){t[t.NeverApplied=0]="NeverApplied",t[t.Applied=1]="Applied",t[t.Undone=2]="Undone"}(i||(i={})),function(t){t.UndoRedoUpdating="UndoRedoUpdating",t.UndoInvalidError="UndoInvalidError",t.RedoInvalidError="RedoInvalidError",t.ApplyInvalidError="ApplyInvalidError"}(r||(r={}));const p={[r.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[r.UndoInvalidError]:"There are no items to Undo",[r.RedoInvalidError]:"There are no items to Redo",[r.ApplyInvalidError]:"Cannot apply an item that is already applied"};class f extends Error{constructor(){super(p[r.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class m extends Error{constructor(){super(p[r.UndoInvalidError]),this.type="undo-redo-undo-error"}}class g extends Error{constructor(){super(p[r.RedoInvalidError]),this.type="undo-redo-redo-error"}}class y extends Error{constructor(){super(p[r.ApplyInvalidError]),this.type="undo-redo-apply-error"}}var v,_;(_=v||(v={}))[_.Apply=0]="Apply",_[_.Undo=1]="Undo",_[_.Redo=2]="Redo";let b=class extends a.A{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=i.NeverApplied}get canUndo(){return this.status===i.Applied}get canRedo(){return this.status===i.Undone}async executeUndoRedoOperation(t){switch(t){case v.Apply:if(this.status!==i.NeverApplied)throw new y;return await this.apply(),void(this.status=i.Applied);case v.Undo:if(this.status!==i.Applied)throw new m;return await this.undo(),void(this.status=i.Undone);case v.Redo:if(this.status!==i.Undone)throw new m;return await this.redo(),void(this.status=i.Applied)}}};(0,o._)([(0,u.MZ)()],b.prototype,"name",void 0),(0,o._)([(0,u.MZ)()],b.prototype,"tag",void 0),b=(0,o._)([(0,d.$)("esri.undoredo.UndoableOperation")],b);let x=class extends a.A{constructor(){super(...arguments),this._stack=new l.A,this._stackPosition=-1,this._updatingHandles=new h.U}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((t=>t.destroy()))}_drainStack(){this._stack.drain((t=>t.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new m;if(this.updating)throw new f;const t=this._stack.getItemAt(this._stackPosition);t&&await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(v.Undo),--this._stackPosition,t.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new g;if(this.updating)throw new f;const t=this._stack.getItemAt(this._stackPosition+1);if(!t)throw new g;await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(v.Redo),++this._stackPosition})())}peekUndo(){if(this.canUndo)return this._stack.getItemAt(this._stackPosition)}peekRedo(){if(this.canRedo)return this._stack.getItemAt(this._stackPosition+1)}async inject(t){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{t.status===i.NeverApplied&&await t.executeUndoRedoOperation(v.Apply),t.canUndo?(this._stack.splice(this._stackPosition+1,0,t),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((t=>t.destroy())),this._stackPosition=-1)})())}async add(t){if(this.updating)throw new f;await this._updatingHandles.addPromise((async()=>{t.status===i.NeverApplied&&await t.executeUndoRedoOperation(v.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),t.canUndo?(this._stack.push(t),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(t,e=!1){if(this.updating&&!e)return;await(0,c.C_)((()=>!this.updating));const n=new l.A;for(let e=0;e<this._stack.length;e++){const i=this._stack.getItemAt(e);i&&(i.tag===t?(i.destroy(),e===this._stackPosition&&(this._stackPosition=n.length-1)):n.push(i))}this._stack=n,this._stackPosition>n.length-1&&(this._stackPosition=n.length-1)}async clear(t=!1){if(this.updating&&!t)throw new f;await(0,c.C_)((()=>!this.updating)),this._drainStack()}};(0,o._)([(0,u.MZ)()],x.prototype,"_stack",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"_stackPosition",void 0),(0,o._)([(0,u.MZ)()],x.prototype,"updating",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"canUndo",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"hasUndo",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"canRedo",null),(0,o._)([(0,u.MZ)({readOnly:!0})],x.prototype,"hasRedo",null),x=(0,o._)([(0,d.$)("esri.UndoRedo")],x);var w=n(77472),M=n(48996),S=n(61226),C=n(95929),T=n(6338),k=n(19702),E=n(42413);class ${constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}n(50917);var A,P=n(50659),I=n(21609),R=n(62938),O=n(20551),L=n(32501),V=n(61714),N=n(45532),D=n(44740),Z=n(57165),G=n(57862),z=n(1644),U=n(94757);let F=A=class extends D.A{constructor(t){super(t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=t?.hasZ??!1,0!==this.rings.length||!t)return;const n=(0,R.oU)(this.radius,this.radiusUnit,"meters"),i=t.spatialReference;let r,o="geographic";if(i.isWebMercator?o="webMercator":(null!=(i.wkid&&U.A[i.wkid])||(i.wkt2||i.wkt)&&(0,R.x1)(i.wkt2||i.wkt))&&(o="projected"),this.geodesic){let i;switch(o){case"webMercator":i=(0,z.ci)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":i=t}r=this._createGeodesicCircle(i,n,e),"webMercator"===o&&(r=(0,z.Gh)(r))}else{let i;"webMercator"===o||"projected"===o?i=n/(0,R.Ao)(t.spatialReference):"geographic"===o&&(i=(0,R.vl)(n,"meters",(0,V.tO)(t.spatialReference).radius)),r=this._createPlanarCircle(t,i,e)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:n,radiusUnit:i,geodesic:r}=this;return new A({center:t?.clone(),numberOfPoints:e,radius:n,radiusUnit:i,geodesic:r})}_createGeodesicCircle(t,e,n){let i=0;const r=[];for(;i<360;){const o=[0,0],s=[t.x,t.y];(0,G.vN)(o,s,i,e,Z.A.WGS84),this.hasZ&&o.push(t.z),r.push(o),i+=360/n}return r.push(r[0]),new D.A({rings:[r]})}_createPlanarCircle(t,e,n){const i=[],r=2*Math.PI/n;for(let o=0;o<n;++o){const n=r*o,s=[t.x+Math.cos(-n)*e,t.y+Math.sin(-n)*e];this.hasZ&&s.push(t.z),i.push(s)}return i.push(i[0]),new D.A({spatialReference:t.spatialReference,rings:[i]})}};(0,o._)([(0,u.MZ)({type:N.default})],F.prototype,"center",void 0),(0,o._)([(0,u.MZ)()],F.prototype,"geodesic",void 0),(0,o._)([(0,u.MZ)()],F.prototype,"numberOfPoints",void 0),(0,o._)([(0,u.MZ)()],F.prototype,"radius",void 0),(0,o._)([(0,u.MZ)()],F.prototype,"radiusUnit",void 0),F=A=(0,o._)([(0,d.$)("esri.geometry.Circle")],F);const H=F;var j=n(22162),B=n(38441),W=n(57652),Y=n(67348),q=n(12978),K=n(32237),X=n(61769),Q=n(72485);function J(t,e,n=null){return null!=n?[t,e,n]:[t,e]}function tt(t,e,n=null){return null!=n?{x:t,y:e,z:n}:{x:t,y:e}}class et{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return t.map((t=>this.mapToLocal(t))).filter(P.Ru)}get doUnnormalization(){return!1}}class nt extends et{constructor(t,e,n=null){super(e),this._defaultZ=n,this.transform=(0,q.vt)(),this.transformInv=(0,q.vt)(),this.transform=(0,q.o8)(t),(0,Y.B8)(this.transformInv,this.transform)}makeMapPoint(t,e){return J(t,e,this._defaultZ)}mapToLocal(t){return tt(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return J(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class it extends et{constructor(t,e){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=(0,L.vt)(),this.tangentFrameUpWS=(0,L.vt)(),this.tangentFrameRightWS=(0,L.vt)(),this.tangentFrameForwardWS=(0,L.vt)(),this.localFrameRightWS=(0,L.vt)(),this.localFrameUpWS=(0,L.vt)(),this.worldToLocalTransform=(0,X.vt)(),this.localToWorldTransform=(0,X.vt)(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=e,this.defaultZ=e.hasZ?e.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Q._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Q._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,Q._.Z,this.tangentFrameForwardWS);const i=(0,L.vt)();(0,O.h)(i,this.tangentFrameForwardWS,(0,O.f)(n,this.tangentFrameForwardWS)),(0,O.d)(this.localFrameRightWS,n,i),(0,O.n)(this.localFrameRightWS,this.localFrameRightWS),(0,O.e)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,K.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,K.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,e){return J(t,e,this.defaultZ)}mapToLocal(t){const e=(0,L.vt)();this.view.renderCoordsHelper.toRenderCoords(new N.default({x:t[0],y:t[1],spatialReference:this.spatialReference}),e),(0,O.w)(e,e,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,new N.default({spatialReference:this.view.spatialReference}));return null!=n?tt(n.x/this.scale,n.y/this.scale):null}localToMap(t){const e=(0,L.vt)();this.view.renderCoordsHelper.toRenderCoords(new N.default({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),e),(0,O.w)(e,e,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,new N.default({spatialReference:this.view.spatialReference}));return null!=n?J(n.x,n.y,this.defaultZ):null}}var rt=n(71673),ot=n(91508);function st(t,e){const n=new N.default({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(n.z=t[2]),n}function at(t,e,n){const i=new ot.A({paths:t,spatialReference:e});return n&&(0,B._7)(i),i}function lt(t,e,n,i=!0){const r=(0,I.o8)(t);r.forEach((t=>{const e=t[0],n=t[t.length-1];(0,P.aI)(e,n)&&1!==t.length||t.push(t[0])}));let o=new D.A({rings:r,spatialReference:e});return o.rings.forEach((t=>{(0,B.$3)(t)||t.reverse()})),n&&(0,B._7)(o),i&&o.isSelfIntersecting&&(0,W.fn)(e)&&(o=(0,j.simplify)(o)),o}function ct(t,e,n){const i=e.mapToLocalMultiple(t),r=[],o={x:i[0].x,y:i[0].y},s=i[1].x,a=i[1].y,l=Math.round(s-o.x),c=Math.round(a-o.y),u=Math.max(Math.abs(l),Math.abs(c));if(n){const t={x:o.x+u,y:o.y+u},e={x:o.x-u,y:o.y-u};r.push(tt(t.x,e.y),tt(e.x,e.y),tt(e.x,t.y),tt(t.x,t.y))}else{const t={x:l>0?o.x+u:o.x-u,y:c>0?o.y+u:o.y-u};r.push(tt(o.x,o.y),tt(t.x,o.y),tt(t.x,t.y),tt(o.x,t.y))}return ut(lt([r.map((t=>e.localToMap(t))).filter(P.Ru)],e.spatialReference,e.doUnnormalization,!0),r,e)}function ut(t,e,n){const i=dt(e[3],e[2],n),r=dt(e[1],e[2],n),o=dt(e[0],e[1],n),s=dt(e[0],e[3],n);return{geometry:t,midpoints:null!=i&&null!=r&&null!=o&&null!=s?{top:i,right:r,bottom:o,left:s}:null}}function dt(t,e,n){pt[0]=t.x,pt[1]=t.y,pt[2]=0,ft[0]=e.x,ft[1]=e.y,ft[2]=0,(0,O.m)(pt,pt,ft,.5),ht.x=pt[0],ht.y=ft[1],ht.z=ft[2];const i=n.localToMap(ht);return null!=i?st(i,n.spatialReference):null}const ht=tt(0,0,0),pt=(0,L.vt)(),ft=(0,L.vt)();function mt(t,e,n,i){const r=e.mapToLocalMultiple(t);let o=null,s=null;if(n)o=r[0],s=r[1];else{const t=r[0],e=r[1],n=Math.round(e.x-t.x),i=Math.round(e.y-t.y),a=Math.max(Math.abs(n),Math.abs(i));o=tt(n>0?t.x+a/2:t.x-a/2,i>0?t.y+a/2:t.y-a/2),s=tt(Math.abs(n)>Math.abs(i)?o.x-a/2:o.x,Math.abs(n)>Math.abs(i)?o.y:o.y-a/2)}const a=e.localToMap(o),l=e.localToMap(s);if(null==a||null==l)return null;e.doUnnormalization&&(0,B.JM)([[a,l]],e.spatialReference);const c=st(a,e.spatialReference),u=st(l,e.spatialReference),d=(0,R.GA)(e.spatialReference);let h=0;if((0,W.fn)(e.spatialReference))h=d*(0,j.distance)(c,u,null);else{const t=o.x-s.x,e=o.y-s.y;h=d*Math.sqrt(t*t+e*e)*(i||1)}const p=new H({center:c,radius:h,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:lt(p.rings,p.spatialReference,!1),center:c,edge:u}}var gt=n(56275),yt=n(68945);function vt(t,e){switch(t){case"point":case"multipoint":return"point";case"polyline":return function(t){return(null!=t&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0)<2?"polylineZeroVertices":"polylineOneVertex"}(e);case"polygon":return function(t){const e=null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;return e<3?"polylineZeroVertices":e<4?"polygonOneVertex":"polygonTwoVertices"}(e);default:return}}const _t=(0,L.vt)();var bt=n(7768),xt=n(24148),wt=n(90858);let Mt=class extends wt.w{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=gt.iT}get allFields(){return[]}};(0,o._)([(0,u.MZ)()],Mt.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],Mt.prototype,"radius",void 0),(0,o._)([(0,u.MZ)()],Mt.prototype,"xSize",void 0),(0,o._)([(0,u.MZ)()],Mt.prototype,"ySize",void 0),(0,o._)([(0,u.MZ)()],Mt.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],Mt.prototype,"allFields",null),Mt=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],Mt);var St=n(87265),Ct=n(73919);let Tt=class extends((0,Ct.B)(wt.w)){constructor(t){super(t),this.type="draw-mesh",this.orientation=(0,St.LJ)({lockable:!1}),this.scale=(0,St.dy)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,o._)([(0,u.MZ)()],Tt.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],Tt.prototype,"allFields",null),Tt=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],Tt);let kt=class extends((0,Ct.B)(wt.w)){constructor(t){super(t),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,o._)([(0,u.MZ)()],kt.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],kt.prototype,"allFields",null),kt=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],kt);let Et=class extends((0,Ct.B)(wt.w)){constructor(t){super(t),this.type="draw-polygon",this.direction=(0,St.Gk)(),this.distance=(0,St.Ku)(),this.area=(0,St.Am)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,o._)([(0,u.MZ)()],Et.prototype,"xyMode",void 0),(0,o._)([(0,u.MZ)()],Et.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],Et.prototype,"allFields",null),Et=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],Et);let $t=class extends((0,Ct.B)(wt.w)){constructor(t){super(t),this.type="draw-polyline",this.direction=(0,St.Gk)(),this.distance=(0,St.Ku)(),this.totalLength=(0,St.fr)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,o._)([(0,u.MZ)()],$t.prototype,"helpMessage",void 0),(0,o._)([(0,u.MZ)()],$t.prototype,"xyMode",void 0),(0,o._)([(0,u.MZ)()],$t.prototype,"allFields",null),$t=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],$t);let At=class extends wt.w{constructor(t){super(t),this.type="draw-rectangle",this.xSize=gt.r7,this.ySize=gt.r7,this.area=gt.iT}get allFields(){return[]}};(0,o._)([(0,u.MZ)()],At.prototype,"type",void 0),(0,o._)([(0,u.MZ)()],At.prototype,"xSize",void 0),(0,o._)([(0,u.MZ)()],At.prototype,"ySize",void 0),(0,o._)([(0,u.MZ)()],At.prototype,"area",void 0),(0,o._)([(0,u.MZ)()],At.prototype,"allFields",null),At=(0,o._)([(0,d.$)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],At);var Pt=n(99675),It=n(70474),Rt=n(9862),Ot=n(46517);function Lt(t){const{directionOptions:e,geometryType:n,sketchOptions:i,tooltipInfos:r}=t,o=e=>{const n=jt(t).mode,i=r[e].elevation;"relative-to-ground"===n||"relative-to-scene"===n||"on-the-ground"===n?i.lock(Wt(t)):i.unlock()};switch(n){case"polygon":case"polyline":o(n),(t=>{if(e){const n=r[t].direction;n.committed=e.angle,n.unlockOnVertexPlacement=!1,i.values.directionMode=e.mode}})(n);break;case"point":case"mesh":o(n)}}function Vt(t){Nt(t)?.allFields.forEach((t=>{t.unlockOnVertexPlacement&&t.unlock()}))}function Nt({geometryType:t,graphic:e,tooltipInfos:n}){return"multipoint"===t||e?.geometry?.type!==Dt[t]?null:n[t]}const Dt={point:"point",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon"};function Zt(t,e,n){const{drawOperation:i,view:r,sketchOptions:o}=n,{cursorVertex:s}=i;if(t.sketchOptions=o,t.viewType=r.type,t.setLocationFromPoint(e,Bt(n)),zt(t.elevation,n),!s)return void(i.constraints=void 0);const a=s;i.constraints={context:Yt(a,n),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:null,direction:null}}function Gt(t,e){const{drawOperation:n,sketchOptions:i,view:r}=e,{cursorVertex:o,lastVertex:s,secondToLastVertex:a}=n,l=i.values.effectiveDirectionMode;t.sketchOptions=i,t.viewType=r.type;const c=s&&o?(0,Rt.Kt)(s,o)??gt.r7:null;if(t.distance.actual=c,t.distance.readOnly=null==s,t.direction.actual=null,t.direction.readOnly=!0,s&&o&&("absolute"===l||a)){const e=(0,Pt.uR)(a,s,o,l);t.direction.actual=e??gt.n0,t.direction.readOnly=!1}t.setLocationFromPoint(o,Bt(e)),zt(t.elevation,e);const u=function(t,{sketchOptions:e}){const n=e.tooltips.xyMode;return"auto"===n?t?"direction-distance":"coordinates":n}(s,e);t.xyMode=u,t.direction.visible="direction-distance"===u,t.distance.visible="direction-distance"===u,t.effectiveX.visible="coordinates"===u,t.effectiveY.visible="coordinates"===u;const d=o??s;n.constraints=d?{context:Yt(d,e),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:t.distance.committed,direction:t.direction.committed}:void 0}function zt(t,e){const{drawOperation:n}=e,i=n?.cursorVertex??n?.lastVertex;t.actual=(0,Ot.Of)(i)??Wt(e),t.visible=n.hasZ,t.readOnly=!1,t.showAsZ=!0}function Ut(t){const e=t.createOperationGeometry?.full;return"polygon"!==e?.type?gt.iT:(0,It.n)(e)??gt.iT}function Ft(t){const e=t.createOperationGeometry?.rectangle?.midpoints;return(null!=e?(0,Rt.Kt)(e.left,e.right):null)??gt.r7}function Ht(t){const e=t.createOperationGeometry?.rectangle?.midpoints;return(null!=e?(0,Rt.Kt)(e.top,e.bottom):null)??gt.r7}function jt(t){return t.drawOperation.elevationInfo??yt.qt}function Bt(t){return t.drawOperation.coordinateHelper.spatialReference}function Wt(t){const e=(0,R.G9)(Bt(t));return(0,gt.d_)(t.defaultZ*e,"meters")}function Yt(t,e){return(0,bt.hj)(t,e.view,Bt(e),jt(e),e.drawOperation.coordinateHelper.hasZ(),e.sketchOptions.values.effectiveDirectionMode)}var qt=n(83202),Kt=n(37102),Xt=n(25638);let Qt=class extends(M.A.EventedMixin(qt.g)){constructor(t){super(t),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new Kt.A}initialize(){const{view:t}=this;this.internalGraphicsLayer=new k.default({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const e=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=function(t,e){return{point:new kt({sketchOptions:e,viewType:t}),polyline:new $t({sketchOptions:e,viewType:t}),polygon:new Et({sketchOptions:e,viewType:t}),mesh:new Tt({sketchOptions:e,viewType:t}),rectangle:new At({sketchOptions:e}),circle:new Mt({sketchOptions:e})}}(t.type,this.sketchOptions);const n=(0,xt.A)((()=>({view:t,options:this.sketchOptions.tooltips})));this.tooltip=n,Lt(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,w.UT)((()=>(0,T.Hh)())),this.addHandles([e.on("vertex-add",(t=>this.onVertexAdd(t))),e.on("vertex-remove",(t=>this.onVertexRemove(t))),e.on("vertex-update",(t=>this.onVertexUpdate(t))),e.on("cursor-update",(t=>this.onCursorUpdate(t))),e.on("cursor-remove",(()=>this._updateGraphic())),e.on("complete",(t=>this.onComplete(t))),this._coordinateFormatterLoadTask,n.on("paste",(t=>(0,xt.HA)(t,this.activeTooltipInfo))),(0,c.watch)((()=>this.cursor),(t=>{e.cursor=t}),c.pc),(0,Xt.fm)((()=>{const{activeTooltipInfo:t,sketchOptions:e}=this;(function(t,e){switch(t?.type){case"draw-point":!function(t,e){const n=e.graphic?.geometry;"point"===n?.type&&(Zt(t,n,e),t.helpMessage=vt("point",n))}(t,e);break;case"draw-polyline":!function(t,e){const{createOperationGeometry:n,drawOperation:i}=e,r=null!=n?n.full:null;r&&"polyline"!==r.type||(Gt(t,e),t.totalLength.actual=i.lastVertex?(r?(0,Rt.ob)(r):null)??gt.r7:null,t.helpMessage=vt("polyline",r))}(t,e);break;case"draw-polygon":!function(t,e){const{createOperationGeometry:n,drawOperation:i}=e,r=null!=n?n.full:null;r&&"polygon"!==r.type||(Gt(t,e),t.area.actual=i.lastVertex?(r?(0,It.n)(r):null)??gt.iT:null,t.helpMessage=vt("polygon",r))}(t,e);break;case"draw-rectangle":!function(t,e){t.sketchOptions=e.sketchOptions,t.xSize=Ft(e),t.ySize=Ht(e),t.area=Ut(e)}(t,e);break;case"draw-circle":!function(t,e){const{forceUniformSize:n,sketchOptions:i}=e;t.sketchOptions=i,t.radius=n?function({createOperationGeometry:t}){return(null!=t?.circle?.center&&null!=t.circle.edge?(0,Rt.Kt)(t.circle.center,t.circle.edge):null)??gt.r7}(e):null,t.xSize=n?null:Ft(e),t.ySize=n?null:Ht(e),t.area=Ut(e)}(t,e);break;case"draw-mesh":!function(t,e){const{graphic:n,view:i}=e,r=n?.geometry;"3d"!==i.type||r&&"mesh"!==r.type||(Zt(t,r?.origin,e),r&&(0,xt.Ue)(t,r),t.helpMessage=function(t,e){const n=t?.geometry;if(!t||"mesh"!==n?.type||!e)return;const{renderCoordsHelper:i,elevationProvider:r}=e,{camera:o}=e.state,{extent:s}=n,{center:a,spatialReference:l}=s,c=(0,R.GA)(l),u=(0,R.G9)(l),d=(0,R.GA)(i.spatialReference),h=s.width*c,p=s.height*u,f=(s.zmax??0)*u,m=f-(s.zmin??0)*u,g=Math.max(h,p,m)/d,{x:y,y:v}=a,_=a.z??0;(0,O.i)(_t,y,v,_),i.toRenderCoords(_t,l,_t);const b=g/o.computeScreenPixelSizeAt(_t);if(b>1*o.width)return"meshTooClose";if(b<20)return"meshTooFar";const x=(0,yt.bh)(t),{absoluteZ:w}=(0,yt.Q5)(y,v,f,l,e,x);return w<(r.getElevation(y,v,_,l,"ground")??0)*u+.1*m?"meshUnderground":"mesh"}(n,i))}(t,e)}})(t,this._tooltipsContext),n.info=e.tooltips.effectiveEnabled?t:null})),(0,Xt.fm)((()=>{e.constraintZ=function(t){const{geometryType:e,tooltipInfos:n}=t;switch(e){case"point":case"mesh":case"polyline":case"polygon":{const i=n[e].elevation.committed;if(!i)return;return(0,gt.l3)(i,"meters")/(0,R.G9)(Bt(t))}default:return}}(this._tooltipsContext)}),c.OH)]),this.finishToolCreation()}destroy(){this.drawOperation=(0,C.pR)(this.drawOperation),this.tooltip=(0,C.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,C.pR)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){return{createOperationGeometry:this._createOperationGeometry,defaultZ:this.defaultZ,directionOptions:this.directionOptions,drawOperation:this.drawOperation,forceUniformSize:this.forceUniformSize,geometryType:this.geometryType,graphic:this.graphic,sketchOptions:this.sketchOptions,tooltipInfos:this.tooltipInfos,view:this.view}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}set mode(t){const e=this.drawOperation;e&&(e.drawingMode=t),this._set("mode",t)}get updating(){return this.drawOperation?.updating??!1}get undoRedo(){const{view:{type:t,map:e}}=this;return"2d"===t&&e&&"undoRedo"in e&&e.undoRedo instanceof x?e.undoRedo:null}set undoRedo(t){this._override("undoRedo",t)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.destroyed||(0,xt.wG)(t,this.tooltip)||this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&Lt(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(te.outline),this.removeHandles(te.regularVertices),this.removeHandles(te.activeVertex),this.removeHandles(te.activeEdge),this.removeHandles(Jt)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(t),this._graphic;const e=new s.default({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=e,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(e),this.addHandles(this.initializeGraphic(e)),this.notifyChange("graphic"),this.addHandles((0,S.hA)((()=>{this.internalGraphicsLayer.remove(e),this._graphic===e&&(this._graphic=null)})),Jt),e}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation)return;const{coordinateHelper:e,view:n,visualizationCursorVertex:i,lastVertex:r,committedVertices:o,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=i))return;const l=t.operationComplete?o:s,c=l.length,u=null!=i?e.pointToArray(i):null,d=this._drawSpatialReference,h="3d"===n.type&&"global"===n.viewingMode,p=new $;p.committedVertices=o,p.cursorVertex=u;const{geometryType:f}=this;switch(f){case"point":case"mesh":p.full=e.arrayToPoint(l[0]);break;case"multipoint":p.full=c>0?function(t,e){return new rt.A({points:t,spatialReference:e})}(l,d):null;break;case"polyline":case"polygon":c>0&&(p.full="polygon"===f?lt([l],d,h,!0):at([l],d,h),p.cursorEdge=null!=u&&r&&!(0,E.CI)(i,r)?at([[u,e.pointToArray(r)]],d,h):null,p.outline=c>1?p.full:null);break;case"circle":case"rectangle":{if(p.committedVertices=p.cursorVertex=null,!c)break;const e=function(t,e){if("2d"===t.type)return new nt(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if("3d"===t.type){const n=e.length>2?new N.default({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new N.default({x:e[0],y:e[1],spatialReference:t.spatialReference});return new it(t,n)}return null}(n,l[0]),i=l[0],r=e.makeMapPoint(i[0]+ne*n.resolution,i[1]);"circle"===f?1===c&&t.operationComplete?p.circle=mt([i,r],e,!0):2===c&&(this.forceUniformSize?p.circle=mt(l,e,this.centered):p.rectangle=function(t,e,n){const i=e.mapToLocalMultiple(t),r=i[0],o=i[1],s=Math.round(o.x-r.x),a=Math.round(o.y-r.y),l=tt(n?r.x:r.x+s/2,n?r.y:r.y+a/2),c=n?s:s/2,u=n?a:a/2,d=[],h=2*Math.PI/60;function p(t){const e=Math.cos(t),n=Math.sin(t);return tt(c*e+l.x,u*n+l.y)}for(let t=0;t<60;t++)d.push(p(t*h));d.push(d[0]);const{spatialReference:f,doUnnormalization:m}=e,g=lt([d.map((t=>e.localToMap(t))).filter(P.Ru)],f,m,!1),y=e.localToMap(p(Math.PI/2)),v=e.localToMap(p(0)),_=e.localToMap(p(-Math.PI/2)),b=e.localToMap(p(Math.PI));return{geometry:g,midpoints:null!=y&&null!=v&&null!=_&&null!=b?{top:st(y,f),right:st(v,f),bottom:st(_,f),left:st(b,f)}:null}}(l,e,this.centered)):1===c&&t.operationComplete?p.rectangle=ct([i,r],e,!0):2===c&&(p.rectangle=this.forceUniformSize?ct(l,e,this.centered):function(t,e,n){let i=e.mapToLocalMultiple(t);if(1===i.length){const t=48,e=i[0];i=[tt(e.x-t,e.y+t),tt(e.x+t,e.y-t),tt(e.x+t,e.y-t),tt(e.x-t,e.y+t)]}const r=[],o={x:i[0].x,y:i[0].y},s={x:i[1].x,y:i[1].y};if(n){const t=Math.round(s.x-o.x),e=Math.round(s.y-o.y);r.push(tt(o.x-t,o.y-e),tt(s.x,o.y-e),tt(s.x,s.y),tt(o.x-t,s.y))}else r.push(tt(o.x,o.y),tt(s.x,o.y),tt(s.x,s.y),tt(o.x,s.y));return ut(lt([r.map((t=>e.localToMap(t))).filter(P.Ru)],e.spatialReference,e.doUnnormalization,!0),r,e)}(l,e,this.centered)),p.full=null!=p.circle?p.circle.geometry:p.rectangle?.geometry,p.outline="polygon"===p.full?.type?p.full:null;break}default:return null}return p}initializeGraphic(t){return(0,S.hA)()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return(0,S.hA)()}onCursorEdgeChanged(t){return(0,S.hA)()}onVertexAdd(t){Vt(this._tooltipsContext),this._updateGraphic(),function(t,e){const{drawOperation:n,view:i}=e,r=Nt(e),o=jt(e);if("2d"===i.type||!t||"absolute-height"!==o.mode||1!==n?.numCommittedVertices||!r||"draw-polyline"!==r.type&&"draw-polygon"!==r.type||r.elevation.locked)return;const[s,a,l]=t,c=function(t,e,n,i,r){const{view:o,drawOperation:s}=r;if("3d"!==o.type||!s)return;n??=0;const a=Bt(r),l=jt(r),c=(0,yt.Fo)(o,t,e,n,a,l,i);return(0,Ot.Qc)(c,a)??Wt(r)}(s,a,l,o,e);null!=c&&r.elevation.lock(c)}(t.vertices.at(0)?.coordinates,this._tooltipsContext),this.emit("vertex-add",t)}onVertexRemove(t){Vt(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.cursorEdge?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),te.activeEdge):this.removeHandles(te.activeEdge),null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),te.outline):this.removeHandles(te.outline),null!=t.committedVertices?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),te.regularVertices):this.removeHandles(te.regularVertices),null!=t.cursorVertex?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),te.activeVertex):this.removeHandles(te.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(Jt)):this._destroyAllVisualizations()}get activeTooltipInfo(){return this._coordinateFormatterLoadTask?.finished?Nt(this._tooltipsContext):null}};(0,o._)([(0,u.MZ)()],Qt.prototype,"_coordinateFormatterLoadTask",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"_createOperationGeometry",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"_tooltipsContext",null),(0,o._)([(0,u.MZ)({value:!0})],Qt.prototype,"centered",null),(0,o._)([(0,u.MZ)()],Qt.prototype,"cursor",null),(0,o._)([(0,u.MZ)({nonNullable:!0})],Qt.prototype,"defaultZ",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],Qt.prototype,"directionOptions",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"drawOperation",void 0),(0,o._)([(0,u.MZ)({value:!0})],Qt.prototype,"enabled",null),(0,o._)([(0,u.MZ)({value:!0})],Qt.prototype,"forceUniformSize",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],Qt.prototype,"geometryType",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"graphic",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],Qt.prototype,"graphicProperties",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"graphicSymbol",null),(0,o._)([(0,u.MZ)({constructOnly:!0})],Qt.prototype,"hasZ",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],Qt.prototype,"geometryToPlace",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"mode",null),(0,o._)([(0,u.MZ)()],Qt.prototype,"snappingManager",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"snapToScene",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"tooltip",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"tooltipInfos",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0,type:Kt.A})],Qt.prototype,"sketchOptions",void 0),(0,o._)([(0,u.MZ)()],Qt.prototype,"updating",null),(0,o._)([(0,u.MZ)({constructOnly:!0,nonNullable:!0})],Qt.prototype,"view",void 0),(0,o._)([(0,u.MZ)({constructOnly:!0})],Qt.prototype,"undoRedo",null),(0,o._)([(0,u.MZ)()],Qt.prototype,"activeTooltipInfo",null),Qt=(0,o._)([(0,d.$)("esri.views.draw.DrawGraphicTool")],Qt);const Jt=Symbol("create-operation-graphic"),te={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function ee(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const ne=48},85499:function(t,e,n){"use strict";n.d(e,{O0:function(){return V}});var i=n(53804),r=n(83525),o=n(48996),s=n(21609),a=n(95929),l=n(7213),c=n(60539),u=n(85876),d=n(28181),h=n(13520),p=n(23502),f=(n(58941),n(40633),n(65953)),m=n(72952),g=n(20248),y=n(42413),v=n(68945),_=n(65420);const b="click";class x{constructor({consumesClicks:t,grabbableForEvent:e}){this.events=new o.A,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=t,this.grabbableForEvent=e}destroy(){}intersectionDistance(t,e){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}}var w=n(50517),M=n(2831),S=n(2623),C=n(7819),T=n(92100),k=n(7768),E=n(50822),$=n(58144),A=n(45908),P=(n(13798),n(48961));let I=class extends r.A{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,c.sg)((async(t,e,n,i)=>{const r=this._frameTask;if(null==r)return;const o=await r.schedule((()=>e.snap({...t,context:n,signal:i})),i);o.valid&&await r.schedule((()=>{this.stagedPoint=o.apply(),t!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=e.update({...this._snapPoints,context:n}))}),i)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=t?t.registerTask(P.W6.SNAPPING):P.nu}destroy(){this._abortController=(0,a.DC)(this._abortController),this._frameTask=(0,a.xt)(this._frameTask)}update(t,e,n){this._snapPoints=t;const{point:i,scenePoint:r}=t,o=e.update({point:i,scenePoint:r,context:n});return this.stagedPoint=o,o}async snap(t,e,n){const{point:i,scenePoint:r}=t;return this.stagedPoint=e.update({point:i,scenePoint:r,context:n}),this._snapPoints=t,null==this._abortController&&(this._abortController=new AbortController),this._snap(t,e,n,this._abortController.signal)}async snapAgainNearPreviousMapPoint(t,e){null!=this._snapPoints&&await this.snap(this._snapPoints,t,e)}abort(){this._abortController=(0,a.DC)(this._abortController),this._snapPoints=null}};(0,i._)([(0,p.MZ)({constructOnly:!0})],I.prototype,"view",void 0),(0,i._)([(0,p.MZ)()],I.prototype,"stagedPoint",null),(0,i._)([(0,p.MZ)()],I.prototype,"constrainResult",void 0),(0,i._)([(0,p.MZ)()],I.prototype,"_stagedPoint",void 0),I=(0,i._)([(0,f.$)("esri.views.interactive.snapping.SnappingOperation")],I);var R=n(44425);const O=Symbol(),L=Symbol();let V=class extends(o.A.EventedMixin(r.A)){constructor(t){super(t),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new u.A,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new g.U,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=(0,l.B)(k.cx),this._getPolylineOrPolygonConstraint=(0,l.B)(k.lJ),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new E.A,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,null==t.elevationInfo&&(this.elevationInfo=(0,v.bK)(!!t.hasZ))}initialize(){const{geometryType:t,view:e}=this,n=e.spatialReference,i="viewingMode"in e.state?e.state.viewingMode:_.RT.Local,r="segment"===t||"multipoint"===t?"polyline":t;this.coordinateHelper=(0,w.BV)(this.hasZ,this.hasM,n),this._editGeometryOperations=new C.p(new S.ZE(r,this.coordinateHelper),i),this._snappingOperation=new I({view:e}),this.addHandles([(0,d.watch)((()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint})),(({stagedPoint:t,constraint:e},n)=>{const{snappingOptions:i}=this;if(i&&(i.forceDisabled=null!=e&&(0,T.fT)(e)),null!=n&&t===n.stagedPoint&&e!==n.constraint)return this._onKeyboardBasedChange();this._processCursor(t??this._screenToMap(this._stagedScreenPoint))}),{equals:(t,e)=>t.stagedPoint===e.stagedPoint&&(0,a.CM)(t.constraint,e.constraint)}),(0,d.watch)((()=>this.view.viewpoint),((t,e)=>{t&&e&&(0,m.Ui)(t,e)&&this._onKeyboardBasedChange()}))]),this._activeComponent=new S.uA(n,i),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;null!=o&&(o.context={view:e,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.addHandles((0,d.watch)((()=>this.labelOptions.enabled),(t=>{o.visible=t}),d.pc))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(t=>{const e=t.vertices.map((t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)}))),n=e.map((t=>t.coordinates)),i=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos)??null;(0,y.CI)(i,this.firstVertex)||(this.firstVertex=i);const r=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos)??null;(0,y.CI)(r,this.lastVertex)||(this.lastVertex=r);const o=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos)??null;switch((0,y.CI)(o,this.secondToLastVertex)||(this.secondToLastVertex=o),this._processCursor(this.cursorVertex),t.type){case"vertex-add":this.emit(t.type,{...t,added:n,vertices:e});break;case"vertex-update":this.emit(t.type,{...t,updated:n,vertices:e});break;case"vertex-remove":this.emit(t.type,{...t,removed:n,vertices:e})}})));const s=this._manipulator=new x({consumesClicks:!1,grabbableForEvent:t=>"click"!==this.drawingMode||"touch"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(s),s.grabbable="point"!==t,this.addHandles([s.events.on("immediate-click",(t=>this._onImmediateClick(t))),s.events.on("immediate-double-click",(t=>this._onImmediateDoubleClick(t))),(0,d.watch)((()=>this.drawingMode),(()=>{this.removeHandles(O),this.addHandles(this._createManipulatorDragPipeline(s),O)}),d.pc),(0,d.watch)((()=>({effectiveCursor:this.effectiveCursor})),(({effectiveCursor:t})=>{s.cursor=t}),d.pc)]),(0,R.BY)(this,(()=>{const t=this.view.inputManager.latestPointerType??"mouse",e=this._getSnappingContext(t);if(null!=this.snappingManager){const t=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,e);this._updatingHandles.addPromise((0,c.QZ)(t))}}))}destroy(){(0,a.pR)(this.segmentLabels),(0,a.pR)(this._snappingOperation),this._editGeometryOperations=(0,a.pR)(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:t,_manipulator:e}=this;return null!=t&&this._pointerDownStates.has(t)||e.grabbing||!e.interactive}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const t=this._updateAndGetEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==t}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((t=>this.coordinateHelper.vectorToArray(t.pos)))}get _constraint(){const{constraints:t,constraintsEnabled:e}=this;if(t&&e)switch(this.geometryType){case"point":return this._getPointConstraint(t);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,t)}}set drawingMode(t){this._set("drawingMode",t??b)}get effectiveCursor(){return this.loading?"progress":this._hideDefaultCursor?null:this.cursor||"crosshair"}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return"mouse"===this._stagedPointerType?this.cursorVertex:null}get committableVertex(){const{cursorVertex:t,lastVertex:e,firstVertex:n,geometryType:i}=this;return"polygon"===i&&(0,y.fk)(t,n)||(0,y.fk)(t,e)?null:t}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:t,committableVertex:e,coordinateHelper:n}=this,i=t.slice();return null!=e&&i.push(n.pointToArray(e)),i}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:t}=this;null!=t&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}complete(t){const e=t?.aborted||!1;this._snappingOperation.abort(),this.snappingManager?.doneSnapping();const{geometryType:n,numCommittedVertices:i}=this,r="multipoint"===n&&0===i||"polyline"===n&&i<2||"polygon"===n&&i<3;"segment"!==n&&"point"!==n||this.commitStagedVertex(),this._createOperationCompleted=!r,(this.isCompleted||e)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map(((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t}))),aborted:e,type:"complete"}))}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(t){const e=(0,s.o8)(this.cursorVertex),n=(0,s.o8)(t),i=n&&(this._updateAndGetEffectiveDrawSurface()?.constrainZ(n)??n),r=this._snapToClosingVertex(i),o=this._applyConstraints(r);(0,y.fk)(e,o)||(this._set("cursorVertex",o),this.segmentLabels?.set("stagedVertex",null!=o?this.coordinateHelper.pointToVector(o):null),null==o||"mouse"!==this._stagedPointerType?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(o)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(t){if(null==t||this._isDragging||"polygon"!==this.geometryType||this.numCommittedVertices<=2)return t;const e=this._mapToScreen(t);if(!e)return t;const n=this._activeComponent;return this._vertexWithinPointerDistance(n.vertices[0].pos,e)?this.firstVertex:this._vertexWithinPointerDistance(n.vertices.at(-1).pos,e)?this.lastVertex:t}_createManipulatorDragPipeline(t){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return(0,M.Xt)(t,((t,e,n,i)=>{const r="touch"===i&&this._snappingEnabled;if(this.isCompleted||!r)return;const{snappingStep:o,cancelSnapping:s}=(0,A.L)({predicate:()=>r,snappingManager:this.snappingManager,snappingContext:new $.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:i,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});n=n.next((t=>(r&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),t))).next(s),e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this._processCursor(t.mapStart),("segment"===this.geometryType||r&&!this.numCommittedVertices)&&this.commitStagedVertex()),t))).next((0,M.pg)(this.view,this.elevationInfo)).next(...o).next((t=>(r&&(this._processCursor(t.mapEnd),"end"===t.action&&this.commitStagedVertex()),t))).next((t=>("end"===t.action&&("mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),t)))}))}_createManipulatorDragPipelineFreehand(t){return(0,M.Xt)(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this._snappingOperation.abort(),null==this.committableVertex&&this._processCursor(t.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),t))).next((t=>{switch(t.action){case"start":case"update":this._processCursor(t.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return t}))}))}_createManipulatorDragPipelineHybrid(t){return(0,M.Xt)(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),L),this._processCursor(t.mapStart),this.commitStagedVertex()),t))).next((t=>{switch(t.action){case"start":case"update":this._processCursor(t.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),this.removeHandles(L),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return t}))}))}get _drawAtFixedElevation(){const{constraintsEnabled:t,constraintZ:e,geometryType:n,numCommittedVertices:i}=this;return t?null!=e||"segment"===n&&i>0:("segment"===n||"polygon"===n)&&i>0}_updateAndGetEffectiveDrawSurface(){const{constraintsEnabled:t,coordinateHelper:e,drawSurface:n,elevationDrawSurface:i,snapToSceneEnabled:r}=this;if(null==i)return n;if(!this.hasZ)return i.defaultZ=null,i;const o=this.elevationInfo?.mode;let s=this.defaultZ,a=t||"absolute-height"===o;return null!=r&&(a=r),"on-the-ground"===o&&(a=!1),this._drawAtFixedElevation&&(s=(t?this.constraintZ:null)??e.getZ(this._activeComponent.vertices[0].pos),a=!1),a?n:(i.defaultZ=s,i)}_mapToScreen(t){return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(t)}_onHold(t){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&this._processCursor(t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if(!("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging))try{const{drawingMode:e,geometryType:n}=this;this._stagedPointerType=t.pointerType,this._stagedScreenPoint=t.screenPoint;const i=this._screenToMap(t.screenPoint);if(null==i)return;if(null==i||"freehand"===e&&"point"!==n)return;if(this._snappingEnabled&&null!=this.cursorVertex||this._processCursor(i),null==this.committableVertex)return void this.complete();this.commitStagedVertex(),"mouse"!==t.pointerType&&this._processCursor(null),("freehand"===e||"point"===n||"segment"===n&&2===this.numCommittedVertices||"segment"===n&&"hybrid"===e&&1===this.numCommittedVertices)&&this.complete()}finally{t.stopPropagation()}}_onImmediateDoubleClick(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){const e=(0,h.tc)(t.x,t.y);this._stagedScreenPoint=e,this._stagedPointerType=t.pointerType,this._stagedPointerId=t.pointerId,this._isDragging?this._snappingOperation.abort():(t.stopPropagation(),this._processCursorMovementRelativeToSurface(e,t.pointerType))}_onKeyboardBasedChange(){"mouse"===this._stagedPointerType&&this._stagedScreenPoint&&null!=this._stagedPointerId&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(t,e){const n=this._snappingOperation,i=this._screenToMap(t),r=this._requiresScenePoint?this.drawSurface?.screenToMap(t):null;if(null==i)return this._hideDefaultCursor=!0,this._processCursor(null),void n.abort();this._hideDefaultCursor=!1;const o=this.snappingManager;if(null==o)return this._processCursor(i),void n.abort();const s=this._getSnappingContext(e);this._updatingHandles.addPromise((0,c.QZ)(n.snap({point:i,scenePoint:r},o,s)))}_applyConstraints(t){const{_constraint:e,constraints:n}=this;if(!t||!n||!e)return t;const{context:i}=n,r=(0,k.dz)(t,i),o=r?e.closestTo(r):void 0;if(!o)return t;const s=(0,k.tC)(o,t,i),a="2d"===this.view.type||"absolute-height"!==i.elevationInfo.mode;return null!=s&&a&&null!=this.constraintZ&&this.hasZ&&(s.z=this.constraintZ),s}_screenToMap(t){return t?this._updateAndGetEffectiveDrawSurface()?.screenToMap(t):null}_screenToMapDragEventStep(){let t=null;return e=>{if("start"===e.action&&(t=this._screenToMap(e.screenStart)),null==t)return null;const n=this._screenToMap(e.screenEnd);return null!=n?{...e,mapStart:t,mapEnd:n}:null}}_vertexWithinPointerDistance(t,e){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return null!=n&&function(t,e){const n=t.x-e.x,i=t.y-e.y;return n*n+i*i<=25}(n,e)}_getSnappingContext(t){const e=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new $.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:null!=e?{value:e,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};(0,i._)([(0,p.MZ)()],V.prototype,"_hideDefaultCursor",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_stagedPointerId",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_isDragging",null),(0,i._)([(0,p.MZ)()],V.prototype,"_snappingOperation",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_snappingEnabled",null),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"graphic",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"constraintsEnabled",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"constraints",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"_constraint",null),(0,i._)([(0,p.MZ)()],V.prototype,"constraintZ",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"defaultZ",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"isDraped",void 0),(0,i._)([(0,p.MZ)({value:b})],V.prototype,"drawingMode",null),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"elevationDrawSurface",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"elevationInfo",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0,type:E.A})],V.prototype,"labelOptions",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"geometryType",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"hasM",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"hasZ",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"cursor",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"effectiveCursor",null),(0,i._)([(0,p.MZ)()],V.prototype,"loading",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"manipulators",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"drawSurface",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"segmentLabels",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"snappingManager",void 0),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"snappingVisualizer",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"snapToSceneEnabled",void 0),(0,i._)([(0,p.MZ)({readOnly:!0})],V.prototype,"cursorVertex",null),(0,i._)([(0,p.MZ)({readOnly:!0})],V.prototype,"visualizationCursorVertex",null),(0,i._)([(0,p.MZ)()],V.prototype,"committableVertex",null),(0,i._)([(0,p.MZ)()],V.prototype,"firstVertex",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"lastVertex",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"secondToLastVertex",void 0),(0,i._)([(0,p.MZ)()],V.prototype,"updating",null),(0,i._)([(0,p.MZ)({constructOnly:!0})],V.prototype,"view",void 0),V=(0,i._)([(0,f.$)("esri.views.draw.DrawOperation")],V)},99113:function(t,e,n){"use strict";n.d(e,{IX:function(){return u},rT:function(){return c},uF:function(){return d}}),n(50917);var i=n(13520),r=n(46460),o=n(45328),s=n(68945),a=n(57165),l=n(45532);class c{constructor(t,e,n,i=null){this._elevationInfo=t,this.defaultZ=e,this._view=n,this._excludeGraphics=i}screenToMap(t){const{defaultZ:e,_view:n}=this,r=n.sceneIntersectionHelper.intersectElevationFromScreen((0,i.gs)(t.x,t.y),this._elevationInfo,e??0,this._excludeGraphics);return null==e&&null!=r&&(r.z=void 0),r}mapToScreen(t){const e=(0,r.T)(t.x,t.y,(0,s.wS)(this._view,t,this._elevationInfo),t.spatialReference);return this._view.toScreen(e)}constrainZ(t){const{defaultZ:e}=this;return null!=e&&t.z!==e&&((t=(0,o.EL)(t)).z=e),t}}class u{constructor(t,e,n=[]){this.view=t,this.elevationInfo=e,this.exclude=n}screenToMap(t){const e=this.view.toMap(t,{exclude:this.exclude,excludeLabels:!0});return null!=e&&(e.z=(0,s.id)(e,this.view,this.elevationInfo)),e}mapToScreen(t){let e=t;return null!=this.elevationInfo&&(e=(0,r.T)(t.x,t.y,(0,s.wS)(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(e)}constrainZ(t){return t}}class d{constructor(t,e=!1,n=0){this.view=t,this.hasZ=e,this.defaultZ=n,this.mapToScreen=e=>t.toScreen(e),this.screenToMap=e?e=>{const i=t.toMap(e);return i.z=n,i}:e=>t.toMap(e)}constrainZ(t){const{defaultZ:e}=this;return this.hasZ&&t.z!==e&&((t=(0,o.EL)(t)).z=e),t}}class h{screenToMap(t){const{x:e,y:n}=t;return new l.default({x:e,y:n,spatialReference:h.spatialReference})}mapToScreen(t){return(0,i.tc)(t.x,t.y)}constrainZ(t){return t}}h.spatialReference=new a.A},67060:function(t,e,n){"use strict";n.d(e,{UT:function(){return d},hs:function(){return c},lR:function(){return l},wW:function(){return u}});var i=n(15774),r=n(87416),o=n(35068),s=n(38441);function a(t,e,n,i){if(null==i||t.hasZ||(i=void 0),"point"===t.type)return t.x+=e,t.y+=n,t.hasZ&&null!=i&&(t.z+=i),t;if("multipoint"===t.type){const r=t.points;for(let t=0;t<r.length;t++)r[t]=h(r[t],e,n,i);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=n,t.ymax+=n,null!=i&&(t.zmin??=0,t.zmin+=i,t.zmax??=0,t.zmax+=i),t;const r=(0,s.$K)(t),o="polyline"===t.type?t.paths:t.rings;for(let t=0;t<r.length;t++){const o=r[t];for(let t=0;t<o.length;t++)o[t]=h(o[t],e,n,i)}return"paths"in t?t.paths=o:t.rings=o,t}function l(t,e,n,i,r){const o=t.clone(),l=i.resolution;if("point"===o.type){if(r)a(o,e*l,-n*l);else{const t=i.state.transform,r=i.state.inverseTransform,s=t[0]*o.x+t[2]*o.y+t[4],a=t[1]*o.x+t[3]*o.y+t[5];o.x=r[0]*(s+e)+r[2]*(a+n)+r[4],o.y=r[1]*(s+e)+r[3]*(a+n)+r[5]}return o}if("multipoint"===o.type){if(r)a(o,e*l,-n*l);else{const t=o.points,r=i.state.transform,s=i.state.inverseTransform;for(let i=0;i<t.length;i++){const o=t[i],a=r[0]*o[0]+r[2]*o[1]+r[4],l=r[1]*o[0]+r[3]*o[1]+r[5],c=s[0]*(a+e)+s[2]*(l+n)+s[4],u=s[1]*(a+e)+s[3]*(l+n)+s[5];t[i]=p(o,c,u,void 0)}}return o}if("extent"===o.type){if(r)a(o,e*l,-n*l);else{const t=i.state.transform,r=i.state.inverseTransform,s=t[0]*o.xmin+t[2]*o.ymin+t[4],a=t[1]*o.xmin+t[3]*o.ymin+t[5],l=t[0]*o.xmax+t[2]*o.ymax+t[4],c=t[1]*o.xmax+t[3]*o.ymax+t[5];o.xmin=r[0]*(s+e)+r[2]*(a+n)+r[4],o.ymin=r[1]*(s+e)+r[3]*(a+n)+r[5],o.xmax=r[0]*(l+e)+r[2]*(c+n)+r[4],o.ymax=r[1]*(l+e)+r[3]*(c+n)+r[5]}return o}if(r)a(o,e*l,-n*l);else{const t=(0,s.$K)(o),r="polyline"===o.type?o.paths:o.rings,a=i.state.transform,l=i.state.inverseTransform;for(let i=0;i<t.length;i++){const r=t[i];for(let t=0;t<r.length;t++){const i=r[t],o=a[0]*i[0]+a[2]*i[1]+a[4],s=a[1]*i[0]+a[3]*i[1]+a[5],c=l[0]*(o+e)+l[2]*(s+n)+l[4],u=l[1]*(o+e)+l[3]*(s+n)+l[5];r[t]=p(i,c,u,void 0)}}"paths"in o?o.paths=r:o.rings=r}return o}function c(t,e,n,i){if("point"===t.type){const{x:r,y:o}=t,s=i?i[0]:r,a=i?i[1]:o,l=t.clone(),c=(r-s)*e+s,u=(o-a)*n+a;return l.x=c,l.y=u,l}if("multipoint"===t.type){const a=(0,s.$K)(t),l=(0,r.vt)(),[c,u,d,h]=(0,o.Yz)(l,[a]),f=i?i[0]:(c+d)/2,m=i?i[1]:(h+u)/2,g=t.clone(),y=g.points;for(let t=0;t<y.length;t++){const i=y[t],[r,o]=i,s=(r-f)*e+f,a=(o-m)*n+m;y[t]=p(i,s,a,void 0)}return g}if("extent"===t.type){const{xmin:r,xmax:o,ymin:s,ymax:a}=t,l=i?i[0]:(r+o)/2,c=i?i[1]:(a+s)/2,u=t.clone();if(u.xmin=(r-l)*e+l,u.ymax=(a-c)*n+c,u.xmax=(o-l)*e+l,u.ymin=(s-c)*n+c,u.xmin>u.xmax){const t=u.xmin,e=u.xmax;u.xmin=e,u.xmax=t}if(u.ymin>u.ymax){const t=u.ymin,e=u.ymax;u.ymin=e,u.ymax=t}return u}const a=(0,s.$K)(t),l=(0,r.vt)(),[c,u,d,h]=(0,o.Yz)(l,a),f=i?i[0]:(c+d)/2,m=i?i[1]:(h+u)/2,g=t.clone(),y="polyline"===g.type?g.paths:g.rings;for(let t=0;t<a.length;t++){const i=a[t];for(let r=0;r<i.length;r++){const o=i[r],[s,a]=o,l=(s-f)*e+f,c=(a-m)*n+m;y[t][r]=p(o,l,c,void 0)}}return"paths"in g?g.paths=y:g.rings=y,g}function u(t,e,n,i,r,o){const s=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e));return Math.sqrt((r-t)*(r-t)+(o-e)*(o-e))/s}function d(t,e,n,r=!1){const o=Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(t.y-n.y,t.x-n.x),s=Math.atan2(Math.sin(o),Math.cos(o));return r?s:(0,i.KJ)(s)}function h(t,e,n,i){return p(t,t[0]+e,t[1]+n,null!=t[2]&&null!=i?t[2]+i:void 0)}function p(t,e,n,i){const r=[e,n];return t.length>2&&r.push(null!=i?i:t[2]),t.length>3&&r.push(t[3]),r}},82067:function(t,e,n){"use strict";n.d(e,{l:function(){return b}});var i=n(53804),r=n(83525),o=n(48996),s=n(28181),a=n(13520),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953)),u=n(13786),d=n(20551),h=n(32501),p=n(46157),f=n(56763),m=n(68945),g=n(74661),y=n(6422),v=n(17921),_=n(33383);let b=class extends r.A{set graphic(t){this._circleCollisionCache=null,this._originalSymbol=t.symbol,this._set("graphic",t),this.attachSymbolChanged()}get elevationInfo(){const{layer:t}=this.graphic,e=t&&"elevationInfo"in t?t.elevationInfo:null,n=(0,m.ky)(this.graphic),i=e?e.offset:0;return new y.A({mode:n,offset:i})}set focusedSymbol(t){t!==this._get("focusedSymbol")&&(this._set("focusedSymbol",t),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(t){t!==this._get("grabbing")&&(this._set("grabbing",t),this._updateGraphicSymbol())}set hovering(t){t!==this._get("hovering")&&(this._set("hovering",t),this._updateGraphicSymbol())}set selected(t){t!==this._get("selected")&&(this._set("selected",t),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:t?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}constructor(t){super(t),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.consumesClicks=!0,this.events=new o.A.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(t){const e=this.graphic;if(!1===e.visible)return null;const n=e.geometry;if(null==n)return null;const i=this._get("focusedSymbol"),r=null!=i?i:e.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,t,n,r):this._intersectDistance3D(this.view,t,e)}attach(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,s.watch)((()=>this.graphic?.symbol),(t=>{null!=t&&t!==this.focusedSymbol&&t!==this._originalSymbol&&(this._originalSymbol=t,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))}),s.OH)}detachSymbolChanged(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(t,e,n,i){if(null==(i=i||(0,g.SF)(n)))return null;let r=this._circleCollisionCache;if("point"===n.type&&"cim"===i.type&&"CIMPointSymbol"===i.data.symbol?.type&&i.data.symbol.symbolLayers){const{offsetX:r,offsetY:o,size:s}=(0,v.T)(i),l=(0,a.WA)(e,w),c=s/2,d=t.toScreen(n),h=d.x+r,p=d.y+o;return(0,u.hG)(l,[h,p])<c*c?1:null}if("point"!==n.type||"simple-marker"!==i.type)return(0,_.t)(e,n,t)?1:null;if(null==r||!r.originalPoint.equals(n)){const e=n,o=t.spatialReference;if((0,p.canProjectWithoutEngine)(e.spatialReference,o)){const t=(0,p.project)(e,o);r={originalPoint:e.clone(),mapPoint:t,radiusPx:(0,a.Lz)(i.size)},this._circleCollisionCache=r}}if(null!=r){const n=(0,a.WA)(e,w),o=t.toScreen?.(r.mapPoint);if(!o)return null;const s=r.radiusPx,l=o.x+(0,a.Lz)(i.xoffset),c=o.y-(0,a.Lz)(i.yoffset);return(0,u.hG)(n,[l,c])<s*s?1:null}return null}_intersectDistance3D(t,e,n){const i=t.toMap(e,{include:[n]});return i&&(0,f.g)(i,x,t.renderSpatialReference)?(0,d.j)(x,t.state.camera.eye):null}};(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],b.prototype,"graphic",null),(0,i._)([(0,l.MZ)()],b.prototype,"elevationInfo",null),(0,i._)([(0,l.MZ)({constructOnly:!0,nonNullable:!0})],b.prototype,"view",void 0),(0,i._)([(0,l.MZ)({value:null})],b.prototype,"focusedSymbol",null),(0,i._)([(0,l.MZ)({constructOnly:!0})],b.prototype,"layer",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"interactive",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"selectable",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"grabbable",void 0),(0,i._)([(0,l.MZ)({value:!1})],b.prototype,"grabbing",null),(0,i._)([(0,l.MZ)()],b.prototype,"dragging",void 0),(0,i._)([(0,l.MZ)()],b.prototype,"hovering",null),(0,i._)([(0,l.MZ)({value:!1})],b.prototype,"selected",null),(0,i._)([(0,l.MZ)()],b.prototype,"cursor",void 0),b=(0,i._)([(0,c.$)("esri.views.interactive.GraphicManipulator")],b);const x=(0,h.vt)(),w=(0,a.gs)()},83202:function(t,e,n){"use strict";n.d(e,{g:function(){return p}});var i,r,o=n(53804),s=n(83525),a=(n(58941),n(40633),n(60539)),l=n(23502),c=(n(13798),n(65953)),u=n(53551),d=n(78879);(r=i||(i={}))[r.WhenToolEditable=0]="WhenToolEditable",r[r.WhenToolNotEditable=1]="WhenToolNotEditable",r[r.Always=2]="Always";class h{constructor(){this._isToolEditable=!0,this._manipulators=new d.A,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,e=i.WhenToolEditable){this.addMany([t],e)}addMany(t,e=i.WhenToolEditable){for(const n of t){const t={manipulator:n,visibilityPredicate:e,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t)}}remove(t){for(let e=0;e<this._manipulators.length;e++)if(this._manipulators.at(e).manipulator===t){const t=this._manipulators.splice(e,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:t})=>t.destroy())),this._manipulators.destroy(),this._resourceContexts=null}on(t,e){return this._manipulators.on(t,(t=>{e(t)}))}forEach(t){for(const e of this._manipulators.items)t(e)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((e=>t.push(e.manipulator))),t}intersect(t,e){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:r,attached:o})=>{if(!o||!r.interactive)return;const s=r.intersectionDistance(t,e);null!=s&&s<i&&(i=s,n=r)})),n}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===i.Always||(this._isToolEditable?t.visibilityPredicate===i.WhenToolEditable:t.visibilityPredicate===i.WhenToolNotEditable)}}let p=class extends s.A{constructor(t){super(t),this.manipulators=new h,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[u.PK.MANAGER,!0],[u.PK.USER,!0]]),this._creationFinishedResolver=(0,a.Tw)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(u.PK.USER)}set editable(t){this.setEditableFlag(u.PK.USER,t)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===u.PK.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(t){return this._editableFlags.get(t)??!1}endDrag(){const t=this.view.inputManager.latestPointerLocation;if(!t)return;let e=!1;this.manipulators.forEach((({manipulator:n})=>{n.dragging&&(e=!0,n.events.emit("drag",{action:"end",start:t,screenPoint:t}))})),e&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(u.PK.USER)&&this.getEditableFlag(u.PK.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,o._)([(0,l.MZ)({constructOnly:!0})],p.prototype,"view",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"active",null),(0,o._)([(0,l.MZ)({value:!0})],p.prototype,"visible",null),(0,o._)([(0,l.MZ)({value:!0})],p.prototype,"editable",null),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"manipulators",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"updating",null),(0,o._)([(0,l.MZ)()],p.prototype,"cursor",null),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"automaticManipulatorSelection",void 0),(0,o._)([(0,l.MZ)()],p.prototype,"hasFocusedManipulators",null),(0,o._)([(0,l.MZ)()],p.prototype,"hasGrabbedManipulators",void 0),(0,o._)([(0,l.MZ)()],p.prototype,"hasHoveredManipulators",void 0),(0,o._)([(0,l.MZ)()],p.prototype,"firstGrabbedManipulator",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"created",void 0),(0,o._)([(0,l.MZ)({readOnly:!0})],p.prototype,"removeIncompleteOnCancel",void 0),p=(0,o._)([(0,c.$)("esri.views.interactive.InteractiveToolBase")],p)},50517:function(t,e,n){"use strict";n.d(e,{BV:function(){return m}});var i,r,o=n(13786),s=n(1932),a=n(20551),l=n(32501),c=n(33400),u=n(41546),d=n(45532);(r=i||(i={}))[r.Z=0]="Z",r[r.M=1]="M";class h{constructor(t){this.spatialReference=t}createVector(){return this._tag((0,s.vt)())}pointToVector(t){return this._tag((0,s.fA)(t.x,t.y))}arrayToVector(t){return this._tag((0,s.fA)(t[0],t[1]))}vectorToArray(t){return[t[0],t[1]]}pointToArray(t){return[t.x,t.y]}vectorToPoint(t,e=new d.default){return e.x=t[0],e.y=t[1],e.z=void 0,e.m=void 0,e.spatialReference=this.spatialReference,e}arrayToPoint(t,e=new d.default){return e.x=t[0],e.y=t[1],e.z=void 0,e.m=void 0,e.spatialReference=this.spatialReference,e}vectorToDehydratedPoint(t,e){if(t)return e??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},e.x=t[0],e.y=t[1],e.z=void 0,e.m=void 0,e.hasZ=!1,e.hasM=!1,e.spatialReference=this.spatialReference,e}lerp(t,e,n,i){return(0,o.Cc)(i,t,e,n)}addDelta(t,e,n){t[0]+=e,t[1]+=n}distance(t,e){return(0,o.Io)(t,e)}getZ(t,e=void 0){return e}hasZ(){return!1}getM(t,e=void 0){return e}hasM(){return!1}clone(t){return this._tag((0,s.ci)(t))}copy(t,e){return(0,o.C)(e,t)}fromXYZ(t){return this._tag((0,s.fA)(t[0],t[1]))}toXYZ(t,e=(0,l.vt)()){return(0,a.i)(e,t[0],t[1],0)}pointToXYZ(t,e=(0,l.vt)()){return(0,a.i)(e,t.x,t.y,0)}equals(t,e){return(0,o.aI)(t,e)}_tag(t){return t}}class p{constructor(t,e){this._valueType=t,this.spatialReference=e}createVector(){return this._tag((0,l.vt)())}pointToVector(t){return this._tag((0,l.fA)(t.x,t.y,this._valueType===i.Z?t.z:t.m))}arrayToVector(t){return this._tag((0,l.fA)(t[0],t[1],t[2]||0))}vectorToArray(t){return[t[0],t[1],t[2]]}pointToArray(t){return this._valueType===i.Z?[t.x,t.y,t.z]:[t.x,t.y,t.m]}vectorToPoint(t,e=new d.default){return e.x=t[0],e.y=t[1],e.z=this._valueType===i.Z?t[2]:void 0,e.m=this._valueType===i.M?t[2]:void 0,e.spatialReference=this.spatialReference,e}arrayToPoint(t,e=new d.default){return e.x=t[0],e.y=t[1],e.z=this._valueType===i.Z?t[2]:void 0,e.m=this._valueType===i.M?t[2]:void 0,e.spatialReference=this.spatialReference,e}vectorToDehydratedPoint(t,e){if(!t)return;e??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const n=this._valueType===i.Z,r=this._valueType===i.M;return e.x=t[0],e.y=t[1],e.z=n?t[2]:void 0,e.m=r?t[2]:void 0,e.hasZ=n,e.hasM=r,e.spatialReference=this.spatialReference,e}lerp(t,e,n,i){return(0,a.m)(i,t,e,n)}addDelta(t,e,n,r){t[0]+=e,t[1]+=n,this._valueType===i.Z&&(t[2]+=r)}distance(t,e){return this._valueType===i.Z?(0,a.j)(t,e):(0,o.Io)(t,e)}getZ(t,e=void 0){return this._valueType===i.Z?t[2]:e}hasZ(){return this._valueType===i.Z}getM(t,e=void 0){return this._valueType===i.M?t[2]:e}hasM(){return this._valueType===i.M}clone(t){return this._tag((0,l.ci)(t))}copy(t,e){return(0,a.c)(e,t)}fromXYZ(t,e=0,n=0){return this._tag((0,l.fA)(t[0],t[1],this._valueType===i.Z?t.length>2?t[2]:e:n))}toXYZ(t,e=(0,l.vt)()){return(0,a.i)(e,t[0],t[1],this._valueType===i.Z?t[2]:0)}pointToXYZ(t,e=(0,l.vt)()){return(0,a.i)(e,t.x,t.y,this._valueType===i.Z?t.z??0:0)}equals(t,e){return(0,a.H)(t,e)}_tag(t){return t}}class f{constructor(t){this.spatialReference=t}createVector(){return this._tag((0,u.vt)())}pointToVector(t){return this._tag((0,u.fA)(t.x,t.y,t.z,t.m))}arrayToVector(t){return this._tag((0,u.fA)(t[0],t[1],t[2]||0,t[3]||0))}vectorToArray(t){return[t[0],t[1],t[2],t[3]]}pointToArray(t){return[t.x,t.y,t.z,t.m]}vectorToPoint(t,e=new d.default){return e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.spatialReference=this.spatialReference,e}arrayToPoint(t,e=new d.default){return e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.spatialReference=this.spatialReference,e}vectorToDehydratedPoint(t,e){if(t)return e??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},e.x=t[0],e.y=t[1],e.z=t[2],e.m=t[3],e.hasZ=!0,e.hasM=!0,e.spatialReference=this.spatialReference,e}lerp(t,e,n,i){return(0,c.l)(i,t,e,n)}addDelta(t,e,n,i){t[0]+=e,t[1]+=n,t[2]+=i}distance(t,e){return(0,a.j)(t,e)}getZ(t){return t[2]}hasZ(){return!0}getM(t){return t[3]}hasM(){return!0}clone(t){return this._tag((0,u.ci)(t))}copy(t,e){return(0,c.c)(e,t)}fromXYZ(t,e=0,n=0){return this._tag((0,u.fA)(t[0],t[1],t.length>2?t[2]:e,n))}toXYZ(t,e=(0,l.vt)()){return(0,a.i)(e,t[0],t[1],t[2])}pointToXYZ(t,e=(0,l.vt)()){return(0,a.i)(e,t.x,t.y,t.z??0)}equals(t,e){return(0,c.e)(t,e)}_tag(t){return t}}function m(t,e,n){return t&&e?new f(n):e?new p(i.M,n):t?new p(i.Z,n):new h(n)}},2831:function(t,e,n){"use strict";n.d(e,{EX:function(){return b},RS:function(){return k},Tp:function(){return w},Wp:function(){return p},Xt:function(){return d},an:function(){return h},bl:function(){return y},dp:function(){return v},mc:function(){return _},pg:function(){return C},rh:function(){return S},sO:function(){return x},y$:function(){return g}});var i=n(50659),r=(n(58941),n(21609),n(15774)),o=n(13520),s=n(46157),a=n(67376),l=n(45328),c=n(68945),u=n(7819);function d(t,e){return t.events.on("drag",function(t,e){let n=null,i=null;return r=>{if("cancel"===r.action)return void(null!=i&&(i.execute({action:"cancel"}),n=null,i=null));const o={action:r.action,screenStart:r.start,screenEnd:r.screenPoint};"start"===r.action&&null==n&&(n=new S,i=new S,e(t,n,i,r.pointerType,o)),null!=n&&n.execute(o),"end"===r.action&&null!=n&&(n=null,i=null)}}(t,e))}function h(t,e){const n=[t.x,t.y,t.z??0],i=e,r=[Math.cos(i),Math.sin(i)],o=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===o)return null;r[0]/=o,r[1]/=o;const s=t=>{const e=(t.x-n[0])*r[0]+(t.y-n[1])*r[1];t.x=n[0]+e*r[0],t.y=n[1]+e*r[1]};return t=>(s(t.mapStart),s(t.mapEnd),{...t,axis:r})}function p(t){let e=null;return n=>{if("start"===n.action&&(e=function(t,e){const n=t.operations;if(!n)return null;const i=n.data.geometry,r=(0,l.RS)(e);if(i.spatialReference.equals(r))return m(t,n,(()=>{}));if("mesh"!==i.type){const e=f(i,r);if(null==e)return null;const o=i.spatialReference;return m(t,u.p.fromGeometry(e,n.viewingMode),(()=>{const t=(0,s.project)(i,o);n.trySetGeometry(t)}))}if((0,a.CK)(i)){const e=f(i.origin,r);if(!e)return null;const o=i.spatialReference,a=u.p.fromGeometry(e,n.viewingMode);return m(t,n,(()=>{const t=(0,s.project)(a.data.geometry,o),e=t.x-i.origin.x,r=t.y-i.origin.y,l=(t.z??0)-(i.origin.z??0);n.move(e,r,l)}))}return null}(t,n.mapStart.spatialReference)),null==e)return null;const i=n.mapEnd.x-n.mapStart.x,r=n.mapEnd.y-n.mapStart.y,o=(n.mapEnd.z??0)-(n.mapStart.z??0);return e.move(i,r,o,n.action),{...n,translationX:i,translationY:r,translationZ:o}}}function f(t,e){return null==t?null:t.spatialReference.equals(e)?t.clone():(0,s.project)(t,e)}function m(t,e,n){let i=0,r=0,o=0;return{move:(s,a,l,c)=>{"start"===c&&(i=0,r=0,o=0);const u=s-i,d=a-r,h=l-o;e.move(u,d,h),i+=u,r+=d,o+=h,n(),"end"===c&&t.endInteraction?.()}}}function g(t,e=null,n){let i=null;const r=null==e||t.spatialReference?.equals(e)?t=>t:t=>null!=t?(0,s.project)(t,e):t,o={exclude:[],...n};return e=>{if("start"===e.action&&(i=r(t.toMap(e.screenStart,o))),null==i)return null;const n=r(t.toMap(e.screenEnd,o));return null!=n?{...e,mapStart:i,mapEnd:n}:null}}function y(t){const e=t.map((t=>p(t))).filter(i.Ru);return t=>{const n=t.mapEnd.x-t.mapStart.x,i=t.mapEnd.y-t.mapStart.y,r=t.mapEnd.z-t.mapStart.z;return e.forEach((e=>e(t))),{...t,translationX:n,translationY:i,translationZ:r}}}function v(t){const e=t.operations?.createResetState();return t=>(e?.remove(),t)}function _(t){const e=t.map((t=>v(t))).filter((t=>null!=t));return t=>(e.forEach((e=>e(t))),t)}function b(){let t=0,e=0,n=0;return i=>{"start"===i.action&&(t=i.mapStart.x,e=i.mapStart.y,n=i.mapStart.z);const r=i.mapEnd.x-t,o=i.mapEnd.y-e,s=i.mapEnd.z-n;return t=i.mapEnd.x,e=i.mapEnd.y,n=i.mapEnd.z,{...i,mapDeltaX:r,mapDeltaY:o,mapDeltaZ:s,mapDeltaSpatialReference:i.mapStart.spatialReference}}}function x(){let t=0,e=0;return n=>{"start"===n.action&&(t=n.screenStart.x,e=n.screenStart.y);const i=n.screenEnd.x-t,r=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,{...n,screenDeltaX:i,screenDeltaY:r}}}function w(t,e){let n=null,i=0,s=0;return a=>{if("start"===a.action&&(n=t.toScreen?.(e),null!=n&&(n.x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(i=a.screenStart.x-n.x,s=a.screenStart.y-n.y))),null==n)return null;const l=(0,r.qE)(a.screenEnd.x-i,0,t.width),c=(0,r.qE)(a.screenEnd.y-s,0,t.height),u=(0,o.tc)(l,c);return a.screenStart=n,a.screenEnd=u,a}}const M=()=>{};class S{constructor(){this.execute=M}next(t,e=new S){return null!=t&&(this.execute=n=>{const i=t(n);null!=i&&e.execute(i)}),e}}function C(t,e,n=[]){if("2d"===t.type)return t=>t;let i=null;return r=>{"start"===r.action&&(i=t.toMap(r.screenStart,{exclude:n}),null!=i&&(i.z=(0,c.id)(i,t,e)));const o=t.toMap(r.screenEnd,{exclude:n});null!=o&&(o.z=(0,c.id)(o,t,e));const s=null!=i&&null!=o?{sceneStart:i,sceneEnd:o}:null;return{...r,scenePoints:s}}}function T(t,e,n){const i=e.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,r=(0,l.EL)(t);return r.z=i,r.hasZ=!0,r.z=(0,c.id)(r,e,n),r}function k(t,e){if("2d"===t.type)return t=>t;let n=null;return i=>{"start"===i.action&&(n=T(i.mapStart,t,e));const r=T(i.mapEnd,t,e),o=null!=n&&null!=r?{sceneStart:n,sceneEnd:r}:null;return{...i,scenePoints:o}}}},2623:function(t,e,n){"use strict";n.d(e,{uA:function(){return p},oH:function(){return h},ZE:function(){return f},Li:function(){return d},oF:function(){return g}});var i=n(50659),r=n(82547),o=n(48996),s=n(44740),a=n(91508),l=n(50517),c=n(57652),u=n(65420);class d{constructor(t){this.component=t,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(t){this._pos=t,this.component.unnormalizeVertexPositions()}}class h{constructor(t,e,n){this.component=t,this.leftVertex=e,this.rightVertex=n,this.type="edge",e.rightEdge=this,n.leftEdge=this}}class p{constructor(t,e){this._spatialReference=t,this._viewingMode=e,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||function(t,e){if(!e.supported)return;let n=1/0,i=-1/0;const r=e.upperBoundX-e.lowerBoundX;t.forEach((t=>{let o=t.pos[0];for(;o<e.lowerBoundX;)o+=r;for(;o>e.upperBoundX;)o-=r;n=Math.min(n,o),i=Math.max(i,o),t.pos[0]=o}));const o=i-n;r-o<o&&t.forEach((t=>{t.pos[0]<0&&(t.pos[0]+=r)}))}(this.vertices,function(t,e){const n=(0,c.Vp)(t);return e===u.RT.Global&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}(this._spatialReference,this._viewingMode))}updateVertexIndex(t,e){if(0===this.vertices.length)return;const n=this.vertices[0];let i=null,r=t,o=e;do{i=r,i.index=o++,r=i.rightEdge?i.rightEdge.rightVertex:null}while(null!=r&&r!==n);i.leftEdge&&i!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(i),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(t,e){const n=this.vertices[t];this.vertices[t]=this.vertices[e],this.vertices[e]=n}iterateVertices(t){if(0===this.vertices.length)return;const e=this.vertices[0];let n=e;do{t(n,n.index),n=null!=n.rightEdge?n.rightEdge.rightVertex:null}while(n!==e&&null!=n)}}class f extends o.A{constructor(t,e){super(),this.type=t,this.coordinateHelper=e,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:(0,r.Xb)(this.type)}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const t of this.components)for(const e of t.vertices)yield e}notifyChanges(t){this._dirty=!0,this.emit("change",t)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const t=[],e=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const i=[];let r=n.vertices.find((t=>null==t.leftEdge));const o=r;do{i.push(e(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null}while(r&&r!==o);t.push(i)}return new a.A({paths:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const t=[],e=this.coordinateHelper.vectorToArray;for(const n of this.components){if(n.vertices.length<1)continue;const i=[],r=n.vertices[0];let o=r;const s=o;do{i.push(e(o.pos)),o=null!=o.rightEdge?o.rightEdge.rightVertex:null}while(o&&o!==s);n.isClosed()&&i.push(e(r.pos)),t.push(i)}return new s.A({rings:t,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(t,e){const n=t.spatialReference,r=(0,l.BV)(t.hasZ,t.hasM,n),o=new f(t.type,r);switch(t.type){case"polygon":!function(t,e,n){const r=e.spatialReference,o=t.coordinateHelper,s=e.rings;for(let e=0;e<s.length;++e){const a=s[e],l=new p(r,n);l.index=e;const c=a.length>2&&(0,i.aI)(a[0],a[a.length-1]),u=c?a.length-1:a.length;for(let t=0;t<u;++t){const e=o.arrayToVector(a[t]),n=new d(l);l.vertices.push(n),n.pos=e,n.index=t}const f=l.vertices.length-1;for(let t=0;t<f;++t){const e=l.vertices[t],n=l.vertices[t+1],i=new h(l,e,n);l.edges.push(i)}if(c){const t=new h(l,l.vertices[l.vertices.length-1],l.vertices[0]);l.edges.push(t)}t.components.push(l)}}(o,t,e);break;case"polyline":!function(t,e,n){const i=e.spatialReference,r=t.coordinateHelper,o=e.paths;for(let e=0;e<o.length;++e){const s=o[e],a=new p(i,n);a.index=e;const l=s.length;for(let t=0;t<l;++t){const e=r.arrayToVector(s[t]),n=new d(a);a.vertices.push(n),n.pos=e,n.index=t}const c=a.vertices.length-1;for(let t=0;t<c;++t){const e=a.vertices[t],n=a.vertices[t+1],i=new h(a,e,n);a.edges.push(i)}t.components.push(a)}}(o,t,e);break;case"point":m(o,t,e);break;case"mesh":m(o,t.origin,e),o._geometry=t,o._dirty=!1}return o}}function m(t,e,n){const i=e.spatialReference,r=t.coordinateHelper,o=new p(i,n);o.index=0;const s=new d(o);s.index=0,s.pos=r.pointToVector(e),o.vertices.push(s),t.components.push(o)}function g(t){return"mesh"===t.type}},7819:function(t,e,n){"use strict";n.d(e,{p:function(){return C}});var i=n(48996),r=n(61226),o=n(32501),s=n(38441),a=n(2623),l=n(34358);class c{constructor(t,e,n){this._editGeometry=t,this._component=e,this._pos=n,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let t="redo";null==this._addedVertex&&(t="apply",this._addedVertex=new a.Li(this._component));const e=this._component.getLastVertex();if(null==e)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let t=null;e.rightEdge&&(this._originalEdge=e.rightEdge,t=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,null==this._left&&(this._left=new a.oH(this._component,e,this._addedVertex)),this._component.edges.push(this._left),e.rightEdge=this._left,null!=this._originalEdge&&null!=t&&(null==this._right&&(this._right=new a.oH(this._component,this._addedVertex,t)),this._component.edges.push(this._right),t.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,e.index+1)}this._editGeometry.notifyChanges({operation:t,addedVertices:[this._addedVertex]})}undo(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}var u=n(57665);class d{constructor(t,e,n=0){this._editGeometry=t,this._vertices=e,this._minNumberOfVertices=n,this.removedVertices=null}apply(){let t="redo";if(null==this.removedVertices){const e=this.removedVertices=[];this._vertices.forEach((t=>{const n=this._removeVertex(t);null!=n&&e.push(n)})),t="apply"}else this.removedVertices.forEach((t=>{this._removeVertex(t.removedVertex)}));this._editGeometry.notifyChanges({operation:t,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach((t=>{this._undoRemoveVertex(t)})),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(t){const e=t.component;if(e.vertices.length<=this._minNumberOfVertices)return null;const n={removedVertex:t,createdEdge:null},i=t.leftEdge,r=t.rightEdge;return e.vertices.splice(e.vertices.indexOf(t),1),i&&(e.edges.splice(e.edges.indexOf(i),1),i.leftVertex.rightEdge=null),r&&(e.edges.splice(e.edges.indexOf(r),1),r.rightVertex.leftEdge=null),0===t.index&&r&&this._vertices.length>0&&e.swapVertices(e.vertices.indexOf(r.rightVertex),0),i&&r&&(n.createdEdge=new a.oH(e,i.leftVertex,r.rightVertex),e.edges.push(n.createdEdge)),r&&e.updateVertexIndex(r.rightVertex,r.rightVertex.index-1),n}_undoRemoveVertex(t){const e=t.removedVertex,n=t.removedVertex.component,i=e.leftEdge,r=e.rightEdge;t.createdEdge&&n.edges.splice(n.edges.indexOf(t.createdEdge),1),n.vertices.push(e),i&&(n.edges.push(i),i.leftVertex.rightEdge=i),r&&(n.edges.push(r),r.rightVertex.leftEdge=r),n.updateVertexIndex(e,e.index)}}class h{constructor(t,e,n){this._editGeometry=t,this._edge=e,this._t=n,this.createdVertex=null,this._left=null,this._right=null}apply(){let t="redo";const e=this._edge,n=e.component,i=e.leftVertex,r=e.rightVertex;n.edges.splice(n.edges.indexOf(e),1),null==this.createdVertex&&(t="apply",this.createdVertex=new a.Li(e.component)),n.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(e.leftVertex.pos,e.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new a.oH(n,i,this.createdVertex)),this._left.leftVertex.leftEdge?n.edges.push(this._left):n.edges.unshift(this._left),i.rightEdge=this._left,null==this._right&&(this._right=new a.oH(n,this.createdVertex,r)),n.edges.push(this._right),r.leftEdge=this._right,n.updateVertexIndex(this.createdVertex,i.index+1),this._editGeometry.notifyChanges({operation:t,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const t=this._edge,e=t.component,n=this.createdVertex.leftEdge,i=this.createdVertex.rightEdge,r=n?.leftVertex,o=i?.rightVertex;e.vertices.splice(e.vertices.indexOf(this.createdVertex),1),e.edges.splice(e.edges.indexOf(this._left),1),e.edges.splice(e.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?e.edges.push(this._edge):e.edges.unshift(this._edge),r&&(r.rightEdge=t),o&&(o.leftEdge=t),r&&e.updateVertexIndex(r,r.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}class p{constructor(t,e,n){this._editGeometry=t,this._vertex=e,this._pos=n}apply(){const t=null==this._originalPosition;t&&(this._originalPosition=this._vertex.pos),this._apply(t?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(t){return t instanceof p&&t._vertex===this._vertex&&(this._pos=t._pos,this._apply("apply"),!0)}_apply(t){this._vertex.pos=this._pos,this._editGeometry.components.forEach((t=>t.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:t,updatedVertices:[this._vertex]})}}var f=n(50659);class m{constructor(t,e){this._editGeometry=t,this._component=e,this._createdEdge=null}apply(){let t="redo";if(null==this._createdEdge){t="apply";const e=this._component.getFirstVertex(),n=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||null==e||null==n)return;this._createdEdge=new a.oH(this._component,n,e)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:t})}undo(){null!=this._createdEdge&&((0,f.TF)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}class g{constructor(t,e,n,i){this._editGeometry=t,this.dx=e,this.dy=n,this.dz=i,this._firstTime=!0}apply(){const t=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(t,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(t){const e=this._editGeometry.geometry;return t instanceof g&&t._editGeometry.geometry===e&&(this._apply("apply",t.dx,t.dy,t.dz),this.dx+=t.dx,this.dy+=t.dy,this.dz+=t.dz,!0)}_apply(t,e,n,i){const r=this._editGeometry.geometry;r.offset(e,n,i);const o=this._editGeometry.components[0].getFirstVertex();if(!o)return;const s=this._editGeometry.coordinateHelper;o.pos=s.pointToVector(r.origin),this._editGeometry.notifyChanges({operation:t,updatedVertices:[o]})}}var y,v=n(28080),_=n(63447),b=n(31966),x=n(76835);class w{constructor(t,e){this._editGeometry=t,this._newPositions=e}apply(){const t=null==this._originalPositions?"apply":"redo";if(!this._originalPositions){const t=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map((e=>t.clone(e.pos)))}this._apply(t,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(t){return t instanceof w&&(this._newPositions=t._newPositions,this._apply("apply",this._newPositions),!0)}_apply(t,e){const n=this._editGeometry.coordinateHelper,i=this._editGeometry.allVertices;for(let t=0;t<i.length;t++)n.copy(e[t],i[t].pos);this._editGeometry.components.forEach((t=>t.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:t,updatedVertices:i})}}const M=Symbol();class S{constructor(t){this._operations=[],this._closed=!1,this[y]=!0,t&&(this._operations=t,this._closed=!0)}close(){this._closed=!0}apply(){for(const t of this._operations)t.apply()}undo(){for(let t=this._operations.length-1;t>=0;t--)this._operations[t].undo()}accumulate(t){if(this._closed)return!1;const e=this._operations.length?this._operations[this._operations.length-1]:null;return e&&e.accumulate(t)||(this._operations.push(t),t.apply()),!0}}y=M;class C extends i.A{constructor(t,e){super(),this.data=t,this.viewingMode=e,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",(t=>{t.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:t.addedVertices,operation:t.operation}),t.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:t.removedVertices,operation:t.operation}),t.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:t.updatedVertices,operation:t.operation})}))}destroy(){this._listener.remove()}splitEdge(t,e){return this._apply(new h(this.data,t,e))}updateVertices(t,e,n=l.Y.ACCUMULATE_STEPS){return this._apply(new u.D(this.data,t,e),n)}move(t,e,n,i=l.Y.ACCUMULATE_STEPS){return(0,a.oF)(this.data)?this._apply(new g(this.data,t,e,n),i):this.moveVertices(this.data.allVertices,t,e,n,i)}moveVertices(t,e,n,i,r=l.Y.ACCUMULATE_STEPS){return(0,a.oF)(this.data)?this._apply(new g(this.data,e,n,i),r):this.updateVertices(t,new v.a(this.data.coordinateHelper,e,n,i),r)}scale(t,e,n,i,r=l.Y.ACCUMULATE_STEPS,o=u.K.CUMULATIVE){return this.scaleVertices(this.data.allVertices,t,e,n,i,r,o)}scaleVertices(t,e,n,i,r,o=l.Y.ACCUMULATE_STEPS,s=u.K.CUMULATIVE){return this.updateVertices(t,new x.j(e,n,i,r,s),o)}rotate(t,e,n=l.Y.ACCUMULATE_STEPS,i=u.K.CUMULATIVE){return this.rotateVertices(this.data.allVertices,t,e,n,i)}rotateVertices(t,e,n,i=l.Y.ACCUMULATE_STEPS,r=u.K.CUMULATIVE){return this.updateVertices(t,new b.m(e,n,r),i)}removeVertices(t){return this._apply(new d(this.data,t,this._minNumVerticesPerType))}appendVertex(t){return 0===this.data.components.length?null:this._apply(new c(this.data,this.data.components[0],t))}setVertexPosition(t,e){return this._apply(new p(this.data,t,e))}offsetEdge(t,e,n,i=l.Y.ACCUMULATE_STEPS){return this.updateVertices([e.leftVertex,e.rightVertex],new _.L(this.data.coordinateHelper,t,e,n),i)}trySetGeometry(t,e=l.Y.ACCUMULATE_STEPS){const{data:n}=this,{coordinateHelper:i}=n;if(n.type!==t.type||!n.spatialReference.equals(t.spatialReference)||i.hasZ()!==t.hasZ||i.hasM()!==t.hasM||!(0,s.It)(n.geometry,t)||(0,a.oF)(n))return;const r=Array.from(a.ZE.fromGeometry(t,this.viewingMode).iterateVertices(),(t=>t.pos));return this.setVertexPositions(r,e)}setVertexPositions(t,e=l.Y.ACCUMULATE_STEPS){return this._apply(new w(this.data,t),e)}createResetState(){if((0,a.oF)(this.data))return this._createResetStateMesh();const t=this.data.geometry.clone();return(0,r.hA)((()=>this.trySetGeometry(t)))}closeComponent(t){return this.data.components.includes(t)?this._apply(new m(this.data,t)):null}canRemoveVertex(t){return t.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const t=new S;return this._apply(t),(0,r.hA)((()=>t.close()))}undo(){if(this._undoStack.length>0){const t=this._undoStack.pop();return t.undo(),this._redoStack.push(t),t}return null}redo(){if(this._redoStack.length>0){const t=this._redoStack.pop();return t.apply(),this._undoStack.push(t),t}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(t,e=l.Y.ACCUMULATE_STEPS){return e!==l.Y.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(t)||(t.apply(),this._undoStack.push(t),this._redoStack=[]),t}_createResetStateMesh(){if(!(0,a.oF)(this.data))return(0,r.hA)();const t=this.data.geometry,{vertexSpace:e}=t;if(e.origin){const n=(0,o.o8)(e.origin);return(0,r.hA)((()=>{t.vertexSpace.origin=n}))}const n=t.vertexAttributes.clonePositional();return(0,r.hA)((()=>{t.vertexAttributes=n,t.vertexAttributesChanged()}))}static fromGeometry(t,e){return new C(a.ZE.fromGeometry(t,e),e)}}},34358:function(t,e,n){"use strict";var i;n.d(e,{Y:function(){return i}}),function(t){t[t.NEW_STEP=0]="NEW_STEP",t[t.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"}(i||(i={}))},28080:function(t,e,n){"use strict";n.d(e,{a:function(){return i}});class i{constructor(t,e,n,i){this._helper=t,this.dx=e,this.dy=n,this.dz=i}_move(t,e,n,i){this._helper.addDelta(t.pos,e,n,i)}apply(t){this._move(t,this.dx,this.dy,this.dz)}undo(t){this._move(t,-this.dx,-this.dy,-this.dz)}canAccumulate(t){return t instanceof i}accumulate(t,e){this._move(t,e.dx,e.dy,e.dz)}accumulateParams(t){this.dx+=t.dx,this.dy+=t.dy,this.dz+=t.dz}}},63447:function(t,e,n){"use strict";n.d(e,{B:function(){return f},L:function(){return d}});var i=n(15774),r=n(13786),o=n(1932),s=n(20551),a=n(32501),l=n(5596),c=n(29531),u=n(77363);class d{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(t,e,n,i=0,r=m.IMMEDIATE){this._helper=t,this._planeType=e,this._edge=n,this.distance=i,this._plane=(0,l.vt)(),this._offsetPlane=(0,l.vt)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,r===m.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const t=this._toXYZ(this._edge.leftVertex.pos),e=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),n=this._toXYZ(this._edge.rightVertex.pos),i=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=(0,s.o)((0,a.vt)(),t,n),e?(this._left=this._computeNeighbor(t,e,this._edgeDirection),this._right=this._computeNeighbor(n,i,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(n,i,this._edgeDirection),this._left=this._computeNeighbor(t,e,this._edgeDirection,this._right))}_toXYZ(t){return null!=t?this._helper.toXYZ(t):null}_pointToXYZ(t){return this._toXYZ(this._helper.pointToVector(t))}_computeNeighbor(t,e,n,i){const r=(0,a.vt)();if(e){(0,s.o)(r,t,e);const i=!this._passesBisectingAngleThreshold(r,n);return{start:t,end:e,direction:i?this._bisectVectorsPerpendicular(n,r):r,isOriginalDirection:!i}}return this._helper.hasZ()?i&&((0,s.e)(r,n,i.direction),(0,s.e)(r,r,n),(0,s.n)(r,r),Math.sign(r[1])!==Math.sign(n[0])&&(0,s.h)(r,r,-1)):(0,s.i)(r,-n[1],n[0],0),{start:t,end:e,direction:r,isOriginalDirection:!0}}_passesBisectingAngleThreshold(t,e){const n=Math.abs((0,c.g7)(e,t));return n>=h&&n<=Math.PI-h}_bisectVectorsPerpendicular(t,e){const n=(0,s.f)(t,e)<0?t:(0,s.v)((0,a.vt)(),t),i=Math.abs((0,s.f)(n,e));if(!(i<p||i>1-p))return this._bisectDirection(n,e);const r=(0,s.e)((0,a.vt)(),n,[0,0,1]);return(0,s.n)(r,r)}_bisectDirection(t,e){const n=(0,s.g)((0,a.vt)(),t,e);return(0,s.n)(n,n)}_initializePlane(){const t=this._computeNormalDirection(this._left),e=this._computeNormalDirection(this._right);(0,s.f)(t,e)<0&&(0,s.v)(e,e),(0,l.O_)(this._left.start,this._bisectDirection(t,e),this._plane)}_computeNormalDirection(t){const e=(0,s.e)((0,a.vt)(),t.direction,this._edgeDirection);(0,s.n)(e,e);const n=(0,s.e)((0,a.vt)(),this._edgeDirection,e);return this._planeType===f.XY&&(n[2]=0),(0,s.n)(n,n)}_initializeDistanceConstraints(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint((0,l.mN)(this._plane,this._left.end)),null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint((0,l.mN)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(t){t<=0&&(this._minDistance=Math.max(this._minDistance,t)),t>=0&&(this._maxDistance=Math.min(this._maxDistance,t))}_updateIntersectDistanceConstraint(t){const e=(0,l.Qj)(t),n=this._edgeDirection,i=(0,s.g)((0,a.vt)(),this._left.start,this._left.direction),c=(0,s.g)((0,a.vt)(),this._right.start,this._right.direction),d=this._pointInBasis2D((0,o.vt)(),e,n,this._left.start),h=this._pointInBasis2D((0,o.vt)(),e,n,i),p=this._pointInBasis2D((0,o.vt)(),e,n,this._right.start),f=this._pointInBasis2D((0,o.vt)(),e,n,c),[m]=(0,u.jI)({start:h,end:d,type:u.Vv.LINE},{start:f,end:p,type:u.Vv.LINE});if(!m)return;const g=(0,r.Re)((0,o.vt)(),d,h);(0,r.S8)(g,g);const y=(0,r.Re)((0,o.vt)(),m,h),v=(0,r.Om)(g,y),_=(0,s.g)((0,a.vt)(),i,(0,s.h)((0,a.vt)(),this._left.direction,-v)),b=(0,l.mN)(t,_);this._updateDistanceConstraint(b)}_pointInBasis2D(t,e,n,i){return t[0]=(0,c.gr)(e,i),t[1]=(0,c.gr)(n,i),t}_offset(t,e){Number.isFinite(this._minDistance)&&(e=Math.max(this._minDistance,e)),Number.isFinite(this._maxDistance)&&(e=Math.min(this._maxDistance,e)),(0,l.C)(this._offsetPlane,this._plane),this._offsetPlane[3]-=e;const n=(t,e,n)=>null!=e&&(0,l.U5)(this._offsetPlane,t,(0,s.g)((0,a.vt)(),t,e),n),i=(0,a.vt)();(t===this._edge.leftVertex?n(this._left.start,this._left.direction,i):n(this._right.start,this._right.direction,i))&&this._helper.copy(this._helper.fromXYZ(i,void 0,this._helper.getM(t.pos)),t.pos)}selectArrowFromStartPoint(t){this._selectedArrow=(0,l.Tj)(this.plane,this._pointToXYZ(t))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(t){return(0,l.mN)(this.plane,this._pointToXYZ(t))}clampedStartAndEnd(t){const e=this._helper.toXYZ(this._helper.pointToVector(t)),n=(0,l._I)(this._plane,e,(0,a.vt)()),r=(0,l.mN)(this._plane,e),o=(0,i.qE)(r,this._minDistance,this._maxDistance);return(0,s.m)(e,n,e,o/r),{start:n,end:e}}apply(t){this._offset(t,this.distance)}undo(t){this._offset(t,0)}canAccumulate(t){return t instanceof d&&this._edge.leftVertex.index===t._edge.leftVertex.index&&this._edge.rightVertex.index===t._edge.rightVertex.index&&this._edge.component===t._edge.component&&this._maybeEqualsVec3(this._left.direction,t._left.direction)&&this._maybeEqualsVec3(this._right.direction,t._right.direction)&&(0,s.H)((0,l.Qj)(this._plane),(0,l.Qj)(t._plane))}accumulate(t,e){const n=this._plane[3]-e._plane[3]+e.distance;this._offset(t,n)}accumulateParams(t){const e=t.distance-t._plane[3];this.distance=e+this._plane[3]}clone(){const t=new d(this._helper,this._planeType,this._edge,this.distance,m.DEFERRED);return(0,l.C)(t._plane,this._plane),(0,l.C)(t._offsetPlane,this._offsetPlane),t._maxDistance=this._maxDistance,t._minDistance=this._minDistance,t._left=this._cloneNeighbor(this._left),t._right=this._cloneNeighbor(this._right),t._edgeDirection=(0,s.c)((0,a.vt)(),this._edgeDirection),t}_maybeEqualsVec3(t,e){return null==t&&null==e||null!=t&&null!=e&&(0,s.H)(t,e)}_cloneNeighbor({start:t,end:e,direction:n,isOriginalDirection:i}){return{start:(0,s.c)((0,a.vt)(),t),end:null!=e?(0,s.c)((0,a.vt)(),e):null,direction:(0,s.c)((0,a.vt)(),n),isOriginalDirection:i}}}const h=(0,i.kU)(15),p=.001;var f,m,g;(g=f||(f={}))[g.XYZ=0]="XYZ",g[g.XY=1]="XY",function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(m||(m={}))},31966:function(t,e,n){"use strict";n.d(e,{m:function(){return s}});var i=n(50659),r=n(13786),o=n(57665);class s{constructor(t,e,n=o.K.CUMULATIVE){this.origin=t,this.angle=e,this._accumulationType=n}_rotate(t,e){(0,r.e$)(t.pos,t.pos,this.origin,e)}apply(t){this._rotate(t,this.angle)}undo(t){this._rotate(t,-this.angle)}canAccumulate(t){return t instanceof s&&(0,i.aI)(this.origin,t.origin)}accumulate(t,e){const n=e._accumulationType===o.K.REPLACE;this._rotate(t,n?e.angle-this.angle:e.angle)}accumulateParams(t){const e=t._accumulationType===o.K.REPLACE;this.angle=e?t.angle:this.angle+t.angle}}},76835:function(t,e,n){"use strict";n.d(e,{j:function(){return a}});var i=n(50659),r=n(1932),o=n(13786),s=n(57665);class a{constructor(t,e,n,i,o=s.K.CUMULATIVE){this.origin=t,this.axis1=e,this.factor1=n,this.factor2=i,this._accumulationType=o,this.axis2=(0,r.fA)(e[1],-e[0])}_scale(t,e,n){(0,o.Vj)(t.pos,t.pos,this.origin,this.axis1,e),(0,o.Vj)(t.pos,t.pos,this.origin,this.axis2,n)}apply(t){this._scale(t,this.factor1,this.factor2)}undo(t){this._scale(t,1/this.factor1,1/this.factor2)}canAccumulate(t){return t instanceof a&&(0,i.aI)(this.origin,t.origin)&&(0,i.aI)(this.axis1,t.axis1)}accumulate(t,e){e._accumulationType===s.K.REPLACE?this._scale(t,e.factor1/this.factor1,e.factor2/this.factor2):this._scale(t,e.factor1,e.factor2)}accumulateParams(t){const e=t._accumulationType===s.K.REPLACE;this.factor1=e?t.factor1:this.factor1*t.factor1,this.factor2=e?t.factor2:this.factor2*t.factor2}}},57665:function(t,e,n){"use strict";n.d(e,{D:function(){return i},K:function(){return r}});class i{constructor(t,e,n){this._editGeometry=t,this._vertices=e,this.operation=n,this._undone=!1}apply(){this._vertices.forEach((t=>this.operation.apply(t))),this._editGeometry.components.forEach((t=>t.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:this._undone?"redo":"apply",updatedVertices:this._vertices})}undo(){this._vertices.forEach((t=>this.operation.undo(t))),this._editGeometry.notifyChanges({operation:"undo",updatedVertices:this._vertices}),this._undone=!0}canAccumulate(t){if(this._undone||t._vertices.length!==this._vertices.length)return!1;for(let e=0;e<t._vertices.length;++e)if(t._vertices[e]!==this._vertices[e])return!1;return this.operation.canAccumulate(t.operation)}accumulate(t){return!!(t instanceof i&&this.canAccumulate(t))&&(this._vertices.forEach((e=>this.operation.accumulate(e,t.operation))),this.operation.accumulateParams(t.operation),this._editGeometry.components.forEach((t=>t.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:"apply",updatedVertices:this._vertices}),!0)}}var r;!function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"}(r||(r={}))},41857:function(t,e,n){"use strict";n.d(e,{Bb:function(){return h},G3:function(){return m},fJ:function(){return p}});var i=n(13786),r=n(20551),o=n(32501),s=n(2075),a=n(50973),l=n(28080),c=n(31966),u=n(76835),d=n(57665);function h(t,e){return f(t,e,!1)}function p(t,e){return f(t,e,!0)}function f(t,e,n){if(t instanceof d.D){if(t.operation instanceof l.a)return function(t,e,n=!1){const i=n?-1:1,a=(0,o.fA)(i*t.dx,i*t.dy,i*t.dz);(0,r.g)(e.origin,e.origin,a),(0,s.u)(e)}(t.operation,e,n),!0;if(t.operation instanceof c.m)return function(t,e,n=!1){const i=n?-t.angle:t.angle;(0,r.K)(e.basis1,e.basis1,o.uY,i),(0,r.K)(e.basis2,e.basis2,o.uY,i),(0,s.u)(e)}(t.operation,e,n),!0;if(t.operation instanceof u.j)return function(t,e,n=!1){const o=n?1/t.factor1:t.factor1,a=n?1/t.factor2:t.factor2;(0,r.h)(e.basis1,e.basis1,o),(0,r.h)(e.basis2,e.basis2,a),(0,i.Vj)(e.origin,e.origin,t.origin,t.axis1,o),(0,i.Vj)(e.origin,e.origin,t.origin,t.axis2,a),(0,s.u)(e)}(t.operation,e,n),!0}return!1}function m(t,e,n,r){r||(r=(0,s.a)());const o=(0,i.hZ)(a.oG.get(),t[1],-t[0]),l=(0,i.hZ)(a.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),c=(0,i.hZ)(a.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),u=a.oG.get();e.components.forEach((e=>e.vertices.forEach((({pos:e})=>{(0,i.hZ)(u,(0,i.Om)(t,e),(0,i.Om)(o,e)),(0,i.jk)(l,l,u),(0,i.T9)(c,c,u)}))));const d=1e-6,h=(0,i.hZ)(a.oG.get(),c[0]-l[0]<d?n/2:0,c[1]-l[1]<d?n/2:0);return(0,i.Re)(l,l,h),(0,i.WQ)(c,c,h),(0,i.hs)(r.basis1,t,(c[0]-l[0])/2),(0,i.hs)(r.basis2,o,(c[1]-l[1])/2),(0,i.hZ)(r.origin,l[0]*t[0]+l[1]*o[0],l[0]*t[1]+l[1]*o[1]),(0,i.WQ)(r.origin,r.origin,r.basis1),(0,i.WQ)(r.origin,r.origin,r.basis2),(0,s.u)(r),r}},53551:function(t,e,n){"use strict";var i,r,o;n.d(e,{PK:function(){return i},SJ:function(){return o},p7:function(){return r}}),function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"}(i||(i={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(r||(r={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(o||(o={}))},7768:function(t,e,n){"use strict";n.d(e,{cx:function(){return _},dz:function(){return w},hj:function(){return f},lJ:function(){return b},tC:function(){return M}}),n(50917);var i=n(56275),r=n(62938),o=n(20551),s=n(68734),a=n(57862),l=n(46460),c=n(68945),u=n(92100),d=n(28397),h=n(99675),p=n(57165);function f(t,e,n,i,r,o){let l="geodesic",c=(0,a.Xn)(n);const u=(0,d.Hh)();return(0,d.vf)(t,e,i,u),u[2]=0,c&&(0,s.F)(u,n,u,c)||(l="euclidean",c=n),{mode:l,view:e,elevationInfo:i,hasZ:r,directionMode:o,spatialReference:t.spatialReference,measurementSR:c,origin:u}}function m(t,e,n){if(null==e||null==t)return;const o=(0,r._H)(n.measurementSR);if(null==o)return;const s=w(t,n);if(null==s)return;const a=(0,i.l3)(e,o);return new u.ej(s,a)}function g(t,e,n,r){if(null==n||null==t)return;const o=w(t,r);if(null==o)return;const s=(0,h.hF)(n),a=t=>{if(null==t)return;const e=(0,d.Hh)(),n=(0,i.Wq)(t,"degrees","geographic");return(0,h.rT)(e,o,r.measurementSR,10,n,r.mode)?new u.FX(o,e):void 0},l=()=>{if(null!=e&&null!=t)return(0,h.hF)((0,h.$h)(e,t))};switch(r.directionMode){case h.rZ.Absolute:return a(s);case h.rZ.Relative:{const t=l();if(null==t)return;return a(t+s)}case h.rZ.RelativeBilateral:{const t=l();if(null==t)return;return(0,u.xW)([a(t+s),a(t-s)])}}}function y(t,e){const n=S(t,e);return null!=n?new u.qR(n):void 0}function v(t,e,n){const{context:r,longitude:o,latitude:a,direction:l,distance:c,elevation:p}=n;if(null!=o||null!=a||null!=c||null!=p||null!=l){if(null!=o||null!=a){const t=(0,h.hF)(o),e=(0,h.hF)(a),n=S(p,r);return new u.QT(t,e,n)}return function(t,e,{context:n,direction:r,distance:o,elevation:a}){if(null==e)return y(a,n);const{view:l,elevationInfo:c,measurementSR:p}=n,f=(0,d.vf)(e,l,c);if(!p||!(0,s.F)(f,e.spatialReference,C,p))return;const[m,g]=C,v=null!=o?(0,i.l3)(o,"meters"):void 0,_=(0,h.hF)(r),b=S(a,n),x=t=>{const e=new u.jf([m,g],p,v,b,t);return null==v||null==t||null==b&&n.hasZ?e:new u.i7(e.closestTo(f))};if(null==_)return x(void 0);const w=()=>{if(null!=t&&null!=e)return(0,h.hF)((0,h.$h)(t,e))};switch(n.directionMode){case h.rZ.Absolute:return x(_);case h.rZ.Relative:{const t=w();if(null==t)return;return x(t+_)}case h.rZ.RelativeBilateral:{const t=w();if(null==t)return;return(0,u.xW)([x(t+_),x(t-_)])}}}(t,e,n)}}function _(t){return"geodesic"===t.context.mode?v(null,null,t):x(t)}function b(t,e,n){const{context:i,x:r,y:o,distance:s,direction:a,elevation:l}=n;return"geodesic"===i.mode?v(e,t,n):null!=r||null!=o?x(n):function(t){let e;for(const n of t)n&&(e=e?.intersect(n)??n);return e}([m(t,s,i),g(t,e,a,i),y(l,i)])}function x({x:t,y:e,elevation:n,context:i}){E.x=t?.value??0,E.y=e?.value??0,E.spatialReference=i.spatialReference;const r=w(E,i,T);return new u.QT(null!=t&&null!=r?r[0]:void 0,null!=e&&null!=r?r[1]:void 0,S(n,i))}function w(t,e,n=(0,d.Hh)()){const{view:i,elevationInfo:r,measurementSR:a,origin:l,mode:c}=e;if((0,d.vf)(t,i,r,n),(0,s.F)(n,t.spatialReference,n,a))return"geodesic"!==c&&(0,o.d)(n,n,l),n}function M(t,e,n,i){const{view:r,measurementSR:a,spatialReference:l,origin:c,mode:u}=n;if("geodesic"===u?(0,o.c)(k,t):(0,o.g)(k,t,c),(0,s.F)(k,a,k,l))return(0,d.xF)(k,r,e,n,i)}function S(t,e){return function(t,{view:e,origin:n,elevationInfo:o,hasZ:s,measurementSR:a}){if(null==t||!s)return;const l=(0,r.mq)(a);if(null==l)return;const[u,d]=n,h=(0,i.l3)(t,l),p="3d"===e?.type?(0,c.Fo)(e,u,d,h,a,o):h;return null!=p?(0,i.d_)(p,l):void 0}(t,e)?.value??void 0}const C=(0,d.Hh)(),T=(0,d.Hh)(),k=(0,d.Hh)(),E=(0,l.T)(0,0,0,p.A.WGS84)},58144:function(t,e,n){"use strict";n.d(e,{e:function(){return i}});class i{constructor(t){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=t.editGeometryOperations,this.elevationInfo=t.elevationInfo,this.pointer=t.pointer,this.vertexHandle=t.vertexHandle,this.excludeFeature=t.excludeFeature,this.feature=t.feature,this.visualizer=t.visualizer,this.selfSnappingZ=t.selfSnappingZ,this.drawConstraints=t.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}},45908:function(t,e,n){"use strict";n.d(e,{L:function(){return h}});var i=n(95929),r=n(60539),o=n(28181),s=n(42413),a=n(45328),l=n(68945),c=n(2831),u=n(58144),d=n(48961);function h({predicate:t=()=>!0,snappingManager:e,snappingContext:n,updatingHandles:a,useZ:h=!0}){const y=new c.rh;if(null==e)return{snappingStep:[g,y],cancelSnapping:g};let v,_=null,b=null,x=null;const w=()=>{_=(0,i.DC)(_),e.doneSnapping(),b?.frameTask.remove(),b=null,v=(0,i.xt)(v),x=null},M=(S=e,C=h,T=y,(0,r.sg)((async({frameTask:t,point:e,scenePoint:n,context:i,event:r,delta:o,getLastState:a},l)=>{const c=await t.schedule((()=>S.snap({point:e,scenePoint:n,context:i,signal:l})),l);if(c.valid){let n=await t.schedule((()=>c.apply()),l);const u=a();null!=u.point&&e!==u.point&&(n=S.update({point:u.point,scenePoint:u.scenePoint,context:i})),null!=u.updatePoint&&(0,s.CI)(n,u.updatePoint)||(m(r.mapEnd,n,o,C),T.execute(r))}})));var S,C,T;let k=null,E=null,$=null;return{snappingStep:[i=>{if(!t(i))return i;const{action:s}=i;if("start"===s){const{info:t}=i,r=function(t){return"3d"===t.type?t.resourceController.scheduler.registerTask(d.W6.SNAPPING):d.nu}(e.view);if(b=function(t,e,n){return{context:new u.e({editGeometryOperations:t.editGeometryOperations,elevationInfo:t.elevationInfo,pointer:t.pointer,vertexHandle:null!=e.info?e.info.handle:null,excludeFeature:t.excludeFeature,feature:t.feature,visualizer:t.visualizer}),originalPos:null!=e.snapOrigin?t.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:null!=e.scenePoints?e.scenePoints.sceneStart:null,frameTask:n}}(n,i,r),b.context.selfSnappingZ=null,!h&&null!=t){const e=function(t,e){if(!t.hasZ())return null;const n=e.vertices;let i=null;for(const e of n){const n=t.getZ(e.pos);if(null!=i&&null!=n&&Math.abs(n-i)>1e-6)return null;null==i&&(i=n)}return i}(n.coordinateHelper,t.handle.component);null!=e&&(b.context.selfSnappingZ={value:e,elevationInfo:n.elevationInfo??l.qt})}}if(null!=b){const{context:t,originalScenePos:n,originalPos:l}=b,{mapEnd:c,mapStart:u,scenePoints:d}=i,g=p(l,f(c,u)),y=f(u,l),w={...i,action:"update"},S=b.context,C=function(t,e){return null==t||null==e?null:p(t,f(e.sceneEnd,e.sceneStart))}(n,d),T=e.update({point:g,scenePoint:C,context:t});if($=T,m(c,T,y,h),k=g,E=C,"end"!==s){const{frameTask:t}=b;null==_&&(_=new AbortController),x=e=>{a.addPromise((0,r.QZ)(M({frameTask:t,event:w,context:S,point:g,scenePoint:C,delta:y,getLastState:()=>({point:k,scenePoint:E,updatePoint:e.forceUpdate?null:$})},_.signal)))},x({forceUpdate:!1}),null==v&&(v=(0,o.watch)((()=>e.options.effectiveEnabled),(()=>x?.({forceUpdate:!0}))))}}return"end"===s&&w(),i},y],cancelSnapping:t=>(w(),t)}}function p(t,[e,n,i]){const r=(0,a.EL)(t);return r.x+=e,r.y+=n,r.hasZ&&(r.z+=i),r}function f(t,e){const n=t.hasZ&&e.hasZ?t.z-e.z:0;return[t.x-e.x,t.y-e.y,n]}function m(t,e,[n,i,r],o){t.x=e.x+n,t.y=e.y+i,o&&t.hasZ&&e.hasZ&&(t.z=e.z+r)}function g(t){return t}},21858:function(t,e,n){"use strict";n.d(e,{b:function(){return c}});var i=n(61226),r=n(97441),o=n(64330),s=n(92535),a=n(96942),l=n(98245);class c{draw(t,e){const n=function(t){const e=[];for(const n of t){let t=!0;for(const i of e)if(n.equals(i)){t=!1;break}t&&e.push(n)}return e}(t),c=this.sortUniqueHints(n),u=[];for(const t of c)t instanceof r.v&&u.push(this.visualizeIntersectionPoint(t,e)),t instanceof o.c&&u.push(this.visualizeLine(t,e)),t instanceof s.r&&u.push(this.visualizeParallelSign(t,e)),t instanceof l.l&&u.push(this.visualizeRightAngleQuad(t,e)),t instanceof a._&&u.push(this.visualizePoint(t,e));return(0,i.vE)(u)}sortUniqueHints(t){return t}}},96942:function(t,e,n){"use strict";n.d(e,{_:function(){return o}});var i=n(20551),r=n(94612);class o extends r.m{constructor(t,e,n){super(e,n),this.point=t}equals(t){return t instanceof o&&(0,i.p)(this.point,t.point)}}},17921:function(t,e,n){"use strict";n.d(e,{T:function(){return r}});var i=n(13520);function r(t){let e=0,n=0,r=0;return t?("cim"===t.type&&t.data.symbol&&"symbolLayers"in t.data.symbol&&t.data.symbol.symbolLayers&&t.data.symbol.symbolLayers.map((t=>{"CIMVectorMarker"===t.type&&t.anchorPoint&&(Math.abs(t.anchorPoint.x)>e&&(e=t.anchorPoint.x),Math.abs(t.anchorPoint.y)>n&&(n=t.anchorPoint.y),null!=t.size&&t.size>r&&(r=t.size))})),e=(0,i.Lz)(e),n=(0,i.Lz)(n),r=(0,i.Lz)(r),{offsetX:e,offsetY:n,size:r}):{offsetX:e,offsetY:n,size:r}}},87265:function(t,e,n){"use strict";n.d(e,{Am:function(){return T},Gk:function(){return y},Ku:function(){return b},S3:function(){return w},fL:function(){return E},em:function(){return k},LJ:function(){return M},Y3:function(){return x},dy:function(){return C},qP:function(){return S},fr:function(){return _},Hw:function(){return $},uf:function(){return A}});var i=n(56275),r=n(49634),o=n(53804),s=n(83525),a=n(66110),l=n(23502),c=(n(58941),n(40633),n(13798),n(65953));let u=class extends s.A{constructor(t){super(t),this.actual=null,this.lockable=!0,this.id=(0,a.lk)(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(t){this.lockable&&this._set("committed",t)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(t){this.inputValue=t}onCommit(t,e,n){this.lockable?this._onCommitLockable(t,n):this._onCommitNonLockable(n),this.invalid&&"commit-and-exit"===t||n.onCommit(e,t)}_onCommitLockable(t,e){const{inputValue:n,locked:i}=this;i&&d(n)?this.unlock():("commit-and-exit"===t&&!i||null!=n)&&this._parseInputAndLock(e)}_onCommitNonLockable(t){const{inputValue:e}=this;d(e)?this.setActual(null):null!=e&&this._parseInputAndSetActual(t)}applyValue(t){this.lockable?this.lock(t):this.setActual(t)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(t){this.actual=t,this.clearInputValue()}lock(t){this.lockable&&(this.committed=t??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(t){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(t))}getSuffix(t){const{suffix:e}=this;return"function"==typeof e?e(t):e}getFormattedValue(t){const{actual:e,committed:n,format:i}=this;return null!=n?i(n,t):null!=e?i(e,t):null}getRawDisplayValue(t){const{actual:e,committed:n,inputValue:i}=this;return null!=i?i:this.lockable&&null!=n?this.formatForInputMode(n,t):null!=e?this.formatForInputMode(e,t):null}_parseInputAndSetActual(t){const{inputValue:e}=this;if(null==e||d(e))return this.setActual(null);const n=this.parse(e,t);null!=n?this.setActual(n):this.invalid=!0}_parseInputAndLock(t){const{inputValue:e,actual:n}=this;if(d(e))return this.unlock();if(null==e)return this.lock(n);const i=this.parse(e,t);null!=i?this.lock(i):this.invalid=!0}};function d(t){return null!=t&&""===t.trim()}(0,o._)([(0,l.MZ)()],u.prototype,"actual",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"committed",null),(0,o._)([(0,l.MZ)()],u.prototype,"dirty",null),(0,o._)([(0,l.MZ)()],u.prototype,"format",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"formatForInputMode",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"lockable",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"locked",null),(0,o._)([(0,l.MZ)()],u.prototype,"id",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"inputValue",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"name",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"parse",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"readOnly",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"suffix",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"title",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"visible",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"invalid",void 0),(0,o._)([(0,l.MZ)()],u.prototype,"unlockOnVertexPlacement",void 0),u=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipField")],u);let h=class extends u{constructor(t){super(t),this.showAsZ=!1}normalizeCtorArgs(t){const e=t=>t.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:i.r7,parse:(0,r.hw)({createQuantity:(t,n)=>(0,i.d_)(t,e(n))}),format:(t,e)=>e.formatters.verticalLength(t),formatForInputMode:(t,n)=>n.formatters.scalar((0,i.kM)(t,e(n))),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...t}}};(0,o._)([(0,l.MZ)()],h.prototype,"showAsZ",void 0),h=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],h);var p=n(88226),f=n(99675);let m=class extends u{constructor(t){super(t),this.precision=1}normalizeCtorArgs(t){return{name:"orientation",actual:null,parse:(0,r.hw)({createQuantity:(t,e)=>(0,i.Wq)(t,(t=>t.inputUnitInfos.angle.unit)(e),"geographic"),sanitize:r.D5}),format:t=>{const e=(0,f.P1)(t);return(0,p.Nk)(e,"geographic",this.precision)},formatForInputMode:(t,e)=>{const n=(0,f.P1)(t);return e.formatters.scalar(n)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation,...t}}};(0,o._)([(0,l.MZ)()],m.prototype,"precision",void 0),m=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],m);let g=class extends u{constructor(t){super(t),this.precision=null}normalizeCtorArgs(t){const e=t=>t.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:(0,r.hw)({createQuantity:(t,n)=>(0,i.d_)(t,e(n))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,n)=>n.formatters.scalar((0,i.kM)(t,e(n))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size,...t}}};function y(t){const e=t=>t.inputUnitInfos.angle.unit,n=t=>t.sketchOptions.values.effectiveDirectionMode;return new u({name:"direction",actual:i.IV,parse:(0,r.hw)({createQuantity:(t,n)=>(0,i.Wq)(t,e(n),"geographic"),sanitize:r.D5}),format:(t,e)=>{const i=n(e),r=(0,f.jQ)(t,i);switch(i){case f.rZ.Absolute:return e.formatters.direction(r);case f.rZ.Relative:return e.formatters.directionRelative(r);case f.rZ.RelativeBilateral:return e.formatters.directionRelativeBilateral(r)}},formatForInputMode:(t,r)=>{const o=(0,f.jQ)(t,n(r));return r.formatters.scalar((0,i.kM)(o,e(r)))},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>{const e=n(t),{absolute:i,relative:r}=t.messages.sketch.direction;switch(e){case f.rZ.Absolute:return i;case f.rZ.Relative:case f.rZ.RelativeBilateral:return r}},...t})}function v(t){const e=t=>t.inputUnitInfos.length.unit;return new u({name:"distance",actual:i.r7,parse:(0,r.hw)({createQuantity:(t,n)=>(0,i.d_)(Math.max(t,0),e(n))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,n)=>n.formatters.scalar((0,i.kM)(t,e(n))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...t})}function _(t){return v({format:(t,e)=>e.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0,...t})}function b(t){return v({...t})}function x(t){return v({...t,parse:(0,r.hw)({createQuantity:(t,e)=>(0,i.d_)(t,(t=>t.inputUnitInfos.length.unit)(e))}),format:(t,e)=>e.formatters.lengthRelative(t)})}function w(t){return new h(t)}function M(t){return new m(t)}function S(t){return new g(t)}function C(t){return P("scale",{name:"scale",actual:null,parse:(0,r.hw)({createQuantity:t=>(0,i.LF)(Math.abs(t))}),...t})}function T(t){const e=t=>t.inputUnitInfos.area.unit;return new u({name:"area",actual:i.iT,parse:(0,r.hw)({createQuantity:(t,n)=>(0,i.gT)(t,e(n))}),format:(t,e)=>e.formatters.area(t),formatForInputMode:(t,n)=>n.formatters.scalar((0,i.kM)(t,e(n))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...t})}function k(t){return new u({name:"x",actual:i.IV,parse:r.L5,format:(t,e)=>e.formatters.longitudeDecimalDegrees(t),formatForInputMode:t=>(0,r.zX)(t),suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.longitude,...t})}function E(t){return new u({name:"y",actual:i.IV,parse:r.A3,format:(t,e)=>e.formatters.latitudeDecimalDegrees(t),formatForInputMode:t=>(0,r.oZ)(t),suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.latitude,...t})}function $(t){return P("x",{name:"x",...t})}function A(t){return P("y",{name:"y",...t})}function P(t,e){return new u({actual:(0,i.LF)(0),parse:(0,r.hw)({createQuantity:t=>(0,i.LF)(t)}),format:(t,e)=>e.formatters.scalar(t),formatForInputMode:(t,e)=>e.formatters.scalar(t),title:e=>e.messages.sketch[t],...e})}(0,o._)([(0,l.MZ)()],g.prototype,"precision",void 0),g=(0,o._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldSize")],g)},49634:function(t,e,n){"use strict";n.d(e,{A3:function(){return O},D5:function(){return k},GC:function(){return d},L5:function(){return R},Nr:function(){return A},X3:function(){return I},hw:function(){return T},m6:function(){return L},oZ:function(){return _},zX:function(){return v}});var i=n(16691),r=n(88226),o=n(56275),s=n(6338),a=n(2900),l=n(99675);const c=1,u=6;function d(t,e){return{angleRelative:h,direction:p,directionRelative:f,directionRelativeBilateral:m,latitudeDecimalDegrees:y,longitudeDecimalDegrees:g,area:(n,i)=>(0,r.Jd)(t,n,i??e.area),length:(n,i,o)=>(0,r.ix)(t,n,i??e.length,o),lengthRelative:(n,i)=>(0,r.yh)(t,n,i??e.length),totalLength:(n,i)=>(0,r.ix)(t,n,i??e.length),verticalLength:(n,i)=>(0,r.Oo)(t,n,i??e.verticalLength),verticalLengthRelative:(n,i)=>(0,r.OM)(t,n,i??e.verticalLength),percentage:w,scalar:S,scale:M}}function h(t){return(0,a.ZV)(t,{signDisplay:"exceptZero",...C(c)})}function p(t){return(0,r.Nk)(t,t.rotationType,c)}function f(t){const e=(0,l.hF)(t);return(0,a.ZV)(e,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:e>0?"never":"exceptZero",...C(c)})}function m(t){return(0,r.Nk)(t,t.rotationType,c)}function g(t){return b(t,V)}function y(t){return b(t,N)}function v(t){return x(t,V)}function _(t){return x(t,N)}function b(t,e){return(0,r.Nk)((0,o.kM)(t,"degrees"),"geographic",u,e,!1)}function x(t,e){const n=e.normalize((0,o.kM)(t,"degrees").value,void 0,!1);return S((0,o.LF)(n),u)}function w(t){return(0,a.ZV)(t.value,{style:"percent"})}function M(t){return(0,a.ZV)(t,{style:"percent",maximumFractionDigits:0})}function S(t,e){return(0,a.ZV)(t.value,C(e))}function C(t){return{minimumFractionDigits:t,maximumFractionDigits:t}}function T({createQuantity:t,sanitize:e}){return(n,i)=>{if(null==n)return null;e&&(n=e(n));const r=(0,a.$J)(n);return null==r?null:t(r,i)}}function k(t){return t.replaceAll(/[*^~]/g,"")}const E=t=>{let e=`[-+]?[0-9${t.thousands}]+`;return""!==t.decimal&&(e+=`${t.decimal}[0-9]+`),new RegExp(`^(${e}\\s*)${t.separator}(\\s*${e})$`,"i")},$=[];for(const t of[",","\\|","\\s+"])for(const e of["\\.",",",""])for(const n of["",",","\\.","","\\s+"])t!==e&&t!==n&&e!==n&&$.push({separator:t,decimal:e,thousands:n,pattern:E({decimal:e,thousands:n,separator:t})});function A(t){for(const{decimal:e,thousands:n,pattern:i}of $){i.lastIndex=0;const r=t.match(i);if(!r)continue;const s=(0,a.$J)(P(r[1],e,n)),l=(0,a.$J)(P(r[2],e,n));if(null!=s&&null!=l)return{x:(0,o.LF)(s),y:(0,o.LF)(l)}}return null}function P(t,e,n){let i=t.replaceAll(/[\s+]/g,"");return""!==n&&(i=i.replaceAll(n,"")),""!==e&&(i=i.replaceAll(e,".")),i}function I(t){if(!t||null!=(0,a.$J)(t)||!(0,s.s1)())return null;const e=(0,s.o6)(t),n=L(e?.latitude),i=L(e?.longitude);return null!=i&&null!=n?{latitude:n,longitude:i}:null}function R(t){return L((0,s.mT)(t))}function O(t){return L((0,s.ts)(t))}function L(t){return null!=t?(0,o.Wq)(t,"degrees","geographic"):null}const V=new i.hr(-180,180),N=new i.hr(-90,90)},90858:function(t,e,n){"use strict";n.d(e,{w:function(){return a}});var i=n(53804),r=n(83525),o=n(23502),s=(n(58941),n(40633),n(13798),n(65953));let a=class extends r.A{constructor(t){super(t),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter((t=>t.visible&&!t.readOnly))}clearInputValues(){this.allFields.forEach((t=>t.clearInputValue()))}};(0,i._)([(0,o.MZ)()],a.prototype,"sketchOptions",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"visibleElements",null),(0,i._)([(0,o.MZ)()],a.prototype,"helpMessage",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"viewType",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"allFields",null),(0,i._)([(0,o.MZ)()],a.prototype,"editableFields",null),a=(0,i._)([(0,s.$)("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],a)},73919:function(t,e,n){"use strict";n.d(e,{B:function(){return d}});var i=n(53804),r=n(56275),o=n(23502),s=(n(58941),n(40633),n(13798),n(65953)),a=n(74471),l=n(87265),c=n(49634),u=n(99368);const d=t=>{let e=class extends t{constructor(){super(...arguments),this.longitude=(0,l.em)(),this.latitude=(0,l.fL)(),this.x=(0,l.Hw)(),this.y=(0,l.uf)(),this.elevation=(0,l.S3)(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,e=t?.spatialReference){if(this.geographic=!!e&&(0,u.yF)(e),null==t)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const e=(0,a.QP)(t,h);this._setActualLonLat((0,c.m6)(e?.[0]),(0,c.m6)(e?.[1]))}else this._setActualXY((0,r.LF)(t.x),(0,r.LF)(t.y))}_setActualLonLat(t,e){this.longitude.actual=t,this.latitude.actual=e}_setActualXY(t,e){this.x.actual=t,this.y.actual=e}};return(0,i._)([(0,o.MZ)()],e.prototype,"geographic",void 0),(0,i._)([(0,o.MZ)()],e.prototype,"effectiveX",null),(0,i._)([(0,o.MZ)()],e.prototype,"effectiveY",null),(0,i._)([(0,o.MZ)()],e.prototype,"key",null),e=(0,i._)([(0,s.$)("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],e),e},h=[0,0]},24148:function(t,e,n){"use strict";n.d(e,{sZ:function(){return jt},wG:function(){return Ht},mu:function(){return Zt},A:function(){return Vt},HA:function(){return Bt},IA:function(){return Dt},Ue:function(){return Nt}});var i=n(77472),r=n(61226),o=n(15774),s=n(56275),a=n(28181),l=n(62938),c=n(20551),u=n(32501),d=n(6338),h=(n(45532),n(36405)),p=n(67376),f=n(57652),m=n(1644),g=n(37578),y=n(53804),v=n(48996),_=n(40212),b=n(95929),x=n(13520),w=n(23502),M=(n(58941),n(40633),n(13798),n(65953)),S=n(93839);const C="esri-tooltip",T=`${C}-content`,k=`${C}-content--input`,E=`${C}-content__header`,$=`${C}-content__header__spacer`,A=`${C}-content__header__actions`,P=`${C}-draw-header-actions`,I=`${C}-table`,R=`${C}-help-message`,O=`${C}-help-message__text`,L=`${C}-help-message__icon`;n(39819);var V=n(31267),N=n(10362),D=n(49146);const Z=`${C}-field`,G={base:Z,inputMode:`${Z}--input`,title:`${Z}__title`,value:`${Z}__value`};let z=class extends V.A{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return(0,D.K)("div",{class:this.classes({[G.base]:!0,[G.inputMode]:"input"===this.mode})},(0,D.K)("div",{class:G.title,key:"title"},this.title),(0,D.K)("div",{class:G.value,key:"value"},this.value))}};(0,y._)([(0,w.MZ)()],z.prototype,"hidden",void 0),(0,y._)([(0,w.MZ)()],z.prototype,"mode",void 0),(0,y._)([(0,w.MZ)()],z.prototype,"title",void 0),(0,y._)([(0,w.MZ)()],z.prototype,"value",void 0),z=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.components.TooltipField")],z);const U={base:`${C}-value-by-value`};let F=class extends V.A{constructor(){super(...arguments),this.divider=""}render(){return(0,D.K)("div",{class:U.base},(0,D.K)("span",null,this.left),(0,D.K)("span",null,this.divider),(0,D.K)("span",null,this.right))}};(0,y._)([(0,w.MZ)()],F.prototype,"left",void 0),(0,y._)([(0,w.MZ)()],F.prototype,"divider",void 0),(0,y._)([(0,w.MZ)()],F.prototype,"right",void 0),F=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.components.ValueByValue")],F);var H=n(84016),j=n(7213),B=n(60539),W=n(74087),Y=n(15999),q=n(76722),K=n(49634),X=n(28754),Q=n(90357);const J=Symbol("dragHandles");let tt=class extends V.A{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode="feedback",this._getFormatters=(0,j.B)(K.GC),this._onHeaderPointerDown=t=>{const e=t.target;e instanceof HTMLElement&&"calcite-button"!==e?.tagName?.toLowerCase()&&(this.removeHandles(J),e.setPointerCapture(t.pointerId),this.tooltip.onDragStart(t.clientX,t.clientY),this.addHandles([(0,_.on)(e,"pointermove",(({clientX:t,clientY:e})=>{this.tooltip.onDrag(t,e)})),(0,_.on)(e,["pointerup","pointercancel"],(n=>{this.removeHandles(J),e.releasePointerCapture(t.pointerId),this.tooltip.onDragEnd()})),(0,_.on)(e,"touchstart",(t=>t.preventDefault()))],J))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit("discard"),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(t,e)=>{if(this.destroyed)return;if(this.tooltip.emit("commit",{type:e}),"commit-and-exit"===e)return void this.exitInputMode();if("commit-on-blur"===e)return;const n=this._getFocusableElements(),i=n.length,r=n.indexOf(t);if(-1===r)return void this.exitInputMode();const o=((r+("commit-and-next"===e?1:-1))%i+i)%i;et(n.at(o))},this._onKeyDown=t=>{switch(t.code){case g.ac.next:return this._onNextKey(t);case g.ac.discard:return t.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){const{displayUnits:t}=this.info.sketchOptions.values,e=(0,q.c)(this.tooltip.view);return{length:t.length??e,verticalLength:t.verticalLength??e,area:t.area??e}}get _inputUnitInfos(){const t=this._messagesUnits,e=e=>({unit:e,abbreviation:(0,Y.Cq)(t,e,"abbr")}),{inputUnits:n}=this.info.sketchOptions.values,i=(0,q.c)(this.tooltip.view),r=n.length??i,o=n.verticalLength??i,s=n.area??i;return{length:e((0,l.wL)(r)),verticalLength:e((0,l.m5)(o)),area:e((0,l.tW)(s)),angle:e("degrees")}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){const{visibleElements:t}=this.info.sketchOptions.tooltips,e=this._renderedContent,n=this._renderedActions,i=this._renderedHelpMessage,r=e.length>0,o=r||!!i,s="input"===this.mode;return(0,D.K)("div",{class:(0,N.Ly)(T,s&&k),onkeydown:this._onKeyDown,tabIndex:-1},s&&o&&t.header?(0,D.K)("div",{class:E,"data-testid":"tooltip-header",key:"header",onpointerdown:this._onHeaderPointerDown},(0,D.K)("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),n.length>0?(0,D.K)(D.w,null,(0,D.K)("div",{class:$,key:"spacer"}),(0,D.K)("div",{class:A,key:"actions"},n)):null):null,r?(0,D.K)("div",{class:I,key:"content"},...e):null,i)}destroy(){this._focusAbortController.abort(),this._transitionInfo?.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return(0,X.W)({button:()=>n.e(2974).then(n.bind(n,45399)),icon:()=>n.e(2525).then(n.bind(n,50855)),input:()=>n.e(2498).then(n.bind(n,21512))})}async enterInputMode(t,e){try{await this._transitionTo("input",e),await this._focusField(t)}catch(t){(0,B.jH)(t)}}async exitInputMode({focusOnView:t=!0}={}){try{const{container:e,info:n}=this;n.clearInputValues();const i=t?e?.closest(".esri-view")?.querySelector(".esri-view-surface"):null;await this._transitionTo("feedback"),i instanceof HTMLElement&&i.focus()}catch(t){(0,B.jH)(t)}}_onNextKey(t){const e=this._getFocusableElements(),n=e.at(0),i=e.at(-1);n&&i&&(t.shiftKey?document.activeElement===n&&(t.preventDefault(),t.stopPropagation(),et(i)):document.activeElement===i&&(t.preventDefault(),t.stopPropagation(),et(n)))}get _renderedContent(){return nt(this._renderContent())}get _renderedActions(){return nt(this._renderActions())}get _renderedHelpMessage(){const{sketchOptions:t,visibleElements:e}=this.info;if(!e.helpMessage)return null;const n=t.tooltips.helpMessage??this._defaultHelpMessage;if(!n)return null;const i=t.tooltips.helpMessageIcon??"information";return(0,D.K)("div",{class:R,key:"help-message"},i?(0,D.K)("calcite-icon",{class:L,icon:i,scale:"s"}):null,(0,D.K)("div",{class:O},n))}get _defaultHelpMessage(){const{helpMessage:t,viewType:e}=this.info;if(null==t)return null;const n="3d"===e?"helpMessages3d":"helpMessages2d";return this._messagesTooltip?.sketch?.[n]?.[t]}async _focusField(t){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;const{signal:e}=this._focusAbortController;await this._waitForInputs(),(0,B.Te)(e);const n=this._getFocusableInputs(),i=t?n.find((e=>e.getAttribute("data-field-name")===t)):n.at(0);await et(i)}async _transitionTo(t,e){if(this._mode===t&&!this._transitionInfo)return;if(this._transitionInfo?.mode===t)return this._transitionInfo.transition.finished;this._transitionInfo?.transition.skipTransition();const n=async()=>{this.destroyed||(this._mode=t,await(0,W.NO)(),this.destroyed||(this.renderNow(),await(0,W.NO)(),this.destroyed||e?.()))};if(!this.domNode?.firstChild||!document.startViewTransition||(0,H.O)())return void await n();this.autoRenderingEnabled=!1;const i=this._transitionInfo={transition:document.startViewTransition((async()=>{this.destroyed||i!==this._transitionInfo||(this.autoRenderingEnabled=!0,await n())})),mode:t};try{await i.transition.finished}finally{i===this._transitionInfo&&(this._transitionInfo=null)}}async _waitForInputs(){const t=()=>Array.from(this.domNode?.querySelectorAll("calcite-input")??[]);for(;0===t().length;)await(0,B.Pl)(it);await(0,W.$m)()}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll("calcite-input:not([read-only]):not([disabled])")??[])}_getFocusableElements(){const t=this.domNode?.querySelector(`.${P}`);return[...Array.from(t?.querySelectorAll(`.${A} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};async function et(t){await(t?.setFocus())}function nt(t){return(Array.isArray(t)?t:[t]).flat(10).filter((t=>!!t))}(0,y._)([(0,Q.G)("esri/core/t9n/Units"),(0,w.MZ)()],tt.prototype,"_messagesUnits",void 0),(0,y._)([(0,Q.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,w.MZ)()],tt.prototype,"_messagesTooltip",void 0),(0,y._)([(0,w.MZ)()],tt.prototype,"info",void 0),(0,y._)([(0,w.MZ)()],tt.prototype,"tooltip",void 0),(0,y._)([(0,w.MZ)()],tt.prototype,"_mode",void 0),(0,y._)([(0,w.MZ)()],tt.prototype,"mode",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_displayUnits",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_inputUnitInfos",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_formatters",null),(0,y._)([(0,w.MZ)()],tt.prototype,"fieldContext",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_renderedContent",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_renderedActions",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_renderedHelpMessage",null),(0,y._)([(0,w.MZ)()],tt.prototype,"_defaultHelpMessage",null),tt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContent")],tt);const it=20;let rt=class extends tt{_renderContent(){const{area:t,radius:e,xSize:n,ySize:i,visibleElements:r}=this.info,o=this._messagesTooltip.sketch,s=this._formatters;return(0,D.K)(D.w,null,r.radius&&null!=e?(0,D.K)(z,{title:o.radius,value:s.length(e)}):null,r.size&&null!=n&&null!=i?(0,D.K)(z,{title:o.size,value:(0,D.K)(F,{left:s.length(n),right:s.length(i)})}):null,r.area?(0,D.K)(z,{title:o.area,value:s.area(t)}):null)}};rt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],rt);const ot=`${C}-editable-field`,st={base:ot,inputMode:`${ot}--input`,feedbackMode:`${ot}--feedback`,readOnly:`${ot}--read-only`,locked:`${ot}--locked`,title:`${ot}__title`,value:`${ot}__value`,valueContent:`${ot}__value__content`,valueContentReadOnly:`${ot}__value__content--read-only`,lockIcon:`${ot}__lock-icon`,input:`${ot}__input`,inputSuffix:`${ot}__input-suffix`,button:`${ot}__button`},at="lock";let lt=class extends V.A{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=t=>{this._lock=t},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=t=>{t.key===g.ac.discard&&"input"===this.mode&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=t=>{const e=this._input;if(e)switch(t.key){case g.ac.commit:return this.field.onCommit("commit-and-exit",e,this.context);case g.ac.next:{t.preventDefault(),t.stopPropagation();const n=t.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(n,e,this.context)}}},this._onInput=t=>{this.field.onInput(t.target.value)},this._onInputBlur=t=>{const e=this._input;e&&t.relatedTarget!==this._lock&&this.field.onCommit("commit-on-blur",e,this.context)},this._selectText=()=>{const t=()=>{this._input===document.activeElement&&this._input?.selectText()};t(),(0,W.$m)().then(t)},this._onAfterCreate=t=>{this._input=t,t.addEventListener("paste",this._onPaste),t.addEventListener("beforeinput",this._onBeforeInput)},this._onAfterRemoved=t=>{t.removeEventListener("paste",this._onPaste),t.removeEventListener("beforeinput",this._onBeforeInput)},this._onPaste=t=>{const e=t.clipboardData?.getData("text");e&&null!=this.field.parse(e,this.context)&&(t.stopPropagation(),this.field.onInput(e))},this._onBeforeInput=t=>{("historyUndo"===t.inputType||"historyRedo"===t.inputType)&&!this.field.dirty&&t.preventDefault()}}initialize(){this.addHandles((0,a.watch)((()=>this._rawDisplayValue),(()=>{const{committed:t,inputValue:e}=this.field;t||e||this._input!==document.activeElement||this._selectText()})))}loadDependencies(){return(0,X.W)({button:()=>n.e(2974).then(n.bind(n,45399)),icon:()=>n.e(2525).then(n.bind(n,50855)),input:()=>n.e(2498).then(n.bind(n,21512))})}render(){const{field:t,mode:e}=this,n="input"===e,{locked:i,readOnly:r}=t;return(0,D.K)("div",{class:this.classes({[st.base]:!0,[st.feedbackMode]:"feedback"===e,[st.inputMode]:"input"===e,[st.locked]:i,[st.readOnly]:r})},(0,D.K)("div",{class:st.title,key:"title"},this._title),(0,D.K)("div",{class:st.value,key:"value",onkeydown:this._onKeyDown},n?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||ct}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){const{title:t}=this.field;return"string"==typeof t?t:t(this.context)}_renderValueFeedbackMode(){return(0,D.K)(D.w,null,(0,D.K)("div",{class:st.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&"input"!==this.mode?(0,D.K)("calcite-icon",{class:st.lockIcon,icon:at,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return(0,D.K)("div",{class:this.classes(st.valueContent,st.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){const{field:t}=this,{name:e,invalid:n,locked:i}=t,r=this.context?.messages.sketch??{},o=i?r.unlockConstraint:r.lockConstraint;return(0,D.K)(D.w,null,(0,D.K)("calcite-input",{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:st.input,"data-field-name":e,"data-testid":`tooltip-field-${e}`,key:"input",onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:n?"invalid":"idle",type:"text",value:this._rawDisplayValue??ct,onCalciteInputInput:this._onInput}),(0,D.K)("div",{class:st.inputSuffix,key:"suffix"},this._suffix),t.lockable?(0,D.K)("calcite-button",{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:"center",appearance:"transparent",class:st.button,"data-testid":`tooltip-field-${e}-lock`,iconStart:i?at:"unlock",key:"lock",kind:"neutral",label:o,onclick:this._onLockClick,scale:"s",tabIndex:-1,title:o}):(0,D.K)("div",{key:"lock-empty"}))}};(0,y._)([(0,w.MZ)()],lt.prototype,"field",void 0),(0,y._)([(0,w.MZ)()],lt.prototype,"context",void 0),(0,y._)([(0,w.MZ)()],lt.prototype,"mode",void 0),(0,y._)([(0,w.MZ)()],lt.prototype,"_input",void 0),(0,y._)([(0,w.MZ)()],lt.prototype,"_lock",void 0),(0,y._)([(0,w.MZ)()],lt.prototype,"_formattedValue",null),(0,y._)([(0,w.MZ)()],lt.prototype,"_rawDisplayValue",null),(0,y._)([(0,w.MZ)()],lt.prototype,"_suffix",null),(0,y._)([(0,w.MZ)()],lt.prototype,"_title",null),lt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.components.TooltipEditableField")],lt);const ct="";function ut(t){const e=t.fields.filter((t=>!0===t?.visible));return 0===e.length?null:(0,D.K)(D.w,null,e.map((e=>(0,D.K)(lt,{context:t.context,field:e,key:e.id,mode:t.mode}))))}let dt=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,D.K)(ut,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:n})}};dt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],dt);let ht=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{elevation:i,visibleElements:r}=e;return(0,D.K)(ut,{context:t,fields:[r.coordinates?e.effectiveX:void 0,r.coordinates?e.effectiveY:void 0,r.elevation?i:void 0],mode:n})}};ht=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],ht);const pt={absolute:"absolute-direction",relative:"relative-direction"};let ft=class extends V.A{constructor(t){super(t),this.visibleElements={}}render(){return(0,D.K)("div",{class:P},this._isElementVisible("direction")?(0,D.K)(mt,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return(0,X.W)({button:()=>n.e(2974).then(n.bind(n,45399)),dropdown:()=>n.e(7209).then(n.bind(n,94794)),"dropdown-item":()=>n.e(2547).then(n.bind(n,79383)),"dropdown-group":()=>n.e(951).then(n.bind(n,96361))})}_isElementVisible(t){return this.visibleElements?.[t]??this.sketchOptions.tooltips.visibleElements[t]}};function mt(t){const{directionMode:e}=t.sketchOptions.values,n=t.messages?.sketch,i=n?.directionModeSelect?.title,r="absolute",o="relative";return(0,D.K)("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:e=>{const n=e.target.selectedItems?.[0]?.getAttribute("data-mode");t.sketchOptions.values.directionMode=n??"absolute"}},(0,D.K)("calcite-button",{alignment:"end",appearance:"transparent",iconStart:pt[e],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),(0,D.K)("calcite-dropdown-group",{selectionMode:"single"},(0,D.K)("calcite-dropdown-item",{"data-mode":o,"data-testid":"tooltip-direction-mode-relative",iconStart:pt.relative,key:"relative",selected:e===o},n?.directionModeSelect?.relative),(0,D.K)("calcite-dropdown-item",{"data-mode":r,"data-testid":"tooltip-direction-mode-absolute",iconStart:pt.absolute,key:"absolute",selected:e===r},n?.directionModeSelect?.absolute)))}(0,y._)([(0,Q.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,w.MZ)()],ft.prototype,"messages",void 0),(0,y._)([(0,w.MZ)()],ft.prototype,"sketchOptions",void 0),(0,y._)([(0,w.MZ)()],ft.prototype,"visibleElements",void 0),ft=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.components.DrawHeaderActions")],ft);let gt=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{xyMode:i,visibleElements:r}=e;return(0,D.K)(ut,{context:t,fields:[..."direction-distance"===i?[r.direction?e.direction:void 0,r.distance?e.distance:void 0]:[r.coordinates?e.effectiveX:void 0,r.coordinates?e.effectiveY:void 0],r.elevation?e.elevation:void 0,r.area?e.area:void 0],mode:n})}_renderActions(){const{xyMode:t,sketchOptions:e}=this.info;return(0,D.K)(ft,{sketchOptions:e,visibleElements:{direction:"direction-distance"===t}})}};gt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],gt);let yt=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{xyMode:i,visibleElements:r}=e;return(0,D.K)(ut,{context:t,fields:[..."direction-distance"===i?[r.direction?e.direction:void 0,r.distance?e.distance:void 0]:[r.coordinates?e.effectiveX:void 0,r.coordinates?e.effectiveY:void 0],r.elevation?e.elevation:void 0,r.totalLength?e.totalLength:void 0],mode:n})}_renderActions(){const{xyMode:t,sketchOptions:e}=this.info;return(0,D.K)(ft,{sketchOptions:e,visibleElements:{direction:"direction-distance"===t}})}};yt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],yt);let vt=class extends tt{_renderContent(){const{area:t,xSize:e,ySize:n,visibleElements:i}=this.info,r=this._messagesTooltip.sketch,o=this._formatters;return(0,D.K)(D.w,null,i.size&&null!=e&&null!=n?(0,D.K)(z,{title:r.size,value:(0,D.K)(F,{left:o.length(e),right:o.length(n)})}):null,i.area?(0,D.K)(z,{title:r.area,value:o.area(t)}):null)}};vt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],vt);let _t=class extends tt{_renderContent(){const{angle:t,visibleElements:e}=this.info,n=this._messagesTooltip.sketch;return(0,D.K)(D.w,null,e.rotation?(0,D.K)(z,{title:n.rotation,value:this._formatters.angleRelative(t)}):null)}};_t=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],_t);let bt=class extends tt{_renderContent(){const t=this.info,{visibleElements:e}=t,n=this._messagesTooltip.sketch,i=this._formatters;return(0,D.K)(D.w,null,e.size?(0,D.K)(z,{title:n.size,value:(0,D.K)(F,{left:i.length(t.xSize),right:i.length(t.ySize)})}):null,e.scale?(0,D.K)(z,{title:n.scale,value:(0,D.K)(F,{left:i.scale(t.xScale),right:i.scale(t.yScale)})}):null)}};bt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],bt);let xt=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,D.K)(ut,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0],mode:n})}};xt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],xt);let wt=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,D.K)(ut,{context:t,fields:[i.distance?e.distance:void 0,i.area?e.area:void 0,i.totalLength?e.totalLength:void 0],mode:n})}};wt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],wt);let Mt=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,D.K)(ut,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.area&&"polygon"===e.geometryType?e.area:null,i.totalLength&&"polyline"===e.geometryType?e.totalLength:null],mode:n})}};Mt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],Mt);let St=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,D.K)(ut,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:n})}};St=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],St);let Ct=class extends tt{_renderContent(){const{fieldContext:t,info:e,mode:n}=this,{visibleElements:i}=e;return(0,D.K)(ut,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.size?e.size:void 0],mode:n})}};Ct=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],Ct);let Tt=class extends tt{_renderContent(){const{info:t}=this,{visibleElements:e}=t,n=this._messagesTooltip.sketch,i=this._formatters;return(0,D.K)(D.w,null,e.distance?(0,D.K)(z,{title:n.distance,value:i.length(t.distance)}):null)}};Tt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentTranslate")],Tt);let kt=class extends tt{_renderContent(){const{distance:t,elevation:e,area:n,totalLength:i,visibleElements:r}=this.info,o=this._messagesTooltip.sketch,s=this._formatters;return(0,D.K)(D.w,null,r.distance?(0,D.K)(z,{title:o.distance,value:s.length(t)}):null,r.elevation&&null!=e?.actual?(0,D.K)(z,{title:o.elevation,value:s.verticalLength(e.actual)}):null,r.area&&null!=n?(0,D.K)(z,{title:o.area,value:s.area(n)}):null,r.totalLength&&null!=i?(0,D.K)(z,{title:o.totalLength,value:s.length(i)}):null)}};kt=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],kt);let Et=class extends tt{_renderContent(){const{info:t}=this,{visibleElements:e}=t,n=this._messagesTooltip.sketch,i=this._formatters;return(0,D.K)(D.w,null,e.distance?(0,D.K)(z,{title:n.distance,value:i.length(t.distance)}):null)}};Et=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],Et);let $t=class extends tt{_renderContent(){const{info:t}=this,{visibleElements:e}=t,n=this._messagesTooltip.sketch;return(0,D.K)(D.w,null,e.distance?(0,D.K)(z,{title:n.distance,value:this._formatters.verticalLengthRelative(t.distance)}):null)}};$t=(0,y._)([(0,M.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],$t);const At={base:`${C}`,ltr:`${C}--ltr`,rtl:`${C}--rtl`,debug:`${C}--debug`};let Pt=class extends v.A.EventedAccessor{constructor(t){super(t),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement("div"),this.debug=!1,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){const{outerContainer:t}=this;this.addHandles([(0,a.watch)((()=>this.view.overlay?.surface),(e=>{t.remove(),e?.appendChild(t),this._rtl=(0,N.V8)(e)}),a.pc),(0,a.watch)((()=>this.info),((e,n)=>{if(null!=this.content&&null!=e&&null!=n&&e.type===n.type)this.content.info=e;else{(0,b.pR)(this.content);const n=function(t,e){if(null==e)return null;const n=document.createElement("div");switch(e.type){case"draw-point":return new ht({tooltip:t,info:e,container:n});case"draw-polygon":return new gt({tooltip:t,info:e,container:n});case"draw-polyline":return new yt({tooltip:t,info:e,container:n});case"draw-mesh":return new dt({tooltip:t,info:e,container:n});case"draw-rectangle":return new vt({tooltip:t,info:e,container:n});case"draw-circle":return new rt({tooltip:t,info:e,container:n});case"extent-rotate":return new _t({tooltip:t,info:e,container:n});case"extent-scale":return new bt({tooltip:t,info:e,container:n});case"move-point":return new xt({tooltip:t,info:e,container:n});case"selected-vertex":return new Mt({tooltip:t,info:e,container:n});case"transform-point":return new Ct({tooltip:t,info:e,container:n});case"transform-mesh":return new St({tooltip:t,info:e,container:n});case"translate":return new Tt({tooltip:t,info:e,container:n});case"translate-vertex":return new kt({tooltip:t,info:e,container:n});case"translate-z":return new $t({tooltip:t,info:e,container:n});case"translate-xy":return new Et({tooltip:t,info:e,container:n});case"reshape-edge-offset":return new wt({tooltip:t,info:e,container:n})}}(this,e);n?(this.content=n,n.container&&t.appendChild(n.container),this.exitInputMode()):this.content=null}}),a.pc),(0,a.watch)((()=>({container:this.outerContainer,style:this._outerContainerStyle})),(({container:t,style:e})=>{Object.assign(t.style,e)}),a.Vh),(0,a.watch)((()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug})),(({outerContainer:t,placement:e,effectiveOffset:n,rtl:i,debug:r})=>{const{classList:o}=t;o.add(At.base),o.toggle(At.rtl,i),o.toggle(At.ltr,!i),o.toggle(At.debug,r),this.outerContainer.style.setProperty("--offset",`${n}px`),(0,S.hY)(t),function({classList:t},e){It.forEach((e=>t.remove(e))),t.add(Rt(e))}(t,e)}),a.Vh),(0,a.when)((()=>"feedback"===this.mode),(()=>{this.position=null,this._clearOverride("effectivePlacement")}),a.OH),(0,_.on)(this.outerContainer,"paste",(t=>{this.emit("paste",t)})),(0,_.on)(this.outerContainer,["focusin","focusout"],(()=>{setTimeout((()=>{this._focused=this.content?.container?.contains(document.activeElement)??!1}))}))])}destroy(){this.info=null,this.content=(0,b.pR)(this.content),this.outerContainer.remove()}get mode(){return this.content?.mode??"feedback"}get focused(){return this._focused}get visible(){return"none"!==this._outerContainerStyle.display}get contentContainer(){return this.content?.container}get effectivePlacement(){const t=this.options?.placement;return"auto"===t?"bottom-end":t??"bottom-end"}get _screenPoint(){const{inputManager:t}=this.view;return t?.multiTouchActive?null:t?.latestPointerLocation}get _effectiveOffset(){return this.options?.offset??20}get _outerContainerStyle(){const t=this.position??this._screenPoint;return this._lastPosition=(0,x.y8)(t),null!=t&&null!=this.content?{display:"block",transform:`translate(${Math.round(t.x)}px, ${Math.round(t.y)}px)`}:{display:"none",transform:"none"}}clear(){this.info=null}async enterInputMode(t){const e=this.position??this._lastPosition??this._screenPoint,n=this.position=(0,x.y8)(e),{effectivePlacement:i}=this;this._override("effectivePlacement",i),await(this.content?.enterInputMode(t,(()=>{n&&(this.position=function(t,e,n,i){if(!t||!i.container)return e;const r=t.getBoundingClientRect(),{left:o,top:s}=i.container.getBoundingClientRect();let{x:a,y:l}=e;const c=r.left-o-n;c<0&&(a-=c);const u=r.right-o+n-i.width;u>0&&(a-=u);const d=r.top-s-n;d<0&&(l-=d);const h=r.bottom-s+n-i.height;return h>0&&(l-=h),(0,x.tc)(a,l)}(this.contentContainer,n,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))})))}async exitInputMode(t){await(this.content?.exitInputMode(t))}onDragStart(t,e){this._prevXY=[t,e]}onDrag(t,e){const n=t-this._prevXY[0],i=e-this._prevXY[1];this._prevXY=[t,e];const{position:r}=this;if(r){const{view:o}=this,s=t-o.position[0],a=e-o.position[1];if(s<0||s>o.width||a<0||a>o.height-16)return;this.position=(0,x.tc)(r.x+n,r.y+i)}}onDragEnd(){this._prevXY=[0,0]}};(0,y._)([(0,w.MZ)({nonNullable:!0})],Pt.prototype,"view",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"info",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"options",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"position",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"content",void 0),(0,y._)([(0,w.MZ)({readOnly:!0})],Pt.prototype,"mode",null),(0,y._)([(0,w.MZ)()],Pt.prototype,"_focused",void 0),(0,y._)([(0,w.MZ)({readOnly:!0})],Pt.prototype,"focused",null),(0,y._)([(0,w.MZ)({readOnly:!0})],Pt.prototype,"outerContainer",void 0),(0,y._)([(0,w.MZ)({readOnly:!0})],Pt.prototype,"contentContainer",null),(0,y._)([(0,w.MZ)({readOnly:!0})],Pt.prototype,"effectivePlacement",null),(0,y._)([(0,w.MZ)()],Pt.prototype,"debug",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"_lastPosition",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"_screenPoint",null),(0,y._)([(0,w.MZ)()],Pt.prototype,"_rtl",void 0),(0,y._)([(0,w.MZ)()],Pt.prototype,"_effectiveOffset",null),(0,y._)([(0,w.MZ)()],Pt.prototype,"_outerContainerStyle",null),Pt=(0,y._)([(0,M.$)("esri.views.interactive.Tooltip")],Pt);const It=["top","bottom","leading","trailing"].flatMap((t=>[Rt(`${t}-start`),Rt(t),Rt(`${t}-end`)]));function Rt(t){return`${At.base}--${t}`}const Ot=Pt;var Lt=n(99675);function Vt(t){const e=new Ot(t());return e.addHandles((0,a.watch)((()=>t()),(({view:t,options:n,info:i})=>{e.view=t,void 0!==n&&(e.options=n),void 0!==i&&(e.info=i)}))),e}function Nt(t,e){const n=(0,p.Hq)(e.vertexSpace),{scale:i,orientation:r}=t,{transform:o}=e,a=function(t){if(!t)return 0;const e=zt(t.rotationAxis);return null!=e?e*t.rotationAngle:null}(o);n&&null!=a?(r.actual=(0,s.Wq)(a,"degrees","arithmetic"),r.visible=!0):(r.actual=null,r.visible=!1),n?(i.actual=(0,s.LF)(Ft(o)),i.visible=!0):(i.actual=null,i.visible=!1)}function Dt(t,e,n){if(!e||!(0,p.Hq)(e.vertexSpace))return;const i=e.transform??=new h.A;(function(t,e,n){const i=(0,Lt.Ef)(t.orientation.actual),r=zt(e.rotationAxis);if(null==i||null==r)return;const o=e.rotationAngle,s=i*r,a=(i-o)*r;o!==s&&(n?.onRotateStart(0),e.rotationAngle=s,n?.onRotate(a),n?.onRotateStop(a))})(t,i,n),function(t,e,n){const i=t.scale.actual?.value,r=Ft(e);if(null==i||i===r)return;const{scale:o}=e;let s;if(0===r)s=(0,u.o8)(u.Un);else{const t=i/r;s=(0,c.h)((0,u.vt)(),o,t)}n?.onScaleStart(o[0],o[1],o[2]),e.scale=s,n?.onScale(s[0],s[1],s[2]),n?.onScaleStop(s[0],s[1],s[2])}(t,i,n)}function Zt(t,e){const{x:n,y:i,z:r}=e,{x:a,y:c,z:u}=function(t,e){let n,i;t.geographic?(n=(0,Lt.hF)(t.longitude.actual),i=(0,Lt.hF)(t.latitude.actual),(0,f.K8)(e)&&(null!=n&&null!=i?[n,i]=(0,m.je)(n,i,Gt):null!=n?n=(0,m.je)(n,0,Gt)[0]:null!=i&&(i=(0,m.je)(0,i,Gt)[1]))):(n=t.x.actual?.value,i=t.y.actual?.value);const r=t.elevation.actual,o=(0,l.mq)(e);return{x:n,y:i,z:null!=o&&null!=r?(0,s.l3)(r,o):void 0}}(t,e.spatialReference);return{dx:null==a||(0,o.Io)(a,n)?0:a-n,dy:null==c||(0,o.Io)(c,i)?0:c-i,dz:null==u||null==r||(0,o.Io)(u,r)?0:u-r}}const Gt=[0,0];function zt(t){return(0,c.H)(t,u.Cb)?1:(0,c.H)(t,Ut)?-1:null}const Ut=(0,c.v)((0,u.vt)(),u.Cb);function Ft(t){return t?Math.max(...t.scale):1}function Ht(t,e){return!("key-down"!==t.type||t.key!==g.ac.enterInputMode||!e||!function(t){const e=t?.sketchOptions;if(!e)return!1;const{inputEnabled:n,visibleElements:i}=e.tooltips;return n&&!0===t.editableFields.some((({name:t})=>"x"===t||"y"===t?i.coordinates:i[t]))}(e.info)||(e.enterInputMode(),t.preventDefault(),t.stopPropagation(),0))}function jt(t,e){let n=null;return(0,r.vE)([t.on("paste",(async r=>{n?.abort(),n=(0,i.UT)((async()=>{(0,d.s1)()||await(0,d.Hh)(),Bt(r,t.info,e)}))})),(0,i.UT)((()=>(0,d.Hh)())),(0,r.hA)((()=>n?.abort()))])}function Bt(t,e,n){if(!e||!("geographic"in e))return;const i=t.clipboardData?.getData("text");if(!i)return;const r=e=>{t.stopPropagation(),t.preventDefault(),n?.onBeforePaste(),e(),n?.onAfterPaste()};if(e.geographic){const t=(0,K.X3)(i);t&&r((()=>{e.longitude.applyValue(t.longitude),e.latitude.applyValue(t.latitude)}))}else{const t=(0,K.Nr)(i);t&&r((()=>{e.x.applyValue(t.x),e.y.applyValue(t.y)}))}}},81197:function(t,e,n){"use strict";var i;n.d(e,{M:function(){return i}}),function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"}(i||(i={}))},48961:function(t,e,n){"use strict";n.d(e,{Bb:function(){return E},W6:function(){return i},mj:function(){return v},nu:function(){return $}});var i,r,o=n(14606),s=(n(58941),n(40633)),a=n(95929),l=n(69739),c=n(7187),u=n(60539),d=n(28181),h=n(85445),p=n(38504),f=n(47558),m=n(16164),g=n(81197),y=n(55213);function v(){return new T.Scheduler}(r=i||(i={})).RESOURCE_CONTROLLER_IMMEDIATE="immediate",r.RESOURCE_CONTROLLER="schedule",r.SLIDE="slide",r.STREAM_DATA_LOADER="stream loader",r.ELEVATION_QUERY="elevation query",r.TERRAIN_SURFACE="terrain",r.SURFACE_GEOMETRY_UPDATES="surface geometry updates",r.LOD_RENDERER="LoD renderer",r.GRAPHICS_CORE="Graphics3D",r.I3S_CONTROLLER="I3S",r.POINT_CLOUD_LAYER="point cloud",r.FEATURE_TILE_FETCHER="feature fetcher",r.OVERLAY="overlay",r.STAGE="stage",r.GRAPHICS_DECONFLICTOR="graphics deconflictor",r.FILTER_VISIBILITY="Graphics3D filter visibility",r.SCALE_VISIBILITY="Graphics3D scale visibility",r.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",r.POINT_OF_INTEREST_FREQUENT="POI frequent",r.POINT_OF_INTEREST_INFREQUENT="POI infrequent",r.LABELER="labeler",r.FEATURE_QUERY_ENGINE="feature query",r.FEATURE_TILE_TREE="feature tile tree",r.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",r.ELEVATION_ALIGNMENT="elevation alignment",r.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene",r.TEXT_TEXTURE_ATLAS="text texture atlas",r.TEXTURE_UNLOAD="texture unload",r.LINE_OF_SIGHT_TOOL="line of sight tool",r.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",r.ELEVATION_PROFILE="elevation profile",r.SNAPPING="snapping",r.SHADOW_ACCUMULATOR="shadow accumulator",r.CLOUDS_GENERATOR="clouds generator",r.MAPVIEW_FETCH_QUEUE="mapview fetch queue",r.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update",r.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue",r[r.NONE=0]="NONE",r[r.TEST_PRIO=1]="TEST_PRIO";const _=new Map([[i.RESOURCE_CONTROLLER_IMMEDIATE,0],[i.RESOURCE_CONTROLLER,4],[i.SLIDE,0],[i.STREAM_DATA_LOADER,0],[i.ELEVATION_QUERY,0],[i.TERRAIN_SURFACE,1],[i.SURFACE_GEOMETRY_UPDATES,1],[i.LOD_RENDERER,2],[i.GRAPHICS_CORE,2],[i.I3S_CONTROLLER,2],[i.POINT_CLOUD_LAYER,2],[i.FEATURE_TILE_FETCHER,2],[i.CLOUDS_GENERATOR,2],[i.OVERLAY,4],[i.STAGE,4],[i.GRAPHICS_DECONFLICTOR,4],[i.FILTER_VISIBILITY,4],[i.SCALE_VISIBILITY,4],[i.FRUSTUM_VISIBILITY,4],[i.POINT_OF_INTEREST_FREQUENT,6],[i.POINT_OF_INTEREST_INFREQUENT,30],[i.LABELER,8],[i.FEATURE_QUERY_ENGINE,8],[i.FEATURE_TILE_TREE,16],[i.FEATURE_TILE_TREE_ACTIVE,0],[i.ELEVATION_ALIGNMENT,12],[i.ELEVATION_ALIGNMENT_SCENE,14],[i.TEXT_TEXTURE_ATLAS,12],[i.TEXTURE_UNLOAD,12],[i.LINE_OF_SIGHT_TOOL,16],[i.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[i.SNAPPING,0],[i.SHADOW_ACCUMULATOR,30],[i.MAPVIEW_FETCH_QUEUE,0],[i.MAPVIEW_LAYERVIEW_UPDATE,2],[i.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,0]]);function b(t){return _.has(t)?_.get(t):"number"==typeof t?t:1}const x=(0,p.l5)(6.5),w=(0,p.l5)(1),M=(0,p.l5)(30),S=(0,p.l5)(1e3/30),C=(0,p.l5)(100);var T,k;!function(t){t.Scheduler=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some((t=>t.needsUpdate))}constructor(){this._updating=(0,h.v)(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new l.A("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=g.M.INTERACTING,this._tasks=new c.A,this._runQueue=new c.A,this._load=0,this._idleStateCallbacks=new c.A,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,d.watch)((()=>m.A.SCHEDULER_LOG_SLOW_TASKS),(t=>this._debug=t),d.Vh);for(const t of Object.keys(i))this.performanceInfo.tasks.set(i[t],new l.A(i[t]))}destroy(){this._tasks.toArray().forEach((t=>t.remove())),this._tasks.clear(),(0,a.xt)(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(t){this._updatingChanged(),t&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask((()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())})))}registerTask(t,n){const i=new e(this,t,n);return this._tasks.push(i),this._updatingChanged(),this.performanceInfo.tasks.has(t)||this.performanceInfo.tasks.set(t,new l.A(t)),i}registerIdleStateCallbacks(t,e){const n={idleBegin:t,idleEnd:e};this._idleStateCallbacks.push(n),this.state===g.M.IDLE&&this._idleUpdatesStartFired&&n.idleBegin();const i=this;return{remove:()=>this._removeIdleStateCallbacks(n),set idleBegin(t){i._idleUpdatesStartFired&&(n.idleEnd(),i._state===g.M.IDLE&&t()),n.idleBegin=t},set idleEnd(t){n.idleEnd=t}}}get load(){return this._load}set state(t){this._state!==t&&(this._state=t,this.state!==g.M.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll((t=>t.idleEnd()))))}get state(){return this._state}updateBudget(t){this._test&&(this._test.usedBudget=0),++this._frameNumber;let e=x,n=t.frameDuration,i=w;switch(this.state){case g.M.IDLE:e=(0,p.l5)(0),n=(0,p.l5)(Math.max(C,t.frameDuration)),i=M;break;case g.M.INTERACTING:n=(0,p.l5)(Math.max(S,t.frameDuration));case g.M.ANIMATING:}return n=(0,p.l5)(n-t.elapsedFrameTime-e),this.state!==g.M.IDLE&&n<w&&!this._forceTask?(this._forceTask=!0,!1):(n=(0,p.l5)(Math.max(n,i)),this._budget.reset(n,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case g.M.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll((t=>t.idleBegin()))),this._runIdle();break;case g.M.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset((0,p.l5)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(t){this._idleUpdatesStartFired&&t.idleEnd(),this._idleStateCallbacks.removeUnordered(t)}removeTask(t){this._tasks.removeUnordered(t),this._runQueue.removeUnordered(t),this._updatingChanged()}_updateTask(t){this._tasks.forAll((e=>{e.name===t&&e.setPriority(t)}))}_getState(t){if(this._runQueue.some((e=>e.name===t)))return k.SCHEDULED;let e=k.IDLE;return this._tasks.forAll((n=>{n.name===t&&n.needsUpdate&&(n.schedulePriority<=1?e=k.READY:e!==k.READY&&(e=k.WAITING))})),e}_getRuntime(t){let e=0;return this._tasks.forAll((n=>{n.name===t&&(e+=n.runtime)})),e}_resetRuntimes(){this._tasks.forAll((t=>t.runtime=0))}_getRunning(){const t=new Map;if(this._tasks.forAll((e=>{e.needsUpdate&&t.set(e.name,(t.get(e.name)||0)+1)})),0===t.size)return null;let e="";return t.forEach(((t,n)=>{e+=t>1?` ${t}x ${n}`:` ${n}`})),e}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const t=this._tasks.reduce(((t,e)=>e.needsUpdate?++t:t),0);this._load=.9*this._load+t*(1-.9)}_schedule(){for(this._runQueue.filterInPlace((t=>!!t.needsUpdate||(t.schedulePriority=t.basePriority,!1))),this._tasks.forAll((t=>{0===t.basePriority&&t.needsUpdate&&!this._runQueue.includes(t)&&t.blockFrame!==this._frameNumber&&this._runQueue.unshift(t)}));0===this._runQueue.length;){let t=!1,e=0;if(this._tasks.forAll((n=>{n.needsUpdate&&0!==n.schedulePriority&&0!==n.basePriority&&n.blockFrame!==this._frameNumber&&(t=!0,e=Math.max(e,n.basePriority),1===n.schedulePriority?(n.schedulePriority=0,this._runQueue.push(n)):--n.schedulePriority)})),!t)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const t=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const e=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===y.G&&(n.blockFrame=this._frameNumber)}catch(t){s.A.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,t),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,i.I3S_CONTROLLER,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const r=this._budget.now()-e;if(n.runtime+=r,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+r),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-t)}}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-t)}_startFrameTaskTimes(){for(const t of Object.keys(i))this._frameTaskTimes.set(i[t],0)}_recordFrameTaskTimes(t){this._frameTaskTimes.forEach(((t,e)=>this.performanceInfo.tasks.get(e).push(t))),this.performanceInfo.total.push(t)}get test(){return this._test}};class e{get task(){return this._task.value}get updating(){return this._queue.running}constructor(t,e,n){this._scheduler=t,this.name=e,this.blockFrame=0,this.runtime=0,this._queue=new f.T,this._handles=new o.A,this._basePriority=b(e),this.schedulePriority=this._basePriority,this._task=(0,h.v)(null!=n?n:this._queue),this._handles.add((0,d.when)((()=>this.task.running),(e=>t.taskRunningChanged(e))))}remove(){this.processQueue(E),this._scheduler.removeTask(this),this.schedule=$.schedule,this.reschedule=$.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(t){if(this.name===t)return;this.name=t;const e=b(t);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=e),this._basePriority=e}get priority(){return this.name}set priority(t){this.setPriority(t)}get needsUpdate(){return this.updating||this.task.running}schedule(t,e,n){return this._queue.push(t,e,n)}reschedule(t,e,n){return this._queue.unshift(t,e,n)}processQueue(t){return this._queue.runTask(t)}}class n{constructor(){this._begin="undefined"!=typeof performance?performance.now():0,this._budget=0,this._state=g.M.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(t){return!this.done&&(!0===t()&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(t){this._enabled=t}reset(t,e){this._begin=this.now(),this._budget=t,this._state=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=n}(T||(T={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(k||(k={}));const E=(()=>{const t=new T.Budget;return t.enabled=!1,t})(),$=new class{remove(){}processQueue(){}schedule(t,e,n){try{if((0,u.G4)(e)){const t=(0,u.NK)();return n?Promise.resolve(n(t)):Promise.reject(t)}return(0,u.z7)(t(E))}catch(t){return Promise.reject(t)}}reschedule(t,e,n){return this.schedule(t,e,n)}}},55213:function(t,e,n){"use strict";n.d(e,{G:function(){return i}});const i=Symbol("Yield")},70474:function(t,e,n){"use strict";n.d(e,{n:function(){return w}});var i=n(56275),r=n(62938),o=n(59122),s=n(20551),a=n(32501),l=n(68734),c=n(5596),u=n(67496),d=n(19271);function h(t,e,n=t.hasZ){const o=(0,d.l)(t.spatialReference),h=(0,r.B5)(o);if(null==h)return null;const g=(t,e)=>!(e.length<2||((0,s.i)(t,e[0],e[1],n&&e[2]||0),0));let y=0;for(const n of t.rings){const i=n.length;if(i<3)continue;const{positionsWorldCoords:r}=e;for(;r.length<i;)r.push((0,a.vt)());const d=p,h=(0,s.i)(f,0,0,0),v=1/i;for(let e=0;e<i;e++){if(!g(d,n[e]))return null;if(!(0,l.F)(d,t.spatialReference,r[e],o))return null;(0,s.b)(h,h,r[e],v)}const _=(0,c.Cr)(r[0],r[1],h,(0,c.LV)());if(0===(0,s.k)((0,c.Qj)(_)))continue;for(let t=0;t<i;t++)(0,c.Z1)(_,h,r[t],r[t]);const b=m(r);for(let t=0;t<b.length;t+=3)y+=(0,u.Fm)(r[b[t]],r[b[t+1]],r[b[t+2]])}return(0,i.gT)(y,h)}const p=(0,a.vt)(),f=(0,a.vt)();function m(t){return(0,o.e)(function(t){const e=new Float64Array(2*t.length);for(let n=0;n<t.length;++n){const i=t[n],r=2*n;e[r]=i[0],e[r+1]=i[1]}return e}(t),[],2)}var g=n(22162),y=n(57862),v=n(99368);function _(t){const{spatialReference:e}=t;return(0,v.M0)(e,b,x,t)}function b(t){return(0,i.gT)(Math.abs((0,y.qy)([t],"square-meters")[0]),"square-meters")}function x(t){try{return(0,i.gT)(Math.abs((0,g.geodesicArea)(t,"square-meters")),"square-meters")}catch(t){return null}}function w(t,e={positionsWorldCoords:[]}){return function(t,e,n={positionsWorldCoords:[]}){if("on-the-ground"===e){const e=_(t);return null!=e?e:function(t,e={positionsWorldCoords:[]}){return h(t,e,!1)}(t,n)}return function(t,e={positionsWorldCoords:[]}){return h(t,e)}(t,n)}(t,"on-the-ground",e)}},9862:function(t,e,n){"use strict";n.d(e,{Do:function(){return l},Kt:function(){return a},ob:function(){return s}});var i=n(32501),r=n(46517),o=n(1428);function s(t){return(0,o.mh)(t)??(0,r.Xg)(t)}function a(t,e){return(0,o.Og)(t,e)??(0,r.ll)(t,e)}function l(t,e,n){return c[0]=t[0],c[1]=t[1],c[2]=3===t.length?t[2]:0,u[0]=e[0],u[1]=e[1],u[2]=3===e.length?e[2]:0,(0,o.n3)(c,u,n)??(0,r.sT)(c,u,n)}const c=(0,i.vt)(),u=(0,i.vt)()},16164:function(t,e,n){"use strict";n.d(e,{A:function(){return l}});var i=n(53804),r=n(83525),o=n(23502),s=(n(58941),n(40633),n(13798),n(65953));let a=class extends r.A{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,i._)([(0,o.MZ)()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,i._)([(0,o.MZ)()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),a=(0,i._)([(0,s.$)("esri.views.support.debugFlags")],a);const l=new a},33383:function(t,e,n){"use strict";n.d(e,{V:function(){return s},t:function(){return a}}),n(50917);var i=n(62938),r=n(82418),o=n(91484);function s(t,e,n,r=new o.default){let s=0;if("2d"===n.type)s=e*(n.resolution??0);else if("3d"===n.type){const r=n.overlayPixelSizeInMapUnits(t),o=n.basemapSpatialReference;s=null==o||o.equals(n.spatialReference)?e*r:(0,i.GA)(o)/(0,i.GA)(n.spatialReference)}const a=t.x-s,l=t.y-s,c=t.x+s,u=t.y+s,{spatialReference:d}=n;return r.xmin=Math.min(a,c),r.ymin=Math.min(l,u),r.xmax=Math.max(a,c),r.ymax=Math.max(l,u),r.spatialReference=d,r}function a(t,e,n){const i=n.toMap(t);return null!=i&&s(i,(0,r.o)(),n,l).intersects(e)}const l=new o.default},46517:function(t,e,n){"use strict";n.d(e,{Of:function(){return m},Qc:function(){return g},Xg:function(){return h},cL:function(){return _},e5:function(){return f},ll:function(){return p},sT:function(){return v}});var i,r,o=n(56275),s=n(62938),a=n(20551),l=n(32501),c=n(68734),u=n(57652),d=n(19271);function h(t){return function(t,e){const{hasZ:n,spatialReference:r}=t,a=(0,d.l)(r);let l=0;const c=(0,s._H)(a);if(null==c)return null;const u=e===i.Direct?y:v;for(const e of t.paths){if(e.length<2)continue;const t=e.length-1;for(let i=0;i<t;++i){const t=e[i];x[0]=t[0],x[1]=t[1],x[2]=n?t[2]:0;const o=e[i+1];w[0]=o[0],w[1]=o[1],w[2]=n?o[2]:0;const s=u(x,w,r);if(null==s)return null;l+=s.value}}return(0,o.d_)(l,c)}(t,i.Horizontal)}function p(t,e){const{spatialReference:n}=t;return(0,u.aI)(n,e.spatialReference)?(x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,v(x,w,n)):null}function f(t,e){const{spatialReference:n}=t;return(0,u.aI)(n,e.spatialReference)?(x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,_(x,w,n)):null}function m(t){return null!=t?g(t.hasZ?t.z:0,t.spatialReference):null}function g(t,e){const n=(0,s.mq)(e);return null!=n?(0,o.d_)(t??0,n):null}function y(t,e,n){const r=b(t,e,n,i.Direct);return null!=r?(0,o.d_)(r.direct,r.unit):null}function v(t,e,n){const r=b(t,e,n,i.Horizontal);return null!=r?(0,o.d_)(r.horizontal,r.unit):null}function _(t,e,n){const r=b(t,e,n,i.Vertical);return null!=r?(0,o.d_)(r.verticalSigned,r.unit):null}function b(t,e,n,r){const o=(0,d.l)(n),l=(0,s._H)(o);if(null==l)return null;const u=e[2]-t[2];if(r===i.Vertical)return{verticalSigned:u,unit:l};if(!(0,c.F)(t,n,M,o)||!(0,c.F)(e,n,S,o))return null;if(r===i.Direct)return{direct:(0,a.j)(S,M),unit:l};if((0,a.i)(C,t[0],t[1],e[2]),!(0,c.F)(C,n,C,o))return null;const h=(0,a.j)(C,S);return r===i.Horizontal?{horizontal:h,unit:l}:{direct:(0,a.j)(S,M),horizontal:h,vertical:Math.abs(u),unit:l}}(r=i||(i={}))[r.Direct=0]="Direct",r[r.Horizontal=1]="Horizontal",r[r.Vertical=2]="Vertical";const x=(0,l.vt)(),w=(0,l.vt)(),M=(0,l.vt)(),S=(0,l.vt)(),C=(0,l.vt)()},1428:function(t,e,n){"use strict";n.d(e,{Og:function(){return u},mh:function(){return c},n3:function(){return d}});var i=n(56275),r=n(32501),o=n(22162),s=n(57862),a=n(57652),l=n(99368);function c(t){const{spatialReference:e}=t;return(0,l.M0)(e,f,m,t)}function u(t,e){if(!(0,a.aI)(t.spatialReference,e.spatialReference))return null;const{spatialReference:n}=t;return y[0]=t.x,y[1]=t.y,y[2]=t.hasZ?t.z:0,v[0]=e.x,v[1]=e.y,v[2]=e.hasZ?e.z:0,d(y,v,n)}function d(t,e,n){return(0,l.M0)(n,h,p,t,e,n)}function h(t,e,n){return(0,i.d_)((0,s._3)(g,t,e,n).distance,"meters")}function p(t,e,n){return(0,i.d_)((0,o.geodesicLength)(function(t,e,n){return{type:"polyline",spatialReference:n,paths:[[[...t],[...e]]]}}(t,e,n),"meters"),"meters")}function f(t){return(0,i.d_)((0,s.l1)([t],"meters")[0],"meters")}function m(t){return(0,i.d_)((0,o.geodesicLength)(t,"meters"),"meters")}const g=new s.Zj,y=(0,r.vt)(),v=(0,r.vt)()},99368:function(t,e,n){"use strict";n.d(e,{M0:function(){return s},yF:function(){return o}});var i=n(57862),r=n(57652);function o(t){return(0,i.TT)(t)||(0,r.K8)(t)}function s(t,e,n,...o){return(0,i.TT)(t)?e.apply(void 0,o):(0,r.K8)(t)?n.apply(void 0,o):null}},19271:function(t,e,n){"use strict";n.d(e,{l:function(){return s}});var i=n(61714),r=n(96611),o=n(57652);function s(t){return(0,o.B3)(t)?(0,o.oT)(t)||(0,o.K8)(t)||(0,o.x1)(t)||(0,i.jA)(t)?r.Y0:t:(0,r.lO)(t)}},31267:function(t,e,n){"use strict";n.d(e,{A:function(){return D}});var i=n(53804),r=(n(64122),n(88022)),o=n(88264),s=n(48996),a=n(40212),l=(n(58941),n(21609)),c=n(40633),u=n(95929),d=n(62560),h=n(60539),p=n(28181),f=n(66110),m=n(23502),g=n(77560),y=n(65953),v=n(44567),_=n(6792),b=n(92781);n(81401);const x={handleInterceptedEvent:(t,e,n,i)=>(t.scheduleRender(),e.properties[`on${i.type}`].apply(e.properties.bind||n,[i]))},w={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{"-"===e.charAt(0)?t.style.setProperty(e,n):t.style[e]=n}},M=(t,e,n=!1)=>{let i=t;return e.forEach(((t,r)=>{const o=i?.children?((t,e)=>t.find(e))(i.children,(e=>e.domNode===t)):void 0;n&&!o&&r!==e.length-1||(i=o)})),i};var S=n(28754),C=n(69987),T=n(50074);const k=new Set;var E,$=n(15351),A=n(10362),P=n(22739),I=n(38225);let R=0;function O(t,e){const n=Object.prototype.hasOwnProperty;for(const i in e)n.call(e,i)&&n.call(t,i)&&(null!=t[i]&&null!=e[i]&&"object"==typeof t[i]&&"object"==typeof e[i]?O(t[i],e[i]):t[i]=e[i]);return t}const L=(t=>{let e;const n={...x,...t},i=(o=n,{...w,...o}),r=i.performanceLogger;var o;let s,a=!0,l=!1;const c=[],u=[],d=(t,o,s)=>{let a;i.eventHandlerInterceptor=(t,i,o,s)=>function(t){let i;r("domEvent",t);const o=((t,e)=>{const n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n})(t.currentTarget,a.domNode),s=o.some((t=>customElements.get(t?.tagName?.toLowerCase())));if(t.eventPhase!==Event.CAPTURING_PHASE&&s){const e=t.composedPath(),n=e.slice(e.indexOf(t.currentTarget),e.indexOf(a.domNode)).reverse();i=M(a.getLastRender(),n,!0)}else o.reverse(),i=M(a.getLastRender(),o);let l;return i&&(l=n.handleInterceptedEvent(e,i,this,t)),r("domEventProcessed",t),l},n.postProcessProjectionOptions?.(i);const l=s();a=t(o,l,i),i.eventHandlerInterceptor=void 0,c.push(a),u.push(s),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(a,l)};let h=()=>{if(s=void 0,a){a=!1,r("renderStart",void 0);for(let t=0;t<c.length;t++){const e=u[t]();r("rendered",void 0);try{c[t].update(e)}catch(t){console.error(t)}r("patched",void 0)}r("renderDone",void 0),a=!0}};return n.modifyDoRenderImplementation&&(h=n.modifyDoRenderImplementation(h,c,u)),e={renderNow:h,scheduleRender:()=>{s||l||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),l=!0},resume:()=>{l=!1,a=!0,e.scheduleRender()},append:(t,e)=>{d(b.t.append,t,e)},insertBefore:(t,e)=>{d(b.t.insertBefore,t,e)},merge:(t,e)=>{d(b.t.merge,t,e)},replace:(t,e)=>{d(b.t.replace,t,e)},detach:t=>{for(let e=0;e<u.length;e++)if(u[e]===t)return u.splice(e,1),c.splice(e,1)[0];throw new Error("renderFunction was not found")}},e})({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,n=/capture$/i;t.eventHandlerInterceptor=(t,i,r,o)=>{const s=e?.(t,i,r,o),a=n.test(t);if(!((t=t.replace(n,"")).toLowerCase()in r)||a){const e=t[2].toLowerCase()+t.slice(3),n=t=>s?.call(r,t);r.addEventListener(e,n,a);const i=()=>r.removeEventListener(e,n,a),l=o.afterRemoved;o.afterRemoved=t=>{l?.(t),i()}}return s}},handleInterceptedEvent(t,e,n,i){const{eventPhase:r,type:o}=i,s=r===Event.CAPTURING_PHASE;let a=`on${o}${s?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${o[0].toUpperCase()}${o.slice(1)}${s?"Capture":""}`,l&&a in l))&&((0,$.Sh)(),t.scheduleRender(),l[a].call(l.bind||n,i))}});let V=!1,N=class extends((0,d.g)(s.A.EventedAccessor)){constructor(t,e){super(t,e),this._attached=!1,this._projector=L,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=(0,h.sg)((async()=>{if(this._messageBundleProps?.length){const t=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:t,propertyName:e})=>{if(this.destroyed)return;let n=await(0,I.ud)(t);this.uiStrings&&Object.keys(this.uiStrings)&&(n=O((0,l.o8)(n),this.uiStrings)),this[e]=n})));if(this.destroyed)return;for(const e of t)"rejected"===e.status&&c.A.getLogger(this).error("widget-intl:locale-error",this.declaredClass,e.reason)}await this.loadLocale()})),(0,S.V)();const n="esri-widget-uid-"+(0,f.lk)(),i=this.render.bind(this);this._trackingTarget=new _.r((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const r=()=>({vnodeSelector:"div",properties:{key:`${n}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const t=i()??r(),e=t.properties??={};if(e.key??=n,(0,C.b)(t.vnodeSelector)){if(!this.visible)return r()}else this.visible?e.styles||(e.styles={}):(e.class="",e.styles={display:"none"}),e.styles.display??="";let o=0;return t.children?.forEach((t=>{(0,C.b)(t.vnodeSelector)||(t.properties??={},t.properties.key??=`${this.id}--${o++}`)})),(0,C.d)(this,t)};this.render=()=>{if(V)return o();let t=(0,$.rE)(this)??null;if(t)return t;this._trackingTarget.clear(),V=!0;try{t=(0,v.a)(this._trackingTarget,o)}catch(t){throw c.A.getLogger(this).error(t),t}finally{V=!1}return t&&(0,$.$U)(this,t),t};const s=this.beforeFirstRender();var a;s?this._resourcesFetch=s.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),a=this._resourcesFetch,k.add(a),a.finally((()=>k.delete(a)))}normalizeCtorArgs(t,e){const n={...t};return e&&(n.container=e),n}postInitialize(){}beforeFirstRender(){const t=this.loadDependencies();return this._messageBundleProps?.length||t?Promise.all([t,this._loadLocale()]).then((()=>{})).catch(h.jH):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||((0,u.pR)(this._trackingTarget),(0,u.pR)(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,$.Qw)(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return(0,o.$)(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+R++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(E=T.x,T.D)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||((0,$.Qw)(this),this._projector.scheduleRender())}own(t){(0,r.eO)(c.A.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return A.Ly.apply(this,t)}renderNow(){(0,$.Qw)(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles((0,p.watch)((()=>this.viewModel),((t,e)=>{e&&this.removeHandles("delegated-events"),t&&(0,a.wb)(t)&&this.addHandles(this._delegatedEventNames.map((e=>(0,a.on)(t,e,(t=>{this.emit(e,t)})))),"delegated-events")}),p.pc)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(h.jH),this.scheduleRender()};this.addHandles([(0,P.oQ)(t),(0,p.watch)((()=>this.uiStrings),t),(0,p.when)((()=>this.container),(t=>{this.destroyed||this._attach(t)}),{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){this._attached&&(this._projector.detach(this.render),this._attached=!1),t?.parentNode?.removeChild(t)}};N[E]=!0,N.vnodeSelector="div",(0,i._)([(0,m.MZ)()],N.prototype,"_readyForTrueRender",void 0),(0,i._)([(0,m.MZ)({value:null})],N.prototype,"container",null),(0,i._)([(0,g.w)("container")],N.prototype,"castContainer",null),(0,i._)([(0,m.MZ)()],N.prototype,"icon",null),(0,i._)([(0,m.MZ)()],N.prototype,"id",null),(0,i._)([(0,m.MZ)()],N.prototype,"label",null),(0,i._)([(0,m.MZ)()],N.prototype,"renderable",null),(0,i._)([(0,m.MZ)()],N.prototype,"uiStrings",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"viewModel",void 0),(0,i._)([(0,m.MZ)({value:!0})],N.prototype,"visible",null),(0,i._)([(0,m.MZ)()],N.prototype,"key",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"children",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"afterCreate",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"afterUpdate",void 0),(0,i._)([(0,m.MZ)()],N.prototype,"afterRemoved",void 0),N=(0,i._)([(0,y.$)("esri.widgets.Widget")],N);const D=N},28754:function(t,e,n){"use strict";n.d(e,{V:function(){return d},W:function(){return h}});var i=n(96367),r=n(67646),o=n(54038),s=n(82798);function a(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>t.contains(i.d)||t.contains(i.a)&&e?"dark":"light",r=t=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:t}})),o=t=>{s!==t&&r(t),s=t};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(t=>o(t.matches?"dark":"light"))),new MutationObserver((()=>o(n()))).observe(document.body,{attributes:!0,attributeFilter:["class"]})}(0,o.i)()&&("interactive"===document.readyState?a():document.addEventListener("DOMContentLoaded",(()=>a()),{once:!0})),(0,r.s)();var l=n(53216),c=(n(58941),n(90683));let u;function d(){try{(0,s.OX)(".")}catch{(0,s.Qu)((0,c.s2)((0,l.s)(u)))}}function h(t){const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push(t[n]?.());return e.length>0?Promise.all(e):null}u="components/assets"},90357:function(t,e,n){"use strict";function i(t){return(e,n)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:n})}}n.d(e,{G:function(){return i}})},49146:function(t,e,n){"use strict";n.d(e,{K:function(){return a},w:function(){return l}});var i=n(69987),r=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},o=function(t,e){for(var n=0,i=t.length;n<i;n++){var s=t[n];Array.isArray(s)?o(s,e):null!=s&&!1!==s&&(s.hasOwnProperty("vnodeSelector")||(s=r(s)),e.push(s))}},s=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(1===n.length&&"string"==typeof n[0])return{vnodeSelector:t,properties:e||void 0,children:void 0,text:n[0],domNode:null};var r=[];return o(n,r),{vnodeSelector:t,properties:e||void 0,children:r,text:void 0,domNode:null}};function a(t,e,...n){return"function"!=typeof t||(0,i.b)(t)?s(t,e,...n):t(e,...n)}function l(...t){return t}},69987:function(t,e,n){"use strict";n.d(e,{b:function(){return h},d:function(){return l}});var i=n(61226),r=n(50074);const o=[],s={},a=new WeakMap;function l(t,e){let n=e.children;if(n?.length)for(let e=0;e<n.length;++e)n[e]=l(t,n[e]);else n=o;const i=e.vnodeSelector;if(h(i)){const r=e.properties||s,o=r.key||i,a={key:o,afterCreate:c,afterUpdate:u,afterRemoved:d,parentWidget:t,widgetConstructor:i,widgetProperties:{...r,key:o,children:n}};return{vnodeSelector:i.vnodeSelector,properties:a,children:void 0,text:void 0,domNode:null}}return e}function c(t,e,n,{parentWidget:o,widgetConstructor:s,widgetProperties:l}){const c=new s(l);c.container=t,a.set(t,c),c.afterCreate?.(c,t),o.addHandles((0,i.hA)((()=>d(t)))),queueMicrotask((()=>{c[r.D].projector.renderNow()}))}function u(t,e,n,{widgetProperties:i}){const r=a.get(t);r&&(r.set(i),r.afterUpdate?.(r,t))}function d(t){const e=a.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),a.delete(t))}function h(t){return"function"==typeof t&&t[r.x]}},50074:function(t,e,n){"use strict";n.d(e,{D:function(){return r},x:function(){return i}});const i=Symbol("widget"),r=Symbol("widget-test-data")},15351:function(t,e,n){"use strict";n.d(e,{$U:function(){return s},Qw:function(){return a},Sh:function(){return r},rE:function(){return o}});const i=new Map;function r(){i.clear()}function o(t){return i.get(t)}function s(t,e){i.set(t,e)}function a(t){i.delete(t)}},10362:function(t,e,n){"use strict";n.d(e,{Ly:function(){return dt},N_:function(){return pt},OU:function(){return vt},V8:function(){return ht},W5:function(){return yt},Z6:function(){return _t},cA:function(){return ft}});var i=function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)},r={exports:{}},o={},s={exports:{}},a={};function l(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var c=/javascript\s*\:/gim;a.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},a.getDefaultWhiteList=l,a.onAttr=function(t,e,n){},a.onIgnoreAttr=function(t,e,n){},a.safeAttrValue=function(t,e){return c.test(e)?"":e};var u=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},d=function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")},h=a,p=function(t,e){";"!==(t=d(t))[t.length-1]&&(t+=";");var n=t.length,i=!1,r=0,o=0,s="";function a(){if(!i){var n=u(t.slice(r,o)),a=n.indexOf(":");if(-1!==a){var l=u(n.slice(0,a)),c=u(n.slice(a+1));if(l){var d=e(r,s.length,l,c,n);d&&(s+=d+"; ")}}}r=o+1}for(;o<n;o++){var l=t[o];if("/"===l&&"*"===t[o+1]){var c=t.indexOf("*/",o+2);if(-1===c)break;r=(o=c+1)+1,i=!1}else"("===l?i=!0:")"===l?i=!1:";"===l?i||a():"\n"===l&&a()}return u(s)};function f(t){return null==t}function m(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).whiteList=t.whiteList||h.whiteList,t.onAttr=t.onAttr||h.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||h.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||h.safeAttrValue,this.options=t}m.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,i=e.onAttr,r=e.onIgnoreAttr,o=e.safeAttrValue;return p(t,(function(t,e,s,a,l){var c=n[s],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(a):c instanceof RegExp&&(u=c.test(a)),!0!==u&&(u=!1),a=o(s,a)){var d,h={position:e,sourcePosition:t,source:l,isWhite:u};return u?f(d=i(s,a,h))?s+":"+a:d:f(d=r(s,a,h))?void 0:d}}))};var g=m;!function(t,e){var n=a,i=g;for(var r in(e=t.exports=function(t,e){return new i(e).process(t)}).FilterCSS=i,n)e[r]=n[r]}(s,s.exports);var y=s.exports,v={indexOf:function(t,e){var n,i;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var i,r;if(Array.prototype.forEach)return t.forEach(e,n);for(i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}},_=y.FilterCSS,b=y.getDefaultWhiteList,x=v;var w=new _;function M(t){return t.replace(S,"&lt;").replace(C,"&gt;")}var S=/</g,C=/>/g,T=/"/g,k=/&quot;/g,E=/&#([a-zA-Z0-9]*);?/gim,$=/&colon;?/gim,A=/&newline;?/gim,P=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,I=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,R=/u\s*r\s*l\s*\(.*/gi;function O(t){return t.replace(T,"&quot;")}function L(t){return t.replace(k,'"')}function V(t){return t.replace(E,(function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))}))}function N(t){return t.replace($,":").replace(A," ")}function D(t){for(var e="",n=0,i=t.length;n<i;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return x.trim(e)}function Z(t){return D(t=N(t=V(t=L(t))))}function G(t){return M(t=O(t))}o.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},o.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},o.onTag=function(t,e,n){},o.onIgnoreTag=function(t,e,n){},o.onTagAttr=function(t,e,n){},o.onIgnoreTagAttr=function(t,e,n){},o.safeAttrValue=function(t,e,n,i){if(n=Z(n),"href"===e||"src"===e){if("#"===(n=x.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===e){if(P.lastIndex=0,P.test(n))return""}else if("style"===e){if(I.lastIndex=0,I.test(n))return"";if(R.lastIndex=0,R.test(n)&&(P.lastIndex=0,P.test(n)))return"";!1!==i&&(n=(i=i||w).process(n))}return G(n)},o.escapeHtml=M,o.escapeQuote=O,o.unescapeQuote=L,o.escapeHtmlEntities=V,o.escapeDangerHtml5Entities=N,o.clearNonPrintableCharacter=D,o.friendlyAttrValue=Z,o.escapeAttrValue=G,o.onIgnoreTagStripAll=function(){return""},o.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var n=!Array.isArray(t),i=[],r=!1;return{onIgnoreTag:function(o,s,a){if(function(e){return!!n||-1!==x.indexOf(t,e)}(o)){if(a.isClosing){var l=a.position+10;return i.push([!1!==r?r:a.position,l]),r=!1,"[/removed]"}return r||(r=a.position),"[removed]"}return e(o,s,a)},remove:function(t){var e="",n=0;return x.forEach(i,(function(i){e+=t.slice(n,i[0]),n=i[1]})),e+=t.slice(n)}}},o.stripCommentTag=function(t){for(var e="",n=0;n<t.length;){var i=t.indexOf("\x3c!--",n);if(-1===i){e+=t.slice(n);break}e+=t.slice(n,i);var r=t.indexOf("--\x3e",i);if(-1===r)break;n=r+3}return e},o.stripBlankChar=function(t){var e=t.split("");return(e=e.filter((function(t){var e=t.charCodeAt(0);return!(127===e||e<=31&&10!==e&&13!==e)}))).join("")},o.cssFilter=w,o.getDefaultCSSWhiteList=b;var z={},U=v;function F(t){var e,n=U.spaceIndex(t);return e=-1===n?t.slice(1,-1):t.slice(1,n+1),"/"===(e=U.trim(e).toLowerCase()).slice(0,1)&&(e=e.slice(1)),"/"===e.slice(-1)&&(e=e.slice(0,-1)),e}function H(t){return"</"===t.slice(0,2)}var j=/[^a-zA-Z0-9\\_:.-]/gim;function B(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"="===n?e:-1}}function W(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"'"===n||'"'===n?e:-1}}function Y(t,e){for(;e>0;e--){var n=t[e];if(" "!==n)return"="===n?e:-1}}function q(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}z.parseTag=function(t,e,n){var i="",r=0,o=!1,s=!1,a=0,l=t.length,c="",u="";t:for(a=0;a<l;a++){var d=t.charAt(a);if(!1===o){if("<"===d){o=a;continue}}else if(!1===s){if("<"===d){i+=n(t.slice(r,a)),o=a,r=a;continue}if(">"===d){i+=n(t.slice(r,o)),c=F(u=t.slice(o,a+1)),i+=e(o,i.length,c,u,H(u)),r=a+1,o=!1;continue}if('"'===d||"'"===d)for(var h=1,p=t.charAt(a-h);""===p.trim()||"="===p;){if("="===p){s=d;continue t}p=t.charAt(a-++h)}}else if(d===s){s=!1;continue}}return r<t.length&&(i+=n(t.substr(r))),i},z.parseAttr=function(t,e){var n=0,i=0,r=[],o=!1,s=t.length;function a(t,n){if(!((t=(t=U.trim(t)).replace(j,"").toLowerCase()).length<1)){var i=e(t,n||"");i&&r.push(i)}}for(var l=0;l<s;l++){var c,u=t.charAt(l);if(!1!==o||"="!==u)if(!1===o||l!==i){if(/\s|\n|\t/.test(u)){if(t=t.replace(/\s|\n|\t/g," "),!1===o){if(-1===(c=B(t,l))){a(U.trim(t.slice(n,l))),o=!1,n=l+1;continue}l=c-1;continue}if(-1===(c=Y(t,l-1))){a(o,q(U.trim(t.slice(n,l)))),o=!1,n=l+1;continue}}}else{if(-1===(c=t.indexOf(u,l+1)))break;a(o,U.trim(t.slice(i+1,c))),o=!1,n=(l=c)+1}else o=t.slice(n,l),n=l+1,i='"'===t.charAt(n)||"'"===t.charAt(n)?n:W(t,l+1)}return n<t.length&&(!1===o?a(t.slice(n)):a(o,q(U.trim(t.slice(n))))),U.trim(r.join(" "))};var K=y.FilterCSS,X=o,Q=z,J=Q.parseTag,tt=Q.parseAttr,et=v;function nt(t){return null==t}function it(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=X.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=function(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map((function(t){return t.toLowerCase()})):e[n.toLowerCase()]=t[n];return e}(t.whiteList||t.allowList):t.whiteList=X.whiteList,t.onTag=t.onTag||X.onTag,t.onTagAttr=t.onTagAttr||X.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||X.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||X.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||X.safeAttrValue,t.escapeHtml=t.escapeHtml||X.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new K(t.css))}it.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,i=e.onTag,r=e.onIgnoreTag,o=e.onTagAttr,s=e.onIgnoreTagAttr,a=e.safeAttrValue,l=e.escapeHtml,c=this.cssFilter;e.stripBlankChar&&(t=X.stripBlankChar(t)),e.allowCommentTag||(t=X.stripCommentTag(t));var u=!1;e.stripIgnoreTagBody&&(u=X.StripTagBody(e.stripIgnoreTagBody,r),r=u.onIgnoreTag);var d=J(t,(function(t,e,u,d,h){var p={sourcePosition:t,position:e,isClosing:h,isWhite:Object.prototype.hasOwnProperty.call(n,u)},f=i(u,d,p);if(!nt(f))return f;if(p.isWhite){if(p.isClosing)return"</"+u+">";var m=function(t){var e=et.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var n="/"===(t=et.trim(t.slice(e+1,-1)))[t.length-1];return n&&(t=et.trim(t.slice(0,-1))),{html:t,closing:n}}(d),g=n[u],y=tt(m.html,(function(t,e){var n=-1!==et.indexOf(g,t),i=o(u,t,e,n);return nt(i)?n?(e=a(u,t,e,c))?t+'="'+e+'"':t:nt(i=s(u,t,e,n))?void 0:i:i}));return d="<"+u,y&&(d+=" "+y),m.closing&&(d+=" /"),d+">"}return nt(f=r(u,d,p))?l(d):f}),l);return u&&(d=u.remove(d)),d};var rt=it;!function(t,e){var n=o,i=z,r=rt;function s(t,e){return new r(e).process(t)}(e=t.exports=s).filterXSS=s,e.FilterXSS=r,function(){for(var t in n)e[t]=n[t];for(var r in i)e[r]=i[r]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=t.exports)}(r,r.exports);var ot=r.exports,st=function(){function t(t,e){var n,r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=i(i({},ot.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(t,e,n,i){return"a"===t&&"href"===e||("img"===t||"source"===t)&&"src"===e?r.sanitizeUrl(n):ot.safeAttrValue(t,e,n,i)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},t&&!e?n=t:t&&e?((n=Object.create(this.arcgisFilterOptions)).css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach((function(e){if("whiteList"===e)n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,t.whiteList||{}]);else if("css"===e){var i=t.css.whiteList;null!=i&&t.css instanceof Object&&Object.keys(i).forEach((function(t){return n.css.whiteList[t]=i[t]}))}else n[e]=t[e]}))):((n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,n.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=n,this._xssFilter=new ot.FilterXSS(n)}return t.prototype.sanitize=function(t,e){switch(void 0===e&&(e={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,e);default:if(e.allowUndefined&&void 0===t)return;return null}},t.prototype.sanitizeUrl=function(t,e){var n=(null!=e?e:{}).isProtocolRequired,i=void 0===n||n,r=this._trim(t.substring(0,t.indexOf(":"))),o="/"===t,s=/^#/.test(t),a=r&&this.allowedProtocols.indexOf(r.toLowerCase())>-1;return o||s||a?ot.escapeAttrValue(t):r||i?"":ot.escapeAttrValue("https://".concat(t))},t.prototype.sanitizeHTMLAttribute=function(t,e,n,i){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(t,e,n,i):ot.safeAttrValue(t,e,n,i)},t.prototype.validate=function(t,e){void 0===e&&(e={});var n=this.sanitize(t,e);return{isValid:t===n,sanitized:n}},t.prototype.encodeHTML=function(t){var e=this;return String(t).replace(/[&<>"'\/]/g,(function(t){return e._entityMap[t]}))},t.prototype.encodeAttrValue=function(t){var e=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,(function(n,i){return e.test(n)?n:"&#x".concat(Number(t.charCodeAt(i)).toString(16),";")}))},t.prototype._extendObjectOfArrays=function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){Array.isArray(t[n])&&Array.isArray(e[n])?e[n]=e[n].concat(t[n]):e[n]=t[n]}))})),e},t.prototype._iterateOverObject=function(t,e){var n=this;void 0===e&&(e={});try{var i=!1,r=void 0;if(Array.isArray(t))r=t.reduce((function(t,r){var o=n.validate(r,e);return o.isValid?t.concat([r]):(i=!0,t.concat([o.sanitized]))}),[]);else{if(!function(t){if("object"!=typeof t||null===t)return!1;if("[object Object]"!==Object.prototype.toString.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t)){if(e.allowUndefined&&void 0===t)return;return null}r=Object.keys(t).reduce((function(r,o){var s=t[o],a=n.validate(s,e);return a.isValid?r[o]=s:(i=!0,r[o]=a.sanitized),r}),{})}return i?r:t}catch(t){return null}},t.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},t}(),at=n(14130),lt=(n(61226),n(58941),n(40633),n(60539)),ct=(n(28181),n(74087)),ut=n(15351);function dt(...t){const e=at.A.acquire();for(let n=0;n<t.length;n++){const i=t[n],r=typeof i;if("string"===r)e.push(i);else if(Array.isArray(i))e.push.apply(e,i);else if("object"===r)for(const t in i)i[t]&&e.push(t)}const n=e.join(" ");return at.A.release(e),n}function ht(t){const e=t?.closest("[dir]");return null!==e&&e instanceof HTMLElement&&"rtl"===e.dir||"rtl"===document.dir}function pt(t){this[t.getAttribute("data-node-ref")]=null}function ft(t){this[t.getAttribute("data-node-ref")]=t}(()=>{const t=new Map;new ResizeObserver((e=>{(0,ut.Sh)();for(const n of e)t.get(n.target)?.(n)}))})();const mt=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((t,e)=>(t[e]=[],t)),{}),gt=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],yt=new st({whiteList:mt,onTagAttr:(t,e,n)=>{const i=`${e}="${n}"`;if(gt.includes(e))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function vt(t){return"Enter"===t||" "===t}async function _t(t,e){await(0,ct.$m)((0,lt.Mq)(e));const n="function"==typeof t?t():t;n&&("setFocus"in n&&"function"==typeof n.setFocus?await n.setFocus():n instanceof HTMLElement&&n.focus())}}}]);
//# sourceMappingURL=views-2d-interactive-editingTools.js.map