"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[9033],{99680:function(e,t,r){r.d(t,{q:function(){return n}});var i=r(85408);class n{constructor(e,t){this._storage=new i.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85408:function(e,t,r){r.d(t,{F:function(){return a},Ti:function(){return n}});var i=r(7187);const n=-3,o=n-1;var s,l;(l=s||(s={}))[l.ALL=0]="ALL",l[l.SOME=1]="SOME";class a{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.A,this._users=new i.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const r=this._db.get(e.id+t);return r?.size??0}put(e,t,r,i,l){t=e.id+t;const a=this._db.get(t);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(t),a.entry!==r&&this._notifyRemove(t,a.entry,a.size,s.ALL)),i>this._maxSize)return void this._notifyRemove(t,r,i,s.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${t}`),void this._notifyRemove(t,r,0,s.ALL);const p=1+Math.max(l,o)-n;this._db.set(t,new u(r,i,p)),this._size+=i,e.size+=i,this._checkSize()}updateSize(e,t,r,i){t=e.id+t;const n=this._db.get(t);if(n&&n.entry===r){for(this._size-=n.size,e.size-=n.size;i>this._maxSize;){const e=this._notifyRemove(t,r,i,s.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);i=e}n.size=i,this._size+=i,e.size+=i,this._checkSize()}}pop(e,t){t=e.id+t;const r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;const r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){const r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,i)=>{const n=e.lifetime;r[n]=(r[n]||0)+e.size,this._users.forAll((r=>{const{id:n,name:o}=r;if(i.startsWith(n)){const r=t[o]||0;t[o]=r+e.size}}))}));const i={};this._users.forAll((e=>{const r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const n=t[r]||0;t[r]=n,i[r]=Math.round(100*e.hitRate)+"%"}else i[r]="0%"}));const o=Object.keys(t);o.sort(((e,r)=>t[r]-t[e])),o.forEach((r=>e[r]=Math.round(t[r]/2**20)+"MB / "+i[r]));for(let t=r.length-1;t>=0;--t){const i=r[t];i&&(e["Priority "+(t+n-1)]=Math.round(i/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,s.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,s.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,i){let n;return this._removeFuncs.some((o=>{if(e.startsWith(o[0])){const e=o[1](t,i,r);return"number"==typeof e&&(n=e),!0}return!1})),n}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const r=e?.id;let i=!0;for(;i;){i=!1;for(const[n,o]of this._db)if(0===o.lifetime&&(!r||n.startsWith(r))){if(this._purgeItem(n,o,e),t.size<=.9*t.maxSize)return;i||=this._db.has(n)}}for(const[i,n]of this._db)if((!r||i.startsWith(r))&&(this._purgeItem(i,n,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,r=this._users.find((t=>e.startsWith(t.id)))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);const i=this._notifyRemove(e,t.entry,t.size,s.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}class u{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}},77793:function(e,t,r){r.d(t,{P:function(){return b},L:function(){return w}});var i=r(53804),n=r(83525),o=r(90194),s=r(21609),l=r(72977);class a{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(l.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new a,r=this._originStores[l.Gr.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,(0,s.o8)(e),l.Gr.DEFAULTS)}));for(let r=l.Gr.SERVICE;r<l.AU;r++){const i=this._originStores[r];i&&i.forEach(((i,n)=>{e&&e.has(n)||t.set(n,(0,s.o8)(i),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=l.Gr.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const i=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),i!==t}return!1}delete(e,t=l.Gr.USER){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],i=r?.get(e),n=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,t),n!==i}originOf(e){return this._propertyOriginMap.get(e)||l.Gr.DEFAULTS}forEach(e){this._values.forEach(e)}}var u=r(97354),p=r(63693),c=r(65953);const d=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,p.oY)(this),r=t.store,i=new a;t.store=i,(0,o.k)(t,r,i)}read(e,t){(0,u.L)(this,e,t)}getAtOrigin(e,t){const r=y(this),i=(0,l.aB)(t);if("string"==typeof e)return r.get(e,i);const n={};return e.forEach((e=>{n[e]=r.get(e,i)})),n}originOf(e){return(0,l.OL)(this.originIdOf(e))}originIdOf(e){return y(this).originOf(e)}revert(e,t){const r=y(this),i=(0,l.aB)(t),n=(0,p.oY)(this);let o;o="string"==typeof e?"*"===e?r.keys(i):[e]:e,o.forEach((e=>{n.invalidate(e),r.revert(e,i),n.commit(e)}))}};return t=(0,i._)([(0,c.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function y(e){return(0,p.oY)(e).store}let f=class extends(d(n.A)){};f=(0,i._)([(0,c.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var m=r(62664),h=r(99495);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return v(this).delete(e,(0,l.aB)(t))}write(e,t){return(0,h.M)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,p.oY)(this).setAtOrigin(e,t,(0,l.aB)(r))}removeOrigin(e){const t=v(this),r=(0,l.aB)(e),i=t.keys(r);for(const e of i)t.originOf(e)===r&&t.set(e,t.get(e,r),l.Gr.USER)}updateOrigin(e,t){const r=v(this),i=(0,l.aB)(t),n=(0,m.Jt)(this,e);for(let t=i+1;t<l.AU;++t)r.delete(e,t);r.set(e,n,i)}toJSON(e){return this.write({},e)}};return t=(0,i._)([(0,c.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function v(e){return(0,p.oY)(e).store}const b=e=>{let t=class extends(g(d(e))){constructor(...e){super(...e)}};return t=(0,i._)([(0,c.$)("esri.core.MultiOriginJSONSupport")],t),t};let w=class extends(b(n.A)){};w=(0,i._)([(0,c.$)("esri.core.MultiOriginJSONSupport")],w)},72952:function(e,t,r){r.d(t,{EB:function(){return y},Im:function(){return h},Mj:function(){return d},Ui:function(){return m},w2:function(){return f}});var i=r(83525),n=r(78879),o=r(63693);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function l(e){return e instanceof i.A}function a(e){return e instanceof n.A?Object.keys(e.items):l(e)?(0,o.oY)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof n.A?e.items[t]:e[t]}function p(e){return e?e.declaredClass:null}function c(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const i=a(e),n=a(t);if(0===i.length&&0===n.length)return;if(!i.length||!n.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=n.filter((e=>!i.includes(e))),d=i.filter((e=>!n.includes(e))),y=i.filter((r=>n.includes(r)&&u(e,r)!==u(t,r))).concat(o,d).sort(),f=p(e);if(f&&s.has(f)&&y.length)return{type:"complete",oldValue:e,newValue:t};let m;const h=l(e)&&l(t);for(const i of y){const n=u(e,i),o=u(t,i);let s;if((h||"function"!=typeof n&&"function"!=typeof o)&&n!==o&&(null!=n||null!=o)){if(r&&r[i]&&"function"==typeof r[i])s=r[i]?.(n,o);else if(n instanceof Date&&o instanceof Date){if(n.getTime()===o.getTime())continue;s={type:"complete",oldValue:n,newValue:o}}else s="object"==typeof n&&"object"==typeof o&&p(n)===p(o)?c(n,o):{type:"complete",oldValue:n,newValue:o};null!=s&&(null!=m?m.diff[i]=s:m={type:"partial",diff:{[i]:s}})}}return m}function d(e,t){return y(e,t)}function y(e,t){if(null==e)return!1;const r=t.split(".");let i=e;for(const e of r){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const t=i.diff[e];if(!t)return!1;i=t}}return!0}function f(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}function h(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!h(e))return!1;for(const e of t.removed)if(!h(e))return!1;for(const e of t.changed)if(!h(e))return!1;return!0}case"partial":for(const t in e.diff)if(!h(e.diff[t]))return!1;return!0}}},64786:function(e,t,r){r.d(t,{K:function(){return i}});const i=["operational-layers","basemap","ground"]},17643:function(e,t,r){r.d(t,{v:function(){return n}});var i=r(73888);function n(e){e?.writtenProperties&&e.writtenProperties.forEach((({target:e,propName:t,newOrigin:r})=>{(0,i.H)(e)&&r&&e.originOf(t)!==r&&e.updateOrigin(t,r)}))}},75505:function(e,t,r){r.d(t,{$:function(){return v},IB:function(){return l},Iy:function(){return D},N2:function(){return b},QP:function(){return O},RH:function(){return S},Vl:function(){return x},Ws:function(){return M},ZD:function(){return w},_L:function(){return C},bJ:function(){return A},e$:function(){return I},f6:function(){return Z},pW:function(){return _},pf:function(){return N}});var i=r(52874),n=r(50659),o=r(21609),s=(r(33400),r(41546));function l(e){return"r"in e&&"g"in e&&"b"in e}function a(e){return"h"in e&&"s"in e&&"v"in e}function u(e){return"l"in e&&"a"in e&&"b"in e}function p(e){return"l"in e&&"c"in e&&"h"in e}const c=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],d=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function y(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let l=0;for(i=0;i<o;i++){for(l=0,n=0;n<s;n++)l+=e[i][n]*t[n];r.push(l)}return r}function f(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),r=y(c,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function m(e){const t=y(d,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function h(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function g(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function v(e){return l(e)?e:p(e)?function(e){return m(g(function(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}(e)))}(e):u(e)?function(e){return m(g(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?m(e):a(e)?function(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,o=n*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:n,g:o,b:0};break;case 1:s={r:o,g:n,b:0};break;case 2:s={r:0,g:n,b:o};break;case 3:s={r:0,g:o,b:n};break;case 4:s={r:o,g:0,b:n};break;case 5:case 6:s={r:n,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+i-n),s.g=Math.round(s.g+i-n),s.b=Math.round(s.b+i-n),s}(e):e}function b(e){return a(e)?e:function(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),o=n-Math.min(t,r,i);let s=n,l=0===o?0:n===t?(r-i)/o%6:n===r?(i-t)/o+2:(t-r)/o+4,a=0===o?0:o/s;return l<0&&(l+=6),l*=60,a*=100,s*=100/255,{h:l,s:a,v:s}}(v(e))}function w(e){return u(e)?e:function(e){return h(f(e))}(v(e))}function S(e){return p(e)?e:function(e){return function(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let o=Math.atan2(i,r);return o=o>0?o:o+2*Math.PI,{l:t,c:n,h:o}}(h(f(e)))}(v(e))}function M(e,t){const{r:r,g:n,b:o}=t?.ignoreAlpha?e:function(e){let{r:t,g:r,b:n,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),r=Math.round(o*r+255*(1-o)),n=Math.round(o*n+255*(1-o))),new i.A({r:t,g:r,b:n})}(e);return.2126*r+.7152*n+.0722*o}var _,T;function A(e,t=_.High){return M(e,{ignoreAlpha:!0})>t?new i.A([0,0,0,e.a]):new i.A([255,255,255,e.a])}function I(e,t){const r=w(e);r.l*=1-t;const i=v(r),n=e.clone();return n.setColor(i),n.a=e.a,n}function C(e,t){const r=e.clone();return r.a*=t,r}function x(e,t){const r=b(e);r.s*=t;const i=v(r),n=e.clone();return n.setColor(i),n.a=e.a,n}function O(e){return i.A.toUnitRGBA(e)}function N(e){return(0,s.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function Z(e,t){const r=i.A.toUnitRGBA(e);return r[3]*=t,r}function D(e,t,r={}){if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new i.A(e):e))).length||1===t){const r=[],i=e[0];for(let e=0;e<t;e++)r.push(i.clone());return r}if(r.shuffle&&(e=(0,n.k4)((0,o.o8)(e),r.seed)),e.length>=t){const r=[],i=(e.length-1)/(t-1);for(let n=0;n<t;n++){const t=Math.round(n*i);r.push(e[t].clone())}return r}return function(e,t,r={}){const i=[],o=e.length-1,s=Math.ceil((t-e.length)/o);e:for(let n=0;n<o;n++){const o=e[n],l=e[n+1];for(let n=1;n<=s;n++){const a=n/(s+1);if(i.push(j(o,l,a,r)),i.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,n.k4)(i,r.seed??1)]}(e,t,r)}(T=_||(_={}))[T.Low=160]="Low",T[T.High=225]="High";const V=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function j(e,t,r,o={}){const s=e.r,l=e.g,a=e.b,u=t.r,p=t.g,c=t.b,d=Math.round(s+(u-s)*r),y=Math.round(l+(p-l)*r),f=Math.round(a+(c-a)*r);if(!o.offset)return new i.A([d,y,f]);const m=(0,n.Mo)(o.seed);return new i.A([V(d,m),V(y,m),V(f,m)])}},73888:function(e,t,r){function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{H:function(){return i}})},92955:function(e,t,r){r.d(t,{GB:function(){return n},Qo:function(){return s},Y4:function(){return o}});var i=r(96285);class n{}function o(e){return e instanceof i.bo?e===n.instance:"unknown"===e?.toString().toLowerCase()}function s(e){return o(e)?n.instance:e}n.instance=new i.oh("Etc/UTC")},65298:function(e,t,r){r.d(t,{O7:function(){return I},Hr:function(){return A},el:function(){return T},mT:function(){return C},XX:function(){return w}});var i=r(25591),n=r(39819),o=r(40633),s=r(44740),l=r(91508),a=r(65417),u=r(57652),p=r(1644),c=(r(50917),r(93040)),d=r(74697),y=r(39397),f=r(90683),m=r(26765);const h=()=>o.A.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function v(e){return"polyline"===e[0].type}function b(e){const t=[];let r=0,i=0;for(let n=0;n<e.length;n++){const o=e[n];let s=null;for(let e=0;e<o.length;e++)s=o[e],t.push(s),0===e?(r=s[0],i=r):(r=Math.min(r,s[0]),i=Math.max(i,s[0]));s&&t.push([(r+i)/2,0])}return t}function w(e,t){if(!(e instanceof l.A||e instanceof s.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw h().error(e),new n.A(e)}const r=(0,a.r8)(e),i=[];for(const e of r){const r=[];i.push(r),r.push([e[0][0],e[0][1]]);for(let i=0;i<e.length-1;i++){const n=e[i][0],o=e[i][1],s=e[i+1][0],l=e[i+1][1],a=Math.sqrt((s-n)*(s-n)+(l-o)*(l-o)),u=(l-o)/a,p=(s-n)/a,c=a/t;if(c>1){for(let e=1;e<=c-1;e++){const i=e*t,s=p*i+n,l=u*i+o;r.push([s,l])}const e=(a+Math.floor(c-1)*t)/2,i=p*e+n,s=u*e+o;r.push([i,s])}r.push([s,l])}}return function(e){return"polygon"===e.type}(e)?new s.A({rings:i,spatialReference:e.spatialReference}):new l.A({paths:i,spatialReference:e.spatialReference})}function S(e,t,r){if(t){const t=w(e,1e6);e=(0,p.ci)(t,!0)}return r&&(e=(0,a.kS)(e,r)),e}function M(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const r=(0,a.kd)(i,t);e[0]=i+r*(-2*t)}else if(i<r){const t=(0,a.kd)(i,r);e[0]=i+t*(-2*r)}}else{const i=e.x;if(i>t){const r=(0,a.kd)(i,t);e=e.clone().offset(r*(-2*t),0)}else if(i<r){const t=(0,a.kd)(i,r);e=e.clone().offset(t*(-2*r),0)}}return e}function _(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],o=t.geometries[i],s=(0,a.r8)(o);for(let e=0;e<s.length;e++){const t=s[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const i=t[e][0];r=i>r?i:r}r=Number(r.toFixed(9));const i=-360*(0,a.kd)(r,180);for(let r=0;r<t.length;r++){const t=o.getPoint(e,r);o.setPoint(e,r,t.clone().offset(i,0))}return!0}}))}if(n===r){if(g(e))for(const t of(0,a.r8)(o))e[n]=e[n].addRing(t);else if(v(e))for(const t of(0,a.r8)(o))e[n]=e[n].addPath(t)}else r=n,e[n]=o}return e}async function T(e,t,r){if(!Array.isArray(e))return T([e],t);t&&"string"!=typeof t&&h().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n="string"==typeof t?t:t?.url??i.default.geometryServiceUrl;let o,g,v,b,w,A,I,C,x=0;const O=[],N=[];for(const t of e)if(null!=t)if(o||(o=t.spatialReference,g=(0,u.Vp)(o),v=o.isWebMercator,A=v?102100:4326,b=a.j7[A].maxX,w=a.j7[A].minX,I=a.j7[A].plus180Line,C=a.j7[A].minus180Line),g)if("mesh"===t.type)N.push(t);else if("point"===t.type)N.push(M(t.clone(),b,w));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>M(e,b,w))),N.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,g);N.push(e.rings?new s.A(e):e)}else if(t.extent){const e=t.extent,r=(0,a.kd)(e.xmin,w)*(2*b);let i=0===r?t.clone():(0,a.kS)(t.clone(),r);e.offset(r,0);let{xmin:n,xmax:o}=e;n=Number(n.toFixed(9)),o=Number(o.toFixed(9)),e.intersects(I)&&o!==b?(x=o>x?o:x,i=S(i,v),O.push(i),N.push("cut")):e.intersects(C)&&n!==w?(x=o*(2*b)>x?o*(2*b):x,i=S(i,v,360),O.push(i),N.push("cut")):N.push(i)}else N.push(t.clone());else N.push(t);else N.push(t);let Z=(0,a.kd)(x,b),D=-90;const V=Z,j=new l.A;for(;Z>0;){const e=360*Z-180;j.addPath([[e,D],[e,-1*D]]),D*=-1,Z--}if(O.length>0&&V>0){const t=_(O,await async function(e,t,r,i){const n=(0,y.Dl)(e),o=t[0].spatialReference,s={...i,responseType:"json",query:{...n.query,f:"json",sr:(0,u.YX)(o),target:JSON.stringify({geometryType:(0,d.$B)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},l=await(0,c.A)(n.path+"/cut",s),{cutIndexes:a,geometries:p=[]}=l.data;return{cutIndexes:a,geometries:p.map((e=>{const t=(0,d.rS)(e);return t.spatialReference=o,t}))}}(n,O,j,r)),i=[],o=[];for(let r=0;r<N.length;r++){const n=N[r];if("cut"!==n)o.push(n);else{const n=t.shift(),s=e[r];null!=s&&"polygon"===s.type&&s.rings&&s.rings.length>1&&n.rings.length>=s.rings.length?(i.push(n),o.push("simplify")):o.push(v?(0,p.Gh)(n):n)}}if(!i.length)return o;const s=await async function(e,t,r){const i="string"==typeof e?(0,f.An)(e):e,n=t[0].spatialReference,o=(0,d.$B)(t[0]),s={...r,query:{...i.query,f:"json",sr:(0,u.YX)(n),geometries:JSON.stringify((0,m.X)(t))}},{data:l}=await(0,c.A)(i.path+"/simplify",s);return(0,m.V)(l.geometries,o,n)}(n,i,r),l=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?l.push(t):l.push(v?(0,p.Gh)(s.shift()):s.shift())}return l}const F=[];for(let e=0;e<N.length;e++){const t=N[e];if("cut"!==t)F.push(t);else{const e=O.shift();F.push(!0===v?(0,p.Gh)(e):e)}}return F}function A(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&(0,u.Vp)(e.spatialReference);if(!r)return t;const[i,n]=r.valid,o=2*n,{width:s}=t;let l,{xmin:a,xmax:p}=t;if([a,p]=[p,a],"extent"===e.type||0===s||s<=n||s>o||a<i||p>n)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;l=b(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;l=b(e.paths);break;case"multipoint":l=e.points}const c=t.clone();for(let e=0;e<l.length;e++){let t=l[e][0];t<0?(t+=n,p=Math.max(t,p)):(t-=n,a=Math.min(t,a))}return c.xmin=a,c.xmax=p,c.width<s?(c.xmin-=n,c.xmax-=n,c):t}function I(e,t,r){const i=(0,u.Vp)(r);if(null==i)return e;const[n,o]=i.valid,s=2*o;let l=0,a=0;t>o?l=Math.ceil(Math.abs(t-o)/s):t<n&&(l=-Math.ceil(Math.abs(t-n)/s)),e>o?a=Math.ceil(Math.abs(e-o)/s):e<n&&(a=-Math.ceil(Math.abs(e-n)/s));let p=e+(l-a)*s;const c=p-t;return c>o?p-=s:c<n&&(p+=s),p}function C(e,t){const r=(0,u.Vp)(t);if(r){const[t,i]=r.valid,n=i-t;if(e<t)for(;e<t;)e+=n;if(e>i)for(;e>i;)e-=n}return e}},65417:function(e,t,r){r.d(t,{j7:function(){return s},kS:function(){return a},kd:function(){return l},r8:function(){return u}});var i=r(91508),n=r(57165),o=r(74697);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new i.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.A.WebMercator}),minus180Line:new i.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new i.A({paths:[[[180,-180],[180,180]]],spatialReference:n.A.WGS84}),minus180Line:new i.A({paths:[[[-180,-180],[-180,180]]],spatialReference:n.A.WGS84})}};function l(e,t){return Math.ceil((e-t)/(2*t))}function a(e,t){const r=u(e);for(const e of r)for(const r of e)r[0]+=t;return e}function u(e){return(0,o.Bi)(e)?e.rings:e.paths}},87280:function(e,t,r){function i(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function n(e){if(function(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}(e))return e;const{originPosition:t,scale:r,translate:i}=e,n=r[0]??1,o=r[1]??1;return{originPosition:"lowerLeft",scale:[n,"lowerLeft"===t?o:-o,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function o({scale:e,translate:t},r){return r*e[0]+t[0]}function s({scale:e,translate:t},r){return r*e[1]+t[1]}function l({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function a({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function u(e,t){return e&&t?y:e&&!t?c:!e&&t?d:p}r.d(t,{$X:function(){return v},Gy:function(){return m},P5:function(){return b},Q1:function(){return n},SW:function(){return h},Tr:function(){return g},VV:function(){return i}}),r(74697);const p=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=o(e,i[0]),l=s(e,i[1]);r[0]=[n,l];const{scale:a,originPosition:u}=e,p=a[0],c="lowerLeft"===u?a[1]:-a[1];for(let e=1;e<t.length;e++){const[i,o]=t[e];n+=p*i,l+=c*o,r[e]=[n,l]}return r},c=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=o(e,i[0]),a=s(e,i[1]);r[0]=[n,a,l(e,i[2])];const{scale:u,originPosition:p}=e,c=u[0],d="lowerLeft"===p?u[1]:-u[1];for(let i=1;i<t.length;i++){const[o,s,u]=t[i];n+=c*o,a+=d*s,r[i]=[n,a,l(e,u)]}return r},d=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=o(e,i[0]),l=s(e,i[1]);r[0]=[n,l,a(e,i[2])];const{scale:u,originPosition:p}=e,c=u[0],d="lowerLeft"===p?u[1]:-u[1];for(let i=1;i<t.length;i++){const[o,s,u]=t[i];n+=c*o,l+=d*s,r[i]=[n,l,a(e,u)]}return r},y=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let n=o(e,i[0]),u=s(e,i[1]);r[0]=[n,u,l(e,i[2]),a(e,i[3])];const{scale:p,originPosition:c}=e,d=p[0],y="lowerLeft"===c?p[1]:-p[1];for(let i=1;i<t.length;i++){const[o,s,p,c]=t[i];n+=d*o,u+=y*s,r[i]=[n,u,l(e,p),a(e,c)]}return r};function f(e,t,r){const i=new Array(r.length);for(let n=0;n<r.length;n++)i[n]=t(e,r[n]);return i}function m(e,t,r){const i=n(e);return t.x=function({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}(i,r.x),t.y=function({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}(i,r.y),null!=r.z&&(t.z=function({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}(i,r.z)),null!=r.m&&(t.m=function({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}(i,r.m)),t}function h(e,t,r,i=r?.hasZ??!1,o=r?.hasM??!1){if(null!=r){const s=n(e);t.points=u(i,o)(s,r.points),t.hasZ=i,t.hasM=o}return t}function g(e,t,r,i=null!=r?.z,u=null!=r?.m){if(null==r)return t;const p=n(e);return t.x=o(p,r.x),t.y=s(p,r.y),i&&(t.z=l(p,r.z)),u&&(t.m=a(p,r.m)),t}function v(e,t,r,i=r?.hasZ??!1,o=r?.hasM??!1){if(null!=r){const s=n(e);t.rings=f(s,u(i,o),r.rings),t.hasZ=i,t.hasM=o}return t}function b(e,t,r,i=r?.hasZ??!1,o=r?.hasM??!1){if(null!=r){const s=n(e);t.paths=f(s,u(i,o),r.paths),t.hasZ=i,t.hasM=o}return t}},10842:function(e,t,r){r.r(t),r.d(t,{default:function(){return vt}});var i=r(53804),n=r(25591),o=r(50917),s=r(59469),l=r(90473),a=(r(74865),r(1526),r(96173),r(52308),r(78002),r(30047),r(27777),r(61065),r(6537)),u=r(40633),p=r(78879),c=r(39819),d=r(77793),y=r(34194),f=r(60539),m=r(28181),h=r(62938),g=r(90683),v=r(23502),b=(r(58941),r(13798),r(47332)),w=r(65953),S=r(81392),M=r(17643),_=r(91484),T=r(46157),A=r(57652),I=r(20833),C=r(1615),x=r(92078),O=r(61380),N=r(18195),Z=r(93389),D=r(10748),V=r(30905),j=r(90363);let F=class extends V.oY{constructor(e){super(e),this.break=new j.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new j.A({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new j.A({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new j.A({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new j.A({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new j.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,i._)([(0,v.MZ)({types:D.wC})],F.prototype,"break",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],F.prototype,"first",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],F.prototype,"unlocated",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],F.prototype,"last",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],F.prototype,"middle",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],F.prototype,"waypoint",void 0),F=(0,i._)([(0,w.$)("esri.layers.support.RouteStopSymbols")],F);const E=F;var L=r(22198),R=r(8740);let k=class extends V.oY{constructor(e){super(e),this.directionLines=new L.A({color:[0,122,194],width:6}),this.directionPoints=new j.A({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new j.A({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new R.A({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new L.A({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new L.A({width:8,color:[20,89,127]}),this.stops=new E}};(0,i._)([(0,v.MZ)({types:D.Y7})],k.prototype,"directionLines",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],k.prototype,"directionPoints",void 0),(0,i._)([(0,v.MZ)({types:D.wC})],k.prototype,"pointBarriers",void 0),(0,i._)([(0,v.MZ)({types:D.Ac})],k.prototype,"polygonBarriers",void 0),(0,i._)([(0,v.MZ)({types:D.Y7})],k.prototype,"polylineBarriers",void 0),(0,i._)([(0,v.MZ)({types:D.Y7})],k.prototype,"routeInfo",void 0),(0,i._)([(0,v.MZ)({type:E})],k.prototype,"stops",void 0),k=(0,i._)([(0,w.$)("esri.layers.support.RouteSymbols")],k);const P=k;var z=r(51432),B=r(43173),U=r(29606),q=r(93040),J=r(39397),G=r(74376),$=r(66062);let W=class extends V.oY{constructor(e){super(e),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,i._)([(0,v.MZ)({type:String})],W.prototype,"dataType",void 0),(0,i._)([(0,G.e)($.et,{ignoreUnknown:!1})],W.prototype,"name",void 0),(0,i._)([(0,v.MZ)({type:[String]})],W.prototype,"parameterNames",void 0),(0,i._)([(0,v.MZ)({type:String})],W.prototype,"restrictionUsageParameterName",void 0),(0,i._)([(0,G.e)($.Mm,{ignoreUnknown:!1})],W.prototype,"timeNeutralAttributeName",void 0),(0,i._)([(0,v.MZ)({type:String})],W.prototype,"trafficSupport",void 0),(0,i._)([(0,G.e)($.dn)],W.prototype,"units",void 0),(0,i._)([(0,G.e)($.WU)],W.prototype,"usageType",void 0),W=(0,i._)([(0,w.$)("esri.rest.support.NetworkAttribute")],W);const H=W;let Y=class extends V.oY{constructor(e){super(e),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,i._)([(0,v.MZ)({type:Number})],Y.prototype,"buildTime",void 0),(0,i._)([(0,v.MZ)({type:String})],Y.prototype,"name",void 0),(0,i._)([(0,v.MZ)({type:[H]})],Y.prototype,"networkAttributes",void 0),(0,i._)([(0,v.MZ)()],Y.prototype,"networkSources",void 0),(0,i._)([(0,v.MZ)({type:String})],Y.prototype,"state",void 0),Y=(0,i._)([(0,w.$)("esri.rest.support.NetworkDataset")],Y);const K=Y;var X=r(11501);let Q=class extends V.oY{constructor(e){super(e),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(e){return null==e?null:e.map((e=>$.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>$.et.toJSON(e))))}get capabilities(){return{supportsNow:(this.currentVersion??10)>=10.81}}readDefaultTravelMode(e,t){const r=t.supportedTravelModes?.find((({id:e})=>e===t.defaultTravelMode))??t.supportedTravelModes?.find((({itemId:e})=>e===t.defaultTravelMode));return r?X.A.fromJSON(r):null}};(0,i._)([(0,v.MZ)()],Q.prototype,"accumulateAttributeNames",void 0),(0,i._)([(0,b.w)("accumulateAttributeNames")],Q.prototype,"readAccumulateAttributes",null),(0,i._)([(0,S.K)("accumulateAttributeNames")],Q.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,v.MZ)()],Q.prototype,"attributeParameterValues",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"capabilities",null),(0,i._)([(0,v.MZ)()],Q.prototype,"currentVersion",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"defaultTravelMode",void 0),(0,i._)([(0,b.w)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],Q.prototype,"readDefaultTravelMode",null),(0,i._)([(0,v.MZ)()],Q.prototype,"directionsLanguage",void 0),(0,i._)([(0,G.e)($.Z7)],Q.prototype,"directionsLengthUnits",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"directionsSupportedLanguages",void 0),(0,i._)([(0,G.e)($.Mm,{ignoreUnknown:!1})],Q.prototype,"directionsTimeAttribute",void 0),(0,i._)([(0,v.MZ)()],Q.prototype,"hasZ",void 0),(0,i._)([(0,G.e)($.et,{ignoreUnknown:!1})],Q.prototype,"impedance",void 0),(0,i._)([(0,v.MZ)({type:K})],Q.prototype,"networkDataset",void 0),(0,i._)([(0,v.MZ)({type:[X.A]})],Q.prototype,"supportedTravelModes",void 0),Q=(0,i._)([(0,w.$)("esri.rest.support.NetworkServiceDescription")],Q);const ee=Q;function te(e,t,r,i){i[r]=[t.length,t.length+e.length],e.forEach((e=>{t.push(e.geometry)}))}async function re(e,t,r){if(!e)throw new c.A("network-service:missing-url","Url to Network service is missing");const i=(0,J.jV)({f:"json",token:t},r),{data:n}=await(0,q.A)(e,i),o=n.currentVersion>=10.4?async function(e,t,r){try{const i=(0,J.jV)({f:"json",token:t},r),n=(0,g.UC)(e)+"/retrieveTravelModes",{data:{supportedTravelModes:o,defaultTravelMode:s}}=await(0,q.A)(n,i);return{supportedTravelModes:o,defaultTravelMode:s}}catch(e){throw new c.A("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e})}}(e,t,r):async function(e,t){const r=(0,J.jV)({f:"json"},t),{data:i}=await(0,q.A)(e.replace(/\/rest\/.*$/i,"/info"),r);if(!i?.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:n}=i,o=(0,g.UC)(n)+"/sharing/rest/portals/self",{data:s}=await(0,q.A)(o,r),l=(0,y.wc)("helperServices.routingUtilities.url",s);if(!l)return{supportedTravelModes:[],defaultTravelMode:null};const a=(0,J.Dl)(n),u=/\/solve$/i.test(a.path)?"Route":/\/solveclosestfacility$/i.test(a.path)?"ClosestFacility":"ServiceAreas",p=(0,J.jV)({f:"json",serviceName:u},t),c=(0,g.UC)(l)+"/GetTravelModes/execute",d=await(0,q.A)(c,p),f=[];let m=null;if(d?.data?.results?.length){const e=d.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value?.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);f.push(t)}}else"defaultTravelMode"===t.paramName&&(m=t.value)}return{supportedTravelModes:f,defaultTravelMode:m}}(e,r),{defaultTravelMode:s,supportedTravelModes:l}=await o;return n.defaultTravelMode=s,n.supportedTravelModes=l,ee.fromJSON(n)}var ie=r(62664),ne=r(65298),oe=r(78703),se=r(51084),le=r(50659),ae=r(73037);const ue=new ae.J({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let pe=class extends V.oY{constructor(e){super(e),this.description=null,this.type=null}};(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],pe.prototype,"description",void 0),(0,i._)([(0,v.MZ)({type:String,json:{read:ue.read,write:ue.write}})],pe.prototype,"type",void 0),pe=(0,i._)([(0,w.$)("esri.rest.support.GPMessage")],pe);const ce=pe,de=new ae.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let ye=class extends ce{constructor(e){super(e),this.type=null}};(0,i._)([(0,v.MZ)({type:String,json:{read:de.read,write:de.write}})],ye.prototype,"type",void 0),ye=(0,i._)([(0,w.$)("esri.rest.support.NAMessage")],ye);const fe=ye;let me=class extends V.oY{constructor(e){super(e)}};(0,i._)([(0,v.MZ)({json:{read:{source:"string"}}})],me.prototype,"text",void 0),(0,i._)([(0,G.e)($.Ec,{name:"stringType"})],me.prototype,"type",void 0),me=(0,i._)([(0,w.$)("esri.rest.support.DirectionsString")],me);const he=me;var ge=r(45532);let ve=class extends V.oY{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,t){return(0,oe.Zn)(t.ETA,t.arriveTimeUTC)}readGeometry(e,t){return ge.default.fromJSON(t.point)}};(0,i._)([(0,v.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],ve.prototype,"arriveTime",void 0),(0,i._)([(0,v.MZ)()],ve.prototype,"arriveTimeOffset",void 0),(0,i._)([(0,b.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],ve.prototype,"readArriveTimeOffset",null),(0,i._)([(0,v.MZ)({type:ge.default})],ve.prototype,"geometry",void 0),(0,i._)([(0,b.w)("geometry",["point"])],ve.prototype,"readGeometry",null),(0,i._)([(0,v.MZ)({type:[he]})],ve.prototype,"strings",void 0),ve=(0,i._)([(0,w.$)("esri.rest.support.DirectionsEvent")],ve);const be=ve;var we=r(91508);let Se=class extends s.default{constructor(e){super(e),this.events=null,this.geometry=null,this.strings=null}readGeometry(e,t){const r=function(e){if(null==e||""===e)return null;let t=0,r=0,i=0,n=0;const o=[];let s,l,a,u,p,c,d,y,f=0,m=0,h=0;if(p=e.match(/((\+|-)[^+\-|]+|\|)/g),p||(p=[]),0===parseInt(p[f],32)){f=2;const e=parseInt(p[f],32);f++,c=parseInt(p[f],32),f++,1&e&&(m=p.indexOf("|")+1,d=parseInt(p[m],32),m++),2&e&&(h=p.indexOf("|",m)+1,y=parseInt(p[h],32),h++)}else c=parseInt(p[f],32),f++;for(;f<p.length&&"|"!==p[f];){s=parseInt(p[f],32)+t,f++,t=s,l=parseInt(p[f],32)+r,f++,r=l;const e=[s/c,l/c];m&&(u=parseInt(p[m],32)+i,m++,i=u,e.push(u/d)),h&&(a=parseInt(p[h],32)+n,h++,n=a,e.push(a/y)),o.push(e)}return{paths:[o],hasZ:m>0,hasM:h>0}}(t.compressedGeometry);return null!=r?we.A.fromJSON(r):null}};(0,i._)([(0,v.MZ)({type:[be]})],Se.prototype,"events",void 0),(0,i._)([(0,v.MZ)({type:we.A})],Se.prototype,"geometry",void 0),(0,i._)([(0,b.w)("geometry",["compressedGeometry"])],Se.prototype,"readGeometry",null),(0,i._)([(0,v.MZ)({type:[he]})],Se.prototype,"strings",void 0),Se=(0,i._)([(0,w.$)("esri.rest.support.DirectionsFeature")],Se);const Me=Se;var _e=r(57165);let Te=class extends se.A{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){if(!e)return[];const r=t.summary.envelope.spatialReference??t.spatialReference,i=r&&_e.A.fromJSON(r);return e.map((e=>{const t=Me.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=i),null!=t.events)for(const e of t.events)null!=e.geometry&&(e.geometry.spatialReference=i);return t}))}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new we.A({spatialReference:t});const r=[];for(const t of e)for(const e of t.paths)r.push(...e);const i=[];r.forEach(((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||i.push(e)}));const{hasM:n,hasZ:o}=e[0];return new we.A({hasM:n,hasZ:o,paths:[i],spatialReference:t})}(this.features.map((({geometry:e})=>e)),this.extent.spatialReference):null}get strings(){return this.features.flatMap((({strings:e})=>e)).filter(le.Ru)}};(0,i._)([(0,v.MZ)({type:_.default,json:{read:{source:"summary.envelope"}}})],Te.prototype,"extent",void 0),(0,i._)([(0,v.MZ)({nonNullable:!0})],Te.prototype,"features",void 0),(0,i._)([(0,b.w)("features")],Te.prototype,"readFeatures",null),(0,i._)([(0,v.MZ)()],Te.prototype,"geometryType",void 0),(0,i._)([(0,v.MZ)({readOnly:!0})],Te.prototype,"mergedGeometry",null),(0,i._)([(0,v.MZ)()],Te.prototype,"routeId",void 0),(0,i._)([(0,v.MZ)()],Te.prototype,"routeName",void 0),(0,i._)([(0,v.MZ)({value:null,readOnly:!0})],Te.prototype,"strings",null),(0,i._)([(0,v.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],Te.prototype,"totalDriveTime",void 0),(0,i._)([(0,v.MZ)({json:{read:{source:"summary.totalLength"}}})],Te.prototype,"totalLength",void 0),(0,i._)([(0,v.MZ)({json:{read:{source:"summary.totalTime"}}})],Te.prototype,"totalTime",void 0),Te=(0,i._)([(0,w.$)("esri.rest.support.DirectionsFeatureSet")],Te);const Ae=Te;let Ie=class extends V.oY{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,i._)([(0,v.MZ)({type:se.A,json:{write:!0}})],Ie.prototype,"directionLines",void 0),(0,i._)([(0,v.MZ)({type:se.A,json:{write:!0}})],Ie.prototype,"directionPoints",void 0),(0,i._)([(0,v.MZ)({type:Ae,json:{write:!0}})],Ie.prototype,"directions",void 0),(0,i._)([(0,v.MZ)({type:s.default,json:{write:!0}})],Ie.prototype,"route",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ie.prototype,"routeName",void 0),(0,i._)([(0,v.MZ)({type:[s.default],json:{write:!0}})],Ie.prototype,"stops",void 0),(0,i._)([(0,v.MZ)({type:se.A,json:{write:!0}})],Ie.prototype,"traversedEdges",void 0),(0,i._)([(0,v.MZ)({type:se.A,json:{write:!0}})],Ie.prototype,"traversedJunctions",void 0),(0,i._)([(0,v.MZ)({type:se.A,json:{write:!0}})],Ie.prototype,"traversedTurns",void 0),Ie=(0,i._)([(0,w.$)("esri.rest.support.RouteResult")],Ie);const Ce=Ie;function xe(e){return e?se.A.fromJSON(e).features.filter(le.Ru):[]}let Oe=class extends V.oY{constructor(e){super(e),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return xe(t.barriers)}readPolylineBarriers(e){return xe(e)}readPolygonBarriers(e){return xe(e)}};(0,i._)([(0,v.MZ)({type:[fe]})],Oe.prototype,"messages",void 0),(0,i._)([(0,v.MZ)({type:[s.default]})],Oe.prototype,"pointBarriers",void 0),(0,i._)([(0,b.w)("pointBarriers",["barriers"])],Oe.prototype,"readPointBarriers",null),(0,i._)([(0,v.MZ)({type:[s.default]})],Oe.prototype,"polylineBarriers",void 0),(0,i._)([(0,b.w)("polylineBarriers")],Oe.prototype,"readPolylineBarriers",null),(0,i._)([(0,v.MZ)({type:[s.default]})],Oe.prototype,"polygonBarriers",void 0),(0,i._)([(0,b.w)("polygonBarriers")],Oe.prototype,"readPolygonBarriers",null),(0,i._)([(0,v.MZ)({type:[Ce]})],Oe.prototype,"routeResults",void 0),Oe=(0,i._)([(0,w.$)("esri.rest.support.RouteSolveResult")],Oe);const Ne=Oe;function Ze(e){return e instanceof se.A}async function De(e,t,r){const i=[],n=[],o={},s={},l=(0,J.Dl)(e),{path:a}=l;Ze(t.stops)&&te(t.stops.features,n,"stops.features",o),Ze(t.pointBarriers)&&te(t.pointBarriers.features,n,"pointBarriers.features",o),Ze(t.polylineBarriers)&&te(t.polylineBarriers.features,n,"polylineBarriers.features",o),Ze(t.polygonBarriers)&&te(t.polygonBarriers.features,n,"polygonBarriers.features",o);const p=await(0,ne.el)(n);for(const e in o){const t=o[e];i.push(e),s[e]=p.slice(t[0],t[1])}if(function(e,t){for(let r=0;r<t.length;r++){const i=e[t[r]];if(i&&i.length)for(const e of i)if(null!=e&&e.hasZ)return!0}return!1}(s,i)){let e=null;try{e=await re(a,t.apiKey,r)}catch{}e&&!e.hasZ&&function(e,t){for(let r=0;r<t.length;r++){const i=e[t[r]];if(i&&i.length)for(const e of i)e.z=void 0}u.A.getLogger("esri.rest.networkService").warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}(s,i)}for(const e in s)s[e].forEach(((r,i)=>{(0,ie.Jt)(t,e)[i].geometry=r}));const c={...r,query:{...l.query,...(0,oe.r9)(t),f:"json"}},d=a.endsWith("/solve")?a:`${a}/solve`,{data:y}=await(0,q.A)(d,c);return function(e){const{barriers:t,directionLines:r,directionPoints:i,directions:n,messages:o,polygonBarriers:s,polylineBarriers:l,routes:a,stops:u,traversedEdges:p,traversedJunctions:c,traversedTurns:d}=e,y=e=>{const t=m.find((t=>t.routeName===e));if(null!=t)return t;const r={routeId:m.length+1,routeName:e};return m.push(r),r},f=e=>{const t=m.find((t=>t.routeId===e));if(null!=t)return t;const r={routeId:e,routeName:null};return m.push(r),r},m=[];a?.features.forEach(((e,t)=>{e.geometry.spatialReference=a.spatialReference??void 0;const r=e.attributes.Name,i=t+1;m.push({routeId:i,routeName:r,route:e})})),n?.forEach((e=>{const{routeName:t}=e;y(t).directions=e}));const h=u?.features.every((e=>null==e.attributes.RouteName))&&m.length>0?m[0].routeName:null;return u?.features.forEach((e=>{e.geometry&&(e.geometry.spatialReference??=u.spatialReference??void 0);const t=h??e.attributes.RouteName,r=y(t);r.stops??=[],r.stops.push(e)})),r?.features.forEach((e=>{const t=e.attributes.RouteID,i=f(t),{geometryType:n,spatialReference:o}=r;i.directionLines??={features:[],geometryType:n,spatialReference:o},i.directionLines.features.push(e)})),i?.features.forEach((e=>{const t=e.attributes.RouteID,r=f(t),{geometryType:n,spatialReference:o}=i;r.directionPoints??={features:[],geometryType:n,spatialReference:o},r.directionPoints.features.push(e)})),p?.features.forEach((e=>{const t=e.attributes.RouteID,r=f(t),{geometryType:i,spatialReference:n}=p;r.traversedEdges??={features:[],geometryType:i,spatialReference:n},r.traversedEdges.features.push(e)})),c?.features.forEach((e=>{const t=e.attributes.RouteID,r=f(t),{geometryType:i,spatialReference:n}=c;r.traversedJunctions??={features:[],geometryType:i,spatialReference:n},r.traversedJunctions.features.push(e)})),d?.features.forEach((e=>{const t=e.attributes.RouteID,r=f(t);r.traversedTurns??={features:[]},r.traversedTurns.features.push(e)})),Ne.fromJSON({routeResults:m,barriers:t,polygonBarriers:s,polylineBarriers:l,messages:o})}(y)}var Ve=r(24227),je=r(49359),Fe=r(93887),Ee=r(29335),Le=r(55339),Re=r(63253),ke=r(75743),Pe=r(67888);const ze={type:String,json:{read:{source:"token"},write:{target:"token"}}};var Be=r(74697);let Ue=class extends((0,ke.O)(V.oY)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ue.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,v.MZ)({types:o.yR,json:{read:Be.rS,write:!0}})],Ue.prototype,"geometry",void 0),(0,i._)([(0,G.e)($.Vj)],Ue.prototype,"geometryType",void 0),(0,i._)([(0,v.MZ)({type:String,json:{name:"layerName",write:!0}})],Ue.prototype,"name",void 0),(0,i._)([(0,G.e)($.vS,{name:"spatialRel"})],Ue.prototype,"spatialRelationship",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ue.prototype,"type",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ue.prototype,"where",void 0),Ue=(0,i._)([(0,w.$)("esri.rest.support.DataLayer")],Ue);const qe=Ue;var Je;let Ge=Je=class extends se.A{constructor(e){super(e),this.doNotLocateOnRestrictedElements=null}clone(){return new Je({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ge.prototype,"doNotLocateOnRestrictedElements",void 0),Ge=Je=(0,i._)([(0,w.$)("esri.rest.support.NetworkFeatureSet")],Ge);const $e=Ge;let We=class extends((0,ke.O)(V.oY)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],We.prototype,"doNotLocateOnRestrictedElements",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],We.prototype,"url",void 0),We=(0,i._)([(0,w.$)("esri.rest.support.NetworkUrl")],We);const He=We;var Ye;let Ke=Ye=class extends((0,ke.O)(V.oY)){constructor(e){super(e),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(e){return(0,Pe.PZ)(Ye,e)}readAccumulateAttributes(e){return null==e?null:e.map((e=>$.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>$.et.toJSON(e))))}writePointBarriers(e,t,r){Qe(e,t,r)}writePolygonBarrier(e,t,r){Qe(e,t,r)}writePolylineBarrier(e,t,r){Qe(e,t,r)}readRestrictionAttributes(e){return null==e?null:e.map((e=>$.OC.fromJSON(e)))}writeRestrictionAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>$.OC.toJSON(e))))}readStartTime(e,t){const{startTime:r}=t;return null==r?null:"now"===r?"now":new Date(r)}writeStartTime(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}readStops(e,t){return function(e){return function(e){return e&&"type"in e}(e)?qe.fromJSON(e):function(e){return e&&"url"in e}(e)?He.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?$e.fromJSON(e):function(e){return e&&"features"in e}(e)?se.A.fromJSON(e):null}(t.stops)}writeStops(e,t,r){Qe(e,t,r)}};(0,i._)([(0,v.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],Ke.prototype,"accumulateAttributes",void 0),(0,i._)([(0,b.w)("accumulateAttributes")],Ke.prototype,"readAccumulateAttributes",null),(0,i._)([(0,S.K)("accumulateAttributes")],Ke.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,v.MZ)(ze)],Ke.prototype,"apiKey",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ke.prototype,"attributeParameterValues",void 0),(0,i._)([(0,v.MZ)({type:String,json:{write:!0}})],Ke.prototype,"directionsLanguage",void 0),(0,i._)([(0,G.e)($.Z7)],Ke.prototype,"directionsLengthUnits",void 0),(0,i._)([(0,G.e)($.aJ)],Ke.prototype,"directionsOutputType",void 0),(0,i._)([(0,G.e)($.$n)],Ke.prototype,"directionsStyleName",void 0),(0,i._)([(0,G.e)($.Mm,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],Ke.prototype,"directionsTimeAttribute",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"findBestSequence",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"geometryPrecision",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"geometryPrecisionM",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"geometryPrecisionZ",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"ignoreInvalidLocations",void 0),(0,i._)([(0,G.e)($.et,{name:"impedanceAttributeName",ignoreUnknown:!1})],Ke.prototype,"impedanceAttribute",void 0),(0,i._)([(0,v.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"outputGeometryPrecision",void 0),(0,i._)([(0,G.e)($.hY)],Ke.prototype,"outputGeometryPrecisionUnits",void 0),(0,i._)([(0,G.e)($.Sr)],Ke.prototype,"outputLines",void 0),(0,i._)([(0,v.MZ)({type:_e.A,json:{name:"outSR",write:!0}})],Ke.prototype,"outSpatialReference",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ke.prototype,"overrides",void 0),(0,i._)([(0,v.MZ)({json:{name:"barriers",write:!0}})],Ke.prototype,"pointBarriers",void 0),(0,i._)([(0,S.K)("pointBarriers")],Ke.prototype,"writePointBarriers",null),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ke.prototype,"polygonBarriers",void 0),(0,i._)([(0,S.K)("polygonBarriers")],Ke.prototype,"writePolygonBarrier",null),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ke.prototype,"polylineBarriers",void 0),(0,i._)([(0,S.K)("polylineBarriers")],Ke.prototype,"writePolylineBarrier",null),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"preserveFirstStop",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"preserveLastStop",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"preserveObjectID",void 0),(0,i._)([(0,v.MZ)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],Ke.prototype,"restrictionAttributes",void 0),(0,i._)([(0,b.w)("restrictionAttributes")],Ke.prototype,"readRestrictionAttributes",null),(0,i._)([(0,S.K)("restrictionAttributes")],Ke.prototype,"writeRestrictionAttributes",null),(0,i._)([(0,G.e)($.hE)],Ke.prototype,"restrictUTurns",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnBarriers",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnDirections",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnPolygonBarriers",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnPolylineBarriers",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnRoutes",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnStops",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnTraversedEdges",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnTraversedJunctions",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnTraversedTurns",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnZ",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ke.prototype,"startTime",void 0),(0,i._)([(0,b.w)("startTime")],Ke.prototype,"readStartTime",null),(0,i._)([(0,S.K)("startTime")],Ke.prototype,"writeStartTime",null),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"startTimeIsUTC",void 0),(0,i._)([(0,v.MZ)({json:{write:!0}})],Ke.prototype,"stops",void 0),(0,i._)([(0,b.w)("stops")],Ke.prototype,"readStops",null),(0,i._)([(0,S.K)("stops")],Ke.prototype,"writeStops",null),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"timeWindowsAreUTC",void 0),(0,i._)([(0,v.MZ)({type:X.A,json:{write:!0}})],Ke.prototype,"travelMode",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"useHierarchy",void 0),(0,i._)([(0,v.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"useTimeWindows",void 0),Ke=Ye=(0,i._)([(0,w.$)("esri.rest.support.RouteParameters")],Ke);const Xe=Ke;function Qe(e,t,r){null!=e&&(t[r]=p.A.isCollection(e)?{features:e.toArray().map((e=>e.toJSON()))}:e.toJSON())}var et=r(28940),tt=r(34258),rt=r(71673);function it(e){return e.length?e:null}function nt(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:nt("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:nt("esriGeometryPolyline")}}}function ot(e){return"layers"in e}async function st(e){const t=_e.A.WGS84;return await(0,T.initializeProjection)(e.spatialReference,t),(0,T.project)(e,t)}function lt(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function at(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,h.oU)(e,t,"meters")}const ut=p.A.ofType(Ve.A),pt=p.A.ofType(je.A),ct=p.A.ofType(Fe.A),dt=p.A.ofType(Ee.A),yt=p.A.ofType(Le.A),ft=p.A.ofType(tt.A),mt="esri.layers.RouteLayer",ht=()=>u.A.getLogger(mt);let gt=class extends((0,C.dM)((0,N.j)((0,x.q)((0,O.A)((0,d.P)(I.A)))))){constructor(e){super(e),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.defaultSymbols=new P,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new ct,this.polygonBarriers=new dt,this.polylineBarriers=new yt,this.routeInfo=null,this.spatialReference=_e.A.WGS84,this.stops=new ft,this.type="route";const t=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,m.on)((()=>this.stops),"change",t,{sync:!0,onListenerAdd:t}))}writeFeatureCollectionWebmap(e,t,r,i){const n=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((e=>!!e)),o=n.map(((e,t)=>t)),s="web-map"===i.origin?"featureCollection.layers":"layers";(0,y.sM)(s,n,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=o}readDirectionLines(e,t){return this._getNetworkFeatures(t,"DirectionLines",(e=>Ve.A.fromGraphic(e)))}readDirectionPoints(e,t){return this._getNetworkFeatures(t,"DirectionPoints",(e=>je.A.fromGraphic(e)))}get fullExtent(){const e=new _.default({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:_e.A.WGS84});if(null!=this.routeInfo?.geometry)return this.routeInfo.geometry.extent??e;if(null==this.stops)return e;const t=this.stops.filter((e=>null!=e.geometry));if(t.length<2)return e;const{spatialReference:r}=t.at(0).geometry;if(null==r)return e;const i=t.toArray().map((e=>{const t=e.geometry;return[t.x,t.y]}));return new rt.A({points:i,spatialReference:r}).extent}readMaxScale(e,t){const r=ot(t)?t.layers:t.featureCollection?.layers,i=r?.find((e=>null!=e.layerDefinition.maxScale));return i?.layerDefinition.maxScale??0}readMinScale(e,t){const r=ot(t)?t.layers:t.featureCollection?.layers,i=r?.find((e=>null!=e.layerDefinition.minScale));return i?.layerDefinition.minScale??0}readPointBarriers(e,t){return this._getNetworkFeatures(t,"Barriers",(e=>Fe.A.fromGraphic(e)))}readPolygonBarriers(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",(e=>Ee.A.fromGraphic(e)))}readPolylineBarriers(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",(e=>Le.A.fromGraphic(e)))}readRouteInfo(e,t){return this._getNetworkFeatures(t,"RouteInfo",(e=>Re.A.fromGraphic(e))).at(0)??null}readSpatialReference(e,t){const r=ot(t)?t.layers:t.featureCollection?.layers;if(!r?.length)return _e.A.WGS84;const{layerDefinition:i,featureSet:n}=r[0],o=n.features[0],s=o?.geometry?.spatialReference??n.spatialReference??i.spatialReference??i.extent.spatialReference??A.KK;return _e.A.fromJSON(s)}readStops(e,t){return this._getNetworkFeatures(t,"Stops",(e=>tt.A.fromGraphic(e)),(e=>this._setStopSymbol(e)))}get title(){return this.routeInfo?.name??"Route"}set title(e){this._overrideIfSome("title",e)}get url(){return n.default.routeServiceUrl}set url(e){null!=e?this._set("url",(0,Z.Jf)(e,ht())):this._set("url",n.default.routeServiceUrl)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}async save(){await this.load();const{fullExtent:e,portalItem:t}=this;if(!t)throw new c.A("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!t.id)throw new c.A("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==t.type)throw new c.A("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(null==this.routeInfo)throw new c.A("routelayer:route-unsolved","save() requires a solved route");const{portal:r}=t;await r.signIn(),r.user||await t.reload();const{itemUrl:i,itemControl:n}=t;if("admin"!==n&&"update"!==n)throw new c.A("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");const o={messages:[],origin:"portal-item",portal:r,url:i?(0,g.An)(i):void 0,writtenProperties:[]},s=this.write(void 0,o);return t.extent=await st(e),t.title=this.title,await t.update({data:s}),t}async saveAs(e,t={}){if(await this.load(),null==this.routeInfo)throw new c.A("routelayer:route-unsolved","saveAs() requires a solved route");const r=B.default.from(e).clone();r.extent??=await st(this.fullExtent),r.id=null,r.portal??=z.A.getDefault(),r.title??=this.title,r.type="Feature Collection",r.typeKeywords=["Data","Feature Collection",U.mm.MULTI_LAYER,"Route Layer"];const{portal:i}=r,n={messages:[],origin:"portal-item",portal:i,url:null,writtenProperties:[]};await i.signIn();const o=t?.folder,s=this.write(void 0,n);return await i.user.addItem({item:r,folder:o,data:s}),this.portalItem=r,(0,M.v)(n),n.portalItem=r,r}async solve(e,t){const r=e?.stops??this.stops,i=e?.pointBarriers??it(this.pointBarriers),n=e?.polylineBarriers??it(this.polylineBarriers),o=e?.polygonBarriers??it(this.polygonBarriers);if(null==r)throw new c.A("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if((function(e){return"esri.rest.support.FeatureSet"===e.declaredClass}(r)||function(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}(r))&&r.features.length<2||p.A.isCollection(r)&&r.length<2)throw new c.A("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(p.A.isCollection(r))for(const e of r)e.routeName=null;const s=e?.apiKey,l=this.url,a=await this._getServiceDescription(l,s,t),u=e?.travelMode??a.defaultTravelMode,d=e?.accumulateAttributes??[];null!=u&&(d.push(u.distanceAttributeName),u.timeAttributeName&&d.push(u.timeAttributeName));const y={accumulateAttributes:d,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:i,polylineBarriers:n,polygonBarriers:o,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!i,returnDirections:!0,returnPolygonBarriers:!!o,returnPolylineBarriers:!!n,returnRoutes:!0,returnStops:!0,stops:r},m=Xe.from(e??{});let h;m.set(y);try{h=await De(l,m,t)}catch(e){throw(0,f.zf)(e)?e:new c.A("routelayer:failed-route-request","the routing request failed",{error:e})}const g=this._toRouteLayerSolution(h);return this._isOverridden("title")||(this.title=g.routeInfo.name??"Route"),function(e,t,r){const i=t.networkDataset?.networkAttributes,n=i?.filter((({usageType:e})=>"cost"===e))??[],o=r.travelMode??t.defaultTravelMode;if(null==o)return void ht().warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");const{timeAttributeName:s,distanceAttributeName:l}=o,a=n.find((({name:e})=>e===s)),u=n.find((({name:e})=>e===l)),p=r.travelMode?.impedanceAttributeName??r.impedanceAttribute??t.impedance,d=a?.units,y=u?.units;if(!d||!y)throw new c.A("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");const f=r.directionsLanguage??t.directionsLanguage,m=r.accumulateAttributes??t.accumulateAttributeNames??[],h=new Set(n.filter((({name:e})=>e===s||e===l||e===p||null!=e&&m.includes(e))).map((({name:e})=>e))),g=e=>{for(const t in e)h.has(t)||delete e[t]};for(const t of e.pointBarriers)null!=t.costs&&(t.addedCost=t.costs[p]??0,g(t.costs));for(const t of e.polygonBarriers)null!=t.costs&&(t.scaleFactor=t.costs[p]??1,g(t.costs));for(const t of e.polylineBarriers)null!=t.costs&&(t.scaleFactor=t.costs[p]??1,g(t.costs));const{routeInfo:v}=e,{findBestSequence:b,preserveFirstStop:w,preserveLastStop:S,startTimeIsUTC:M,timeWindowsAreUTC:_}=r;v.analysisSettings=new et.A({accumulateAttributes:m,directionsLanguage:f,findBestSequence:b,preserveFirstStop:w,preserveLastStop:S,startTimeIsUTC:M,timeWindowsAreUTC:_,travelMode:o}),v.totalDuration=lt(v.totalCosts?.[s]??0,d),v.totalDistance=at(v.totalCosts?.[l]??0,y),v.totalLateDuration=lt(v.totalViolations?.[s]??0,d),v.totalWaitDuration=lt(v.totalWait?.[s]??0,d),null!=v.totalCosts&&g(v.totalCosts),null!=v.totalViolations&&g(v.totalViolations),null!=v.totalWait&&g(v.totalWait);for(const t of e.stops)null!=t.serviceCosts&&(t.serviceDuration=lt(t.serviceCosts[s]??0,d),t.serviceDistance=at(t.serviceCosts[l]??0,y),g(t.serviceCosts)),null!=t.cumulativeCosts&&(t.cumulativeDuration=lt(t.cumulativeCosts[s]??0,d),t.cumulativeDistance=at(t.cumulativeCosts[l]??0,y),g(t.cumulativeCosts)),null!=t.violations&&(t.lateDuration=lt(t.violations[s]??0,d),g(t.violations)),null!=t.wait&&(t.waitDuration=lt(t.wait[s]??0,d),g(t.wait))}(g,a,m),g}update(e){const{stops:t,directionLines:r,directionPoints:i,pointBarriers:n,polylineBarriers:o,polygonBarriers:s,routeInfo:l}=e;this.set({stops:t,pointBarriers:n,polylineBarriers:o,polygonBarriers:s}),this._set("directionLines",r),this._set("directionPoints",i),this._set("routeInfo",l),null!=l.geometry&&(this.spatialReference=l.geometry.spatialReference)}_getNetworkFeatures(e,t,r,i){const n=ot(e)?e.layers:e.featureCollection?.layers,o=n?.find((e=>e.layerDefinition.name===t));if(null==o)return new p.A;const{layerDefinition:u,popupInfo:c,featureSet:d}=o,y=u.drawingInfo.renderer,{features:f}=d,m=d.spatialReference??u.spatialReference??u.extent.spatialReference??A.KK,h=y&&(0,a.L)(y),g=_e.A.fromJSON(m),v=f.map((e=>{const i=s.default.fromJSON(e);null!=i.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(i.geometry.spatialReference=g);const n=r(i);return n.symbol??=h?.getSymbol(i)??this._getNetworkSymbol(t),n.popupTemplate??=c&&l.A.fromJSON(c),n}));return i&&v.some((({symbol:e})=>!e))&&i(v),new p.A(v)}_getNetworkSymbol(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}async _getServiceDescription(e,t,r){if(null!=this._cachedServiceDescription&&this._cachedServiceDescription.url===e)return this._cachedServiceDescription.serviceDescription;const i=await re(e,t,r);return this._cachedServiceDescription={serviceDescription:i,url:e},i}_setStopSymbol(e){if(!e||0===e.length)return;if(null==this.defaultSymbols.stops)return;if(e.every((({symbol:e})=>null!=e)))return;const{first:t,last:r,middle:i,unlocated:n,waypoint:o,break:s}=this.defaultSymbols.stops;if(null==this.routeInfo||1===e.length)return void e.forEach(((n,o)=>{switch(o){case 0:n.symbol=t;break;case e.length-1:n.symbol=r;break;default:n.symbol=i}}));const l=e.map((({sequence:e})=>e)).filter((e=>null!=e)),a=Math.min(...l),u=Math.max(...l);for(const l of e)l.sequence!==a?l.sequence!==u?"ok"===l.status||"not-located-on-closest"===l.status?"waypoint"!==l.locationType?"break"!==l.locationType?l.symbol=i:l.symbol=s:l.symbol=o:l.symbol=n:l.symbol=r:l.symbol=t}_toRouteLayerSolution(e){const t=e.routeResults[0].stops?.map((e=>tt.A.fromJSON(e.toJSON())));this._setStopSymbol(t);const r=new ft(t),i=new dt(e.polygonBarriers?.map((e=>{const t=Ee.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polygonBarriers,t}))),n=new yt(e.polylineBarriers?.map((e=>{const t=Le.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polylineBarriers,t}))),o=new ct(e.pointBarriers?.map((e=>{const t=Fe.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.pointBarriers,t}))),s=e.routeResults[0].route?.toJSON(),l=Re.A.fromJSON(s);l.symbol=this.defaultSymbols.routeInfo;const a=new pt(e.routeResults[0].directionPoints?.features.map((e=>{const t=je.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionPoints,t})));return{directionLines:new ut(e.routeResults[0].directionLines?.features.map((e=>{const t=Ve.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionLines,t}))),directionPoints:a,pointBarriers:o,polygonBarriers:i,polylineBarriers:n,routeInfo:l,stops:r}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",Ve.A.fields,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",je.A.fields,"DirectionPoints","Direction Points")}_writeNetworkFeatures(e,t,r,i,n,o){if(!e?.length)return null;const s=this.spatialReference.toJSON(),{fullExtent:l,maxScale:a,minScale:u}=this;return{featureSet:{features:e.toArray().map((e=>function(e){const{attributes:t,geometry:r,popupTemplate:i,symbol:n}=e.toGraphic().toJSON();return{attributes:t,geometry:r,popupInfo:i,symbol:n}}(e))),geometryType:r,spatialReference:s},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=t?t.toJSON():nt(r)}},extent:l.toJSON(),fields:i,geometryType:r,hasM:!1,hasZ:!1,maxScale:a,minScale:u,name:n,objectIdField:"ObjectID",spatialReference:s,title:o,type:"Feature Layer",typeIdField:""}}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",Fe.A.fields,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",Ee.A.fields,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",Le.A.fields,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new p.A([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",Re.A.fields,"RouteInfo","Route Details")}_writeStops(){const e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",tt.A.fields,"Stops","Stops");if(null==e)return null;const{stops:t}=this.defaultSymbols,r=t?.first?.toJSON(),i=t?.middle?.toJSON(),n=t?.last?.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:i,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:`${this.stops.length}`,symbol:n,label:"Last Stop"}]},e}};(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],gt.prototype,"_featureCollection",void 0),(0,i._)([(0,S.K)(["web-map","portal-item"],"_featureCollection")],gt.prototype,"writeFeatureCollectionWebmap",null),(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],gt.prototype,"_type",void 0),(0,i._)([(0,v.MZ)({nonNullable:!0,type:P})],gt.prototype,"defaultSymbols",void 0),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"directionLines",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],gt.prototype,"readDirectionLines",null),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"directionPoints",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],gt.prototype,"readDirectionPoints",null),(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],gt.prototype,"featureCollectionType",void 0),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"fullExtent",null),(0,i._)([(0,v.MZ)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],gt.prototype,"legendEnabled",void 0),(0,i._)([(0,v.MZ)({type:["show","hide"]})],gt.prototype,"listMode",void 0),(0,i._)([(0,v.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],gt.prototype,"maxScale",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],gt.prototype,"readMaxScale",null),(0,i._)([(0,v.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],gt.prototype,"minScale",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],gt.prototype,"readMinScale",null),(0,i._)([(0,v.MZ)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],gt.prototype,"operationalLayerType",void 0),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(Fe.A)})],gt.prototype,"pointBarriers",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],gt.prototype,"readPointBarriers",null),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(Ee.A)})],gt.prototype,"polygonBarriers",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],gt.prototype,"readPolygonBarriers",null),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(Le.A)})],gt.prototype,"polylineBarriers",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],gt.prototype,"readPolylineBarriers",null),(0,i._)([(0,v.MZ)({readOnly:!0})],gt.prototype,"routeInfo",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],gt.prototype,"readRouteInfo",null),(0,i._)([(0,v.MZ)({type:_e.A})],gt.prototype,"spatialReference",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],gt.prototype,"readSpatialReference",null),(0,i._)([(0,v.MZ)({nonNullable:!0,type:p.A.ofType(tt.A)})],gt.prototype,"stops",void 0),(0,i._)([(0,b.w)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],gt.prototype,"readStops",null),(0,i._)([(0,v.MZ)()],gt.prototype,"title",null),(0,i._)([(0,v.MZ)({readOnly:!0,json:{read:!1}})],gt.prototype,"type",void 0),(0,i._)([(0,v.MZ)()],gt.prototype,"url",null),gt=(0,i._)([(0,w.$)(mt)],gt);const vt=gt},92078:function(e,t,r){r.d(t,{q:function(){return w}});var i=r(53804),n=r(39819),o=r(90683),s=r(23502),l=r(67888),a=(r(13798),r(58941),r(47332)),u=r(65953),p=r(81392),c=r(64786),d=r(97354),y=r(99495);const f={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},m={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},h={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},g={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":f,"web-map/basemap":m,"web-map/tables":h,"link-chart/operational-layers":{...f,LinkChartLayer:!0},"link-chart/basemap":m,"link-chart/tables":h,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var v=r(7010),b=r(52038);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&(0,y.R)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,i){e&&"tables"!==i?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?b.A.fromArray(e):null}writeTimeExtent(e,t,r,i){e&&"tables"!==i.layerContainerType&&(e.isEmpty?i?.messages&&i.messages.push(new n.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,d.t)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=g[e];let i=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(i=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(i=!1),!i)return t.messages?.push(new n.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.A&&"web-document-write:property-required"===e.name)).length;return(0,o.w8)(r?.url)?(t?.messages?.push(new n.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:r}beforeSave(){}};return(0,i._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,i._)([(0,a.w)("id",["id"])],t.prototype,"readId",null),(0,i._)([(0,s.MZ)(v.C1)],t.prototype,"listMode",void 0),(0,i._)([(0,p.K)("listMode")],t.prototype,"writeListMode",null),(0,i._)([(0,s.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:c.K}}}}})],t.prototype,"operationalLayerType",void 0),(0,i._)([(0,p.K)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,i._)([(0,s.MZ)(v.ke)],t.prototype,"opacity",void 0),(0,i._)([(0,s.MZ)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,i._)([(0,p.K)("title"),(0,p.K)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,i._)([(0,s.MZ)({type:b.A,json:{origins:{"web-scene":{write:{layerContainerTypes:c.K}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,a.w)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,i._)([(0,p.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[l.jz,l.Uv]]}})],t.prototype,"writeTimeExtent",null),(0,i._)([(0,s.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:c.K}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,i._)([(0,u.$)("esri.layers.mixins.OperationalLayer")],t),t}},61380:function(e,t,r){r.d(t,{A:function(){return M}});var i=r(53804),n=r(25591),o=r(7156),s=r(93040),l=r(77472),a=r(39819),u=r(40633),p=r(95929),c=r(60539),d=r(90683),y=r(23502),f=(r(58941),r(13798),r(47332)),m=r(65953),h=r(81392),g=r(11432),v=r(51432),b=r(43173),w=r(85956),S=r(29606);const M=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,p.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new b.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:i}=await r.e(1536).then(r.bind(r,58615));return(0,c.Te)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,c.zf)(e)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,c.QP)(e),!0))))}async setUserPrivileges(e,t){if(!n.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:i},content:{updateItem:n}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",n)}catch(e){(0,c.QP)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const i=e===r.id;if(i&&r.portal.user)return(0,S.It)(r);let n,s;if(i)n=r.portal.url;else try{n=await(0,g.wI)(this.url,t)}catch(e){(0,c.QP)(e)}if(!n||!(0,d.b8)(n,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;s=await(o.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,c.QP)(e)}const l=!0,a=!1,u=!1;if(!s)return{features:{edit:l,fullEdit:a},content:{updateItem:u}};try{if(i?await r.reload():(r=new b.default({id:e,portal:{url:n}}),await r.load(t)),r.portal.user)return(0,S.It)(r)}catch(e){(0,c.QP)(e)}return{features:{edit:l,fullEdit:a},content:{updateItem:u}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,c.QP)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?o.id?.findCredential(this.url):null;if(!t)return!0;const r=_.credential===t?_.user:await this._fetchEditingUser(e);return _.credential=t,_.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=o.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const i=`${r.owningSystemUrl}/sharing/rest`,n=v.A.getDefault();if(n&&n.loaded&&(0,d.S8)(n.restUrl)===(0,d.S8)(i))return n.user;const a=`${i}/community/self`,u=null!=e?e.signal:null,p=await(0,l.Ke)((0,s.A)(a,{authMode:"no-prompt",query:{f:"json"},signal:u}));return p.ok?w.A.fromJSON(p.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,i=this.portalItem?.id&&(this.portalItem.portal||v.A.getDefault());return r&&i&&!(0,d.ut)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new a.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,y.MZ)({type:b.default})],t.prototype,"portalItem",null),(0,i._)([(0,f.w)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,h.K)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,y.MZ)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,y.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,i._)([(0,m.$)("esri.layers.mixins.PortalLayer")],t),t},_={credential:null,user:null}},7103:function(e,t,r){r.d(t,{A:function(){return d}});var i=r(39819),n=r(30905),o=r(40633),s=r(25738),l=r(92955),a=r(53743),u=r(21168),p=r(96285);const c=new Map;class d{static fromJSON(e){return new d(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new d(e.fields??[],h(e))}static fromLayerJSON(e){return new d(e.fields??[],h(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const e of this.fields){const t=e?.name,i=f(t);if(t&&i){const n=y(t);this._fieldsMap.set(t,e),this._fieldsMap.set(n,e),this._normalizedFieldsMap.set(i,e),r.push(`${n}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,a.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,a.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,a.te)(e)||(0,a.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,a.te)(e)||(0,a.Xz)(e)||e.nullable||void 0!==(0,a.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(y(e))??this._normalizedFieldsMap.get(f(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(o.A.getLogger("esri.layers.support.FieldsIndex").error(new i.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):m.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?l.GB.instance:t===u.n$?p.mQ.utcInstance:(0,s.tE)(c,t,(()=>p.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,a.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,n.Wj)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function y(e){return e.trim().toLowerCase()}function f(e){return(0,a.rS)(e)?.toLowerCase()??""}const m=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function h(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:i,editFieldsInfo:n}=e,o=(i?"startField"in i?i.startField:i.startTimeField:"")??"",s=(i?"endField"in i?i.endField:i.endTimeField:"")??"",l=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,u.ZS)(e.dateFieldsTimeReference):null,a=n?function(e){return"timeZone"in e}(n)?n.timeZone??l:n.dateFieldsTimeReference?(0,u.ZS)(n.dateFieldsTimeReference):l??u.n$:null,p=i?function(e){return"timeZone"in e}(i)?i.timeZone??l:i.timeReference?(0,u.ZS)(i.timeReference):l:null,c=new Map([[y(n?.creationDateField??""),a],[y(n?.editDateField??""),a],[y(o),p],[y(s),p]]);for(const{name:i,type:n}of e.fields)if(m.has(n))t.set(i,u.L5);else if("date"!==n&&"esriFieldTypeDate"!==n)t.set(i,null);else if(r)t.set(i,u.L5);else{const e=c.get(y(i??""))??l;t.set(i,e)}return t}},7010:function(e,t,r){r.d(t,{C1:function(){return T},Fm:function(){return w},Ih:function(){return b},M6:function(){return c},OZ:function(){return y},PY:function(){return p},Qo:function(){return h},Yj:function(){return m},fV:function(){return f},hG:function(){return _},hn:function(){return M},id:function(){return S},kF:function(){return d},ke:function(){return v},zQ:function(){return A}});var i=r(64786),n=r(91484),o=r(57165),s=r(60534),l=r(6422),a=r(92777),u=r(59798);const p={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:i.K}}},c={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},d={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:i.K}}},y={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.w}}},f={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:i.K}}},m={value:null,type:l.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:i.K}}};function h(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const g={write:{enabled:!0,layerContainerTypes:i.K},read:!0},v={type:Number,json:{origins:{"web-document":g,"portal-item":{write:!0}}}},b={...v,json:{...v.json,origins:{"web-document":{...g,write:{enabled:!0,layerContainerTypes:i.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,u.D)(t.layerDefinition.drawingInfo.transparency):void 0:(0,u.D)(t.drawingInfo.transparency)}}},w={type:n.default,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=n.default.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=o.A.fromJSON(t.spatialReference)),r}}}},read:!1}},S={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},M={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:i.K}}},name:"layerDefinition.minScale",write:!0}},_={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:i.K}}},name:"layerDefinition.maxScale",write:!0}},T={json:{write:{ignoreOrigin:!0,layerContainerTypes:i.K},origins:{"web-map":{read:!1,write:!1}}}},A={type:a.A,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}}},29606:function(e,t,r){r.d(t,{It:function(){return y},LG:function(){return s},OM:function(){return u},Sm:function(){return p},Y:function(){return l},bK:function(){return a},mm:function(){return d},sQ:function(){return c}});var i=r(46157),n=r(57165),o=r(1644);function s(e,t){if(!l(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function l(e,t){return!!e.typeKeywords?.includes(t)}function a(e){return l(e,d.HOSTED_SERVICE)}function u(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function p(e,t,r){r?s(e,t):u(e,t)}async function c(e){const t=e.clone().normalize();let r;if(t.length>1)for(const e of t)r?e.width>r.width&&(r=e):r=e;else r=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,o.ci)(e);const r=n.A.WGS84;return await(0,i.initializeProjection)(t,r),(0,i.project)(e,r)}(r)}const d={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function y(e){const{portal:t,isOrgItem:r,itemControl:i}=e,n=t.user?.privileges;let o=!n||n.includes("features:user:edit"),s=!!r&&!!n?.includes("features:user:fullEdit");const l="update"===i||"admin"===i;return l?s=o=!0:s&&(o=!0),{features:{edit:o,fullEdit:s},content:{updateItem:l}}}},74865:function(e,t,r){r.d(t,{A:function(){return x}});var i,n=r(53804),o=r(10748),s=r(73037),l=r(21609),a=r(40633),u=r(23502),p=r(77560),c=r(74376),d=r(47332),y=r(65953),f=r(81392),m=r(67888),h=r(53743),g=r(30047),v=r(29970),b=r(23879),w=r(85336),S=r(16986),M=r(54547);const _="percent-of-total",T="field",A=new s.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:_,esriNormalizeByField:T}),I=(0,m.dp)(b.A);let C=i=class extends((0,v.h)(g.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,r),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t}))}writeClassBreakInfos(e,t,r,i){const n=e.map((e=>e.write({},i)));this._areClassBreaksConsecutive()&&n.forEach((e=>delete e.classMinValue)),t[r]=n}castField(e){return null==e?e:"function"==typeof e?(a.A.getLogger(this).error(".field: field must be a string value"),null):(0,m.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&T||r&&_||null,t&&r&&a.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==T&&e!==_||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,o.dp)(r)}):I((0,l.o8)(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&a.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await(0,M.lw)()});const i=this.getBreakIndex(e,r);return-1!==i?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void a.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,M.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new i({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,l.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,l.o8)(this.visualVariables),legendOptions:(0,l.o8)(this.legendOptions),authoringInfo:(0,l.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,h.Dx)(e,t,this.valueExpression)];(0,h.rq)(e,t,this.field),(0,h.rq)(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:o,timeZone:s}=t??{},{valueExpression:l}=this;let a=this._compiledValueExpression.valueExpression===l?this._compiledValueExpression.compiledFunction:null;const u=o.arcadeUtils;if(!a){const e=u.createSyntaxTree(l);a=u.createFunction(e),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=l;const p=u.executeFunction(a,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),s));return this._getBreakIndexfromInfos(p)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if("log"===i)n=Math.log(n)*Math.LOG10E;else if(i!==_||null==e||isNaN(e)){if(i===T&&!isNaN(t)){if(isNaN(n)||isNaN(t))return-1;n/=t}}else n=n/e*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};(0,n._)([(0,u.MZ)(w.As)],C.prototype,"backgroundFillSymbol",void 0),(0,n._)([(0,u.MZ)({type:[b.A]})],C.prototype,"classBreakInfos",void 0),(0,n._)([(0,d.w)("classBreakInfos")],C.prototype,"readClassBreakInfos",null),(0,n._)([(0,f.K)("classBreakInfos")],C.prototype,"writeClassBreakInfos",null),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"defaultLabel",void 0),(0,n._)([(0,u.MZ)(w.z4)],C.prototype,"defaultSymbol",void 0),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"field",void 0),(0,n._)([(0,p.w)("field")],C.prototype,"castField",null),(0,n._)([(0,u.MZ)({type:Boolean})],C.prototype,"isMaxInclusive",void 0),(0,n._)([(0,u.MZ)({type:S.A,json:{write:!0}})],C.prototype,"legendOptions",void 0),(0,n._)([(0,u.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],C.prototype,"minValue",null),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"normalizationField",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],C.prototype,"normalizationTotal",void 0),(0,n._)([(0,u.MZ)({type:A.apiValues,value:null,json:{type:A.jsonValues,read:A.read,write:A.write}})],C.prototype,"normalizationType",null),(0,n._)([(0,c.e)({classBreaks:"class-breaks"})],C.prototype,"type",void 0),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"valueExpression",void 0),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"valueExpressionTitle",void 0),C=i=(0,n._)([(0,y.$)("esri.renderers.ClassBreaksRenderer")],C);const x=C},1526:function(e,t,r){r.d(t,{A:function(){return N}});var i=r(53804),n=r(21609),o=r(23502),s=(r(58941),r(40633)),l=r(65953),a=r(81392),u=r(53743),p=r(30047),c=r(29970),d=r(52874),y=r(93040),f=r(39819),m=r(99680),h=r(60539),g=r(58009),v=r(74697),b=r(7103),w=r(54547),S=r(38164),M=r(67895),_=r(7590);const T="esri.renderers.support.DictionaryLoader",A={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class I{constructor(e,t,r){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new m.q(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=r}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise}catch(e){if((0,h.zf)(e))return this._dictionaryPromise=null,null}const i=this._dictionaryVersion?.greaterEqual(4,0),n={};if(this.fieldMap)for(const t of this._symbolFields){const r=(0,_.MO)(this.fieldMap[t],this._fieldIndex);if(r){const o=e.attributes[r];n[t]=i?o:null!=o?""+e.attributes[r]:""}else n[t]=""}let o=null;try{o=r?.(n,t)}catch(e){return null}if(!o||"string"!=typeof o||"invalid"===o)return null;const s=o.split(";"),l=[],a=[];for(let t=0;t<s.length;t++){const r=s[t];if(r)if(r.includes("po:")){const t=r.slice(3).split("|");if(3===t.length){const r=t[0],i=t[1];let n=t[2];const o="countrylabel";if(r===o&&"TextString"===i){if(null!=this.fieldMap){let t=this.fieldMap[o];null==t&&(t=o,this.fieldMap[t]=t),e.attributes[t]=n}continue}if("DashTemplate"===i)n=n.split(" ").map((e=>Number(e)));else if("Color"===i){const e=new d.A(n).toRgba();n=[e[0],e[1],e[2],255*e[3]]}else n=Number(n);a.push({primitiveName:r,propertyName:i,value:n,defaultValue:null})}}else if(r.includes("|")){for(const e of r.split("|"))if(this._itemNames.has(e)){l.push(e);break}}else if(this._itemNames.has(r))l.push(r);else if(0===t){l.length=0;let t="Invalid_P";null!=e.geometry&&((0,v.Bi)(e.geometry)?t="Invalid_A":(0,v.Rg)(e.geometry)&&(t="Invalid_L")),l.push(t);break}}const u=null==e.geometry||!e.geometry.hasZ&&"point"===e.geometry.type;return this._cimPartsToCIMSymbol(e,l,a,u,t)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void s.A.getLogger(T).error("no valid URL!");const t=(0,y.A)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=e?e.signal:null}),[{data:r}]=await Promise.all([t,(0,w.lw)()]);if(!r)throw this._dictionaryPromise=null,new f.A("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:i,dictionary_version:n,expression:o,itemsNames:l}=r,a=o;let u=!1;n&&(this._dictionaryVersion=g.R.parse(n),u=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+r.cimRefTemplateUrl,this._itemNames=new Set(l),this._symbolFields=i.symbol;const p={};if(this.config){const e=this.config;for(const t in e)p[t]=e[t]}if(i.configuration)for(const e of i.configuration)p.hasOwnProperty(e.name)||(p[e.name]=e.value);const c=[];if(e?.fields&&this.fieldMap)for(const t in this.fieldMap){const r=this.fieldMap[t],i=e.fields.filter((e=>e.name.toLowerCase()===r?.toLowerCase()));i.length>0&&c.push({...i[0],type:u?i[0].type:"esriFieldTypeString"})}c.length>0&&(this._fieldIndex=new b.A(c));const d=(0,w.xR)(a,null!=e?e.spatialReference:null,c,p).then((e=>{const t={scale:0};return(r,i)=>{if(null==e)return null;const n=e.repurposeFeature({geometry:null,attributes:r});return t.scale=null!=i?i.scale??void 0:void 0,e.evaluate({$feature:n,$view:t},e.services)}})).catch((e=>(s.A.getLogger(T).error("Creating dictionary expression failed:",e),null)));return this._dictionaryPromise=d,d}async _cimPartsToCIMSymbol(e,t,r,i,o){const s=new Array(t.length);for(let e=0;e<t.length;e++)s[e]=this._getSymbolPart(t[e],o);let l=await Promise.all(s);const a=this.fieldMap;if(a){l=(0,n.o8)(l);for(const t of l)M.$.applyDictionaryTextOverrides(t,e,a,this._fieldIndex,(0,_.bs)(t))}return new S.A({data:C(l,r,i)})}async _getSymbolPart(e,t){const r=this._symbolCache.get(e);if(r)return r;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const i=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),n=(0,y.A)(i,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,n),n.finally((()=>this._ongoingRequests.delete(e)));try{const t=await n;return this._symbolCache.put(e,t.data),t.data}catch(e){throw e}}}function C(e,t,r){if(!e||0===e.length)return null;const i={...e[0]};if(e.length>1){i.effects=null,i.symbolLayers=[];for(const t of e){const e=t;if(null!=e.effects)for(const t of e.symbolLayers)null==t.effects?t.effects=e.effects:t.effects.unshift(...e.effects);i.symbolLayers.unshift(...e.symbolLayers)}}return r&&(i.callout=A),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var x;let O=x=class extends((0,c.h)(p.A)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new I(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i?.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new x({config:(0,n.o8)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,n.o8)(this.fieldMap),url:(0,n.o8)(this.url),visualVariables:(0,n.o8)(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,u.Dx)(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,i._)([(0,o.MZ)({type:I})],O.prototype,"_loader",null),(0,i._)([(0,o.MZ)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],O.prototype,"config",void 0),(0,i._)([(0,o.MZ)({type:Object,json:{write:!0}})],O.prototype,"fieldMap",void 0),(0,i._)([(0,o.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],O.prototype,"scaleExpression",void 0),(0,i._)([(0,a.K)("scaleExpression")],O.prototype,"writeData",null),(0,i._)([(0,o.MZ)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],O.prototype,"scaleExpressionTitle",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],O.prototype,"url",void 0),(0,i._)([(0,a.K)("visualVariables")],O.prototype,"writeVisualVariables",null),O=x=(0,i._)([(0,l.$)("esri.renderers.DictionaryRenderer")],O);const N=O},96173:function(e,t,r){r.d(t,{A:function(){return S}});var i,n=r(53804),o=r(52874),s=r(21609),l=r(23502),a=(r(58941),r(40633),r(74376)),u=r(65953),p=r(53743),c=r(30047),d=r(29970),y=r(19563),f=r(30905);r(13798);let m=i=class extends f.oY{constructor(){super(...arguments),this.unit=null}clone(){return new i({unit:this.unit})}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],m.prototype,"unit",void 0),m=i=(0,n._)([(0,u.$)("esri.renderers.support.DotDensityLegendOptions")],m);const h=m;var g,v=r(8740),b=r(22198);let w=g=class extends((0,d.h)(c.A)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new o.A([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new b.A,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new v.A({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new g({attributes:(0,s.o8)(this.attributes),backgroundColor:(0,s.o8)(this.backgroundColor),dotBlendingEnabled:(0,s.o8)(this.dotBlendingEnabled),dotShape:(0,s.o8)(this.dotShape),dotSize:(0,s.o8)(this.dotSize),dotValue:(0,s.o8)(this.dotValue),legendOptions:(0,s.o8)(this.legendOptions),outline:(0,s.o8)(this.outline),referenceScale:(0,s.o8)(this.referenceScale),seed:(0,s.o8)(this.seed),visualVariables:(0,s.o8)(this.visualVariables),authoringInfo:(0,s.o8)(this.authoringInfo)})}getControllerHash(){const e=this.attributes?.map((e=>e.field||e.valueExpression||""));return`${e}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await(0,p.Dx)(e,t,r.valueExpression),r.field&&e.add(r.field)}};(0,n._)([(0,l.MZ)({type:[y.A],json:{write:!0}})],w.prototype,"attributes",void 0),(0,n._)([(0,l.MZ)({type:o.A,json:{write:!0}})],w.prototype,"backgroundColor",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],w.prototype,"dotBlendingEnabled",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!1}})],w.prototype,"dotShape",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],w.prototype,"dotSize",void 0),(0,n._)([(0,l.MZ)({type:h,json:{write:!0}})],w.prototype,"legendOptions",void 0),(0,n._)([(0,l.MZ)({type:b.A,json:{default:null,write:!0}})],w.prototype,"outline",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],w.prototype,"dotValue",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],w.prototype,"referenceScale",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],w.prototype,"seed",void 0),(0,n._)([(0,a.e)({dotDensity:"dot-density"})],w.prototype,"type",void 0),w=g=(0,n._)([(0,u.$)("esri.renderers.DotDensityRenderer")],w);const S=w},52308:function(e,t,r){r.d(t,{A:function(){return M}});var i=r(53804),n=r(52874),o=(r(10748),r(21609)),s=r(13520),l=r(23502),a=(r(58941),r(40633),r(74376)),u=r(65953),p=r(53743),c=r(30047),d=r(53871),y=r(27419),f=r(75743),m=r(30905);r(13798);let h=class extends((0,f.O)(m.oY)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"minLabel",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"maxLabel",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],h.prototype,"title",void 0),h=(0,i._)([(0,u.$)("esri.renderers.support.HeatmapLegendOptions")],h);var g,v=r(70181),b=r(90363);function w(e){if(null!=e){const{maxDensity:t,minDensity:r,radius:i}=e;if(null!=t||null!=r||null!=i){const{blurRadius:t,maxPixelIntensity:r,minPixelIntensity:i,...n}=e;return n}}return e}let S=g=class extends c.A{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new y.A({ratio:0,color:new n.A("rgba(255, 140, 0, 0)")}),new y.A({ratio:.75,color:new n.A("rgba(255, 140, 0, 1)")}),new y.A({ratio:.9,color:new n.A("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return w(e)}get blurRadius(){return(0,v.PU)(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",(0,v.zp)(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(v.ex**2*this.blurRadius**4)}read(e,t){e=w(e),super.read(e,t)}getSymbol(){return new b.A}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&"string"==typeof r&&(0,p.rq)(e,t,r),i&&"string"==typeof i&&await(0,p.Dx)(e,t,i)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new g({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,o.o8)(this.colorStops),field:this.field,legendOptions:(0,o.o8)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,i._)([(0,l.MZ)({type:d.A,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],S.prototype,"authoringInfo",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],S.prototype,"blurRadius",null),(0,i._)([(0,l.MZ)({type:[y.A],json:{write:!0}})],S.prototype,"colorStops",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],S.prototype,"field",void 0),(0,i._)([(0,l.MZ)({type:h,json:{write:!0}})],S.prototype,"legendOptions",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],S.prototype,"maxDensity",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],S.prototype,"maxPixelIntensity",null),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],S.prototype,"minDensity",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],S.prototype,"minPixelIntensity",null),(0,i._)([(0,l.MZ)({type:Number,cast:s.cr,json:{write:!0}})],S.prototype,"radius",void 0),(0,i._)([(0,l.MZ)({type:Number,range:{min:0},json:{default:0,write:!0}})],S.prototype,"referenceScale",void 0),(0,i._)([(0,a.e)({heatmap:"heatmap"})],S.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],S.prototype,"valueExpression",void 0),(0,i._)([(0,l.MZ)({type:String})],S.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],S.prototype,"_pixelIntensityToDensity",null),S=g=(0,i._)([(0,u.$)("esri.renderers.HeatmapRenderer")],S);const M=S},78002:function(e,t,r){r.d(t,{A:function(){return I}});var i=r(53804),n=r(52874),o=(r(10748),r(50659)),s=r(75743),l=r(13520),a=r(23502),u=(r(58941),r(40633),r(74376)),p=r(65953),c=r(53743),d=r(30047),y=r(29970),f=r(19563),m=r(85336),h=r(30905);r(13798);let g=class extends((0,s.O)(h.oY)){constructor(){super(...arguments),this.color=new n.A([0,0,0,0]),this.label=null,this.threshold=0}};(0,i._)([(0,a.MZ)({type:n.A,json:{write:!0}})],g.prototype,"color",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,i._)([(0,a.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],g.prototype,"threshold",void 0),g=(0,i._)([(0,p.$)("esri.renderers.support.OthersCategory")],g);var v=r(16986),b=r(14170),w=r(53096),S=r(64494),M=r(90363),_=r(22198);const T={base:S.A,key:"type",typeMap:{size:w.A,opacity:b.A}};let A=class extends((0,y.h)((0,s.O)(d.A))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new n.A([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new g,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new M.A({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(o.Ru)}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await(0,c.Dx)(e,t,r.valueExpression),r.field&&e.add(r.field)}};(0,i._)([(0,a.MZ)({type:[f.A],json:{write:!0}})],A.prototype,"attributes",void 0),(0,i._)([(0,a.MZ)(m.As)],A.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,a.MZ)({type:n.A,json:{write:!0}})],A.prototype,"defaultColor",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],A.prototype,"defaultLabel",void 0),(0,i._)([(0,a.MZ)({type:Number,range:{min:0,max:1},json:{write:!0}})],A.prototype,"holePercentage",void 0),(0,i._)([(0,a.MZ)({type:g,json:{write:!0}})],A.prototype,"othersCategory",void 0),(0,i._)([(0,a.MZ)({type:v.A,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,i._)([(0,a.MZ)({type:_.A,json:{default:null,write:!0}})],A.prototype,"outline",void 0),(0,i._)([(0,a.MZ)({type:Number,cast:l.cr,json:{write:!0}})],A.prototype,"size",void 0),(0,i._)([(0,u.e)({pieChart:"pie-chart"})],A.prototype,"type",void 0),(0,i._)([(0,a.MZ)({types:[T]})],A.prototype,"visualVariables",void 0),A=(0,i._)([(0,p.$)("esri.renderers.PieChartRenderer")],A);const I=A},30047:function(e,t,r){r.d(t,{A:function(){return c}});var i=r(53804),n=r(73037),o=r(30905),s=r(23502),l=(r(58941),r(40633),r(13798),r(65953)),a=r(53871);const u=new n.J({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let p=class extends o.oY{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,i._)([(0,s.MZ)({type:a.A,json:{write:!0}})],p.prototype,"authoringInfo",void 0),(0,i._)([(0,s.MZ)({type:u.apiValues,readOnly:!0,json:{type:u.jsonValues,read:!1,write:{writer:u.write,ignoreOrigin:!0}}})],p.prototype,"type",void 0),p=(0,i._)([(0,l.$)("esri.renderers.Renderer")],p);const c=p},27777:function(e,t,r){r.d(t,{A:function(){return y}});var i,n=r(53804),o=r(21609),s=r(23502),l=(r(58941),r(40633),r(74376)),a=r(65953),u=r(30047),p=r(29970),c=r(85336);let d=i=class extends((0,p.h)(u.A)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((r=>r.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new i({description:this.description,label:this.label,symbol:(0,o.o8)(this.symbol),visualVariables:(0,o.o8)(this.visualVariables),authoringInfo:(0,o.o8)(this.authoringInfo)})}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,n._)([(0,s.MZ)(c.Wp)],d.prototype,"symbol",void 0),(0,n._)([(0,l.e)({simple:"simple"})],d.prototype,"type",void 0),d=i=(0,n._)([(0,a.$)("esri.renderers.SimpleRenderer")],d);const y=d},61065:function(e,t,r){r.d(t,{A:function(){return G}});var i=r(53804),n=r(10748),o=r(39819),s=r(21609),l=r(40633),a=r(34194),u=r(28181),p=r(23502),c=r(77560),d=r(74376),y=r(47332),f=r(65953),m=r(81392),h=r(72952),g=r(67888),v=r(53743),b=r(51432),w=r(30047),S=r(29970),M=r(85336),_=r(16986),T=r(75743),A=r(30905);r(58941),r(13798);let I=class extends((0,T.O)(A.oY)){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};(0,i._)([(0,p.MZ)(M.Ug)],I.prototype,"value",void 0),(0,i._)([(0,p.MZ)(M.Ug)],I.prototype,"value2",void 0),(0,i._)([(0,p.MZ)(M.Ug)],I.prototype,"value3",void 0),I=(0,i._)([(0,f.$)("esri.renderers.support.UniqueValue")],I);const C=I;var x=r(50659);let O=class extends((0,T.O)(A.oY)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(null==e)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((e=>new C({value:e}))):"object"===t?e[0]instanceof C?e:e.map((e=>new C(e))):null}};(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],O.prototype,"description",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],O.prototype,"label",void 0),(0,i._)([(0,p.MZ)(M.z4)],O.prototype,"symbol",void 0),(0,i._)([(0,p.MZ)({type:[C],json:{type:[[String]],read:{reader:e=>e?e.map((e=>new C({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(e,t)=>{const r=[];for(const t of e){const e=[t.value,t.value2,t.value3].filter(x.Ru).map((e=>e.toString()));r.push(e)}t.values=r}}}})],O.prototype,"values",void 0),(0,i._)([(0,c.w)("values")],O.prototype,"castValues",null),O=(0,i._)([(0,f.$)("esri.renderers.support.UniqueValueClass")],O);const N=O;let Z=class extends((0,T.O)(A.oY)){constructor(e){super(e),this.heading=null,this.classes=null}};(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],Z.prototype,"heading",void 0),(0,i._)([(0,p.MZ)({type:[N],json:{write:!0}})],Z.prototype,"classes",void 0),Z=(0,i._)([(0,f.$)("esri.renderers.support.UniqueValueGroup")],Z);const D=Z;var V,j=r(99278),F=r(54547),E=r(60534),L=r(58916),R=r(36e3);const k="esri.renderers.UniqueValueRenderer",P=()=>l.A.getLogger(k),z="uvInfos-watcher",B="uvGroups-watcher",U=(0,g.dp)(j.A);function q(e){return null!=e&&""!==e&&("string"!=typeof e||""!==e.trim()&&"<null>"!==e.toLowerCase())||(e=null),e+""}let J=V=class extends((0,S.h)(w.A)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let r=!1;const i={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<t.length;n++){const o=e.find((e=>e.value===t[n].value));o?(0,h.Ui)(o,t[n])?(i.changed.push({type:"complete",oldValue:o,newValue:t[n]}),r=!0):i.unchanged.push({oldValue:o,newValue:t[n]}):(i.added.push(t[n]),r=!0)}for(let n=0;n<e.length;n++)t.find((t=>t.value===e[n].value))||(i.removed.push(e[n]),r=!0);return r?i:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return null==e||"function"==typeof e?e:(0,g.GX)(e)}writeField(e,t,r,i){"string"==typeof e?t[r]=e:i?.messages?i.messages.push(new o.A("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):P().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||b.A.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=(0,E.f)(t.styleUrl,r);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,E.t)(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?P().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?P().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void P().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?U(e):new j.A({value:e,symbol:(0,n.dp)(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[q(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void P().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[q(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await(0,F.lw)()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void P().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==r?.arcade){const e=await(0,F.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const i=this._getUniqueValueInfo(e,r);return i?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce(((e,t)=>e+t.getMeshHash()),"");return`${e}.${t}.${r}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new V({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,s.o8)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,s.o8)(this.visualVariables),legendOptions:(0,s.o8)(this.legendOptions),authoringInfo:(0,s.o8)(this.authoringInfo),backgroundFillSymbol:(0,s.o8)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=(0,s.o8)(this.uniqueValueInfos),r=(0,s.o8)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,s.o8)(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,v.Dx)(e,t,this.valueExpression)];(0,v.rq)(e,t,this.field),(0,v.rq)(e,t,this.field2),(0,v.rq)(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return(0,L.cF)(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach((r=>{const i=new R.A({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const n=new j.A({value:r.name,symbol:i});t.push(n),this._valueInfoMap[q(r.name)]=n})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[q(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(z);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push((0,u.watch)((()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description})),((e,t)=>{e!==t&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,z)}}_watchUniqueValueGroups(){this.removeHandles(B);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push((0,u.watch)((()=>({classes:r.classes})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const e of r.classes??[])t.push((0,u.watch)((()=>({symbol:e.symbol,values:e.values,label:e.label,description:e.description})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,B)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueGroups:o,valueExpression:s}=this;if(!t&&!s)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const l=!(!t||!r);for(const t of o)for(const o of t.classes??[]){const{symbol:t,label:s,values:a,description:u}=o;for(const o of a??[]){const{value:a,value2:p,value3:c}=o,d=[a];r&&d.push(p),i&&d.push(c);const y=l?d.join(n||""):d[0]??void 0;e.push(new j.A({symbol:t,label:s,value:y,description:u}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:n,uniqueValueInfos:o}=this;if(!t&&!i||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const s=!(!t||!r),l=o.map((e=>{const{symbol:t,label:r,value:i,description:o}=e,[l,a,u]=s?i?.toString()?.split(n||"")||[]:[i];return new N({symbol:t,label:r,description:o,values:[new C({value:l,value2:a,value3:u})]})})),a=[new D({classes:l})];e&&Object.freeze(a),this._set("uniqueValueGroups",a),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:o,timeZone:s}=t??{};let l=this._cache.compiledFunc;const a=o.arcadeUtils;if(!l){const e=a.createSyntaxTree(this.valueExpression);l=a.createFunction(e),this._cache.compiledFunc=l}const u=a.executeFunction(l,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n}),s));return this._valueInfoMap[q(u)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const e=this.field2,n=this.field3,o=[];t&&o.push(r[t]),e&&o.push(r[e]),n&&o.push(r[n]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[q(i)]}static fromPortalStyle(e,t){const r=new V(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||b.A.getDefault());const i=r.populateFromStyle();return i.catch((t=>{P().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)})),i}static fromStyleUrl(e,t){const r=new V(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch((t=>{P().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)})),i}};(0,i._)([(0,p.MZ)({readOnly:!0})],J.prototype,"_cache",null),(0,i._)([(0,d.e)({uniqueValue:"unique-value"})],J.prototype,"type",void 0),(0,i._)([(0,p.MZ)(M.As)],J.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,p.MZ)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],J.prototype,"field",null),(0,i._)([(0,c.w)("field")],J.prototype,"castField",null),(0,i._)([(0,m.K)("field")],J.prototype,"writeField",null),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],J.prototype,"field2",null),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],J.prototype,"field3",null),(0,i._)([(0,p.MZ)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],J.prototype,"orderByClassesEnabled",void 0),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],J.prototype,"valueExpression",null),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],J.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,p.MZ)({type:_.A,json:{write:!0}})],J.prototype,"legendOptions",void 0),(0,i._)([(0,p.MZ)({type:String,json:{write:!0}})],J.prototype,"defaultLabel",void 0),(0,i._)([(0,p.MZ)((0,a.$N)({...M.z4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],J.prototype,"defaultSymbol",null),(0,i._)([(0,p.MZ)({type:String,value:null,json:{write:!0}})],J.prototype,"fieldDelimiter",null),(0,i._)([(0,p.MZ)({type:b.A,readOnly:!0})],J.prototype,"portal",void 0),(0,i._)([(0,y.w)("portal",["styleName"])],J.prototype,"readPortal",null),(0,i._)([(0,p.MZ)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],J.prototype,"styleOrigin",void 0),(0,i._)([(0,y.w)("styleOrigin",["styleName","styleUrl"])],J.prototype,"readStyleOrigin",null),(0,i._)([(0,m.K)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],J.prototype,"writeStyleOrigin",null),(0,i._)([(0,p.MZ)({type:[D],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||function(e){const{field1:t,field2:r,field3:i,fieldDelimiter:n,uniqueValueInfos:o,valueExpression:s}=e,l=!(!t||!r);return[{classes:(o??[]).map((e=>{const{symbol:o,label:a,value:u,description:p}=e,[c,d,y]=l?u?.toString()?.split(n||"")||[]:[u],f=[];return(t||s)&&f.push(c),r&&f.push(d),i&&f.push(y),{symbol:o,label:a,values:[f],description:p}}))}]}(t)).map((e=>D.fromJSON(e,r)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],J.prototype,"uniqueValueGroups",null),(0,i._)([(0,p.MZ)({type:[j.A],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],J.prototype,"uniqueValueInfos",null),J=V=(0,i._)([(0,f.$)(k)],J);const G=J},29970:function(e,t,r){r.d(t,{h:function(){return A}});var i=r(53804),n=r(23502),o=(r(58941),r(40633)),s=(r(13798),r(47332)),l=r(65953),a=r(81392),u=r(53743);const p=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var c=r(74843),d=r(14170),y=r(36604),f=r(53096),m=r(64494),h=r(83525),g=r(73037),v=r(89001);const b={color:c.A,size:f.A,opacity:d.A,rotation:y.A},w=new g.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),S=/^\[([^\]]+)\]$/i;let M=class extends h.A{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter((e=>!!e)),e?.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some((e=>!!e.target))&&e.sort(((e,t)=>{let r=null;return r=e.target===t.target?0:e.target?1:-1,r}));for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:i,rotationType:n}=t,s=i?.match(S),l=s?.[1];if(l&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:l})),e)return e.map((e=>{const t=w.read(e.type),i=b[t];i||(o.A.getLogger(this).warn(`Unknown variable type: ${t}`),r?.messages&&r.messages.push(new v.A("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:r})));const n=new i;return n.read(e,r),n}))}writeVariables(e,t){const r=[];for(const i of e){const e=i.toJSON(t);e&&r.push(e)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,i._)([(0,n.MZ)()],M.prototype,"visualVariables",null),M=(0,i._)([(0,l.$)("esri.renderers.visualVariables.VisualVariableFactory")],M);const _=M,T={base:m.A,key:"type",typeMap:{opacity:d.A,color:c.A,rotation:y.A,size:f.A}},A=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new _}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,r){return this._vvFactory.readVariables(e,t,r)}writeVisualVariables(e,t,r,i){t[r]=this._vvFactory.writeVariables(e,i)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const e of this.visualVariables)if(e.arcadeRequired)return!0;return!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}getVisualVariablesForType(e,t){const r=this.visualVariables;return r?r.filter((r=>r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target))):[]}async collectVVRequiredFields(e,t){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const i of r)i&&(i.field&&(0,u.rq)(e,t,i.field),i.normalizationField&&(0,u.rq)(e,t,i.normalizationField),i.valueExpression&&(I(i.valueExpression,e,t)||await(0,u.Dx)(e,t,i.valueExpression)))}};return(0,i._)([(0,n.MZ)({types:[T],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,i._)([(0,s.w)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,i._)([(0,a.K)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,i._)([(0,l.$)("esri.renderers.mixins.VisualVariablesMixin")],t),t};function I(e,t,r){const i=(n=e,n.match(p)?.[1]?.replace(/\\'/g,"'")??null);var n;return null!=i&&((0,u.rq)(t,r,i),!0)}},19563:function(e,t,r){r.d(t,{A:function(){return y}});var i,n=r(53804),o=r(52874),s=r(30905),l=r(40633),a=r(23502),u=r(77560),p=(r(13798),r(58941),r(65953)),c=r(67888);let d=i=class extends s.oY{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(l.A.getLogger(this).error(".field: field must be a string value"),null):(0,c.GX)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new i({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,n._)([(0,a.MZ)({type:o.A,json:{type:[Number],write:!0}})],d.prototype,"color",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,n._)([(0,u.w)("field")],d.prototype,"castField",null),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"label",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpression",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),d=i=(0,n._)([(0,p.$)("esri.renderers.support.AttributeColorInfo")],d);const y=d},53871:function(e,t,r){r.d(t,{A:function(){return F}});var i,n=r(53804),o=r(73037),s=r(30905),l=r(21609),a=r(23502),u=r(67888),p=r(47332),c=r(65953);r(58941),r(40633),r(13798);let d=i=class extends s.oY{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new i({minValue:this.minValue,maxValue:this.maxValue})}};var y;(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"minValue",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"maxValue",void 0),d=i=(0,n._)([(0,c.$)("esri.renderers.support.AuthoringInfoClassBreakInfo")],d);let f=y=class extends s.oY{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new y({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,l.o8)(this.classBreakInfos)})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,n._)([(0,a.MZ)({type:[d],json:{write:!0}})],f.prototype,"classBreakInfos",void 0),f=y=(0,n._)([(0,c.$)("esri.renderers.support.AuthoringInfoFieldInfo")],f);var m,h=r(77560);let g=m=class extends s.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new m({label:this.label,value:this.value,size:this.size})}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],g.prototype,"size",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],g.prototype,"value",void 0),g=m=(0,n._)([(0,c.$)("esri.renderers.support.AuthoringInfoSizeStop")],g);const v=g;var b;const w=new o.J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),S=new o.J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),M={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},_=["high-to-low","above-and-below","centered-on","extremes"],T=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],A=["seconds","minutes","hours","days","months","years"];let I=b=class extends s.oY{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}get normalizationField(){return"reference-size"===this.theme?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return"reference-size"===this.theme?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return"reference-size"===this.theme?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get sizeStops(){return"reference-size"===this.theme?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new b({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:(0,l.o8)(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,n._)([(0,a.MZ)({types:M,json:{write:!0}})],I.prototype,"endTime",void 0),(0,n._)([(0,h.w)("endTime")],I.prototype,"castEndTime",null),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],I.prototype,"field",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],I.prototype,"maxSliderValue",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0}})],I.prototype,"minSliderValue",void 0),(0,n._)([(0,a.MZ)({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"normalizationField",null),(0,n._)([(0,a.MZ)({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"referenceSizeScale",null),(0,n._)([(0,a.MZ)({type:["circle","diamond","hexagon-flat","hexagon-pointy","square"],value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"referenceSizeSymbolStyle",null),(0,n._)([(0,a.MZ)({types:M,json:{write:!0}})],I.prototype,"startTime",void 0),(0,n._)([(0,h.w)("startTime")],I.prototype,"castStartTime",null),(0,n._)([(0,a.MZ)({type:[v],json:{origins:{"web-scene":{write:!1}},write:!0}})],I.prototype,"sizeStops",null),(0,n._)([(0,a.MZ)({type:w.apiValues,value:null,json:{type:w.jsonValues,read:w.read,write:w.write}})],I.prototype,"style",null),(0,n._)([(0,a.MZ)({type:T,value:null,json:{type:T,origins:{"web-scene":{type:_,write:{writer:(e,t)=>{_.includes(e)&&(t.theme=e)}}}},write:!0}})],I.prototype,"theme",null),(0,n._)([(0,a.MZ)({type:S.apiValues,json:{type:S.jsonValues,read:S.read,write:S.write}})],I.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:A,json:{type:A,write:!0}})],I.prototype,"units",void 0),I=b=(0,n._)([(0,c.$)("esri.renderers.support.AuthoringInfoVisualVariable")],I);const C=I;var x,O=r(85982);const N=new o.J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Z=new o.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),D=new o.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),V=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"];let j=x=class extends s.oY{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?(0,O.r)(e):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new x({classificationMethod:this.classificationMethod,colorRamp:(0,l.o8)(this.colorRamp),fadeRatio:(0,l.o8)(this.fadeRatio),fields:this.fields?.slice(),field1:(0,l.o8)(this.field1),field2:(0,l.o8)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,n._)([(0,a.MZ)({type:N.apiValues,value:null,json:{type:N.jsonValues,read:N.read,write:N.write,origins:{"web-document":{default:"manual",type:N.jsonValues,read:N.read,write:N.write}}}})],j.prototype,"classificationMethod",null),(0,n._)([(0,a.MZ)({types:O.g,json:{write:!0}})],j.prototype,"colorRamp",void 0),(0,n._)([(0,p.w)("colorRamp")],j.prototype,"readColorRamp",null),(0,n._)([(0,a.MZ)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],j.prototype,"fadeRatio",void 0),(0,n._)([(0,a.MZ)({type:[String],value:null,json:{write:!0}})],j.prototype,"fields",null),(0,n._)([(0,a.MZ)({type:f,value:null,json:{write:!0}})],j.prototype,"field1",null),(0,n._)([(0,a.MZ)({type:f,value:null,json:{write:!0}})],j.prototype,"field2",null),(0,n._)([(0,a.MZ)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],j.prototype,"flowTheme",null),(0,n._)([(0,a.MZ)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],j.prototype,"focus",null),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],j.prototype,"isAutoGenerated",void 0),(0,n._)([(0,a.MZ)({type:Number,value:null,json:{type:u.jz,write:!0}})],j.prototype,"numClasses",null),(0,n._)([(0,a.MZ)({type:V,json:{type:V,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],j.prototype,"lengthUnit",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],j.prototype,"maxSliderValue",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],j.prototype,"minSliderValue",void 0),(0,n._)([(0,a.MZ)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],j.prototype,"statistics",null),(0,n._)([(0,a.MZ)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],j.prototype,"standardDeviationInterval",null),(0,n._)([(0,a.MZ)({type:Z.apiValues,value:null,json:{type:Z.jsonValues,read:Z.read,write:Z.write,origins:{"web-scene":{type:D.jsonValues,write:{writer:D.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],j.prototype,"type",null),(0,n._)([(0,a.MZ)({type:[C],json:{write:!0}})],j.prototype,"visualVariables",void 0),(0,n._)([(0,a.MZ)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],j.prototype,"univariateSymbolStyle",null),(0,n._)([(0,a.MZ)({type:["high-to-low","above-and-below","above","below"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],j.prototype,"univariateTheme",null),j=x=(0,n._)([(0,c.$)("esri.renderers.support.AuthoringInfo")],j);const F=j},23879:function(e,t,r){r.d(t,{A:function(){return p}});var i,n=r(53804),o=r(30905),s=r(23502),l=(r(58941),r(40633),r(13798),r(65953)),a=r(85336);let u=i=class extends o.oY{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new i({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,n._)([(0,s.MZ)(a.Wp)],u.prototype,"symbol",void 0),u=i=(0,n._)([(0,l.$)("esri.renderers.support.ClassBreakInfo")],u);const p=u},27419:function(e,t,r){r.d(t,{A:function(){return c}});var i,n=r(53804),o=r(52874),s=r(30905),l=r(23502),a=r(67888),u=(r(13798),r(58941),r(65953));let p=i=class extends s.oY{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new i({color:this.color&&this.color.clone(),ratio:this.ratio})}};(0,n._)([(0,l.MZ)({type:o.A,json:{type:[a.jz],default:null,write:!0}})],p.prototype,"color",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],p.prototype,"ratio",void 0),p=i=(0,n._)([(0,u.$)("esri.renderers.support.HeatmapColorStop")],p);const c=p},16986:function(e,t,r){r.d(t,{A:function(){return d}});var i=r(53804),n=r(75743),o=r(73037),s=r(30905),l=r(23502),a=(r(58941),r(40633),r(13798),r(74376)),u=r(65953);const p=(0,o.O)()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let c=class extends((0,n.O)(s.oY)){constructor(e){super(e),this.title=null,this.order=null}};(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],c.prototype,"title",void 0),(0,i._)([(0,a.e)(p)],c.prototype,"order",void 0),c=(0,i._)([(0,u.$)("esri.renderers.support.RendererLegendOptions")],c);const d=c},99278:function(e,t,r){r.d(t,{A:function(){return p}});var i,n=r(53804),o=r(30905),s=r(23502),l=(r(58941),r(40633),r(13798),r(65953)),a=r(85336);let u=i=class extends o.oY{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new i({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,n._)([(0,s.MZ)(a.Wp)],u.prototype,"symbol",void 0),(0,n._)([(0,s.MZ)(a.Ug)],u.prototype,"value",void 0),u=i=(0,n._)([(0,l.$)("esri.renderers.support.UniqueValueInfo")],u);const p=u},85336:function(e,t,r){r.d(t,{As:function(){return c},Ug:function(){return d},Wp:function(){return p},z4:function(){return u}});var i=r(10748),n=r(34194),o=r(51575),s=r(8404),l=r(34563),a=r(15186);const u={types:i.xK,json:{write:{writer:s.M9},origins:{"web-scene":{types:i.On,write:{writer:s.M9},read:{reader:(0,o.C)({types:i.On})}}}}},p=(0,n.$N)({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},u),c={types:{base:l.A,key:"type",typeMap:{"simple-fill":i.Es.typeMap["simple-fill"],"picture-fill":i.Es.typeMap["picture-fill"],"polygon-3d":i.Es.typeMap["polygon-3d"],cim:i.Es.typeMap.cim}},json:{write:{writer:s.M9},origins:{"web-scene":{type:a.A,write:{writer:s.M9}}}}},d={cast:e=>null==e||"string"==typeof e||"number"==typeof e?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}}},70181:function(e,t,r){r.d(t,{O3:function(){return c},PU:function(){return u},YW:function(){return y},ex:function(){return l},hv:function(){return d},zp:function(){return a}});var i=r(15774),n=r(13520),o=r(33400),s=r(41546);const l=2.4;function a(e){return(0,n.PN)(e*l)}function u(e){return(0,n.Lz)(e)/l}function p(e,t,r,n){let{color:s,ratio:l}=t,{color:a,ratio:u}=r;if(u===l){const e=1e-6;1===u?l-=e:u+=e}const p=(0,i.qE)((n-l)/(u-l),0,1);(0,o.l)(e,s.toArray(),a.toArray(),p)}function c(e){const t=new Uint8ClampedArray(2048);if((e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)})))).length<1)return t;let r=e[0],i=e[0],n=1;const o=(0,s.vt)();for(let s=0;s<512;s++){const l=(s+.5)/512;for(;l>i.ratio&&n<e.length;)r=i,i=e[n++];p(o,r,i,l),t.set(o,4*s)}return t}function d(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function y(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},6537:function(e,t,r){r.d(t,{L:function(){return a},r:function(){return s}});var i=r(89001),n=r(51575),o=r(31315);function s(e,t){return a(e,null,t)}const l=(0,n.C)({types:o.H});function a(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r?.messages&&r.messages.push(new i.A("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):l(e,t,r):null}},31315:function(e,t,r){r.d(t,{H:function(){return d},X:function(){return y}});var i=r(40633),n=r(74865),o=r(1526),s=r(96173),l=r(52308),a=r(78002),u=r(30047),p=r(27777),c=r(61065);const d={key:"type",base:u.A,typeMap:{heatmap:l.A,simple:p.A,"unique-value":c.A,"class-breaks":n.A,"dot-density":s.A,dictionary:o.A,"pie-chart":a.A},errorContext:"renderer"},y={key:"type",base:u.A,typeMap:{simple:p.A,"unique-value":c.A,"class-breaks":n.A,heatmap:l.A},errorContext:"renderer",validate:function(e){switch(e.type){case"simple":return function(e){if(e.symbol)return e;i.A.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}(e);case"unique-value":return function(e){const t=e.uniqueValueInfos,r=t?.filter((({symbol:e,label:t},r)=>(e||i.A.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${r}] ${t}) without a symbol from web scene.`),!!e)));return r?.length!==t?.length&&(e.uniqueValueInfos=r),e}(e);case"class-breaks":return function(e){const t=e.classBreakInfos,r=t?.filter((({symbol:e,label:t},r)=>(e||i.A.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${r}] ${t}) without a symbol from web scene.`),!!e)));return r?.length!==t?.length&&(e.classBreakInfos=r),e}(e);case"heatmap":return e}}}},74843:function(e,t,r){r.d(t,{A:function(){return p}});var i,n=r(53804),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953)),l=r(64494),a=r(71859);let u=i=class extends l.A{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new i({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,n._)([(0,o.MZ)({readOnly:!0})],u.prototype,"cache",null),(0,n._)([(0,o.MZ)({type:["color"],json:{type:["colorInfo"]}})],u.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"normalizationField",void 0),(0,n._)([(0,o.MZ)({type:[a.A],json:{write:!0}})],u.prototype,"stops",null),u=i=(0,n._)([(0,s.$)("esri.renderers.visualVariables.ColorVariable")],u);const p=u},14170:function(e,t,r){r.d(t,{A:function(){return g}});var i,n=r(53804),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953)),l=r(64494),a=r(30905),u=r(67888),p=r(47332),c=r(81392),d=r(59798);let y=i=class extends a.oY{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return(0,d.D)(t.transparency)}writeOpacity(e,t,r){t[r]=(0,d.p)(e)}clone(){return new i({label:this.label,opacity:this.opacity,value:this.value})}};(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{type:u.jz,write:{target:"transparency"}}})],y.prototype,"opacity",void 0),(0,n._)([(0,p.w)("opacity",["transparency"])],y.prototype,"readOpacity",null),(0,n._)([(0,c.K)("opacity")],y.prototype,"writeOpacity",null),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],y.prototype,"value",void 0),y=i=(0,n._)([(0,s.$)("esri.renderers.visualVariables.support.OpacityStop")],y);const f=y;var m;let h=m=class extends l.A{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new m({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,n._)([(0,o.MZ)({readOnly:!0})],h.prototype,"cache",null),(0,n._)([(0,o.MZ)({type:["opacity"],json:{type:["transparencyInfo"]}})],h.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"normalizationField",void 0),(0,n._)([(0,o.MZ)({type:[f],json:{write:!0}})],h.prototype,"stops",null),h=m=(0,n._)([(0,s.$)("esri.renderers.visualVariables.OpacityVariable")],h);const g=h},36604:function(e,t,r){r.d(t,{A:function(){return u}});var i,n=r(53804),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953)),l=r(64494);let a=i=class extends l.A{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new i({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};(0,n._)([(0,o.MZ)({readOnly:!0})],a.prototype,"cache",null),(0,n._)([(0,o.MZ)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],a.prototype,"axis",void 0),(0,n._)([(0,o.MZ)({type:["rotation"],json:{type:["rotationInfo"]}})],a.prototype,"type",void 0),(0,n._)([(0,o.MZ)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],a.prototype,"rotationType",void 0),a=i=(0,n._)([(0,s.$)("esri.renderers.visualVariables.RotationVariable")],a);const u=a},53096:function(e,t,r){r.d(t,{A:function(){return I}});var i=r(53804),n=r(39819),o=r(73037),s=r(40633),l=r(23502),a=r(77560),u=r(47332),p=r(65953),c=r(81392),d=r(64494),y=r(13520),f=r(59423),m=(r(58941),r(13798),r(96893));let h=class extends m.A{constructor(){super(...arguments),this.customValues=null}};(0,i._)([(0,l.MZ)({type:[Number],json:{write:!0}})],h.prototype,"customValues",void 0),h=(0,i._)([(0,p.$)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],h);const g=h;var v,b=r(32974),w=r(70481);const S=new o.J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),M=new o.J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function _(e){if(null!=e)return"string"==typeof e||"number"==typeof e?function(e){return(0,y.cr)(e)}(e):"size"===e.type?(0,b.of)(e)?e:(delete(e={...e}).type,new A(e)):void 0}function T(e,t,r){if("object"!=typeof e)return e;const i=new A;return i.read(e,r),i}let A=v=class extends d.A{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&w.viewScaleRE.test(this.valueExpression)}}set index(e){(0,b.of)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,b.of)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return(0,b.eh)(this)}set maxDataValue(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return _(e)}readMaxSize(e,t,r){return T(e,0,r)}set minDataValue(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return _(e)}readMinSize(e,t,r){return T(e,0,r)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(s.A.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return(0,b.KZ)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if("$view.scale"===e){if(i?.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;i.messages.push(new n.A("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?M.read(e):null}clone(){return new v({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,b.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,b.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===b._w.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===b._w.Stops){const e=this.stops;if(!e)return this;const t=e.map((e=>e.size)).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map((e=>e.value||0))}};(0,i._)([(0,l.MZ)({readOnly:!0})],A.prototype,"cache",null),(0,i._)([(0,l.MZ)({type:S.apiValues,json:{type:S.jsonValues,origins:{"web-map":{read:!1}},read:S.read,write:S.write}})],A.prototype,"axis",void 0),(0,i._)([(0,l.MZ)()],A.prototype,"index",null),(0,i._)([(0,l.MZ)({type:String,readOnly:!0})],A.prototype,"inputValueType",null),(0,i._)([(0,l.MZ)({type:g,json:{write:!0}})],A.prototype,"legendOptions",void 0),(0,i._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],A.prototype,"maxDataValue",null),(0,i._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],A.prototype,"maxSize",null),(0,i._)([(0,a.w)("maxSize")],A.prototype,"castMaxSize",null),(0,i._)([(0,u.w)("maxSize")],A.prototype,"readMaxSize",null),(0,i._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],A.prototype,"minDataValue",null),(0,i._)([(0,l.MZ)({type:Number,value:null,json:{write:!0}})],A.prototype,"minSize",null),(0,i._)([(0,a.w)("minSize")],A.prototype,"castMinSize",null),(0,i._)([(0,u.w)("minSize")],A.prototype,"readMinSize",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"normalizationField",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],A.prototype,"arcadeRequired",null),(0,i._)([(0,l.MZ)({type:String})],A.prototype,"scaleBy",void 0),(0,i._)([(0,l.MZ)({type:[f.A],value:null,json:{write:!0}})],A.prototype,"stops",null),(0,i._)([(0,l.MZ)({type:["outline"],json:{write:!0}})],A.prototype,"target",void 0),(0,i._)([(0,l.MZ)({type:String,readOnly:!0})],A.prototype,"transformationType",null),(0,i._)([(0,l.MZ)({type:["size"],json:{type:["sizeInfo"]}})],A.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],A.prototype,"useSymbolValue",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],A.prototype,"valueExpression",void 0),(0,i._)([(0,u.w)("valueExpression",["valueExpression","expression"])],A.prototype,"readValueExpression",null),(0,i._)([(0,c.K)("web-scene","valueExpression")],A.prototype,"writeValueExpressionWebScene",null),(0,i._)([(0,l.MZ)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],A.prototype,"valueRepresentation",void 0),(0,i._)([(0,l.MZ)({type:M.apiValues,json:{write:M.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],A.prototype,"valueUnit",void 0),(0,i._)([(0,u.w)("valueUnit")],A.prototype,"readValueUnit",null),A=v=(0,i._)([(0,p.$)("esri.renderers.visualVariables.SizeVariable")],A);const I=A},64494:function(e,t,r){r.d(t,{A:function(){return f}});var i=r(53804),n=r(73037),o=r(30905),s=r(40633),l=r(23502),a=r(77560),u=r(65953),p=r(67888),c=r(96893);const d=new n.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let y=class extends o.oY{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(s.A.getLogger(this).error(".field: field must be a string value"),null):(0,p.GX)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,i._)([(0,l.MZ)()],y.prototype,"index",void 0),(0,i._)([(0,l.MZ)({type:d.apiValues,readOnly:!0,json:{read:d.read,write:d.write}})],y.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],y.prototype,"field",void 0),(0,i._)([(0,a.w)("field")],y.prototype,"castField",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],y.prototype,"valueExpression",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],y.prototype,"valueExpressionTitle",void 0),(0,i._)([(0,l.MZ)({readOnly:!0})],y.prototype,"arcadeRequired",null),(0,i._)([(0,l.MZ)({type:c.A,json:{write:!0}})],y.prototype,"legendOptions",void 0),y=(0,i._)([(0,u.$)("esri.renderers.visualVariables.VisualVariable")],y);const f=y},71859:function(e,t,r){r.d(t,{A:function(){return d}});var i,n=r(53804),o=r(52874),s=r(30905),l=r(23502),a=r(67888),u=(r(13798),r(58941),r(65953)),p=r(81392);let c=i=class extends s.oY{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new i({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,n._)([(0,l.MZ)({type:o.A,json:{type:[a.jz],write:!0}})],c.prototype,"color",void 0),(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],c.prototype,"value",void 0),(0,n._)([(0,p.K)("value")],c.prototype,"writeValue",null),c=i=(0,n._)([(0,u.$)("esri.renderers.visualVariables.support.ColorStop")],c);const d=c},59423:function(e,t,r){r.d(t,{A:function(){return p}});var i,n=r(53804),o=r(30905),s=r(13520),l=r(23502),a=(r(58941),r(40633),r(13798),r(65953));let u=i=class extends o.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new i({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};(0,n._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,n._)([(0,l.MZ)({type:Number,cast:s.cr,json:{write:!0}})],u.prototype,"size",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],u.prototype,"value",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!1}})],u.prototype,"useMinValue",void 0),(0,n._)([(0,l.MZ)({type:Boolean,json:{write:!1}})],u.prototype,"useMaxValue",void 0),u=i=(0,n._)([(0,a.$)("esri.renderers.visualVariables.support.SizeStop")],u);const p=u},96893:function(e,t,r){r.d(t,{A:function(){return u}});var i=r(53804),n=r(75743),o=r(30905),s=r(23502),l=(r(58941),r(40633),r(13798),r(65953));let a=class extends((0,n.O)(o.oY)){constructor(){super(...arguments),this.showLegend=null,this.title=null}};(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],a.prototype,"showLegend",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],a.prototype,"title",void 0),a=(0,i._)([(0,l.$)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],a);const u=a},32974:function(e,t,r){var i,n;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function s(e){return null!=e&&!isNaN(e)&&isFinite(e)}function l(e){return e.valueExpression?i.Expression:e.field&&"string"==typeof e.field?i.Field:i.Unknown}function a(e,t){const r=t||l(e),o=e.valueUnit||"unknown";return r===i.Unknown?n.Constant:e.stops?n.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?n.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?n.Proportional:n.Additive:n.Identity:n.RealWorldSize}r.d(t,{KZ:function(){return a},Yf:function(){return i},_w:function(){return n},eh:function(){return l},gf:function(){return s},of:function(){return o}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(i||(i={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(n||(n={}))},70481:function(e,t,r){r.r(t),r.d(t,{getAllSizes:function(){return A},getColor:function(){return m},getOpacity:function(){return h},getRotationAngle:function(){return g},getSize:function(){return v},getSizeForValue:function(){return S},getSizeFromNumberOrVariable:function(){return b},getSizeRangeAtScale:function(){return M},getVisualVariableValues:function(){return _},viewScaleRE:function(){return f}});var i=r(52874),n=r(59469),o=r(82547),s=r(40633),l=r(85031),a=r(32974);const u=()=>s.A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p=e=>u().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),c=()=>u().error("Use of arcade expressions requires an arcade context"),d=new n.default,y=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function m(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.ColorVariable"!==n.declaredClass)return void p("ColorVariable");const o="number"==typeof t,s=o?null:t,l=s?.attributes;let a=o?t:null;const u=n.field,{ipData:d,hasExpression:y}=n.cache;let f=n.cache.compiledFunc;if(!u&&!y){const e=n.stops;return e&&e[0]&&e[0].color}if("number"!=typeof a)if(y){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,i=t.getViewInfo(e),o=t.createExecContext(s,i,r.timeZone);if(!f){const e=t.createSyntaxTree(n.valueExpression);f=t.createFunction(e),n.cache.compiledFunc=f}a=t.executeFunction(f,o)}else l&&(a=l[u]);const m=n.normalizationField,h=null!=l&&null!=m?parseFloat(l[m]):void 0;if(null!=a&&(!m||o||!isNaN(h)&&0!==h)){isNaN(h)||o||(a/=h);const e=T(a,d);if(e){const t=e[0],o=e[1],s=t===o?n.stops[t].color:i.A.blendColors(n.stops[t].color,n.stops[o].color,e[2],null!=r?r.color:void 0);return new i.A(s)}}}function h(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.OpacityVariable"!==i.declaredClass)return void p("OpacityVariable");const n="number"==typeof t,o=n?null:t,s=o?.attributes;let l=n?t:null;const a=i.field,{ipData:u,hasExpression:d}=i.cache;let y=i.cache.compiledFunc;if(!a&&!d){const e=i.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(d){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,n=t.getViewInfo(e),s=t.createExecContext(o,n,r.timeZone);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}l=t.executeFunction(y,s)}else s&&(l=s[a]);const f=i.normalizationField,m=null!=s&&null!=f?parseFloat(s[f]):void 0;if(null!=l&&(!f||n||!isNaN(m)&&0!==m)){isNaN(m)||n||(l/=m);const e=T(l,u);if(e){const t=e[0],r=e[1];if(t===r)return i.stops[t].opacity;{const n=i.stops[t].opacity;return n+(i.stops[r].opacity-n)*e[2]}}}}function g(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.RotationVariable"!==i.declaredClass)return void p("RotationVariable");const n=i.axis||"heading",o="heading"===n&&"arithmetic"===i.rotationType?90:0,s="heading"===n&&"arithmetic"===i.rotationType?-1:1,l="number"==typeof t?null:t,a=l?.attributes,u=i.field,{hasExpression:d}=i.cache;let y=i.cache.compiledFunc,f=0;if(!u&&!d)return f;if(d){if(null==r?.arcade)return void c();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,n=t.getViewInfo(e),o=t.createExecContext(l,n,r.timeZone);if(!y){const e=t.createSyntaxTree(i.valueExpression);y=t.createFunction(e),i.cache.compiledFunc=y}f=t.executeFunction(y,o)}else a&&(f=a[u]||0);return f="number"!=typeof f||isNaN(f)?null:o+s*f,f}function v(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.SizeVariable"!==i.declaredClass)return void p("SizeVariable");const n=S(function(e,t,r){const i="number"==typeof t,n=i?null:t,o=n?.attributes;let s=i?t:null;const{isScaleDriven:l}=e.cache;let u=e.cache.compiledFunc;if(l){const t=null!=r?r.scale:void 0,i=null!=r?r.view:void 0;s=null==t||"3d"===i?function(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!i)switch(e.inputValueType){case a.Yf.Expression:{if(null==r?.arcade)return void c();const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},i=r.arcade.arcadeUtils,o=i.getViewInfo(t),l=i.createExecContext(n,o,r.timeZone);if(!u){const t=i.createSyntaxTree(e.valueExpression);u=i.createFunction(t),e.cache.compiledFunc=u}s=i.executeFunction(u,l);break}case a.Yf.Field:o&&(s=o[e.field]);break;case a.Yf.Unknown:s=null}if(!(0,a.gf)(s))return null;if(i||!e.normalizationField)return s;const p=o?parseFloat(o[e.normalizationField]):null;return(0,a.gf)(p)&&0!==p?s/p:null}(i,t,r),i,t,r,i.cache.ipData);return null==n||isNaN(n)?0:n}function b(e,t,r){return null==e?null:(0,a.of)(e)?v(e,t,r):(0,a.gf)(e)?e:null}function w(e,t,r){return(0,a.gf)(r)&&e>r?r:(0,a.gf)(t)&&e<t?t:e}function S(e,t,r,i,n){switch(t.transformationType){case a._w.Additive:return function(e,t,r,i){return e+((b(t.minSize,r,i)||t.minDataValue)??0)}(e,t,r,i);case a._w.Constant:return function(e,t,r){const i=e.stops;let n=i?.length&&i[0].size;return null==n&&(n=e.minSize),b(n,t,r)}(t,r,i);case a._w.ClampedLinear:return function(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=b(t.minSize,r,i),s=b(t.maxSize,r,i),l=null!=i?i.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if(null==o||null==s)return null;if("area"===t.scaleBy&&l){const e="circle"===l,t=e?y*(o/2)**2:o*o,r=t+n*((e?y*(s/2)**2:s*s)-t);return e?2*Math.sqrt(r/y):Math.sqrt(r)}return o+n*(s-o)}(e,t,r,i);case a._w.Proportional:return function(e,t,r,i){const n=null!=i?i.shape:void 0,o=e/t.minDataValue,s=b(t.minSize,r,i),l=b(t.maxSize,r,i);let a=null;return a="circle"===n?2*Math.sqrt(o*(s/2)**2):"square"===n||"diamond"===n||"image"===n?Math.sqrt(o*s**2):o*s,w(a,s,l)}(e,t,r,i);case a._w.Stops:return function(e,t,r,i,n){const[o,s,l]=T(e,n);if(o===s)return b(t.stops?.[o].size,r,i);{const e=b(t.stops?.[o].size,r,i);return e+(b(t.stops?.[s].size,r,i)-e)*l}}(e,t,r,i,n);case a._w.RealWorldSize:return function(e,t,r,i){const n=(i?.resolution??1)*l.j[t.valueUnit],o=b(t.minSize,r,i),s=b(t.maxSize,r,i),{valueRepresentation:a}=t;let u=null;return u="area"===a?2*Math.sqrt(e/y)/n:"radius"===a||"distance"===a?2*e/n:e/n,w(u,o,s)}(e,t,r,i);case a._w.Identity:return e;case a._w.Unknown:return null}}function M(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&"3d"===r||t))return null;const n={scale:t,view:r};let o=b(e.minSize,d,n),s=b(e.maxSize,d,n);if(null!=o||null!=s){if(o>s){const e=s;s=o,o=e}return{minSize:o,maxSize:s}}}function _(e,t,r){if(!e.visualVariables)return;const i=[],n=[],o=[],s=[],l=[];for(const t of e.visualVariables)switch(t.type){case"color":n.push(t);break;case"opacity":o.push(t);break;case"rotation":l.push(t);break;case"size":s.push(t)}return n.forEach((e=>{const n=m(e,t,r);i.push({variable:e,value:n})})),o.forEach((e=>{const n=h(e,t,r);i.push({variable:e,value:n})})),l.forEach((e=>{const n=g(e,t,r);i.push({variable:e,value:n})})),s.forEach((e=>{const n=v(e,t,r);i.push({variable:e,value:n})})),i.filter((e=>null!=e.value))}function T(e,t){if(!t)return;let r=0,i=t.length-1;return t.some(((t,n)=>e<t?(i=n,!0):(r=n,!1))),[r,i,(e-t[r])/(t[i]-t[r])]}function A(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const e=n.useSymbolValue?"symbol-value":v(n,t,r);switch(n.axis){case"width":i[0]=e;break;case"depth":i[1]=e;break;case"height":i[2]=e;break;case"width-and-depth":i[0]=e,i[1]=e;break;case"all":case void 0:case null:i[0]=e,i[1]=e,i[2]=e;break;default:(0,o.Xb)(n.axis)}}return i}},26765:function(e,t,r){r.d(t,{V:function(){return o},X:function(){return n}});var i=r(74697);function n(e){return{geometryType:(0,i.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function o(e,t,r){const n=(0,i.xD)(t);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=r,t}))}},78703:function(e,t,r){r.d(t,{Zn:function(){return a},aZ:function(){return s},lh:function(){return n},nA:function(){return l},p3:function(){return o},r9:function(){return u}});var i=r(66062);function n(e,t){if(null==e)return null;const r={},n=new RegExp(`^${t}`,"i");for(const o of Object.keys(e))if(n.test(o)){const n=o.slice(t.length);r[i.et.fromJSON(n)]=e[o]}return r}function o(e,t,r){if(null!=e){t.attributes||(t.attributes={});for(const n in e){const o=i.et.toJSON(n);t.attributes[`${r}${o}`]=e[n]}}}function s(e){const t={};for(const r of Object.keys(e)){const n=r;t[i.et.fromJSON(n)]=e[r]}return t}function l(e){const t={};for(const r of Object.keys(e)){const n=r;t[i.et.toJSON(n)]=e[r]}return t}function a(e,t){return null==e||null==t?null:Math.round((e-t)/6e4)}function u(e){const t=e.toJSON(),r=t;return r.accumulateAttributeNames&&=t.accumulateAttributeNames?.join(),r.attributeParameterValues&&=JSON.stringify(t.attributeParameterValues),r.barriers&&=JSON.stringify(t.barriers),r.outSR&&=t.outSR?.wkid,r.overrides&&=JSON.stringify(t.overrides),r.polygonBarriers&&=JSON.stringify(t.polygonBarriers),r.polylineBarriers&&=JSON.stringify(t.polylineBarriers),r.restrictionAttributeNames&&=t.restrictionAttributeNames?.join(),r.stops&&=JSON.stringify(t.stops),r.travelMode&&=JSON.stringify(t.travelMode),r}},30698:function(e,t,r){r.d(t,{A:function(){return y}});var i,n=r(53804),o=r(52874),s=r(21609),l=r(23502),a=r(67888),u=r(74376),p=r(65953),c=r(9035);let d=i=class extends c.A{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new i({fromColor:(0,s.o8)(this.fromColor),toColor:(0,s.o8)(this.toColor),algorithm:this.algorithm})}};(0,n._)([(0,u.e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],d.prototype,"algorithm",void 0),(0,n._)([(0,l.MZ)({type:o.A,json:{type:[a.jz],write:!0}})],d.prototype,"fromColor",void 0),(0,n._)([(0,l.MZ)({type:o.A,json:{type:[a.jz],write:!0}})],d.prototype,"toColor",void 0),(0,n._)([(0,l.MZ)({type:["algorithmic"]})],d.prototype,"type",void 0),d=i=(0,n._)([(0,p.$)("esri.rest.support.AlgorithmicColorRamp")],d);const y=d},9035:function(e,t,r){r.d(t,{A:function(){return a}});var i=r(53804),n=r(30905),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953));let l=class extends n.oY{constructor(e){super(e),this.type=null}};(0,i._)([(0,o.MZ)({readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=(0,i._)([(0,s.$)("esri.rest.support.ColorRamp")],l);const a=l},24227:function(e,t,r){r.d(t,{A:function(){return m}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(65953)),d=r(91508),y=r(66062);let f=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.directionLineType=null,this.directionPointId=null,this.distance=null,this.duration=null,this.fromLevel=null,this.geometry=null,this.objectId=null,this.popupTemplate=null,this.symbol=null,this.toLevel=null,this.type="direction-line"}static fromGraphic(e){return new i({directionLineType:y.gD.fromJSON(e.attributes.DirectionLineType),directionPointId:e.attributes.DirectionPointID,distance:e.attributes.Meters,duration:e.attributes.Minutes,fromLevel:e.attributes.FromLevel??null,geometry:e.geometry,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,symbol:e.symbol,toLevel:e.attributes.ToLevel??null})}toGraphic(){const e={ObjectID:this.objectId,DirectionLineType:null!=this.directionLineType?y.gD.toJSON(this.directionLineType):null,DirectionPointID:this.directionPointId,Meters:this.distance,Minutes:this.duration};return null!=this.fromLevel&&(e.FromLevel=this.fromLevel),null!=this.toLevel&&(e.ToLevel=this.toLevel),new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};f.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"DirectionLineType",alias:"Line Type",type:"esriFieldTypeInteger"},{name:"DirectionPointID",alias:"Direction Point ID",type:"esriFieldTypeInteger"},{name:"FromLevel",alias:"From Level",type:"esriFieldTypeInteger"},{name:"Meters",alias:"Meters",type:"esriFieldTypeDouble"},{name:"Minutes",alias:"Minutes",type:"esriFieldTypeDouble"},{name:"ToLevel",alias:"To Level",type:"esriFieldTypeInteger"}],(0,n._)([(0,p.MZ)({type:y.gD.apiValues,json:{read:{source:"attributes.DirectionLineType",reader:y.gD.read}}})],f.prototype,"directionLineType",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.DirectionPointID"}}})],f.prototype,"directionPointId",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Meters"}}})],f.prototype,"distance",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Minutes"}}})],f.prototype,"duration",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.FromLevel"}}})],f.prototype,"fromLevel",void 0),(0,n._)([(0,p.MZ)({type:d.A})],f.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ObjectID"}}})],f.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],f.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],f.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ToLevel"}}})],f.prototype,"toLevel",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0),f=i=(0,n._)([(0,c.$)("esri.rest.support.DirectionLine")],f);const m=f},49359:function(e,t,r){r.d(t,{A:function(){return h}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(45532),f=r(66062);let m=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.alternateName=null,this.arrivalTime=null,this.arrivalTimeOffset=null,this.azimuth=null,this.branchName=null,this.directionPointType=null,this.displayText=null,this.exitName=null,this.geometry=null,this.intersectingName=null,this.level=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.sequence=null,this.shortVoiceInstruction=null,this.stopId=null,this.symbol=null,this.towardName=null,this.type="direction-point",this.voiceInstruction=null}readArrivalTime(e,t){return null!=t.attributes.ArrivalTime?new Date(t.attributes.ArrivalTime):null}static fromGraphic(e){return new i({alternateName:e.attributes.AlternateName??null,arrivalTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arrivalTimeOffset:e.attributes.ArrivalUTCOffset??null,azimuth:e.attributes.Azimuth??null,branchName:e.attributes.BranchName??null,directionPointType:f._6.fromJSON(e.attributes.DirectionPointType),displayText:e.attributes.DisplayText??null,exitName:e.attributes.ExitName??null,geometry:e.geometry,intersectingName:e.attributes.IntersectingName??null,level:e.attributes.Level??null,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,sequence:e.attributes.Sequence,shortVoiceInstruction:e.attributes.ShortVoiceInstruction??null,stopId:e.attributes.StopID??null,symbol:e.symbol,towardName:e.attributes.TowardName??null,voiceInstruction:e.attributes.VoiceInstruction??null})}toGraphic(){const e={ObjectID:this.objectId,DirectionPointType:null!=this.directionPointType?f._6.toJSON(this.directionPointType):null,Sequence:this.sequence,StopID:this.stopId};return null!=this.alternateName&&(e.AlternateName=this.alternateName),null!=this.arrivalTime&&(e.ArrivalTime=this.arrivalTime.getTime()),null!=this.arrivalTimeOffset&&(e.ArrivalUTCOffset=this.arrivalTimeOffset),null!=this.azimuth&&(e.Azimuth=this.azimuth),null!=this.branchName&&(e.BranchName=this.branchName),null!=this.displayText&&(e.DisplayText=this.displayText),null!=this.exitName&&(e.ExitName=this.exitName),null!=this.intersectingName&&(e.IntersectingName=this.intersectingName),null!=this.level&&(e.Level=this.level),null!=this.name&&(e.Name=this.name),null!=this.shortVoiceInstruction&&(e.ShortVoiceInstruction=this.shortVoiceInstruction),null!=this.towardName&&(e.TowardName=this.towardName),null!=this.voiceInstruction&&(e.VoiceInstruction=this.voiceInstruction),new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};m.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AlternateName",alias:"Alternative Name",type:"esriFieldTypeString"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time Offset",type:"esriFieldTypeInteger"},{name:"Azimuth",alias:"Azimuth",type:"esriFieldTypeDouble"},{name:"BranchName",alias:"Branch Name",type:"esriFieldTypeString"},{name:"DirectionPointType",alias:"Directions Point Type",type:"esriFieldTypeInteger"},{name:"DisplayText",alias:"Display Text",type:"esriFieldTypeString"},{name:"ExitName",alias:"Exit Name",type:"esriFieldTypeString"},{name:"IntersectingName",alias:"Intersecting Name",type:"esriFieldTypeString"},{name:"Level",alias:"Level",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ShortVoiceInstruction",alias:"Short Voice Instruction",type:"esriFieldTypeString"},{name:"StopID",alias:"Stop ID",type:"esriFieldTypeInteger"},{name:"TowardName",alias:"Toward Name",type:"esriFieldTypeString"},{name:"VoiceInstruction",alias:"Voice Instruction",type:"esriFieldTypeString"}],(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.AlternateName"}}})],m.prototype,"alternateName",void 0),(0,n._)([(0,p.MZ)()],m.prototype,"arrivalTime",void 0),(0,n._)([(0,c.w)("arrivalTime",["attributes.ArrivalTime"])],m.prototype,"readArrivalTime",null),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ArrivalUTCOffset"}}})],m.prototype,"arrivalTimeOffset",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Azimuth"}}})],m.prototype,"azimuth",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.BranchName"}}})],m.prototype,"branchName",void 0),(0,n._)([(0,p.MZ)({type:f._6.apiValues,json:{read:{source:"attributes.DirectionPointType",reader:f._6.read}}})],m.prototype,"directionPointType",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.DisplayText"}}})],m.prototype,"displayText",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ExitName"}}})],m.prototype,"exitName",void 0),(0,n._)([(0,p.MZ)({type:y.default})],m.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.IntersectingName"}}})],m.prototype,"intersectingName",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Level"}}})],m.prototype,"level",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Name"}}})],m.prototype,"name",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ObjectID"}}})],m.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],m.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Sequence"}}})],m.prototype,"sequence",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ShortVoiceInstruction"}}})],m.prototype,"shortVoiceInstruction",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.StopID"}}})],m.prototype,"stopId",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],m.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.TowardName"}}})],m.prototype,"towardName",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],m.prototype,"type",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.VoiceInstruction"}}})],m.prototype,"voiceInstruction",void 0),m=i=(0,n._)([(0,d.$)("esri.rest.support.DirectionPoint")],m);const h=m},51084:function(e,t,r){r.d(t,{A:function(){return b}});var i,n=r(53804),o=r(50917),s=r(59469),l=r(73037),a=r(30905),u=r(21609),p=r(23502),c=(r(58941),r(40633),r(47332)),d=r(65953),y=r(81392),f=r(57165),m=r(74697),h=r(56740);const g=new l.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let v=i=class extends a.oY{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=f.A.fromJSON(t.spatialReference),i=[];for(let t=0;t<e.length;t++){const n=e[t],o=s.default.fromJSON(n),l=n.geometry?.spatialReference;null==o.geometry||l||(o.geometry.spatialReference=r);const a=n.aggregateGeometries,u=o.aggregateGeometries;if(a&&null!=u)for(const e in u){const t=u[e],i=a[e],n=i?.spatialReference;null==t||n||(t.spatialReference=r)}i.push(o)}return i}writeGeometryType(e,t,r,i){if(e)return void g.write(e,t,r,i);const{features:n}=this;if(n)for(const e of n)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,i)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=(0,m.rS)(e);return i&&!r&&t.spatialReference&&(i.spatialReference=f.A.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new i(this.cloneProperties())}cloneProperties(){return(0,u.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const t=e?.[r];i.geometry=t?.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,o=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-i)/t)),(e=>Math.round((n-e)/r)));for(let e=0,t=o.length;e<t;e++)s?.(o[e].geometry)||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[o,s]}=r;let l=null,a=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;l=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;a=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*o+i),(e=>n-e*s),l,a);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const o=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(s>0){const e=t(l[0]),s=r(l[1]);e===i&&s===n||(o.push([e-i,s-n]),i=e,n=s)}else i=t(l[0]),n=r(l[1]),o.push([i,n])}return o.length>0?o:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const i=(0,m.Bi)(e)?e.rings:e.paths,n=[];for(let e=0,o=i.length;e<o;e++){const o=i[e],s=this._quantizePoints(o,t,r);s&&n.push(s)}return n.length>0?((0,m.Bi)(e)?e.rings=n:e.paths=n,e):null}:"multipoint"===e?e=>{const i=this._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,i,n){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),i&&(e.z=i(e.z))}:"polyline"===e||"polygon"===e?e=>{const o=(0,m.Bi)(e)?e.rings:e.paths;let s,l;for(let e=0,i=o.length;e<i;e++){const i=o[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];e>0?(s+=n[0],l+=n[1]):(s=n[0],l=n[1]),n[0]=t(s),n[1]=r(l)}}if(i&&n)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=i(r[2]),r[3]=n(r[3])}}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=i(r[2])}}else if(n)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),i&&null!=e.zmax&&null!=e.zmin&&(e.zmax=i(e.zmax),e.zmin=i(e.zmin)),n&&null!=e.mmax&&null!=e.mmin&&(e.mmax=n(e.mmax),e.mmin=n(e.mmin))}:"multipoint"===e?e=>{const o=e.points;let s,l;for(let e=0,i=o.length;e<i;e++){const i=o[e];e>0?(s+=i[0],l+=i[1]):(s=i[0],l=i[1]),i[0]=t(s),i[1]=r(l)}if(i&&n)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2]),t[3]=n(t[3])}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2])}else if(n)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=n(t[2])}}:null}};(0,n._)([(0,p.MZ)({type:String,json:{write:!0}})],v.prototype,"displayFieldName",void 0),(0,n._)([(0,p.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"exceededTransferLimit",void 0),(0,n._)([(0,p.MZ)({type:[s.default],json:{write:!0}})],v.prototype,"features",void 0),(0,n._)([(0,c.w)("features")],v.prototype,"readFeatures",null),(0,n._)([(0,p.MZ)({type:[h.A],json:{write:!0}})],v.prototype,"fields",void 0),(0,n._)([(0,p.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],v.prototype,"geometryType",void 0),(0,n._)([(0,y.K)("geometryType")],v.prototype,"writeGeometryType",null),(0,n._)([(0,p.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasM",void 0),(0,n._)([(0,p.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"hasZ",void 0),(0,n._)([(0,p.MZ)({types:o.yR,json:{write:!0}})],v.prototype,"queryGeometry",void 0),(0,n._)([(0,c.w)("queryGeometry")],v.prototype,"readQueryGeometry",null),(0,n._)([(0,p.MZ)({type:f.A,json:{write:!0}})],v.prototype,"spatialReference",void 0),(0,n._)([(0,y.K)("spatialReference")],v.prototype,"writeSpatialReference",null),(0,n._)([(0,p.MZ)({json:{write:!0}})],v.prototype,"transform",void 0),v=i=(0,n._)([(0,d.$)("esri.rest.support.FeatureSet")],v),v.prototype.toJSON.isDefaultToJSON=!0;const b=v},96245:function(e,t,r){r.d(t,{A:function(){return c}});var i,n=r(53804),o=r(21609),s=r(23502),l=(r(58941),r(40633),r(65953)),a=r(30698),u=r(9035);let p=i=class extends u.A{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new i({colorRamps:(0,o.o8)(this.colorRamps)})}};(0,n._)([(0,s.MZ)({type:[a.A],json:{write:!0}})],p.prototype,"colorRamps",void 0),(0,n._)([(0,s.MZ)({type:["multipart"]})],p.prototype,"type",void 0),p=i=(0,n._)([(0,l.$)("esri.rest.support.MultipartColorRamp")],p);const c=p},93887:function(e,t,r){r.d(t,{A:function(){return v}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(81392),f=r(45532),m=r(78703),h=r(66062);let g=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.addedCost=null,this.barrierType=null,this.costs=null,this.curbApproach=null,this.fullEdge=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.sideOfEdge=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.type="point-barrier"}readCosts(e,t){return(0,m.lh)(t.attributes,"Attr_")}writeCosts(e,t){(0,m.p3)(e,t,"Attr_")}static fromGraphic(e){return new i({addedCost:e.attributes.AddedCost??null,barrierType:null!=e.attributes.BarrierType?h.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,m.aZ)(JSON.parse(e.attributes.Costs)):null,curbApproach:null!=e.attributes.CurbApproach?h.JJ.fromJSON(e.attributes.CurbApproach):null,fullEdge:null!=e.attributes.FullEdge?h.fe.fromJSON(e.attributes.FullEdge):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,status:null!=e.attributes.Status?h.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,AddedCost:this.addedCost,BarrierType:null!=this.barrierType?h.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,m.nA)(this.costs)):null,CurbApproach:null!=this.curbApproach?h.JJ.toJSON(this.curbApproach):null,FullEdge:null!=this.fullEdge?h.fe.toJSON(this.fullEdge):null,Name:this.name,Status:null!=this.status?h.$r.toJSON(this.status):null};return new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AddedCost",alias:"Added Cost",type:"esriFieldTypeDouble"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"FullEdge",alias:"Full Edge",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"}],(0,n._)([(0,p.MZ)()],g.prototype,"addedCost",void 0),(0,n._)([(0,p.MZ)({type:h.iM.apiValues,json:{name:"attributes.BarrierType",read:{reader:h.iM.read},write:{writer:h.iM.write}}})],g.prototype,"barrierType",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"costs",void 0),(0,n._)([(0,c.w)("costs",["attributes"])],g.prototype,"readCosts",null),(0,n._)([(0,y.K)("costs")],g.prototype,"writeCosts",null),(0,n._)([(0,p.MZ)({constructOnly:!0,type:h.JJ.apiValues,json:{read:{source:"attributes.CurbApproach",reader:h.JJ.read}}})],g.prototype,"curbApproach",void 0),(0,n._)([(0,p.MZ)({type:h.fe.apiValues,json:{name:"attributes.FullEdge",read:{reader:h.fe.read},write:{writer:h.fe.write}}})],g.prototype,"fullEdge",void 0),(0,n._)([(0,p.MZ)({type:f.default,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],g.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)({type:h.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:h.mt.read}}})],g.prototype,"sideOfEdge",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SourceID"}}})],g.prototype,"sourceId",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SourceOID"}}})],g.prototype,"sourceOid",void 0),(0,n._)([(0,p.MZ)({type:h.$r.apiValues,json:{read:{source:"attributes.Status",reader:h.$r.read}}})],g.prototype,"status",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],g.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),g=i=(0,n._)([(0,d.$)("esri.rest.support.PointBarrier")],g);const v=g},29335:function(e,t,r){r.d(t,{A:function(){return v}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(81392),f=r(44740),m=r(78703),h=r(66062);let g=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.barrierType=null,this.costs=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.scaleFactor=null,this.symbol=null,this.type="polygon-barrier"}readCosts(e,t){return(0,m.lh)(t.attributes,"Attr_")}writeCosts(e,t){(0,m.p3)(e,t,"Attr_")}static fromGraphic(e){return new i({barrierType:null!=e.attributes.BarrierType?h.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,m.aZ)(JSON.parse(e.attributes.Costs)):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,scaleFactor:e.attributes.ScaleFactor??null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,BarrierType:null!=this.barrierType?h.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,m.nA)(this.costs)):null,Name:this.name??null,ScaleFactor:this.scaleFactor??null};return new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"ScaleFactor",alias:"Scale Factor",type:"esriFieldTypeDouble"}],(0,n._)([(0,p.MZ)({type:h.iM.apiValues,json:{name:"attributes.BarrierType",read:{reader:h.iM.read},write:{writer:h.iM.write}}})],g.prototype,"barrierType",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"costs",void 0),(0,n._)([(0,c.w)("costs",["attributes"])],g.prototype,"readCosts",null),(0,n._)([(0,y.K)("costs")],g.prototype,"writeCosts",null),(0,n._)([(0,p.MZ)({type:f.A,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],g.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"scaleFactor",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],g.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),g=i=(0,n._)([(0,d.$)("esri.rest.support.PolygonBarrier")],g);const v=g},55339:function(e,t,r){r.d(t,{A:function(){return g}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(91508),f=r(78703),m=r(66062);let h=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.barrierType=null,this.costs=null,this.geometry=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.scaleFactor=null,this.symbol=null,this.type="polyline-barrier"}readCosts(e,t){return(0,f.lh)(t.attributes,"Attr_")}static fromGraphic(e){return new i({barrierType:null!=e.attributes.BarrierType?m.iM.fromJSON(e.attributes.BarrierType):null,costs:null!=e.attributes.Costs?(0,f.aZ)(JSON.parse(e.attributes.Costs)):null,geometry:e.geometry,name:e.attributes.Name??null,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,scaleFactor:e.attributes.ScaleFactor??null,symbol:e.symbol})}toGraphic(){const e={ObjectID:this.objectId,BarrierType:null!=this.barrierType?m.iM.toJSON(this.barrierType):null,Costs:null!=this.costs?JSON.stringify((0,f.nA)(this.costs)):null,Name:this.name,ScaleFactor:this.scaleFactor};return new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};h.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"BarrierType",alias:"Barrier Type",type:"esriFieldTypeInteger"},{name:"Costs",alias:"Costs",type:"esriFieldTypeString"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"ScaleFactor",alias:"Scale Factor",type:"esriFieldTypeDouble"}],(0,n._)([(0,p.MZ)({type:m.iM.apiValues,json:{read:{source:"attributes.BarrierType",reader:m.iM.read}}})],h.prototype,"barrierType",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"costs",void 0),(0,n._)([(0,c.w)("costs",["attributes"])],h.prototype,"readCosts",null),(0,n._)([(0,p.MZ)({type:y.A,json:{write:!0}})],h.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.Name"}})],h.prototype,"name",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],h.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],h.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"scaleFactor",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],h.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0),h=i=(0,n._)([(0,d.$)("esri.rest.support.PolylineBarrier")],h);const g=h},63253:function(e,t,r){r.d(t,{A:function(){return g}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(91508),f=r(78703),m=r(28940);let h=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.analysisSettings=null,this.endTime=null,this.endTimeOffset=null,this.firstStopId=null,this.geometry=null,this.lastStopId=null,this.messages=null,this.name=null,this.objectId=null,this.popupTemplate=null,this.startTime=null,this.startTimeOffset=null,this.stopCount=null,this.symbol=null,this.totalCosts=null,this.totalDistance=null,this.totalDuration=null,this.totalLateDuration=null,this.totalViolations=null,this.totalWait=null,this.totalWaitDuration=null,this.type="route-info",this.version="1.0.0"}readEndTime(e,t){return null!=t.attributes.EndTimeUTC?new Date(t.attributes.EndTimeUTC):null}readEndTimeOffset(e,t){return(0,f.Zn)(t.attributes.EndTime,t.attributes.EndTimeUTC)}readStartTime(e,t){return null!=t.attributes.StartTimeUTC?new Date(t.attributes.StartTimeUTC):null}readStartTimeOffset(e,t){return(0,f.Zn)(t.attributes.StartTime,t.attributes.StartTimeUTC)}readTotalCosts(e,t){return(0,f.lh)(t.attributes,"Total_")}readTotalViolations(e,t){return(0,f.lh)(t.attributes,"TotalViolation_")}readTotalWait(e,t){return(0,f.lh)(t.attributes,"TotalWait_")}static fromGraphic(e){return new i({analysisSettings:null!=e.attributes.AnalysisSettings?m.A.fromJSON(JSON.parse(e.attributes.AnalysisSettings)):null,endTime:null!=e.attributes.EndTime?new Date(e.attributes.EndTime):null,endTimeOffset:e.attributes.EndUTCOffset??null,geometry:e.geometry,messages:null!=e.attributes.Messages?JSON.parse(e.attributes.Messages):null,name:e.attributes.RouteName,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,startTime:null!=e.attributes.StartTime?new Date(e.attributes.StartTime):null,startTimeOffset:e.attributes.StartUTCOffset??null,symbol:e.symbol,totalCosts:null!=e.attributes.TotalCosts?(0,f.aZ)(JSON.parse(e.attributes.TotalCosts)):null,totalDistance:e.attributes.TotalMeters??null,totalDuration:e.attributes.TotalMinutes??null,totalLateDuration:e.attributes.TotalLateMinutes??null,totalWaitDuration:e.attributes.TotalWaitMinutes??null,version:e.attributes.Version})}toGraphic(){const e={ObjectID:this.objectId,AnalysisSettings:null!=this.analysisSettings?JSON.stringify(this.analysisSettings.toJSON()):null,EndTime:null!=this.endTime?this.endTime.getTime():null,EndUTCOffset:this.endTimeOffset,Messages:null!=this.messages?JSON.stringify(this.messages):null,RouteName:this.name,StartTime:null!=this.startTime?this.startTime.getTime():null,StartUTCOffset:this.startTimeOffset,TotalCosts:null!=this.totalCosts?JSON.stringify((0,f.nA)(this.totalCosts)):null,TotalLateMinutes:this.totalLateDuration,TotalMeters:this.totalDistance,TotalMinutes:this.totalDuration,TotalWaitMinutes:this.totalWaitDuration,Version:this.version};return new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};h.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"AnalysisSettings",alias:"Analysis Settings",type:"esriFieldTypeString"},{name:"EndTime",alias:"End Time",type:"esriFieldTypeDate"},{name:"EndUTCOffset",alias:"End Time Offset",type:"esriFieldTypeInteger"},{name:"Messages",alias:"Messages",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"StartTime",alias:"Start Time",type:"esriFieldTypeDate"},{name:"StartUTCOffset",alias:"Start Time Offset",type:"esriFieldTypeInteger"},{name:"TotalCosts",alias:"Total Costs",type:"esriFieldTypeString"},{name:"TotalLateMinutes",alias:"Total Late Minutes",type:"esriFieldTypeDouble"},{name:"TotalMeters",alias:"Total Meters",type:"esriFieldTypeDouble"},{name:"TotalMinutes",alias:"Total Minutes",type:"esriFieldTypeDouble"},{name:"TotalWaitMinutes",alias:"Total Wait Minutes",type:"esriFieldTypeDouble"},{name:"Version",alias:"Version",type:"esriFieldTypeString"}],(0,n._)([(0,p.MZ)()],h.prototype,"analysisSettings",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"endTime",void 0),(0,n._)([(0,c.w)("endTime",["attributes.EndTimeUTC"])],h.prototype,"readEndTime",null),(0,n._)([(0,p.MZ)()],h.prototype,"endTimeOffset",void 0),(0,n._)([(0,c.w)("endTimeOffset",["attributes.EndTime","attributes.EndTimeUTC"])],h.prototype,"readEndTimeOffset",null),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.FirstStopID"}}})],h.prototype,"firstStopId",void 0),(0,n._)([(0,p.MZ)({type:y.A})],h.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.LastStopID"}}})],h.prototype,"lastStopId",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"messages",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.Name"}}})],h.prototype,"name",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.ObjectID"}}})],h.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],h.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"startTime",void 0),(0,n._)([(0,c.w)("startTime",["attributes.StartTimeUTC"])],h.prototype,"readStartTime",null),(0,n._)([(0,p.MZ)()],h.prototype,"startTimeOffset",void 0),(0,n._)([(0,c.w)("startTimeOffset",["attributes.StartTime","attributes.StartTimeUTC"])],h.prototype,"readStartTimeOffset",null),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.StopCount"}}})],h.prototype,"stopCount",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],h.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"totalCosts",void 0),(0,n._)([(0,c.w)("totalCosts",["attributes"])],h.prototype,"readTotalCosts",null),(0,n._)([(0,p.MZ)()],h.prototype,"totalDistance",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"totalDuration",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"totalLateDuration",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"totalViolations",void 0),(0,n._)([(0,c.w)("totalViolations",["attributes"])],h.prototype,"readTotalViolations",null),(0,n._)([(0,p.MZ)()],h.prototype,"totalWait",void 0),(0,n._)([(0,c.w)("totalWait",["attributes"])],h.prototype,"readTotalWait",null),(0,n._)([(0,p.MZ)()],h.prototype,"totalWaitDuration",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],h.prototype,"type",void 0),(0,n._)([(0,p.MZ)()],h.prototype,"version",void 0),h=i=(0,n._)([(0,d.$)("esri.rest.support.RouteInfo")],h);const g=h},28940:function(e,t,r){r.d(t,{A:function(){return d}});var i=r(53804),n=r(30905),o=r(23502),s=(r(58941),r(40633),r(13798),r(47332)),l=r(65953),a=r(81392),u=r(66062),p=r(11501);let c=class extends n.oY{constructor(e){super(e),this.accumulateAttributes=null,this.directionsLanguage=null,this.findBestSequence=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.startTimeIsUTC=null,this.timeWindowsAreUTC=null,this.travelMode=null}readAccumulateAttributes(e){return null==e?null:e.map((e=>u.et.fromJSON(e)))}writeAccumulateAttributes(e,t,r){e?.length&&(t[r]=e.map((e=>u.et.toJSON(e))))}};(0,i._)([(0,o.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],c.prototype,"accumulateAttributes",void 0),(0,i._)([(0,s.w)("accumulateAttributes")],c.prototype,"readAccumulateAttributes",null),(0,i._)([(0,a.K)("accumulateAttributes")],c.prototype,"writeAccumulateAttributes",null),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"directionsLanguage",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"findBestSequence",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"preserveFirstStop",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"preserveLastStop",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"startTimeIsUTC",void 0),(0,i._)([(0,o.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"timeWindowsAreUTC",void 0),(0,i._)([(0,o.MZ)({type:p.A,json:{write:!0}})],c.prototype,"travelMode",void 0),c=(0,i._)([(0,l.$)("esri.rest.support.RouteSettings")],c);const d=c},34258:function(e,t,r){r.d(t,{A:function(){return v}});var i,n=r(53804),o=r(59469),s=r(90473),l=r(10748),a=r(75743),u=r(30905),p=r(23502),c=(r(58941),r(40633),r(13798),r(47332)),d=r(65953),y=r(81392),f=r(45532),m=r(78703),h=r(66062);let g=i=class extends((0,a.O)(u.oY)){constructor(e){super(e),this.arriveCurbApproach=null,this.arriveTime=null,this.arriveTimeOffset=null,this.bearing=null,this.bearingTol=null,this.cumulativeCosts=null,this.cumulativeDistance=null,this.cumulativeDuration=null,this.curbApproach=null,this.departCurbApproach=null,this.departTime=null,this.departTimeOffset=null,this.distanceToNetworkInMeters=null,this.geometry=null,this.lateDuration=null,this.locationType=null,this.name=null,this.navLatency=null,this.objectId=null,this.popupTemplate=null,this.posAlong=null,this.routeName=null,this.serviceCosts=null,this.serviceDistance=null,this.serviceDuration=null,this.sequence=null,this.sideOfEdge=null,this.snapX=null,this.snapY=null,this.snapZ=null,this.sourceId=null,this.sourceOid=null,this.status=null,this.symbol=null,this.timeWindowEnd=null,this.timeWindowEndOffset=null,this.timeWindowStart=null,this.timeWindowStartOffset=null,this.type="stop",this.violations=null,this.waitDuration=null,this.wait=null}readArriveTimeOffset(e,t){return(0,m.Zn)(t.attributes.ArriveTime,t.attributes.ArriveTimeUTC)}readCumulativeCosts(e,t){return(0,m.lh)(t.attributes,"Cumul_")}readDepartTimeOffset(e,t){return(0,m.Zn)(t.attributes.DepartTime,t.attributes.DepartTimeUTC)}readServiceCosts(e,t){return(0,m.lh)(t.attributes,"Attr_")}writeServiceCosts(e,t){(0,m.p3)(e,t,"Attr_")}writeTimeWindowEnd(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowEnd=e.getTime())}writeTimeWindowStart(e,t){null!=e&&(t.attributes||(t.attributes={}),t.attributes.TimeWindowStart=e.getTime())}readViolations(e,t){return(0,m.lh)(t.attributes,"Violation_")}readWait(e,t){return(0,m.lh)(t.attributes,"Wait_")}static fromGraphic(e){return new i({arriveCurbApproach:null!=e.attributes.ArrivalCurbApproach?h.JJ.fromJSON(e.attributes.ArrivalCurbApproach):null,arriveTime:null!=e.attributes.ArrivalTime?new Date(e.attributes.ArrivalTime):null,arriveTimeOffset:e.attributes.ArrivalUTCOffset,cumulativeCosts:null!=e.attributes.CumulativeCosts?(0,m.aZ)(JSON.parse(e.attributes.CumulativeCosts)):null,cumulativeDistance:e.attributes.CumulativeMeters??null,cumulativeDuration:e.attributes.CumulativeMinutes??null,curbApproach:null!=e.attributes.CurbApproach?h.JJ.fromJSON(e.attributes.CurbApproach):null,departCurbApproach:null!=e.attributes.DepartureCurbApproach?h.JJ.fromJSON(e.attributes.DepartureCurbApproach):null,departTime:null!=e.attributes.DepartureTime?new Date(e.attributes.DepartureTime):null,departTimeOffset:e.attributes.DepartureUTCOffset??null,geometry:e.geometry,lateDuration:e.attributes.LateMinutes??null,locationType:null!=e.attributes.LocationType?h.EM.fromJSON(e.attributes.LocationType):null,name:e.attributes.Name,objectId:e.attributes.ObjectID??e.attributes.__OBJECTID,popupTemplate:e.popupTemplate,routeName:e.attributes.RouteName,sequence:e.attributes.Sequence??null,serviceCosts:null!=e.attributes.ServiceCosts?(0,m.aZ)(JSON.parse(e.attributes.ServiceCosts)):null,serviceDistance:e.attributes.ServiceMeters??null,serviceDuration:e.attributes.ServiceMinutes??null,status:null!=e.attributes.Status?h.$r.fromJSON(e.attributes.Status):null,symbol:e.symbol,timeWindowEnd:null!=e.attributes.TimeWindowEnd?new Date(e.attributes.TimeWindowEnd):null,timeWindowEndOffset:e.attributes.TimeWindowEndUTCOffset??null,timeWindowStart:null!=e.attributes.TimeWindowStart?new Date(e.attributes.TimeWindowStart):null,timeWindowStartOffset:e.attributes.TimeWindowStartUTCOffset??null,waitDuration:e.attributes.WaitMinutes??null})}toGraphic(){const e={ObjectID:this.objectId,ArrivalCurbApproach:null!=this.arriveCurbApproach?h.JJ.toJSON(this.arriveCurbApproach):null,ArrivalTime:null!=this.arriveTime?this.arriveTime.getTime():null,ArrivalUTCOffset:this.arriveTimeOffset,CumulativeCosts:null!=this.cumulativeCosts?JSON.stringify((0,m.nA)(this.cumulativeCosts)):null,CumulativeMeters:this.cumulativeDistance,CumulativeMinutes:this.cumulativeDuration,CurbApproach:null!=this.curbApproach?h.JJ.toJSON(this.curbApproach):null,DepartureCurbApproach:null!=this.departCurbApproach?h.JJ.toJSON(this.departCurbApproach):null,DepartureTime:null!=this.departTime?this.departTime.getTime():null,DepartureUTCOffset:this.departTimeOffset,LateMinutes:this.lateDuration,LocationType:null!=this.locationType?h.EM.toJSON(this.locationType):null,Name:this.name,RouteName:this.routeName,Sequence:this.sequence,ServiceCosts:null!=this.serviceCosts?JSON.stringify((0,m.nA)(this.serviceCosts)):null,ServiceMeters:this.serviceDistance,ServiceMinutes:this.serviceDuration,Status:null!=this.status?h.$r.toJSON(this.status):null,TimeWindowEnd:null!=this.timeWindowEnd?this.timeWindowEnd.getTime():null,TimeWindowEndUTCOffset:this.timeWindowEndOffset??this.arriveTimeOffset,TimeWindowStart:null!=this.timeWindowStart?this.timeWindowStart.getTime():null,TimeWindowStartUTCOffset:this.timeWindowStartOffset??this.arriveTimeOffset,WaitMinutes:this.waitDuration};return new o.default({geometry:this.geometry,attributes:e,symbol:this.symbol,popupTemplate:this.popupTemplate})}};g.fields=[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"ArrivalCurbApproach",alias:"Arrival Curb Approach",type:"esriFieldTypeInteger"},{name:"ArrivalTime",alias:"Arrival Time",type:"esriFieldTypeDate"},{name:"ArrivalUTCOffset",alias:"Arrival Time",type:"esriFieldTypeInteger"},{name:"CumulativeCosts",alias:"Cumulative Costs",type:"esriFieldTypeString"},{name:"CumulativeMeters",alias:"Cumulative Meters",type:"esriFieldTypeDouble"},{name:"CumulativeMinutes",alias:"Cumulative Minutes",type:"esriFieldTypeDouble"},{name:"CurbApproach",alias:"Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureCurbApproach",alias:"Departure Curb Approach",type:"esriFieldTypeInteger"},{name:"DepartureTime",alias:"Departure Time",type:"esriFieldTypeDate"},{name:"DepartureUTCOffset",alias:"Departure Time",type:"esriFieldTypeInteger"},{name:"LateMinutes",alias:"Minutes Late",type:"esriFieldTypeDouble"},{name:"LocationType",alias:"Location Type",type:"esriFieldTypeInteger"},{name:"Name",alias:"Name",type:"esriFieldTypeString"},{name:"RouteName",alias:"Route Name",type:"esriFieldTypeString"},{name:"Sequence",alias:"Sequence",type:"esriFieldTypeInteger"},{name:"ServiceCosts",alias:"Service Costs",type:"esriFieldTypeString"},{name:"ServiceMeters",alias:"Service Meters",type:"esriFieldTypeDouble"},{name:"ServiceMinutes",alias:"Service Minutes",type:"esriFieldTypeDouble"},{name:"Status",alias:"Status",type:"esriFieldTypeInteger"},{name:"TimeWindowEnd",alias:"Time Window End",type:"esriFieldTypeDate"},{name:"TimeWindowEndUTCOffset",alias:"Time Window End Offset",type:"esriFieldTypeInteger"},{name:"TimeWindowStart",alias:"Time Window Start",type:"esriFieldTypeDate"},{name:"TimeWindowStartUTCOffset",alias:"Time Window Start Offset",type:"esriFieldTypeInteger"},{name:"WaitMinutes",alias:"Minutes Wait",type:"esriFieldTypeDouble"}],(0,n._)([(0,p.MZ)({type:h.JJ.apiValues,json:{read:{source:"attributes.ArrivalCurbApproach",reader:h.JJ.read}}})],g.prototype,"arriveCurbApproach",void 0),(0,n._)([(0,p.MZ)({type:Date,json:{read:{source:"attributes.ArriveTimeUTC"}}})],g.prototype,"arriveTime",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"arriveTimeOffset",void 0),(0,n._)([(0,c.w)("arriveTimeOffset",["attributes.ArriveTime","attributes.ArriveTimeUTC"])],g.prototype,"readArriveTimeOffset",null),(0,n._)([(0,p.MZ)({json:{name:"attributes.Bearing",read:!1,write:!0}})],g.prototype,"bearing",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.BearingTol",read:!1,write:!0}})],g.prototype,"bearingTol",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"cumulativeCosts",void 0),(0,n._)([(0,c.w)("cumulativeCosts",["attributes"])],g.prototype,"readCumulativeCosts",null),(0,n._)([(0,p.MZ)()],g.prototype,"cumulativeDistance",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"cumulativeDuration",void 0),(0,n._)([(0,p.MZ)({type:h.JJ.apiValues,json:{name:"attributes.CurbApproach",read:{reader:h.JJ.read},write:{writer:h.JJ.write}}})],g.prototype,"curbApproach",void 0),(0,n._)([(0,p.MZ)({type:h.JJ.apiValues,json:{read:{source:"attributes.DepartCurbApproach",reader:h.JJ.read}}})],g.prototype,"departCurbApproach",void 0),(0,n._)([(0,p.MZ)({type:Date,json:{read:{source:"attributes.DepartTimeUTC"}}})],g.prototype,"departTime",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"departTimeOffset",void 0),(0,n._)([(0,c.w)("departTimeOffset",["attributes.DepartTime","attributes.DepartTimeUTC"])],g.prototype,"readDepartTimeOffset",null),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.DistanceToNetworkInMeters"}}})],g.prototype,"distanceToNetworkInMeters",void 0),(0,n._)([(0,p.MZ)({type:f.default,json:{write:!0}})],g.prototype,"geometry",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"lateDuration",void 0),(0,n._)([(0,p.MZ)({type:h.EM.apiValues,json:{name:"attributes.LocationType",read:{reader:h.EM.read},write:{writer:h.EM.write}}})],g.prototype,"locationType",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.Name"}})],g.prototype,"name",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.NavLatency",read:!1,write:!0}})],g.prototype,"navLatency",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.ObjectID"}})],g.prototype,"objectId",void 0),(0,n._)([(0,p.MZ)({type:s.A})],g.prototype,"popupTemplate",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.PosAlong"}}})],g.prototype,"posAlong",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.RouteName"}})],g.prototype,"routeName",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"serviceCosts",void 0),(0,n._)([(0,c.w)("serviceCosts",["attributes"])],g.prototype,"readServiceCosts",null),(0,n._)([(0,y.K)("serviceCosts")],g.prototype,"writeServiceCosts",null),(0,n._)([(0,p.MZ)()],g.prototype,"serviceDistance",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"serviceDuration",void 0),(0,n._)([(0,p.MZ)({json:{name:"attributes.Sequence"}})],g.prototype,"sequence",void 0),(0,n._)([(0,p.MZ)({type:h.mt.apiValues,json:{read:{source:"attributes.SideOfEdge",reader:h.mt.read}}})],g.prototype,"sideOfEdge",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SnapX"}}})],g.prototype,"snapX",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SnapY"}}})],g.prototype,"snapY",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SnapZ"}}})],g.prototype,"snapZ",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SourceID"}}})],g.prototype,"sourceId",void 0),(0,n._)([(0,p.MZ)({json:{read:{source:"attributes.SourceOID"}}})],g.prototype,"sourceOid",void 0),(0,n._)([(0,p.MZ)({type:h.$r.apiValues,json:{read:{source:"attributes.Status",reader:h.$r.read}}})],g.prototype,"status",void 0),(0,n._)([(0,p.MZ)({types:l.Es})],g.prototype,"symbol",void 0),(0,n._)([(0,p.MZ)({type:Date,json:{name:"attributes.TimeWindowEnd"}})],g.prototype,"timeWindowEnd",void 0),(0,n._)([(0,y.K)("timeWindowEnd")],g.prototype,"writeTimeWindowEnd",null),(0,n._)([(0,p.MZ)()],g.prototype,"timeWindowEndOffset",void 0),(0,n._)([(0,p.MZ)({type:Date,json:{name:"attributes.TimeWindowStart"}})],g.prototype,"timeWindowStart",void 0),(0,n._)([(0,y.K)("timeWindowStart")],g.prototype,"writeTimeWindowStart",null),(0,n._)([(0,p.MZ)()],g.prototype,"timeWindowStartOffset",void 0),(0,n._)([(0,p.MZ)({readOnly:!0,json:{read:!1}})],g.prototype,"type",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"violations",void 0),(0,n._)([(0,c.w)("violations",["attributes"])],g.prototype,"readViolations",null),(0,n._)([(0,p.MZ)()],g.prototype,"waitDuration",void 0),(0,n._)([(0,p.MZ)()],g.prototype,"wait",void 0),(0,n._)([(0,c.w)("wait",["attributes"])],g.prototype,"readWait",null),g=i=(0,n._)([(0,d.$)("esri.rest.support.Stop")],g);const v=g},11501:function(e,t,r){r.d(t,{A:function(){return y}});var i=r(53804),n=r(75743),o=r(30905),s=r(23502),l=(r(58941),r(40633),r(13798),r(74376)),a=r(47332),u=r(65953),p=r(81392),c=r(66062);let d=class extends((0,n.O)(o.oY)){constructor(e){super(e),this.attributeParameterValues=null,this.description=null,this.distanceAttributeName=null,this.id=null,this.impedanceAttributeName=null,this.name=null,this.restrictionAttributeNames=null,this.simplificationTolerance=null,this.simplificationToleranceUnits=null,this.timeAttributeName=null,this.type=null,this.useHierarchy=null,this.uturnAtJunctions=null}readId(e,t){return t.id??t.itemId??null}readRestrictionAttributes(e,t){const{restrictionAttributeNames:r}=t;return null==r?null:r.map((e=>c.OC.fromJSON(e)))}writeRestrictionAttributes(e,t,r){null!=e&&(t[r]=e.map((e=>c.OC.toJSON(e))))}};(0,i._)([(0,s.MZ)({type:[Object],json:{write:!0}})],d.prototype,"attributeParameterValues",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,l.e)(c.dd,{ignoreUnknown:!1})],d.prototype,"distanceAttributeName",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"id",void 0),(0,i._)([(0,a.w)("id",["id","itemId"])],d.prototype,"readId",null),(0,i._)([(0,l.e)(c.et,{ignoreUnknown:!1})],d.prototype,"impedanceAttributeName",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,s.MZ)({type:[String],json:{write:!0}})],d.prototype,"restrictionAttributeNames",void 0),(0,i._)([(0,a.w)("restrictionAttributeNames")],d.prototype,"readRestrictionAttributes",null),(0,i._)([(0,p.K)("restrictionAttributeNames")],d.prototype,"writeRestrictionAttributes",null),(0,i._)([(0,s.MZ)({type:Number,json:{write:{allowNull:!0}}})],d.prototype,"simplificationTolerance",void 0),(0,i._)([(0,l.e)(c.hY)],d.prototype,"simplificationToleranceUnits",void 0),(0,i._)([(0,l.e)(c.Mm,{ignoreUnknown:!1})],d.prototype,"timeAttributeName",void 0),(0,i._)([(0,l.e)(c.ow)],d.prototype,"type",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],d.prototype,"useHierarchy",void 0),(0,i._)([(0,l.e)(c.hE)],d.prototype,"uturnAtJunctions",void 0),d=(0,i._)([(0,u.$)("esri.rest.support.TravelMode")],d);const y=d},85982:function(e,t,r){r.d(t,{g:function(){return s},r:function(){return l}});var i=r(30698),n=r(9035),o=r(96245);const s={key:"type",base:n.A,typeMap:{algorithmic:i.A,multipart:o.A}};function l(e){return e?.type?"algorithmic"===e.type?i.A.fromJSON(e):"multipart"===e.type?o.A.fromJSON(e):null:null}},66062:function(e,t,r){r.d(t,{$n:function(){return w},$r:function(){return f},EM:function(){return y},Ec:function(){return x},JJ:function(){return d},Mm:function(){return M},OC:function(){return T},Sr:function(){return u},Vj:function(){return I},WU:function(){return C},Z7:function(){return s},_6:function(){return v},aJ:function(){return a},dd:function(){return S},dn:function(){return l},et:function(){return _},fe:function(){return g},gD:function(){return b},hE:function(){return p},hY:function(){return o},iM:function(){return h},mt:function(){return m},ow:function(){return c},vS:function(){return A}});var i=r(73037);const n={esriCentimeters:"centimeters",esriDecimalDegrees:"decimal-degrees",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriPoints:"points",esriUnknownUnits:"unknown",esriYards:"yards"},o=(0,i.O)()(n),s=((0,i.O)()({...n,esriIntFeet:"international-feet",esriIntInches:"international-inches",esriIntMiles:"international-miles",esriIntNauticalMiles:"international-nautical-miles",esriIntYards:"international-yards"}),(0,i.O)()({esriAcres:"international-acres",esriAcresUS:"us-acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-international-feet",esriSquareFeetUS:"square-us-feet",esriSquareInches:"square-international-inches",esriSquareInchesUS:"square-us-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-international-miles",esriSquareMilesUS:"square-us-miles",esriSquareMillimeters:"square-millimeters",esriSquareYards:"square-international-yards",esriSquareYardsUS:"square-us-yards",esriUnknownAreaUnits:"unknown"}),(0,i.O)()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards"})),l=((0,i.O)()({esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds"}),(0,i.O)()({esriNAUCentimeters:"centimeters",esriNAUDecimalDegrees:"decimal-degrees",esriNAUDecimeters:"decimeters",esriNAUFeet:"feet",esriNAUInches:"inches",esriNAUKilometers:"kilometers",esriNAUMeters:"meters",esriNAUMiles:"miles",esriNAUMillimeters:"millimeters",esriNAUNauticalMiles:"nautical-miles",esriNAUPoints:"points",esriNAUYards:"yards",esriNAUDays:"days",esriNAUHours:"hours",esriNAUMinutes:"minutes",esriNAUSeconds:"seconds",esriNAUKilometersPerHour:"kilometers-per-hour",esriNAUMilesPerHour:"miles-per-hour",esriNAUUnknown:"unknown"})),a=(0,i.O)()({esriDOTComplete:"complete",esriDOTCompleteNoEvents:"complete-no-events",esriDOTFeatureSets:"featuresets",esriDOTInstructionsOnly:"instructions-only",esriDOTStandard:"standard",esriDOTSummaryOnly:"summary-only"}),u=(0,i.O)()({esriNAOutputLineNone:"none",esriNAOutputLineStraight:"straight",esriNAOutputLineTrueShape:"true-shape",esriNAOutputLineTrueShapeWithMeasure:"true-shape-with-measure"}),p=((0,i.O)()({esriNAOutputPolygonNone:"none",esriNAOutputPolygonSimplified:"simplified",esriNAOutputPolygonDetailed:"detailed"}),(0,i.O)()({esriNFSBAllowBacktrack:"allow-backtrack",esriNFSBAtDeadEndsOnly:"at-dead-ends-only",esriNFSBNoBacktrack:"no-backtrack",esriNFSBAtDeadEndsAndIntersections:"at-dead-ends-and-intersections"})),c=((0,i.O)()({esriNATravelDirectionFromFacility:"from-facility",esriNATravelDirectionToFacility:"to-facility"}),(0,i.O)()({esriNATimeOfDayNotUsed:"not-used",esriNATimeOfDayUseAsStartTime:"start",esriNATimeOfDayUseAsEndTime:"end"}),(0,i.O)()({AUTOMOBILE:"automobile",TRUCK:"truck",WALK:"walk",OTHER:"other"})),d=(0,i.O)()({0:"either-side-of-vehicle",1:"right-side-of-vehicle",2:"left-side-of-vehicle",3:"no-u-turn"},{useNumericKeys:!0}),y=(0,i.O)()({0:"stop",1:"waypoint",2:"break"},{useNumericKeys:!0}),f=(0,i.O)()({0:"ok",1:"not-located",2:"network-element-not-located",3:"element-not-traversable",4:"invalid-field-values",5:"not-reached",6:"time-window-violation",7:"not-located-on-closest"},{useNumericKeys:!0}),m=(0,i.O)()({1:"right",2:"left"},{useNumericKeys:!0}),h=(0,i.O)()({0:"restriction",1:"scaled-cost",2:"added-cost"},{useNumericKeys:!0}),g=(0,i.O)()({0:"permit",1:"restrict"},{useNumericKeys:!0}),v=(0,i.O)()({1:"header",50:"arrive",51:"depart",52:"straight",100:"on-ferry",101:"off-ferry",102:"central-fork",103:"roundabout",104:"u-turn",150:"door",151:"stairs",152:"elevator",153:"escalator",154:"pedestrian-ramp",200:"left-fork",201:"left-ramp",202:"clockwise-roundabout",203:"left-handed-u-turn",204:"bear-left",205:"left-turn",206:"sharp-left",207:"left-turn-and-immediate-left-turn",208:"left-turn-and-immediate-right-turn",300:"right-fork",301:"right-ramp",302:"counter-clockwise-roundabout",303:"right-handed-u-turn",304:"bear-right",305:"right-turn",306:"sharp-right",307:"right-turn-and-immediate-left-turn",308:"right-turn-and-immediate-right-turn",400:"up-elevator",401:"up-escalator",402:"up-stairs",500:"down-elevator",501:"down-escalator",502:"down-stairs",1e3:"general-event",1001:"landmark",1002:"time-zone-change",1003:"traffic-event",1004:"scaled-cost-barrier-event",1005:"boundary-crossing",1006:"restriction-violation",1007:"lane"},{useNumericKeys:!0}),b=(0,i.O)()({0:"unknown",1:"segment",2:"maneuver-segment",3:"restriction-violation",4:"scaled-cost-barrier",5:"heavy-traffic",6:"slow-traffic",7:"moderate-traffic"},{useNumericKeys:!0}),w=(0,i.O)()({"NA Campus":"campus","NA Desktop":"desktop","NA Navigation":"navigation"}),S=(0,i.O)()({Kilometers:"kilometers",Miles:"miles",Meters:"meters"},{ignoreUnknown:!1}),M=(0,i.O)()({Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),_=(0,i.O)()({Kilometers:"kilometers",Miles:"miles",Meters:"meters",Minutes:"minutes",TimeAt1KPH:"time-at-1-kph",TravelTime:"travel-time",TruckMinutes:"truck-minutes",TruckTravelTime:"truck-travel-time",WalkTime:"walk-time"},{ignoreUnknown:!1}),T=(0,i.O)()({"Any Hazmat Prohibited":"any-hazmat-prohibited","Avoid Carpool Roads":"avoid-carpool-roads","Avoid Express Lanes":"avoid-express-lanes","Avoid Ferries":"avoid-ferries","Avoid Gates":"avoid-gates","Avoid Limited Access Roads":"avoid-limited-access-roads","Avoid Private Roads":"avoid-private-roads","Avoid Roads Unsuitable for Pedestrians":"avoid-roads-unsuitable-for-pedestrians","Avoid Stairways":"avoid-stairways","Avoid Toll Roads":"avoid-toll-roads","Avoid Toll Roads for Trucks":"avoid-toll-roads-for-trucks","Avoid Truck Restricted Roads":"avoid-truck-restricted-roads","Avoid Unpaved Roads":"avoid-unpaved-roads","Axle Count Restriction":"axle-count-restriction","Driving a Bus":"driving-a-bus","Driving a Taxi":"driving-a-taxi","Driving a Truck":"driving-a-truck","Driving an Automobile":"driving-an-automobile","Driving an Emergency Vehicle":"driving-an-emergency-vehicle","Height Restriction":"height-restriction","Kingpin to Rear Axle Length Restriction":"kingpin-to-rear-axle-length-restriction","Length Restriction":"length-restriction","Preferred for Pedestrians":"preferred-for-pedestrians","Riding a Motorcycle":"riding-a-motorcycle","Roads Under Construction Prohibited":"roads-under-construction-prohibited","Semi or Tractor with One or More Trailers Prohibited":"semi-or-tractor-with-one-or-more-trailers-prohibited","Single Axle Vehicles Prohibited":"single-axle-vehicles-prohibited","Tandem Axle Vehicles Prohibited":"tandem-axle-vehicles-prohibited","Through Traffic Prohibited":"through-traffic-prohibited","Truck with Trailers Restriction":"truck-with-trailers-restriction","Use Preferred Hazmat Routes":"use-preferred-hazmat-routes","Use Preferred Truck Routes":"use-preferred-truck-routes",Walking:"walking","Weight Restriction":"weight-restriction"},{ignoreUnknown:!1}),A=(0,i.O)()({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),I=(0,i.O)()({esriGeometryPoint:"point",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"envelope",esriGeometryMultipoint:"multipoint"}),C=(0,i.O)()({esriNAUTCost:"cost",esriNAUTDescriptor:"descriptor",esriNAUTRestriction:"restriction",esriNAUTHierarchy:"hierarchy"}),x=(0,i.O)()({esriDSTAltName:"alt-name",esriDSTArrive:"arrive",esriDSTBranch:"branch",esriDSTCrossStreet:"cross-street",esriDSTCumulativeLength:"cumulative-length",esriDSTDepart:"depart",esriDSTEstimatedArrivalTime:"estimated-arrival-time",esriDSTExit:"exit",esriDSTGeneral:"general",esriDSTLength:"length",esriDSTServiceTime:"service-time",esriDSTStreetName:"street-name",esriDSTSummary:"summary",esriDSTTime:"time",esriDSTTimeWindow:"time-window",esriDSTToward:"toward",esriDSTViolationTime:"violation-time",esriDSTWaitTime:"wait-time"})},39397:function(e,t,r){r.d(t,{Dl:function(){return s},jV:function(){return o},lF:function(){return l}}),r(25591),r(7156);var i=r(21609),n=r(90683);function o(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function s(e){return"string"==typeof e?(0,n.An)(e):(0,i.o8)(e)}function l(e,t,r){const i={};for(const n in e){if("declaredClass"===n)continue;const o=e[n];if(null!=o&&"function"!=typeof o)if(Array.isArray(o))i[n]=o.map((e=>l(e)));else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(r?.[n]);i[n]=t?e:JSON.stringify(e)}else i[n]=t?o:JSON.stringify(o);else i[n]=o}return i}r(48893)},67895:function(e,t,r){r.d(t,{$:function(){return p}});var i=r(52874),n=r(75505),o=r(21609),s=r(54547),l=r(7590),a=r(16088);const u=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:n}=e;return[t,r,i,255*n]};class p{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let i=!1;for(const t of r)if(t.primitiveName===e.primitiveName){i=!0;break}if(!i)for(const i of t)i.primitiveName===e.primitiveName&&r.push(i)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const i of e.effects)p.findApplicableOverrides(i,t,r);if(e.symbolLayers)for(const i of e.symbolLayers)p.findApplicableOverrides(i,t,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const i of e.effects)p.findApplicableOverrides(i,t,r);if(e.markerPlacement&&p.findApplicableOverrides(e.markerPlacement,t,r),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const i of e.markerGraphics)p.findApplicableOverrides(i,t,r),p.findApplicableOverrides(i.symbol,t,r)}else"CIMCharacterMarker"===e.type?p.findApplicableOverrides(e.symbol,t,r):"CIMHatchFill"===e.type?p.findApplicableOverrides(e.lineSymbol,t,r):"CIMPictureMarker"===e.type&&p.findApplicableOverrides(e.animatedSymbolProperties,t,r)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,l.FH)(e),!t||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=(0,l.rB)(e),i=e.primitiveName,n=[];for(const e of t)e.primitiveName===i&&n.push((0,l.rB)(e));return{type:"cim-effect-param",effect:r,overrides:(0,l.pk)(n)}}static async resolveSymbolOverrides(e,t,r,i,n,s,a){if(!e?.symbol)return null;let{symbol:u,primitiveOverrides:c}=e;const d=!!c;if(!d&&!i)return u;u=(0,o.o8)(u),c=(0,o.o8)(c);let y=!0;if(t||(t={attributes:{}},y=!1),d){if(y||(c=c.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),a||(c=c.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),c.length>0){const e={spatialReference:r,fields:(0,l.O2)(t.attributes),geometryType:n};await p.createRenderExpressions(c,e),p.evaluateOverrides(c,t,n??"esriGeometryPoint",s,a)}p.applyOverrides(u,c)}return i&&p.applyDictionaryTextOverrides(u,t,i,null),u}static async createRenderExpressions(e,t){const r=[];for(const i of e){const e=i.valueExpressionInfo;if(!e||p._expressionToRenderExpression.has(e.expression))continue;const n=(0,s.Ad)(e.expression,t.spatialReference,t.fields);r.push(n),n.then((t=>p._expressionToRenderExpression.set(e.expression,t)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,t,r,i,o){const s={$view:{scale:o?.scale}};for(const o of e){o.value&&"object"==typeof o.value&&(0,n.IB)(o.value)&&("Color"===o.propertyName||"StrokeColor"===o.propertyName)&&(o.value=u(o.value));const e=o.valueExpressionInfo;if(!e)continue;const l=p._expressionToRenderExpression.get(e.expression);l&&(o.value=(0,a.A)(l,t,s,r,i))}}static applyDictionaryTextOverrides(e,t,r,i,n="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const s of o)s&&"CIMVectorMarker"===s.type&&p.applyDictionaryTextOverrides(s,t,r,i,"CIMTextSymbol"===e.type?e.textCase:n)}break;case"CIMVectorMarker":{const n=e.markerGraphics;if(!n)return;for(const e of n)e&&p.applyDictionaryTextOverrides(e,t,r,i)}break;case"CIMMarkerGraphic":{const o=e.textString;if(o&&o.includes("[")){const s=(0,l.gQ)(o,r);e.textString=(0,l.FM)(t,s,i,n)}}}}static applyOverrides(e,t,r,i){if(e.primitiveName)for(const n of t)if(n.primitiveName===e.primitiveName){const t=(0,l.YF)(n.propertyName);if(i&&i.push({cim:e,nocapPropertyName:t,value:e[t]}),r){let t=!1;for(const i of r)i.primitiveName===e.primitiveName&&(t=!0);t||r.push(n)}null!=n.value&&(e[t]=n.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)p.applyOverrides(n,t,r,i);if(e.symbolLayers)for(const n of e.symbolLayers)p.applyOverrides(n,t,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const n of e.effects)p.applyOverrides(n,t,r,i);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const n of e.markerGraphics)p.applyOverrides(n,t,r,i),p.applyOverrides(n.symbol,t,r,i)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map((e=>Number(e)));if("Color"===e){const e=new i.A(t).toRgba();return e[3]*=255,e}return t}}p._expressionToRenderExpression=new Map},38821:function(e,t,r){r.d(t,{D:function(){return o},K:function(){return n}});var i=r(33389);const n={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:i.fu.Loop,repeatdelay:0,easing:i.Hz.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}}},33389:function(e,t,r){var i,n,o,s,l,a,u,p,c,d,y,f,m,h,g,v,b,w,S,M,_,T,A,I,C,x,O,N,Z,D,V,j,F,E,L,R,k,P,z,B,U,q,J,G,$,W,H,Y,K,X,Q,ee,te,re,ie,ne,oe,se,le,ae,ue,pe;r.d(t,{$2:function(){return l},C1:function(){return o},Hz:function(){return f},JO:function(){return n},M1:function(){return A},O$:function(){return se},Q1:function(){return H},TZ:function(){return b},WE:function(){return Z},Y:function(){return u},YI:function(){return K},bj:function(){return p},e_:function(){return W},f0:function(){return oe},fu:function(){return y},g7:function(){return c},ip:function(){return Y},mU:function(){return D},oF:function(){return _},uQ:function(){return T},uT:function(){return k},vG:function(){return ae},wd:function(){return U},xR:function(){return i},xn:function(){return w},xw:function(){return x},yS:function(){return P}}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(o||(o={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(l||(l={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(a||(a={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(u||(u={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(p||(p={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(c||(c={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(y||(y={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(f||(f={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(m||(m={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(h||(h={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(v||(v={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(b||(b={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(w||(w={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(S||(S={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(M||(M={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(_||(_={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(T||(T={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(A||(A={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(I||(I={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(C||(C={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(x||(x={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(O||(O={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(N||(N={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(Z||(Z={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(D||(D={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(V||(V={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(j||(j={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(F||(F={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(E||(E={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(L||(L={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(R||(R={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(k||(k={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(P||(P={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(z||(z={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(B||(B={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(U||(U={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(q||(q={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(J||(J={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(G||(G={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}($||($={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(W||(W={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(H||(H={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(Y||(Y={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(K||(K={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(X||(X={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(Q||(Q={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(ee||(ee={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(te||(te={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(re||(re={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ie||(ie={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ne||(ne={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(oe||(oe={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(se||(se={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(le||(le={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(ae||(ae={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ue||(ue={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(pe||(pe={}))},7590:function(e,t,r){r.d(t,{$w:function(){return g},Bu:function(){return N},DW:function(){return I},FH:function(){return P},FM:function(){return u},G9:function(){return o},GV:function(){return b},Go:function(){return p},K3:function(){return k},Kn:function(){return T},MM:function(){return y},MO:function(){return U},Nl:function(){return Z},Ny:function(){return w},O2:function(){return D},UE:function(){return V},YC:function(){return B},YF:function(){return F},ZO:function(){return L},_1:function(){return x},_H:function(){return M},_W:function(){return v},_d:function(){return A},bs:function(){return z},dI:function(){return H},e6:function(){return c},gQ:function(){return a},iA:function(){return R},jn:function(){return m},lW:function(){return d},mA:function(){return f},n5:function(){return j},pM:function(){return C},pV:function(){return _},pk:function(){return q},rB:function(){return J},s4:function(){return n},xo:function(){return O},yH:function(){return S},zb:function(){return E},zr:function(){return h}});var i=r(38821);function n(e,t,r,i){return function(e){return"function"==typeof e}(e)?e(t,r,i):e}function o(e){return[e.r,e.g,e.b,e.a]}const s=" /-,\n";function l(e){let t=e.length;for(;t--;)if(!s.includes(e.charAt(t)))return!1;return!0}function a(e,t){const r=[];let i=0,n=-1;do{if(n=e.indexOf("[",i),n>=i){if(n>i){const t=e.slice(i,n);r.push([t,null,l(t)])}if(i=n+1,n=e.indexOf("]",i),n>=i){if(n>i){const o=t[e.slice(i,n)];o&&r.push([null,o,!1])}i=n+1}}}while(-1!==n);if(i<e.length){const t=e.slice(i);r.push([t,null,l(t)])}return r}function u(e,t,r,i){let n="",o=null;for(const i of t){const[t,s,l]=i;if(t)l?o=t:(o&&(n+=o,o=null),n+=t);else{let t=s;null!=r&&(t=U(s,r));const i=e.attributes[t];i&&(o&&(n+=o,o=null),n+=i)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(n,i)}function p(e,t,r,i,n,o,s=!0){const l=t/n,a=r/o,u=Math.ceil(l/2),p=Math.ceil(a/2);for(let r=0;r<o;r++)for(let c=0;c<n;c++){const d=4*(c+(s?o-r-1:r)*n);let y=0,f=0,m=0,h=0,g=0,v=0,b=0;const w=(r+.5)*a;for(let i=Math.floor(r*a);i<(r+1)*a;i++){const r=Math.abs(w-(i+.5))/p,n=(c+.5)*l,o=r*r;for(let r=Math.floor(c*l);r<(c+1)*l;r++){let s=Math.abs(n-(r+.5))/u;const l=Math.sqrt(o+s*s);l>=-1&&l<=1&&(y=2*l*l*l-3*l*l+1,y>0&&(s=4*(r+i*t),b+=y*e[s+3],m+=y,e[s+3]<255&&(y=y*e[s+3]/250),h+=y*e[s],g+=y*e[s+1],v+=y*e[s+2],f+=y))}}i[d]=h/f,i[d+1]=g/f,i[d+2]=v/f,i[d+3]=b/m}}function c(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function d(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function m(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function h(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=(e,t=0)=>null==e||isNaN(e)?t:e,v=(e,t)=>null!=e?e:t,b=(e,t)=>e??t,w=e=>e.tintColor?c(e.tintColor):[255,255,255,1],S=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function M(){return r.e(4696).then(r.bind(r,28356))}function _(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function T(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function A(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function I(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function C(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=C(t);if(null!=e)return e}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidFill":return e.color}return null}function x(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=x(e);if(null!=t)return t}break}case"CIMTextSymbol":return x(e.symbol);case"CIMSolidStroke":return e.color}}function O(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=O(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return O(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function N(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Z(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function D(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const V=e=>e.includes("data:image/svg+xml");function j(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function F(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function E(e,t,r,i,n,o,s=!0){const{infos:l}=o;let a=1,u=0,p=0,c=0,d=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:i,size:n,frameHeight:o,rotateClockWise:y,scaleSymbolsProportionally:f}of l)d=e?1:a,p=$(t,r,u,d,p),c=G(t,r,u,d,c),o&&(f||s)&&(a*=n/o),u=W(i,y,u);const y=$(i,n,u,d,p),f=G(i,n,u,d,c);return{size:e*a,rotation:W(t,r,u),offsetX:y,offsetY:f}}function L(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>L(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function R(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...i.K[t]];const r=i.D[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function k(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function P(e){return e?.dashTemplate&&(e.dashTemplate=k(e.dashTemplate)),e}function z(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return z(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return z(e.symbol)}}return"Normal"}function B(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=r.size??i.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&h(r.markerPlacement)){const e=r.size??i.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=r.height;null!=e&&e>t&&(t=e)}}return t}}}function U(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function q(e){return e.map((e=>({...e,propertyName:F(e.propertyName)})))}function J(e){const t={};for(const r in e){const i=e[r];t[F(r)]=i}return t}function G(e,t,r,i,n){const o=r*Math.PI/180;if(o){const r=Math.cos(o);return(Math.sin(o)*e+r*t)*i+n}return t*i+n}function $(e,t,r,i,n){const o=r*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*i+n:e*i+n}function W(e,t,r){return t?r-e:r+e}function H(e,t,r){const i="Color"===r||"TintColor"===r||"ToColor"===r,n="Rotation"===r||"Angle"===r||"ToRotation"===r;let o=t[F(r)];if(null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180)),null==o&&(o=R(t.type,r.toLowerCase()),null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:n&&(o*=Math.PI/180))),null!=t.primitiveName){const s=e[t.primitiveName];if(null!=s){const e=s[r];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(o=e,null!=o&&(i?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:n&&(o*=Math.PI/180))):(o={valueExpressionInfo:e,defaultValue:o},null!=o&&(i?o={type:"Process",op:"ArcadeColor",value:o}:n&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(null==o)throw new Error(`Failed to derive a value or an expression for "${r}".`);return o}},74661:function(e,t,r){r.d(t,{A7:function(){return u},Cx:function(){return p},Hk:function(){return c},JJ:function(){return m},SF:function(){return d},UK:function(){return a},jM:function(){return y},x3:function(){return f}}),r(58941);var i=r(8740),n=r(22198),o=r(90363),s=r(90972),l=r(6259);const a=o.A.fromJSON(l.Cb),u=n.A.fromJSON(l.yM),p=i.A.fromJSON(l.WR),c=s.A.fromJSON(l.JZ);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return a;case"polyline":return u;case"polygon":case"extent":return p}return null}const y=o.A.fromJSON(l.nC),f=n.A.fromJSON(l.HW),m=i.A.fromJSON(l.b6)},40990:function(e,t,r){r.d(t,{af:function(){return w},al:function(){return b},dX:function(){return S}});var i=r(52874),n=(r(10748),r(78879)),o=(r(58941),r(13520)),s=r(22762),l=r(56150),a=r(97025),u=r(78018),p=r(15186),c=r(10052),d=r(74661),y=r(6259),f=r(77529);const m=u.A.fromSimpleMarkerSymbol(d.UK),h=l.A.fromSimpleLineSymbol(d.A7),g=p.A.fromSimpleFillSymbol(d.Cx),v=new a.A({symbolLayers:new n.A([new s.A({material:{color:y.fT},edges:new c.A({size:(0,o.PN)(1),color:new i.A(y.JR)})})])}),b=new l.A({symbolLayers:new n.A([new f.A({material:{color:new i.A([0,0,0])},size:(0,o.PN)(1)})])}),w=new p.A({symbolLayers:new n.A([new s.A({outline:{color:new i.A([0,0,0]),size:(0,o.PN)(1)}})])});function S(e){if(null==e)return null;switch(e.type){case"mesh":return v;case"point":case"multipoint":return m;case"polyline":return h;case"polygon":case"extent":return g}return null}},6259:function(e,t,r){r.d(t,{Cb:function(){return o},HW:function(){return p},JR:function(){return n},JZ:function(){return a},WR:function(){return l},b6:function(){return c},fT:function(){return i},nC:function(){return u},yM:function(){return s}});const i=[252,146,31,255],n=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},l={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},a={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},p={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},c={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},8404:function(e,t,r){r.d(t,{M9:function(){return u},oO:function(){return p},rS:function(){return y}});var i=r(10748),n=r(39819),o=r(11432),s=r(97992),l=r(11299),a=r(36e3);function u(e,t,r,i){const n=d(e,{},{context:i,isLabelSymbol:!1});null!=n&&(t[r]=n)}function p(e,t,r,i){const n=d(e,{},{context:i,isLabelSymbol:!0});null!=n&&(t[r]=n)}function c(e){return e instanceof s.A||e instanceof a.A}function d(e,t,r){if(null==e)return null;const{context:i,isLabelSymbol:a}=r,u=i?.origin,p=i?.messages;if("web-scene"===u&&!c(e)){const r=(0,l.t)(e,{retainCIM:!0,hasLabelingContext:a});return null!=r.symbol?r.symbol.write(t,i):(p?.push(new n.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:r.error})),null)}return(0,o.TU)(i?.layer)&&function(e){return e instanceof s.A&&("polygon-3d"===e.type||"line-3d"===e.type)}(e)?(p?.push(new n.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${i?.layer?.declaredClass}'.`,{symbol:e,context:i})),null):("web-map"===u||"portal-item"===u&&!(0,o.TU)(i?.layer))&&c(e)?(p?.push(new n.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function y(e,t){return(0,i.Bu)(e,null,t)}},58916:function(e,t,r){r.d(t,{jg:function(){return g},cF:function(){return c},bo:function(){return d},yA:function(){return f},o5:function(){return y}});var i=r(93040),n=r(39819),o=r(58941),s=r(60539),l=r(90683),a=r(51432),u=r(26544);const p=new Map;function c(e,t,r){return null!=e?.styleUrl?async function(e,t){try{return{data:(await f(e,t)).data,baseUrl:(0,l.nM)(e),styleUrl:e}}catch(e){return(0,s.QP)(e),null}}(e.styleUrl,r):null!=e?.styleName?function(e,t,r){const i=null!=t.portal?t.portal:a.A.getDefault();let o;const s=`${i.url} - ${i.user?.username} - ${e}`,l=p.get(s);if(l)return l;const c=function(e,t,r){return t.load(r).then((()=>{const i=new u.A({disableExtraQuery:!0,query:`owner:${m} AND type:${h} AND typekeywords:"${e}"`});return t.queryItems(i,r)})).then((({results:t})=>{let i=null;const o=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const t=e.typeKeywords?.some((e=>e.toLowerCase()===o));if(t&&e.type===h&&e.owner===m){i=e;break}}if(!i)throw new n.A("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return i.load(r)}))}(e,i,r).then((e=>(o=e,e.fetchData()))).then((t=>({data:t,baseUrl:o.itemUrl??"",styleName:e})));return p.set(s,c),c}(e.styleName,t,r):Promise.reject(new n.A("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function d(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function y(e,t,r=["gltf"]){if("cimRef"===t)return encodeURI(e.cimRef);if(e.formatInfos&&!(0,o.A)("enable-feature:force-wosr"))for(const t of r){const r=e.formatInfos.find((e=>e.type===t));if(r)return r.href}return encodeURI(e.webRef)}function f(e,t){const r={responseType:"json",query:{f:"json"},...t};return(0,i.A)((0,l.S8)(e),r)}const m="esri_en",h="Style",g="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},11299:function(e,t,r){r.d(t,{c:function(){return v},t:function(){return b}});var i=r(10748),n=r(39819),o=r(40990),s=r(36e3),l=r(78018),a=r(22198),u=r(56150),p=r(90363),c=r(24411),d=r(8740),y=r(97025),f=r(15186),m=r(90972),h=r(56922);const g="#useCIMFallbackSymbology()",v={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function b(e,t=v){if(!e)return{symbol:null};const{retainId:r=v.retainId,ignoreDrivers:b=v.ignoreDrivers,hasLabelingContext:w=v.hasLabelingContext,retainCIM:S=v.retainCIM,cimFallbackEnabled:M=v.cimFallbackEnabled}=t;let _=null;if((0,i.wk)(e)||e instanceof s.A)_=e.clone();else if("cim"===e.type){const r=e.data?.symbol?.type;switch(r){case"CIMPointSymbol":_=S?e.clone():l.A.fromCIMSymbol(e);break;case"CIMLineSymbol":M&&(_=o.al.clone(),t?.logWarning?.(g,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":M&&(_=o.af.clone(),t?.logWarning?.(g,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!_)return{error:new n.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${r||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof a.A)_=u.A.fromSimpleLineSymbol(e);else if(e instanceof p.A)_=l.A.fromSimpleMarkerSymbol(e);else if(e instanceof c.A)_=l.A.fromPictureMarkerSymbol(e);else if(e instanceof d.A)_=t.geometryType&&"mesh"===t.geometryType?y.A.fromSimpleFillSymbol(e):f.A.fromSimpleFillSymbol(e);else{if(!(e instanceof m.A))return{error:new n.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};_=w?h.A.fromTextSymbol(e):l.A.fromTextSymbol(e)}return r&&_&&"cim"!==_.type&&(_.id=e.id),b&&(0,i.wk)(_)&&_.symbolLayers.forEach((e=>e.ignoreDrivers=!0)),{symbol:_}}},92777:function(e,t,r){r.d(t,{A:function(){return V}});var i=r(53804),n=r(30905),o=r(21609),s=r(23502),l=r(77560),a=r(47332),u=r(65953),p=r(81392);let c=class extends n.oY{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"description",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,i._)([(0,s.MZ)()],c.prototype,"type",void 0),c=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableElement")],c);const d=c;var y,f=r(67888);r(58941),r(40633),r(13798);let m=y=class extends d{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new y({description:this.description,displayType:this.displayType,label:this.label})}};(0,i._)([(0,s.MZ)({type:["auto"],json:{write:!0}})],m.prototype,"displayType",void 0),(0,i._)([(0,s.MZ)({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=y=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableAttachmentElement")],m);const h=m;var g;let v=g=class extends d{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new g({description:this.description,fieldName:this.fieldName,label:this.label})}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],v.prototype,"fieldName",void 0),(0,i._)([(0,s.MZ)({type:String,json:{read:!1,write:!0}})],v.prototype,"type",void 0),v=g=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableFieldElement")],v);const b=v;var w;let S=w=class extends d{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new w({description:this.description,label:this.label,relationshipId:this.relationshipId})}};(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],S.prototype,"relationshipId",void 0),(0,i._)([(0,s.MZ)({type:["relationship"],json:{read:!1,write:!0}})],S.prototype,"type",void 0),S=w=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableRelationshipElement")],S);const M=S;function _(e){return{typesWithGroup:{base:d,key:"type",typeMap:{attachment:h,field:b,group:e,relationship:M}},typesWithoutGroup:{base:d,key:"type",typeMap:{attachment:h,field:b,relationship:M}}}}function T(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>i[e.type])).map((e=>i[e.type].fromJSON(e)))}function A(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>i[e.type])).map((e=>e.toJSON()))}function I(e,t,r=!0){return e?e.map((e=>(0,f.aq)(r?t.typesWithGroup:t.typesWithoutGroup,e))):null}var C;let x=C=class extends d{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return I(e,O,!1)}readElements(e,t){return T(t.attributeTableElements,O,!1)}writeElements(e,t){t.attributeTableElements=A(e,O,!1)}clone(){return new C({description:this.description,elements:(0,o.o8)(this.elements),label:this.label})}};(0,i._)([(0,s.MZ)({json:{write:!0}})],x.prototype,"elements",void 0),(0,i._)([(0,l.w)("elements")],x.prototype,"castElements",null),(0,i._)([(0,a.w)("elements",["attributeTableElements"])],x.prototype,"readElements",null),(0,i._)([(0,p.K)("elements")],x.prototype,"writeElements",null),(0,i._)([(0,s.MZ)({type:String,json:{read:!1,write:!0}})],x.prototype,"type",void 0),x=C=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableGroupElement")],x);const O=_(x);var N;const Z=_(x);let D=N=class extends n.oY{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return I(e,Z)}readElements(e,t){return T(t.attributeTableElements,Z)}writeElements(e,t){t.attributeTableElements=A(e,Z)}clone(){return new N({elements:(0,o.o8)(this.elements),orderByFields:this.orderByFields})}};(0,i._)([(0,s.MZ)({json:{write:!0}})],D.prototype,"elements",void 0),(0,i._)([(0,l.w)("elements")],D.prototype,"castElements",null),(0,i._)([(0,a.w)("elements",["attributeTableElements"])],D.prototype,"readElements",null),(0,i._)([(0,p.K)("elements")],D.prototype,"writeElements",null),(0,i._)([(0,s.MZ)({type:[Object],json:{write:!0}})],D.prototype,"orderByFields",void 0),D=N=(0,i._)([(0,u.$)("esri.tables.AttributeTableTemplate")],D);const V=D},16088:function(e,t,r){r.d(t,{A:function(){return s}});var i=r(39819),n=r(40633),o=r(87280);function s(e,t,r,i,o){if(null==e)return null;const s=e.referencesGeometry()&&o?a(t,i,o):t,l=e.repurposeFeature(s);try{return e.evaluate({...r,$feature:l},e.services)}catch(e){return n.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",e),null}}const l=new Map;function a(e,t,r){const{transform:s,hasZ:a,hasM:u}=r;l.has(t)||l.set(t,function(e){const t={};switch(e){case"esriGeometryPoint":return(e,r,i,n)=>(0,o.Tr)(r,t,e,i,n);case"esriGeometryPolygon":return(e,r,i,n)=>(0,o.$X)(r,t,e,i,n);case"esriGeometryPolyline":return(e,r,i,n)=>(0,o.P5)(r,t,e,i,n);case"esriGeometryMultipoint":return(e,r,i,n)=>(0,o.SW)(r,t,e,i,n);default:return n.A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.A("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}(t));const p=l.get(t)(e.geometry,s,a,u);return{...e,geometry:p}}}}]);
//# sourceMappingURL=RouteLayer.js.map