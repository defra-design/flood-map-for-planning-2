"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[4401],{69296:function(t,e,r){var i;r.d(e,{u:function(){return i}}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(i||(i={}))},99680:function(t,e,r){r.d(e,{q:function(){return n}});var i=r(85408);class n{constructor(t,e){this._storage=new i.F,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),e&&this._storage.registerRemoveFunc("",e)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,r=1){this._storage.put(this,t,e,r,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}},85408:function(t,e,r){r.d(e,{F:function(){return l},Ti:function(){return n}});var i=r(7187);const n=-3,s=n-1;var o,a;(a=o||(o={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class l{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new i.A,this._users=new i.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){const r=this._db.get(t.id+e);return r?.size??0}put(t,e,r,i,a){e=t.id+e;const l=this._db.get(e);if(l&&(this._size-=l.size,t.size-=l.size,this._db.delete(e),l.entry!==r&&this._notifyRemove(e,l.entry,l.size,o.ALL)),i>this._maxSize)return void this._notifyRemove(e,r,i,o.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return console.warn(`Refusing to cache entry with size ${i} for key ${e}`),void this._notifyRemove(e,r,0,o.ALL);const c=1+Math.max(a,s)-n;this._db.set(e,new u(r,i,c)),this._size+=i,t.size+=i,this._checkSize()}updateSize(t,e,r,i){e=t.id+e;const n=this._db.get(e);if(n&&n.entry===r){for(this._size-=n.size,t.size-=n.size;i>this._maxSize;){const t=this._notifyRemove(e,r,i,o.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);i=t}n.size=i,this._size+=i,t.size+=i,this._checkSize()}}pop(t,e){e=t.id+e;const r=this._db.get(e);if(r)return this._size-=r.size,t.size-=r.size,this._db.delete(e),++this._hit,r.entry;++this._miss}get(t,e){e=t.id+e;const r=this._db.get(e);if(void 0!==r)return this._db.delete(e),r.lives=r.lifetime,this._db.set(e,r),++this._hit,r.entry;++this._miss}peek(t,e){const r=this._db.get(t.id+e);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},r=new Array;this._db.forEach(((t,i)=>{const n=t.lifetime;r[n]=(r[n]||0)+t.size,this._users.forAll((r=>{const{id:n,name:s}=r;if(i.startsWith(n)){const r=e[s]||0;e[s]=r+t.size}}))}));const i={};this._users.forAll((t=>{const r=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const n=e[r]||0;e[r]=n,i[r]=Math.round(100*t.hitRate)+"%"}else i[r]="0%"}));const s=Object.keys(e);s.sort(((t,r)=>e[r]-e[t])),s.forEach((r=>t[r]=Math.round(e[r]/2**20)+"MB / "+i[r]));for(let e=r.length-1;e>=0;--e){const i=r[e];i&&(t["Priority "+(e+n-1)]=Math.round(i/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,r)=>{r.startsWith(e)&&(this._size-=t.size,this._db.delete(r),this._notifyRemove(r,t.entry,t.size,o.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,o.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,r,i){let n;return this._removeFuncs.some((s=>{if(t.startsWith(s[0])){const t=s[1](e,i,r);return"number"==typeof t&&(n=t),!0}return!1})),n}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=t??this;if(e.maxSize<0||e.size<=e.maxSize)return;const r=t?.id;let i=!0;for(;i;){i=!1;for(const[n,s]of this._db)if(0===s.lifetime&&(!r||n.startsWith(r))){if(this._purgeItem(n,s,t),e.size<=.9*e.maxSize)return;i||=this._db.has(n)}}for(const[i,n]of this._db)if((!r||i.startsWith(r))&&(this._purgeItem(i,n,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e,r=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,r&&(r.size-=e.size);const i=this._notifyRemove(t,e.entry,e.size,o.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),e.lives=e.lifetime,e.size=i,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}class u{constructor(t,e,r){this.entry=t,this.size=e,this.lifetime=r,this.lives=r}}},77793:function(t,e,r){r.d(e,{P:function(){return E},L:function(){return A}});var i=r(53804),n=r(83525),s=r(90194),o=r(21609),a=r(72977);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const e=new l,r=this._originStores[a.Gr.DEFAULTS];r&&r.forEach(((t,r)=>{e.set(r,(0,o.o8)(t),a.Gr.DEFAULTS)}));for(let r=a.Gr.SERVICE;r<a.AU;r++){const i=this._originStores[r];i&&i.forEach(((i,n)=>{t&&t.has(n)||e.set(n,(0,o.o8)(i),r)}))}return e}get(t,e){const r=void 0===e?this._values:this._originStores[e];return r?r.get(t):void 0}keys(t){const e=null==t?this._values:this._originStores[t];return e?[...e.keys()]:[]}set(t,e,r=a.Gr.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,e),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const i=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),i!==e}return!1}delete(t,e=a.Gr.USER){const r=this._originStores[e];if(!r)return;const i=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===e){this._values.delete(t);for(let r=e-1;r>=0;r--){const e=this._originStores[r];if(e&&e.has(t)){this._values.set(t,e.get(t)),this._propertyOriginMap.set(t,r);break}}}return i}has(t,e){const r=void 0===e?this._values:this._originStores[e];return!!r&&r.has(t)}revert(t,e){for(;e>0&&!this.has(t,e);)--e;const r=this._originStores[e],i=r?.get(t),n=this._values.get(t);return this._values.set(t,i),this._propertyOriginMap.set(t,e),n!==i}originOf(t){return this._propertyOriginMap.get(t)||a.Gr.DEFAULTS}forEach(t){this._values.forEach(t)}}var u=r(97354),c=r(63693),h=r(65953);const p=t=>{let e=class extends t{constructor(...t){super(...t);const e=(0,c.oY)(this),r=e.store,i=new l;e.store=i,(0,s.k)(e,r,i)}read(t,e){(0,u.L)(this,t,e)}getAtOrigin(t,e){const r=f(this),i=(0,a.aB)(e);if("string"==typeof t)return r.get(t,i);const n={};return t.forEach((t=>{n[t]=r.get(t,i)})),n}originOf(t){return(0,a.OL)(this.originIdOf(t))}originIdOf(t){return f(this).originOf(t)}revert(t,e){const r=f(this),i=(0,a.aB)(e),n=(0,c.oY)(this);let s;s="string"==typeof t?"*"===t?r.keys(i):[t]:t,s.forEach((t=>{n.invalidate(t),r.revert(t,i),n.commit(t)}))}};return e=(0,i._)([(0,h.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function f(t){return(0,c.oY)(t).store}let y=class extends(p(n.A)){};y=(0,i._)([(0,h.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],y);var _=r(62664),d=r(99495);const m=t=>{let e=class extends t{constructor(...t){super(...t)}clear(t,e="user"){return g(this).delete(t,(0,a.aB)(e))}write(t,e){return(0,d.M)(this,t=t||{},e),t}setAtOrigin(t,e,r){(0,c.oY)(this).setAtOrigin(t,e,(0,a.aB)(r))}removeOrigin(t){const e=g(this),r=(0,a.aB)(t),i=e.keys(r);for(const t of i)e.originOf(t)===r&&e.set(t,e.get(t,r),a.Gr.USER)}updateOrigin(t,e){const r=g(this),i=(0,a.aB)(e),n=(0,_.Jt)(this,t);for(let e=i+1;e<a.AU;++e)r.delete(t,e);r.set(t,n,i)}toJSON(t){return this.write({},t)}};return e=(0,i._)([(0,h.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function g(t){return(0,c.oY)(t).store}const E=t=>{let e=class extends(m(p(t))){constructor(...t){super(...t)}};return e=(0,i._)([(0,h.$)("esri.core.MultiOriginJSONSupport")],e),e};let A=class extends(E(n.A)){};A=(0,i._)([(0,h.$)("esri.core.MultiOriginJSONSupport")],A)},64786:function(t,e,r){r.d(e,{K:function(){return i}});const i=["operational-layers","basemap","ground"]},75505:function(t,e,r){r.d(e,{$:function(){return g},IB:function(){return a},Iy:function(){return D},N2:function(){return E},QP:function(){return O},RH:function(){return T},Vl:function(){return b},Ws:function(){return R},ZD:function(){return A},_L:function(){return N},bJ:function(){return v},e$:function(){return w},f6:function(){return x},pW:function(){return S},pf:function(){return L}});var i=r(52874),n=r(50659),s=r(21609),o=(r(33400),r(41546));function a(t){return"r"in t&&"g"in t&&"b"in t}function l(t){return"h"in t&&"s"in t&&"v"in t}function u(t){return"l"in t&&"a"in t&&"b"in t}function c(t){return"l"in t&&"c"in t&&"h"in t}const h=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],p=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function f(t,e){const r=[];let i,n;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=t[i][n]*e[n];r.push(a)}return r}function y(t){const e=[t.r/255,t.g/255,t.b/255].map((t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4)),r=f(h,e);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function _(t){const e=f(p,[t.x/100,t.y/100,t.z/100]).map((t=>{const e=t<=.0031308?12.92*t:1.055*t**(1/2.4)-.055;return Math.min(1,Math.max(e,0))}));return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function d(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map((t=>t>(6/29)**3?t**(1/3):1/3*(29/6)**2*t+4/29));return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function m(t){const e=t.l,r=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map((t=>t>6/29?t**3:3*(6/29)**2*(t-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function g(t){return a(t)?t:c(t)?function(t){return _(m(function(t){const e=t.l,r=t.c,i=t.h;return{l:e,a:r*Math.cos(i),b:r*Math.sin(i)}}(t)))}(t):u(t)?function(t){return _(m(t))}(t):function(t){return"x"in t&&"y"in t&&"z"in t}(t)?_(t):l(t)?function(t){const e=(t.h+360)%360/60,r=t.s/100,i=t.v/100*255,n=i*r,s=n*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}(t):t}function E(t){return l(t)?t:function(t){const e=t.r,r=t.g,i=t.b,n=Math.max(e,r,i),s=n-Math.min(e,r,i);let o=n,a=0===s?0:n===e?(r-i)/s%6:n===r?(i-e)/s+2:(e-r)/s+4,l=0===s?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}(g(t))}function A(t){return u(t)?t:function(t){return d(y(t))}(g(t))}function T(t){return c(t)?t:function(t){return function(t){const e=t.l,r=t.a,i=t.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:e,c:n,h:s}}(d(y(t)))}(g(t))}function R(t,e){const{r:r,g:n,b:s}=e?.ignoreAlpha?t:function(t){let{r:e,g:r,b:n,a:s}=t;return s<1&&(e=Math.round(s*e+255*(1-s)),r=Math.round(s*r+255*(1-s)),n=Math.round(s*n+255*(1-s))),new i.A({r:e,g:r,b:n})}(t);return.2126*r+.7152*n+.0722*s}var S,I;function v(t,e=S.High){return R(t,{ignoreAlpha:!0})>e?new i.A([0,0,0,t.a]):new i.A([255,255,255,t.a])}function w(t,e){const r=A(t);r.l*=1-e;const i=g(r),n=t.clone();return n.setColor(i),n.a=t.a,n}function N(t,e){const r=t.clone();return r.a*=e,r}function b(t,e){const r=E(t);r.s*=e;const i=g(r),n=t.clone();return n.setColor(i),n.a=t.a,n}function O(t){return i.A.toUnitRGBA(t)}function L(t){return(0,o.fA)(t[0],t[1],t[2],t.length>3?t[3]:1)}function x(t,e){const r=i.A.toUnitRGBA(t);return r[3]*=e,r}function D(t,e,r={}){if(0===t.length||e<=0)return[];if(1===(t=t.map((t=>"string"==typeof t?new i.A(t):t))).length||1===e){const r=[],i=t[0];for(let t=0;t<e;t++)r.push(i.clone());return r}if(r.shuffle&&(t=(0,n.k4)((0,s.o8)(t),r.seed)),t.length>=e){const r=[],i=(t.length-1)/(e-1);for(let n=0;n<e;n++){const e=Math.round(n*i);r.push(t[e].clone())}return r}return function(t,e,r={}){const i=[],s=t.length-1,o=Math.ceil((e-t.length)/s);t:for(let n=0;n<s;n++){const s=t[n],a=t[n+1];for(let n=1;n<=o;n++){const l=n/(o+1);if(i.push(M(s,a,l,r)),i.length+t.length===e)break t}}return[...t.map((t=>t.clone())),...(0,n.k4)(i,r.seed??1)]}(t,e,r)}(I=S||(S={}))[I.Low=160]="Low",I[I.High=225]="High";const P=(t,e)=>{const r=Math.floor(10*e())-5;return Math.min(255,Math.max(0,t+r))};function M(t,e,r,s={}){const o=t.r,a=t.g,l=t.b,u=e.r,c=e.g,h=e.b,p=Math.round(o+(u-o)*r),f=Math.round(a+(c-a)*r),y=Math.round(l+(h-l)*r);if(!s.offset)return new i.A([p,f,y]);const _=(0,n.Mo)(s.seed);return new i.A([P(p,_),P(f,_),P(y,_)])}},72139:function(t,e,r){var i,n,s;r.d(e,{O3:function(){return l},Ox:function(){return u},bR:function(){return o},dC:function(){return i}}),(s=i||(i={}))[s.Unknown=0]="Unknown",s[s.Point=1]="Point",s[s.LineString=2]="LineString",s[s.Polygon=3]="Polygon";class o{constructor(t,e){this.x=t,this.y=e}clone(){return new o(this.x,this.y)}equals(t,e){return t===this.x&&e===this.y}isEqual(t){return t.x===this.x&&t.y===this.y}setCoords(t,e){return this.x=t,this.y=e,this}normalize(){const t=this.x,e=this.y,r=Math.sqrt(t*t+e*e);return this.x/=r,this.y/=r,this}rightPerpendicular(){const t=this.x;return this.x=this.y,this.y=-t,this}leftPerpendicular(){const t=this.x;return this.x=-this.y,this.y=t,this}move(t,e){return this.x+=t,this.y+=e,this}assign(t){return this.x=t.x,this.y=t.y,this}assignAdd(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}assignSub(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}rotate(t,e){const r=this.x,i=this.y;return this.x=r*t-i*e,this.y=r*e+i*t,this}scale(t){return this.x*=t,this.y*=t,this}length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}sub(t){return this.x-=t.x,this.y-=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}static distance(t,e){const r=e.x-t.x,i=e.y-t.y;return Math.sqrt(r*r+i*i)}static add(t,e){return new o(t.x+e.x,t.y+e.y)}static sub(t,e){return new o(t.x-e.x,t.y-e.y)}}class a{constructor(t,e,r){this.ratio=t,this.x=e,this.y=r}}class l{constructor(t,e,r,i=8,n=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=i,this._pixelMargin=n,this._tileSize=512*i,this._dz=t,this._yPos=e,this._xPos=r}setPixelMargin(t){t!==this._pixelMargin&&(this._pixelMargin=t,this.setExtent(this._extent))}setExtent(t){this._extent=t,this._finalRatio=this._tileSize/t*(1<<this._dz);let e=this._pixelRatio*this._pixelMargin;e/=this._finalRatio;const r=t>>this._dz;e>r&&(e=r),this._margin=e,this._xmin=r*this._xPos-e,this._ymin=r*this._yPos-e,this._xmax=this._xmin+r+2*e,this._ymax=this._ymin+r+2*e}reset(t){this._type=t,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(t,e){this._pushLine(),this._prevIsIn=this._isIn(t,e),this._moveTo(t,e,this._prevIsIn),this._prevPt=new o(t,e),this._firstPt=new o(t,e),this._dist=0}lineTo(t,e){const r=this._isIn(t,e),i=new o(t,e),n=o.distance(this._prevPt,i);let s,l,u,c,h,p,f,y;if(r)this._prevIsIn?this._lineTo(t,e,!0):(s=this._prevPt,l=i,u=this._intersect(l,s),this._start=this._dist+n*(1-this._r),this._lineTo(u.x,u.y,!0),this._lineTo(l.x,l.y,!0));else if(this._prevIsIn)l=this._prevPt,s=i,u=this._intersect(l,s),this._lineTo(u.x,u.y,!0),this._lineTo(s.x,s.y,!1);else{const t=this._prevPt,e=i;if(t.x<=this._xmin&&e.x<=this._xmin||t.x>=this._xmax&&e.x>=this._xmax||t.y<=this._ymin&&e.y<=this._ymin||t.y>=this._ymax&&e.y>=this._ymax)this._lineTo(e.x,e.y,!1);else{const r=[];if((t.x<this._xmin&&e.x>this._xmin||t.x>this._xmin&&e.x<this._xmin)&&(c=(this._xmin-t.x)/(e.x-t.x),y=t.y+c*(e.y-t.y),y<=this._ymin?p=!1:y>=this._ymax?p=!0:r.push(new a(c,this._xmin,y))),(t.x<this._xmax&&e.x>this._xmax||t.x>this._xmax&&e.x<this._xmax)&&(c=(this._xmax-t.x)/(e.x-t.x),y=t.y+c*(e.y-t.y),y<=this._ymin?p=!1:y>=this._ymax?p=!0:r.push(new a(c,this._xmax,y))),(t.y<this._ymin&&e.y>this._ymin||t.y>this._ymin&&e.y<this._ymin)&&(c=(this._ymin-t.y)/(e.y-t.y),f=t.x+c*(e.x-t.x),f<=this._xmin?h=!1:f>=this._xmax?h=!0:r.push(new a(c,f,this._ymin))),(t.y<this._ymax&&e.y>this._ymax||t.y>this._ymax&&e.y<this._ymax)&&(c=(this._ymax-t.y)/(e.y-t.y),f=t.x+c*(e.x-t.x),f<=this._xmin?h=!1:f>=this._xmax?h=!0:r.push(new a(c,f,this._ymax))),0===r.length)h?p?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):p?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(r.length>1&&r[0].ratio>r[1].ratio)this._start=this._dist+n*r[1].ratio,this._lineTo(r[1].x,r[1].y,!0),this._lineTo(r[0].x,r[0].y,!0);else{this._start=this._dist+n*r[0].ratio;for(let t=0;t<r.length;t++)this._lineTo(r[t].x,r[t].y,!0)}this._lineTo(e.x,e.y,!1)}}this._dist+=n,this._prevIsIn=r,this._prevPt=i}close(){if(this._line.length>2){const t=this._firstPt,e=this._prevPt;t.x===e.x&&t.y===e.y||this.lineTo(t.x,t.y);const r=this._line;let i=r.length;for(;i>=4&&(r[0].x===r[1].x&&r[0].x===r[i-2].x||r[0].y===r[1].y&&r[0].y===r[i-2].y);)r.pop(),r[0].x=r[i-2].x,r[0].y=r[i-2].y,--i}}result(t=!0){return this._pushLine(),0===this._lines.length?null:(this._type===i.Polygon&&t&&c.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==i.LineString)throw new Error("Only valid for lines");this._pushLine();const t=this._lines,e=t.length;if(0===e)return null;const r=[];for(let i=0;i<e;i++)r.push({line:t[i],start:this._starts[i]||0});return r}_isIn(t,e){return t>=this._xmin&&t<=this._xmax&&e>=this._ymin&&e<=this._ymax}_intersect(t,e){let r,i,n;if(e.x>=this._xmin&&e.x<=this._xmax)i=e.y<=this._ymin?this._ymin:this._ymax,n=(i-t.y)/(e.y-t.y),r=t.x+n*(e.x-t.x);else if(e.y>=this._ymin&&e.y<=this._ymax)r=e.x<=this._xmin?this._xmin:this._xmax,n=(r-t.x)/(e.x-t.x),i=t.y+n*(e.y-t.y);else{i=e.y<=this._ymin?this._ymin:this._ymax,r=e.x<=this._xmin?this._xmin:this._xmax;const s=(r-t.x)/(e.x-t.x),o=(i-t.y)/(e.y-t.y);s<o?(n=s,i=t.y+s*(e.y-t.y)):(n=o,r=t.x+o*(e.x-t.x))}return this._r=n,new o(r,i)}_pushLine(){this._line&&(this._type===i.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===i.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===i.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(t,e,r){this._type!==i.Polygon?r&&(t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line.push(new o(t,e))):(r||(t<this._xmin&&(t=this._xmin),t>this._xmax&&(t=this._xmax),e<this._ymin&&(e=this._ymin),e>this._ymax&&(e=this._ymax)),t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line.push(new o(t,e)),this._isH=!1,this._isV=!1)}_lineTo(t,e,r){let n,s;if(this._type!==i.Polygon)if(r){if(t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(n=this._line[this._line.length-1],n.equals(t,e)))return;this._line.push(new o(t,e))}else this._line&&this._line.length>0&&this._pushLine();else if(r||(t<this._xmin&&(t=this._xmin),t>this._xmax&&(t=this._xmax),e<this._ymin&&(e=this._ymin),e>this._ymax&&(e=this._ymax)),t=Math.round((t-(this._xmin+this._margin))*this._finalRatio),e=Math.round((e-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){n=this._line[this._line.length-1];const r=n.x===t,i=n.y===e;if(r&&i)return;this._isH&&r||this._isV&&i?(n.x=t,n.y=e,s=this._line[this._line.length-2],s.x===t&&s.y===e?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(s=this._line[this._line.length-2],this._isH=s.x===t,this._isV=s.y===e)):(this._isH=s.x===t,this._isV=s.y===e)):(this._line.push(new o(t,e)),this._isH=r,this._isV=i)}else this._line.push(new o(t,e))}}class u{setExtent(t){this._ratio=4096===t?1:4096/t}get validateTessellation(){return this._ratio<1}reset(t){this._lines=[],this._line=null}moveTo(t,e){this._line&&this._lines.push(this._line),this._line=[];const r=this._ratio;this._line.push(new o(t*r,e*r))}lineTo(t,e){const r=this._ratio;this._line.push(new o(t*r,e*r))}close(){const t=this._line;t&&!t[0].isEqual(t[t.length-1])&&t.push(t[0])}result(){return this._line&&this._lines.push(this._line),0===this._lines.length?null:this._lines}}!function(t){t[t.sideLeft=0]="sideLeft",t[t.sideRight=1]="sideRight",t[t.sideTop=2]="sideTop",t[t.sideBottom=3]="sideBottom"}(n||(n={}));class c{static simplify(t,e,r){if(!r)return;const i=-e,s=t+e,o=-e,a=t+e,l=[],u=[],h=r.length;for(let t=0;t<h;++t){const e=r[t];if(!e||e.length<2)continue;let c,h=e[0];const p=e.length;for(let r=1;r<p;++r)c=e[r],h.x===c.x&&(h.x<=i&&(h.y>c.y?(l.push(t),l.push(r),l.push(n.sideLeft),l.push(-1)):(u.push(t),u.push(r),u.push(n.sideLeft),u.push(-1))),h.x>=s&&(h.y<c.y?(l.push(t),l.push(r),l.push(n.sideRight),l.push(-1)):(u.push(t),u.push(r),u.push(n.sideRight),u.push(-1)))),h.y===c.y&&(h.y<=o&&(h.x<c.x?(l.push(t),l.push(r),l.push(n.sideTop),l.push(-1)):(u.push(t),u.push(r),u.push(n.sideTop),u.push(-1))),h.y>=a&&(h.x>c.x?(l.push(t),l.push(r),l.push(n.sideBottom),l.push(-1)):(u.push(t),u.push(r),u.push(n.sideBottom),u.push(-1)))),h=c}if(0===l.length||0===u.length)return;c.fillParent(r,u,l),c.fillParent(r,l,u);const p=[];c.calcDeltas(p,u,l),c.calcDeltas(p,l,u),c.addDeltas(p,r)}static fillParent(t,e,r){const i=r.length,s=e.length;for(let o=0;o<s;o+=4){const s=e[o],a=e[o+1],l=e[o+2],u=t[s][a-1],c=t[s][a];let p=8092,f=-1;for(let e=0;e<i;e+=4){if(r[e+2]!==l)continue;const i=r[e],s=r[e+1],o=t[i][s-1],a=t[i][s];switch(l){case n.sideLeft:case n.sideRight:if(h(u.y,o.y,a.y)&&h(c.y,o.y,a.y)){const t=Math.abs(a.y-o.y);t<p&&(p=t,f=e)}break;case n.sideTop:case n.sideBottom:if(h(u.x,o.x,a.x)&&h(c.x,o.x,a.x)){const t=Math.abs(a.x-o.x);t<p&&(p=t,f=e)}}}e[o+3]=f}}static calcDeltas(t,e,r){const i=e.length;for(let n=0;n<i;n+=4){const i=[],s=c.calcDelta(n,e,r,i);t.push(e[n]),t.push(e[n+1]),t.push(e[n+2]),t.push(s)}}static calcDelta(t,e,r,i){const n=e[t+3];if(-1===n)return 0;const s=i.length;return s>1&&i[s-2]===n?0:(i.push(n),c.calcDelta(n,r,e,i)+1)}static addDeltas(t,e){const r=t.length;let i=0;for(let e=0;e<r;e+=4){const r=t[e+3];r>i&&(i=r)}for(let s=0;s<r;s+=4){const r=e[t[s]],o=t[s+1],a=i-t[s+3];switch(t[s+2]){case n.sideLeft:r[o-1].x-=a,r[o].x-=a,1===o&&(r[r.length-1].x-=a),o===r.length-1&&(r[0].x-=a);break;case n.sideRight:r[o-1].x+=a,r[o].x+=a,1===o&&(r[r.length-1].x+=a),o===r.length-1&&(r[0].x+=a);break;case n.sideTop:r[o-1].y-=a,r[o].y-=a,1===o&&(r[r.length-1].y-=a),o===r.length-1&&(r[0].y-=a);break;case n.sideBottom:r[o-1].y+=a,r[o].y+=a,1===o&&(r[r.length-1].y+=a),o===r.length-1&&(r[0].y+=a)}}}}const h=(t,e,r)=>t>=e&&t<=r||t>=r&&t<=e},47940:function(t,e,r){r.r(e),r.d(e,{default:function(){return at}});var i=r(53804),n=r(93040),s=r(77472),o=r(39819),a=r(21609),l=r(77793),u=r(60539),c=r(90683),h=r(23502),p=(r(58941),r(40633)),f=r(47332),y=r(65953),_=r(81392),d=r(91484),m=r(57165),g=r(20833),E=r(30607),A=r(78933),T=r(74927),R=r(1615),S=r(88243),I=r(92078),v=r(61380),w=r(70652),N=r(18195);let b=null;var O=r(24540);class L{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const{width:e,height:r,data:i,json:n}=await this._getSpriteData(this._spriteSource,t),s=Object.keys(n);if(!s||0===s.length||!i)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=n,this.width=e,this.height=r;const a=Math.max(this._maxTextureSize,4096);if(e>a||r>a){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${a} pixels}`;throw p.A.getLogger("esri.layers.support.SpriteSource").error(t),new o.A("SpriteSource",t)}let l;for(let t=0;t<i.length;t+=4)l=i[t+3]/255,i[t]=i[t]*l,i[t+1]=i[t+1]*l,i[t+2]=i[t+2]*l;this.image=i}async _getSpriteData(t,e){if("image"===t.type){let e,r;if(this.devicePixelRatio<1.15){if(!t.spriteSource1x)throw new o.A("SpriteSource","no image data provided for low resolution sprites!");e=t.spriteSource1x.image,r=t.spriteSource1x.json}else{if(!t.spriteSource2x)throw new o.A("SpriteSource","no image data provided for high resolution sprites!");e=t.spriteSource2x.image,r=t.spriteSource2x.json}return"width"in e&&"height"in e&&"data"in e&&((0,O.mw)(e.data)||(0,O.UR)(e.data))?{width:e.width,height:e.height,data:new Uint8Array(e.data),json:r}:{...x(e),json:r}}const r=(0,c.An)(this.baseURL),i=r.query?"?"+(0,c.x0)(r.query):"",s=this._isRetina?"@2x":"",a=`${r.path}${s}.${this._spriteImageFormat}${i}`,l=`${r.path}${s}.json${i}`,[u,h]=await Promise.all([(0,n.A)(l,e),(0,n.A)(a,{responseType:"image",...e})]);return{...x(h.data),json:u.data}}}function x(t){const e=document.createElement("canvas"),r=e.getContext("2d");e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height);const i=r.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(i.data)}}var D=r(76226),P=r(6053),M=r(57652),C=r(1644),U=r(36008);class G{constructor(t){this.url=t}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=(0,n.A)(this.url).then((t=>t.data.index))),this._tileIndexPromise}async dataKey(t,e){const r=await this.fetchTileIndex();return(0,u.Te)(e),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,e){const r=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return null;let i=e;for(;0!==i.level;)i=new U.A(i.level-1,i.row>>1,i.col>>1,i.world),r.push(i);let n,s,o=t,a=r.pop();if(1===o)return a;for(;r.length;)if(n=r.pop(),s=(1&n.col)+((1&n.row)<<1),o){if(0===o[s]){a=null;break}if(1===o[s]){a=n;break}a=n,o=o[s]}return a}}var B=r(95929);class F{constructor(t,e){this._tilemap=t,this._tileIndexUrl=e}destroy(){this._tilemap=(0,B.pR)(this._tilemap),this._tileIndexPromise=null}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=(0,n.A)(this._tileIndexUrl,{query:{...t?.query}}).then((t=>t.data.index))),this._tileIndexPromise}dataKey(t,e){const{level:r,row:i,col:n}=t,s=new U.A(t);return this._tilemap.fetchAvailabilityUpsample(r,i,n,s,e).then((()=>(s.world=t.world,s))).catch((t=>{if((0,u.zf)(t))throw t;return null}))}}var z=r(25738);class k{constructor(t){this._tileUrl=t,this._promise=null,this._abortController=null,this._abortOptions=[]}getData(t){(null==this._promise||(0,u.G4)(this._abortController?.signal))&&(this._promise=this._makeRequest(this._tileUrl));const e=this._abortOptions;return e.push(t),(0,u.u7)(t,(()=>{e.every((t=>(0,u.G4)(t)))&&this._abortController.abort()})),this._promise.then((t=>(0,a.o8)(t)))}async _makeRequest(t){this._abortController=new AbortController;const{data:e}=await(0,n.A)(t,{responseType:"array-buffer",signal:this._abortController.signal});return e}}const H=new Map;function V(t,e){return(0,z.tE)(H,t,(()=>new k(t))).getData(e).finally((()=>H.delete(t)))}class ${constructor(t,e,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.initialExtent=null,this.name=t,this.sourceUrl=e;const i=(0,c.An)(this.sourceUrl),n=(0,a.o8)(r),s=n.tiles;if(i)for(let t=0;t<s.length;t++){const e=(0,c.An)(s[t]);e&&((0,c.oP)(e.path)||(e.path=(0,c.fj)(i.path,e.path)),s[t]=(0,c.a6)(e.path,{...i.query,...e.query}))}this.tileServers=s;const o=r.capabilities&&r.capabilities.split(",").map((t=>t.toLowerCase().trim())),l=!0===r?.exportTilesAllowed,u=!0===o?.includes("tilemap"),h=l&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:l,supportsTileMap:u},exportTiles:l?{maxExportTilesCount:+h}:null},this.tileInfo=D.default.fromJSON(n.tileInfo);const p=r.tileMap?(0,c.a6)((0,c.fj)(i.path,r.tileMap),i.query??{}):null;u?(this.type="vector-tile",this.tilemap=new F(new P.d({layer:{parsedUrl:i,tileInfo:this.tileInfo},minLOD:n.minLOD??this.tileInfo.lods[0].level,maxLOD:n.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),p)):p&&(this.tilemap=new G(p)),this.fullExtent=d.default.fromJSON(r.fullExtent),this.initialExtent=d.default.fromJSON(r.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(t,e){return this.tilemap?this.tilemap.dataKey(t,e):t}requestTile(t,e,r,i){return function(t,e,r,i,n){const s=(0,c.An)(t),o=s.query;if(o)for(const[t,n]of Object.entries(o))switch(n){case"{x}":o[t]=i.toString();break;case"{y}":o[t]=r.toString();break;case"{z}":o[t]=e.toString()}const a=s.path;return V((0,c.a6)(a.replaceAll(/\{z\}/gi,e.toString()).replaceAll(/\{y\}/gi,r.toString()).replaceAll(/\{x\}/gi,i.toString()),{...s.query}),n)}(this.tileServers[e%this.tileServers.length],t,e,r,i)}isCompatibleWith(t){const e=this.tileInfo,r=t.tileInfo;if(!e.spatialReference.equals(r.spatialReference))return!1;if(!e.origin.equals(r.origin))return!1;if(Math.round(e.dpi)!==Math.round(r.dpi))return!1;const i=e.lods,n=r.lods,s=Math.min(i.length,n.length);for(let t=0;t<s;t++){const e=i[t],r=n[t];if(e.level!==r.level||Math.round(e.scale)!==Math.round(r.scale))return!1}return!0}}function Y(...t){let e;for(const r of t)if(null!=r)if((0,c.BQ)(r)){if(e){const t=e.split("://")[0];e=t+":"+r.trim()}}else e=(0,c.oP)(r)?r:(0,c.fj)(e,r);return e?(0,c.UC)(e):void 0}async function W(t,e,r,i,s){let o,a,l;if((0,u.Te)(s),"string"==typeof r){const t=(0,c.S8)(r);l=await(0,n.A)(t,{...s,responseType:"json",query:{f:"json",...s?.query}}),l.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),a&&(a=a.replace(/^http:/i,"https:"))),o=t,a=t}else null!=r&&(l={data:r},o=r.jsonUrl||null,a=i);const h=l?.data;if(Z(h))return t.styleUrl=o||null,async function(t,e,r,i){const n=r?(0,c.nM)(r):(0,c.gd)();t.styleBase=n,t.style=e,e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const s=[];if(e.sources&&e.sources.esri){const r=e.sources.esri;r.url?await W(t,"esri",Y(n,r.url),void 0,i):s.push(W(t,"esri",r,n,i))}for(const r of Object.keys(e.sources))"esri"!==r&&"vector"===e.sources[r].type&&(e.sources[r].url?s.push(W(t,r,Y(n,e.sources[r].url),void 0,i)):e.sources[r].tiles&&s.push(W(t,r,e.sources[r],n,i)));await Promise.all(s)}(t,h,a,s);if(!Z(h))return t.sourceUrl?K(t,h,a,!1,e,s):(t.sourceUrl=o||null,K(t,h,a,!0,e,s));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function j(t){return"object"==typeof t&&!!t&&"tilejson"in t&&null!=t.tilejson}function Z(t){return!!t&&"sources"in t&&!!t.sources}async function K(t,e,r,i,n,s){const o=r?(0,c.UC)(r)+"/":(0,c.gd)(),l=function(t){const e=512;if(function(t){return t.hasOwnProperty("tileInfo")}(t)){const r=t?.tileInfo;return null!=r&&(null==r.rows&&(r.rows=e),null==r.cols&&(r.cols=e)),t}const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100,latestWkid:3857}};let i=null;if(j(t)){const{bounds:e}=t;if(e){const t=(0,C.Gh)({x:e[0],y:e[1],spatialReference:(0,a.o8)(M.KK)}),r=(0,C.Gh)({x:e[2],y:e[3],spatialReference:(0,a.o8)(M.KK)});i={xmin:t.x,ymin:t.y,xmax:r.x,ymax:r.y,spatialReference:(0,a.o8)(M.ch)}}}null===i&&(i=r);let n=78271.51696400007,s=295828763.7957775;const o=[],l=t.hasOwnProperty("maxzoom")&&null!=t.maxzoom?+t.maxzoom:22;for(let t=0;t<=l;t++)o.push({level:t,scale:s,resolution:n}),n/=2,s/=2;return{capabilities:"TilesOnly",initialExtent:i,fullExtent:r,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:e,cols:e,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:o,spatialReference:(0,a.o8)(M.ch)}}}(e),u=new $(n,(0,c.a6)(o,s?.query??{}),l);if(!i&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(u))return;null!=u.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(u.fullExtent):e.fullExtent=u.fullExtent.clone()),e.tileInfo&&u.tileInfo&&e.tileInfo.lods.length<u.tileInfo.lods.length&&(e.tileInfo=u.tileInfo)}if(i&&(t.sourceBase=o,t.source=e,t.validatedSource=l,t.primarySourceName=n),t.sourceNameToSource[n]=u,!j(t)&&"defaultStyles"in e&&!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?W(t,"",Y(o,e.defaultStyles,"root.json"),void 0,s):W(t,"",e.defaultStyles,Y(o,"root.json"),s)}}var q=r(28993),X=r(34020),J=r(60534),Q=r(45532),tt=r(44431);const et=1e-6;function rt(t,e){if(t===e)return!0;if(null==t&&null!=e)return!1;if(null!=t&&null==e)return!1;if(null==t||null==e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const r=t.origin,i=e.origin;if(Math.abs(r.x-i.x)>=et||Math.abs(r.y-i.y)>=et)return!1;let n,s;t.lods[0].scale>e.lods[0].scale?(n=t,s=e):(s=t,n=e);for(let t=n.lods[0].scale;t>=s.lods[s.lods.length-1].scale-et;t/=2)if(Math.abs(t-s.lods[0].scale)<et)return!0;return!1}function it(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const r=t.size[0],i=t.format,n=t.dpi,s=new Q.default({x:t.origin.x,y:t.origin.y}),o=t.spatialReference,a=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],l=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=a.scale,c=a.resolution,h=l.scale,p=[];let f=u,y=c,_=0;for(;f>h;)p.push(new tt.A({level:_,resolution:y,scale:f})),_++,f/=2,y/=2;return new D.default({size:[r,r],dpi:n,format:i||"pbf",origin:s,lods:p,spatialReference:o})}var nt=r(82790),st=r(2746);let ot=class extends((0,R.dM)((0,N.j)((0,w.J)((0,A.f)((0,T.b)((0,I.q)((0,v.A)((0,S.d)((0,E.p)((0,l.P)(g.A))))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.path=null,this.refreshInterval=0,this.style=null,this.tilemapCache=null,this.type="vector-tile",this.url=null}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this.primarySource?.destroy(),this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(globalThis.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(u.QP).then((async()=>{if(!this.portalItem?.id)return;const e=`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;(await(0,n.A)(e,{...t,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:e},(0,q.v)(this.portalItem,"portal-item"))})).catch(u.QP).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t?.serviceUrl&&(0,c.An)(t.serviceUrl);if(!e)return null;const r=this._getDefaultAttribution(e.path);return r?(0,c.a6)(r,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?(0,c.An)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo?.styleUrl||null}writeStyleUrl(t,e){t&&(0,c.BQ)(t)&&(t=`https:${t}`);const r=(0,X.py)(t);e.styleUrl=(0,J.e)(t,r)}get tileInfo(){const t=[];for(const e in this.sourceNameToSource)t.push(this.sourceNameToSource[e]);let e=this.primarySource?.tileInfo||new D.default;if(t.length>1)for(let r=0;r<t.length;r++)rt(e,t[r].tileInfo)&&(e=it(e,t[r].tileInfo));return e}readTilemapCache(t,e){const r=e.capabilities?.includes("Tilemap");return r?new P.d({layer:this}):null}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const r=(0,st.C)().maxTextureSize,i=this.currentStyleInfo?.spriteUrl?(0,c.a6)(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,n=new L({type:"url",spriteUrl:i,pixelRatio:t,spriteFormat:this.currentStyleInfo?.spriteFormat},r);await n.load(e),this._spriteSourceMap.set(t,n)}return this._spriteSourceMap.get(t)}async setSpriteSource(t,e){if(!t)return null;const r=(0,st.C)().maxTextureSize,i=t.spriteUrl,n=i?(0,c.a6)(i,{...this.customParameters,token:this.apiKey}):null;if(!n&&"url"===t.type)return null;const s=new L(t,r);try{await s.load(e);const r=t.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(r,s),n&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=n),this.emit("spriteSource-change",{spriteSource:s}),s}catch(t){(0,u.QP)(t)}return null}async loadStyle(t,e){const r=t||this.style||this.url;return this._loadingTask&&"string"==typeof r&&this.url===r||(this._loadingTask?.abort(),this._loadingTask=(0,s.UT)((t=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(r,{signal:t}))),e)),this._loadingTask.promise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,a.o8)(this.styleRepository?.getPaintProperties(t))}setPaintProperties(t,e){const r=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const i=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:r||i})}getStyleLayer(t){return(0,a.o8)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,a.o8)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new o.A("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,r){return null}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const r=await async function(t,e){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[i,n]="string"==typeof t?[t,null]:[null,t.jsonUrl];return await W(r,"esri",t,n,e),{layerDefinition:r.validatedSource,url:i,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&Y(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&Y(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName}}(t,{...e,query:{...this.customParameters,token:this.apiKey}});"webp"===r.spriteFormat&&(await function(){if(b)return b;const t={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return b=new Promise((e=>{const r=new Image;r.onload=()=>{r.onload=r.onerror=null,e(r.width>0&&r.height>0)},r.onerror=()=>{r.onload=r.onerror=null,e(!1)},r.src="data:image/webp;base64,"+t.lossy})),b}()||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySource",r.sourceNameToSource[r.primarySourceName]),this._set("styleRepository",new nt.A(r.style)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^/]+)?\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/vectortileserver/i),r=["OpenBasemap_v2","OpenBasemap_GCS_v2","OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2","World_Hillshade_v2"];if(!e)return;const i=e[2]&&e[2].toLowerCase();if(!i)return;const n=e[1]||"";for(const t of r)if(t.toLowerCase().includes(i))return(0,c.S8)(`//static.arcgis.com/attribution/Vector${n}/${t}`)}async _loadStyle(t){return this._loadingTask?.promise??this.loadStyle(null,t)}};(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"attributionDataUrl",null),(0,i._)([(0,h.MZ)({type:["show","hide"]})],ot.prototype,"listMode",void 0),(0,i._)([(0,h.MZ)({json:{read:!0,write:!0}})],ot.prototype,"blendMode",void 0),(0,i._)([(0,h.MZ)({readOnly:!0,json:{read:!1}})],ot.prototype,"capabilities",null),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"currentStyleInfo",void 0),(0,i._)([(0,h.MZ)({json:{read:!1},readOnly:!0,type:d.default})],ot.prototype,"fullExtent",null),(0,i._)([(0,h.MZ)({json:{read:!1},readOnly:!0,type:d.default})],ot.prototype,"initialExtent",null),(0,i._)([(0,h.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ot.prototype,"isReference",void 0),(0,i._)([(0,h.MZ)({type:["VectorTileLayer"]})],ot.prototype,"operationalLayerType",void 0),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"parsedUrl",null),(0,i._)([(0,h.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ot.prototype,"path",void 0),(0,i._)([(0,h.MZ)({type:Number,json:{write:!1,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ot.prototype,"refreshInterval",void 0),(0,i._)([(0,h.MZ)()],ot.prototype,"style",void 0),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"serviceUrl",null),(0,i._)([(0,h.MZ)({type:m.A,readOnly:!0})],ot.prototype,"spatialReference",null),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"styleRepository",void 0),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"sourceNameToSource",void 0),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"primarySource",void 0),(0,i._)([(0,h.MZ)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],ot.prototype,"styleUrl",null),(0,i._)([(0,_.K)(["portal-item","web-document"],"styleUrl")],ot.prototype,"writeStyleUrl",null),(0,i._)([(0,h.MZ)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:D.default})],ot.prototype,"tileInfo",null),(0,i._)([(0,h.MZ)()],ot.prototype,"tilemapCache",void 0),(0,i._)([(0,f.w)("service","tilemapCache",["capabilities","tileInfo"])],ot.prototype,"readTilemapCache",null),(0,i._)([(0,h.MZ)({json:{read:!1},readOnly:!0,value:"vector-tile"})],ot.prototype,"type",void 0),(0,i._)([(0,h.MZ)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],ot.prototype,"url",void 0),(0,i._)([(0,h.MZ)({readOnly:!0})],ot.prototype,"version",void 0),(0,i._)([(0,f.w)("version",["version","currentVersion"])],ot.prototype,"readVersion",null),ot=(0,i._)([(0,y.$)("esri.layers.VectorTileLayer")],ot);const at=ot},30607:function(t,e,r){r.d(e,{p:function(){return o}});var i=r(53804),n=r(23502),s=(r(58941),r(40633),r(13798),r(65953));const o=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,n.MZ)({type:String})],e.prototype,"apiKey",null),e=(0,i._)([(0,s.$)("esri.layers.mixins.APIKeyMixin")],e),e}},78933:function(t,e,r){r.d(e,{f:function(){return h}});var i=r(53804),n=(r(50917),r(23502)),s=(r(58941),r(40633),r(13798),r(47332)),o=r(65953),a=r(76226),l=r(10402),u=r(6053),c=r(57165);const h=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}readMaxScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(t,e,r){const i=e.capabilities?.includes("Tilemap");let{minLOD:n,maxLOD:s,minScale:o,maxScale:c}=e;if(null==n&&null==s&&0!==o&&0!==c){const t=t=>Math.round(1e4*t)/1e4;o=t(o||e.tileInfo.lods[0].scale),c=t(c||e.tileInfo.lods[e.tileInfo.lods.length-1].scale);for(const r of e.tileInfo.lods){const e=t(r.scale);n=e>=o?r.level:n,s=e>=c?r.level:s}}if(i)return new u.d({layer:this,minLOD:n,maxLOD:s});if(e.tileInfo){const t=new a.default;return t.read(e.tileInfo,r),new l.A(t,n,s)}return null}};return(0,i._)([(0,n.MZ)({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),(0,i._)([(0,n.MZ)()],e.prototype,"minScale",void 0),(0,i._)([(0,s.w)("service","minScale")],e.prototype,"readMinScale",null),(0,i._)([(0,n.MZ)()],e.prototype,"maxScale",void 0),(0,i._)([(0,s.w)("service","maxScale")],e.prototype,"readMaxScale",null),(0,i._)([(0,n.MZ)({type:c.A})],e.prototype,"spatialReference",void 0),(0,i._)([(0,n.MZ)({readOnly:!0})],e.prototype,"supportsBlankTile",null),(0,i._)([(0,n.MZ)({type:a.default})],e.prototype,"tileInfo",void 0),(0,i._)([(0,n.MZ)()],e.prototype,"tilemapCache",void 0),(0,i._)([(0,s.w)("service","tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null),(0,i._)([(0,n.MZ)()],e.prototype,"version",void 0),e=(0,i._)([(0,o.$)("esri.layers.mixins.ArcGISCachedService")],e),e}},74927:function(t,e,r){r.d(e,{b:function(){return l}});var i=r(53804),n=r(40633),s=r(23502),o=(r(58941),r(13798),r(65953)),a=r(93389);const l=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,a.qg)(this.url);if(null!=t&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,a.Jf)(t,n.A.getLogger(this)))}};return(0,i._)([(0,s.MZ)()],e.prototype,"title",null),(0,i._)([(0,s.MZ)({type:String})],e.prototype,"url",null),e=(0,i._)([(0,o.$)("esri.layers.mixins.ArcGISService")],e),e}},88243:function(t,e,r){r.d(e,{d:function(){return o}});var i=r(53804),n=r(23502),s=(r(58941),r(40633),r(13798),r(65953));const o=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return(0,i._)([(0,n.MZ)({type:Object,json:{write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0)})}}})],e.prototype,"customParameters",void 0),e=(0,i._)([(0,s.$)("esri.layers.mixins.CustomParametersMixin")],e),e}},92078:function(t,e,r){r.d(e,{q:function(){return A}});var i=r(53804),n=r(39819),s=r(90683),o=r(23502),a=r(67888),l=(r(13798),r(58941),r(47332)),u=r(65953),c=r(81392),h=r(64786),p=r(97354),f=r(99495);const y={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},_={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},d={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},m={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":y,"web-map/basemap":_,"web-map/tables":d,"link-chart/operational-layers":{...y,LinkChartLayer:!0},"link-chart/basemap":_,"link-chart/tables":d,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var g=r(7010),E=r(52038);const A=t=>{let e=class extends t{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(t,e,r){return"Group Layer"===r?.portalItem?.type?void 0:t}writeListMode(t,e,r,i){(i&&"ground"===i.layerContainerType||t&&(0,f.R)(this,r,{},i))&&(e[r]=t)}writeOperationalLayerType(t,e,r,i){t&&"tables"!==i?.layerContainerType&&(e.layerType=t)}writeTitle(t,e){e.title=t??"Layer"}readTimeExtent(t){return t?E.A.fromArray(t):null}writeTimeExtent(t,e,r,i){t&&"tables"!==i.layerContainerType&&(t.isEmpty?i?.messages&&i.messages.push(new n.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):e[r]=t.toArray())}read(t,e){e&&(e.layer=this),(0,p.t)(this,t,(e=>super.read(t,e)),e)}write(t,e){if(!this.persistenceEnabled&&!e?.ignorePersistenceEnabled)return null;if(e?.origin){const t=`${e.origin}/${e.layerContainerType||"operational-layers"}`,r=m[t];let i=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===t&&(i=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===t&&(i=!1),!i)return e.messages?.push(new n.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${t}'`,{layer:this})),null}const r=super.write(t,{...e,layer:this}),i=!!e&&!!e.messages&&!!e.messages.filter((t=>t instanceof n.A&&"web-document-write:property-required"===t.name)).length;return(0,s.w8)(r?.url)?(e?.messages?.push(new n.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:r}beforeSave(){}};return(0,i._)([(0,o.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),(0,i._)([(0,l.w)("id",["id"])],e.prototype,"readId",null),(0,i._)([(0,o.MZ)(g.C1)],e.prototype,"listMode",void 0),(0,i._)([(0,c.K)("listMode")],e.prototype,"writeListMode",null),(0,i._)([(0,o.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:h.K}}}}})],e.prototype,"operationalLayerType",void 0),(0,i._)([(0,c.K)("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),(0,i._)([(0,o.MZ)(g.ke)],e.prototype,"opacity",void 0),(0,i._)([(0,o.MZ)({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),(0,i._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],e.prototype,"writeTitle",null),(0,i._)([(0,o.MZ)({type:E.A,json:{origins:{"web-scene":{write:{layerContainerTypes:h.K}}}}})],e.prototype,"visibilityTimeExtent",void 0),(0,i._)([(0,l.w)("visibilityTimeExtent")],e.prototype,"readTimeExtent",null),(0,i._)([(0,c.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[a.jz,a.Uv]]}})],e.prototype,"writeTimeExtent",null),(0,i._)([(0,o.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:h.K}}},name:"visibility",write:!0}})],e.prototype,"visible",void 0),e=(0,i._)([(0,u.$)("esri.layers.mixins.OperationalLayer")],e),e}},61380:function(t,e,r){r.d(e,{A:function(){return R}});var i=r(53804),n=r(25591),s=r(7156),o=r(93040),a=r(77472),l=r(39819),u=r(40633),c=r(95929),h=r(60539),p=r(90683),f=r(23502),y=(r(58941),r(13798),r(47332)),_=r(65953),d=r(81392),m=r(11432),g=r(51432),E=r(43173),A=r(85956),T=r(29606);const R=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,e,r){if(e.itemId)return new E.default({id:e.itemId,portal:r?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem?.id)try{const{load:i}=await r.e(1536).then(r.bind(r,58615));return(0,h.Te)(e),await i({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(t){throw(0,h.zf)(t)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch((t=>((0,h.QP)(t),!0))))}async setUserPrivileges(t,e){if(!n.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(e);if(this.url)try{const{features:{edit:r,fullEdit:i},content:{updateItem:n}}=await this._fetchUserPrivileges(t,e);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",i),this._set("userHasUpdateItemPrivileges",n)}catch(t){(0,h.QP)(t)}}async _fetchUserPrivileges(t,e){let r=this.portalItem;if(!t||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(e);const i=t===r.id;if(i&&r.portal.user)return(0,T.It)(r);let n,o;if(i)n=r.portal.url;else try{n=await(0,m.wI)(this.url,e)}catch(t){(0,h.QP)(t)}if(!n||!(0,p.b8)(n,r.portal.url))return this._fetchFallbackUserPrivileges(e);try{const t=null!=e?e.signal:null;o=await(s.id?.getCredential(`${n}/sharing`,{prompt:!1,signal:t}))}catch(t){(0,h.QP)(t)}const a=!0,l=!1,u=!1;if(!o)return{features:{edit:a,fullEdit:l},content:{updateItem:u}};try{if(i?await r.reload():(r=new E.default({id:t,portal:{url:n}}),await r.load(e)),r.portal.user)return(0,T.It)(r)}catch(t){(0,h.QP)(t)}return{features:{edit:a,fullEdit:l},content:{updateItem:u}}}async _fetchFallbackUserPrivileges(t){let e=!0;try{e=await this._fetchUserHasEditingPrivileges(t)}catch(t){(0,h.QP)(t)}return{features:{edit:e,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(t){const e=this.url?s.id?.findCredential(this.url):null;if(!e)return!0;const r=S.credential===e?S.user:await this._fetchEditingUser(t);return S.credential=e,S.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const r=s.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const i=`${r.owningSystemUrl}/sharing/rest`,n=g.A.getDefault();if(n&&n.loaded&&(0,p.S8)(n.restUrl)===(0,p.S8)(i))return n.user;const l=`${i}/community/self`,u=null!=t?t.signal:null,c=await(0,a.Ke)((0,o.A)(l,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?A.A.fromJSON(c.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e?.portal,i=this.portalItem?.id&&(this.portalItem.portal||g.A.getDefault());return r&&i&&!(0,p.ut)(i.restUrl,r.restUrl)?(e.messages&&e.messages.push(new l.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return(0,i._)([(0,f.MZ)({type:E.default})],e.prototype,"portalItem",null),(0,i._)([(0,y.w)("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),(0,i._)([(0,d.K)("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),(0,i._)([(0,f.MZ)({clonable:!1})],e.prototype,"resourceReferences",void 0),(0,i._)([(0,f.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),(0,i._)([(0,f.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),(0,i._)([(0,f.MZ)({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=(0,i._)([(0,_.$)("esri.layers.mixins.PortalLayer")],e),e},S={credential:null,user:null}},70652:function(t,e,r){r.d(e,{J:function(){return E}});var i=r(53804),n=(r(58941),r(40633)),s=r(60539),o=r(23502),a=r(77560),l=(r(13798),r(65953)),u=r(64786),c=r(78879),h=r(28181),p=r(25638);const f=new c.A,y=new WeakMap;function _(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:_(e,t%e):0}let d=0,m=0;function g(){const t=Date.now();let e=!1;for(const r of f){const i=r.deref();i?i.refreshInterval&&t-(y.get(i)??0)+5>=6e4*i.refreshInterval&&(y.set(i,t),i.refresh(t)):e=!0}if(e)for(let t=f.length-1;t>=0;t--)f.at(t).deref()||f.removeAt(t)}(0,p.fm)((()=>{const t=Date.now();let e=0;for(const r of f){const i=r.deref();i&&(e=_(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?y.get(i)||y.set(i,t):y.delete(i))}if(e!==m){if(m=e,clearInterval(d),0===m)return void(d=0);d=setInterval(g,m)}}),h.OH);const E=t=>{let e=class extends t{constructor(...t){super(...t),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,s.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(t){(function(t){return null!=t&&"object"==typeof t&&"refreshInterval"in t&&"refresh"in t})(t)&&f.push(new WeakRef(t))}(this)}),(()=>{}))}destroy(){!function(t){const e=f.find((e=>e.deref()===t));e&&f.remove(e)}(this)}castRefreshInterval(t){return t>=.1?t:t<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(t=Date.now()){(0,s.QZ)(this._debounceHasDataChanged()).then((e=>{e&&this._set("refreshTimestamp",t),this.emit("refresh",{dataChanged:e})}),(t=>{n.A.getLogger(this).error(t),this.emit("refresh",{dataChanged:!1,error:t})}))}async hasDataChanged(){return!0}get test(){}};return(0,i._)([(0,o.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],e.prototype,"refreshInterval",void 0),(0,i._)([(0,a.w)("refreshInterval")],e.prototype,"castRefreshInterval",null),(0,i._)([(0,o.MZ)({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),(0,i._)([(0,o.MZ)({readOnly:!0})],e.prototype,"refreshParameters",null),e=(0,i._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],e),e}},44431:function(t,e,r){r.d(e,{A:function(){return c}});var i,n=r(53804),s=r(30905),o=r(23502),a=r(67888),l=(r(13798),r(58941),r(65953));let u=i=class extends s.oY{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new i({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],u.prototype,"cols",void 0),(0,n._)([(0,o.MZ)({type:a.jz,json:{write:!0}})],u.prototype,"level",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"levelValue",void 0),(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],u.prototype,"origin",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],u.prototype,"resolution",void 0),(0,n._)([(0,o.MZ)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],u.prototype,"rows",void 0),(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],u.prototype,"scale",void 0),u=i=(0,n._)([(0,l.$)("esri.layers.support.LOD")],u);const c=u},76226:function(t,e,r){r.r(e),r.d(e,{default:function(){return I}});var i,n=r(53804),s=r(73037),o=r(30905),a=r(62938),l=r(23502),u=r(67888),c=(r(13798),r(58941),r(47332)),h=r(65953),p=r(81392),f=r(45532),y=r(57165),_=r(87416),d=r(57652),m=r(1644),g=r(44431),E=r(29679);const A=new s.J({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let T=i=class extends o.oY{static create(t={}){const{resolutionFactor:e=1,scales:r,size:n=256,spatialReference:s=y.A.WebMercator,numLODs:o=24}=t;if(!(0,d.fn)(s)){const t=[];if(r)for(let e=0;e<r.length;e++){const i=r[e];t.push(new g.A({level:e,scale:i,resolution:i}))}else{let e=5e-4;for(let r=o-1;r>=0;r--)t.unshift(new g.A({level:r,scale:e,resolution:e})),e*=2}return new i({dpi:96,lods:t,origin:new f.default(0,0,s),size:[n,n],spatialReference:s})}const l=(0,d.Vp)(s),u=t.origin?new f.default({x:t.origin.x,y:t.origin.y,spatialReference:s}):new f.default(l?{x:l.origin[0],y:l.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=1/(39.37*(0,a.GA)(s)*96),h=[];if(r)for(let t=0;t<r.length;t++){const e=r[t],i=e*c;h.push(new g.A({level:t,scale:e,resolution:i}))}else{let t=(0,d.EA)(s)?512/n*591657527.5917094:256/n*591657527.591555;const r=Math.ceil(o/e);h.push(new g.A({level:0,scale:t,resolution:t*c}));for(let i=1;i<r;i++){const r=t/2**e,n=r*c;h.push(new g.A({level:i,scale:r,resolution:n})),t=r}}return new i({dpi:96,lods:h,origin:u,size:[n,n],spatialReference:s})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const r=(0,d.Vp)(t);return t.isWrappable&&!!r&&Math.abs(r.origin[0]-e.x)<=r.dx}return!1}readOrigin(t,e){return f.default.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,r=0;const i=[],n=this._levelToLOD={};t&&(e=-1/0,r=1/0,t.forEach((t=>{i.push(t.scale),e=t.scale>e?t.scale:e,r=t.scale<r?t.scale:r,n[t.level]=t}))),this._set("scales",i),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const r=Math.floor(t),i=r+1;return e[r]/(e[r]/e[i])**(t-r)}scaleToZoom(t){const e=this.scales,r=e.length-1;let i=0;for(;i<r;i++){const r=e[i],n=e[i+1];if(r<=t)return i;if(n===t)return i+1;if(r>t&&n<t)return i+Math.log(r/t)/Math.log(r/n)}return i}tileAt(t,e,r,i){const n=this.lodAt(t);if(!n)return null;let s,o;if("number"==typeof e)s=e,o=r;else if((0,d.aI)(e.spatialReference,this.spatialReference))s=e.x,o=e.y,i=r;else{const t=(0,m.Cv)(e,this.spatialReference);if(null==t)return null;s=t.x,o=t.y,i=r}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return i||(i=new E.U(null,0,0,0,(0,_.vt)())),i.level=t,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(t,e=i.ExtrapolateOptions.NONE){let r=this.lodAt(t.level);if(!r&&e===i.ExtrapolateOptions.POWER_OF_TWO){const e=this.lods[this.lods.length-1];e.level<t.level&&(r=e)}if(!r)return;const n=t.level-r.level,s=r.resolution*this.size[0]/2**n,o=r.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=(0,_.vt)()),t.extent[0]=this.origin.x+t.col*s,t.extent[1]=this.origin.y-(t.row+1)*o,t.extent[2]=t.extent[0]+s,t.extent[3]=t.extent[1]+o}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||-1===e.parentLevel||(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),0))}getTileBounds(t,e){const r=this.lodAt(e.level);if(null==r)return null;const{resolution:i}=r,n=i*this.size[0],s=i*this.size[1];return t[0]=this.origin.x+e.col*n,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+n,t[3]=t[1]+s,t}lodAt(t){return this._levelToLOD?.[t]??null}clone(){return i.fromJSON(this.write({}))}getCompatibleForVTL(t){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===t)return null;const e=(512===this.size[0]&&256===t?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===t&&0===e)return this;const r=[],n=this.lods.length-e;for(let t=0;t<n;t++){const i=t+e,{scale:n,resolution:s}=i>=0?this.lods[i]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new g.A({level:t,scale:n,resolution:s}))}return new i({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let r=0;r<t.length;r++){const i=t[r];this._upsampleLevels[i.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/i.resolution:0},e=i}}};var R,S;(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],T.prototype,"compressionQuality",void 0),(0,n._)([(0,l.MZ)({type:Number,json:{write:!0}})],T.prototype,"dpi",void 0),(0,n._)([(0,l.MZ)({type:String,json:{read:A.read,write:A.write,origins:{"web-scene":{read:!1,write:!1}}}})],T.prototype,"format",void 0),(0,n._)([(0,l.MZ)({readOnly:!0})],T.prototype,"isWrappable",null),(0,n._)([(0,l.MZ)({type:f.default,json:{write:!0}})],T.prototype,"origin",void 0),(0,n._)([(0,c.w)("origin")],T.prototype,"readOrigin",null),(0,n._)([(0,l.MZ)({type:[g.A],value:null,json:{write:!0}})],T.prototype,"lods",null),(0,n._)([(0,l.MZ)({readOnly:!0})],T.prototype,"scales",void 0),(0,n._)([(0,l.MZ)({cast:t=>Array.isArray(t)?t:"number"==typeof t?[t,t]:[256,256]})],T.prototype,"size",void 0),(0,n._)([(0,c.w)("size",["rows","cols"])],T.prototype,"readSize",null),(0,n._)([(0,p.K)("size",{cols:{type:u.jz},rows:{type:u.jz}})],T.prototype,"writeSize",null),(0,n._)([(0,l.MZ)({type:y.A,json:{write:!0}})],T.prototype,"spatialReference",void 0),T=i=(0,n._)([(0,h.$)("esri.layers.support.TileInfo")],T),R=T||(T={}),(S=R.ExtrapolateOptions||(R.ExtrapolateOptions={}))[S.NONE=0]="NONE",S[S.POWER_OF_TWO=1]="POWER_OF_TWO";const I=T},10402:function(t,e,r){r.d(e,{A:function(){return s}});var i=r(39819),n=r(60539);class s{constructor(t,e=0,r=t.lods[t.lods.length-1].level){this.tileInfo=t,this.minLOD=e,this.maxLOD=r,t.lodAt(e)||(this.minLOD=t.lods[0].level),t.lodAt(r)||(this.maxLOD=t.lods[t.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(t,e,r){const i=this.tileInfo?.lodAt(t);return!i||t<this.minLOD||t>this.maxLOD?"unavailable":i.cols&&i.rows?r>=i.cols[0]&&r<=i.cols[1]&&e>=i.rows[0]&&e<=i.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(t,e,r,s){await(0,n.NO)(s);const o=this.getAvailability(t,e,r);if("unavailable"===o)throw new i.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:r});return o}async fetchAvailabilityUpsample(t,e,r,i,s){await(0,n.NO)(s),i.level=t,i.row=e,i.col=r;const o=this.tileInfo;return o.updateTileInfo(i),this.fetchAvailability(t,e,r,s).catch((t=>{if((0,n.zf)(t))throw t;if(o.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i,s);throw t}))}}},29679:function(t,e,r){r.d(e,{U:function(){return i}});class i{constructor(t,e,r,i,n=void 0){this.id=t,this.level=e,this.row=r,this.col=i,this.extent=n}}},6053:function(t,e,r){r.d(e,{d:function(){return I}});var i,n=r(53804),s=r(93040),o=r(83525),a=r(69296),l=r(39819),u=r(61226),c=(r(58941),r(99680)),h=r(7187),p=r(60539),f=r(28181),y=r(74087),_=r(90683),d=r(23502),m=(r(40633),r(13798),r(65953)),g=r(29679),E=r(21609),A=r(24540);class T{constructor(t){!function(t){if(!t?.location)throw new l.A("tilemap:missing-location","Location missing from tilemap response");if(!1===t.valid)throw new l.A("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new l.A("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new l.A("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new l.A("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}(t);const{location:e,data:r}=t;this.location=Object.freeze((0,E.o8)(e));const i=this.location.width,n=this.location.height;let s=!0,o=!0;const a=function(t,e=!1){return t<=A.y9?e?new Array(t).fill(0):new Array(t):new Uint32Array(t)}(Math.ceil(i*n/32));let u=0;for(let t=0;t<r.length;t++){const e=t%32;r[t]?(o=!1,a[u]|=1<<e):s=!1,31===e&&++u}o?(this._availability="unavailable",this.byteSize=40):s?(this._availability="available",this.byteSize=40):(this._availability=a,this.byteSize=40+(0,A.Ek)(a))}getAvailability(t,e){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const r=(t-this.location.top)*this.location.width+(e-this.location.left),i=r%32,n=r>>5,s=this._availability;return n<0||n>s.length?"unknown":s[n]&1<<i?"available":"unavailable"}static fromDefinition(t,e){const r=t.service.request||s.A,{row:i,col:n,width:o,height:a}=t,u={query:{f:"json"}};return e=e?{...u,...e}:u,r(function(t){let e;if(t.service.tileServers?.length){const r=t.service.tileServers;e=`${r&&r.length?r[t.row%r.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else e=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const r=t.service.query;return r&&(e=`${e}?${r}`),e}(t),e).then((t=>t.data)).catch((t=>{if(422===t?.details?.httpStatus)return{location:{top:i,left:n,width:o,height:a},valid:!0,data:new Array(o*a).fill(0)};throw t})).then((t=>{if(t.location&&(t.location.top!==i||t.location.left!==n||t.location.width!==o||t.location.height!==a))throw new l.A("tilemap:location-mismatch","Tilemap response for different location than requested",{response:t,definition:{top:i,left:n,width:o,height:a}});return T.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new T(t))}}function R(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function S(t,e,r){return new l.A("tile-map:tile-unavailable","Tile is not available",{level:t,row:e,col:r})}let I=i=class extends o.A{constructor(t){super(t),this._pendingTilemapRequests={},this.request=s.A,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new c.q(2*a.u.MEGABYTES),this.addHandles((0,f.watch)((()=>{const{layer:t}=this;return[t?.parsedUrl,t?.tileServers,t?.apiKey,t?.customParameters]}),(()=>this._initializeTilemapDefinition()),f.Vh))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(t,e,r){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return"unavailable";const i=this._tilemapFromCache(t,e,r,this._tmpTilemapDefinition);return i?i.getAvailability(e,r):"unknown"}fetchAvailability(t,e,r,i){return!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD?Promise.reject(S(t,e,r)):this._fetchTilemap(t,e,r,i).catch((t=>t)).then((i=>{if(i instanceof T){const n=i.getAvailability(e,r);if("unavailable"===n)throw S(t,e,r);return n}if((0,p.zf)(i))throw i;return"unknown"}))}fetchAvailabilityUpsample(t,e,r,i,n){i.level=t,i.row=e,i.col=r;const s=this.layer.tileInfo;s.updateTileInfo(i);const o=this.fetchAvailability(t,e,r,n).catch((t=>{if((0,p.zf)(t))throw t;if(s.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i,n);throw t}));return this._fetchAvailabilityUpsamplePrefetch(i.id,t,e,r,n,o),o}async _fetchAvailabilityUpsamplePrefetch(t,e,r,n,s,o){if(!this._prefetchingEnabled||null==t)return;const a=`prefetch-${t}`;if(this.hasHandles(a))return;const l=new AbortController;o.then((()=>l.abort()),(()=>l.abort()));let c=!1;const h=(0,u.hA)((()=>{c||(c=!0,l.abort())}));if(this.addHandles(h,a),await(0,y.md)(10,l.signal).catch((()=>{})),c||(c=!0,this.removeHandles(a)),(0,p.G4)(l))return;const f=new g.U(t,e,r,n),_={...s,signal:l.signal},d=this.layer.tileInfo;for(let t=0;i._prefetches.length<i._maxPrefetch&&d.upsampleTile(f);++t){const t=this.fetchAvailability(f.level,f.row,f.col,_);i._prefetches.push(t);const e=()=>{i._prefetches.removeUnordered(t)};t.then(e,e)}}_fetchTilemap(t,e,r,i){if(!this.layer.tileInfo.lodAt(t)||t<this.effectiveMinLOD||t>this.effectiveMaxLOD)return Promise.reject(new l.A("tilemap-cache:level-unavailable",`Level ${t} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(t,e,r,n);if(s)return Promise.resolve(s);const o=i?.signal;return i={...i,signal:null},new Promise(((t,e)=>{(0,p.u7)(o,(()=>e((0,p.NK)())));const r=R(n);let s=this._pendingTilemapRequests[r];if(!s){s=T.fromDefinition(n,i).then((t=>(this._tilemapCache.put(r,t,t.byteSize),t)));const t=()=>{delete this._pendingTilemapRequests[r]};this._pendingTilemapRequests[r]=s,s.then(t,t)}s.then(t,e)}))}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:e,customParameters:r}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:(0,_.x0)({...t.query,...r,token:e??t.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(t,e,r,i){i.level=t,i.row=e-e%this.size,i.col=r-r%this.size;const n=R(i);return this._tilemapCache.get(n)}get test(){}};I._maxPrefetch=4,I._prefetches=new h.A({initialSize:i._maxPrefetch}),(0,n._)([(0,d.MZ)({constructOnly:!0})],I.prototype,"layer",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],I.prototype,"minLOD",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],I.prototype,"maxLOD",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],I.prototype,"request",void 0),(0,n._)([(0,d.MZ)({constructOnly:!0})],I.prototype,"size",void 0),I=i=(0,n._)([(0,m.$)("esri.layers.support.TilemapCache")],I)},7010:function(t,e,r){r.d(e,{C1:function(){return I},Fm:function(){return A},Ih:function(){return E},M6:function(){return h},OZ:function(){return f},PY:function(){return c},Qo:function(){return d},Yj:function(){return _},fV:function(){return y},hG:function(){return S},hn:function(){return R},id:function(){return T},kF:function(){return p},ke:function(){return g},zQ:function(){return v}});var i=r(64786),n=r(91484),s=r(57165),o=r(60534),a=r(6422),l=r(92777),u=r(59798);const c={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:i.K}}},h={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,r){e[r]=!t}}}},p={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:i.K}}},f={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:o.w}}},y={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:i.K}}},_={value:null,type:a.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:i.K}}};function d(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const m={write:{enabled:!0,layerContainerTypes:i.K},read:!0},g={type:Number,json:{origins:{"web-document":m,"portal-item":{write:!0}}}},E={...g,json:{...g.json,origins:{"web-document":{...m,write:{enabled:!0,layerContainerTypes:i.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,r)=>r&&"service"!==r.origin||!e.drawingInfo||void 0===e.drawingInfo.transparency?e.layerDefinition?.drawingInfo&&void 0!==e.layerDefinition.drawingInfo.transparency?(0,u.D)(e.layerDefinition.drawingInfo.transparency):void 0:(0,u.D)(e.drawingInfo.transparency)}}},A={type:n.default,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const r=n.default.fromJSON(t);return null!=e.spatialReference&&"object"==typeof e.spatialReference&&(r.spatialReference=s.A.fromJSON(e.spatialReference)),r}}}},read:!1}},T={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},R={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:i.K}}},name:"layerDefinition.minScale",write:!0}},S={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:i.K}}},name:"layerDefinition.maxScale",write:!0}},I={json:{write:{ignoreOrigin:!0,layerContainerTypes:i.K},origins:{"web-map":{read:!1,write:!1}}}},v={type:l.A,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}}},28993:function(t,e,r){r.d(e,{m:function(){return o},v:function(){return s}});var i=r(90683),n=r(51432);function s(t,e){return{...a(t,e),readResourcePaths:[]}}function o(t,e,r){const n=(0,i.An)(t.itemUrl);return{...a(t,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:n?{rootPath:n.path,writtenUrls:[]}:null,resources:r?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function a(t,e){return{origin:e,url:(0,i.An)(t.itemUrl),portal:t.portal||n.A.getDefault(),portalItem:t}}},29606:function(t,e,r){r.d(e,{It:function(){return f},LG:function(){return o},OM:function(){return u},Sm:function(){return c},Y:function(){return a},bK:function(){return l},mm:function(){return p},sQ:function(){return h}});var i=r(46157),n=r(57165),s=r(1644);function o(t,e){if(!a(t,e)){const r=t.typeKeywords;r?r.push(e):t.typeKeywords=[e]}}function a(t,e){return!!t.typeKeywords?.includes(e)}function l(t){return a(t,p.HOSTED_SERVICE)}function u(t,e){const r=t.typeKeywords;if(r){const t=r.indexOf(e);t>-1&&r.splice(t,1)}}function c(t,e,r){r?o(t,e):u(t,e)}async function h(t){const e=t.clone().normalize();let r;if(e.length>1)for(const t of e)r?t.width>r.width&&(r=t):r=t;else r=e[0];return async function(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return(0,s.ci)(t);const r=n.A.WGS84;return await(0,i.initializeProjection)(e,r),(0,i.project)(t,r)}(r)}const p={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function f(t){const{portal:e,isOrgItem:r,itemControl:i}=t,n=e.user?.privileges;let s=!n||n.includes("features:user:edit"),o=!!r&&!!n?.includes("features:user:fullEdit");const a="update"===i||"admin"===i;return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}},33389:function(t,e,r){var i,n,s,o,a,l,u,c,h,p,f,y,_,d,m,g,E,A,T,R,S,I,v,w,N,b,O,L,x,D,P,M,C,U,G,B,F,z,k,H,V,$,Y,W,j,Z,K,q,X,J,Q,tt,et,rt,it,nt,st,ot,at,lt,ut,ct;r.d(e,{$2:function(){return a},C1:function(){return s},Hz:function(){return y},JO:function(){return n},M1:function(){return v},O$:function(){return ot},Q1:function(){return K},TZ:function(){return E},WE:function(){return x},Y:function(){return u},YI:function(){return X},bj:function(){return c},e_:function(){return Z},f0:function(){return st},fu:function(){return f},g7:function(){return h},ip:function(){return q},mU:function(){return D},oF:function(){return S},uQ:function(){return I},uT:function(){return F},vG:function(){return lt},wd:function(){return V},xR:function(){return i},xn:function(){return A},xw:function(){return b},yS:function(){return z}}),function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(t){t[t.BEVEL=0]="BEVEL",t[t.ROUND=1]="ROUND",t[t.MITER=2]="MITER",t[t.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(t){t[t.SCREEN=0]="SCREEN",t[t.MAP=1]="MAP"}(s||(s={})),function(t){t[t.Tint=0]="Tint",t[t.Ignore=1]="Ignore",t[t.Multiply=99]="Multiply"}(o||(o={})),function(t){t.Both="Both",t.JustBegin="JustBegin",t.JustEnd="JustEnd",t.None="None"}(a||(a={})),function(t){t[t.Mosaic=0]="Mosaic",t[t.Centered=1]="Centered"}(l||(l={})),function(t){t[t.Normal=0]="Normal",t[t.Superscript=1]="Superscript",t[t.Subscript=2]="Subscript"}(u||(u={})),function(t){t[t.MSSymbol=0]="MSSymbol",t[t.Unicode=1]="Unicode"}(c||(c={})),function(t){t[t.Unspecified=0]="Unspecified",t[t.TrueType=1]="TrueType",t[t.PSOpenType=2]="PSOpenType",t[t.TTOpenType=3]="TTOpenType",t[t.Type1=4]="Type1"}(h||(h={})),function(t){t[t.Display=0]="Display",t[t.Map=1]="Map"}(p||(p={})),function(t){t.None="None",t.Loop="Loop",t.Oscillate="Oscillate"}(f||(f={})),function(t){t.Linear="Linear",t.EaseIn="EaseIn",t.EaseOut="EaseOut",t.EaseInOut="EaseInOut"}(y||(y={})),function(t){t[t.Z=0]="Z",t[t.X=1]="X",t[t.Y=2]="Y"}(_||(_={})),function(t){t[t.XYZ=0]="XYZ",t[t.ZXY=1]="ZXY",t[t.YXZ=2]="YXZ"}(d||(d={})),function(t){t[t.Rectangle=0]="Rectangle",t[t.RoundedRectangle=1]="RoundedRectangle",t[t.Oval=2]="Oval"}(m||(m={})),function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.Screen=2]="Screen",t[t.Multiply=3]="Multiply",t[t.Add=4]="Add"}(g||(g={})),function(t){t[t.TTB=0]="TTB",t[t.RTL=1]="RTL",t[t.BTT=2]="BTT"}(E||(E={})),function(t){t[t.None=0]="None",t[t.SignPost=1]="SignPost",t[t.FaceNearPlane=2]="FaceNearPlane"}(A||(A={})),function(t){t[t.Float=0]="Float",t[t.String=1]="String",t[t.Boolean=2]="Boolean"}(T||(T={})),function(t){t[t.Intersect=0]="Intersect",t[t.Subtract=1]="Subtract"}(R||(R={})),function(t){t.OpenEnded="OpenEnded",t.Block="Block",t.Crossed="Crossed"}(S||(S={})),function(t){t.FullGeometry="FullGeometry",t.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",t.ReversedFirstSegment="ReversedFirstSegment",t.PerpendicularToSecondSegment="PerpendicularToSecondSegment",t.SecondSegmentWithTicks="SecondSegmentWithTicks",t.DoublePerpendicular="DoublePerpendicular",t.OppositeToFirstSegment="OppositeToFirstSegment",t.TriplePerpendicular="TriplePerpendicular",t.HalfCircleFirstSegment="HalfCircleFirstSegment",t.HalfCircleSecondSegment="HalfCircleSecondSegment",t.HalfCircleExtended="HalfCircleExtended",t.OpenCircle="OpenCircle",t.CoverageEdgesWithTicks="CoverageEdgesWithTicks",t.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",t.GapExtentMidline="GapExtentMidline",t.Chevron="Chevron",t.PerpendicularWithArc="PerpendicularWithArc",t.ClosedHalfCircle="ClosedHalfCircle",t.TripleParallelExtended="TripleParallelExtended",t.ParallelWithTicks="ParallelWithTicks",t.Parallel="Parallel",t.PerpendicularToFirstSegment="PerpendicularToFirstSegment",t.ParallelOffset="ParallelOffset",t.OffsetOpposite="OffsetOpposite",t.OffsetSame="OffsetSame",t.CircleWithArc="CircleWithArc",t.DoubleJog="DoubleJog",t.PerpendicularOffset="PerpendicularOffset",t.LineExcludingLastSegment="LineExcludingLastSegment",t.MultivertexArrow="MultivertexArrow",t.CrossedArrow="CrossedArrow",t.ChevronArrow="ChevronArrow",t.ChevronArrowOffset="ChevronArrowOffset",t.PartialFirstSegment="PartialFirstSegment",t.Arch="Arch",t.CurvedParallelTicks="CurvedParallelTicks",t.Arc90Degrees="Arc90Degrees",t.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",t.ConcentricCircles="ConcentricCircles",t.DoubleJogArrow="DoubleJogArrow",t.LinkedChevrons="LinkedChevrons",t.SegmentThenHalfCircle="SegmentThenHalfCircle",t.LineWithStraightTicks="LineWithStraightTicks",t.DoubleCurve="DoubleCurve",t.ParallelWithTicksByWidth="ParallelWithTicksByWidth",t.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(I||(I={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square",t.TrueBuffer="TrueBuffer"}(v||(v={})),function(t){t.ClosePath="ClosePath",t.ConvexHull="ConvexHull",t.RectangularBox="RectangularBox"}(w||(w={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(N||(N={})),function(t){t.Mitered="Mitered",t.Bevelled="Bevelled",t.Rounded="Rounded",t.Square="Square"}(b||(b={})),function(t){t.Fast="Fast",t.Accurate="Accurate"}(O||(O={})),function(t){t.BeginningOfLine="BeginningOfLine",t.EndOfLine="EndOfLine"}(L||(L={})),function(t){t.Sinus="Sinus",t.Square="Square",t.Triangle="Triangle",t.Random="Random"}(x||(x={})),function(t){t[t.None=0]="None",t[t.Default=1]="Default",t[t.Force=2]="Force"}(D||(D={})),function(t){t[t.Buffered=0]="Buffered",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.AlongLine=3]="AlongLine"}(P||(P={})),function(t){t[t.Linear=0]="Linear",t[t.Rectangular=1]="Rectangular",t[t.Circular=2]="Circular",t[t.Buffered=3]="Buffered"}(M||(M={})),function(t){t[t.Discrete=0]="Discrete",t[t.Continuous=1]="Continuous"}(C||(C={})),function(t){t[t.AcrossLine=0]="AcrossLine",t[t.AloneLine=1]="AloneLine"}(U||(U={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center",t[t.Justify=3]="Justify"}(G||(G={})),function(t){t[t.Base=0]="Base",t[t.MidPoint=1]="MidPoint",t[t.ThreePoint=2]="ThreePoint",t[t.FourPoint=3]="FourPoint",t[t.Underline=4]="Underline",t[t.CircularCW=5]="CircularCW",t[t.CircularCCW=6]="CircularCCW"}(B||(B={})),function(t){t.Butt="Butt",t.Round="Round",t.Square="Square"}(F||(F={})),function(t){t.NoConstraint="NoConstraint",t.HalfPattern="HalfPattern",t.HalfGap="HalfGap",t.FullPattern="FullPattern",t.FullGap="FullGap",t.Custom="Custom"}(z||(z={})),function(t){t[t.None=-1]="None",t[t.Custom=0]="Custom",t[t.Circle=1]="Circle",t[t.OpenArrow=2]="OpenArrow",t[t.ClosedArrow=3]="ClosedArrow",t[t.Diamond=4]="Diamond"}(k||(k={})),function(t){t[t.ExtraLeading=0]="ExtraLeading",t[t.Multiple=1]="Multiple",t[t.Exact=2]="Exact"}(H||(H={})),function(t){t.Bevel="Bevel",t.Round="Round",t.Miter="Miter"}(V||(V={})),function(t){t[t.Default=0]="Default",t[t.String=1]="String",t[t.Numeric=2]="Numeric"}($||($={})),function(t){t[t.InsidePolygon=0]="InsidePolygon",t[t.PolygonCenter=1]="PolygonCenter",t[t.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(Y||(Y={})),function(t){t[t.Tint=0]="Tint",t[t.Replace=1]="Replace",t[t.Multiply=2]="Multiply"}(W||(W={})),function(t){t[t.ClipAtBoundary=0]="ClipAtBoundary",t[t.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",t[t.DoNotTouchBoundary=2]="DoNotTouchBoundary",t[t.DoNotClip=3]="DoNotClip"}(j||(j={})),function(t){t.NoConstraint="NoConstraint",t.WithMarkers="WithMarkers",t.WithFullGap="WithFullGap",t.WithHalfGap="WithHalfGap",t.Custom="Custom"}(Z||(Z={})),function(t){t.Fixed="Fixed",t.Random="Random",t.RandomFixedQuantity="RandomFixedQuantity"}(K||(K={})),function(t){t.LineMiddle="LineMiddle",t.LineBeginning="LineBeginning",t.LineEnd="LineEnd",t.SegmentMidpoint="SegmentMidpoint"}(q||(q={})),function(t){t.OnPolygon="OnPolygon",t.CenterOfMass="CenterOfMass",t.BoundingBoxCenter="BoundingBoxCenter"}(X||(X={})),function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"}(J||(J={})),function(t){t[t.MarkerCenter=0]="MarkerCenter",t[t.MarkerBounds=1]="MarkerBounds"}(Q||(Q={})),function(t){t[t.None=0]="None",t[t.PropUniform=1]="PropUniform",t[t.PropNonuniform=2]="PropNonuniform",t[t.DifUniform=3]="DifUniform",t[t.DifNonuniform=4]="DifNonuniform"}(tt||(tt={})),function(t){t.Tube="Tube",t.Strip="Strip",t.Wall="Wall"}(et||(et={})),function(t){t[t.Random=0]="Random",t[t.Increasing=1]="Increasing",t[t.Decreasing=2]="Decreasing",t[t.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(rt||(rt={})),function(t){t[t.Relative=0]="Relative",t[t.Absolute=1]="Absolute"}(it||(it={})),function(t){t[t.Normal=0]="Normal",t[t.LowerCase=1]="LowerCase",t[t.Allcaps=2]="Allcaps"}(nt||(nt={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(st||(st={})),function(t){t.Draft="Draft",t.Picture="Picture",t.Text="Text"}(ot||(ot={})),function(t){t[t.Top=0]="Top",t[t.Center=1]="Center",t[t.Baseline=2]="Baseline",t[t.Bottom=3]="Bottom"}(at||(at={})),function(t){t[t.Right=0]="Right",t[t.Upright=1]="Upright"}(lt||(lt={})),function(t){t[t.Small=0]="Small",t[t.Medium=1]="Medium",t[t.Large=2]="Large"}(ut||(ut={})),function(t){t[t.Calm=0]="Calm",t[t.Rippled=1]="Rippled",t[t.Slight=2]="Slight",t[t.Moderate=3]="Moderate"}(ct||(ct={}))},92777:function(t,e,r){r.d(e,{A:function(){return P}});var i=r(53804),n=r(30905),s=r(21609),o=r(23502),a=r(77560),l=r(47332),u=r(65953),c=r(81392);let h=class extends n.oY{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"description",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,i._)([(0,o.MZ)()],h.prototype,"type",void 0),h=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableElement")],h);const p=h;var f,y=r(67888);r(58941),r(40633),r(13798);let _=f=class extends p{constructor(t){super(t),this.displayType="auto",this.type="attachment"}clone(){return new f({description:this.description,displayType:this.displayType,label:this.label})}};(0,i._)([(0,o.MZ)({type:["auto"],json:{write:!0}})],_.prototype,"displayType",void 0),(0,i._)([(0,o.MZ)({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],_.prototype,"type",void 0),_=f=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableAttachmentElement")],_);const d=_;var m;let g=m=class extends p{constructor(t){super(t),this.fieldName=null,this.type="field"}clone(){return new m({description:this.description,fieldName:this.fieldName,label:this.label})}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],g.prototype,"fieldName",void 0),(0,i._)([(0,o.MZ)({type:String,json:{read:!1,write:!0}})],g.prototype,"type",void 0),g=m=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableFieldElement")],g);const E=g;var A;let T=A=class extends p{constructor(t){super(t),this.relationshipId=null,this.type="relationship"}clone(){return new A({description:this.description,label:this.label,relationshipId:this.relationshipId})}};(0,i._)([(0,o.MZ)({type:Number,json:{write:!0}})],T.prototype,"relationshipId",void 0),(0,i._)([(0,o.MZ)({type:["relationship"],json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=A=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableRelationshipElement")],T);const R=T;function S(t){return{typesWithGroup:{base:p,key:"type",typeMap:{attachment:d,field:E,group:t,relationship:R}},typesWithoutGroup:{base:p,key:"type",typeMap:{attachment:d,field:E,relationship:R}}}}function I(t,e,r=!0){if(!t)return null;const i=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>i[t.type])).map((t=>i[t.type].fromJSON(t)))}function v(t,e,r=!0){if(!t)return null;const i=r?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>i[t.type])).map((t=>t.toJSON()))}function w(t,e,r=!0){return t?t.map((t=>(0,y.aq)(r?e.typesWithGroup:e.typesWithoutGroup,t))):null}var N;let b=N=class extends p{constructor(t){super(t),this.elements=null,this.type="group"}castElements(t){return w(t,O,!1)}readElements(t,e){return I(e.attributeTableElements,O,!1)}writeElements(t,e){e.attributeTableElements=v(t,O,!1)}clone(){return new N({description:this.description,elements:(0,s.o8)(this.elements),label:this.label})}};(0,i._)([(0,o.MZ)({json:{write:!0}})],b.prototype,"elements",void 0),(0,i._)([(0,a.w)("elements")],b.prototype,"castElements",null),(0,i._)([(0,l.w)("elements",["attributeTableElements"])],b.prototype,"readElements",null),(0,i._)([(0,c.K)("elements")],b.prototype,"writeElements",null),(0,i._)([(0,o.MZ)({type:String,json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=N=(0,i._)([(0,u.$)("esri.tables.elements.AttributeTableGroupElement")],b);const O=S(b);var L;const x=S(b);let D=L=class extends n.oY{constructor(t){super(t),this.elements=null,this.orderByFields=null}castElements(t){return w(t,x)}readElements(t,e){return I(e.attributeTableElements,x)}writeElements(t,e){e.attributeTableElements=v(t,x)}clone(){return new L({elements:(0,s.o8)(this.elements),orderByFields:this.orderByFields})}};(0,i._)([(0,o.MZ)({json:{write:!0}})],D.prototype,"elements",void 0),(0,i._)([(0,a.w)("elements")],D.prototype,"castElements",null),(0,i._)([(0,l.w)("elements",["attributeTableElements"])],D.prototype,"readElements",null),(0,i._)([(0,c.K)("elements")],D.prototype,"writeElements",null),(0,i._)([(0,o.MZ)({type:[Object],json:{write:!0}})],D.prototype,"orderByFields",void 0),D=L=(0,i._)([(0,u.$)("esri.tables.AttributeTableTemplate")],D);const P=D},7056:function(t,e,r){r.d(e,{GW:function(){return d},IU:function(){return A},Jo:function(){return o},MG:function(){return s},Wh:function(){return p},cP:function(){return I},os:function(){return c},p6:function(){return _},pJ:function(){return a},ru:function(){return R},s3:function(){return T},w4:function(){return S},wV:function(){return y},yM:function(){return v},z0:function(){return f}});var i=r(38441),n=r(72139);const s=Number.POSITIVE_INFINITY,o=Math.PI,a=2*o,l=128/o,u=256/360,c=o/180,h=1/Math.LN2;function p(t,e){return(t%=e)>=0?t:t+e}function f(t){return p(t*l,256)}function y(t){return p(t*u,256)}function _(t){return Math.log(t)*h}function d(t,e,r){return t*(1-r)+e*r}const m=8,g=14,E=16;function A(t){return m+Math.max((t-g)*E,0)}function T(t,e,r){let i,n,s,o=0;for(const a of r){i=a.length;for(let r=1;r<i;++r)n=a[r-1],s=a[r],n.y>e!=s.y>e&&((s.x-n.x)*(e-n.y)-(s.y-n.y)*(t-n.x)>0?o++:o--)}return 0!==o}function R(t,e,r,n){let s,o,a,l;const u=n*n;for(const n of r){const r=n.length;if(!(r<2)){s=n[0].x,o=n[0].y;for(let c=1;c<r;++c){if(a=n[c].x,l=n[c].y,(0,i.Ng)(t,e,s,o,a,l)<u)return!0;s=a,o=l}}}return!1}function S(t,e,r,i,n,s,o){const a=Math.max(i,Math.min(e,s))-e,l=Math.max(n,Math.min(r,o))-r;return a*a+l*l<=t*t}function I(t,e){if(0===e||Number.isNaN(e))return t;const r=[],i=new n.bR(0,0),s=new n.bR(0,0),o=new n.bR(0,0);for(let a=0;a<t.length;a++){const l=t[a],u=[];for(let t=0;t<l.length;t++){const r=l[t-1],a=l[t],c=l[t+1];0===t?i.setCoords(0,0):i.assignSub(a,r).normalize().rightPerpendicular(),t===l.length-1?s.setCoords(0,0):s.assignSub(c,a).normalize().rightPerpendicular(),o.assignAdd(i,s).normalize();const h=o.x*s.x+o.y*s.y;0!==h&&o.scale(1/h),u.push(n.bR.add(a,o.scale(e)))}r.push(u)}return r}function v(t,e,r,i){const s=new n.bR(t[0],t[1]);if(s.scale(i),"viewport"===e){const t=-r*(Math.PI/180),e=Math.cos(t),i=Math.sin(t);s.rotate(e,i)}return s}},38048:function(t,e,r){r.d(e,{A:function(){return i}}),r(58941);class i{constructor(t){this._array=[],this._stride=t}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(t,e){return 65535&t|e<<16}static i8888to32(t,e,r,i){return 255&t|(255&e)<<8|(255&r)<<16|i<<24}static i8816to32(t,e,r){return 255&t|(255&e)<<8|r<<16}}},42111:function(t,e,r){var i,n,s;r.d(e,{$q:function(){return s},NP:function(){return i},kh:function(){return n}}),function(t){t[t.FILL=1]="FILL",t[t.LINE=2]="LINE",t[t.SYMBOL=3]="SYMBOL",t[t.CIRCLE=4]="CIRCLE"}(i||(i={})),function(t){t[t.BACKGROUND=0]="BACKGROUND",t[t.FILL=1]="FILL",t[t.OUTLINE=2]="OUTLINE",t[t.LINE=3]="LINE",t[t.ICON=4]="ICON",t[t.CIRCLE=5]="CIRCLE",t[t.TEXT=6]="TEXT",t[t.TILEINFO=7]="TILEINFO"}(n||(n={})),function(t){t[t.PAINTER_CHANGED=0]="PAINTER_CHANGED",t[t.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",t[t.LAYER_CHANGED=2]="LAYER_CHANGED",t[t.LAYER_REMOVED=3]="LAYER_REMOVED",t[t.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(s||(s={}))},5367:function(t,e,r){r.d(e,{$u:function(){return y},Cq:function(){return c},Dc:function(){return i},I5:function(){return o},KI:function(){return l},Ms:function(){return u},O6:function(){return a},bv:function(){return n},kt:function(){return s},v9:function(){return h}});var i,n,s,o,a,l,u,c,h,p,f=r(33389);(p=i||(i={}))[p.BACKGROUND=0]="BACKGROUND",p[p.FILL=1]="FILL",p[p.LINE=2]="LINE",p[p.SYMBOL=3]="SYMBOL",p[p.CIRCLE=4]="CIRCLE",function(t){t[t.VISIBLE=0]="VISIBLE",t[t.NONE=1]="NONE"}(n||(n={})),function(t){t[t.POINT=0]="POINT",t[t.LINE=1]="LINE",t[t.LINE_CENTER=2]="LINE_CENTER"}(s||(s={})),function(t){t[t.MAP=0]="MAP",t[t.VIEWPORT=1]="VIEWPORT",t[t.AUTO=2]="AUTO"}(o||(o={})),function(t){t[t.AUTO=0]="AUTO",t[t.LEFT=1]="LEFT",t[t.CENTER=2]="CENTER",t[t.RIGHT=3]="RIGHT"}(a||(a={})),function(t){t[t.CENTER=0]="CENTER",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.TOP=3]="TOP",t[t.BOTTOM=4]="BOTTOM",t[t.TOP_LEFT=5]="TOP_LEFT",t[t.TOP_RIGHT=6]="TOP_RIGHT",t[t.BOTTOM_LEFT=7]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(l||(l={})),function(t){t[t.NONE=0]="NONE",t[t.UPPERCASE=1]="UPPERCASE",t[t.LOWERCASE=2]="LOWERCASE"}(u||(u={})),function(t){t[t.MAP=0]="MAP",t[t.VIEWPORT=1]="VIEWPORT"}(c||(c={})),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(h||(h={}));class y{}y.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE}},y.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE}},y.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:f.xR.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:f.JO.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},y.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:s.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:l.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:o.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:l.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:a.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:o.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:u.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[h.HORIZONTAL]}},y.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:n.VISIBLE}},y.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},y.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP}},y.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP},"line-width":{type:"number",minimum:0,default:1}},y.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP}},y.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},y.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:c.MAP}}},36583:function(t,e,r){r.d(e,{lf:function(){return xt},L:function(){return Ct},A4:function(){return Dt},aR:function(){return Ut},e4:function(){return Ot},tU:function(){return Pt},V1:function(){return Mt},uU:function(){return Gt}});var i,n,s=r(87416),o=r(42111),a=r(7056),l=r(38048);!function(t){t[t.R8_SIGNED=0]="R8_SIGNED",t[t.R8_UNSIGNED=1]="R8_UNSIGNED",t[t.R16_SIGNED=2]="R16_SIGNED",t[t.R16_UNSIGNED=3]="R16_UNSIGNED",t[t.R8G8_SIGNED=4]="R8G8_SIGNED",t[t.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",t[t.R16G16_SIGNED=6]="R16G16_SIGNED",t[t.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",t[t.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",t[t.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",t[t.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",t[t.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",t[t.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"}(i||(i={})),function(t){t[t.UNIFORM=0]="UNIFORM",t[t.DATA_DRIVEN=1]="DATA_DRIVEN",t[t.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",t[t.UNUSED=3]="UNUSED"}(n||(n={}));var u=r(85456),c=r(3817);class h{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layout||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layout||this._buildAttributesInfo(),this._layout}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,e,r,i,n){const s=this.getUniforms();for(const o of s){const{name:s,type:a,getValue:l}=o,u=l(r,e,i,n);if(null!==u)switch(a){case"float":t.setUniform1f(s,u);break;case"vec2":t.setUniform2fv(s,u);break;case"vec4":t.setUniform4fv(s,u)}}}encodeAttributes(t,e,r,n){const s=this.attributesInfo(),o=this.getEncodingInfos(),a=[];let l=0,u=0;for(const c of Object.keys(o)){const h=o[c],{type:p,precisionFactor:f,isLayout:y}=s[c],_=y?r.getLayoutProperty(c):r.getPaintProperty(c),d=_.interpolator?.getInterpolationRange(e);let m=0;for(const r of h){const{offset:s,bufferElementsToAdd:o}=r;if(o>0){for(let t=0;t<o;t++)a.push(0);l+=u,u=r.bufferElementsToAdd}const c=n??_.getValue(d?d[m]:e,t);switch(p){case i.R8_SIGNED:case i.R8_UNSIGNED:a[l]|=this._encodeByte(c*(f||1),8*s);break;case i.R16_SIGNED:case i.R16_UNSIGNED:a[l]|=this._encodeShort(c*(f||1),8*s);break;case i.R8G8_SIGNED:case i.R8G8_UNSIGNED:a[l]|=this._encodeByte(c*(f||1),8*s),a[l]|=this._encodeByte(c*(f||1),8*s+8);break;case i.R16G16_SIGNED:case i.R16G16_UNSIGNED:a[l]|=this._encodeShort(c*(f||1),8*s),a[l]|=this._encodeShort(c*(f||1),8*s+16);break;case i.R8G8B8A8_SIGNED:case i.R8G8B8A8_UNSIGNED:a[l]|=this._encodeByte(c*(f||1),8*s),a[l]|=this._encodeByte(c*(f||1),8*s+8),a[l]|=this._encodeByte(c*(f||1),8*s+16),a[l]|=this._encodeByte(c*(f||1),8*s+24);break;case i.R8G8B8A8_COLOR:a[l]=this._encodeColor(c);break;case i.R16G16B16A16_DASHARRAY:case i.R16G16B16A16_PATTERN:this._encodePattern(l,a,c);break;default:throw new Error("Unsupported encoding type")}m++}}return a}getAtributeState(t){let e=0;const r=3+2*t;return e|=this._bit(r),e|=this._bit(r+1)<<1,e}_buildAttributesInfo(){const t=[],e={},r={};let i=-1;const s=this.attributesInfo(),o=this.attributes();let a=-1;for(const l of o){a++;const o=this.getAtributeState(a);if(o===n.UNIFORM||o===n.UNUSED)continue;const u=s[l],c=[];e[l]=c;const p=u.type;for(let e=0;e<o;e++){const{dataType:e,bytesPerElement:n,count:s,normalized:o}=h._encodingInfo[p],a=n*s,l=`${e}-${!0===o}`;let u=r[l],f=0;if(!u||u.count+s>4)i++,u={dataIndex:i,count:0,offset:0},4!==s&&(r[l]=u),t.push({location:-1,name:"a_data_"+i,count:s,type:e,normalized:o}),f=Math.ceil(Math.max(a/4,1));else{const e=t[u.dataIndex];e.count+=s,f=Math.ceil(Math.max(e.count*n/4,1))-Math.ceil(Math.max(u.offset/4,1))}c.push({dataIndex:u.dataIndex,offset:u.offset,bufferElementsToAdd:f}),u.offset+=a,u.count+=s}}for(const e of t)switch(e.type){case u.pe.BYTE:case u.pe.UNSIGNED_BYTE:e.count=4;break;case u.pe.SHORT:case u.pe.UNSIGNED_SHORT:e.count+=e.count%2}this._buildVertexBufferLayout(t);let l=0;const c=this._layout.get("geometry");for(const t of c)this._locations.set(t.name,l++);const p=this._layout.get("opacity");if(p)for(const t of p)this._locations.set(t.name,l++);this._buildShaderInfo(t,e),this._propertyEncodingInfo=e}_buildVertexBufferLayout(t){const e=new Map,r=this.geometryInfo();let i=r[0].stride;if(0===t.length)e.set("geometry",r);else{const n=[];let s=i;for(const e of t)i+=p(e.type)*e.count;for(const t of r)n.push(new c._(t.name,t.count,t.type,t.offset,i,t.normalized));for(const e of t)n.push(new c._(e.name,e.count,e.type,s,i,e.normalized)),s+=p(e.type)*e.count;e.set("geometry",n)}const n=this.opacityInfo();n&&e.set("opacity",n),this._layout=e,this._stride=i}_buildShaderInfo(t,e){let r="\n",s="\n";const o=[];for(const e of t)r+=`attribute ${this._getType(e.count)} ${e.name};\n`;const a=this.attributes(),l=this.attributesInfo();let u=-1;for(const t of a){u++;const{name:a,type:c,precisionFactor:p,isLayout:y}=l[t],_=p&&1!==p?" * "+1/p:"",{bytesPerElement:d,count:m}=h._encodingInfo[c],g=t=>`a_data_${t.dataIndex}${f(m,t.offset,d)}`;switch(this.getAtributeState(u)){case n.UNIFORM:{const e=this._getType(m),n=`u_${a}`;o.push({name:n,type:e,getValue:(e,r,n,s)=>{const o=y?e.getLayoutValue(t,r):e.getPaintValue(t,r);if(c===i.R16G16B16A16_DASHARRAY){const t=e.getDashKey(o,e.getLayoutValue("line-cap",r)),i=s.getMosaicItemPosition(t,!1);if(null==i)return null;const{tl:n,br:a}=i;return[n[0],a[1],a[0],n[1]]}if(c===i.R16G16B16A16_PATTERN){const e=s.getMosaicItemPosition(o,!t.includes("line-"));if(null==e)return null;const{tl:r,br:i}=e;return[r[0],i[1],i[0],r[1]]}if(c===i.R8G8B8A8_COLOR){const t=o[3];return[t*o[0],t*o[1],t*o[2],t]}return o}}),r+=`uniform ${e} ${n};\n`,s+=`${e} ${a} = ${n};\n`}break;case n.DATA_DRIVEN:{const r=g(e[t][0]);s+=`${this._getType(m)} ${a} = ${r}${_};\n`}break;case n.INTERPOLATED_DATA_DRIVEN:{const i=`u_t_${a}`;o.push({name:i,type:"float",getValue:(e,r,i,n)=>(y?e.getLayoutProperty(t):e.getPaintProperty(t)).interpolator.interpolationUniformValue(i,r)}),r+=`uniform float ${i};\n`;const n=g(e[t][0]),l=g(e[t][1]);s+=`${this._getType(m)} ${a} = mix(${n}${_}, ${l}${_}, ${i});\n`}}}this._shaderHeader=r,this._shaderMain=s,this._uniforms=o}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const e=255*t[3];return l.A.i8888to32(t[0]*e,t[1]*e,t[2]*e,e)}_encodePattern(t,e,r){if(!r?.rect)return;const i=r.rect,n=r.width,s=r.height;e[t]=this._encodeShort(i.x+2,0),e[t]|=this._encodeShort(i.y+2+s,16),e[t+1]=this._encodeShort(i.x+2+n,0),e[t+1]|=this._encodeShort(i.y+2,16)}_encodeByte(t,e){return(255&t)<<e}_encodeShort(t,e){return(65535&t)<<e}}h._encodingInfo={[i.R8_SIGNED]:{dataType:u.pe.BYTE,bytesPerElement:1,count:1,normalized:!1},[i.R8_UNSIGNED]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[i.R16_SIGNED]:{dataType:u.pe.SHORT,bytesPerElement:2,count:1,normalized:!1},[i.R16_UNSIGNED]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[i.R8G8_SIGNED]:{dataType:u.pe.BYTE,bytesPerElement:1,count:2,normalized:!1},[i.R8G8_UNSIGNED]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[i.R16G16_SIGNED]:{dataType:u.pe.SHORT,bytesPerElement:2,count:2,normalized:!1},[i.R16G16_UNSIGNED]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[i.R8G8B8A8_SIGNED]:{dataType:u.pe.BYTE,bytesPerElement:1,count:4,normalized:!1},[i.R8G8B8A8_UNSIGNED]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[i.R8G8B8A8_COLOR]:{dataType:u.pe.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[i.R16G16B16A16_DASHARRAY]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[i.R16G16B16A16_PATTERN]:{dataType:u.pe.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const p=t=>{switch(t){case u.pe.FLOAT:case u.pe.INT:case u.pe.UNSIGNED_INT:return 4;case u.pe.SHORT:case u.pe.UNSIGNED_SHORT:case u.pe.HALF_FLOAT:return 2;case u.pe.BYTE:case u.pe.UNSIGNED_BYTE:return 1}},f=(t,e,r)=>{const i=e/r;if(1===t)switch(i){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===t)switch(i){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===t)switch(i){case 0:return".xyz";case 1:return".yzw"}return""};class y extends h{constructor(t){super(t)}geometryInfo(){return y.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return y.ATTRIBUTES}attributesInfo(){return y.ATTRIBUTES_INFO}}y.ATTRIBUTES=[],y.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.BYTE,0,2)],y.ATTRIBUTES_INFO={};class _ extends h{constructor(t){super(t)}geometryInfo(){return _.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return _.ATTRIBUTES}attributesInfo(){return _.ATTRIBUTES_INFO}}_.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],_.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,4)],_.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:i.R8_UNSIGNED},"circle-color":{name:"color",type:i.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:i.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:i.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:i.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:i.R8_UNSIGNED,precisionFactor:32}};class d extends h{constructor(t){super(t)}geometryInfo(){return d.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return d.ATTRIBUTES}attributesInfo(){return d.ATTRIBUTES_INFO}}d.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],d.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,4)],d.ATTRIBUTES_INFO={"fill-color":{name:"color",type:i.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:i.R16G16B16A16_PATTERN,isOptional:!0}};class m extends h{constructor(t,e){super(t),this._usefillColor=e}geometryInfo(){return m.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?m.ATTRIBUTES_FILL:m.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?m.ATTRIBUTES_INFO_FILL:m.ATTRIBUTES_INFO_OUTLINE}}m.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],m.ATTRIBUTES_FILL=["fill-color","fill-opacity"],m.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,8),new c._("a_offset",2,u.pe.BYTE,4,8),new c._("a_xnormal",2,u.pe.BYTE,6,8)],m.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:i.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100}},m.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:i.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100}};class g extends h{constructor(t){super(t)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}g.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],g.GEOMETRY_LAYOUT=[new c._("a_pos",2,u.pe.SHORT,0,16),new c._("a_extrude_offset",4,u.pe.BYTE,4,16),new c._("a_dir_normal",4,u.pe.BYTE,8,16),new c._("a_accumulatedDistance",2,u.pe.UNSIGNED_SHORT,12,16)],g.ATTRIBUTES_INFO={"line-width":{name:"width",type:i.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:i.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:i.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:i.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:i.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:i.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:i.R16G16B16A16_DASHARRAY,isOptional:!0}};const E=[new c._("a_pos",2,u.pe.SHORT,0,16),new c._("a_vertexOffset",2,u.pe.SHORT,4,16),new c._("a_texAngleRange",4,u.pe.UNSIGNED_BYTE,8,16),new c._("a_levelInfo",4,u.pe.UNSIGNED_BYTE,12,16)],A=[new c._("a_opacityInfo",1,u.pe.UNSIGNED_BYTE,0,1)];class T extends h{constructor(t){super(t)}geometryInfo(){return E}opacityInfo(){return A}attributes(){return T.ATTRIBUTES}attributesInfo(){return T.ATTRIBUTES_INFO}}T.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],T.ATTRIBUTES_INFO={"icon-color":{name:"color",type:i.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:i.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:i.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:i.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:i.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class R extends h{constructor(t){super(t)}geometryInfo(){return E}opacityInfo(){return A}attributes(){return R.ATTRIBUTES}attributesInfo(){return R.ATTRIBUTES_INFO}}R.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],R.ATTRIBUTES_INFO={"text-color":{name:"color",type:i.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:i.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:i.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:i.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:i.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:i.R8_UNSIGNED,isLayout:!0}};var S=r(52874),I=r(75505),v=r(72139),w=r(94738);const N={kind:"null"},b={kind:"number"},O={kind:"string"},L={kind:"boolean"},x={kind:"color"},D={kind:"object"},P={kind:"value"};function M(t,e){return{kind:"array",itemType:t,n:e}}const C=[N,b,O,L,x,D,M(P)];function U(t){if("array"===t.kind){const e=U(t.itemType);return"number"==typeof t.n?`array<${e}, ${t.n}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}function G(t){if(null===t)return N;if("string"==typeof t)return O;if("boolean"==typeof t)return L;if("number"==typeof t)return b;if(t instanceof S.A)return x;if(Array.isArray(t)){let e;for(const r of t){const t=G(r);if(e){if(e!==t){e=P;break}}else e=t}return M(e||P,t.length)}return"object"==typeof t?D:P}function B(t,e){if("array"===e.kind)return"array"===t.kind&&(0===t.n&&"value"===t.itemType.kind||B(t.itemType,e.itemType))&&("number"!=typeof e.n||e.n===t.n);if("value"===e.kind)for(const e of C)if(B(t,e))return!0;return e.kind===t.kind}function F(t){if(null===t)return"";const e=typeof t;return"string"===e?t:"number"===e||"boolean"===e?String(t):t instanceof S.A?t.toString():JSON.stringify(t)}class z{constructor(t){this._parent=t,this._vars={}}add(t,e){this._vars[t]=e}get(t){return this._vars[t]?this._vars[t]:this._parent?this._parent.get(t):null}}class k{constructor(){this.type=P}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new k}evaluate(t,e){return t?.id}}class H{constructor(){this.type=O}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new H}evaluate(t,e){if(!t)return null;switch(t.type){case v.dC.Point:return"Point";case v.dC.LineString:return"LineString";case v.dC.Polygon:return"Polygon";default:return null}}}class V{constructor(){this.type=D}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new V}evaluate(t,e){return t?.values}}class ${constructor(){this.type=b}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new $}evaluate(t,e){return e}}class Y{constructor(t,e,r){this._lhs=t,this._rhs=e,this._compare=r,this.type=L}static parse(t,e,r){if(3!==t.length&&4!==t.length)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(4===t.length)throw new Error(`"${t[0]}" collator not supported`);return new Y(Rt(t[1],e),Rt(t[2],e),r)}evaluate(t,e){return this._compare(this._lhs.evaluate(t,e),this._rhs.evaluate(t,e))}}class W{constructor(t){this._arg=t,this.type=L}static parse(t,e){if(2!==t.length)throw new Error('"!" expects 1 argument');return new W(Rt(t[1],e))}evaluate(t,e){return!this._arg.evaluate(t,e)}}class j{constructor(t){this._args=t,this.type=L}static parse(t,e){const r=[];for(let i=1;i<t.length;i++)r.push(Rt(t[i],e));return new j(r)}evaluate(t,e){for(const r of this._args)if(!r.evaluate(t,e))return!1;return!0}}class Z{constructor(t){this._args=t,this.type=L}static parse(t,e){const r=[];for(let i=1;i<t.length;i++)r.push(Rt(t[i],e));return new Z(r)}evaluate(t,e){for(const r of this._args)if(r.evaluate(t,e))return!0;return!1}}class K{constructor(t){this._args=t,this.type=L}static parse(t,e){const r=[];for(let i=1;i<t.length;i++)r.push(Rt(t[i],e));return new K(r)}evaluate(t,e){for(const r of this._args)if(r.evaluate(t,e))return!1;return!0}}class q{constructor(t,e,r){this.type=t,this._args=e,this._fallback=r}static parse(t,e,r){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let i;const n=[];for(let s=1;s<t.length-1;s+=2){const o=Rt(t[s],e),a=Rt(t[s+1],e,r);i||(i=a.type),n.push({condition:o,output:a})}const s=Rt(t[t.length-1],e,r);return i||(i=s.type),new q(i,n,s)}evaluate(t,e){for(const r of this._args)if(r.condition.evaluate(t,e))return r.output.evaluate(t,e);return this._fallback.evaluate(t,e)}}class X{constructor(t,e){this.type=t,this._args=e}static parse(t,e){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let r;const i=[];for(let n=1;n<t.length;n++){const s=Rt(t[n],e);r||(r=s.type),i.push(s)}return new X(r,i)}evaluate(t,e){for(const r of this._args){const i=r.evaluate(t,e);if(null!==i)return i}return null}}class J{constructor(t,e,r,i,n){this.type=t,this._input=e,this._labels=r,this._outputs=i,this._fallback=n}static parse(t,e){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let r;const i=Rt(t[1],e),n=[],s={};let o;for(let i=2;i<t.length-1;i+=2){let a=t[i];Array.isArray(a)||(a=[a]);for(const t of a){const e=typeof t;if("string"!==e&&"number"!==e)throw new Error('"match" requires string or number literal as labels');if(o){if(e!==o)throw new Error('"match" requires labels to have the same type')}else o=e;s[t]=n.length}const l=Rt(t[i+1],e);r||(r=l.type),n.push(l)}return new J(r,i,s,n,Rt(t[t.length-1],e))}evaluate(t,e){const r=this._input.evaluate(t,e);return(this._outputs[this._labels[r]]||this._fallback).evaluate(t,e)}}class Q{constructor(t,e,r,i,n){this._operator=t,this.type=e,this.interpolation=r,this.input=i,this._stops=n}static parse(t,e,r){const i=t[0];if(t.length<5)throw new Error(`"${i}" expects at least 4 arguments`);const n=t[1];if(!Array.isArray(n)||0===n.length)throw new Error(`"${n}" is not a valid interpolation`);switch(n[0]){case"linear":if(1!==n.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==n.length||"number"!=typeof n[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==n.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let t=1;t<5;t++){const e=n[t];if("number"!=typeof e||e<0||e>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${n[0]}"`)}if(t.length%2!=1)throw new Error(`"${i}" expects an even number of arguments`);const s=Rt(t[2],e,b);let o;"interpolate-hcl"===i||"interpolate-lab"===i?o=x:r&&"value"!==r.kind&&(o=r);const a=[];for(let r=3;r<t.length;r+=2){const n=t[r];if("number"!=typeof n)throw new Error(`"${i}" requires stop inputs as literal numbers`);if(a.length&&a[a.length-1][0]>=n)throw new Error(`"${i}" requires strictly ascending stop inputs`);const s=Rt(t[r+1],e,o);o||(o=s.type),a.push([n,s])}if(o&&o!==x&&o!==b&&("array"!==o.kind||o.itemType!==b))throw new Error(`"${i}" cannot interpolate type ${U(o)}`);return new Q(i,o,n,s,a)}evaluate(t,e){const r=this._stops;if(1===r.length)return r[0][1].evaluate(t,e);const i=this.input.evaluate(t,e);if(i<=r[0][0])return r[0][1].evaluate(t,e);if(i>=r[r.length-1][0])return r[r.length-1][1].evaluate(t,e);let n=0;for(;++n<r.length&&!(i<r[n][0]););const s=r[n-1][0],o=r[n][0],l=Q.interpolationRatio(this.interpolation,i,s,o),u=r[n-1][1].evaluate(t,e),c=r[n][1].evaluate(t,e);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(u)&&Array.isArray(c))return u.map(((t,e)=>(0,a.GW)(t,c[e],l)));if("color"===this.type.kind&&u instanceof S.A&&c instanceof S.A){const t=new S.A(u),e=new S.A(c);return new S.A([(0,a.GW)(t.r,e.r,l),(0,a.GW)(t.g,e.g,l),(0,a.GW)(t.b,e.b,l),(0,a.GW)(t.a,e.a,l)])}if("number"===this.type.kind&&"number"==typeof u&&"number"==typeof c)return(0,a.GW)(u,c,l);throw new Error(`"${this._operator}" cannot interpolate type ${U(this.type)}`)}if("interpolate-hcl"===this._operator){const t=(0,I.RH)(u),e=(0,I.RH)(c),r=e.h-t.h,i=(0,I.$)({h:t.h+l*(r>180||r<-180?r-360*Math.round(r/360):r),c:(0,a.GW)(t.c,e.c,l),l:(0,a.GW)(t.l,e.l,l)});return new S.A({a:(0,a.GW)(u.a,c.a,l),...i})}if("interpolate-lab"===this._operator){const t=(0,I.ZD)(u),e=(0,I.ZD)(c),r=(0,I.$)({l:(0,a.GW)(t.l,e.l,l),a:(0,a.GW)(t.a,e.a,l),b:(0,a.GW)(t.b,e.b,l)});return new S.A({a:(0,a.GW)(u.a,c.a,l),...r})}throw new Error(`Unexpected operator "${this._operator}"`)}interpolationUniformValue(t,e){const r=this._stops;if(1===r.length)return 0;if(t>=r[r.length-1][0])return 0;let i=0;for(;++i<r.length&&!(t<r[i][0]););const n=r[i-1][0],s=r[i][0];return Q.interpolationRatio(this.interpolation,e,n,s)}getInterpolationRange(t){const e=this._stops;if(1===e.length){const t=e[0][0];return[t,t]}const r=e[e.length-1][0];if(t>=r)return[r,r];let i=0;for(;++i<e.length&&!(t<e[i][0]););return[e[i-1][0],e[i][0]]}static interpolationRatio(t,e,r,i){let n=0;return"linear"===t[0]?n=Q._exponentialInterpolationRatio(e,1,r,i):"exponential"===t[0]?n=Q._exponentialInterpolationRatio(e,t[1],r,i):"cubic-bezier"===t[0]&&(n=(0,w.gb)(t[1],t[2],t[3],t[4])(Q._exponentialInterpolationRatio(e,1,r,i),1e-5)),n<0?n=0:n>1&&(n=1),n}static _exponentialInterpolationRatio(t,e,r,i){const n=i-r;if(0===n)return 0;const s=t-r;return 1===e?s/n:(e**s-1)/(e**n-1)}}class tt{constructor(t,e,r){this.type=t,this._input=e,this._stops=r}static parse(t,e){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const r=Rt(t[1],e,b);let i;const n=[];n.push([-1/0,Rt(t[2],e)]);for(let r=3;r<t.length;r+=2){const s=t[r];if("number"!=typeof s)throw new Error('"step" requires stop inputs as literal numbers');if(n.length&&n[n.length-1][0]>=s)throw new Error('"step" requires strictly ascending stop inputs');const o=Rt(t[r+1],e);i||(i=o.type),n.push([s,o])}return new tt(i,r,n)}evaluate(t,e){const r=this._stops;if(1===r.length)return r[0][1].evaluate(t,e);const i=this._input.evaluate(t,e);let n=0;for(;++n<r.length&&!(i<r[n][0]););return this._stops[n-1][1].evaluate(t,e)}}class et{constructor(t,e){this.type=t,this._output=e}static parse(t,e,r){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const i=new z(e);for(let r=1;r<t.length-1;r+=2){const n=t[r];if("string"!=typeof n)throw new Error(`"let" requires a string to define variable names - found ${n}`);i.add(n,Rt(t[r+1],e))}const n=Rt(t[t.length-1],i,r);return new et(n.type,n)}evaluate(t,e){return this._output.evaluate(t,e)}}class rt{constructor(t,e){this.type=t,this.output=e}static parse(t,e,r){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');const i=e.get(t[1]);if(!i)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new rt(r||P,i)}evaluate(t,e){return this.output.evaluate(t,e)}}class it{constructor(t,e,r){this.type=t,this._index=e,this._array=r}static parse(t,e){if(3!==t.length)throw new Error('"at" expects 2 arguments');const r=Rt(t[1],e,b),i=Rt(t[2],e);return new it(i.type.itemType,r,i)}evaluate(t,e){const r=this._index.evaluate(t,e),i=this._array.evaluate(t,e);if(r<0||r>=i.length)throw new Error('"at" index out of bounds');if(r!==Math.floor(r))throw new Error('"at" index must be an integer');return i[r]}}class nt{constructor(t,e){this._key=t,this._obj=e,this.type=P}static parse(t,e){let r,i;switch(t.length){case 2:return r=Rt(t[1],e),new nt(r);case 3:return r=Rt(t[1],e),i=Rt(t[2],e),new nt(r,i);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,e){const r=this._key.evaluate(t,e);return this._obj?this._obj.evaluate(t,e)[r]:t?.values[r]}}class st{constructor(t,e){this._key=t,this._obj=e,this.type=L}static parse(t,e){let r,i;switch(t.length){case 2:return r=Rt(t[1],e),new st(r);case 3:return r=Rt(t[1],e),i=Rt(t[2],e),new st(r,i);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,e){const r=this._key.evaluate(t,e);return this._obj?r in this._obj.evaluate(t,e):!!t?.values[r]}}class ot{constructor(t,e){this._key=t,this._vals=e,this.type=L}static parse(t,e){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new ot(Rt(t[1],e),Rt(t[2],e))}evaluate(t,e){const r=this._key.evaluate(t,e);return this._vals.evaluate(t,e).includes(r)}}class at{constructor(t,e,r){this._item=t,this._array=e,this._from=r,this.type=b}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const r=Rt(t[1],e),i=Rt(t[2],e);if(4===t.length){const n=Rt(t[3],e,b);return new at(r,i,n)}return new at(r,i)}evaluate(t,e){const r=this._item.evaluate(t,e),i=this._array.evaluate(t,e);if(this._from){const n=this._from.evaluate(t,e);if(n!==Math.floor(n))throw new Error('"index-of" index must be an integer');return i.indexOf(r,n)}return i.indexOf(r)}}class lt{constructor(t){this._arg=t,this.type=b}static parse(t,e){if(2!==t.length)throw new Error('"length" expects 2 arguments');const r=Rt(t[1],e);return new lt(r)}evaluate(t,e){const r=this._arg.evaluate(t,e);if("string"==typeof r)return r.length;if(Array.isArray(r))return r.length;throw new Error('"length" expects string or array')}}class ut{constructor(t,e,r,i){this.type=t,this._array=e,this._from=r,this._to=i}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const r=Rt(t[1],e),i=Rt(t[2],e,b);if(i.type!==b)throw new Error('"slice" index must return a number');if(4===t.length){const n=Rt(t[3],e,b);if(n.type!==b)throw new Error('"slice" index must return a number');return new ut(r.type,r,i,n)}return new ut(r.type,r,i)}evaluate(t,e){const r=this._array.evaluate(t,e);if(!Array.isArray(r)&&"string"!=typeof r)throw new Error('"slice" input must be an array or a string');const i=this._from.evaluate(t,e);if(i<0||i>=r.length)throw new Error('"slice" index out of bounds');if(i!==Math.floor(i))throw new Error('"slice" index must be an integer');if(this._to){const n=this._to.evaluate(t,e);if(n<0||n>=r.length)throw new Error('"slice" index out of bounds');if(n!==Math.floor(n))throw new Error('"slice" index must be an integer');return r.slice(i,n)}return r.slice(i)}}class ct{constructor(){this.type=L}static parse(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new ct}evaluate(t,e){return void 0!==t?.id}}class ht{constructor(t,e){this._args=t,this._calculate=e,this.type=b}static parse(t,e,r){const i=t.slice(1).map((t=>Rt(t,e)));return new ht(i,r)}evaluate(t,e){let r;return this._args&&(r=this._args.map((r=>r.evaluate(t,e)))),this._calculate(r)}}class pt{constructor(t,e){this._args=t,this._calculate=e,this.type=b}static parse(t,e){const r=t.slice(1).map((t=>Rt(t,e)));return new pt(r,pt.ops[t[0]])}evaluate(t,e){let r;return this._args&&(r=this._args.map((r=>r.evaluate(t,e)))),this._calculate(r)}}pt.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])};class ft{constructor(t){this._args=t,this.type=O}static parse(t,e){return new ft(t.slice(1).map((t=>Rt(t,e))))}evaluate(t,e){return this._args.map((r=>r.evaluate(t,e))).join("")}}class yt{constructor(t,e){this._arg=t,this._calculate=e,this.type=O}static parse(t,e){if(2!==t.length)throw new Error(`${t[0]} expects 1 argument`);const r=Rt(t[1],e);return new yt(r,yt.ops[t[0]])}evaluate(t,e){return this._calculate(this._arg.evaluate(t,e))}}yt.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()};class _t{constructor(t){this._args=t,this.type=x}static parse(t,e){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');const r=t.slice(1).map((t=>Rt(t,e)));return new _t(r)}evaluate(t,e){const r=this._validate(this._args[0].evaluate(t,e)),i=this._validate(this._args[1].evaluate(t,e)),n=this._validate(this._args[2].evaluate(t,e));return new S.A({r:r,g:i,b:n})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class dt{constructor(t){this._args=t,this.type=x}static parse(t,e){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');const r=t.slice(1).map((t=>Rt(t,e)));return new dt(r)}evaluate(t,e){const r=this._validate(this._args[0].evaluate(t,e)),i=this._validate(this._args[1].evaluate(t,e)),n=this._validate(this._args[2].evaluate(t,e)),s=this._validateAlpha(this._args[3].evaluate(t,e));return new S.A({r:r,g:i,b:n,a:s})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if("number"!=typeof t||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class mt{constructor(t){this._color=t,this.type=M(b,4)}static parse(t,e){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');const r=Rt(t[1],e);return new mt(r)}evaluate(t,e){return new S.A(this._color.evaluate(t,e)).toRgba()}}class gt{constructor(t,e){this.type=t,this._args=e}static parse(t,e){const r=t[0];if(t.length<2)throw new Error(`${r} expects at least one argument`);let i,n=1;if("array"===r){if(t.length>2){switch(t[1]){case"string":i=O;break;case"number":i=b;break;case"boolean":i=L;break;default:throw new Error('"array" type argument must be string, number or boolean')}n++}else i=P;let e;if(t.length>3){if(e=t[2],null!==e&&("number"!=typeof e||e<0||e!==Math.floor(e)))throw new Error('"array" length argument must be a positive integer literal');n++}i=M(i,e)}else switch(r){case"string":i=O;break;case"number":i=b;break;case"boolean":i=L;break;case"object":i=D}const s=[];for(;n<t.length;n++){const r=Rt(t[n],e);s.push(r)}return new gt(i,s)}evaluate(t,e){let r;for(const i of this._args){const n=i.evaluate(t,e);if(r=G(n),B(r,this.type))return n}throw new Error(`Expected ${U(this.type)} but got ${U(r)}`)}}class Et{constructor(t,e){this.type=t,this._args=e}static parse(t,e){const r=t[0],i=Et.types[r];if(i===L||i===O){if(2!==t.length)throw new Error(`${r} expects one argument`)}else if(t.length<2)throw new Error(`${r} expects at least one argument`);const n=[];for(let r=1;r<t.length;r++){const i=Rt(t[r],e);n.push(i)}return new Et(i,n)}evaluate(t,e){if(this.type===L)return Boolean(this._args[0].evaluate(t,e));if(this.type===O)return F(this._args[0].evaluate(t,e));if(this.type===b){for(const r of this._args){const i=Number(r.evaluate(t,e));if(!isNaN(i))return i}return null}if(this.type===x){for(const r of this._args)try{const i=Et.toColor(r.evaluate(t,e));if(i instanceof S.A)return i}catch{}return null}}static toBoolean(t){return Boolean(t)}static toString(t){return F(t)}static toNumber(t){const e=Number(t);if(isNaN(e))throw new Error(`"${t}" is not a number`);return e}static toColor(t){if(t instanceof S.A)return t;if("string"==typeof t){const e=S.A.fromString(t);if(e)return e;throw new Error(`"${t}" is not a color`)}if(Array.isArray(t))return S.A.fromArray(t);throw new Error(`"${t}" is not a color`)}}Et.types={"to-boolean":L,"to-color":x,"to-number":b,"to-string":O};class At{constructor(t){this._val=t,this.type=G(t)}static parse(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new At(t[1])}evaluate(t,e){return this._val}}class Tt{constructor(t){this._arg=t,this.type=O}static parse(t,e){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new Tt(Rt(t[1],e))}evaluate(t,e){return U(G(this._arg.evaluate(t,e)))}}function Rt(t,e,r){const i=typeof t;if("string"===i||"boolean"===i||"number"===i||null===t){if(r)switch(r.kind){case"string":"string"!==i&&(t=Et.toString(t));break;case"number":"number"!==i&&(t=Et.toNumber(t));break;case"color":t=Et.toColor(t)}t=["literal",t]}if(!Array.isArray(t)||0===t.length)throw new Error("Expression must be a non empty array");const n=t[0];if("string"!=typeof n)throw new Error("First element of expression must be a string");const s=St[n];if(void 0===s)throw new Error(`Invalid expression operator "${n}"`);if(!s)throw new Error(`Unimplemented expression operator "${n}"`);return s.parse(t,e,r)}const St={array:gt,boolean:gt,collator:null,format:null,image:null,literal:At,number:gt,"number-format":null,object:gt,string:gt,"to-boolean":Et,"to-color":Et,"to-number":Et,"to-string":Et,typeof:Tt,accumulated:null,"feature-state":null,"geometry-type":H,id:k,"line-progress":null,properties:V,at:it,get:nt,has:st,in:ot,"index-of":at,length:lt,slice:ut,"!":W,"!=":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t!==e))}},"<":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t<e))}},"<=":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t<=e))}},"==":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t===e))}},">":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t>e))}},">=":class extends Y{static parse(t,e){return Y.parse(t,e,((t,e)=>t>=e))}},all:j,any:Z,case:q,coalesce:X,match:J,within:null,interpolate:Q,"interpolate-hcl":Q,"interpolate-lab":Q,step:tt,let:et,var:rt,concat:ft,downcase:yt,"is-supported-script":null,"resolved-locale":null,upcase:yt,rgb:_t,rgba:dt,"to-rgba":mt,"-":class extends ht{static parse(t,e){switch(t.length){case 2:return ht.parse(t,e,(t=>-t[0]));case 3:return ht.parse(t,e,(t=>t[0]-t[1]));default:throw new Error('"-" expects 1 or 2 arguments')}}},"*":class extends ht{static parse(t,e){return ht.parse(t,e,(t=>{let e=1;for(const r of t)e*=r;return e}))}},"/":class extends ht{static parse(t,e){if(3===t.length)return ht.parse(t,e,(t=>t[0]/t[1]));throw new Error('"/" expects 2 arguments')}},"%":class extends ht{static parse(t,e){if(3===t.length)return ht.parse(t,e,(t=>t[0]%t[1]));throw new Error('"%" expects 2 arguments')}},"^":class extends ht{static parse(t,e){if(3===t.length)return ht.parse(t,e,(t=>t[0]**t[1]));throw new Error('"^" expects 1 or 2 arguments')}},"+":class extends ht{static parse(t,e){return ht.parse(t,e,(t=>{let e=0;for(const r of t)e+=r;return e}))}},abs:pt,acos:pt,asin:pt,atan:pt,ceil:pt,cos:pt,e:pt,floor:pt,ln:pt,ln2:pt,log10:pt,log2:pt,max:pt,min:pt,pi:pt,round:pt,sin:pt,sqrt:pt,tan:pt,zoom:$,"heatmap-density":null,"has-id":ct,none:K};class It{constructor(t){this._expression=t}filter(t,e){if(!this._expression)return!0;try{return this._expression.evaluate(t,e)}catch(t){return console.log(t.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const e=Rt(t,null,L);return new It(e)}catch(t){return console.log(t.message),null}}static isLegacyFilter(t){if(!Array.isArray(t))return!0;if(0===t.length)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===t.length&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"in":return t.length>=3&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let e=1;e<t.length;e++)if(this.isLegacyFilter(t[e]))return!0;return!1;case"has":return 2===t.length&&("$id"===t[1]||"$type"===t[1]);default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;const e=t[0];if(1===t.length)return"any"!==e;switch(e){case"==":return It.convertComparison("==",t[1],t[2]);case"!=":return It.negate(It.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return It.convertComparison(e,t[1],t[2]);case"in":return It.convertIn(t[1],t.slice(2));case"!in":return It.negate(It.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return It.convertCombining(e,t.slice(1));case"has":return It.convertHas(t[1]);case"!has":return It.negate(It.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,e,r){switch(e){case"$type":return[t,["geometry-type"],r];case"$id":return[t,["id"],r];default:return[t,["get",e],r]}}static convertIn(t,e){switch(t){case"$type":return["in",["geometry-type"],["literal",e]];case"$id":return["in",["id"],["literal",e]];default:return["in",["get",t],["literal",e]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,e){return[t].concat(e.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}var vt=r(5367);class wt{constructor(t,e){let r;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":r=!0;break;case"array":r="number"===t.value;break;default:r=!1}if(null==e&&(e=t.default),Array.isArray(e)&&e.length>0&&St[e[0]]){const r={number:b,color:x,string:O,boolean:L,enum:O};try{const i=Rt(e,null,"array"===t.type?M(r[t.value]||P,t.length):r[t.type]);this.getValue=this._buildExpression(i,t),this.isDataDriven=!0,i instanceof Q&&i.input instanceof $&&(this.interpolator=i)}catch(e){console.log(e.message),this.getValue=this._buildSimple(t.default)}return}r&&"interval"===e.type&&(r=!1);const i=e?.stops&&e.stops.length>0;if(i)for(const r of e.stops)r[1]=this._validate(r[1],t);if(this.isDataDriven=!!e&&!!e.property,this.isDataDriven)if(void 0!==e.default&&(e.default=this._validate(e.default,t)),i)switch(e.type){case"identity":this.getValue=this._buildIdentity(e,t);break;case"categorical":this.getValue=this._buildCategorical(e,t);break;default:this.getValue=r?this._buildInterpolate(e,t):this._buildInterval(e,t)}else this.getValue=this._buildIdentity(e,t);else i?this.getValue=r?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,t),this.getValue=this._buildSimple(e))}_validate(t,e){if("number"===e.type){if(null!=e.minimum&&t<e.minimum)return e.minimum;if(null!=e.maximum&&t>e.maximum)return e.maximum}else"color"===e.type?t=wt._parseColor(t):"enum"===e.type?"string"==typeof t&&(t=e.values.indexOf(t)):"array"===e.type&&"enum"===e.value?t=t.map((t=>"string"==typeof t?e.values.indexOf(t):t)):"string"===e.type&&(t=F(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,e){return(r,i)=>{try{const n=t.evaluate(i,r);return void 0===n?e.default:this._validate(n,e)}catch(t){return console.log(t.message),e.default}}}_buildIdentity(t,e){return(r,i)=>{let n;return i&&(n=i.values[t.property]),void 0!==n&&(n=this._validate(n,e)),null!=n?n:void 0!==t.default?t.default:e.default}}_buildCategorical(t,e){return(r,i)=>{let n;return i&&(n=i.values[t.property]),n=this._categorical(n,t.stops),void 0!==n?n:void 0!==t.default?t.default:e.default}}_buildInterval(t,e){return(r,i)=>{let n;return i&&(n=i.values[t.property]),"number"==typeof n?this._interval(n,t.stops):void 0!==t.default?t.default:e.default}}_buildInterpolate(t,e){return(r,i)=>{let n;return i&&(n=i.values[t.property]),"number"==typeof n?this._interpolate(n,t.stops,t.base||1):void 0!==t.default?t.default:e.default}}_buildZoomInterpolate(t){return e=>this._interpolate(e,t.stops,t.base||1)}_buildZoomInterval(t){return e=>this._interval(e,t.stops)}_categorical(t,e){const r=e.length;for(let i=0;i<r;i++)if(e[i][0]===t)return e[i][1]}_interval(t,e){const r=e.length;let i=0;for(let n=0;n<r&&e[n][0]<=t;n++)i=n;return e[i][1]}_interpolate(t,e,r){let i,n;const s=e.length;for(let r=0;r<s;r++){const s=e[r];if(!(s[0]<=t)){n=s;break}i=s}if(i&&n){const e=n[0]-i[0],s=t-i[0],o=1===r?s/e:(r**s-1)/(r**e-1);if(Array.isArray(i[1])){const t=i[1],e=n[1],r=[];for(let i=0;i<t.length;i++)r.push((0,a.GW)(t[i],e[i],o));return r}return(0,a.GW)(i[1],n[1],o)}return i?i[1]:n?n[1]:void 0}static _isEmpty(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:("string"==typeof t&&(t=new S.A(t)),t instanceof S.A&&!this._isEmpty(t)?S.A.toUnitRGBA(t):void 0)}}var Nt,bt=r(39686);!function(t){t[t.BUTT=0]="BUTT",t[t.ROUND=1]="ROUND",t[t.SQUARE=2]="SQUARE",t[t.UNKNOWN=4]="UNKNOWN"}(Nt||(Nt={}));class Ot{constructor(t,e,r,i,n,s){this.layer=t,this.feature=e,this.bounds=r,this.normalizationRatio=i,this.normalizationOffsetX=n,this.normalizationOffsetY=s}}class Lt{constructor(t,e,r,i){switch(this.type=t,this.typeName=e.type,this.id=e.id,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.layout=e.layout,this.paint=e.paint,this.z=r,this.uid=i,t){case vt.Dc.BACKGROUND:this._layoutDefinition=vt.$u.backgroundLayoutDefinition,this._paintDefinition=vt.$u.backgroundPaintDefinition;break;case vt.Dc.FILL:this._layoutDefinition=vt.$u.fillLayoutDefinition,this._paintDefinition=vt.$u.fillPaintDefinition;break;case vt.Dc.LINE:this._layoutDefinition=vt.$u.lineLayoutDefinition,this._paintDefinition=vt.$u.linePaintDefinition;break;case vt.Dc.SYMBOL:this._layoutDefinition=vt.$u.symbolLayoutDefinition,this._paintDefinition=vt.$u.symbolPaintDefinition;break;case vt.Dc.CIRCLE:this._layoutDefinition=vt.$u.circleLayoutDefinition,this._paintDefinition=vt.$u.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=It.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,e,r){let i;const n=this._layoutProperties[t];return n&&(i=n.getValue(e,r)),void 0===i&&(i=this._layoutDefinition[t].default),i}getPaintValue(t,e,r){let i;const n=this._paintProperties[t];return n&&(i=n.getValue(e,r)),void 0===i&&(i=this._paintDefinition[t].default),i}isPainterDataDriven(){const t=this._paintProperties;if(t)for(const e in t)if(t[e].isDataDriven)return!0;return!1}isIntersectingFeature(t,e,r,i,n,s,o){return!1}getFeatureInflatedBounds(t,e,r,i){return null}_parseLayout(t){const e={};for(const r in t){const i=this._layoutDefinition[r];i&&(e[r]=new wt(i,t[r]))}return e}_parsePaint(t){const e={};for(const r in t){const i=this._paintDefinition[r];i&&(e[r]=new wt(i,t[r]))}return e}computeAttributesKey(t,e,r,i){let n=0,s=0;for(const t of e){let e=3;if(!t||t!==i){const i=r[t],{isLayout:n,isOptional:s}=i,o=n?this.getLayoutProperty(t):this.getPaintProperty(t);e=o?.interpolator?2:o?.isDataDriven?1:s&&!o?3:0}s|=e<<n,n+=2}return s<<3|t}}class xt extends Lt{constructor(t,e,r,i){super(t,e,r,i),this.backgroundMaterial=new y(this.computeAttributesKey(o.kh.BACKGROUND,y.ATTRIBUTES,y.ATTRIBUTES_INFO))}}class Dt extends Lt{constructor(t,e,r,i){super(t,e,r,i);const n=this.getPaintProperty("fill-color"),s=this.getPaintProperty("fill-opacity"),a=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=n?.isDataDriven,this.hasDataDrivenOpacity=s?.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||a?.isDataDriven;const l=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!l,this.hasDataDrivenOutlineColor=l?.isDataDriven,this.hasDataDrivenOutline=l?l.isDataDriven:!!n&&n.isDataDriven,this.hasDataDrivenOutline=(l?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new d(this.computeAttributesKey(o.kh.FILL,d.ATTRIBUTES,d.ATTRIBUTES_INFO)),this.outlineMaterial=new m(this.computeAttributesKey(o.kh.OUTLINE,this.outlineUsesFillColor?m.ATTRIBUTES_FILL:m.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?m.ATTRIBUTES_INFO_FILL:m.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}getFeatureInflatedBounds(t,e,r,i){const n=Bt(t);if(!n)return null;const s=this.getPaintValue("fill-translate",e,t),o=i*Math.max(s[0],s[1]);return n[0]-=o,n[2]-=o,n[1]+=o,n[3]+=o,n}isIntersectingFeature(t,e,r,i,n,s,o){const l=i.getGeometry();if(!l)return!1;const u=8/o.normalizationRatio;t=t/o.normalizationRatio+o.normalizationOffsetX,e=e/o.normalizationRatio+o.normalizationOffsetY;const c=(0,a.yM)(this.getPaintValue("fill-translate",n,i),this.getPaintValue("fill-translate-anchor",n,i),s,8);return t-=u*c.x,e-=u*c.y,!!(0,a.s3)(t,e,l)||(0,a.ru)(t,e,l,u*r)}}class Pt extends Lt{constructor(t,e,r,i){super(t,e,r,i);const n=this.getPaintProperty("line-pattern");if(this.lineMaterial=new g(this.computeAttributesKey(o.kh.LINE,g.ATTRIBUTES,g.ATTRIBUTES_INFO,n?"line-dasharray":"")),this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven,this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const t=this.getPaintProperty("line-width");if(!t||"number"==typeof t&&.5*t<bt.Gh){const t=this.getPaintProperty("line-offset");(!t||"number"==typeof t&&0===t)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,e){let r;switch(e){case Nt.BUTT:r="Butt";break;case Nt.ROUND:r="Round";break;case Nt.SQUARE:r="Square";break;default:r="Butt"}return`dasharray-[${t.toString()}]-${r}`}getFeatureInflatedBounds(t,e,r,i){const n=Bt(t);if(!n)return null;const s=this.getPaintValue("line-translate",e,t),o=i*Math.max(s[0],s[1]);n[0]-=o,n[2]-=o,n[1]+=o,n[3]+=o;const a=i*Math.abs(this.getPaintValue("line-offset",e,t)||0),l=i*(this.getPaintValue("line-width",e,t)/2);return n[0]-=a+l,n[1]-=a+l,n[2]+=a+l,n[3]+=a+l,n}isIntersectingFeature(t,e,r,i,n,s,o){let l=i.getGeometry();if(!l)return!1;const u=8/o.normalizationRatio;t=t/o.normalizationRatio+o.normalizationOffsetX,e=e/o.normalizationRatio+o.normalizationOffsetY;const c=(0,a.yM)(this.getPaintValue("line-translate",n,i),this.getPaintValue("line-translate-anchor",n,i),s,8);t-=u*c.x,e-=u*c.y;const h=u*this.getPaintValue("line-offset",n,i)||0;0!==h&&(l=(0,a.cP)(l,-h));const p=this.getPaintValue("line-width",n,i);return(0,a.ru)(t,e,l,u*(r+p/2))}}class Mt extends Lt{constructor(t,e,r,i){super(t,e,r,i),this.iconMaterial=new T(this.computeAttributesKey(o.kh.ICON,T.ATTRIBUTES,T.ATTRIBUTES_INFO)),this.textMaterial=new R(this.computeAttributesKey(o.kh.TEXT,R.ATTRIBUTES,R.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven,this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class Ct extends Lt{constructor(t,e,r,i){super(t,e,r,i),this.circleMaterial=new _(this.computeAttributesKey(o.kh.CIRCLE,_.ATTRIBUTES,_.ATTRIBUTES_INFO))}getFeatureInflatedBounds(t,e,r,i){const n=Bt(t);if(!n)return null;const s=this.getPaintValue("circle-translate",e,t),o=Math.max(s[0],s[1]);n[0]-=o,n[2]-=o,n[1]+=o,n[3]+=o;const a=i*(8*(this.getPaintValue("circle-radius",e,t)+this.getPaintValue("circle-stroke-width",e,t))/2);return n[0]-=a,n[1]-=a,n[2]+=a,n[3]+=a,n}isIntersectingFeature(t,e,r,i,n,s,o){const l=i.getGeometry();if(!l)return!1;const u=8/o.normalizationRatio;t=t/o.normalizationRatio+o.normalizationOffsetX,e=e/o.normalizationRatio+o.normalizationOffsetY,r*=u;const c=(0,a.yM)(this.getPaintValue("circle-translate",n,i),this.getPaintValue("circle-translate-anchor",n,i),s,u),h=u*(this.getPaintValue("circle-radius",n,i)+this.getPaintValue("circle-stroke-width",n,i));let p,f;for(const i of l)if(i)for(const n of i)if(p=n.x+c.x,f=n.y+c.y,Math.sqrt((t-p)*(t-p)+(e-f)*(e-f))-r<=h)return!0;return!1}}class Ut{constructor(t,e,r){let i;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",e),this.keepUpright=t.getLayoutValue("icon-keep-upright",e),this.optional=t.getLayoutValue("icon-optional",e),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",e),this.rotationAlignment===vt.I5.AUTO&&(this.rotationAlignment=r?vt.I5.MAP:vt.I5.VIEWPORT),i=t.getLayoutProperty("icon-anchor"),i?.isDataDriven?this._anchorProp=i:this.anchor=t.getLayoutValue("icon-anchor",e),i=t.getLayoutProperty("icon-offset"),i?.isDataDriven?this._offsetProp=i:this.offset=t.getLayoutValue("icon-offset",e),i=t.getLayoutProperty("icon-padding"),i?.isDataDriven?this._paddingProp=i:this.padding=t.getLayoutValue("icon-padding",e),i=t.getLayoutProperty("icon-rotate"),i?.isDataDriven?this._rotateProp=i:this.rotate=t.getLayoutValue("icon-rotate",e),i=t.getLayoutProperty("icon-size"),i?.isDataDriven?this._sizeProp=i:this.size=t.getLayoutValue("icon-size",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e))}}class Gt{constructor(t,e,r){let i;this.allowOverlap=t.getLayoutValue("text-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",e),this.keepUpright=t.getLayoutValue("text-keep-upright",e),this.optional=t.getLayoutValue("text-optional",e),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",e),this.rotationAlignment===vt.I5.AUTO&&(this.rotationAlignment=r?vt.I5.MAP:vt.I5.VIEWPORT),i=t.getLayoutProperty("text-anchor"),i?.isDataDriven?this._anchorProp=i:this.anchor=t.getLayoutValue("text-anchor",e),i=t.getLayoutProperty("text-justify"),i?.isDataDriven?this._justifyProp=i:this.justify=t.getLayoutValue("text-justify",e),i=t.getLayoutProperty("text-letter-spacing"),i?.isDataDriven?this._letterSpacingProp=i:this.letterSpacing=t.getLayoutValue("text-letter-spacing",e),i=t.getLayoutProperty("text-line-height"),i?.isDataDriven?this._lineHeightProp=i:this.lineHeight=t.getLayoutValue("text-line-height",e),i=t.getLayoutProperty("text-max-angle"),i?.isDataDriven?this._maxAngleProp=i:this.maxAngle=t.getLayoutValue("text-max-angle",e),i=t.getLayoutProperty("text-max-width"),i?.isDataDriven?this._maxWidthProp=i:this.maxWidth=t.getLayoutValue("text-max-width",e),i=t.getLayoutProperty("text-offset"),i?.isDataDriven?this._offsetProp=i:this.offset=t.getLayoutValue("text-offset",e),i=t.getLayoutProperty("text-padding"),i?.isDataDriven?this._paddingProp=i:this.padding=t.getLayoutValue("text-padding",e),i=t.getLayoutProperty("text-rotate"),i?.isDataDriven?this._rotateProp=i:this.rotate=t.getLayoutValue("text-rotate",e),i=t.getLayoutProperty("text-size"),i?.isDataDriven?this._sizeProp=i:this.size=t.getLayoutValue("text-size",e),i=t.getLayoutProperty("text-writing-mode"),i?.isDataDriven?this._writingModeProp=i:this.writingMode=t.getLayoutValue("text-writing-mode",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,e)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,e)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,e)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,e)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,e))}}function Bt(t){const e=t?.getGeometry();if(null==e)return null;let r=1/0,i=1/0,n=-1/0,o=-1/0;for(const t of e)if(t)for(const e of t)r=Math.min(r,e.x),i=Math.min(i,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y);return(0,s.fA)(r,i,n,o)}},82790:function(t,e,r){r.d(e,{A:function(){return s}});var i=r(5367),n=r(36583);class s{constructor(t){if(this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.layers=t.layers.map(((t,e,r)=>this._create(t,e,r))).filter((t=>!!t)),this.layers)for(let t=0;t<this.layers.length;t++){const e=this.layers[t];this._layerByName[e.id]=e,this._uidToLayer.set(e.uid,e),e.type===i.Dc.BACKGROUND&&this.backgroundBucketIds.push(e.id)}this._identifyRefLayers()}isPainterDataDriven(t){const e=this._layerByName[t];return!!e&&e.isPainterDataDriven()}getStyleLayerId(t){return t>=this.layers.length?null:this.layers[t].id}getStyleLayerByUID(t){return this._uidToLayer.get(t)??null}getStyleLayerIndex(t){const e=this._layerByName[t];return e?this.layers.indexOf(e):-1}setStyleLayer(t,e){if(!t?.id)return;const r=this._style;null!=e&&e>=this.layers.length&&(e=this.layers.length-1);let i,n=!0;const o=this._layerByName[t.id];if(o){const a=this.layers.indexOf(o);e||(e=a),e===a?(n=!1,i=s._recreateLayer(t,o),this.layers[e]=i,r.layers[e]=t):(this.layers.splice(a,1),r.layers.splice(a,1),i=this._create(t,e,this.layers),this.layers.splice(e,0,i),r.layers.splice(e,0,t))}else i=this._create(t,e,this.layers),!e||e>=this.layers.length?(this.layers.push(i),r.layers.push(t)):(this.layers.splice(e,0,i),r.layers.splice(e,0,t));this._layerByName[t.id]=i,this._uidToLayer.set(i.uid,i),n&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(t){const e=this._layerByName[t];return e?{type:e.typeName,id:e.id,source:e.source,"source-layer":e.sourceLayer,minzoom:e.minzoom,maxzoom:e.maxzoom,filter:e.filter,layout:e.layout,paint:e.paint}:null}deleteStyleLayer(t){const e=this._layerByName[t];if(e){delete this._layerByName[t],this._uidToLayer.delete(e.uid);const r=this.layers.indexOf(e);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(t){return this._layerByName[t]}getLayoutProperties(t){const e=this._layerByName[t];return e?e.layout:null}getPaintProperties(t){const e=this._layerByName[t];return e?e.paint:null}setPaintProperties(t,e){const r=this._layerByName[t];if(!r)return;const i={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:e},n=s._recreateLayer(i,r),o=this.layers.indexOf(r);this.layers[o]=n,this._style.layers[o].paint=e,this._layerByName[r.id]=n,this._uidToLayer.set(r.uid,n)}setLayoutProperties(t,e){const r=this._layerByName[t];if(!r)return;const i={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:e,paint:r.paint},n=s._recreateLayer(i,r),o=this.layers.indexOf(r);this.layers[o]=n,this._style.layers[o].layout=e,this._layerByName[r.id]=n,this._uidToLayer.set(r.uid,n)}setStyleLayerVisibility(t,e){const r=this._layerByName[t];if(!r)return;const i=r.layout||{};i.visibility=e;const n={type:r.typeName,id:r.id,source:r.source,"source-layer":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},o=s._recreateLayer(n,r),a=this.layers.indexOf(r);this.layers[a]=o,this._style.layers[a].layout=i,this._layerByName[r.id]=o,this._uidToLayer.set(r.uid,o)}getStyleLayerVisibility(t){const e=this._layerByName[t];if(!e)return"none";const r=e.layout;return r?.visibility??"visible"}_recomputeZValues(){const t=this.layers,e=1/(t.length+1);for(let r=0;r<t.length;r++)t[r].z=1-(1+r)*e}_identifyRefLayers(){const t=[],e=[];let r=0;for(const n of this.layers){const s=n.layout;if(n.type===i.Dc.FILL){const e=n;let i=n.source+"|"+n.sourceLayer;i+="|"+(s?.visibility??""),i+="|"+n.minzoom,i+="|"+n.maxzoom,i+="|"+JSON.stringify(n.filter),(e.hasDataDrivenFill||e.hasDataDrivenOutline)&&(i+="|"+r),t.push({key:i,layer:n})}else if(n.type===i.Dc.LINE){const t=n,i=n.paint,o=null!=i&&(null!=i["line-pattern"]||null!=i["line-dasharray"]);let a=n.source+"|"+n.sourceLayer;a+="|"+(s?.visibility??""),a+="|"+n.minzoom,a+="|"+n.maxzoom,a+="|"+JSON.stringify(n.filter),a+="|"+(void 0!==s?s["line-cap"]:""),a+="|"+(void 0!==s?s["line-join"]:""),(t.hasDataDrivenLine||o)&&(a+="|"+r),e.push({key:a,layer:n})}++r}this._assignRefLayers(t),this._assignRefLayers(e)}_assignRefLayers(t){let e,r;t.sort(((t,e)=>t.key<e.key?-1:t.key>e.key?1:0));const n=t.length;for(let s=0;s<n;s++){const o=t[s];if(o.key===e)o.layer.refLayerId=r;else if(e=o.key,r=o.layer.id,o.layer.type===i.Dc.FILL){if(!o.layer.getPaintProperty("fill-outline-color"))for(let i=s+1;i<n;i++){const n=t[i];if(n.key!==e)break;if(n.layer.getPaintProperty("fill-outline-color")){t[s]=n,t[i]=o,r=n.layer.id;break}}}else if(o.layer.type===i.Dc.LINE){let i=o.layer;for(let a=s+1;a<n;a++){const n=t[a];if(n.key!==e)break;const l=n.layer;(i.canUseThinTessellation&&!l.canUseThinTessellation||!i.canUseThinTessellation&&(l.getPaintProperty("line-pattern")||l.getPaintProperty("line-dasharray")))&&(i=l,t[s]=n,t[a]=o,r=n.layer.id)}}}}_create(t,e,r){const s=1-(1+e)*(1/(r.length+1)),o=this._runningId++;switch(t.type){case"background":return new n.lf(i.Dc.BACKGROUND,t,s,o);case"fill":return new n.A4(i.Dc.FILL,t,s,o);case"line":return new n.tU(i.Dc.LINE,t,s,o);case"symbol":return new n.V1(i.Dc.SYMBOL,t,s,o);case"raster":return console.warn(`Unsupported vector tile raster layer ${t.id}`),null;case"circle":return new n.L(i.Dc.CIRCLE,t,s,o)}return null}static _recreateLayer(t,e){switch(t.type){case"background":return new n.lf(i.Dc.BACKGROUND,t,e.z,e.uid);case"fill":return new n.A4(i.Dc.FILL,t,e.z,e.uid);case"line":return new n.tU(i.Dc.LINE,t,e.z,e.uid);case"symbol":return new n.V1(i.Dc.SYMBOL,t,e.z,e.uid);case"raster":return console.warn(`Unsupported vector tile raster layer ${t.id}`),null;case"circle":return new n.L(i.Dc.CIRCLE,t,e.z,e.uid)}return null}}},39686:function(t,e,r){r.d(e,{$U:function(){return C},C2:function(){return u},CQ:function(){return n},CR:function(){return R},C_:function(){return G},Cp:function(){return S},DY:function(){return a},GR:function(){return Q},Gh:function(){return L},LY:function(){return b},O5:function(){return j},Pq:function(){return c},Qb:function(){return Y},Qs:function(){return et},Sr:function(){return E},TB:function(){return J},U5:function(){return N},V3:function(){return D},Vl:function(){return X},Xh:function(){return q},YS:function(){return p},YV:function(){return s},_M:function(){return P},_x:function(){return Z},cp:function(){return tt},dV:function(){return v},eG:function(){return l},eI:function(){return K},fq:function(){return V},fy:function(){return x},g0:function(){return O},hM:function(){return B},ie:function(){return M},ju:function(){return o},lL:function(){return d},mg:function(){return U},n9:function(){return g},nM:function(){return _},nW:function(){return k},oj:function(){return H},p:function(){return F},qM:function(){return i},r1:function(){return W},sn:function(){return m},tP:function(){return rt},uM:function(){return f},ue:function(){return h},vN:function(){return I},vd:function(){return T},yA:function(){return z},yv:function(){return $},z2:function(){return y},zt:function(){return A}});const i=1e-30,n=512,s=16777216,o=8,a=29,l=24,u=4,c=0,h=0,p=0,f=1,y=2,_=3,d=4,m=5,g=6,E=12,A=13,T=5,R=6,S=5,I=6;var v,w;(w=v||(v={}))[w.FilterFlags=0]="FilterFlags",w[w.Animation=1]="Animation",w[w.GPGPU=2]="GPGPU",w[w.VV=3]="VV",w[w.DD0=4]="DD0",w[w.DD1=5]="DD1",w[w.DD2=6]="DD2",w[w.LocalTimeOrigin=7]="LocalTimeOrigin";const N=6,b=1<<N,O=b<<1,L=1.05,x=3,D=1,P=3,M=3,C=5,U=6,G=1.15,B=2,F=128,z=256-2*B,k=2,H=128,V=10,$=1024,Y=128,W=4,j=1,Z=1<<20,K=.75,q=10,X=.75,J=256,Q=32,tt=512,et=0,rt=1},36008:function(t,e,r){r.d(e,{A:function(){return n}});var i=r(56996);class n{static getId(t,e,r,i){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${r}/${i}`}constructor(t,e,r,i){this.set(t,e,r,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,r=63&this.level;return(3&this.world)<<30|e<<22|t<<8|r}acquire(t,e,r,i){this.set(t,e,r,i)}contains(t){const e=t.level-this.level;return e>=0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}containsChild(t){const e=t.level-this.level;return e>0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new n(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,r,i){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,r,i,n]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(r),this.col=parseFloat(i),this.world=parseFloat(n)}else this.level=+t,this.row=+e,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new n(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(t,e,r){const i=this.clone();return i.col+=t,i.row+=e,r.normalizeKey(i),i}getChildKeys(){const t=this.level+1,e=this.row<<1,r=this.col<<1,i=this.world;return[new n(t,e,r,i),new n(t,e,r+1,i),new n(t,e+1,r,i),new n(t,e+1,r+1,i)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}n.pool=new i.A(n,null,null,25,50)},94738:function(t,e,r){function i(t,e,r,i){const n=3*t,s=3*(r-t)-n,o=1-n-s,a=3*e,l=3*(i-e)-a,u=1-a-l;function c(t){return((o*t+s)*t+n)*t}function h(t){return(3*o*t+2*s)*t+n}return function(t,e=1e-6){return function(t){return((u*t+l)*t+a)*t}(function(t,e){let r,i,n,s,o,a;for(n=t,a=0;a<8;a++){if(s=c(n)-t,Math.abs(s)<e)return n;if(o=h(n),Math.abs(o)<1e-6)break;n-=s/o}if(r=0,i=1,n=t,n<r)return r;if(n>i)return i;for(;r<i;){if(s=c(n),Math.abs(s-t)<e)return n;t>s?r=n:i=n,n=.5*(i-r)+r}return n}(t,e))}}r.d(e,{Z0:function(){return s},gb:function(){return i},qg:function(){return o}});const n=/^cubic-bezier\((.*)\)/,s={};function o(t){let e=s[t]||null;if(!e){const r=n.exec(t);if(r){const t=r[1].split(",").map((t=>parseFloat(t.trim())));4!==t.length||t.some((t=>isNaN(t)))||(e=i.apply(i,t))}}return e}s.ease=i(.25,.1,.25,1),s.linear=i(0,0,1,1),s.easeIn=s["ease-in"]=i(.42,0,1,1),s.easeOut=s["ease-out"]=i(0,0,.58,1),s.easeInOut=s["ease-in-out"]=i(.42,0,.58,1)},3817:function(t,e,r){r.d(e,{_:function(){return i}});class i{constructor(t,e,r,i,n,s=!1,o=0){this.name=t,this.count=e,this.type=r,this.offset=i,this.stride=n,this.normalized=s,this.divisor=o}}},2746:function(t,e,r){let i;function n(){return i||(i=function(){const t=new s,e=function(t){if("undefined"==typeof WebGL2RenderingContext)return null;const e=document.createElement("canvas");if(!e)return null;let r=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(null==r&&(r=e.getContext("webgl2"),null!=r&&(t.majorPerformanceCaveat=!0)),null==r)return r;t.available=!0,t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(t.supportsHighPrecisionFragment=i.precision>0),r}(t);return null==e||(t.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float")),t}()),i}r.d(e,{C:function(){return n}});class s{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}},85456:function(t,e,r){var i,n,s,o,a,l,u,c,h,p,f,y,_,d,m,g,E,A,T,R;r.d(e,{Ab:function(){return d},Ac:function(){return u},Ap:function(){return _},CQ:function(){return b},Cj:function(){return f},Co:function(){return T},H0:function(){return m},Hr:function(){return w},MT:function(){return h},NV:function(){return i},NZ:function(){return a},Nm:function(){return v},R:function(){return R},Tb:function(){return o},WR:function(){return n},Y7:function(){return l},_U:function(){return A},dn:function(){return s},eA:function(){return p},ld:function(){return g},nI:function(){return N},pF:function(){return y},pe:function(){return c},sS:function(){return D},tx:function(){return P},vt:function(){return I},xM:function(){return S},xV:function(){return O},yQ:function(){return E}}),function(t){t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t[t.COLOR=16384]="COLOR"}(i||(i={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(n||(n={})),function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(s||(s={})),function(t){t[t.ADD=32774]="ADD",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.SUBTRACT=32778]="SUBTRACT",t[t.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(o||(o={})),function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"}(a||(a={})),function(t){t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(l||(l={})),function(t){t[t.CW=2304]="CW",t[t.CCW=2305]="CCW"}(u||(u={})),function(t){t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=5131]="HALF_FLOAT"}(c||(c={})),function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"}(h||(h={})),function(t){t[t.ZERO=0]="ZERO",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP"}(p||(p={})),function(t){t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(f||(f={})),function(t){t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(y||(y={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(_||(_={})),function(t){t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.RG=33319]="RG",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER"}(d||(d={})),function(t){t[t.RGBA4=32854]="RGBA4",t[t.R16F=33325]="R16F",t[t.RG16F=33327]="RG16F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.R32F=33326]="R32F",t[t.RG32F=33328]="RG32F",t[t.RGBA32F=34836]="RGBA32F",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB5_A1=32855]="RGB5_A1",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.RGB16F=34843]="RGB16F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGB565=36194]="RGB565",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2=32857]="RGB10_A2",t[t.RGB10_A2UI=36975]="RGB10_A2UI"}(m||(m={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.INT=5124]="INT",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(g||(g={})),function(t){t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(E||(E={})),function(t){t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_READ=35045]="STATIC_READ",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.STREAM_COPY=35042]="STREAM_COPY"}(A||(A={})),function(t){t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER"}(T||(T={})),function(t){t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(R||(R={}));const S=33984;var I,v,w;!function(t){t[t.Texture=0]="Texture",t[t.BufferObject=1]="BufferObject",t[t.VertexArrayObject=2]="VertexArrayObject",t[t.Shader=3]="Shader",t[t.Program=4]="Program",t[t.FramebufferObject=5]="FramebufferObject",t[t.Renderbuffer=6]="Renderbuffer",t[t.TransformFeedback=7]="TransformFeedback",t[t.Sync=8]="Sync",t[t.UNCOUNTED=9]="UNCOUNTED",t[t.LinesOfCode=9]="LinesOfCode",t[t.Uniform=10]="Uniform",t[t.COUNT=11]="COUNT"}(I||(I={})),function(t){t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(v||(v={})),function(t){t[t.NONE=0]="NONE",t[t.BACK=1029]="BACK"}(w||(w={}));const N=33306;var b,O,L,x,D,P,M;!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"}(b||(b={})),function(t){t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT=5124]="INT",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(O||(O={})),function(t){t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS"}(L||(L={})),function(t){t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED"}(x||(x={})),function(t){t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED"}(D||(D={})),function(t){t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(P||(P={})),function(t){t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(M||(M={}))}}]);
//# sourceMappingURL=VectorTileLayer.js.map