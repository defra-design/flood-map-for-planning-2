"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[5732],{90735:function(e,t,r){r.d(t,{J:function(){return s}});var n,i=r(32150),o={exports:{}};const s=(0,i.g)(function(){return n||(n=1,e=o,t=function(){var e=function(){function e(e){this.message="JPEG error: "+e}return e.prototype=new Error,e.prototype.name="JpegError",e.constructor=e,e}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,n=799,i=3406,o=2276,s=1567,a=3784,l=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function p(e,t){for(var r,n,i=0,o=[],s=16;s>0&&!e[s-1];)s--;o.push({children:[],index:0});var a,l=o[0];for(r=0;r<s;r++){for(n=0;n<e[r];n++){for((l=o.pop()).children[l.index]=t[i];l.index>0;)l=o.pop();for(l.index++,o.push(l);o.length<=r;)o.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a;i++}r+1<s&&(o.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a)}return o[0].children}function d(e,t,r){return 64*((e.blocksPerLine+1)*t+r)}function h(r,n,i,o,s,a,l,u,c){var p=i.mcusPerLine,h=i.progressive,f=n,m=0,g=0;function w(){if(g>0)return g--,m>>g&1;if(255===(m=r[n++])){var t=r[n++];if(t)throw new e("unexpected marker "+(m<<8|t).toString(16))}return g=7,m>>>7}function b(t){for(var r=t;;){if("number"==typeof(r=r[w()]))return r;if("object"!=typeof r)throw new e("invalid huffman sequence")}}function v(e){for(var t=0;e>0;)t=t<<1|w(),e--;return t}function M(e){if(1===e)return 1===w()?1:-1;var t=v(e);return t>=1<<e-1?t:t+(-1<<e)+1}var S,I=0,A=0;function x(e,t,r,n,i){var o=r%p;t(e,d(e,(r/p|0)*e.v+n,o*e.h+i))}function _(e,t,r){t(e,d(e,r/e.blocksPerLine|0,r%e.blocksPerLine))}var C,T,R,k,D,N,P=o.length;N=h?0===a?0===u?function(e,t){var r=b(e.huffmanTableDC),n=0===r?0:M(r)<<c;e.blockData[t]=e.pred+=n}:function(e,t){e.blockData[t]|=w()<<c}:0===u?function(e,r){if(I>0)I--;else for(var n=a,i=l;n<=i;){var o=b(e.huffmanTableAC),s=15&o,u=o>>4;if(0!==s){var p=t[n+=u];e.blockData[r+p]=M(s)*(1<<c),n++}else{if(u<15){I=v(u)+(1<<u)-1;break}n+=16}}}:function(r,n){for(var i,o,s=a,u=l,p=0;s<=u;){var d=t[s];switch(A){case 0:if(p=(o=b(r.huffmanTableAC))>>4,0==(i=15&o))p<15?(I=v(p)+(1<<p),A=4):(p=16,A=1);else{if(1!==i)throw new e("invalid ACn encoding");S=M(i),A=p?2:3}continue;case 1:case 2:r.blockData[n+d]?r.blockData[n+d]+=w()<<c:0==--p&&(A=2===A?3:0);break;case 3:r.blockData[n+d]?r.blockData[n+d]+=w()<<c:(r.blockData[n+d]=S<<c,A=0);break;case 4:r.blockData[n+d]&&(r.blockData[n+d]+=w()<<c)}s++}4===A&&0==--I&&(A=0)}:function(e,r){var n=b(e.huffmanTableDC),i=0===n?0:M(n);e.blockData[r]=e.pred+=i;for(var o=1;o<64;){var s=b(e.huffmanTableAC),a=15&s,l=s>>4;if(0!==a){var u=t[o+=l];e.blockData[r+u]=M(a),o++}else{if(l<15)break;o+=16}}};var E,L,F,j,O=0;for(L=1===P?o[0].blocksPerLine*o[0].blocksPerColumn:p*i.mcusPerColumn;O<L;){var V=s?Math.min(L-O,s):L;for(T=0;T<P;T++)o[T].pred=0;if(I=0,1===P)for(C=o[0],D=0;D<V;D++)_(C,N,O),O++;else for(D=0;D<V;D++){for(T=0;T<P;T++)for(F=(C=o[T]).h,j=C.v,R=0;R<j;R++)for(k=0;k<F;k++)x(C,N,O,R,k);O++}g=0,(E=y(r,n))&&E.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+E.invalid),n=E.offset);var Z=E&&E.marker;if(!Z||Z<=65280)throw new e("marker was not found");if(!(Z>=65488&&Z<=65495))break;n+=2}return(E=y(r,n))&&E.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+E.invalid),n=E.offset),n-f}function f(t,c,p){var d,h,f,m,y,g,w,b,v,M,S,I,A,x,_,C,T,R=t.quantizationTable,k=t.blockData;if(!R)throw new e("missing required Quantization Table.");for(var D=0;D<64;D+=8)v=k[c+D],M=k[c+D+1],S=k[c+D+2],I=k[c+D+3],A=k[c+D+4],x=k[c+D+5],_=k[c+D+6],C=k[c+D+7],v*=R[D],M|S|I|A|x|_|C?(M*=R[D+1],S*=R[D+2],I*=R[D+3],A*=R[D+4],x*=R[D+5],_*=R[D+6],C*=R[D+7],h=(d=(d=l*v+128>>8)+(h=l*A+128>>8)+1>>1)-h,T=(f=S)*a+(m=_)*s+128>>8,f=f*s-m*a+128>>8,w=(y=(y=u*(M-C)+128>>8)+(w=x<<4)+1>>1)-w,g=(b=(b=u*(M+C)+128>>8)+(g=I<<4)+1>>1)-g,m=(d=d+(m=T)+1>>1)-m,f=(h=h+f+1>>1)-f,T=y*o+b*i+2048>>12,y=y*i-b*o+2048>>12,b=T,T=g*n+w*r+2048>>12,g=g*r-w*n+2048>>12,w=T,p[D]=d+b,p[D+7]=d-b,p[D+1]=h+w,p[D+6]=h-w,p[D+2]=f+g,p[D+5]=f-g,p[D+3]=m+y,p[D+4]=m-y):(T=l*v+512>>10,p[D]=T,p[D+1]=T,p[D+2]=T,p[D+3]=T,p[D+4]=T,p[D+5]=T,p[D+6]=T,p[D+7]=T);for(var N=0;N<8;++N)v=p[N],(M=p[N+8])|(S=p[N+16])|(I=p[N+24])|(A=p[N+32])|(x=p[N+40])|(_=p[N+48])|(C=p[N+56])?(h=(d=4112+((d=l*v+2048>>12)+(h=l*A+2048>>12)+1>>1))-h,T=(f=S)*a+(m=_)*s+2048>>12,f=f*s-m*a+2048>>12,m=T,w=(y=(y=u*(M-C)+2048>>12)+(w=x)+1>>1)-w,g=(b=(b=u*(M+C)+2048>>12)+(g=I)+1>>1)-g,T=y*o+b*i+2048>>12,y=y*i-b*o+2048>>12,b=T,T=g*n+w*r+2048>>12,g=g*r-w*n+2048>>12,v=(v=(d=d+m+1>>1)+b)<16?0:v>=4080?255:v>>4,M=(M=(h=h+f+1>>1)+(w=T))<16?0:M>=4080?255:M>>4,S=(S=(f=h-f)+g)<16?0:S>=4080?255:S>>4,I=(I=(m=d-m)+y)<16?0:I>=4080?255:I>>4,A=(A=m-y)<16?0:A>=4080?255:A>>4,x=(x=f-g)<16?0:x>=4080?255:x>>4,_=(_=h-w)<16?0:_>=4080?255:_>>4,C=(C=d-b)<16?0:C>=4080?255:C>>4,k[c+N]=v,k[c+N+8]=M,k[c+N+16]=S,k[c+N+24]=I,k[c+N+32]=A,k[c+N+40]=x,k[c+N+48]=_,k[c+N+56]=C):(T=(T=l*v+8192>>14)<-2040?0:T>=2024?255:T+2056>>4,k[c+N]=T,k[c+N+8]=T,k[c+N+16]=T,k[c+N+24]=T,k[c+N+32]=T,k[c+N+40]=T,k[c+N+48]=T,k[c+N+56]=T)}function m(e,t){for(var r=t.blocksPerLine,n=t.blocksPerColumn,i=new Int16Array(64),o=0;o<n;o++)for(var s=0;s<r;s++)f(t,d(t,o,s),i);return t.blockData}function y(e,t,r){function n(t){return e[t]<<8|e[t+1]}var i=e.length-1,o=r<t?r:t;if(t>=i)return null;var s=n(t);if(s>=65472&&s<=65534)return{invalid:null,marker:s,offset:t};for(var a=n(o);!(a>=65472&&a<=65534);){if(++o>=i)return null;a=n(o)}return{invalid:s.toString(16),marker:a,offset:o}}return c.prototype={parse:function(r){function n(){var e=r[l]<<8|r[l+1];return l+=2,e}function i(){var e=n(),t=l+e-2,i=y(r,t,l);i&&i.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+i.invalid),t=i.offset);var o=r.subarray(l,t);return l+=o.length,o}function o(e){for(var t=Math.ceil(e.samplesPerLine/8/e.maxH),r=Math.ceil(e.scanLines/8/e.maxV),n=0;n<e.components.length;n++){O=e.components[n];var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*O.h/e.maxH),o=Math.ceil(Math.ceil(e.scanLines/8)*O.v/e.maxV),s=t*O.h,a=r*O.v*64*(s+1);O.blockData=new Int16Array(a),O.blocksPerLine=i,O.blocksPerColumn=o}e.mcusPerLine=t,e.mcusPerColumn=r}var s,a,l=0,u=null,c=null,d=[],f=[],g=[],w=n();if(65496!==w)throw new e("SOI not found");for(w=n();65497!==w;){var b,v,M;switch(w){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var S=i();65504===w&&74===S[0]&&70===S[1]&&73===S[2]&&70===S[3]&&0===S[4]&&(u={version:{major:S[5],minor:S[6]},densityUnits:S[7],xDensity:S[8]<<8|S[9],yDensity:S[10]<<8|S[11],thumbWidth:S[12],thumbHeight:S[13],thumbData:S.subarray(14,14+3*S[12]*S[13])}),65518===w&&65===S[0]&&100===S[1]&&111===S[2]&&98===S[3]&&101===S[4]&&(c={version:S[5]<<8|S[6],flags0:S[7]<<8|S[8],flags1:S[9]<<8|S[10],transformCode:S[11]});break;case 65499:for(var I=n()+l-2;l<I;){var A=r[l++],x=new Uint16Array(64);if(A>>4){if(A>>4!=1)throw new e("DQT - invalid table spec");for(v=0;v<64;v++)x[t[v]]=n()}else for(v=0;v<64;v++)x[t[v]]=r[l++];d[15&A]=x}break;case 65472:case 65473:case 65474:if(s)throw new e("Only single frame JPEGs supported");n(),(s={}).extended=65473===w,s.progressive=65474===w,s.precision=r[l++],s.scanLines=n(),s.samplesPerLine=n(),s.components=[],s.componentIds={};var _,C=r[l++],T=0,R=0;for(b=0;b<C;b++){_=r[l];var k=r[l+1]>>4,D=15&r[l+1];T<k&&(T=k),R<D&&(R=D);var N=r[l+2];M=s.components.push({h:k,v:D,quantizationId:N,quantizationTable:null}),s.componentIds[_]=M-1,l+=3}s.maxH=T,s.maxV=R,o(s);break;case 65476:var P=n();for(b=2;b<P;){var E=r[l++],L=new Uint8Array(16),F=0;for(v=0;v<16;v++,l++)F+=L[v]=r[l];var j=new Uint8Array(F);for(v=0;v<F;v++,l++)j[v]=r[l];b+=17+F,(E>>4?f:g)[15&E]=p(L,j)}break;case 65501:n(),a=n();break;case 65498:n();var O,V=r[l++],Z=[];for(b=0;b<V;b++){var z=s.componentIds[r[l++]];O=s.components[z];var U=r[l++];O.huffmanTableDC=g[U>>4],O.huffmanTableAC=f[15&U],Z.push(O)}var B=r[l++],G=r[l++],H=r[l++],J=h(r,l,s,Z,a,B,G,H>>4,15&H);l+=J;break;case 65535:255!==r[l]&&l--;break;default:if(255===r[l-3]&&r[l-2]>=192&&r[l-2]<=254){l-=3;break}throw new e("unknown marker "+w.toString(16))}w=n()}for(this.width=s.samplesPerLine,this.height=s.scanLines,this.jfif=u,this.eof=l,this.adobe=c,this.components=[],b=0;b<s.components.length;b++){var q=d[(O=s.components[b]).quantizationId];q&&(O.quantizationTable=q),this.components.push({output:m(0,O),scaleX:O.h/s.maxH,scaleY:O.v/s.maxV,blocksPerLine:O.blocksPerLine,blocksPerColumn:O.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(e,t){var r,n,i,o,s,a,l,u,c,p,d,h=this.width/e,f=this.height/t,m=0,y=this.components.length,g=e*t*y,w=new Uint8ClampedArray(g),b=new Uint32Array(e),v=4294967288;for(l=0;l<y;l++){for(n=(r=this.components[l]).scaleX*h,i=r.scaleY*f,m=l,d=r.output,o=r.blocksPerLine+1<<3,s=0;s<e;s++)u=0|s*n,b[s]=(u&v)<<3|7&u;for(a=0;a<t;a++)for(p=o*((u=0|a*i)&v)|(7&u)<<3,s=0;s<e;s++)w[m]=d[p+b[s]],m+=y}var M=this.decodeTransform;if(M)for(l=0;l<g;)for(u=0,c=0;u<y;u++,l++,c+=2)w[l]=(w[l]*M[c]>>8)+M[c+1];return w},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this.colorTransform:1===this.colorTransform},_convertYccToRgb:function(e){for(var t,r,n,i=0,o=e.length;i<o;i+=3)t=e[i],r=e[i+1],n=e[i+2],e[i]=t-179.456+1.402*n,e[i+1]=t+135.459-.344*r-.714*n,e[i+2]=t-226.816+1.772*r;return e},_convertYcckToRgb:function(e){for(var t,r,n,i,o=0,s=0,a=e.length;s<a;s+=4)t=e[s],r=e[s+1],n=e[s+2],i=e[s+3],e[o++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*t+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*t-.00477271405408747*i+1.53380253221734)+t*(.000961250184130688*t-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),e[o++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*t+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*t+.000770482631801132*i-.151051492775562)+t*(.00126935368114843*t-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),e[o++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*t-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*t+.000560833691242812*i-.195152027534049)+t*(.00174418132927582*t-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return e},_convertYcckToCmyk:function(e){for(var t,r,n,i=0,o=e.length;i<o;i+=4)t=e[i],r=e[i+1],n=e[i+2],e[i]=434.456-t-1.402*n,e[i+1]=119.541-t+.344*r+.714*n,e[i+2]=481.816-t-1.772*r;return e},_convertCmykToRgb:function(e){for(var t,r,n,i,o=0,s=1/255,a=0,l=e.length;a<l;a+=4)t=e[a]*s,r=e[a+1]*s,n=e[a+2]*s,i=e[a+3]*s,e[o++]=255+t*(-4.387332384609988*t+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)-i*(21.86122147463605*i+189.48180835922747),e[o++]=255+t*(8.841041422036149*t+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)-i*(20.737325471181034*i+187.80453709719578),e[o++]=255+t*(.8842522430003296*t+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)-i*(22.33816807309886*i+180.12613974708367);return e},getData:function(t,r,n){if(this.numComponents>4)throw new e("Unsupported color mode");var i=this._getLinearizedBlockData(t,r);if(1===this.numComponents&&n){for(var o=i.length,s=new Uint8ClampedArray(3*o),a=0,l=0;l<o;l++){var u=i[l];s[a++]=u,s[a++]=u,s[a++]=u}return s}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(i);if(4===this.numComponents){if(this._isColorConversionNeeded())return n?this._convertYcckToRgb(i):this._convertYcckToCmyk(i);if(n)return this._convertCmykToRgb(i)}return i}},c}()},void 0!==(r=t())&&(e.exports=r)),o.exports;var e,t,r}())},82499:function(e,t,r){r.d(t,{Z:function(){return s}});var n,i=r(32150),o={exports:{}};const s=(0,i.g)(function(){return n||(n=1,t=o,void 0!==(e=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(e){var t=this.buffer,r=t?t.byteLength:0;if(e<r)return t;for(var n=512;n<e;)n<<=1;for(var i=new Uint8Array(n),o=0;o<r;++o)i[o]=t[o];return this.buffer=i},getByte:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(e){var t=this.pos;if(e){this.ensureBuffer(t+e);for(var r=t+e;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();r=this.bufferLength}return this.pos=r,this.buffer.subarray(t,r)},lookChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(e,t,r){for(var n=e+t;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,e,t,r)},skip:function(e){e||(e=1),this.pos+=e},reset:function(){this.pos=0}},e}(),r=function(){if(!self||!self.Uint32Array)return null;var t=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),n=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],o=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function s(e){throw new Error(e)}function a(t){var r=0,n=t[r++],i=t[r++];-1!=n&&-1!=i||s("Invalid header in flate stream"),8!=(15&n)&&s("Unknown compression method in flate stream"),((n<<8)+i)%31!=0&&s("Bad FCHECK in flate stream"),32&i&&s("FDICT bit set in flate stream"),this.bytes=t,this.bytesPos=2,this.codeSize=0,this.codeBuf=0,e.call(this)}return a.prototype=Object.create(e.prototype),a.prototype.getBits=function(e){for(var t,r=this.codeSize,n=this.codeBuf,i=this.bytes,o=this.bytesPos;r<e;)void 0===(t=i[o++])&&s("Bad encoding in flate stream"),n|=t<<r,r+=8;return t=n&(1<<e)-1,this.codeBuf=n>>e,this.codeSize=r-=e,this.bytesPos=o,t},a.prototype.getCode=function(e){for(var t=e[0],r=e[1],n=this.codeSize,i=this.codeBuf,o=this.bytes,a=this.bytesPos;n<r;){var l;void 0===(l=o[a++])&&s("Bad encoding in flate stream"),i|=l<<n,n+=8}var u=t[i&(1<<r)-1],c=u>>16,p=65535&u;return(0==n||n<c||0==c)&&s("Bad encoding in flate stream"),this.codeBuf=i>>c,this.codeSize=n-c,this.bytesPos=a,p},a.prototype.generateHuffmanTable=function(e){for(var t=e.length,r=0,n=0;n<t;++n)e[n]>r&&(r=e[n]);for(var i=1<<r,o=new Uint32Array(i),s=1,a=0,l=2;s<=r;++s,a<<=1,l<<=1)for(var u=0;u<t;++u)if(e[u]==s){var c=0,p=a;for(n=0;n<s;++n)c=c<<1|1&p,p>>=1;for(n=c;n<i;n+=l)o[n]=s<<16|u;++a}return[o,r]},a.prototype.readBlock=function(){function e(e,t,r,n,i){for(var o=e.getBits(r)+n;o-- >0;)t[f++]=i}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var l,u;if(1==a)l=i,u=o;else if(2==a){for(var c=this.getBits(5)+257,p=this.getBits(5)+1,d=this.getBits(4)+4,h=Array(t.length),f=0;f<d;)h[t[f++]]=this.getBits(3);for(var m=this.generateHuffmanTable(h),y=0,g=(f=0,c+p),w=new Array(g);f<g;){var b=this.getCode(m);16==b?e(this,w,2,3,y):17==b?e(this,w,3,3,y=0):18==b?e(this,w,7,11,y=0):w[f++]=y=b}l=this.generateHuffmanTable(w.slice(0,c)),u=this.generateHuffmanTable(w.slice(c,g))}else s("Unknown block type in flate stream");for(var v=(N=this.buffer)?N.length:0,M=this.bufferLength;;){var S=this.getCode(l);if(S<256)M+1>=v&&(v=(N=this.ensureBuffer(M+1)).length),N[M++]=S;else{if(256==S)return void(this.bufferLength=M);var I=(S=r[S-=257])>>16;I>0&&(I=this.getBits(I)),y=(65535&S)+I,S=this.getCode(u),(I=(S=n[S])>>16)>0&&(I=this.getBits(I));var A=(65535&S)+I;M+y>=v&&(v=(N=this.ensureBuffer(M+y)).length);for(var x=0;x<y;++x,++M)N[M]=N[M-A]}}}else{var _,C=this.bytes,T=this.bytesPos;void 0===(_=C[T++])&&s("Bad block header in flate stream");var R=_;void 0===(_=C[T++])&&s("Bad block header in flate stream"),R|=_<<8,void 0===(_=C[T++])&&s("Bad block header in flate stream");var k=_;void 0===(_=C[T++])&&s("Bad block header in flate stream"),(k|=_<<8)!=(65535&~R)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var D=this.bufferLength,N=this.ensureBuffer(D+R),P=D+R;this.bufferLength=P;for(var E=D;E<P;++E){if(void 0===(_=C[T++])){this.eof=!0;break}N[E]=_}this.bytesPos=T}},a}())&&(t.exports=r)),o.exports;var e,t,r}())},32150:function(e,t,r){r.d(t,{c:function(){return n},g:function(){return i}});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},99680:function(e,t,r){r.d(t,{q:function(){return i}});var n=r(85408);class i{constructor(e,t){this._storage=new n.F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,r=1){this._storage.put(this,e,t,r,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},85408:function(e,t,r){r.d(t,{F:function(){return l},Ti:function(){return i}});var n=r(7187);const i=-3,o=i-1;var s,a;(a=s||(s={}))[a.ALL=0]="ALL",a[a.SOME=1]="SOME";class l{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.A,this._users=new n.A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){const r=this._db.get(e.id+t);return r?.size??0}put(e,t,r,n,a){t=e.id+t;const l=this._db.get(t);if(l&&(this._size-=l.size,e.size-=l.size,this._db.delete(t),l.entry!==r&&this._notifyRemove(t,l.entry,l.size,s.ALL)),n>this._maxSize)return void this._notifyRemove(t,r,n,s.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${t}`),void this._notifyRemove(t,r,0,s.ALL);const c=1+Math.max(a,o)-i;this._db.set(t,new u(r,n,c)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,t,r,n){t=e.id+t;const i=this._db.get(t);if(i&&i.entry===r){for(this._size-=i.size,e.size-=i.size;n>this._maxSize;){const e=this._notifyRemove(t,r,n,s.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);n=e}i.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,t){t=e.id+t;const r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(e,t){t=e.id+t;const r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}peek(e,t){const r=this._db.get(e.id+t);return r?++this._hit:++this._miss,r?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},r=new Array;this._db.forEach(((e,n)=>{const i=e.lifetime;r[i]=(r[i]||0)+e.size,this._users.forAll((r=>{const{id:i,name:o}=r;if(n.startsWith(i)){const r=t[o]||0;t[o]=r+e.size}}))}));const n={};this._users.forAll((e=>{const r=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const i=t[r]||0;t[r]=i,n[r]=Math.round(100*e.hitRate)+"%"}else n[r]="0%"}));const o=Object.keys(t);o.sort(((e,r)=>t[r]-t[e])),o.forEach((r=>e[r]=Math.round(t[r]/2**20)+"MB / "+n[r]));for(let t=r.length-1;t>=0;--t){const n=r[t];n&&(e["Priority "+(t+i-1)]=Math.round(n/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,e.size,s.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,s.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,r,n){let i;return this._removeFuncs.some((o=>{if(e.startsWith(o[0])){const e=o[1](t,n,r);return"number"==typeof e&&(i=e),!0}return!1})),i}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const r=e?.id;let n=!0;for(;n;){n=!1;for(const[i,o]of this._db)if(0===o.lifetime&&(!r||i.startsWith(r))){if(this._purgeItem(i,o,e),t.size<=.9*t.maxSize)return;n||=this._db.has(i)}}for(const[n,i]of this._db)if((!r||n.startsWith(r))&&(this._purgeItem(n,i,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,r=this._users.find((t=>e.startsWith(t.id)))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);const n=this._notifyRemove(e,t.entry,t.size,s.SOME);null!=n&&n>0&&(this._size+=n,r&&(r.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}class u{constructor(e,t,r){this.entry=e,this.size=t,this.lifetime=r,this.lives=r}}},77793:function(e,t,r){r.d(t,{P:function(){return b},L:function(){return v}});var n=r(53804),i=r(83525),o=r(90194),s=r(21609),a=r(72977);class l{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new l,r=this._originStores[a.Gr.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,(0,s.o8)(e),a.Gr.DEFAULTS)}));for(let r=a.Gr.SERVICE;r<a.AU;r++){const n=this._originStores[r];n&&n.forEach(((n,i)=>{e&&e.has(i)||t.set(i,(0,s.o8)(n),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=a.Gr.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=a.Gr.USER){const r=this._originStores[t];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return n}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],n=r?.get(e),i=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),i!==n}originOf(e){return this._propertyOriginMap.get(e)||a.Gr.DEFAULTS}forEach(e){this._values.forEach(e)}}var u=r(97354),c=r(63693),p=r(65953);const d=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,c.oY)(this),r=t.store,n=new l;t.store=n,(0,o.k)(t,r,n)}read(e,t){(0,u.L)(this,e,t)}getAtOrigin(e,t){const r=h(this),n=(0,a.aB)(t);if("string"==typeof e)return r.get(e,n);const i={};return e.forEach((e=>{i[e]=r.get(e,n)})),i}originOf(e){return(0,a.OL)(this.originIdOf(e))}originIdOf(e){return h(this).originOf(e)}revert(e,t){const r=h(this),n=(0,a.aB)(t),i=(0,c.oY)(this);let o;o="string"==typeof e?"*"===e?r.keys(n):[e]:e,o.forEach((e=>{i.invalidate(e),r.revert(e,n),i.commit(e)}))}};return t=(0,n._)([(0,p.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function h(e){return(0,c.oY)(e).store}let f=class extends(d(i.A)){};f=(0,n._)([(0,p.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],f);var m=r(62664),y=r(99495);const g=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return w(this).delete(e,(0,a.aB)(t))}write(e,t){return(0,y.M)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,c.oY)(this).setAtOrigin(e,t,(0,a.aB)(r))}removeOrigin(e){const t=w(this),r=(0,a.aB)(e),n=t.keys(r);for(const e of n)t.originOf(e)===r&&t.set(e,t.get(e,r),a.Gr.USER)}updateOrigin(e,t){const r=w(this),n=(0,a.aB)(t),i=(0,m.Jt)(this,e);for(let t=n+1;t<a.AU;++t)r.delete(e,t);r.set(e,i,n)}toJSON(e){return this.write({},e)}};return t=(0,n._)([(0,p.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function w(e){return(0,c.oY)(e).store}const b=e=>{let t=class extends(g(d(e))){constructor(...e){super(...e)}};return t=(0,n._)([(0,p.$)("esri.core.MultiOriginJSONSupport")],t),t};let v=class extends(b(i.A)){};v=(0,n._)([(0,p.$)("esri.core.MultiOriginJSONSupport")],v)},72952:function(e,t,r){r.d(t,{EB:function(){return h},Im:function(){return y},Mj:function(){return d},Ui:function(){return m},w2:function(){return f}});var n=r(83525),i=r(78879),o=r(63693);const s=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function a(e){return e instanceof n.A}function l(e){return e instanceof i.A?Object.keys(e.items):a(e)?(0,o.oY)(e).keys():e?Object.keys(e):[]}function u(e,t){return e instanceof i.A?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function p(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const n=l(e),i=l(t);if(0===n.length&&0===i.length)return;if(!n.length||!i.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};const o=i.filter((e=>!n.includes(e))),d=n.filter((e=>!i.includes(e))),h=n.filter((r=>i.includes(r)&&u(e,r)!==u(t,r))).concat(o,d).sort(),f=c(e);if(f&&s.has(f)&&h.length)return{type:"complete",oldValue:e,newValue:t};let m;const y=a(e)&&a(t);for(const n of h){const i=u(e,n),o=u(t,n);let s;if((y||"function"!=typeof i&&"function"!=typeof o)&&i!==o&&(null!=i||null!=o)){if(r&&r[n]&&"function"==typeof r[n])s=r[n]?.(i,o);else if(i instanceof Date&&o instanceof Date){if(i.getTime()===o.getTime())continue;s={type:"complete",oldValue:i,newValue:o}}else s="object"==typeof i&&"object"==typeof o&&c(i)===c(o)?p(i,o):{type:"complete",oldValue:i,newValue:o};null!=s&&(null!=m?m.diff[n]=s:m={type:"partial",diff:{[n]:s}})}}return m}function d(e,t){return h(e,t)}function h(e,t){if(null==e)return!1;const r=t.split(".");let n=e;for(const e of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const t=n.diff[e];if(!t)return!1;n=t}}return!0}function f(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:p(e,t)}function y(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!y(e))return!1;for(const e of t.removed)if(!y(e))return!1;for(const e of t.changed)if(!y(e))return!1;return!0}case"partial":for(const t in e.diff)if(!y(e.diff[t]))return!1;return!0}}},64786:function(e,t,r){r.d(t,{K:function(){return n}});const n=["operational-layers","basemap","ground"]},75505:function(e,t,r){r.d(t,{$:function(){return w},IB:function(){return a},Iy:function(){return N},N2:function(){return b},QP:function(){return R},RH:function(){return M},Vl:function(){return T},Ws:function(){return S},ZD:function(){return v},_L:function(){return C},bJ:function(){return x},e$:function(){return _},f6:function(){return D},pW:function(){return I},pf:function(){return k}});var n=r(52874),i=r(50659),o=r(21609),s=(r(33400),r(41546));function a(e){return"r"in e&&"g"in e&&"b"in e}function l(e){return"h"in e&&"s"in e&&"v"in e}function u(e){return"l"in e&&"a"in e&&"b"in e}function c(e){return"l"in e&&"c"in e&&"h"in e}const p=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],d=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function h(e,t){const r=[];let n,i;if(e[0].length!==t.length)throw new Error("dimensions do not match");const o=e.length,s=e[0].length;let a=0;for(n=0;n<o;n++){for(a=0,i=0;i<s;i++)a+=e[n][i]*t[i];r.push(a)}return r}function f(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),r=h(p,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function m(e){const t=h(d,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function y(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function g(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function w(e){return a(e)?e:c(e)?function(e){return m(g(function(e){const t=e.l,r=e.c,n=e.h;return{l:t,a:r*Math.cos(n),b:r*Math.sin(n)}}(e)))}(e):u(e)?function(e){return m(g(e))}(e):function(e){return"x"in e&&"y"in e&&"z"in e}(e)?m(e):l(e)?function(e){const t=(e.h+360)%360/60,r=e.s/100,n=e.v/100*255,i=n*r,o=i*(1-Math.abs(t%2-1));let s;switch(Math.floor(t)){case 0:s={r:i,g:o,b:0};break;case 1:s={r:o,g:i,b:0};break;case 2:s={r:0,g:i,b:o};break;case 3:s={r:0,g:o,b:i};break;case 4:s={r:o,g:0,b:i};break;case 5:case 6:s={r:i,g:0,b:o};break;default:s={r:0,g:0,b:0}}return s.r=Math.round(s.r+n-i),s.g=Math.round(s.g+n-i),s.b=Math.round(s.b+n-i),s}(e):e}function b(e){return l(e)?e:function(e){const t=e.r,r=e.g,n=e.b,i=Math.max(t,r,n),o=i-Math.min(t,r,n);let s=i,a=0===o?0:i===t?(r-n)/o%6:i===r?(n-t)/o+2:(t-r)/o+4,l=0===o?0:o/s;return a<0&&(a+=6),a*=60,l*=100,s*=100/255,{h:a,s:l,v:s}}(w(e))}function v(e){return u(e)?e:function(e){return y(f(e))}(w(e))}function M(e){return c(e)?e:function(e){return function(e){const t=e.l,r=e.a,n=e.b,i=Math.sqrt(r*r+n*n);let o=Math.atan2(n,r);return o=o>0?o:o+2*Math.PI,{l:t,c:i,h:o}}(y(f(e)))}(w(e))}function S(e,t){const{r:r,g:i,b:o}=t?.ignoreAlpha?e:function(e){let{r:t,g:r,b:i,a:o}=e;return o<1&&(t=Math.round(o*t+255*(1-o)),r=Math.round(o*r+255*(1-o)),i=Math.round(o*i+255*(1-o))),new n.A({r:t,g:r,b:i})}(e);return.2126*r+.7152*i+.0722*o}var I,A;function x(e,t=I.High){return S(e,{ignoreAlpha:!0})>t?new n.A([0,0,0,e.a]):new n.A([255,255,255,e.a])}function _(e,t){const r=v(e);r.l*=1-t;const n=w(r),i=e.clone();return i.setColor(n),i.a=e.a,i}function C(e,t){const r=e.clone();return r.a*=t,r}function T(e,t){const r=b(e);r.s*=t;const n=w(r),i=e.clone();return i.setColor(n),i.a=e.a,i}function R(e){return n.A.toUnitRGBA(e)}function k(e){return(0,s.fA)(e[0],e[1],e[2],e.length>3?e[3]:1)}function D(e,t){const r=n.A.toUnitRGBA(e);return r[3]*=t,r}function N(e,t,r={}){if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new n.A(e):e))).length||1===t){const r=[],n=e[0];for(let e=0;e<t;e++)r.push(n.clone());return r}if(r.shuffle&&(e=(0,i.k4)((0,o.o8)(e),r.seed)),e.length>=t){const r=[],n=(e.length-1)/(t-1);for(let i=0;i<t;i++){const t=Math.round(i*n);r.push(e[t].clone())}return r}return function(e,t,r={}){const n=[],o=e.length-1,s=Math.ceil((t-e.length)/o);e:for(let i=0;i<o;i++){const o=e[i],a=e[i+1];for(let i=1;i<=s;i++){const l=i/(s+1);if(n.push(E(o,a,l,r)),n.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,i.k4)(n,r.seed??1)]}(e,t,r)}(A=I||(I={}))[A.Low=160]="Low",A[A.High=225]="High";const P=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function E(e,t,r,o={}){const s=e.r,a=e.g,l=e.b,u=t.r,c=t.g,p=t.b,d=Math.round(s+(u-s)*r),h=Math.round(a+(c-a)*r),f=Math.round(l+(p-l)*r);if(!o.offset)return new n.A([d,h,f]);const m=(0,i.Mo)(o.seed);return new n.A([P(d,m),P(h,m),P(f,m)])}},68225:function(e,t,r){r.d(t,{A:function(){return c}});var n,i,o=r(58941),s=r(56996);(i=n||(n={}))[i.varint=0]="varint",i[i.fixed64=1]="fixed64",i[i.delimited=2]="delimited",i[i.fixed32=5]="fixed32",i[i.unknown=99]="unknown";const a=4294967296,l=new TextDecoder("utf-8"),u=(0,o.A)("safari")||(0,o.A)("ios")?6:(0,o.A)("ff")?12:32;class c{constructor(e,t,r=0,i=(e?e.byteLength:0)){this._tag=0,this._dataType=n.unknown,this._init(e,t,r,i)}_init(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n}asUnsafe(){return this}clone(){return new c(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;if(e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return e;if(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return e;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();return e>>>1^-(1&e)}getSInt64(){return this._decodeSVarint()}getBool(){const e=0!==this._data[this._pos];return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*a;return this._skip(8),r}getSFixed64(){const e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*a;return this._skip(8),r}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}getBytes(){const e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,t,r,n){const i=this.getMessage(),o=e(i,t,r,n);return i.release(),o}processMessage(e){const t=this.getMessage(),r=e(t);return t.release(),r}getMessage(){const e=this._getLength(),t=c.pool.acquire();return t._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),t}release(){c.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case n.varint:this._decodeVarint();break;case n.fixed64:this._skip(8);break;case n.delimited:this._skip(this._getLength());break;case n.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let t=this._pos,r=0,n=0;if(this._end-t>=10)do{if(n=e[t++],r|=127&n,!(128&n))break;if(n=e[t++],r|=(127&n)<<7,!(128&n))break;if(n=e[t++],r|=(127&n)<<14,!(128&n))break;if(n=e[t++],r|=(127&n)<<21,!(128&n))break;if(n=e[t++],r+=268435456*(127&n),!(128&n))break;if(n=e[t++],r+=34359738368*(127&n),!(128&n))break;if(n=e[t++],r+=4398046511104*(127&n),!(128&n))break;if(n=e[t++],r+=562949953421312*(127&n),!(128&n))break;if(n=e[t++],r+=72057594037927940*(127&n),!(128&n))break;if(n=e[t++],r+=0x8000000000000000*(127&n),!(128&n))break;throw new Error("Varint too long!")}while(0);else{let i=1;for(;t!==this._end&&(n=e[t],128&n);)++t,r+=(127&n)*i,i*=128;if(t===this._end)throw new Error("Varint overrun!");++t,r+=n*i}return this._pos=t,r}_decodeSVarint(){const e=this._data;let t,r=0,n=0;const i=1&e[this._pos];if(n=e[this._pos++],r|=127&n,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r|=(127&n)<<7,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r|=(127&n)<<14,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r|=(127&n)<<21,!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r+=268435456*(127&n),!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r+=34359738368*(127&n),!(128&n))return i?-(r+1)/2:r/2;if(n=e[this._pos++],r+=4398046511104*(127&n),!(128&n))return i?-(r+1)/2:r/2;if(t=BigInt(r),n=e[this._pos++],t+=0x2000000000000n*BigInt(127&n),!(128&n))return Number(i?-(t+1n)/2n:t/2n);if(n=e[this._pos++],t+=0x100000000000000n*BigInt(127&n),!(128&n))return Number(i?-(t+1n)/2n:t/2n);if(n=e[this._pos++],t+=0x8000000000000000n*BigInt(127&n),!(128&n))return Number(i?-(t+1n)/2n:t/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==n.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,t,r){if((r=Math.min(this._end,r))-t>u){const n=e.subarray(t,r);return l.decode(n)}let n="",i="";for(let o=t;o<r;++o){const t=e[o];128&t?i+="%"+t.toString(16):(n+=decodeURIComponent(i)+String.fromCharCode(t),i="")}return i.length&&(n+=decodeURIComponent(i)),n}_toBytes(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}c.pool=new s.A(c,void 0,(e=>{e._data=null,e._dataView=null}))},92955:function(e,t,r){r.d(t,{GB:function(){return i},Qo:function(){return s},Y4:function(){return o}});var n=r(96285);class i{}function o(e){return e instanceof n.bo?e===i.instance:"unknown"===e?.toString().toLowerCase()}function s(e){return o(e)?i.instance:e}i.instance=new n.oh("Etc/UTC")},37797:function(e,t,r){r.d(t,{A:function(){return u}});var n=r(61226),i=(r(58941),r(60539)),o=r(51846),s=r(13370),a=r(90465),l=r(50193);class u{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new o.A}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise(((r,n)=>{let o=!0;const s=e=>{(0,i.Te)(t.signal),o&&(o=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let o=0;o<e.length;++o){const a=e[o];(0,i.$X)(a)?this._clientPromises[o]=a.then((e=>(this._clients[o]=new l.A(e,t,this._ongoingJobsQueue),s(r),this._clients[o])),(()=>(s(n),null))):(this._clients[o]=new l.A(a,t,this._ongoingJobsQueue),this._clientPromises[o]=Promise.resolve(this._clients[o]),s(r))}}))}broadcast(e,t,r){const n=new Array(this._clientPromises.length);for(let i=0;i<this._clientPromises.length;++i){const o=this._clientPromises[i];n[i]=o.then((n=>n?.invoke(e,t,r)))}return n}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject((0,i.NK)(`Worker closing, aborting job calling '${e.methodName}'`));for(const e of this._clientPromises)e.then((e=>e?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,(0,s.h)(this)}invoke(e,t,r){return this.apply(e,[t],r)}apply(e,t,r){const n=(0,i.Tw)();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:r,resolver:n});for(let e=0;e<this._clientPromises.length;e++){const t=this._clients[e];t?t.jobAdded():this._clientPromises[e].then((e=>e?.jobAdded()))}return n.promise}createInvokeProxy(e){return(0,a.L)(this,e)}on(e,t){return Promise.all(this._clientPromises).then((()=>(0,n.vE)(this._clients.map((r=>r.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let r=t.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then((i=>{i&&(t[n]=i.openPort()),0==--r&&e(t)}))}))}get test(){}}},90465:function(e,t,r){function n(e,t){return new Proxy({},{get:(r,n,i)=>(...r)=>{let i,o;const s=r[r.length-1];return function(e){return"object"==typeof e&&!Array.isArray(e)&&null!=e&&("signal"in e||"transferList"in e||0===Object.keys(e).length)}(s)&&(i=s.signal,o=s.transferList,r.pop()),e.apply(t?`${t}.${n.toString()}`:n.toString(),r,{transferList:o,signal:i})}})}r.d(t,{L:function(){return n}})},50193:function(e,t,r){r.d(t,{A:function(){return v}});var n=r(7156),i=r(39819),o=r(40212),s=r(61226),a=r(95929),l=r(60539),u=r(90465);const c={statsWorker:()=>r.e(1838).then(r.bind(r,27966)),geometryEngineWorker:()=>r.e(2384).then(r.bind(r,9568)),CSVSourceWorker:()=>r.e(2600).then(r.bind(r,80172)),EdgeProcessingWorker:()=>r.e(2933).then(r.bind(r,92273)),ElevationSamplerWorker:()=>r.e(5120).then(r.bind(r,55412)),FeatureServiceSnappingSourceWorker:()=>r.e(8246).then(r.bind(r,66038)),GeoJSONSourceWorker:()=>r.e(7253).then(r.bind(r,4389)),LercWorker:()=>r.e(6594).then(r.bind(r,67024)),MemorySourceWorker:()=>r.e(807).then(r.bind(r,8489)),PBFDecoderWorker:()=>r.e(8950).then(r.bind(r,19939)),FeaturePipelineWorker:()=>r.e(3806).then(r.bind(r,25423)),PointCloudWorker:()=>r.e(9722).then(r.bind(r,33764)),RasterWorker:()=>r.e(6221).then(r.bind(r,85563)),SceneLayerSnappingSourceWorker:()=>r.e(5974).then(r.bind(r,28820)),SceneLayerWorker:()=>r.e(5404).then(r.bind(r,90525)),WFSSourceWorker:()=>r.e(4900).then(r.bind(r,6412)),WorkerTileHandler:()=>r.e(3295).then(r.bind(r,27787)),Lyr3DWorker:()=>r.e(3213).then(r.bind(r,6883)),Feature3DPipelineWorker:()=>r.e(3929).then(r.bind(r,38518))};var p=r(64272),d=r(23532);const{CLOSE:h,ABORT:f,INVOKE:m,RESPONSE:y,OPEN_PORT:g,ON:w}=p.Go;class b{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p.Go.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class v{static connect(e,t){const r=new MessageChannel;let n;n="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const i=new v(r.port1,{channel:r,client:n,schedule:t});return"object"==typeof n&&"remoteClient"in n&&(n.remoteClient=i),v.clients.set(i,n),r.port2}static loadWorker(e){const t=c[e];return t?t():Promise.resolve(null)}constructor(e,t,r){this._port=e,this._jobQueue=r,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new b((e=>this._onInvokeMessage(e))),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:h}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,r){return this.apply(e,[t],r)}apply(e,t,r){const n=r?.signal,o=r?.transferList;if(!this._port)return Promise.reject(new i.A(p.T,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const s=(0,p.Jc)();return new Promise(((r,i)=>{if((0,l.G4)(n))return this._processWork(),void i((0,l.NK)());const u=(0,l.u7)(n,(()=>{const e=this._outJobs.get(s);e&&(this._outJobs.delete(s),this._processWork(),(0,a.xt)(e.abortHandle),this._post({type:f,jobId:s}),i((0,l.NK)()))})),c={resolve:r,reject:i,abortHandle:u,debugInfo:e};this._outJobs.set(s,c),this._post({type:m,jobId:s,methodName:e,abortable:null!=n},t,o)}))}createInvokeProxy(e){return(0,u.L)(this,e)}on(e,t){const r=new MessageChannel;function n(e){t(e.data)}return this._port.postMessage({type:p.Go.ON,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",n),r.port1.start(),(0,s.hA)((()=>{r.port1.postMessage({type:p.Go.CLOSE}),r.port1.close(),r.port1.removeEventListener("message",n)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:g,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=2)return;const e=this._jobQueue?.pop();if(!e)return;const{methodName:t,data:r,invokeOptions:n,resolver:i}=e;this.apply(t,r,n).then((e=>i.resolve(e))).catch((e=>i.reject(e)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{(0,a.xt)(e.abortHandle),e.reject((0,l.NK)(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){null!=this._schedule?this._schedule((()=>this._processMessage(e,!0))):this._processMessage(e,!1)}_processMessage(e,t){const r=(0,p.VI)(e);if(r)switch(r.type){case y:this._onResponseMessage(r);break;case m:t?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case f:this._onAbortMessage(r);break;case h:this._onCloseMessage();break;case g:this._onOpenPortMessage(r);break;case w:this._onOnMessage(r)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,n=t.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),t.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&v.clients.get(this)===e&&e.destroy(),v.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:r,data:n=[],abortable:i}=e,o=i?new AbortController:null,s=this._inJobs;let a,u=this._client,c=u[t];try{if(!c&&t&&t.includes(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)u=u[e[t]],c=u[e[t+1]]}if("function"!=typeof c)throw new TypeError(`${t} is not a function`);n.push({client:this,signal:o?o.signal:null}),a=c.apply(u,n)}catch(e){return void this._post({type:y,jobId:r,error:(0,p.mF)(e)})}(0,l.$X)(a)?(s.set(r,{controller:o,promise:a}),a.then((e=>{s.has(r)&&(s.delete(r),this._post({type:y,jobId:r},e))}),(e=>{s.has(r)&&(s.delete(r),(0,l.zf)(e)||this._post({type:y,jobId:r,error:(0,p.mF)(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:y,jobId:r},a)}_onOpenPortMessage(e){new v(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,r=this._client.on(e.eventType,(e=>{t.postMessage(e)})),n=(0,o.on)(e.port,"message",(e=>{const i=(0,p.VI)(e);i?.type===p.Go.CLOSE&&(n.remove(),r.remove(),t.close())}))}_onResponseMessage(e){const{jobId:t,error:r,data:n}=e,o=this._outJobs;if(!o.has(t))return;const s=o.get(t);o.delete(t),this._processWork(),(0,a.xt)(s.abortHandle),r?s.reject(i.A.fromJSON(JSON.parse(r))):s.resolve(n)}_post(e,t,r){return(0,p.u1)(this._port,e,t,r)}}v.kernelInfo={buildDate:d.$,fullVersion:n.ol,revision:d.u},v.clients=new Map},13370:function(e,t,r){r.d(t,{h:function(){return o},k:function(){return i}});const n=new FinalizationRegistry((e=>{e.close()}));function i(e,t){n.register(e,t,t)}function o(e){n.unregister(e)}},64272:function(e,t,r){r.d(t,{Go:function(){return s},Jc:function(){return u},T:function(){return o},VI:function(){return d},mF:function(){return c},oV:function(){return f},u1:function(){return p}});var n=r(58941),i=r(60539);const o="worker:port-closed";var s,a;(a=s||(s={}))[a.HANDSHAKE=0]="HANDSHAKE",a[a.OPEN=1]="OPEN",a[a.OPENED=2]="OPENED",a[a.RESPONSE=3]="RESPONSE",a[a.INVOKE=4]="INVOKE",a[a.ABORT=5]="ABORT",a[a.CLOSE=6]="CLOSE",a[a.OPEN_PORT=7]="OPEN_PORT",a[a.ON=8]="ON";let l=0;function u(){return l++}function c(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function p(e,t,r,i){if(t.type===s.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==s.INVOKE&&t.type!==s.RESPONSE)return void e.postMessage(t);let o;if(function(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}(r)?(o=h(r.transferList),t.data=r.result):(o=h(i),t.data=r),o){if((0,n.A)("ff"))for(const r of o)if("byteLength"in r&&r.byteLength>267386880){const r="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case s.INVOKE:throw r;case s.RESPONSE:return void p(e,{type:s.RESPONSE,jobId:t.jobId,error:c(r)})}}e.postMessage(t,o)}else e.postMessage(t)}function d(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function h(e){if(!e?.length)return null;if((0,n.A)("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((e=>!function(e){return e instanceof ArrayBuffer||"ArrayBuffer"===e?.constructor?.name}(e)));return t.length?t:null}async function f(e){try{return await e}catch(e){const t=e?.name===o;if(!(0,i.zf)(e)&&!t)throw e;return}}},86027:function(e,t,r){r.d(t,{n_:function(){return z},ho:function(){return B}});var n=r(39819),i=r(58941),o=r(60539),s=r(37797),a=r(13370),l=r(50193),u=r(40633),c=r(95929),p=r(93040),d=r(90683);const h={async request(e,t){const r=e.options,n=r.responseType;r.signal=t?.signal,r.responseType="native"===n||"native-request-init"===n?"native-request-init":n&&["blob","json","text"].includes(n)&&(0,d.sC)(e.url)?.after?n:"array-buffer";const i=await(0,p.A)(e.url,r),o={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=(new TextEncoder).encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=(new TextEncoder).encode(o.data).buffer}return{result:o,transferList:[o.data]}}};var f=r(64272),m=r(53216),y=r(25591),g=(r(64122),r(7156));const w={};var b=r(29601);class v{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...r)=>e[t](...r)}))}}class M{constructor(){this._dispatcher=new v,this._workerPostMessage({type:f.Go.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){(0,b.d)((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,r){this._dispatcher.addEventListener(e,t,r)}removeEventListener(e,t,r){this._dispatcher.removeEventListener(e,t,r)}_workerPostMessage(e){(0,b.d)((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const t=(0,f.VI)(e);if(t&&t.type===f.Go.OPEN){const{modulePath:e,jobId:r}=t;let n=await l.A.loadWorker(e);n||(n=await import(e));const i=l.A.connect(n);this._workerPostMessage({type:f.Go.OPENED,jobId:r,data:i})}}}var S=r(22739),I=r(23532);const A=()=>u.A.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:x}=f.Go;let _,C;const T="Failed to create Worker. Fallback to execute module in main thread";async function R(e){return new Promise((t=>{function r(i){const o=(0,f.VI)(i);o&&o.type===x&&(e.removeEventListener("message",r),e.removeEventListener("error",n),t(e))}function n(t){t.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",n),A().warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new M).addEventListener("message",r),e.addEventListener("error",n)}e.addEventListener("message",r),e.addEventListener("error",n)}))}let k=0;const{ABORT:D,INVOKE:N,OPEN:P,OPENED:E,RESPONSE:L}=f.Go;class F{static async create(e){const t=await async function(){if(!(0,i.A)("esri-workers"))return R(new M);if(!_&&!C)try{const e='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.split("{CONFIGURATION}").join(function(){let e;if(null!=y.default.default){const t={...y.default};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(y.default));e.assetsPath=(0,d.s2)(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?(0,d.s2)(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=(0,S.JK)(),e.has={"esri-csp-restrictions":(0,i.A)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,i.A)("esri-2d-update-debug"),"esri-2d-log-updating":(0,i.A)("esri-2d-log-updating"),"featurelayer-pbf":(0,i.A)("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":(0,i.A)("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":(0,i.A)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,i.A)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,i.A)("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":(0,i.A)("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":(0,i.A)("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":(0,i.A)("featurelayer-snapshot-enabled"),"esri-atomics":(0,i.A)("esri-atomics"),"esri-shared-array-buffer":(0,i.A)("esri-shared-array-buffer"),"esri-tiles-debug":(0,i.A)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,i.A)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,i.A)("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=(0,d.s2)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=(0,d.s2)(e.workers.workerPath):e.workers.workerPath=(0,d.s2)((0,m.s)("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=y.default.workers.loaderConfig,r=function(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...w.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=w.baseUrl),t}({baseUrl:t?.baseUrl,locale:(0,S.JK)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),n={buildDate:I.$,fullVersion:g.ol,revision:I.u};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:n})}());_=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){C=e||{}}let e;if(_)try{e=new Worker(_,{name:"esri-worker-"+k++})}catch(t){A().warn(T,C),e=new M}else A().warn(T,C),e=new M;return R(e)}();return new F(t,e)}constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),u.A.getLogger("esri.core.workers.WorkerOwner").error(e)}))}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:r}=t,n=(0,f.Jc)();return new Promise(((t,i)=>{const s={resolve:t,reject:i,abortHandle:(0,o.NY)(r,(()=>{this._outJobs.delete(n),this._post({type:D,jobId:n})}))};this._outJobs.set(n,s),this._post({type:P,jobId:n,modulePath:e})}))}_onMessage(e){const t=(0,f.VI)(e);if(t)switch(t.type){case E:this._onOpenedMessage(t);break;case L:this._onResponseMessage(t);break;case D:this._onAbortMessage(t);break;case N:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,r=e.jobId,n=t.get(r);n&&(n.controller&&n.controller.abort(),t.delete(r))}_onInvokeMessage(e){const{methodName:t,jobId:r,data:n,abortable:i}=e,s=i?new AbortController:null,a=this._inJobs,l=h[t];let u;try{if("function"!=typeof l)throw new TypeError(`${t} is not a function`);u=l.call(null,n,{signal:s?s.signal:null})}catch(e){return void this._post({type:L,jobId:r,error:(0,f.mF)(e)})}(0,o.$X)(u)?(a.set(r,{controller:s,promise:u}),u.then((e=>{a.has(r)&&(a.delete(r),this._post({type:L,jobId:r},e))}),(e=>{a.has(r)&&(a.delete(r),e||(e={message:"Error encountered at method"+t}),(0,o.zf)(e)||this._post({type:L,jobId:r,error:(0,f.mF)(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:L,jobId:r},u)}_onOpenedMessage(e){const{jobId:t,data:r}=e,n=this._outJobs.get(t);n&&(this._outJobs.delete(t),(0,c.xt)(n.abortHandle),n.resolve(r))}_onResponseMessage(e){const{jobId:t,error:r,data:i}=e,o=this._outJobs.get(t);o&&(this._outJobs.delete(t),(0,c.xt)(o.abortHandle),r?o.reject(n.A.fromJSON(JSON.parse(r))):o.resolve(i))}_post(e,t,r){return(0,f.u1)(this.worker,e,t,r)}}const j=(0,i.A)("host-browser")?Math.min(navigator.hardwareConcurrency-1,(0,i.A)("workers-pool-size")??8):0;let O=(0,i.A)("esri-mobile")?Math.min(j,3):j;O||(O=(0,i.A)("safari")&&(0,i.A)("mac")?7:2);let V=0;const Z=[];function z(){J()}async function U(e,t){const r=new s.A,{registryTarget:n,...i}=t;return await r.open(e,i),n&&(0,a.k)(n,r),r}async function B(e,t={}){if("string"!=typeof e)throw new n.A("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if((0,i.A)("host-webworker")&&!(0,i.A)("esri-workers")&&(r="local"),"local"===r){let r=await l.A.loadWorker(e);r||(r=await import(e)),(0,o.Te)(t.signal);const n=t.client||r;return U([l.A.connect(r,t.schedule)],{...t,client:n})}if(await J(),(0,o.Te)(t.signal),"dedicated"===r){const r=V++%O;return U([await Z[r].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const r=Math.min(t.maxNumWorkers,O);if(r<O){const n=new Array(r);for(let i=0;i<r;++i){const r=V++%O;n[i]=Z[r].open(e,t)}return U(n,t)}}return U(Z.map((r=>r.open(e,t))),t)}let G,H=null;async function J(){if(H)return H;G=new AbortController;const e=[];for(let t=0;t<O;t++){const r=F.create(t).then((e=>(Z[t]=e,e)));e.push(r)}return H=Promise.all(e),H}},65298:function(e,t,r){r.d(t,{O7:function(){return _},Hr:function(){return x},el:function(){return A},mT:function(){return C},XX:function(){return v}});var n=r(25591),i=r(39819),o=r(40633),s=r(44740),a=r(91508),l=r(65417),u=r(57652),c=r(1644),p=(r(50917),r(93040)),d=r(74697),h=r(39397),f=r(90683),m=r(26765);const y=()=>o.A.getLogger("esri.geometry.support.normalizeUtils");function g(e){return"polygon"===e[0].type}function w(e){return"polyline"===e[0].type}function b(e){const t=[];let r=0,n=0;for(let i=0;i<e.length;i++){const o=e[i];let s=null;for(let e=0;e<o.length;e++)s=o[e],t.push(s),0===e?(r=s[0],n=r):(r=Math.min(r,s[0]),n=Math.max(n,s[0]));s&&t.push([(r+n)/2,0])}return t}function v(e,t){if(!(e instanceof a.A||e instanceof s.A)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw y().error(e),new i.A(e)}const r=(0,l.r8)(e),n=[];for(const e of r){const r=[];n.push(r),r.push([e[0][0],e[0][1]]);for(let n=0;n<e.length-1;n++){const i=e[n][0],o=e[n][1],s=e[n+1][0],a=e[n+1][1],l=Math.sqrt((s-i)*(s-i)+(a-o)*(a-o)),u=(a-o)/l,c=(s-i)/l,p=l/t;if(p>1){for(let e=1;e<=p-1;e++){const n=e*t,s=c*n+i,a=u*n+o;r.push([s,a])}const e=(l+Math.floor(p-1)*t)/2,n=c*e+i,s=u*e+o;r.push([n,s])}r.push([s,a])}}return function(e){return"polygon"===e.type}(e)?new s.A({rings:n,spatialReference:e.spatialReference}):new a.A({paths:n,spatialReference:e.spatialReference})}function M(e,t,r){if(t){const t=v(e,1e6);e=(0,c.ci)(t,!0)}return r&&(e=(0,l.kS)(e,r)),e}function S(e,t,r){if(Array.isArray(e)){const n=e[0];if(n>t){const r=(0,l.kd)(n,t);e[0]=n+r*(-2*t)}else if(n<r){const t=(0,l.kd)(n,r);e[0]=n+t*(-2*r)}}else{const n=e.x;if(n>t){const r=(0,l.kd)(n,t);e=e.clone().offset(r*(-2*t),0)}else if(n<r){const t=(0,l.kd)(n,r);e=e.clone().offset(t*(-2*r),0)}}return e}function I(e,t){let r=-1;for(let n=0;n<t.cutIndexes.length;n++){const i=t.cutIndexes[n],o=t.geometries[n],s=(0,l.r8)(o);for(let e=0;e<s.length;e++){const t=s[e];t.some((r=>{if(r[0]<180)return!0;{let r=0;for(let e=0;e<t.length;e++){const n=t[e][0];r=n>r?n:r}r=Number(r.toFixed(9));const n=-360*(0,l.kd)(r,180);for(let r=0;r<t.length;r++){const t=o.getPoint(e,r);o.setPoint(e,r,t.clone().offset(n,0))}return!0}}))}if(i===r){if(g(e))for(const t of(0,l.r8)(o))e[i]=e[i].addRing(t);else if(w(e))for(const t of(0,l.r8)(o))e[i]=e[i].addPath(t)}else r=i,e[i]=o}return e}async function A(e,t,r){if(!Array.isArray(e))return A([e],t);t&&"string"!=typeof t&&y().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i="string"==typeof t?t:t?.url??n.default.geometryServiceUrl;let o,g,w,b,v,x,_,C,T=0;const R=[],k=[];for(const t of e)if(null!=t)if(o||(o=t.spatialReference,g=(0,u.Vp)(o),w=o.isWebMercator,x=w?102100:4326,b=l.j7[x].maxX,v=l.j7[x].minX,_=l.j7[x].plus180Line,C=l.j7[x].minus180Line),g)if("mesh"===t.type)k.push(t);else if("point"===t.type)k.push(S(t.clone(),b,v));else if("multipoint"===t.type){const e=t.clone();e.points=e.points.map((e=>S(e,b,v))),k.push(e)}else if("extent"===t.type){const e=t.clone()._normalize(!1,!1,g);k.push(e.rings?new s.A(e):e)}else if(t.extent){const e=t.extent,r=(0,l.kd)(e.xmin,v)*(2*b);let n=0===r?t.clone():(0,l.kS)(t.clone(),r);e.offset(r,0);let{xmin:i,xmax:o}=e;i=Number(i.toFixed(9)),o=Number(o.toFixed(9)),e.intersects(_)&&o!==b?(T=o>T?o:T,n=M(n,w),R.push(n),k.push("cut")):e.intersects(C)&&i!==v?(T=o*(2*b)>T?o*(2*b):T,n=M(n,w,360),R.push(n),k.push("cut")):k.push(n)}else k.push(t.clone());else k.push(t);else k.push(t);let D=(0,l.kd)(T,b),N=-90;const P=D,E=new a.A;for(;D>0;){const e=360*D-180;E.addPath([[e,N],[e,-1*N]]),N*=-1,D--}if(R.length>0&&P>0){const t=I(R,await async function(e,t,r,n){const i=(0,h.Dl)(e),o=t[0].spatialReference,s={...n,responseType:"json",query:{...i.query,f:"json",sr:(0,u.YX)(o),target:JSON.stringify({geometryType:(0,d.$B)(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await(0,p.A)(i.path+"/cut",s),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map((e=>{const t=(0,d.rS)(e);return t.spatialReference=o,t}))}}(i,R,E,r)),n=[],o=[];for(let r=0;r<k.length;r++){const i=k[r];if("cut"!==i)o.push(i);else{const i=t.shift(),s=e[r];null!=s&&"polygon"===s.type&&s.rings&&s.rings.length>1&&i.rings.length>=s.rings.length?(n.push(i),o.push("simplify")):o.push(w?(0,c.Gh)(i):i)}}if(!n.length)return o;const s=await async function(e,t,r){const n="string"==typeof e?(0,f.An)(e):e,i=t[0].spatialReference,o=(0,d.$B)(t[0]),s={...r,query:{...n.query,f:"json",sr:(0,u.YX)(i),geometries:JSON.stringify((0,m.X)(t))}},{data:a}=await(0,p.A)(n.path+"/simplify",s);return(0,m.V)(a.geometries,o,i)}(i,n,r),a=[];for(let e=0;e<o.length;e++){const t=o[e];"simplify"!==t?a.push(t):a.push(w?(0,c.Gh)(s.shift()):s.shift())}return a}const L=[];for(let e=0;e<k.length;e++){const t=k[e];if("cut"!==t)L.push(t);else{const e=R.shift();L.push(!0===w?(0,c.Gh)(e):e)}}return L}function x(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&(0,u.Vp)(e.spatialReference);if(!r)return t;const[n,i]=r.valid,o=2*i,{width:s}=t;let a,{xmin:l,xmax:c}=t;if([l,c]=[c,l],"extent"===e.type||0===s||s<=i||s>o||l<n||c>i)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=b(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=b(e.paths);break;case"multipoint":a=e.points}const p=t.clone();for(let e=0;e<a.length;e++){let t=a[e][0];t<0?(t+=i,c=Math.max(t,c)):(t-=i,l=Math.min(t,l))}return p.xmin=l,p.xmax=c,p.width<s?(p.xmin-=i,p.xmax-=i,p):t}function _(e,t,r){const n=(0,u.Vp)(r);if(null==n)return e;const[i,o]=n.valid,s=2*o;let a=0,l=0;t>o?a=Math.ceil(Math.abs(t-o)/s):t<i&&(a=-Math.ceil(Math.abs(t-i)/s)),e>o?l=Math.ceil(Math.abs(e-o)/s):e<i&&(l=-Math.ceil(Math.abs(e-i)/s));let c=e+(a-l)*s;const p=c-t;return p>o?c-=s:p<i&&(c+=s),c}function C(e,t){const r=(0,u.Vp)(t);if(r){const[t,n]=r.valid,i=n-t;if(e<t)for(;e<t;)e+=i;if(e>n)for(;e>n;)e-=i}return e}},65417:function(e,t,r){r.d(t,{j7:function(){return s},kS:function(){return l},kd:function(){return a},r8:function(){return u}});var n=r(91508),i=r(57165),o=r(74697);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.A({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.A.WebMercator}),minus180Line:new n.A({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.A({paths:[[[180,-180],[180,180]]],spatialReference:i.A.WGS84}),minus180Line:new n.A({paths:[[[-180,-180],[-180,180]]],spatialReference:i.A.WGS84})}};function a(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){const r=u(e);for(const e of r)for(const r of e)r[0]+=t;return e}function u(e){return(0,o.Bi)(e)?e.rings:e.paths}},10734:function(e,t,r){r.r(t),r.d(t,{default:function(){return Rr}});var n=r(53804),i=r(90473),o=r(75743),s=r(39819),a=r(77793),l=r(60539),u=r(23502),c=(r(58941),r(40633)),p=(r(13798),r(65953)),d=r(81392),h=r(20833),f=r(50917),m=r(59469),y=r(92778),g=r(93040),w=r(21609),b=r(28181),v=r(90683),M=r(67888),S=r(47332),I=r(57652),A=r(7010),x=r(7860),_=r(30905),C=r(77345),T=r(95738);const R={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}};var k=r(3212),D=r(41259),N=r(53096);const P=new Set(["u1","u2","u4","u8","s8","u16","s16"]),E={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},L=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function F(e){return L.has(e.type)}function j(e,t){if(!e||!t)return(0,w.o8)(e||t);const r=(0,w.o8)(e);if(r.functionDefinition&&t.rasterFunctionDefinition){const e=t.rasterFunctionDefinition;(e.thumbnail||e.thumbnailEx)&&(e.thumbnail=e.thumbnailEx=void 0),O(r.functionDefinition.arguments,t),r.rasterFunctionDefinition=r.functionDefinition.toJSON()}else"none"!==t.functionName?.toLowerCase()&&(Z(r.functionArguments).Raster=t);return r}function O(e,t){for(const r in e)"raster"===r.toLowerCase()&&("RasterFunctionVariable"===e[r].type?(e[r]=t.rasterFunctionDefinition,e[r].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===e[r].type&&O(e[r].arguments,t))}function V(e){const t=(0,w.o8)(R[e.functionName+"Function"]),r=e.functionArguments;for(const e in r)"raster"===e.toLowerCase()?(t.arguments[e]=V(r[e]),t.arguments[e].type="RasterFunctionTemplate"):"colormap"===e.toLowerCase()?(t.arguments[e].value=H(r[e]),t.arguments.ColorSchemeType.value=0):t.arguments[e].value=r[e];return t}function Z(e){const t=e?.Raster??e?.raster;return t&&"esri.layers.support.RasterFunction"===t.declaredClass?Z(t.functionArguments):e}const z={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function U(e,t){const r=P.has(t)?(0,T.hP)(t):null;return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function B(e){if(null==e)return;const{fields:t}=e,r=t?.find((e=>e?.name&&"value"===e.name.toLowerCase()));return r?.name}function G(e){return"polygon-3d"===e.symbol?.type?e.symbol.symbolLayers?.find((e=>"fill"===e.type))?.material?.color:e.symbol?.color}function H(e){const t=[],r=[];return e.forEach((e=>{t.push(e[0]),r.push((0,k.vL)([...e.slice(1),255]))})),{type:"RasterColormap",values:t,colors:r}}var J=r(84284),q=r(32405);let W=class extends _.oY{constructor(){super(...arguments),this.layer=null,this.compression=void 0,this.pixelType=void 0,this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(e,t,r){this.layer.version<10.3||(t[r]=e)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(e,t,r){this.format&&this.format.toLowerCase().includes("jpg")&&null!=e&&(t[r]=e)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)}get format(){return"vector-field"===this.layer.renderer?.type?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(e,t,r){"lerc"===this.format&&this.layer.version>=10.5&&(t[r]=e)}get version(){const e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("rasterFunction"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("definitionExpression"),e.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1}set version(e){this._set("version",e)}get mosaicRule(){const e=this.layer;let t=e.mosaicRule;const r=e.definitionExpression;return t?r&&r!==t.where&&(t=t.clone(),t.where=r):r&&(t=new J.A({where:r})),t}get rasterFunction(){const e=this.layer;let{rasterFunction:t}=e;const r=e.pixelFilter,n=!e.format||e.format.includes("jpg")||e.format.includes("png");t=this._addResampleRasterFunction(t);const i=e.multidimensionalSubset?.areaOfInterest;return i&&(t=function(e,t){return j(new C.A({functionName:"Clip",functionArguments:{ClippingGeometry:t.toJSON(),ClippingType:1}}),e)}(t,i)),n&&!r&&"vector-field"!==e.renderer?.type&&(t=this.combineRendererWithRenderingRule(t)),t}combineRendererWithRenderingRule(e){const t=this.layer,{rasterInfo:r,renderer:n}=t;return e=e||t.rasterFunction,n&&F(n)?j(function(e,t){switch(t=t||{},e.type){case"raster-stretch":return function(e,t){const r=t.convertToRFT,n=new C.A;n.functionName="Stretch";const i=z[D.u.toJSON(e.stretchType)],o="u8",s=e.customStatistics?.map((e=>[e.min,e.max,e.avg??0,e.stddev??1])),a={StretchType:i,Statistics:s,DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(null!=e.outputMin&&(a.Min=e.outputMin),null!=e.outputMax&&(a.Max=e.outputMax),i===z.standardDeviation?(a.NumberOfStandardDeviations=e.numberOfStandardDeviations,n.outputPixelType=o):i===z.percentClip?(a.MinPercent=e.minPercent,a.MaxPercent=e.maxPercent,n.outputPixelType=o):i===z.minMax?n.outputPixelType=o:i===z.sigmoid&&(a.SigmoidStrengthLevel=e.sigmoidStrengthLevel),n.functionArguments=a,n.variableName="Raster",e.colorRamp){const i=e.colorRamp,o=new C.A;if(r)o.functionArguments={ColorRamp:(0,k.hf)(i)};else{const r=(0,k.hs)(i,!0);if(r)o.functionArguments={colorRampName:r};else if(!t.convertColorRampToColormap||"algorithmic"!==i.type&&"multipart"!==i.type){const t=e.colorRamp.toJSON();"algorithmic"===t.type?t.algorithm=t.algorithm||"esriCIELabAlgorithm":"multipart"===t.type&&t.colorRamps?.length&&t.colorRamps.forEach((e=>e.algorithm=e.algorithm||"esriCIELabAlgorithm")),o.functionArguments={colorRamp:t}}else o.functionArguments={Colormap:(0,k.R8)(i)}}return o.variableName="Raster",o.functionName="Colormap",o.functionArguments.Raster=n,r?new C.A({rasterFunctionDefinition:V(o)}):o}return r?new C.A({rasterFunctionDefinition:V(n)}):n}(e,t);case"class-breaks":return function(e,t){const r=[],n=[],i=[],o=[],s=1e-4,{pixelType:a,rasterAttributeTable:l}=t,u=null==l?null:l.features,c=B(l);if(c&&u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach(((t,r)=>{const n=t.symbol?.color;let i;n?.a&&null!=t.minValue&&null!=t.maxValue&&u.forEach((s=>{null!=t.minValue&&null!=t.maxValue&&(i=s.attributes[e.field],(i>=t.minValue&&i<t.maxValue||r===e.classBreakInfos.length-1&&i>=t.minValue)&&o.push([s.attributes[c],n.r,n.g,n.b]))}))}));const r=a?U(o,a):o,n=new C.A;return n.functionName="Colormap",n.functionArguments={},n.functionArguments.Colormap=r,n.variableName="Raster",t.convertToRFT?new C.A({rasterFunctionDefinition:V(n)}):n}e.classBreakInfos.forEach(((e,t)=>{if(null==e.minValue||null==e.maxValue)return;const a=e.symbol&&e.symbol.color;a?.a?(0===t?r.push(e.minValue,e.maxValue+s):r.push(e.minValue+s,e.maxValue+s),n.push(t),o.push([t,a.r,a.g,a.b])):i.push(e.minValue,e.maxValue)}));const p=a?U(o,a):o,d=new C.A;d.functionName="Remap",d.functionArguments={InputRanges:r,OutputValues:n,NoDataRanges:i},d.variableName="Raster";const h=new C.A;return h.functionName="Colormap",h.functionArguments={Colormap:p,Raster:d},t.convertToRFT?new C.A({rasterFunctionDefinition:V(h)}):h}(e,t);case"unique-value":return function(e,t){const r=[],{pixelType:n,rasterAttributeTable:i}=t,o=null==i?null:i.features,s=B(i),a=e.defaultSymbol?.color?.toRgb(),l=e.uniqueValueInfos;if(l)if(o){if(s){const t=new Map;l.forEach((e=>{const r=e.value,n=G(e);null!=r&&n?.a&&t.set(String(r),n.toRgb())}));const n=e.field;n&&o.forEach((({attributes:e})=>{const i=String(e[n]),o=e[s],l=t.get(i);l?r.push([o,...l]):a&&r.push([o,...a])}))}}else for(let e=0;e<l.length;e++){const t=l[e],n=G(t),i=+t.value;if(n?.a){if(isNaN(i))return null;r.push([i,n.r,n.g,n.b])}}const u=n?U(r,n):r,c=new C.A;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",t.convertToRFT?new C.A({rasterFunctionDefinition:V(c)}):c}(e,t);case"raster-colormap":return function(e,t){const r=e.extractColormap();if(!r||0===r.length)return null;const{pixelType:n}=t,i=n?U(r,n):r,o=new C.A;return o.functionName="Colormap",o.functionArguments={},o.functionArguments.Colormap=i,t.convertToRFT?new C.A({rasterFunctionDefinition:V(o)}):o}(e,t);case"vector-field":return function(e,t){const r=new C.A;r.functionName="VectorFieldRenderer";const{dataType:n,bandNames:i}=t,o="vector-uv"===n;let s,a;if(i&&2===i.length){const e=i.map((e=>e.toLowerCase()));s=e.indexOf("magnitude"),a=e.indexOf("direction")}-1!==s&&null!==s||(s=0,a=1);const l="arithmetic"===e.rotationType?1:2,u="flow-from"===e.flowRepresentation?0:1,c=e.visualVariables?e.visualVariables.find((e=>"Magnitude"===e.field)):new N.A,p={magnitudeBandID:s,directionBandID:a,isUVComponents:o,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:E[e.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};r.functionArguments=p;const d=V(r);return t.convertToRFT?C.A.fromJSON({rasterFunctionDefinition:d}):r}(e,t);case"raster-shaded-relief":return function(e,t){const r=t.convertToRFT;if("elevation"!==t.dataType&&("generic"!==t.dataType||1!==t.bandCount||"s16"!==t.pixelType&&"s32"!==t.pixelType&&"f32"!==t.pixelType&&"f64"!==t.pixelType))return new C.A;const n=new C.A;n.functionName="Hillshade";const i="traditional"===e.hillshadeType?0:1,o="none"===e.scalingType?1:3,s={HillshadeType:i,SlopeType:o,ZFactor:e.zFactor};return 0===i&&(s.Azimuth=e.azimuth,s.Altitude=e.altitude),3===o&&(s.PSPower=e.pixelSizePower,s.PSZFactor=e.pixelSizeFactor),n.functionArguments=s,n.variableName="Raster",e.colorRamp&&(n.functionName="ShadedRelief",r?s.ColorRamp=(0,k.hf)(e.colorRamp):s.Colormap=(0,k.R8)(e.colorRamp)),r?new C.A({rasterFunctionDefinition:V(n)}):n}(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}(n,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandNames:r.bandInfos.map((({name:e})=>e)),convertColorRampToColormap:t.version<10.6,convertToRFT:!!e?.rasterFunctionDefinition,bandCount:r.bandCount}),e):e}_addResampleRasterFunction(e){if("vector-field"!==this.layer.renderer?.type||"Resample"===e?.functionName)return e;const t="esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,r=this.layer.serviceRasterInfo.pixelSize;let n=new C.A({functionName:"Resample",functionArguments:{ResamplingType:t,InputCellSize:r}});return n=e?.rasterFunctionDefinition?new C.A({rasterFunctionDefinition:V(n)}):n,j(n,e)}};(0,n._)([(0,u.MZ)()],W.prototype,"layer",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"adjustAspectRatio",null),(0,n._)([(0,d.K)("adjustAspectRatio")],W.prototype,"writeAdjustAspectRatio",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"bandIds",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"compression",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"compressionQuality",null),(0,n._)([(0,d.K)("compressionQuality")],W.prototype,"writeCompressionQuality",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"compressionTolerance",null),(0,n._)([(0,d.K)("compressionTolerance")],W.prototype,"writeCompressionTolerance",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"format",null),(0,n._)([(0,u.MZ)({type:String,json:{read:{reader:q.SZ.read},write:{writer:q.SZ.write}}})],W.prototype,"interpolation",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"noData",null),(0,n._)([(0,u.MZ)({type:String,json:{read:{reader:q.hm.read},write:{writer:q.hm.write}}})],W.prototype,"noDataInterpretation",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"pixelType",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"lercVersion",void 0),(0,n._)([(0,d.K)("lercVersion")],W.prototype,"writeLercVersion",null),(0,n._)([(0,u.MZ)({type:Number})],W.prototype,"version",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],W.prototype,"mosaicRule",null),(0,n._)([(0,u.MZ)({json:{write:!0,name:"renderingRule"}})],W.prototype,"rasterFunction",null),W=(0,n._)([(0,p.$)("esri.layers.support.ExportImageServiceParameters")],W);var $=r(56740),K=r(7103),Y=r(55925),Q=r(66362),X=r(21327),ee=r(98521),te=r(46766),re=r(30158),ne=r(43008),ie=r(53611),oe=r(41262),se=r(31233),ae=r(65298),le=r(39397),ue=r(45532);let ce=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.fromGeometry=null,this.toGeometry=null,this.objectIds=null,this.where=null,this.maxCount=null}};(0,n._)([(0,u.MZ)({type:ue.default,json:{read:!0}})],ce.prototype,"fromGeometry",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{read:!0,write:!0}})],ce.prototype,"toGeometry",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],ce.prototype,"objectIds",void 0),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],ce.prototype,"where",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],ce.prototype,"maxCount",void 0),ce=(0,n._)([(0,p.$)("esri.rest.support.FindImagesParameters")],ce);const pe=ce,de=e=>{let t=class extends e{constructor(){super(...arguments),this.make=null,this.model=null,this.focalLength=null,this.pixelSize=null,this.rows=null,this.cols=null}};return(0,n._)([(0,u.MZ)({json:{write:!0}})],t.prototype,"make",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],t.prototype,"model",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],t.prototype,"focalLength",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],t.prototype,"pixelSize",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],t.prototype,"rows",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],t.prototype,"cols",void 0),t=(0,n._)([(0,p.$)("esri.rest.support.CameraInfoMixin")],t),t};let he=class extends(de(_.oY)){constructor(){super(...arguments),this.id=null,this.referenceUri=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.perspectiveCenter=null,this.orientation=null}writeAcquisitionDate(e,t){t.acquisitionDate=e?.getTime()}};(0,n._)([(0,u.MZ)({json:{write:!0}})],he.prototype,"id",void 0),(0,n._)([(0,u.MZ)({json:{name:"uri",write:!0}})],he.prototype,"referenceUri",void 0),(0,n._)([(0,u.MZ)({type:Date,json:{write:!0}})],he.prototype,"acquisitionDate",void 0),(0,n._)([(0,d.K)("acquisitionDate")],he.prototype,"writeAcquisitionDate",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],he.prototype,"cameraID",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],he.prototype,"center",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],he.prototype,"perspectiveCenter",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],he.prototype,"orientation",void 0),he=(0,n._)([(0,p.$)("esri.rest.support.ImageInspectionInfo")],he);const fe=he;let me=class extends _.oY{constructor(){super(...arguments),this.images=null}};(0,n._)([(0,u.MZ)({type:[fe],json:{write:!0}})],me.prototype,"images",void 0),me=(0,n._)([(0,p.$)("esri.rest.support.FindImagesResult")],me);const ye=me;var ge,we=r(57165);let be=ge=class extends _.oY{constructor(e){super(e),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new ge((0,w.o8)({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};(0,n._)([(0,u.MZ)({type:[String],json:{name:"angleName",write:!0}})],be.prototype,"angleNames",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],be.prototype,"point",void 0),(0,n._)([(0,u.MZ)({type:we.A,json:{write:!0}})],be.prototype,"spatialReference",void 0),(0,n._)([(0,u.MZ)({type:M.jz,json:{write:!0}})],be.prototype,"rasterId",void 0),be=ge=(0,n._)([(0,p.$)("esri.rest.support.ImageAngleParameters")],be);const ve=be;let Me=class extends _.oY{constructor(e){super(e),this.north=null,this.up=null,this.spatialReference=null}};(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],Me.prototype,"north",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],Me.prototype,"up",void 0),(0,n._)([(0,u.MZ)({type:we.A,json:{write:!0}})],Me.prototype,"spatialReference",void 0),Me=(0,n._)([(0,p.$)("esri.rest.support.ImageAngleResult")],Me);const Se=Me;var Ie=r(62938),Ae=r(74697);const xe=new(r(73037).J)({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});let _e=class extends _.oY{constructor(){super(...arguments),this.type=null,this.measureOperation=null,this.mosaicRule=null,this.pixelSize=null,this.raster=void 0}};var Ce;(0,n._)([(0,u.MZ)()],_e.prototype,"type",void 0),(0,n._)([(0,u.MZ)({type:xe.apiValues,json:{read:xe.read,write:xe.write}})],_e.prototype,"measureOperation",void 0),(0,n._)([(0,u.MZ)({type:J.A,json:{write:!0}})],_e.prototype,"mosaicRule",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],_e.prototype,"pixelSize",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],_e.prototype,"raster",void 0),_e=(0,n._)([(0,p.$)("esri.rest.support.BaseImageMeasureParameters")],_e);let Te=Ce=class extends _e{constructor(){super(...arguments),this.type="area-perimeter",this.geometry=null,this.is3D=!1,this.linearUnit="meters",this.areaUnit="square-meters"}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=e.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new Ce((0,w.o8)({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};(0,n._)([(0,u.MZ)({types:f.yR,json:{name:"fromGeometry",read:!0,write:!0}})],Te.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],Te.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({type:xe.apiValues,json:{write:xe.write}})],Te.prototype,"measureOperation",null),(0,n._)([(0,u.MZ)({json:{read:!0}})],Te.prototype,"is3D",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.Sk.read,write:Ie.Sk.write}})],Te.prototype,"linearUnit",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.dk.read,write:Ie.dk.write}})],Te.prototype,"areaUnit",void 0),Te=Ce=(0,n._)([(0,p.$)("esri.rest.support.ImageAreaParameters")],Te);const Re=Te;let ke=class extends _.oY{constructor(){super(...arguments),this.value=null,this.displayValue=null,this.uncertainty=null}};(0,n._)([(0,u.MZ)({type:Number,json:{read:!0,write:!0}})],ke.prototype,"value",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:!0,write:!0}})],ke.prototype,"displayValue",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{read:!0,write:!0}})],ke.prototype,"uncertainty",void 0),ke=(0,n._)([(0,p.$)("esri.rest.support.BaseImageMeasureResult.BaseImageMeasureResultValue")],ke);let De=class extends ke{constructor(){super(...arguments),this.unit=null}};(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.Sk.read,write:Ie.Sk.write}})],De.prototype,"unit",void 0),De=(0,n._)([(0,p.$)("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultLengthValue")],De);let Ne=class extends ke{constructor(){super(...arguments),this.unit=null}};(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.dk.read,write:Ie.dk.write}})],Ne.prototype,"unit",void 0),Ne=(0,n._)([(0,p.$)("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAreaValue")],Ne);let Pe=class extends ke{constructor(){super(...arguments),this.unit=null}};(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.b$.read,write:Ie.b$.write}})],Pe.prototype,"unit",void 0),Pe=(0,n._)([(0,p.$)("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAngleValue")],Pe);let Ee=class extends _.oY{constructor(){super(...arguments),this.name=null,this.sensorName=null}};(0,n._)([(0,u.MZ)({type:String,json:{read:!0,write:!0}})],Ee.prototype,"name",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:!0,write:!0}})],Ee.prototype,"sensorName",void 0),Ee=(0,n._)([(0,p.$)("esri.rest.support.BaseImageMeasureResult")],Ee);let Le=class extends Ee{constructor(){super(...arguments),this.area=null,this.perimeter=null}};(0,n._)([(0,u.MZ)({type:Ne,json:{read:!0,write:!0}})],Le.prototype,"area",void 0),(0,n._)([(0,u.MZ)({type:De,json:{read:!0,write:!0}})],Le.prototype,"perimeter",void 0),Le=(0,n._)([(0,p.$)("esri.rest.support.ImageAreaResult")],Le);const Fe=Le;let je=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.outSpatialReference=null}};(0,n._)([(0,u.MZ)({type:we.A,json:{name:"outSR",write:!0}})],je.prototype,"outSpatialReference",void 0),je=(0,n._)([(0,p.$)("esri.rest.support.ImageBoundaryParameters")],je);const Oe=je;var Ve=r(91484),Ze=r(44740);let ze=class extends _.oY{constructor(){super(...arguments),this.area=null,this.geometry=null}readGeometry(e,t){return null==e?null:e.rings?Ze.A.fromJSON(e):Ve.default.fromJSON(e)}};(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],ze.prototype,"area",void 0),(0,n._)([(0,u.MZ)({json:{name:"shape",write:!0}})],ze.prototype,"geometry",void 0),(0,n._)([(0,S.w)("geometry")],ze.prototype,"readGeometry",null),ze=(0,n._)([(0,p.$)("esri.rest.support.ImageBoundaryResult")],ze);const Ue=ze;var Be;let Ge=Be=class extends _e{constructor(){super(...arguments),this.type="distance-angle",this.fromGeometry=null,this.toGeometry=null,this.is3D=!1,this.linearUnit="meters",this.angularUnit="degrees"}writeFromGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=e.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new Be((0,w.o8)({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};(0,n._)([(0,u.MZ)({type:ue.default,json:{read:!0,write:!0}})],Ge.prototype,"fromGeometry",void 0),(0,n._)([(0,d.K)("fromGeometry")],Ge.prototype,"writeFromGeometry",null),(0,n._)([(0,u.MZ)({type:ue.default,json:{read:!0,write:!0}})],Ge.prototype,"toGeometry",void 0),(0,n._)([(0,u.MZ)({type:xe.apiValues,json:{write:xe.write}})],Ge.prototype,"measureOperation",null),(0,n._)([(0,u.MZ)({json:{read:!0}})],Ge.prototype,"is3D",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.Sk.read,write:Ie.Sk.write}})],Ge.prototype,"linearUnit",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.b$.read,write:Ie.b$.write}})],Ge.prototype,"angularUnit",void 0),Ge=Be=(0,n._)([(0,p.$)("esri.rest.support.ImageDistanceParameters")],Ge);const He=Ge;let Je=class extends Ee{constructor(){super(...arguments),this.distance=null,this.azimuthAngle=null,this.elevationAngle=null}};(0,n._)([(0,u.MZ)({type:De,json:{read:!0,write:!0}})],Je.prototype,"distance",void 0),(0,n._)([(0,u.MZ)({type:Pe,json:{read:!0,write:!0}})],Je.prototype,"azimuthAngle",void 0),(0,n._)([(0,u.MZ)({type:Pe,json:{read:!0,write:!0}})],Je.prototype,"elevationAngle",void 0),Je=(0,n._)([(0,p.$)("esri.rest.support.ImageDistanceResult")],Je);const qe=Je;var We=r(74376),$e=r(4045),Ke=r(52038);let Ye=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.geometry=null,this.objectIds=null,this.spatialRelationship="intersects",this.timeExtent=null,this.where=null}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=JSON.stringify(e.toJSON()))}};(0,n._)([(0,u.MZ)({types:f.yR,json:{read:Ae.rS,write:!0}})],Ye.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],Ye.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],Ye.prototype,"objectIds",void 0),(0,n._)([(0,We.e)($e.x,{ignoreUnknown:!1,name:"spatialRel"})],Ye.prototype,"spatialRelationship",void 0),(0,n._)([(0,u.MZ)({type:Ke.A,json:{name:"time",write:!0}})],Ye.prototype,"timeExtent",void 0),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],Ye.prototype,"where",void 0),Ye=(0,n._)([(0,p.$)("esri.rest.support.ImageGPSInfoParameters")],Ye);const Qe=Ye;let Xe=class extends(de(_.oY)){constructor(){super(...arguments),this.id=null}};(0,n._)([(0,u.MZ)({json:{write:!0}})],Xe.prototype,"id",void 0),Xe=(0,n._)([(0,p.$)("esri.rest.support.CameraInfo")],Xe);const et=Xe;let tt=class extends _.oY{constructor(){super(...arguments),this.id=null,this.name=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.gps=null,this.orientation=null}writeAcquisitionDate(e,t){t.acquisitionDate=e?.getTime()}};(0,n._)([(0,u.MZ)({json:{write:!0}})],tt.prototype,"id",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],tt.prototype,"name",void 0),(0,n._)([(0,u.MZ)({type:Date,json:{write:!0}})],tt.prototype,"acquisitionDate",void 0),(0,n._)([(0,d.K)("acquisitionDate")],tt.prototype,"writeAcquisitionDate",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],tt.prototype,"cameraID",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],tt.prototype,"center",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],tt.prototype,"gps",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],tt.prototype,"orientation",void 0),tt=(0,n._)([(0,p.$)("esri.rest.support.ImageGPSInfo")],tt);const rt=tt;let nt=class extends _.oY{constructor(){super(...arguments),this.images=null,this.cameras=null}};(0,n._)([(0,u.MZ)({type:[rt],json:{write:!0}})],nt.prototype,"images",void 0),(0,n._)([(0,u.MZ)({type:[et],json:{write:!0}})],nt.prototype,"cameras",void 0),nt=(0,n._)([(0,p.$)("esri.rest.support.ImageGPSInfoResult")],nt);const it=nt;var ot;let st=ot=class extends _e{constructor(){super(...arguments),this.type="height",this.fromGeometry=null,this.toGeometry=null,this.operationType="base-and-top",this.linearUnit="meters"}writeFromGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=e.toJSON())}get measureOperation(){return this.operationType}clone(){return new ot((0,w.o8)({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};(0,n._)([(0,u.MZ)({type:ue.default,json:{read:!0}})],st.prototype,"fromGeometry",void 0),(0,n._)([(0,d.K)("fromGeometry")],st.prototype,"writeFromGeometry",null),(0,n._)([(0,u.MZ)({type:ue.default,json:{read:!0,write:!0}})],st.prototype,"toGeometry",void 0),(0,n._)([(0,u.MZ)({type:xe.apiValues,json:{write:xe.write}})],st.prototype,"measureOperation",null),(0,n._)([(0,u.MZ)({json:{read:!0}})],st.prototype,"operationType",void 0),(0,n._)([(0,u.MZ)({type:String,json:{read:Ie.Sk.read,write:Ie.Sk.write}})],st.prototype,"linearUnit",void 0),st=ot=(0,n._)([(0,p.$)("esri.rest.support.ImageHeightParameters")],st);const at=st;let lt=class extends Ee{constructor(){super(...arguments),this.height=null}};(0,n._)([(0,u.MZ)({type:De,json:{read:!0,write:!0}})],lt.prototype,"height",void 0),lt=(0,n._)([(0,p.$)("esri.rest.support.ImageHeightResult")],lt);const ut=lt;var ct,pt=r(78263);let dt=ct=class extends _.oY{constructor(){super(...arguments),this.geometry=null,this.rasterFunctions=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t?.mosaicMethod&&(t=J.A.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON()))}set rasterFunction(e){let t=e;t?.rasterFunction&&(t=C.A.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("rasterFunction",t)}writeRasterFunction(e,t,r){null!=e&&(t[r]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[r]=JSON.stringify(e.rasterFunctionDefinition))}writeRasterFunctions(e,t,r){null!=e&&(t[r]=JSON.stringify(e.map((e=>e.rasterFunctionDefinition||e.toJSON()))))}writePixelSize(e,t,r){null!=e&&(t[r]=JSON.stringify(e))}writeTimeExtent(e,t,r){if(null!=e){const n=null!=e.start?e.start.getTime():null,i=null!=e.end?e.end.getTime():null;t[r]=null!=n?null!=i?`${n},${i}`:`${n}`:null}}clone(){return new ct((0,w.o8)({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};(0,n._)([(0,u.MZ)({json:{write:!0}})],dt.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],dt.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({type:J.A,json:{write:!0}})],dt.prototype,"mosaicRule",null),(0,n._)([(0,d.K)("mosaicRule")],dt.prototype,"writeMosaicRule",null),(0,n._)([(0,u.MZ)({type:C.A,json:{write:!0,name:"renderingRule"}})],dt.prototype,"rasterFunction",null),(0,n._)([(0,d.K)("rasterFunction")],dt.prototype,"writeRasterFunction",null),(0,n._)([(0,u.MZ)({type:[C.A],json:{write:!0,name:"renderingRules"}})],dt.prototype,"rasterFunctions",void 0),(0,n._)([(0,d.K)("rasterFunctions")],dt.prototype,"writeRasterFunctions",null),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],dt.prototype,"pixelSize",void 0),(0,n._)([(0,d.K)("pixelSize")],dt.prototype,"writePixelSize",null),(0,n._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],dt.prototype,"returnGeometry",void 0),(0,n._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],dt.prototype,"returnCatalogItems",void 0),(0,n._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],dt.prototype,"returnPixelValues",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],dt.prototype,"maxItemCount",void 0),(0,n._)([(0,u.MZ)({type:Ke.A,json:{write:{target:"time"}}})],dt.prototype,"timeExtent",void 0),(0,n._)([(0,d.K)("timeExtent")],dt.prototype,"writeTimeExtent",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],dt.prototype,"raster",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],dt.prototype,"viewId",void 0),(0,n._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],dt.prototype,"processAsMultidimensional",void 0),dt=ct=(0,n._)([(0,p.$)("esri.rest.support.ImageIdentifyParameters")],dt);const ht=dt;var ft=r(51084);let mt=class extends _.oY{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};(0,n._)([(0,u.MZ)({json:{write:!0}})],mt.prototype,"catalogItemVisibilities",void 0),(0,n._)([(0,u.MZ)({type:ft.A,json:{write:!0}})],mt.prototype,"catalogItems",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],mt.prototype,"location",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],mt.prototype,"name",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],mt.prototype,"objectId",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],mt.prototype,"processedValues",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],mt.prototype,"properties",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],mt.prototype,"value",void 0),mt=(0,n._)([(0,p.$)("esri.rest.support.ImageIdentifyResult")],mt);const yt=mt;var gt;let wt=gt=class extends _.oY{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,r){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map((e=>e.toJSON()))}}clone(){return new gt({geometries:this.geometries?.map((e=>e.clone()))??[],rasterId:this.rasterId})}};(0,n._)([(0,u.MZ)({type:[ue.default],json:{write:!0}})],wt.prototype,"geometries",void 0),(0,n._)([(0,d.K)("geometries")],wt.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({type:M.jz,json:{write:!0}})],wt.prototype,"rasterId",void 0),wt=gt=(0,n._)([(0,p.$)("esri.rest.support.ImagePixelLocationParameters")],wt);const bt=wt;let vt=class extends _.oY{constructor(){super(...arguments),this.geometries=null}};(0,n._)([(0,u.MZ)({json:{write:!0}})],vt.prototype,"geometries",void 0),vt=(0,n._)([(0,p.$)("esri.rest.support.ImagePixelLocationResult")],vt);const Mt=vt;var St;let It=St=class extends _e{constructor(){super(...arguments),this.type="point",this.geometry=null,this.is3D=!1}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=e.toJSON())}get measureOperation(){const{is3D:e,geometry:t}=this;return"point"===t.type?e?"point-3D":"point":e?"centroid-3D":"centroid"}clone(){return new St((0,w.o8)({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};(0,n._)([(0,u.MZ)({types:f.yR,json:{name:"fromGeometry",read:Ae.rS}})],It.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],It.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({type:xe.apiValues,json:{read:xe.read,write:xe.write}})],It.prototype,"measureOperation",null),(0,n._)([(0,u.MZ)({json:{read:!0}})],It.prototype,"is3D",void 0),It=St=(0,n._)([(0,p.$)("esri.rest.support.ImagePointParameters")],It);const At=It;let xt=class extends Ee{constructor(){super(...arguments),this.point=null}};(0,n._)([(0,u.MZ)({type:ue.default,json:{name:"point.value",read:!0,write:!0}})],xt.prototype,"point",void 0),xt=(0,n._)([(0,p.$)("esri.rest.support.ImagePointResult")],xt);const _t=xt;var Ct,Tt=r(71673);let Rt=Ct=class extends _.oY{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=e.toJSON())}set locations(e){if(e?.length){const t=new Tt.A({spatialReference:e[0].spatialReference,points:e.map((({x:e,y:t})=>[e,t]))});this._set("locations",e),this.geometry=t}}clone(){return new Ct((0,w.o8)({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};(0,n._)([(0,u.MZ)({types:f.yR,json:{read:Ae.rS}})],Rt.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],Rt.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)()],Rt.prototype,"locations",null),(0,n._)([(0,u.MZ)({type:String,json:{type:q.SZ.jsonValues,read:q.SZ.read,write:q.SZ.write}})],Rt.prototype,"interpolation",void 0),(0,n._)([(0,u.MZ)({type:J.A,json:{write:!0}})],Rt.prototype,"mosaicRule",void 0),(0,n._)([(0,u.MZ)({type:[String],json:{write:!0}})],Rt.prototype,"outFields",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],Rt.prototype,"pixelSize",void 0),(0,n._)([(0,u.MZ)({type:String,json:{write:!0}})],Rt.prototype,"raster",void 0),(0,n._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],Rt.prototype,"returnFirstValueOnly",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],Rt.prototype,"sampleDistance",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],Rt.prototype,"sampleCount",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],Rt.prototype,"sliceId",void 0),(0,n._)([(0,u.MZ)({type:Ke.A,json:{read:{source:"time"},write:{target:"time"}}})],Rt.prototype,"timeExtent",void 0),Rt=Ct=(0,n._)([(0,p.$)("esri.rest.support.ImageSampleParameters")],Rt);const kt=Rt;let Dt=class extends _.oY{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};(0,n._)([(0,u.MZ)({json:{write:!0}})],Dt.prototype,"attributes",void 0),(0,n._)([(0,u.MZ)({type:ue.default,json:{write:!0}})],Dt.prototype,"location",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],Dt.prototype,"locationId",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],Dt.prototype,"rasterId",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],Dt.prototype,"resolution",void 0),(0,n._)([(0,u.MZ)({json:{write:!0}})],Dt.prototype,"pixelValue",void 0),Dt=(0,n._)([(0,p.$)("esri.rest.support.ImageSample")],Dt);const Nt=Dt;let Pt=class extends _.oY{constructor(){super(...arguments),this.samples=null}};(0,n._)([(0,u.MZ)({type:[Nt],json:{write:!0}})],Pt.prototype,"samples",void 0),Pt=(0,n._)([(0,p.$)("esri.rest.support.ImageSampleResult")],Pt);const Et=Pt;let Lt=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.geometries=[],this.rasterIds=null,this.outSpatialReference=null}writeGeometries(e,t,r){t.geometries=e?.length?{geometryType:(0,Ae.$B)(e[0]),geometries:e.map((e=>({...e.toJSON(),spatialReference:void 0})))}:null}};(0,n._)([(0,u.MZ)({types:[f.yR]})],Lt.prototype,"geometries",void 0),(0,n._)([(0,d.K)("geometries")],Lt.prototype,"writeGeometries",null),(0,n._)([(0,u.MZ)({type:[M.jz],json:{write:!0}})],Lt.prototype,"rasterIds",void 0),(0,n._)([(0,u.MZ)({type:we.A,json:{name:"outSR",write:!0}})],Lt.prototype,"outSpatialReference",void 0),Lt=(0,n._)([(0,p.$)("esri.rest.support.ImageToMapMultirayParameters")],Lt);const Ft=Lt;let jt=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.outSpatialReference=null,this.depthOffset=0,this.adjust=!1}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]={...e.toJSON(),spatialReference:void 0})}};(0,n._)([(0,u.MZ)({types:f.yR,json:{read:Ae.rS,write:!0}})],jt.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],jt.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],jt.prototype,"rasterId",void 0),(0,n._)([(0,u.MZ)({type:we.A,json:{name:"outSR",write:!0}})],jt.prototype,"outSpatialReference",void 0),(0,n._)([(0,u.MZ)({json:{name:"options.DOff",write:!0}})],jt.prototype,"depthOffset",void 0),(0,n._)([(0,u.MZ)({json:{name:"options.Adjust",write:!0}})],jt.prototype,"adjust",void 0),jt=(0,n._)([(0,p.$)("esri.rest.support.ImageToMapParameters")],jt);const Ot=jt;let Vt=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.referenceUri=null,this.rasterId=null}};(0,n._)([(0,u.MZ)({type:String,json:{name:"uri",write:!0}})],Vt.prototype,"referenceUri",void 0),(0,n._)([(0,u.MZ)({type:Number,json:{write:!0}})],Vt.prototype,"rasterId",void 0),Vt=(0,n._)([(0,p.$)("esri.rest.support.ImageUrlParameters")],Vt);const Zt=Vt;let zt=class extends _.oY{constructor(){super(...arguments),this.url=null}};(0,n._)([(0,u.MZ)({json:{name:"imageURL",write:!0}})],zt.prototype,"url",void 0),zt=(0,n._)([(0,p.$)("esri.rest.support.ImageUrlResult")],zt);const Ut=zt;let Bt=class extends((0,o.O)(_.oY)){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.visibleOnly=!1}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]=JSON.stringify(e))}};(0,n._)([(0,u.MZ)({types:f.yR,json:{read:Ae.rS,write:!0}})],Bt.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],Bt.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],Bt.prototype,"rasterId",void 0),(0,n._)([(0,u.MZ)({json:{name:"options.VisibleOnly",write:!0}})],Bt.prototype,"visibleOnly",void 0),Bt=(0,n._)([(0,p.$)("esri.rest.support.MapToImageParameters")],Bt);const Gt=Bt;let Ht=class extends _.oY{constructor(){super(...arguments),this.geometry=null,this.length=null,this.area=null,this.center=null}readCenter(e,t){return e.spatialReference||(e={...e,spatialReference:t.Shape.spatialReference}),ue.default.fromJSON(e)}};(0,n._)([(0,u.MZ)({types:f.yR,json:{name:"Shape",read:Ae.rS,write:!0}})],Ht.prototype,"geometry",void 0),(0,n._)([(0,u.MZ)({json:{name:"Length",write:!0}})],Ht.prototype,"length",void 0),(0,n._)([(0,u.MZ)({json:{name:"Area",write:!0}})],Ht.prototype,"area",void 0),(0,n._)([(0,u.MZ)({json:{name:"Center",write:!0}})],Ht.prototype,"center",void 0),(0,n._)([(0,S.w)("center")],Ht.prototype,"readCenter",null),Ht=(0,n._)([(0,p.$)("esri.rest.support.MeasureAreaFromImageResult")],Ht);const Jt=Ht;var qt;let Wt=qt=class extends _.oY{constructor(){super(...arguments),this.geometry=null,this.rasterId=void 0}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,Ae.$B)(e),t[r]={...e.toJSON(),spatialReference:void 0})}clone(){const e=(0,w.o8)({geometry:this.geometry,rasterId:this.rasterId});return new qt(e)}};(0,n._)([(0,u.MZ)({types:f.yR,json:{name:"fromGeometry",read:Ae.rS,write:!0}})],Wt.prototype,"geometry",void 0),(0,n._)([(0,d.K)("geometry")],Wt.prototype,"writeGeometry",null),(0,n._)([(0,u.MZ)({json:{write:!0}})],Wt.prototype,"rasterId",void 0),Wt=qt=(0,n._)([(0,p.$)("esri.rest.support.MeasureFromImageParameters")],Wt);const $t=Wt;let Kt=class extends _.oY{constructor(){super(...arguments),this.geometry=null,this.length=null}};(0,n._)([(0,u.MZ)({types:f.yR,json:{name:"Shape",read:Ae.rS,write:!0}})],Kt.prototype,"geometry",void 0),(0,n._)([(0,u.MZ)({json:{name:"Length",write:!0}})],Kt.prototype,"length",void 0),Kt=(0,n._)([(0,p.$)("esri.rest.support.MeasureLengthFromImageResult")],Kt);const Yt=Kt;function Qt(e){const t=e?.time;if(t&&(null!=t.start||null!=t.end)){const r=[];null!=t.start&&r.push(t.start),null==t.end||r.includes(t.end)||r.push(t.end),e.time=r.join(",")}}async function Xt(e,t,r){t=(0,M.PZ)(pt.A,t);const n=(0,le.Dl)(e),i=t.geometry?[t.geometry]:[],o=await(0,ae.el)(i),s=t.toJSON();Qt(s);const a=o?.[0];null!=a&&(s.geometry=nr(a));const l=(0,le.lF)({...n.query,f:"json",...s});return(0,le.jV)(l,r)}async function er(e,t,r){t=(0,M.PZ)(ht,t);const n=(0,le.Dl)(e),i=t.geometry?[t.geometry]:[];return(0,ae.el)(i).then((e=>{const i=t.toJSON(),o=e?.[0];null!=o&&(i.geometry=JSON.stringify(nr(o)));const s=(0,le.lF)({...n.query,f:"json",...i}),a=(0,le.jV)(s,r);return(0,g.A)(n.path+"/identify",a)})).then((e=>yt.fromJSON(e.data)))}async function tr(e,t,r,n){const i=(0,le.Dl)(e),o=await(0,ae.el)(r),s=t.toJSON();null!=o[0]&&(s.fromGeometry=JSON.stringify(nr(o[0]))),null!=o[1]&&(s.toGeometry=JSON.stringify(nr(o[1])));const a=(0,le.lF)({...i.query,f:"json",...s}),l=(0,le.jV)(a,n),{data:u}=await(0,g.A)(i.path+"/measure",l);return u}async function rr(e,t,r){t=(0,M.PZ)($t,t);const n=(0,le.Dl)(e),i=t.toJSON(),o=(0,le.lF)({...n.query,f:"json",...i}),s=(0,le.jV)(o,r),{data:a}=await(0,g.A)(n.path+"/measureFromImage",s);return a}function nr(e){const t=e.toJSON();return e.spatialReference?.imageCoordinateSystem&&(t.spatialReference=ir(e.spatialReference)),t}function ir(e){const{imageCoordinateSystem:t}=e;if(t){const{id:e,referenceServiceName:r}=t;return null!=e?r?{icsid:e,icsns:r}:{icsid:e}:{ics:t}}return e.toJSON()}function or(e,t){if(!e.imageCoordinateSystem)return(0,I.YX)(e);const r=ir(e),{icsid:n,icsns:i}=r;return null==n||null!=i&&!t?.toLowerCase().includes("/"+i.toLowerCase()+"/")?JSON.stringify(r):`0:${n}`}var sr=r(30164),ar=r(70850),lr=r(48066),ur=r(30067),cr=r(94072),pr=r(7926),dr=r(20106);const hr=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),fr=(0,M.Qp)(M.GB,{min:0,max:255}),mr=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new W({layer:this}))}readServiceSupportsMosaicRule(e,t){return this._isMosaicRuleSupported(t)}get _rasterFunctionNamesIndex(){const e=new Map;return!this.rasterFunctionInfos||null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.length<1||null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.forEach((t=>{e.set(t.name.toLowerCase().replaceAll(/ /gi,"_"),t.name)})),e}readBandIds(e,t){if(Array.isArray(e)&&e.length>0&&e.every((e=>"number"==typeof e)))return e}readCapabilities(e,t){return this._readCapabilities(t)}writeCompressionQuality(e,t,r){null!=e&&"lerc"!==this.format&&(t[r]=e)}writeCompressionTolerance(e,t,r){"lerc"===this.format&&null!=e&&(t[r]=e)}readDefaultMosaicRule(e,t){return this._serviceSupportsMosaicRule?J.A.fromJSON(t):null}get fieldsIndex(){return this.fields?new K.A(this.fields):null}set format(e){e&&hr.has(e.toLowerCase())&&this._set("format",e.toLowerCase())}readFormat(e,t){return"esriImageServiceDataTypeVector-UV"===t.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===t.serviceDataType||null!=this.pixelFilter?"lerc":"jpgpng"}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}set mosaicRule(e){let t=e;t?.mosaicMethod&&(t=J.A.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}readMosaicRule(e,t){const r=e||t.mosaicRule;return r?J.A.fromJSON(r):this._isMosaicRuleSupported(t)?J.A.fromJSON(t):null}writeMosaicRule(e,t,r){let n=this.mosaicRule;const i=this.definitionExpression;n?i&&i!==n.where&&(n=n.clone(),n.where=i):i&&(n=new J.A({where:i})),this._isValidCustomizedMosaicRule(n)&&(t[r]=n.toJSON())}writeNoData(e,t,r){null!=e&&"number"==typeof e&&(t[r]=fr(e))}readObjectIdField(e,t){if(!e){const r=t.fields.find((e=>"esriFieldTypeOID"===e.type||"oid"===e.type));e=r?.name}return e}get parsedUrl(){return(0,v.An)(this.url)}readSourceType(e,t){return this._isMosaicDataset(t)?"mosaic-dataset":"raster-dataset"}get renderer(){const{activePresetRendererName:e,presetRenderers:t}=this;if(e){const r=t?.find((({name:t})=>t===e));return r?.renderer.clone()}return this.internalRenderer}set renderer(e){this.activePresetRendererName=null,this.internalRenderer=e}set internalRenderer(e){this.loaded&&(e=this._configRenderer(e)),this._set("internalRenderer",e)}readRenderer(e,t,r){const n=t?.layerDefinition?.drawingInfo?.renderer,i=(0,y.LF)(n,r);return null==i?null:("vector-field"===i.type&&t.symbolTileSize&&!n.symbolTileSize&&(i.symbolTileSize=t.symbolTileSize),F(i)||c.A.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),i)}writeRenderer(e,t,r){t.layerDefinition=t.layerDefinition||{},t.layerDefinition.drawingInfo=t.layerDefinition.drawingInfo||{},t.layerDefinition.drawingInfo.renderer=e.toJSON(),"vector-field"===e.type&&(t.symbolTileSize=e.symbolTileSize)}get rasterFields(){const e=this._rasterAttributeTableFieldPrefix,t=new $.A({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),r=new $.A({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new $.A({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let i=this.fields?(0,w.o8)(this.fields):[];i.push(r),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&i.push(t),this.version>=10.4&&null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.some((e=>"none"===e.name.toLowerCase()))&&i.push(n),null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.filter((e=>"none"!==e.name.toLowerCase())).forEach((e=>{i.push(new $.A({name:"Raster.ServicePixelValue."+e.name,alias:e.name,domain:null,editable:!1,length:50,type:"string"}))})),this._isVectorDataSet()&&(i.push(new $.A({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),i.push(new $.A({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const{attributeTable:o}=this.rasterInfo??{};if(null!=o){const t=o.fields.filter((e=>"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase())).map((t=>{const r=(0,w.o8)(t);return r.name=e+t.name,r}));i=i.concat(t)}return i}set rasterFunction(e){let t=e;t?.rasterFunction&&(t=C.A.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("rasterFunction",t)}readRasterFunction(e,t){const r=t.rasterFunctionInfos;return t.renderingRule||r?.length&&"None"!==r[0].name?this._isRFTJson(t.renderingRule)?C.A.fromJSON({rasterFunctionDefinition:t.renderingRule}):C.A.fromJSON(t.renderingRule||{rasterFunctionInfos:t.rasterFunctionInfos}):null}readSpatialReference(e,t){const r=e||t.extent.spatialReference;return r?we.A.fromJSON(r):null}readPixelType(e){return q.e8.fromJSON(e)||e}writePixelType(e,t,r){null!=this.serviceRasterInfo&&this.pixelType===this.serviceRasterInfo.pixelType||(t[r]=q.e8.toJSON(e))}readVersion(e,t){let r=t.currentVersion;return r||(r=t.hasOwnProperty("fields")||t.hasOwnProperty("timeInfo")?10:9.3),r}applyFilter(e){let t=e;return this.pixelFilter&&(t=this._clonePixelData(e),this.pixelFilter(t)),t}async applyRenderer(e,t){let r=e;const{renderer:n,symbolizer:i,pixelFilter:o,bandIds:s}=this;if(!this._isPicture()&&n&&i&&!o){const o=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(n.toJSON()),a=this._rasterJobHandler.instance;if(a){o&&(i.bind(),await a.updateSymbolizer(i,t),this._cachedRendererJson=n.toJSON());const l=await a.symbolize({bandIds:s,...e},t);r={extent:e.extent,pixelBlock:l}}else r={extent:e.extent,pixelBlock:i.symbolize({bandIds:s,...e})}}return r}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeAngles)throw new s.A("imagery-layer:compute-angles","this operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(ve,t)).toJSON();null!=n.angleName&&(n.angleName=n.angleName.join(",")),t?.point?.spatialReference?.imageCoordinateSystem&&(n.point.spatialReference=ir(t.point.spatialReference)),t?.spatialReference?.imageCoordinateSystem&&(n.spatialReference=or(t.spatialReference));const i=(0,le.Dl)(e),o=(0,le.lF)({...i.query,f:"json",...n}),s=(0,le.jV)(o,r),{data:a}=await(0,g.A)(`${i.path}/computeAngles`,s);return a.spatialReference=a.spatialReference?null!=a.spatialReference.geodataXform?new we.A({wkid:0,imageCoordinateSystem:a.spatialReference}):we.A.fromJSON(a.spatialReference):null,"NaN"===a.north&&(a.north=null),"NaN"===a.up&&(a.up=null),new Se(a)}(this.url,e,this._getRequestOptions(t))}async computePixelSpaceLocations(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputePixelLocation)throw new s.A("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(bt,t)).toJSON(),{geometries:i}=t;if(i)for(let e=0;e<i.length;e++)i[e].spatialReference?.imageCoordinateSystem&&(n.geometries.geometries[e].spatialReference=ir(i[e].spatialReference));const o=(0,le.Dl)(e),s=(0,le.lF)({...o.query,f:"json",...n}),a=(0,le.jV)(s,r),{data:l}=await(0,g.A)(`${o.path}/computePixelLocation`,a);return Mt.fromJSON(l)}(this.url,e,this._getRequestOptions(t))}async computeHistograms(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeHistograms)throw new s.A("imagery-layer:compute-histograms","this operation is not supported on the input image service");return e=(0,w.o8)(e),this._applyMosaicAndRenderingRules(e),async function(e,t,r){const n=await Xt(e,t,r),i=(0,le.Dl)(e),{data:o}=await(0,g.A)(`${i.path}/computeHistograms`,n);return{histograms:o.histograms}}(this.url,e,this._getRequestOptions(t))}async computeStatisticsHistograms(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsComputeStatisticsHistograms)throw new s.A("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");return e=(0,w.o8)(e),this._applyMosaicAndRenderingRules(e),async function(e,t,r){const n=await Xt(e,t,r),i=(0,le.Dl)(e),{data:o}=await(0,g.A)(`${i.path}/computeStatisticsHistograms`,n),{statistics:s}=o;return s?.length&&s.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:s,histograms:o.histograms}}(this.url,e,this._getRequestOptions(t))}async measureHeight(e,t){const r=await this._fetchCapabilities(t?.signal);if(!("base-and-top"===e.operationType?r.mensuration.supportsHeightFromBaseAndTop:"base-and-top-shadow"===e.operationType?r.mensuration.supportsHeightFromBaseAndTopShadow:r.mensuration.supportsHeightFromTopAndTopShadow))throw new s.A("imagery-layer:measure-height","this operation is not supported on the input image service");return e=(0,w.o8)(e),this._applyMosaicAndRenderingRules(e),async function(e,t,r){t=(0,M.PZ)(at,t);const n=await tr(e,t,[t.fromGeometry,t.toGeometry],r);return ut.fromJSON(n)}(this.url,e,this._getRequestOptions(t))}async measureAreaAndPerimeter(e,t){const r=await this._fetchCapabilities(t?.signal);if(!r.mensuration.supportsAreaAndPerimeter||e.is3D&&!r.mensuration.supports3D)throw new s.A("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");return e=(0,w.o8)(e),this._applyMosaicAndRenderingRules(e),async function(e,t,r){t=(0,M.PZ)(Re,t);const n=await tr(e,t,[t.geometry],r);return Fe.fromJSON(n)}(this.url,e,this._getRequestOptions(t))}async measureDistanceAndAngle(e,t){const r=await this._fetchCapabilities(t?.signal);if(!r.mensuration.supportsDistanceAndAngle||e.is3D&&!r.mensuration.supports3D)throw new s.A("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");return e=(0,w.o8)(e),this._applyMosaicAndRenderingRules(e),async function(e,t,r){t=(0,M.PZ)(He,t);const n=await tr(e,t,[t.fromGeometry,t.toGeometry],r);return qe.fromJSON(n)}(this.url,e,this._getRequestOptions(t))}async measurePointOrCentroid(e,t){const r=await this._fetchCapabilities(t?.signal);if(!r.mensuration.supportsPointOrCentroid||e.is3D&&!r.mensuration.supports3D)throw new s.A("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");return e=(0,w.o8)(e),this._applyMosaicAndRenderingRules(e),async function(e,t,r){t=(0,M.PZ)(At,t);const n=await tr(e,t,[t.geometry],r);return _t.fromJSON(n)}(this.url,e,this._getRequestOptions(t))}async measureLengthFromImage(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsMeasureFromImage)throw new s.A("imagery-layer:measure-length-from-image","this operation is not supported on the input image service");if("polyline"!==e.geometry.type)throw new s.A("imagery-layer:measure-length-from-image","this input geometry must be a polyline");return async function(e,t,r){const n=await rr(e,t,r);return Yt.fromJSON(n)}(this.url,e,this._getRequestOptions(t))}async measureAreaFromImage(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsMeasureFromImage)throw new s.A("imagery-layer:measure-area-from-image","this operation is not supported on the input image service");if("polygon"!==e.geometry.type)throw new s.A("imagery-layer:measure-area-from-image","this input geometry must be a polygon");return async function(e,t,r){const n=await rr(e,t,r);return Jt.fromJSON(n)}(this.url,e,this._getRequestOptions(t))}getField(e){const{fieldsIndex:t}=this;return null!=t?t.get(e):void 0}getFieldDomain(e,t){const r=this.getField(e);return r?r.domain:null}async fetchImage(e,t,n,i={}){if(null==e||null==t||null==n)throw new s.A("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){const e=await this._generateRasterInfo(this.rasterFunction,{signal:i.signal});e&&(this.rasterInfo=e)}const o=this.getExportImageServiceParameters(e,t,n,i.timeExtent);if(null==o){if(i.requestAsImageElement&&this._canRequestImageElement(this.format)){const e=document.createElement("canvas");return e.width=t,e.height=n,i.returnImageBitmap?{imageBitmap:await(0,Y.m)(e,`${r(this.parsedUrl)}/exportImage`,i.signal)}:{imageOrCanvasElement:e}}const{bandIds:o,rasterInfo:s}=this,a=(o?.length||s.bandCount)??0,l=t*n,u=s.pixelType,c=[];for(let e=0;e<a;e++)c.push(X.A.createEmptyBand(u,l));return{pixelData:{pixelBlock:new X.A({width:t,height:n,pixels:c,mask:new Uint8Array(l),pixelType:u}),extent:e}}}const a=!!i.requestAsImageElement&&!this.pixelFilter,l=a&&!!i.returnImageBitmap,u={imageServiceParameters:o,imageProps:{extent:e,width:t,height:n,format:this.format},requestAsImageElement:a,returnImageBitmap:l,signal:i.signal};return this._requestArrayBuffer(u)}fetchKeyProperties(e){return(0,g.A)(r(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?e?.rasterFunction:null})}).then((e=>e.data))}fetchRasterAttributeTable(e){return this.version<10.1?Promise.reject(new s.A("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):(0,g.A)(r(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?e?.rasterFunction:null})}).then((e=>ft.A.fromJSON(e.data)))}getCatalogItemRasterInfo(e,t){const n={...t,query:this._getQueryParams()};return async function(e,t,r){const n=(0,le.Dl)(e),i=(0,le.lF)({...n?.query,f:"json"}),o=(0,le.jV)(i,r),s=`${n?.path}/${t}/info`,a=(0,g.A)(`${s}`,o),l=(0,g.A)(`${s}/keyProperties`,o),u=await Promise.allSettled([a,l]),c="fulfilled"===u[0].status?u[0].value.data:null,p="fulfilled"===u[1].status?u[1].value.data:null;let d=null;c.statistics?.length&&(d=c.statistics.map((e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]}))));const h=Ve.default.fromJSON(c.extent),f=Math.ceil(h.width/c.pixelSizeX-.1),m=Math.ceil(h.height/c.pixelSizeY-.1),y=h.spatialReference,w=new ue.default({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:y}),b=c.histograms?.length?c.histograms:null,v=new ar.A({origin:c.origin,blockWidth:c.blockWidth,blockHeight:c.blockHeight,firstPyramidLevel:c.firstPyramidLevel,maximumPyramidLevel:c.maxPyramidLevel});return new ee.A({width:f,height:m,bandCount:c.bandCount,extent:h,spatialReference:y,pixelSize:w,pixelType:c.pixelType.toLowerCase(),statistics:d,histograms:b,keyProperties:p,storageInfo:v})}(r(this.parsedUrl),e,n)}async getCatalogItemICSInfo(e,t){const{data:n}=await(0,g.A)(r(this.parsedUrl)+"/"+e+"/info/ics",{query:this._getQueryParams(),...t}),i=n?.ics;if(!i)return;let o=null;try{o=(await(0,g.A)(r(this.parsedUrl)+"/"+e+"/info",{query:this._getQueryParams(),...t})).data.extent}catch{}if(!o?.spatialReference)return{ics:i,icsToPixelTransform:null,icsExtent:null,northDirection:null};const s=this.version>=10.7?(0,g.A)(r(this.parsedUrl)+"/"+e+"/info/icstopixel",{query:this._getQueryParams(),...t}).then((e=>e.data)).catch((()=>({}))):{},a=o.spatialReference,l={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[o]}),inSR:(0,I.YX)(a),outSR:"0:"+e},u=(0,g.A)(r(this.parsedUrl)+"/project",{query:this._getQueryParams(l),...t}).then((e=>e.data)).catch((()=>({}))),c=(o.xmin+o.xmax)/2,p=(o.ymax-o.ymin)/6,d=o.ymin+p,h=[];for(let e=0;e<5;e++)h.push({x:c,y:d+p*e});const f={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:h}),inSR:(0,I.YX)(a),outSR:"0:"+e},m=(0,g.A)(r(this.parsedUrl)+"/project",{query:this._getQueryParams(f),...t}).then((e=>e.data)).catch((()=>({}))),y=await Promise.all([s,u,m]);let w=y[0].ipxf;if(null==w){const e=i.geodataXform?.xf_0;"topup"===e?.name?.toLowerCase()&&6===e?.coefficients?.length&&(w={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:e.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const b=Ve.default.fromJSON(y[1]?.geometries?.[0]);b&&(b.spatialReference=new we.A({wkid:0,imageCoordinateSystem:i}));const v=y[2].geometries?y[2].geometries.filter((e=>null!=e?.x&&null!=e.y&&"NaN"!==e.x&&"NaN"!==e.y)):[],M=v.length;if(M<3)return{ics:i,icsToPixelTransform:w,icsExtent:b,northDirection:null};let S=0,A=0,x=0,_=0;for(let e=0;e<M;e++)S+=v[e].x,A+=v[e].y,x+=v[e].x*v[e].x,_+=v[e].x*v[e].y;const C=(M*_-S*A)/(M*x-S*S);let T=0;const R=v[4].x>v[0].x,k=v[4].y>v[0].y;return C===1/0?T=k?90:270:0===C?T=R?0:180:C>0?T=R?180*Math.atan(C)/Math.PI:180*Math.atan(C)/Math.PI+180:C<0&&(T=k?180+180*Math.atan(C)/Math.PI:360+180*Math.atan(C)/Math.PI),{ics:i,icsToPixelTransform:w,icsExtent:b,northDirection:T}}async generateRasterInfo(e,t){e=(0,M.PZ)(C.A,e);const n={...t,query:this._getQueryParams()};if(!e||"none"===e.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(e))return this.serviceRasterInfo??(0,sr.Tw)(r(this.parsedUrl),this.sourceJSON,n);const i=function(e){const t=JSON.stringify(e),r=t.includes('"rasterFunctionDefinition":{'),n=r?t.match(/"type":"(.*?FunctionArguments")/gi):t.match(/"rasterFunction":"(.*?")/gi),i=n?.map((e=>r?e.slice(8,-18):e.slice(18,-1)));return i?i.join("/"):null}(e);if(!i)throw new s.A("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[i])return this._functionRasterInfos[i];const o=(0,sr.X6)(r(this.parsedUrl),e,n);this._functionRasterInfos[i]=o;try{return await o}catch(e){throw this._functionRasterInfos[i]=null,e}}getExportImageServiceParameters(e,t,n,i){const o=or((e=e.clone().shiftCentralMeridian()).spatialReference,r(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const s=this.exportImageServiceParameters.toJSON(),{bandIds:a,noData:l}=s;let{renderingRule:u}=s;const c=this.rasterFunction?.rasterFunctionDefinition,p=this.renderer?.type,d=!p||"raster-stretch"===p||"raster-colormap"===p||"unique-value"===p||"class-breaks"===p||"raster-shaded-relief"===p;if(a?.length&&this._hasRasterFunction(this.rasterFunction)&&!c&&d){const e={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:a}};if("Stretch"===u.rasterFunction)e.rasterFunctionArguments.Raster=u.rasterFunctionArguments.Raster,u.rasterFunctionArguments.Raster=e;else if("Colormap"===u.rasterFunction){const t=u.rasterFunctionArguments.Raster;"Stretch"===t?.rasterFunction?(e.rasterFunctionArguments.Raster=t.rasterFunctionArguments.Raster,t.rasterFunctionArguments.Raster=e):(e.rasterFunctionArguments.Raster=t,u.rasterFunctionArguments.Raster=e)}else e.rasterFunctionArguments.Raster=u,u=e;s.bandIds=void 0}else s.bandIds=a?.join(",");Array.isArray(l)&&l.length>0&&(s.noData=l.join(","));const h=this._processMultidimensionalIntersection(null,i,this.exportImageServiceParameters.mosaicRule);if(h.isOutSide)return null;s.mosaicRule=null!=h.mosaicRule?JSON.stringify(h.mosaicRule):null,i=h.timeExtent,s.renderingRule=this._getRenderingRuleString(C.A.fromJSON(u));const f={};if(null!=i){const{start:e,end:t}=i.toJSON();e&&t&&e===t?f.time=""+e:null==e&&null==t||(f.time=`${e??"null"},${t??"null"}`)}return{bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:o,imageSR:o,size:t+","+n,...s,...f}}async getSamples(e,t){const r=await this._fetchCapabilities(t?.signal);if(!r?.operations.supportsGetSamples)throw new s.A("imagery-layer:get-samples","getSamples operation is not supported on the input image service");e=(0,w.o8)(e);const{raster:n}=this;return n&&null==e.raster&&(e.raster=n),async function(e,t,r){const n=(t=(0,M.PZ)(kt,t)).toJSON();Qt(n),n.outFields?.length&&(n.outFields=n.outFields.join(","));const i=await(0,ae.el)(t.geometry),o=i?.[0];null!=o&&(n.geometry=nr(o));const s=(0,le.Dl)(e),a=(0,le.lF)({...s.query,f:"json",...n}),l=(0,le.jV)(a,r),{data:u}=await(0,g.A)(`${s.path}/getSamples`,l),c=u?.samples?.map((e=>{const t="NaN"===e.value||""===e.value?null:e.value.split(" ").map((e=>Number(e)));return{...e,pixelValue:t}}));return Et.fromJSON({samples:c})}(this.url,e,this._getRequestOptions(t))}async identify(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsIdentify)throw new s.A("imagery-layer:identify","identify operation is not supported on the input image service");e=(0,w.o8)(e),this.version<10.91&&"extent"===e.geometry?.type&&(e.geometry=Ze.A.fromExtent(e.geometry));const r=this._processMultidimensionalIntersection(e.geometry,e.timeExtent,e.mosaicRule||this.mosaicRule);if(r.isOutSide)throw new s.A("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");e.timeExtent=r.timeExtent,e.mosaicRule=r.mosaicRule;const{raster:n,rasterFunction:i}=this;return i&&null==e.rasterFunction&&(e.rasterFunction=i),n&&null==e.raster&&(e.raster=n),er(this.url,e,this._getRequestOptions(t))}async imageToMap(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsImageToMap)throw new s.A("imagery-layer:image-to-map","imageToMap operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(Ot,t)).toJSON();t.geometry.spatialReference.imageCoordinateSystem&&(n.geometry=nr(t.geometry)),t.depthOffset&&t.adjust||delete n.options;const i=(0,le.Dl)(e),o=(0,le.lF)({...i.query,f:"json",...n}),s=(0,le.jV)(o,r),{data:a}=await(0,g.A)(`${i.path}/imageToMap`,s);return(0,Ae.rS)(a)}(r(this.parsedUrl),e,this._getRequestOptions(t))}async imageToMapMultiray(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsImageToMapMultiray)throw new s.A("imagery-layer:image-to-map-multiray","imageToMapMultiray operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(Ft,t)).toJSON();t.rasterIds?.length&&(n.rasterIds=t.rasterIds.join(","));const i=(0,le.Dl)(e),o=(0,le.lF)({...i.query,f:"json",...n}),s=(0,le.jV)(o,r),{data:a}=await(0,g.A)(`${i.path}/imageToMapMultiray`,s);return(0,Ae.rS)(a)}(r(this.parsedUrl),e,this._getRequestOptions(t))}async mapToImage(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsMapToImage)throw new s.A("imagery-layer:map-to-image","mapToImage operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(Gt,t)).toJSON(),i=await(0,ae.el)(t.geometry),o=i?.[0];null!=o&&(n.geometry=nr(o)),t.visibleOnly||delete n.options;const s=o?.spatialReference??t.geometry?.spatialReference;s&&(n.inSR=or(s));const a=(0,le.Dl)(e),l=(0,le.lF)({...a.query,f:"json",...n}),u=(0,le.jV)(l,r),{data:c}=await(0,g.A)(`${a.path}/mapToImage`,u);return(0,Ae.rS)(c)}(r(this.parsedUrl),e,this._getRequestOptions(t))}async findImages(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsFindImages)throw new s.A("imagery-layer:find-images","findImages operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(pe,t)).toJSON(),i=await(0,ae.el)([t.fromGeometry,t.toGeometry]);null!=i[0]&&(n.fromGeometry=nr(i[0]),i[0].spatialReference&&(n.inSR=or(i[0].spatialReference))),null!=i[1]&&(n.toGeometry=nr(i[1])),t.objectIds?.length&&(n.objectIds=n.objectIds.join(","));const o=(0,le.Dl)(e),s=(0,le.lF)({...o.query,f:"json",...n}),a=(0,le.jV)(s,r),{data:l}=await(0,g.A)(`${o.path}/find`,a);return ye.fromJSON(l)}(r(this.parsedUrl),e,this._getRequestOptions(t))}async getImageUrl(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsGetImageUrl)throw new s.A("imagery-layer:get-image-url","getImageUrl operation is not supported on the input image service");return async function(e,t,r){const n=(t=(0,M.PZ)(Zt,t)).toJSON(),i=(0,le.Dl)(e),o=(0,le.lF)({...i.query,f:"json",...n}),s=(0,le.jV)(o,r),{data:a}=await(0,g.A)(`${i.path}/getImageUrl`,s);return Ut.fromJSON(a)}(r(this.parsedUrl),e,this._getRequestOptions(t))}createQuery(){return new pr.A({outFields:["*"],returnGeometry:!0,where:this.definitionExpression||"1=1"})}async queryBoundary(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsQueryBoundary)throw new s.A("imagery-layer:query-boundary","queryBoundary operation is not supported on the input image service");return e=e??{outSpatialReference:this.spatialReference},async function(e,t,r){t=(0,M.PZ)(Oe,t);const n=(0,le.Dl)(e),i=t.toJSON();t.outSpatialReference&&(i.outSR=or(t.outSpatialReference));const o=(0,le.lF)({...n.query,f:"json",...i}),s=(0,le.jV)(o,r),{data:a}=await(0,g.A)(n.path+"/queryBoundary",s);return Ue.fromJSON(a)}(r(this.parsedUrl),e,this._getRequestOptions(t))}async queryRasters(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),(0,cr.s)(this.url,e,t)}async queryObjectIds(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),(0,ur.V)(this.url,e,t)}async queryGPSInfo(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsQueryGPSInfo)throw new s.A("imagery-layer:query-gps-info","queryGPSInfo operation is not supported on the input image service");return e=e??{where:"1=1"},async function(e,t,r){const n=(t=(0,M.PZ)(Qe,t)).toJSON();Qt(n),n.objectIds?.length&&(n.objectIds=n.objectIds.join(",")),n.geometry||n.objectIds||n.time||n.where||(n.where="1=1");const i=await(0,ae.el)(t.geometry),o=i?.[0];null!=o&&(n.geometry=nr(o));const s=o?.spatialReference??t.geometry?.spatialReference;s&&(n.inSR=or(s));const a=(0,le.Dl)(e),l=(0,le.lF)({...a.query,f:"json",...n}),u=(0,le.jV)(l,r),{data:c}=await(0,g.A)(`${a.path}/queryGPSInfo`,u);return it.fromJSON(c)}(r(this.parsedUrl),e,this._getRequestOptions(t))}async queryRasterCount(e,t){return({query:e,requestOptions:t}=await this._prepareForQuery(e,t)),(0,lr.I)(this.url,e,t)}async queryVisibleRasters(e,t){if(!e)throw new s.A("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const{pixelSize:r,returnDomainValues:n,returnTopmostRaster:i,showNoDataRecords:o}=t||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let a=!1,l=null,u=null;const c="raster.servicepixelvalue",p=this._rasterFunctionNamesIndex;if(null!=e.outFields&&(a=e.outFields.some((e=>!e.toLowerCase().includes(c))),this.version>=10.4)){const t=e.outFields.filter((e=>e.toLowerCase().includes(c)&&e.length>24)).map((e=>{const t=e.slice(25);return[this._updateRenderingRulesFunctionName(t,p),t]}));l=t.map((e=>new C.A({functionName:e[0]}))),u=t.map((e=>e[1]));const{rasterFunction:r}=this;0===l.length?r?.functionName?(l.push(r),u.push(r.functionName)):l=null:r?.functionName&&!l.some((e=>e.functionName===r.functionName))&&(l.push(r),u.push(r.functionName))}const d=null==e.outSpatialReference||e.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:h}=this;let f=e.timeExtent||this.timeExtent;if(h){const{isOutside:t,intersection:r}=(0,re.Rp)(h,{geometry:e.geometry,timeExtent:e.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(t)throw new s.A("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");null!=r?.timeExtent&&(f=r.timeExtent)}const m=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,f);let y=e.geometry;this.version<10.91&&"extent"===y?.type&&(y=Ze.A.fromExtent(y));const g=this._getQueryParams({geometry:y,timeExtent:f,mosaicRule:m,rasterFunction:this.version<10.4?this.rasterFunction:null,rasterFunctions:l,pixelSize:r,returnCatalogItems:a,returnGeometry:d,raster:this.raster,maxItemCount:i?1:null});delete g.f;const w=new ht(g);try{await this._generateRasterInfo(this.rasterFunction);const r=await er(this.url,w,{signal:t?.signal,query:{...this.customParameters}}),i=e.outFields,s=null!=r.value&&r.value.toLowerCase().includes("nodata");if(!a||d||!r?.catalogItems?.features.length||!o&&s)return this._processVisibleRastersResponse(r,{returnDomainValues:n,templateRRFunctionNames:u,showNoDataRecords:o,templateFields:i});const l=this.objectIdField||"ObjectId",c=r.catalogItems?.features??[],p=c.map((e=>e.attributes?.[l])),h=new pr.A({objectIds:p,returnGeometry:!0,outSpatialReference:e.outSpatialReference,outFields:[l]}),f=await this.queryRasters(h);return f?.features?.length&&f.features.forEach((t=>{c.forEach((r=>{r.attributes[l]===t.attributes[l]&&t.geometry&&(r.geometry=t.geometry.clone(),null!=e.outSpatialReference&&(r.geometry.spatialReference=e.outSpatialReference))}))})),this._processVisibleRastersResponse(r,{returnDomainValues:n,templateRRFunctionNames:u,showNoDataRecords:o,templateFields:i})}catch{throw new s.A("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(e,t){const n=(0,g.A)(r(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:e}),signal:t}).then((e=>e.data?.statistics)),i=(0,g.A)(r(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:e}),signal:t}).then((e=>e.data?.histograms)),o=await Promise.all([n,i]);return o[0]&&o[0].forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation})),{statistics:o[0]||null,histograms:o[1]||null}}async createFlowMesh(e,t){const r=this._rasterJobHandler.instance;return r?r.createFlowMesh(e,t):(0,dr.CW)(e.meshType,e.simulationSettings,e.flowData,null!=t.signal?t.signal:(new AbortController).signal)}getMultidimensionalSubsetVariables(e){const t=e??this.serviceRasterInfo.multidimensionalInfo;return(0,re.z2)(this.multidimensionalSubset,t)}async _fetchService(e){await this._fetchServiceInfo(e),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const t=this.sourceJSON,n=null!=this.serviceRasterInfo?Promise.resolve(this.serviceRasterInfo):(0,sr.Tw)(r(this.parsedUrl),t,{signal:e,query:this._getQueryParams()}).then((e=>(this._set("serviceRasterInfo",e),this._set("multidimensionalInfo",e.multidimensionalInfo),(0,sr.E9)(e,t),e))),i=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:e}):null,o=this._getRasterFunctionInfos();return Promise.all([n,i,o]).then((e=>{e[1]?this._set("rasterInfo",e[1]):this._set("rasterInfo",e[0]),e[2]&&this._set("rasterFunctionInfos",e[2]),this.internalRenderer&&!this._isSupportedRenderer(this.internalRenderer)&&(this._set("internalRenderer",null),c.A.getLogger(this).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("internalRenderer",this._configRenderer(this.renderer)),this.addHandles([(0,b.watch)((()=>this.rasterFunction),(e=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(e).then((e=>{e&&(this.rasterInfo=e)}))}))]);const{serviceRasterInfo:t}=this;null!=t.multidimensionalInfo&&this._updateMultidimensionalDefinition(t)}))}_combineMosaicRuleWithTimeExtent(e,t){const r=this.timeInfo,{multidimensionalInfo:n}=this.serviceRasterInfo;if(null==e||null==n||null==t||null==r?.startField)return e;const{startField:i}=r,o=n.variables.some((e=>e.dimensions.some((e=>e.name===i))))?i:"StdTime";if(e=e.clone(),"mosaic-dataset"===this.sourceType)return e.multidimensionalDefinition=e.multidimensionalDefinition?.filter((e=>e.dimensionName!==o)),this._cleanupMultidimensionalDefinition(e);e.multidimensionalDefinition=e.multidimensionalDefinition||[];const s=e.multidimensionalDefinition.filter((e=>e.dimensionName===o)),a=null!=t.start?t.start.getTime():null,l=null!=t.end?t.end.getTime():null,u=null==a||null==l||a===l,c=u?[a||l]:[[a,l]],p=this.version>=10.8;if(s.length)s.forEach((e=>{e.dimensionName===o&&(p?(e.dimensionName=null,e.isSlice=!1,e.values=[]):(e.isSlice=u,e.values=c))}));else if(!p){const t=e.multidimensionalDefinition.filter((e=>null!=e.variableName&&null==e.dimensionName));t.length?t.forEach((e=>{e.dimensionName=o,e.isSlice=u,e.values=c})):e.multidimensionalDefinition.push(new x.A({variableName:"",dimensionName:o,isSlice:u,values:c}))}return this._cleanupMultidimensionalDefinition(e)}_cleanupMultidimensionalDefinition(e){return null==e?null:(e.multidimensionalDefinition&&(e.multidimensionalDefinition=e.multidimensionalDefinition.filter((e=>!(!e.variableName&&!e.dimensionName))),0===e.multidimensionalDefinition.length&&(e.multidimensionalDefinition=null)),"mosaic-dataset"!==this.sourceType&&null==e.multidimensionalDefinition?null:e)}async _prepareForQuery(e,t){if(!(await this._fetchCapabilities(t?.signal)).operations.supportsQuery)throw new s.A("imagery-layer:query-rasters","query operation is not supported on the input image service");return e=null!=e?(0,M.PZ)(pr.A,e):this.createQuery(),t=this._getRequestOptions(t),this.raster&&(t.query={...t.query,raster:this.raster}),{query:e,requestOptions:t}}async _initJobHandler(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const e=new te.A;this._rasterJobHandler.connectionPromise=e.initialize().then((()=>{this._rasterJobHandler.instance=e}),(()=>{})),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(e){const{rasterInfo:t,rasterFunction:r}=this;return"unique-value"===e.type&&this._hasRasterFunction(r)&&1===t?.bandCount&&["u8","s8"].includes(t.pixelType)||null!=t&&null!=e&&(0,oe.fp)(t).includes(e.type)}async _fetchCapabilities(e){return this.capabilities||await this._fetchServiceInfo(e),this.capabilities}async _fetchServiceInfo(e){let t=this.sourceJSON;if(!t){const{data:n,ssl:i}=await(0,g.A)(r(this.parsedUrl),{query:this._getQueryParams(),signal:e});t=n,this.sourceJSON=t,i&&(this.url=this.url.replace(/^http:/i,"https:"))}if(t.capabilities?.toLowerCase().split(",").map((e=>e.trim())).indexOf("tilesonly")>-1)throw new s.A("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(t,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(e){return e.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===e.serviceSourceType:e.fields?.length>0}_isMosaicRuleSupported(e){if(!e)return!1;const t=this._isMosaicDataset(e),r=e.currentVersion>=10.71&&e.hasMultidimensions&&!(e.fields?.length>1);return t||r}_isVectorFieldResampleFunction(e){if(null==e)return!1;const{functionName:t,functionArguments:r}=e,n="resample"===t?.toLowerCase(),i=r?.ResampleType||r?.resampleType;return n&&(7===i||10===i)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(e){const t=this._isPicture(),{rasterInfo:r}=this;if(!t&&!this.pixelFilter||this._isVectorDataSet()){const t=this.mosaicRule?.multidimensionalDefinition?.[0].variableName,n=(0,oe.I8)({variableName:t,rasterFunctionName:this.rasterFunction?.functionName,presetRenderers:this.presetRenderers});if(!this.bandIds&&r.bandCount>=3){const e=n?.bandIds??(0,oe.ci)(r);!e||3===r.bandCount&&0===e[0]&&1===e[1]&&2===e[2]||(this.bandIds=e)}e||(e=n?.renderer??(0,oe.PD)(r,{bandIds:this.bandIds,variableName:this.rasterFunction?null:t}));const i=(0,oe.$P)(e.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=i,this.symbolizer.rasterInfo=r):this.symbolizer=new se.A({rendererJSON:i,rasterInfo:r}),this.symbolizer.bind().success||(this.symbolizer=null)}return e}_clonePixelData(e){return null==e?e:{extent:e.extent&&e.extent.clone(),pixelBlock:null!=e.pixelBlock?e.pixelBlock.clone():null}}_getQueryParams(e){null!=e?.renderingRule&&"string"!=typeof e.renderingRule&&(e.renderingRule=this._getRenderingRuleString(e.renderingRule));const{raster:t,viewId:r}=this;return{raster:t,viewId:r,f:"json",...e,...this.customParameters}}_getRequestOptions(e){return{...e,query:{...e?.query,...this.customParameters}}}_decodePixelBlock(e,t,r){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:e,options:t}):(0,ne.D)(e,t,r)}async _getRasterFunctionInfos(e){const t=this.sourceJSON.rasterFunctionInfos;if(this.loaded)return t;if(t&&this.version>=10.3){if(1===t.length&&"none"===t[0].name.toLowerCase())return t;const n=await(0,g.A)(r(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:e});return n.data?.rasterFunctionInfos}return null}_canRequestImageElement(e){return!this.pixelFilter&&(!e||e.includes("png"))}async _requestArrayBuffer(e){const{imageProps:t,requestAsImageElement:n,returnImageBitmap:i,signal:o}=e;if(n&&this._canRequestImageElement(t.format)){const n=`${r(this.parsedUrl)}/exportImage`,{data:s}=await(0,g.A)(n,{responseType:i?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...e.imageServiceParameters}),signal:o});return s instanceof Blob?{imageBitmap:await(0,Y.m)(s,n,o),params:t}:{imageOrCanvasElement:s,params:t}}const a=this._initJobHandler(),l=(0,g.A)(r(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...e.imageServiceParameters}),signal:o}),u=(await Promise.all([l,a]))[0].data,c=t.format||"jpgpng";let p=c;if("bsq"!==p&&"bip"!==p&&(p=(0,ne.g)(u)),!p)throw new s.A("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(u)));const d={signal:o},h="gif"===c||"bmp"===c||c.includes("png")&&("png"===p||"jpg"===p)?(0,ne.D)(u,{useCanvas:!0,...t},d):this._decodePixelBlock(u,{width:t.width,height:t.height,planes:null,pixelType:null,noDataValue:null,format:c},d);return{pixelData:{pixelBlock:await h,extent:t.extent},params:t}}_generateRasterInfo(e,t){return this.generateRasterInfo(e,t).catch((()=>null))}_isValidCustomizedMosaicRule(e){return e&&JSON.stringify(e.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(e){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let t=(0,re.fy)(e,{multidimensionalSubset:this.multidimensionalSubset});if(null!=t&&t.length>0){this.mosaicRule=this.mosaicRule||new J.A;const e=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&"none"!==this.rasterFunction.functionName?.toLowerCase()&&t.forEach((e=>e.variableName="")),t=t.filter((({variableName:e,dimensionName:t})=>e&&"*"!==e||t)),!e?.length&&t.length&&(this.mosaicRule.multidimensionalDefinition=t)}}_processVisibleRastersResponse(e,t){t=t||{};const r=e.value,{templateRRFunctionNames:n,showNoDataRecords:i,returnDomainValues:o,templateFields:s}=t,a=e.processedValues;let l=e.catalogItems?.features,u=e.properties?.Values?.map((e=>e.replaceAll(/ /gi,", ")))||[];const c=this.objectIdField||"ObjectId",p="string"==typeof r&&r.toLowerCase().includes("nodata"),d=[];if(r&&!l&&!p){const e={};e[c]=0,u=[r],l=[new m.default({geometry:this.fullExtent,attributes:e})]}if(!l)return[];let h,f,y;this._updateResponseFieldNames(l,s),p&&!i&&(l=[]);for(let e=0;e<l.length;e++){if(h=l[e],null!=r){if(f=u[e],y=this.rasterFunction&&a&&a.length>0&&n&&n.length>0&&n.includes(this.rasterFunction.functionName)?a[n.indexOf(this.rasterFunction.functionName)]:r,"nodata"===f.toLowerCase()&&!i)continue;const t="Raster.ItemPixelValue",o="Raster.ServicePixelValue";h.attributes[t]=f,h.attributes[o]=y,this._updateFeatureWithMagDirValues(h,f);const s=this.fields&&this.fields.length>0;let l=this.rasterFunction&&null!=this.serviceRasterInfo.attributeTable?s?f:r:y;this.rasterFunction||(l=s?f:r),this._updateFeatureWithRasterAttributeTableValues(h,l)}if(h.sourceLayer=h.layer=this,o&&this._updateFeatureWithDomainValues(h),n&&a&&n.length===a.length)for(let e=0;e<n.length;e++){const t="Raster.ServicePixelValue."+n[e];h.attributes[t]=a[e]}d.push(l[e])}return d}_processMultidimensionalIntersection(e,t,r){const{multidimensionalSubset:n}=this;if(!n)return{isOutSide:!1,timeExtent:t,mosaicRule:r=this._combineMosaicRuleWithTimeExtent(r,t)};if(n){const{isOutside:r,intersection:i}=(0,re.Rp)(n,{geometry:e,timeExtent:t});if(r)return{isOutSide:!0,timeExtent:null,mosaicRule:null};null!=i?.timeExtent&&(t=i.timeExtent)}if(r=this._combineMosaicRuleWithTimeExtent(r,t),r?.multidimensionalDefinition){const{isOutside:e}=(0,re.Rp)(n,{multidimensionalDefinition:r.multidimensionalDefinition});if(e)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:t,mosaicRule:r}}_updateFeatureWithRasterAttributeTableValues(e,t){const r=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(null==r)return;const{features:n,fields:i}=r,o=i.map((e=>e.name)).find((e=>"value"===e.toLowerCase()));if(!o)return;const s=n.filter((e=>e.attributes[o]===(null!=t?parseInt(t,10):null)));s&&s[0]&&i.forEach((t=>{const r=this._rasterAttributeTableFieldPrefix+t.name;e.attributes[r]=s[0].attributes[t.name]}))}_updateFeatureWithMagDirValues(e,t){if(!this._isVectorDataSet())return;const r=t.split(/,\s*/).map((e=>parseFloat(e))),n=r.map((e=>[e])),i=r.map((e=>({minValue:e,maxValue:e,noDataValue:null}))),o=new X.A({height:1,width:1,pixelType:"f32",pixels:n,statistics:i});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:o,extent:new Ve.default(0,0,0,0,this.spatialReference)});const s="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[o.pixels[0][0],o.pixels[1][0]]:(0,ie.Lu)([o.pixels[0][0],o.pixels[1][0]]);e.attributes["Raster.Magnitude"]=s[0],e.attributes["Raster.Direction"]=s[1]}_updateFeatureWithDomainValues(e){const t=this.fields&&this.fields.filter((e=>e.domain&&"coded-value"===e.domain.type));null!=t&&t.forEach((t=>{const r=e.attributes[t.name];if(null!=r){const n=t.domain.codedValues.find((e=>e.code===r));n&&(e.attributes[t.name]=n.name)}}))}_updateResponseFieldNames(e,t){if(!t||t.length<1)return;const r=this.fieldsIndex;null!=r&&e.forEach((e=>{if(e?.attributes)for(const n of t){const t=r.get(n)?.name;t&&t!==n&&(e.attributes[n]=e.attributes[t],delete e.attributes[t])}}))}_getRenderingRuleString(e){if(e){let t=e.toJSON();return t=t.rasterFunctionDefinition??t,(t.thumbnail||t.thumbnailEx)&&(t.thumbnail=t.thumbnailEx=null),JSON.stringify(t)}return null}_hasRasterFunction(e){return null!=e?.functionName&&"none"!==e.functionName.toLowerCase()}_updateRenderingRulesFunctionName(e,t){if(!e||e.length<1)return;if("Raw"===e)return e.replace("Raw","None");const r=e.toLowerCase().replaceAll(/ /gi,"_");return t.has(r)?t.get(r):e}_isRFTJson(e){return e?.name&&e.arguments&&e.function&&e.hasOwnProperty("functionType")}_isVectorDataSet(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType}_applyMosaicAndRenderingRules(e){const{raster:t,mosaicRule:r,rasterFunction:n}=this;n&&"rasterFunction"in e&&null==e.rasterFunction&&(e.rasterFunction=n),r&&null==e.mosaicRule&&(e.mosaicRule=r),t&&null==e.raster&&(e.raster=t)}_readCapabilities(e){const t=e.capabilities?e.capabilities.toLowerCase().split(",").map((e=>e.trim())):["image","catalog"],{currentVersion:r,advancedQueryCapabilities:n,maxRecordCount:i}=e,o=t.includes("image"),s="esriImageServiceDataTypeElevation"===e.serviceDataType,a=!(!e.spatialReference&&!e.extent?.spatialReference),l=t.includes("edit"),u=t.includes("mensuration")&&a,c=null==e.mensurationCapabilities?[]:e.mensurationCapabilities.toLowerCase().split(",").map((e=>e.trim())),p=u&&c.includes("basic"),d=this._isMosaicDataset(e)&&t.includes("catalog"),h=t.includes("download");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:o,supportsExportImage:o,supportsIdentify:o,supportsImageToMap:r>=11.2&&d,supportsImageToMapMultiray:r>=11.2&&d,supportsMapToImage:r>=11.2&&d,supportsFindImages:r>=11.2&&d,supportsGetImageUrl:r>=11.3&&h,supportsMeasure:u,supportsMeasureFromImage:r>=11.2,supportsDownload:h,supportsQuery:d&&e.fields&&e.fields.length>0,supportsGetSamples:r>=10.2&&o,supportsProject:r>=10.3&&o,supportsComputeStatisticsHistograms:r>=10.4&&o,supportsQueryBoundary:r>=10.6&&o,supportsCalculateVolume:r>=10.7&&s,supportsComputePixelLocation:r>=10.7&&d,supportsComputeAngles:r>=10.91,supportsQueryGPSInfo:r>=11.2&&d,supportsAdd:l,supportsDelete:l,supportsEditing:l,supportsUpdate:l,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:i,maxRecordCountFactor:void 0,supportsStatistics:!!n?.supportsStatistics,supportsOrderBy:!!n?.supportsOrderBy,supportsDistinct:!!n?.supportsDistinct,supportsPagination:!!n?.supportsPagination,supportsStandardizedQueriesOnly:!!n?.useStandardizedQueries,supportsPercentileStatistics:!!n?.supportsPercentileStatistics,supportsCentroid:!!n?.supportsReturningGeometryCentroid,supportsDistance:!!n?.supportsQueryWithDistance,supportsExtent:!!n?.supportsReturningQueryExtent,supportsGeometryProperties:!!n?.supportsReturningGeometryProperties,supportsHavingClause:!!n?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!n?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:p,supportsAreaAndPerimeter:p,supportsPointOrCentroid:p,supportsHeightFromBaseAndTop:u&&c.includes("base-top height"),supportsHeightFromBaseAndTopShadow:u&&c.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:u&&c.includes("top-top shadow height"),supports3D:u&&c.includes("3d")}}}};function r(e){return e?.path??""}return(0,n._)([(0,u.MZ)({clonable:!1})],t.prototype,"_functionRasterInfos",void 0),(0,n._)([(0,u.MZ)({clonable:!1})],t.prototype,"_rasterJobHandler",void 0),(0,n._)([(0,u.MZ)({clonable:!1})],t.prototype,"_cachedRendererJson",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),(0,n._)([(0,S.w)("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"_rasterAttributeTableFieldPrefix",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"_rasterFunctionNamesIndex",null),(0,n._)([(0,u.MZ)()],t.prototype,"adjustAspectRatio",void 0),(0,n._)([(0,u.MZ)({type:[M.jz],json:{write:!0}})],t.prototype,"bandIds",void 0),(0,n._)([(0,S.w)("bandIds")],t.prototype,"readBandIds",null),(0,n._)([(0,u.MZ)({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),(0,n._)([(0,S.w)("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),(0,n._)([(0,u.MZ)({type:Number})],t.prototype,"compressionQuality",void 0),(0,n._)([(0,d.K)("compressionQuality")],t.prototype,"writeCompressionQuality",null),(0,n._)([(0,u.MZ)({type:Number})],t.prototype,"compressionTolerance",void 0),(0,n._)([(0,d.K)("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),(0,n._)([(0,u.MZ)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,n._)([(0,u.MZ)({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"defaultMosaicRule",void 0),(0,n._)([(0,S.w)("defaultMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultMosaicRule",null),(0,n._)([(0,u.MZ)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),(0,n._)([(0,u.MZ)({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),(0,n._)([(0,u.MZ)()],t.prototype,"rasterInfo",void 0),(0,n._)([(0,u.MZ)({readOnly:!0,type:[$.A]})],t.prototype,"fields",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"fieldsIndex",null),(0,n._)([(0,u.MZ)({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff","bip","bsq"],json:{write:!0}})],t.prototype,"format",null),(0,n._)([(0,S.w)("service","format",["serviceDataType"])],t.prototype,"readFormat",null),(0,n._)([(0,u.MZ)({type:Ve.default})],t.prototype,"fullExtent",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),(0,n._)([(0,u.MZ)({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),(0,n._)([(0,u.MZ)({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),(0,n._)([(0,u.MZ)({type:String,json:{type:q.SZ.jsonValues,read:q.SZ.read,write:q.SZ.write}})],t.prototype,"interpolation",void 0),(0,n._)([(0,u.MZ)()],t.prototype,"minScale",void 0),(0,n._)([(0,S.w)("service","minScale")],t.prototype,"readMinScale",null),(0,n._)([(0,u.MZ)()],t.prototype,"maxScale",void 0),(0,n._)([(0,S.w)("service","maxScale")],t.prototype,"readMaxScale",null),(0,n._)([(0,u.MZ)({type:J.A})],t.prototype,"mosaicRule",null),(0,n._)([(0,S.w)("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),(0,n._)([(0,d.K)("mosaicRule")],t.prototype,"writeMosaicRule",null),(0,n._)([(0,u.MZ)()],t.prototype,"multidimensionalInfo",void 0),(0,n._)([(0,u.MZ)({type:Q.A,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),(0,n._)([(0,u.MZ)({json:{type:M.jz}})],t.prototype,"noData",void 0),(0,n._)([(0,d.K)("noData")],t.prototype,"writeNoData",null),(0,n._)([(0,u.MZ)({type:String,json:{type:q.hm.jsonValues,read:q.hm.read,write:q.hm.write}})],t.prototype,"noDataInterpretation",void 0),(0,n._)([(0,u.MZ)({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),(0,n._)([(0,S.w)("objectIdField")],t.prototype,"readObjectIdField",null),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"geometryType",void 0),(0,n._)([(0,u.MZ)({})],t.prototype,"typeIdField",void 0),(0,n._)([(0,u.MZ)({})],t.prototype,"types",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"parsedUrl",null),(0,n._)([(0,u.MZ)({type:Function})],t.prototype,"pixelFilter",void 0),(0,n._)([(0,u.MZ)()],t.prototype,"raster",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"sourceType",void 0),(0,n._)([(0,S.w)("sourceType",["serviceSourceType","fields"])],t.prototype,"readSourceType",null),(0,n._)([(0,u.MZ)()],t.prototype,"viewId",void 0),(0,n._)([(0,u.MZ)()],t.prototype,"renderer",null),(0,n._)([(0,u.MZ)({types:y.uy,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:y.Gj,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:e=>({enabled:e&&"vector-field"!==e.type&&"flow"!==e.type})}}}}})],t.prototype,"internalRenderer",null),(0,n._)([(0,S.w)("internalRenderer")],t.prototype,"readRenderer",null),(0,n._)([(0,d.K)("internalRenderer")],t.prototype,"writeRenderer",null),(0,n._)([(0,u.MZ)({clonable:!1})],t.prototype,"symbolizer",void 0),(0,n._)([(0,u.MZ)(A.ke)],t.prototype,"opacity",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"rasterFields",null),(0,n._)([(0,u.MZ)({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),(0,n._)([(0,u.MZ)({type:C.A,json:{name:"renderingRule"}})],t.prototype,"rasterFunction",null),(0,n._)([(0,S.w)("rasterFunction",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRasterFunction",null),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"serviceDataType",void 0),(0,n._)([(0,u.MZ)({readOnly:!0,type:we.A})],t.prototype,"spatialReference",void 0),(0,n._)([(0,S.w)("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),(0,n._)([(0,u.MZ)({json:{type:q.e8.jsonValues}})],t.prototype,"pixelType",void 0),(0,n._)([(0,S.w)("pixelType")],t.prototype,"readPixelType",null),(0,n._)([(0,d.K)("pixelType")],t.prototype,"writePixelType",null),(0,n._)([(0,u.MZ)({constructOnly:!0,type:ee.A})],t.prototype,"serviceRasterInfo",void 0),(0,n._)([(0,u.MZ)()],t.prototype,"sourceJSON",void 0),(0,n._)([(0,u.MZ)(A.OZ)],t.prototype,"url",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],t.prototype,"version",void 0),(0,n._)([(0,S.w)("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=(0,n._)([(0,p.$)("esri.layers.mixins.ArcGISImageService")],t),t};var yr=r(74927),gr=r(1615),wr=r(88243),br=r(92078),vr=r(61380),Mr=r(28366),Sr=r(70652),Ir=r(18195),Ar=r(85924),xr=r(61343),_r=r(18950),Cr=r(91448);let Tr=class extends((0,gr.dM)((0,Ar.e)((0,Ir.j)((0,br.q)((0,vr.A)((0,Mr.H)(mr((0,Sr.J)((0,wr.d)((0,yr.b)((0,a.P)((0,o.O)(h.A))))))))))))){constructor(...e){super(...e),this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery",this._debouncedSaveOperations=(0,l.sg)((async(e,t,n)=>{const{save:i,saveAs:o}=await r.e(3662).then(r.bind(r,47259));switch(e){case Cr.X.SAVE:return i(this,t);case Cr.X.SAVE_AS:return o(this,n,t)}}))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}load(e){const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(l.QP).then((()=>this._fetchService(t)))),Promise.resolve(this)}get legendEnabled(){return!this._isPreviewLayer&&(this._get("legendEnabled")??!0)}set legendEnabled(e){this._set("legendEnabled",e)}get listMode(){return this._isPreviewLayer?"hide":this._get("listMode")}set listMode(e){this._set("listMode",e)}writeOperationalLayerType(e,t,r){const n="vector-field"===this.renderer?.type;t[r]=n?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}get _isPreviewLayer(){return!(!this.raster||!this.url?.toLowerCase().includes("/rasterrendering/imageserver"))}createPopupTemplate(e){const t=this.rasterFields,r=this.title,n=new Set;let i=!1,o=!1;this.capabilities&&(i=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,o="esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const s=new Set;i&&s.add("raster.itempixelvalue");for(const e of t){const t=e.name.toLowerCase();s.has(t)||t.includes("raster.servicepixelvalue.")||n.add(e.name)}o&&n.add("raster.magnitude").add("raster.direction");const a=(0,_r.tn)({fields:t,title:r},{...e,visibleFieldNames:n});return a?.fieldInfos&&this.rasterInfo?.pixelType.startsWith("f")&&a.fieldInfos.forEach((({format:e,fieldName:t})=>{e&&t&&/^raster\.(item|service)pixelvalue/i.test(t)&&(e.places=2)})),a}queryFeatures(e,t){return this.queryRasters(e,t).then((e=>{if(e?.features)for(const t of e.features)t.layer=t.sourceLayer=this;return e}))}queryFeatureCount(e,t){return this.queryRasterCount(e,t)}redraw(){this.emit("redraw")}async save(e){return this._debouncedSaveOperations(Cr.X.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Cr.X.SAVE_AS,t,e)}serviceSupportsSpatialReference(e){return(0,xr.D)(this,e)}write(e,t){if(!this._isPreviewLayer)return super.write(e,t);if(t?.messages){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`;t.messages.push(new s.A("layer:unsupported",`Imagery preview layer (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this}))}return null}};(0,n._)([(0,u.MZ)(A.fV)],Tr.prototype,"legendEnabled",null),(0,n._)([(0,u.MZ)({type:["show","hide"]})],Tr.prototype,"listMode",null),(0,n._)([(0,u.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Tr.prototype,"isReference",void 0),(0,n._)([(0,u.MZ)({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],Tr.prototype,"operationalLayerType",void 0),(0,n._)([(0,d.K)("web-map","operationalLayerType")],Tr.prototype,"writeOperationalLayerType",null),(0,n._)([(0,u.MZ)(A.M6)],Tr.prototype,"popupEnabled",void 0),(0,n._)([(0,u.MZ)({type:i.A,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Tr.prototype,"popupTemplate",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],Tr.prototype,"defaultPopupTemplate",null),(0,n._)([(0,u.MZ)({readOnly:!0,json:{read:!1}})],Tr.prototype,"type",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],Tr.prototype,"_isPreviewLayer",null),Tr=(0,n._)([(0,p.$)("esri.layers.ImageryLayer")],Tr);const Rr=Tr},65215:function(e,t,r){r.d(t,{N3:function(){return o},Om:function(){return i}});var n=r(76613);class i{constructor(e=null,t={},r,n){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(e,t){const r=e.geometry?n.A.fromJSON(e.geometry):null,o=e.centroid?n.A.fromJSON(e.centroid):null,s=e.attributes[t];return new i(r,e.attributes,o,s)}weakClone(){const e=new i(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){const e=this.geometry?.clone(),t=new i(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function o(e){return!!e.geometry?.coords?.length}},72887:function(e,t,r){r.d(t,{A:function(){return n}});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},76613:function(e,t,r){r.d(t,{A:function(){return n}});class n{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(e){return new n(e.lengths,e.coords)}static fromRect(e){const[t,r,i,o]=e,s=i-t,a=o-r;return new n([5],[t,r,s,0,0,a,-s,0,0,-a])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const n=this.lengths[r];for(let r=0;r<n;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=n}}deltaDecode(){const e=this.clone(),{coords:t,lengths:r}=e;let n=0;for(const e of r){for(let r=1;r<e;r++)t[2*(n+r)]+=t[2*(n+r)-2],t[2*(n+r)+1]+=t[2*(n+r)-1];n+=e}return e}clone(e){if(0===this.lengths.length)return new n([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),r=this.coords.slice(0,t);return e?(e.set(r),new n(this.lengths,e)):new n(Array.from(this.lengths),Array.from(r))}}},74927:function(e,t,r){r.d(t,{b:function(){return l}});var n=r(53804),i=r(40633),o=r(23502),s=(r(58941),r(13798),r(65953)),a=r(93389);const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.qg)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.Jf)(e,i.A.getLogger(this)))}};return(0,n._)([(0,o.MZ)()],t.prototype,"title",null),(0,n._)([(0,o.MZ)({type:String})],t.prototype,"url",null),t=(0,n._)([(0,s.$)("esri.layers.mixins.ArcGISService")],t),t}},88243:function(e,t,r){r.d(t,{d:function(){return s}});var n=r(53804),i=r(23502),o=(r(58941),r(40633),r(13798),r(65953));const s=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,n._)([(0,i.MZ)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,n._)([(0,o.$)("esri.layers.mixins.CustomParametersMixin")],t),t}},92078:function(e,t,r){r.d(t,{q:function(){return v}});var n=r(53804),i=r(39819),o=r(90683),s=r(23502),a=r(67888),l=(r(13798),r(58941),r(47332)),u=r(65953),c=r(81392),p=r(64786),d=r(97354),h=r(99495);const f={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},m={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},y={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},g={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":f,"web-map/basemap":m,"web-map/tables":y,"link-chart/operational-layers":{...f,LinkChartLayer:!0},"link-chart/basemap":m,"link-chart/tables":y,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var w=r(7010),b=r(52038);const v=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,n){(n&&"ground"===n.layerContainerType||e&&(0,h.R)(this,r,{},n))&&(t[r]=e)}writeOperationalLayerType(e,t,r,n){e&&"tables"!==n?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?b.A.fromArray(e):null}writeTimeExtent(e,t,r,n){e&&"tables"!==n.layerContainerType&&(e.isEmpty?n?.messages&&n.messages.push(new i.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,d.t)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=g[e];let n=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(n=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(n=!1),!n)return t.messages?.push(new i.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),n=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof i.A&&"web-document-write:property-required"===e.name)).length;return(0,o.w8)(r?.url)?(t?.messages?.push(new i.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:r}beforeSave(){}};return(0,n._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,n._)([(0,l.w)("id",["id"])],t.prototype,"readId",null),(0,n._)([(0,s.MZ)(w.C1)],t.prototype,"listMode",void 0),(0,n._)([(0,c.K)("listMode")],t.prototype,"writeListMode",null),(0,n._)([(0,s.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:p.K}}}}})],t.prototype,"operationalLayerType",void 0),(0,n._)([(0,c.K)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,n._)([(0,s.MZ)(w.ke)],t.prototype,"opacity",void 0),(0,n._)([(0,s.MZ)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,n._)([(0,c.K)("title"),(0,c.K)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,n._)([(0,s.MZ)({type:b.A,json:{origins:{"web-scene":{write:{layerContainerTypes:p.K}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,n._)([(0,l.w)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,n._)([(0,c.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[a.jz,a.Uv]]}})],t.prototype,"writeTimeExtent",null),(0,n._)([(0,s.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:p.K}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,n._)([(0,u.$)("esri.layers.mixins.OperationalLayer")],t),t}},61380:function(e,t,r){r.d(t,{A:function(){return S}});var n=r(53804),i=r(25591),o=r(7156),s=r(93040),a=r(77472),l=r(39819),u=r(40633),c=r(95929),p=r(60539),d=r(90683),h=r(23502),f=(r(58941),r(13798),r(47332)),m=r(65953),y=r(81392),g=r(11432),w=r(51432),b=r(43173),v=r(85956),M=r(29606);const S=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,c.pR)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new b.default({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:n}=await r.e(1536).then(r.bind(r,58615));return(0,p.Te)(t),await n({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(e){throw(0,p.zf)(e)||u.A.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,p.QP)(e),!0))))}async setUserPrivileges(e,t){if(!i.default.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:n},content:{updateItem:i}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",i)}catch(e){(0,p.QP)(e)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const n=e===r.id;if(n&&r.portal.user)return(0,M.It)(r);let i,s;if(n)i=r.portal.url;else try{i=await(0,g.wI)(this.url,t)}catch(e){(0,p.QP)(e)}if(!i||!(0,d.b8)(i,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;s=await(o.id?.getCredential(`${i}/sharing`,{prompt:!1,signal:e}))}catch(e){(0,p.QP)(e)}const a=!0,l=!1,u=!1;if(!s)return{features:{edit:a,fullEdit:l},content:{updateItem:u}};try{if(n?await r.reload():(r=new b.default({id:e,portal:{url:i}}),await r.load(t)),r.portal.user)return(0,M.It)(r)}catch(e){(0,p.QP)(e)}return{features:{edit:a,fullEdit:l},content:{updateItem:u}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(e){(0,p.QP)(e)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?o.id?.findCredential(this.url):null;if(!t)return!0;const r=I.credential===t?I.user:await this._fetchEditingUser(e);return I.credential=t,I.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=o.id?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const n=`${r.owningSystemUrl}/sharing/rest`,i=w.A.getDefault();if(i&&i.loaded&&(0,d.S8)(i.restUrl)===(0,d.S8)(n))return i.user;const l=`${n}/community/self`,u=null!=e?e.signal:null,c=await(0,a.Ke)((0,s.A)(l,{authMode:"no-prompt",query:{f:"json"},signal:u}));return c.ok?v.A.fromJSON(c.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,n=this.portalItem?.id&&(this.portalItem.portal||w.A.getDefault());return r&&n&&!(0,d.ut)(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new l.A("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,n._)([(0,h.MZ)({type:b.default})],t.prototype,"portalItem",null),(0,n._)([(0,f.w)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,n._)([(0,y.K)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,n._)([(0,h.MZ)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,n._)([(0,h.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,n._)([(0,h.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,n._)([(0,h.MZ)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,n._)([(0,m.$)("esri.layers.mixins.PortalLayer")],t),t},I={credential:null,user:null}},28366:function(e,t,r){r.d(t,{H:function(){return h}});var n=r(53804),i=r(23502),o=(r(58941),r(40633),r(13798),r(65953)),s=r(92778),a=r(75743),l=r(30905),u=r(67888),c=r(74376);let p=class extends((0,a.O)(l.oY)){constructor(e){super(e),this.name=void 0,this.method="none",this.value=void 0,this.bandIds=void 0,this.renderer=void 0}};(0,n._)([(0,i.MZ)({type:String,json:{write:!0}})],p.prototype,"name",void 0),(0,n._)([(0,i.MZ)({type:["raster-function-template","variable","none"],json:{write:!0}}),(0,c.e)({rasterFunctionTemplate:"raster-function-template",variable:"variable",none:"none"})],p.prototype,"method",void 0),(0,n._)([(0,i.MZ)({type:String,json:{write:!0}})],p.prototype,"value",void 0),(0,n._)([(0,i.MZ)({type:[u.jz],json:{write:!0}})],p.prototype,"bandIds",void 0),(0,n._)([(0,i.MZ)({types:s.uy,json:{write:!0,origins:{"web-scene":{types:s.Gj,write:{overridePolicy:e=>({enabled:e&&"vector-field"!==e.type&&"flow"!==e.type})}}}}})],p.prototype,"renderer",void 0),p=(0,n._)([(0,o.$)("esri.renderers.support.RasterPresetRenderer")],p);const d=p,h=e=>{let t=class extends e{constructor(){super(...arguments),this.activePresetRendererName=null,this.presetRenderers=null}};return(0,n._)([(0,i.MZ)({type:String,json:{name:"layerDefinition.activePresetRendererName",write:{allowNull:!0}}})],t.prototype,"activePresetRendererName",void 0),(0,n._)([(0,i.MZ)({type:[d],json:{name:"layerDefinition.presetRenderers",write:!0}})],t.prototype,"presetRenderers",void 0),t=(0,n._)([(0,o.$)("esri.layers.mixins.RasterPresetRendererMixin")],t),t}},70652:function(e,t,r){r.d(t,{J:function(){return b}});var n=r(53804),i=(r(58941),r(40633)),o=r(60539),s=r(23502),a=r(77560),l=(r(13798),r(65953)),u=r(64786),c=r(78879),p=r(28181),d=r(25638);const h=new c.A,f=new WeakMap;function m(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:m(t,e%t):0}let y=0,g=0;function w(){const e=Date.now();let t=!1;for(const r of h){const n=r.deref();n?n.refreshInterval&&e-(f.get(n)??0)+5>=6e4*n.refreshInterval&&(f.set(n,e),n.refresh(e)):t=!0}if(t)for(let e=h.length-1;e>=0;e--)h.at(e).deref()||h.removeAt(e)}(0,d.fm)((()=>{const e=Date.now();let t=0;for(const r of h){const n=r.deref();n&&(t=m(Math.round(6e4*n.refreshInterval),t),n.refreshInterval?f.get(n)||f.set(n,e):f.delete(n))}if(t!==g){if(g=t,clearInterval(y),0===g)return void(y=0);y=setInterval(w,g)}}),p.OH);const b=e=>{let t=class extends e{constructor(...e){super(...e),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,o.sg)((()=>this.hasDataChanged())),this.when().then((()=>{this.destroyed||function(e){(function(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e})(e)&&h.push(new WeakRef(e))}(this)}),(()=>{}))}destroy(){!function(e){const t=h.find((t=>t.deref()===e));t&&h.remove(t)}(this)}castRefreshInterval(e){return e>=.1?e:e<=0?0:.1}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(e=Date.now()){(0,o.QZ)(this._debounceHasDataChanged()).then((t=>{t&&this._set("refreshTimestamp",e),this.emit("refresh",{dataChanged:t})}),(e=>{i.A.getLogger(this).error(e),this.emit("refresh",{dataChanged:!1,error:e})}))}async hasDataChanged(){return!0}get test(){}};return(0,n._)([(0,s.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:u.K}}}}})],t.prototype,"refreshInterval",void 0),(0,n._)([(0,a.w)("refreshInterval")],t.prototype,"castRefreshInterval",null),(0,n._)([(0,s.MZ)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,n._)([(0,s.MZ)({readOnly:!0})],t.prototype,"refreshParameters",null),t=(0,n._)([(0,l.$)("esri.layers.mixins.RefreshableLayer")],t),t}},85924:function(e,t,r){r.d(t,{B:function(){return h},e:function(){return f}});var n=r(53804),i=r(23502),o=(r(58941),r(40633),r(13798),r(47332)),s=r(65953),a=r(64786),l=r(53743),u=r(36143),c=r(35060),p=r(52038),d=r(92427);const h={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:a.K}}},f=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(e,t){const r=t.timeInfo.exportOptions;if(!r)return null;const n=r.timeOffset,i=c.j.fromJSON(r.timeOffsetUnits);return n&&i?new d.A({value:n,unit:i}):null}set timeInfo(e){(0,l.sv)(e,this.fieldsIndex),this._set("timeInfo",e)}};return(0,n._)([(0,i.MZ)({type:p.A,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,n._)([(0,i.MZ)({type:d.A})],t.prototype,"timeOffset",void 0),(0,n._)([(0,o.w)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,n._)([(0,i.MZ)({value:null,type:u.A,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,n._)([(0,i.MZ)(h)],t.prototype,"useViewTime",void 0),t=(0,n._)([(0,s.$)("esri.layers.mixins.TemporalLayer")],t),t}},7860:function(e,t,r){r.d(t,{A:function(){return p}});var n,i=r(53804),o=r(30905),s=r(21609),a=r(23502),l=r(67888),u=r(65953);let c=n=class extends o.oY{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new n({variableName:this.variableName,dimensionName:this.dimensionName,values:(0,s.o8)(this.values),isSlice:this.isSlice})}};(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"variableName",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"dimensionName",void 0),(0,i._)([(0,a.MZ)({type:l.gK.array(l.gK.oneOf([l.gK.native(Number),l.gK.array(l.gK.native(Number))])),json:{write:!0}})],c.prototype,"values",void 0),(0,i._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"isSlice",void 0),c=n=(0,i._)([(0,u.$)("esri.layers.support.DimensionalDefinition")],c);const p=c},7103:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(39819),i=r(30905),o=r(40633),s=r(25738),a=r(92955),l=r(53743),u=r(21168),c=r(96285);const p=new Map;class d{static fromJSON(e){return new d(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new d(e.fields??[],y(e))}static fromLayerJSON(e){return new d(e.fields??[],y(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const e of this.fields){const t=e?.name,n=f(t);if(t&&n){const i=h(t);this._fieldsMap.set(t,e),this._fieldsMap.set(i,e),this._normalizedFieldsMap.set(n,e),r.push(`${i}:${e.type}:${this._timeZoneByFieldName?.get(t)}`),(0,l.vE)(e)?(this.dateFields.push(e),this._dateFieldsSet.add(e)):(0,l.WA)(e)&&(this._numericFieldsSet.add(e),this.numericFields.push(e)),(0,l.te)(e)||(0,l.Xz)(e)||(e.editable=null==e.editable||!!e.editable,e.nullable=null==e.nullable||!!e.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,l.te)(e)||(0,l.Xz)(e)||e.nullable||void 0!==(0,l.lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(h(e))??this._normalizedFieldsMap.get(f(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(o.A.getLogger("esri.layers.support.FieldsIndex").error(new n.A("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),u.n$):m.has(t.type)?u.L5:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===u.L5?a.GB.instance:t===u.n$?c.mQ.utcInstance:(0,s.tE)(p,t,(()=>c.oh.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,l.OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,i.Wj)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function h(e){return e.trim().toLowerCase()}function f(e){return(0,l.rS)(e)?.toLowerCase()??""}const m=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function y(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:n,editFieldsInfo:i}=e,o=(n?"startField"in n?n.startField:n.startTimeField:"")??"",s=(n?"endField"in n?n.endField:n.endTimeField:"")??"",a=function(e){return"dateFieldsTimeZone"in e}(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,u.ZS)(e.dateFieldsTimeReference):null,l=i?function(e){return"timeZone"in e}(i)?i.timeZone??a:i.dateFieldsTimeReference?(0,u.ZS)(i.dateFieldsTimeReference):a??u.n$:null,c=n?function(e){return"timeZone"in e}(n)?n.timeZone??a:n.timeReference?(0,u.ZS)(n.timeReference):a:null,p=new Map([[h(i?.creationDateField??""),l],[h(i?.editDateField??""),l],[h(o),c],[h(s),c]]);for(const{name:n,type:i}of e.fields)if(m.has(i))t.set(n,u.L5);else if("date"!==i&&"esriFieldTypeDate"!==i)t.set(n,null);else if(r)t.set(n,u.L5);else{const e=p.get(h(n??""))??a;t.set(n,e)}return t}},84284:function(e,t,r){r.d(t,{A:function(){return v}});var n,i=r(53804),o=r(73037),s=r(30905),a=r(21609),l=r(23502),u=r(77560),c=r(47332),p=r(65953),d=r(81392),h=r(67888),f=r(45532),m=r(7860),y=r(77345);const g=(0,o.O)()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),w=(0,o.O)()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});let b=n=class extends s.oY{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return null!=t.ascending?t.ascending:null==t.sortAscending||t.sortAscending}readMethod(e,t){return function(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return w.fromJSON(t)}(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,r){null!=e&&(e=e.filter((({variableName:e,dimensionName:t})=>e&&"*"!==e||t))).length&&(t[r]=e.map((e=>e.toJSON())))}readOperation(e,t){const r=t.mosaicOperation,n=t.mosaicOperator?.toLowerCase(),i=r||(n?g.toJSON(n):null);return g.fromJSON(i)||"first"}castSortValue(e){return null==e||"string"==typeof e||"number"==typeof e?e:`${e}`}clone(){return new n({ascending:this.ascending,itemRasterFunction:(0,a.o8)(this.itemRasterFunction),lockRasterIds:(0,a.o8)(this.lockRasterIds),method:this.method,multidimensionalDefinition:(0,a.o8)(this.multidimensionalDefinition),objectIds:(0,a.o8)(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:(0,a.o8)(this.viewpoint),where:this.where})}};(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],b.prototype,"ascending",void 0),(0,i._)([(0,c.w)("ascending",["ascending","sortAscending"])],b.prototype,"readAscending",null),(0,i._)([(0,l.MZ)({type:y.A,json:{name:"itemRenderingRule",write:!0}})],b.prototype,"itemRasterFunction",void 0),(0,i._)([(0,l.MZ)({type:[h.jz],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],b.prototype,"lockRasterIds",void 0),(0,i._)([(0,l.MZ)({type:String,json:{type:w.jsonValues,write:{target:"mosaicMethod",writer:w.write}}})],b.prototype,"method",void 0),(0,i._)([(0,c.w)("method",["mosaicMethod","defaultMosaicMethod"])],b.prototype,"readMethod",null),(0,i._)([(0,l.MZ)({type:[m.A],json:{write:!0}})],b.prototype,"multidimensionalDefinition",void 0),(0,i._)([(0,d.K)("multidimensionalDefinition")],b.prototype,"writeMultidimensionalDefinition",null),(0,i._)([(0,l.MZ)({type:[h.jz],json:{name:"fids",write:!0}})],b.prototype,"objectIds",void 0),(0,i._)([(0,l.MZ)({json:{type:g.jsonValues,read:{reader:g.read},write:{target:"mosaicOperation",writer:g.write}}})],b.prototype,"operation",void 0),(0,i._)([(0,c.w)("operation",["mosaicOperation","mosaicOperator"])],b.prototype,"readOperation",null),(0,i._)([(0,l.MZ)({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],b.prototype,"sortField",void 0),(0,i._)([(0,l.MZ)({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],b.prototype,"sortValue",void 0),(0,i._)([(0,u.w)("sortValue")],b.prototype,"castSortValue",null),(0,i._)([(0,l.MZ)({type:f.default,json:{write:!0}})],b.prototype,"viewpoint",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],b.prototype,"where",void 0),b=n=(0,i._)([(0,p.$)("esri.layers.support.MosaicRule")],b);const v=b},66362:function(e,t,r){r.d(t,{A:function(){return f}});var n,i=r(53804),o=(r(50917),r(30905)),s=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(91484),u=r(44740),c=r(74697),p=r(7860);const d={base:r(46556).A,key:"type",typeMap:{extent:l.default,polygon:u.A}};let h=n=class extends o.oY{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(null==e||0===e.length)return[];const t=new Map;e.forEach((e=>{if(!e.dimensionName)return;let r,n;if(Array.isArray(e.values[0])){const t=e.values;r=t[0][0],n=t[e.values.length-1][1]}else{const t=e.values;r=t[0],n=t[e.values.length-1]}if(t.has(e.dimensionName)){const i=t.get(e.dimensionName);i[0]=Math.min(r,i[0]),i[1]=Math.max(n,i[1])}else t.set(e.dimensionName,[r,n])}));const r=[];for(const e of t)r.push({name:e[0],extent:e[1]});return r}get variables(){const{subsetDefinitions:e}=this;if(null==e||0===e.length)return[];const t=new Set;return e.forEach((e=>{e.variableName&&t.add(e.variableName)})),[...t]}clone(){const e=this.subsetDefinitions?.map((e=>e.clone())),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new n({areaOfInterest:t,subsetDefinitions:e})}};(0,i._)([(0,s.MZ)({types:d,json:{read:c.rS,write:!0}})],h.prototype,"areaOfInterest",void 0),(0,i._)([(0,s.MZ)({readOnly:!0})],h.prototype,"dimensions",null),(0,i._)([(0,s.MZ)({readOnly:!0})],h.prototype,"variables",null),(0,i._)([(0,s.MZ)({type:[p.A],json:{write:!0}})],h.prototype,"subsetDefinitions",void 0),h=n=(0,i._)([(0,a.$)("esri.layers.support.MultidimensionalSubset")],h);const f=h},21327:function(e,t,r){r.d(t,{A:function(){return m}});var n,i=r(53804),o=r(39819),s=r(30905),a=r(21609),l=r(40633),u=r(23502),c=r(77560),p=r(65953),d=r(42568),h=r(95738);let f=n=class extends s.oY{static createEmptyBand(e,t){return new(n.getPixelArrayConstructor(e))(t)}static combineBandMasks(e){if(e.length<2)return e[0];const t=e[0].length,r=new Uint8Array(t).fill(255);for(let n=0;n<e.length;n++){const i=e[n];for(let e=0;e<t;e++)i[e]||(r[e]=0)}return r}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){return this.pixels?.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new o.A("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics??new d.z)}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map((e=>function(e,t){let r=1/0,n=-1/0;const i=e.length;let o,s=0;if(null!=t)for(o=0;o<i;o++)t[o]&&(s=e[o],r=s<r?s:r,n=s>n?s:n);else for(o=0;o<i;o++)s=e[o],r=s<r?s:r,n=s>n?s:n;return new d.z(r,n)}(e,this.mask)));const e=this.mask;let t=0;if(null!=e)for(let r=0;r<e.length;r++)e[r]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||"f64"===e||"f32"===e||!this.pixels)return;const[t,r]=(0,h.hP)(e),i=this.pixels,o=this.width*this.height,s=i.length;let a,l,u;const c=[];for(let p=0;p<s;p++){u=n.createEmptyBand(e,o),a=i[p];for(let e=0;e<o;e++)l=a[e],u[e]=l>r?r:l<t?t:l;c.push(u)}this.pixels=c,this.pixelType=e}extractBands(e){const{pixels:t,statistics:r}=this;if(null==e||0===e.length||!t||0===t.length)return this;const i=t.length,o=e.some((e=>e>=t.length)),s=i===e.length&&!e.some(((e,t)=>e!==t));if(o||s)return this;const a=this.bandMasks?.length===i?e.map((e=>this.bandMasks[e])):void 0;let{mask:l,validPixelCount:u}=this;const{width:c,height:p}=this;return a?.length&&(l=n.combineBandMasks(a),u=l.filter((e=>!!e)).length),new n({pixelType:this.pixelType,width:c,height:p,mask:l,bandMasks:a,validPixelCount:u,maskIsAlpha:this.maskIsAlpha,pixels:e.map((e=>t[e])),statistics:r&&e.map((e=>r[e]))})}clone(){const e=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;null!=this.mask&&(e.mask=new Uint8Array(this.mask)),this.bandMasks&&(e.bandMasks=this.bandMasks.map((e=>new Uint8Array(e))));const r=n.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const n=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=n?this.pixels[t].slice():new r(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=(0,a.o8)(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:r,premultiplyAlpha:n,pixels:i}=this;if(!e||!i?.length)return void l.A.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let o,s,a,u;o=s=a=i[0],i.length>=3?(s=i[1],a=i[2]):2===i.length&&(s=i[1]);const c=new Uint32Array(e),p=this.width*this.height;if(o.length===p)if(null!=t&&t.length===p)if(r)for(u=0;u<p;u++){const e=t[u];if(e){const t=e/255;c[u]=n?e<<24|a[u]*t<<16|s[u]*t<<8|o[u]*t:e<<24|a[u]<<16|s[u]<<8|o[u]}}else for(u=0;u<p;u++)t[u]&&(c[u]=255<<24|a[u]<<16|s[u]<<8|o[u]);else for(u=0;u<p;u++)c[u]=255<<24|a[u]<<16|s[u]<<8|o[u];else l.A.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:r,statistics:n}=this;if(!e||!t?.length)return void l.A.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const i=this.pixelType;let o=1,s=0,a=1;if(n&&n.length>0){for(const e of n)if(null!=e.minValue&&(s=Math.min(s,e.minValue)),null!=e.maxValue&&null!=e.minValue){const t=e.maxValue-e.minValue;a=Math.max(a,t)}o=255/a}else{let e=255;"s8"===i?(s=-128,e=127):"u16"===i?e=65535:"s16"===i?(s=-32768,e=32767):"u32"===i?e=4294967295:"s32"===i?(s=-2147483648,e=2147483647):"f32"===i?(s=-34e38,e=34e38):"f64"===i&&(s=-Number.MAX_VALUE,e=Number.MAX_VALUE),o=255/(e-s)}const u=new Uint32Array(e),c=this.width*this.height;let p,d,h,f,m;if(p=d=h=t[0],p.length!==c)return l.A.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(d=t[1],t.length>=3&&(h=t[2]),null!=r&&r.length===c)for(f=0;f<c;f++)r[f]&&(u[f]=255<<24|(h[f]-s)*o<<16|(d[f]-s)*o<<8|(p[f]-s)*o);else for(f=0;f<c;f++)u[f]=255<<24|(h[f]-s)*o<<16|(d[f]-s)*o<<8|(p[f]-s)*o;else if(null!=r&&r.length===c)for(f=0;f<c;f++)m=(p[f]-s)*o,r[f]&&(u[f]=255<<24|m<<16|m<<8|m);else for(f=0;f<c;f++)m=(p[f]-s)*o,u[f]=255<<24|m<<16|m<<8|m}_fillFrom32Bit(e){const{pixels:t,mask:r}=this;if(!e||!t?.length)return l.A.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let n,i,o,s;n=i=o=t[0],t.length>=3?(i=t[1],o=t[2]):2===t.length&&(i=t[1]);const a=this.width*this.height;if(n.length!==a)return l.A.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let u=0;if(null!=r&&r.length===a)for(s=0;s<a;s++)e[u++]=n[s],e[u++]=i[s],e[u++]=o[s],e[u++]=1&r[s];else for(s=0;s<a;s++)e[u++]=n[s],e[u++]=i[s],e[u++]=o[s],e[u++]=1}};(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"width",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"height",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"pixelType",void 0),(0,i._)([(0,c.w)("pixelType")],f.prototype,"castPixelType",null),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"validPixelCount",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"mask",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"maskIsAlpha",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"pixels",void 0),(0,i._)([(0,u.MZ)()],f.prototype,"premultiplyAlpha",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"statistics",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"depthCount",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"noDataValues",void 0),(0,i._)([(0,u.MZ)({json:{write:!0}})],f.prototype,"bandMasks",void 0),f=n=(0,i._)([(0,p.$)("esri.layers.support.PixelBlock")],f);const m=f},77345:function(e,t,r){r.d(t,{A:function(){return N}});var n=r(53804),i=r(30905),o=r(21609),s=r(23502),a=(r(58941),r(40633),r(74376)),l=r(47332),u=r(65953),c=r(81392),p=r(73037),d=r(67888),h=(r(13798),r(32405));let f=class extends i.oY{constructor(){super(...arguments),this.pixelType="unknown"}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],f.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:d.jz,json:{type:d.jz,write:!0,name:"_object_id"}})],f.prototype,"id",void 0),(0,n._)([(0,s.MZ)({type:String,json:{type:h.e8.jsonValues,read:h.e8.read,write:h.e8.write}})],f.prototype,"pixelType",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],f.prototype,"type",void 0),f=(0,n._)([(0,u.$)("esri.layers.support.RasterFunctionInfo")],f);const m=f;let y=class extends i.oY{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"name",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{type:d.jz,write:!0,name:"_object_id"}})],y.prototype,"id",void 0),(0,n._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"isDataset",void 0),(0,n._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"isPublic",void 0),(0,n._)([(0,s.MZ)({json:{write:!0}})],y.prototype,"value",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],y.prototype,"type",void 0),y=(0,n._)([(0,u.$)("esri.layers.support.RasterFunctionVariable")],y);const g={key:"type",base:null,typeMap:{RasterFunctionVariable:y}};let w=class extends i.oY{};(0,n._)([(0,s.MZ)({types:g,json:{types:g,name:"MatchVariable"}})],w.prototype,"matchVariable",void 0),(0,n._)([(0,s.MZ)({types:g,json:{types:g,name:"UnionDimension"}})],w.prototype,"unionDimension",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{type:d.jz,write:!0,name:"_object_id"}})],w.prototype,"id",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],w.prototype,"type",void 0),w=(0,n._)([(0,u.$)("esri.layers.support.RasterFunctionProperties")],w);const b=w,v=new p.J({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let M=class extends i.oY{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};(0,n._)([(0,s.MZ)({type:[String],json:{write:!0}})],M.prototype,"aliases",void 0),(0,n._)([(0,s.MZ)({type:Object,json:{write:!0}})],M.prototype,"arguments",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:m,json:{write:!0,name:"function"}})],M.prototype,"functionInfo",void 0),(0,n._)([(0,s.MZ)({type:v.apiValues,json:{type:[0,1,2],read:v.read,write:v.write}})],M.prototype,"functionType",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"group",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"help",void 0),(0,n._)([(0,s.MZ)({type:Number,json:{type:d.jz,write:!0,name:"_object_id"}})],M.prototype,"id",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"name",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0,name:"definition"}})],M.prototype,"queryDefinition",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"tag",void 0),(0,n._)([(0,s.MZ)({type:b,json:{write:!0}})],M.prototype,"properties",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"thumbnail",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],M.prototype,"thumbnailEx",void 0),(0,n._)([(0,s.MZ)({json:{type:["RasterFunctionTemplate"],write:!0}})],M.prototype,"type",void 0),M=(0,n._)([(0,u.$)("esri.layers.support.RasterFunctionTemplate")],M);const S=M;var I;const A=new Set(["raster","raster2","dem","fillraster"]),x=new Set(["rasters"]),_=e=>e?.rasterFunction?D.fromJSON(e):e,C=e=>e&&e instanceof D?e.toJSON():e,T=e=>e?.functionName&&!e.declaredClass,R=e=>T(e)?new D(e):e,k={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:S}},json:{write:!0,name:"rasterFunctionDefinition"}};let D=I=class extends i.oY{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some((t=>A.has(t.toLowerCase())&&T(e[t])))||t.some((t=>x.has(t.toLowerCase())&&Array.isArray(e[t])&&e[t].some((e=>T(e)))))){e=(0,o.o8)(e);for(const r of t)A.has(r.toLowerCase())?e[r]=R(e[r]):x.has(r.toLowerCase())&&Array.isArray(e[r])&&(e[r]=e[r].map((e=>R(e))))}}this._set("functionArguments",e)}readFunctionArguments(e){return(e=>{if(null==e)return null;e=(0,o.o8)(e);const t={};for(const r of Object.keys(e))A.has(r.toLowerCase())?t[r]=_(e[r]):x.has(r.toLowerCase())&&Array.isArray(e[r])?t[r]=e[r].map(_):t[r]=e[r];return t})(e)}writeFunctionArguments(e,t,r){const n={};for(const t of Object.keys(e))A.has(t.toLowerCase())?n[t]=C(e[t]):x.has(t.toLowerCase())&&Array.isArray(e[t])?n[t]=e[t].map(C):n[t]=C(e[t]);t[r]=n}readFunctionName(e,t){const r=t.rasterFunctionInfos;return t.name||(r?.length&&"None"!==r[0].name?r[0].name:t.rasterFunction||t.rasterFunctionDefinition?.name)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=e?S.fromJSON(e):null}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes('"type":"ClipFunction"'):JSON.stringify(this).includes('"rasterFunction":"Clip"')}clone(){return new I({functionName:this.functionName,functionArguments:(0,o.o8)(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:(0,o.o8)(this.rasterFunctionDefinition)})}};(0,n._)([(0,s.MZ)({json:{type:Object,name:"rasterFunctionArguments"}})],D.prototype,"functionArguments",null),(0,n._)([(0,l.w)("functionArguments")],D.prototype,"readFunctionArguments",null),(0,n._)([(0,c.K)("functionArguments")],D.prototype,"writeFunctionArguments",null),(0,n._)([(0,s.MZ)({json:{type:String,write:{target:"rasterFunction"}}})],D.prototype,"functionName",void 0),(0,n._)([(0,l.w)("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],D.prototype,"readFunctionName",null),(0,n._)([(0,a.e)({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1,default:"unknown"})],D.prototype,"outputPixelType",void 0),(0,n._)([(0,s.MZ)({type:String,json:{read:!0,write:!0}})],D.prototype,"variableName",void 0),(0,n._)([(0,s.MZ)()],D.prototype,"rasterFunctionDefinition",null),(0,n._)([(0,s.MZ)(k)],D.prototype,"functionDefinition",void 0),(0,n._)([(0,s.MZ)()],D.prototype,"hasClipFunction",null),D=I=(0,n._)([(0,u.$)("esri.layers.support.RasterFunction")],D);const N=D},98521:function(e,t,r){r.d(t,{A:function(){return I}});var n,i=r(53804),o=r(30905),s=r(21609),a=r(23502),l=(r(58941),r(40633),r(65953)),u=r(91484),c=r(57165);function p(e){return e=Number(e),isNaN(e)?void 0:e}r(13798);let d=n=class extends o.oY{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new n({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};(0,i._)([(0,a.MZ)({json:{name:"BandName",write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,a.MZ)({json:{name:"WavelengthMin",read:{reader:p},write:!0}})],d.prototype,"minWavelength",void 0),(0,i._)([(0,a.MZ)({json:{name:"WavelengthMax",read:{reader:p},write:!0}})],d.prototype,"maxWavelength",void 0),(0,i._)([(0,a.MZ)({json:{name:"RadianceBias",read:{reader:p},write:!0}})],d.prototype,"radianceBias",void 0),(0,i._)([(0,a.MZ)({json:{name:"RadianceGain",read:{reader:p},write:!0}})],d.prototype,"radianceGain",void 0),(0,i._)([(0,a.MZ)({json:{name:"ReflectanceBias",read:{reader:p},write:!0}})],d.prototype,"reflectanceBias",void 0),(0,i._)([(0,a.MZ)({json:{name:"ReflectanceGain",read:{reader:p},write:!0}})],d.prototype,"reflectanceGain",void 0),(0,i._)([(0,a.MZ)({json:{name:"SolarIrradiance",read:{reader:p},write:!0}})],d.prototype,"solarIrradiance",void 0),d=n=(0,i._)([(0,l.$)("esri.layers.support.RasterBandInfo")],d);const h=d;var f,m=r(47332),y=r(81392);function g(e){return e=Number(e),isNaN(e)?void 0:e}let w=f=class extends o.oY{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(e){return new Date(e)}writeAcquisitionDate(e,t){t.AcquisitionDate=e.getTime()}clone(){return new f({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};(0,i._)([(0,a.MZ)({json:{name:"AcquisitionDate",write:!0}})],w.prototype,"acquisitionDate",void 0),(0,i._)([(0,m.w)("acquisitionDate")],w.prototype,"readAcquisitionDate",null),(0,i._)([(0,y.K)("acquisitionDate")],w.prototype,"writeAcquisitionDate",null),(0,i._)([(0,a.MZ)({json:{name:"CloudCover",read:{reader:g},write:!0}})],w.prototype,"cloudCover",void 0),(0,i._)([(0,a.MZ)({json:{name:"ProductName",write:!0}})],w.prototype,"productName",void 0),(0,i._)([(0,a.MZ)({json:{name:"SensorName",write:!0}})],w.prototype,"sensorName",void 0),(0,i._)([(0,a.MZ)({json:{name:"SensorAzimuth",read:{reader:g},write:!0}})],w.prototype,"sensorAzimuth",void 0),(0,i._)([(0,a.MZ)({json:{name:"SensorElevation",read:{reader:g},write:!0}})],w.prototype,"sensorElevation",void 0),(0,i._)([(0,a.MZ)({json:{name:"SunAzimuth",read:{reader:g},write:!0}})],w.prototype,"sunAzimuth",void 0),(0,i._)([(0,a.MZ)({json:{name:"SunElevation",read:{reader:g},write:!0}})],w.prototype,"sunElevation",void 0),w=f=(0,i._)([(0,l.$)("esri.layers.support.RasterSensorInfo")],w);const b=w;var v,M=r(70850);let S=v=class extends o.oY{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const e=this.keyProperties.BandProperties,{bandCount:t}=this;if(!e?.length||e.length<t){const e=[];for(let r=1;r<=t;r++)e.push(new h({name:"band_"+r}));return e}const r=e.map((e=>h.fromJSON(e)));for(let e=0;e<r.length;e++)r[e].name=r[e].name||"band_"+(e+1);return r}get dataType(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===e?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return b.fromJSON(this.keyProperties)}clone(){return new v({attributeTable:(0,s.o8)(this.attributeTable),bandCount:this.bandCount,colormap:(0,s.o8)(this.colormap),extent:(0,s.o8)(this.extent),format:this.format,height:this.height,width:this.width,histograms:(0,s.o8)(this.histograms),keyProperties:(0,s.o8)(this.keyProperties),multidimensionalInfo:(0,s.o8)(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:(0,s.o8)(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:(0,s.o8)(this.spatialReference),statistics:(0,s.o8)(this.statistics),storageInfo:(0,s.o8)(this.storageInfo),transform:(0,s.o8)(this.transform)})}};(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"attributeTable",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"bandCount",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],S.prototype,"bandInfos",null),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"colormap",void 0),(0,i._)([(0,a.MZ)({type:String,readOnly:!0})],S.prototype,"dataType",null),(0,i._)([(0,a.MZ)({type:u.default,json:{write:!0}})],S.prototype,"extent",void 0),(0,i._)([(0,a.MZ)({type:u.default,json:{write:!0}})],S.prototype,"nativeExtent",null),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"nativePixelSize",null),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"format",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"height",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"width",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"hasMultidimensionalTranspose",null),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"histograms",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"keyProperties",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"multidimensionalInfo",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"noDataValue",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"pixelSize",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"pixelType",void 0),(0,i._)([(0,a.MZ)()],S.prototype,"isPseudoSpatialReference",void 0),(0,i._)([(0,a.MZ)({readOnly:!0})],S.prototype,"sensorInfo",null),(0,i._)([(0,a.MZ)({type:c.A,json:{write:!0}})],S.prototype,"spatialReference",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"statistics",void 0),(0,i._)([(0,a.MZ)({type:M.A,json:{write:!0}})],S.prototype,"storageInfo",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],S.prototype,"transform",void 0),S=v=(0,i._)([(0,l.$)("esri.layers.support.RasterInfo")],S);const I=S},46766:function(e,t,r){r.d(t,{A:function(){return s}});var n=r(39819),i=r(86027),o=r(21327);class s{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const e=await(0,i.ho)("RasterWorker");this._destroyed?e.close():this._workerThread=e}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:e.pixelBlock.toJSON(),type:e.dataType},t);return r?new o.A(r):null}computeStatisticsHistograms(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:e.pixelBlock.toJSON()},t)}async decode(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("decode",e,t);return r?new o.A(r):null}async symbolize(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r={extent:e.extent?.toJSON(),pixelBlock:e.pixelBlock?.toJSON(),simpleStretchParams:e.simpleStretchParams,bandIds:e.bandIds},i=await this._workerThread.invoke("symbolize",r,t);return i?new o.A(i):null}async updateSymbolizer(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r=e?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:e.toJSON(),histograms:r},t))}async updateRasterFunction(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:e.toJSON()},t))}async process(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r=await this._workerThread.invoke("process",{extent:e.extent?.toJSON(),primaryPixelSizes:e.primaryPixelSizes?.map((e=>null!=e?e.toJSON():null)),primaryPixelBlocks:e.primaryPixelBlocks.map((e=>null!=e?e.toJSON():null)),primaryRasterIds:e.primaryRasterIds},t);return r?new o.A(r):null}async stretch(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON(),stretchParams:e.stretchParams},i=await this._workerThread.invoke("stretch",r,t);return i?new o.A(i):null}async split(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON(),tileSize:e.tileSize,maximumPyramidLevel:e.maximumPyramidLevel,useBilinear:e.useBilinear},i=await this._workerThread.invoke("split",r,t);return i&&i.forEach(((e,t)=>{i.set(t,e?o.A.fromJSON(e):null)})),i}async clipTile(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={...e,pixelBlock:e.pixelBlock.toJSON()},i=await this._workerThread.invoke("clipTile",r,t);return i?o.A.fromJSON(i):null}async estimateStatisticsHistograms(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");if(!e?.pixelBlock)return null;const r={srcPixelBlock:e.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",r,t)}async mosaicAndTransform(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");if(!e?.srcPixelBlocks?.length)return{pixelBlock:null};const r={...e,srcPixelBlocks:e.srcPixelBlocks.map((e=>null!=e?e.toJSON():null))},i=await this._workerThread.invoke("mosaicAndTransform",r,t);return{pixelBlock:i.pixelBlock?new o.A(i.pixelBlock):null,localNorthDirections:i.localNorthDirections}}async createFlowMesh(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r={buffer:e.flowData.data.buffer,maskBuffer:e.flowData.mask.buffer,width:e.flowData.width,height:e.flowData.height},{meshType:i,simulationSettings:o}=e,s=await this._workerThread.invoke("createFlowMesh",{meshType:i,flowData:r,simulationSettings:o},{...t,transferList:[r.buffer,r.maskBuffer]});return{vertexData:new Float32Array(s.vertexBuffer),indexData:new Uint32Array(s.indexBuffer)}}getProjectionOffsetGrid(e,t){if(!this._workerThread)throw new n.A("raster-jobhandler:no-connection","no available worker connection");const r=null!=e.datumTransformation?e.datumTransformation.steps.map((e=>({wkid:e.wkid,wkt:e.wkt,isInverse:e.isInverse}))):null,i=null!=e.rasterTransform?e.rasterTransform.toJSON():null,o={projectedExtent:e.projectedExtent.toJSON(),srcBufferExtent:e.srcBufferExtent.toJSON(),pixelSize:e.pixelSize,hasWrapAround:e.hasWrapAround,spacing:e.spacing,datumTransformationSteps:r,rasterTransform:i,isAdaptive:e.isAdaptive,includeGCSGrid:e.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",o,t)}}},70850:function(e,t,r){r.d(t,{A:function(){return p}});var n,i=r(53804),o=r(30905),s=r(21609),a=r(23502),l=(r(58941),r(40633),r(65953)),u=r(45532);let c=n=class extends o.oY{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new n({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:(0,s.o8)(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:(0,s.o8)(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:(0,s.o8)(this.tileInfo),transposeInfo:(0,s.o8)(this.transposeInfo),blockBoundary:(0,s.o8)(this.blockBoundary)})}};(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"blockWidth",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"blockHeight",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],c.prototype,"compression",void 0),(0,i._)([(0,a.MZ)({type:u.default,json:{write:!0}})],c.prototype,"origin",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"firstPyramidLevel",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"maximumPyramidLevel",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],c.prototype,"pyramidResolutions",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"pyramidScalingFactor",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"pyramidBlockWidth",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],c.prototype,"pyramidBlockHeight",void 0),(0,i._)([(0,a.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"isVirtualTileInfo",void 0),(0,i._)([(0,a.MZ)({json:{write:!0}})],c.prototype,"tileInfo",void 0),(0,i._)([(0,a.MZ)()],c.prototype,"transposeInfo",void 0),(0,i._)([(0,a.MZ)()],c.prototype,"blockBoundary",void 0),c=n=(0,i._)([(0,l.$)("esri.layers.support.RasterStorageInfo")],c);const p=c},42568:function(e,t,r){r.d(t,{z:function(){return n}});class n{constructor(e=null,t=null,r=null){this.minValue=e,this.maxValue=t,this.noDataValue=r}}},36143:function(e,t,r){r.d(t,{A:function(){return m}});var n=r(53804),i=r(75743),o=r(30905),s=r(23502),a=(r(58941),r(40633),r(13798),r(47332)),l=r(65953),u=r(81392),c=r(52038),p=r(92427),d=r(21168);function h(e,t){return p.A.fromJSON({value:e,unit:t})}let f=class extends((0,i.O)(o.oY)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?c.A.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?h(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?h(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,n._)([(0,s.MZ)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],f.prototype,"cumulative",void 0),(0,n._)([(0,s.MZ)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],f.prototype,"endField",void 0),(0,n._)([(0,s.MZ)({type:c.A,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"fullTimeExtent",void 0),(0,n._)([(0,a.w)("fullTimeExtent",["timeExtent"])],f.prototype,"readFullTimeExtent",null),(0,n._)([(0,u.K)("fullTimeExtent")],f.prototype,"writeFullTimeExtent",null),(0,n._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],f.prototype,"hasLiveData",void 0),(0,n._)([(0,s.MZ)({type:p.A,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"interval",void 0),(0,n._)([(0,a.w)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],f.prototype,"readInterval",null),(0,n._)([(0,u.K)("interval")],f.prototype,"writeInterval",null),(0,n._)([(0,s.MZ)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],f.prototype,"startField",void 0),(0,n._)([(0,s.MZ)((0,d.P6)("timeReference",!0))],f.prototype,"timeZone",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],f.prototype,"trackIdField",void 0),(0,n._)([(0,s.MZ)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],f.prototype,"useTime",void 0),(0,n._)([(0,s.MZ)({type:[Date],json:{read:!1}})],f.prototype,"stops",void 0),f=(0,n._)([(0,l.$)("esri.layers.support.TimeInfo")],f);const m=f},7010:function(e,t,r){r.d(t,{C1:function(){return A},Fm:function(){return v},Ih:function(){return b},M6:function(){return p},OZ:function(){return h},PY:function(){return c},Qo:function(){return y},Yj:function(){return m},fV:function(){return f},hG:function(){return I},hn:function(){return S},id:function(){return M},kF:function(){return d},ke:function(){return w},zQ:function(){return x}});var n=r(64786),i=r(91484),o=r(57165),s=r(60534),a=r(6422),l=r(92777),u=r(59798);const c={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:n.K}}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},d={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:n.K}}},h={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.w}}},f={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:n.K}}},m={value:null,type:a.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:n.K}}};function y(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const g={write:{enabled:!0,layerContainerTypes:n.K},read:!0},w={type:Number,json:{origins:{"web-document":g,"portal-item":{write:!0}}}},b={...w,json:{...w.json,origins:{"web-document":{...g,write:{enabled:!0,layerContainerTypes:n.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,u.D)(t.layerDefinition.drawingInfo.transparency):void 0:(0,u.D)(t.drawingInfo.transparency)}}},v={type:i.default,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=i.default.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=o.A.fromJSON(t.spatialReference)),r}}}},read:!1}},M={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:n.K}}},name:"layerDefinition.minScale",write:!0}},I={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:n.K}}},name:"layerDefinition.maxScale",write:!0}},A={json:{write:{ignoreOrigin:!0,layerContainerTypes:n.K},origins:{"web-map":{read:!1,write:!1}}}},x={type:l.A,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}}},55925:function(e,t,r){r.d(t,{C:function(){return s},m:function(){return o}});var n=r(39819),i=r(60539);async function o(e,t,r){let o;try{o=await createImageBitmap(e)}catch(e){throw new n.A("request:server",`Unable to load ${t}`,{url:t,error:e})}return(0,i.Te)(r),o}async function s(e,t,r,o,s){let a;try{a=await createImageBitmap(e)}catch(e){throw new n.A("request:server",`Unable to load tile ${t}/${r}/${o}`,{error:e,level:t,row:r,col:o})}return(0,i.Te)(s),a}},11958:function(e,t,r){function n(e,t){let r=0,n="",i=0,o=0;const s=e.length;for(;r<s;)o=e[r++],i=o>>4,i<8?i=1:15===i?(i=4,o=(7&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):14===i?(i=3,o=(15&o)<<12|(63&e[r++])<<6|63&e[r++]):(i=2,o=(31&o)<<6|63&e[r++]),(0!==o||t)&&(n+=String.fromCharCode(o));return n}r.d(t,{w:function(){return n}})},30158:function(e,t,r){r.d(t,{DY:function(){return y},NG:function(){return v},QW:function(){return s},Rp:function(){return h},ct:function(){return f},fy:function(){return m},sx:function(){return d},xx:function(){return a},z2:function(){return g}});var n=r(50659),i=r(7860);function o(e,t,r){const n=t.shift();if(0===r.length){const e=[];r.push({sliceId:-1,multidimensionalDefinition:e})}const i=r.length;for(let t=0;t<i;t++){const t=r.shift().multidimensionalDefinition;n.values?.forEach((i=>{r.push({sliceId:-1,multidimensionalDefinition:[...t,{variableName:e,dimensionName:n.name,values:[i]}]})}))}t.length&&o(e,t,r)}function s(e,t){const r=[];let n=0;return(t?e.variables.filter((e=>e.name.toLowerCase()===t.toLowerCase())):[...e.variables].sort(((e,t)=>e.name>t.name?1:-1))).forEach((e=>{const t=[],i=[...e.dimensions].sort(((e,t)=>e.name>t.name?-1:1));o(e.name,i,t),t.forEach((e=>{r.push({...e,sliceId:n++})}))})),r}function a(e,t,r){let n=e;if(t&&(t=[...t].sort(((e,t)=>e.dimensionName<t.dimensionName?-1:1))).forEach((({dimensionName:e,values:t,isSlice:r})=>{t.length&&(n=n.filter((n=>{const i=n.multidimensionalDefinition.find((t=>t.dimensionName===e));if(null==i)return!1;const o=i.values[0];return"number"==typeof o?"number"==typeof t[0]?t.includes(o):t.some((e=>e[0]<=o&&e[1]>=o)):"number"==typeof t[0]?t.some((e=>o[0]<=e&&o[1]>=e)):r?t.some((e=>e[0]===o[0]&&e[0]===o[1])):t.some((e=>e[0]>=o[0]&&e[0]<=o[1]||e[1]>=o[0]&&e[1]<=o[1]||e[0]<o[0]&&e[1]>o[1]))})))})),n.length&&null!=r?.start&&null!=r.end){const e=r.start.getTime(),t=r.end.getTime(),i=n[0].multidimensionalDefinition.findIndex((e=>"StdTime"===e.dimensionName));i>-1&&(n=n.filter((r=>{const n=r.multidimensionalDefinition[i].values[0];return e<=n&&t>=n})))}return n.map((e=>e.sliceId))}function l(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function u(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function c(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function p(e,t,r){if(!t?.subsetDefinitions?.length)return e;let n;if(r){const{variables:i}=t;if(i.length&&!i.includes(r))return null;const o=t.subsetDefinitions.find((t=>t.dimensionName===e.name&&t.variableName===r));if(!o?.values?.length)return e;n=c(o.values)}else{const r=t.dimensions.find((({name:t})=>t===e.name));n=r?.extent}const i=n;if(!i?.length)return e;const o=e.values.filter((e=>l(e,i)));return{...e,extent:[...i],values:o}}function d(e,t,r){if(!t?.subsetDefinitions?.length)return!1;const{variables:n}=t;if(n.length&&e.some((({variableName:e})=>e&&!n.includes(e))))return!0;for(let n=0;n<e.length;n++){const i=e[n],o=t.subsetDefinitions.find((e=>(""===i.variableName||e.variableName===i.variableName)&&e.dimensionName===i.dimensionName));if(o?.values.length){const e=c(o.values);if(i.isSlice||2!==i.values.length||Array.isArray(i.values[0])||i.values[0]===i.values[1]||!r){if(i.values.some((t=>!l(t,e))))return!0}else if(!u(i.values,e))return!0}}return!1}function h(e,t){if(null==e)return{isOutside:!1};const{geometry:r,timeExtent:n,multidimensionalDefinition:o}=t;let s=null;if(null!=n&&(s=function(e,t){const r=e.dimensions.find((({name:e})=>"StdTime"===e));if(null==r||null==t.start&&null==t.end)return t;t=t.clone();const{start:n,end:o}=t.toJSON(),s=n===o?[n]:null!=n&&null!=o?[n,o]:[n??o];return 2===s.length&&r?.extent.length&&(s[0]=Math.max(s[0],r.extent[0]),s[1]=Math.min(s[1],r.extent[1]??r.extent[0]),s[1]<s[0])||d([new i.A({variableName:"",dimensionName:"StdTime",isSlice:1===s.length,values:s})],e,!0)?null:(t.start=new Date(s[0]),t.end=new Date(s[1]??s[0]),t)}(e,n),null==s))return{isOutside:!0};const{areaOfInterest:a}=e;if(a&&r){const e="point"===r.type?r:"extent"===r.type?r.center:"polygon"===r.type?r.centroid:null;if(e&&!a.contains(e))return{isOutside:!0}}return null!=o&&o.length&&d(o,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:r,timeExtent:s,multidimensionalDefinition:o}}}function f(e,t={}){const{multidimensionalInfo:r,keyProperties:n}=e;if(null==r)return null;const{variableName:i,multidimensionalSubset:o,multidimensionalDefinition:s}=t,a=null!=s?s[0]?.variableName:null,l=i||a||n?.DefaultVariable;let{variables:u}=r;return o?.variables?.length&&(u=u.filter((({name:e})=>o.variables.includes(e)))),l?u.find((({name:e})=>e===l))??u[0]:u[0]}function m(e,t={}){const r=f(e,t);if(!r)return null;const n=[],{dimensions:o,name:s}=r;if(0===o.length)return[new i.A({variableName:s,dimensionName:"",values:[],isSlice:!0})];for(let e=0;e<o.length;e++){const r=p(o[e],t.multidimensionalSubset,s);if(!r)return null;const{values:a,extent:l}=r;let u=a?.[0]??l?.[0];"stdz"===r.name.toLowerCase()&&!r.hasRanges&&l&&Math.abs(l[1])<=Math.abs(l[0])&&(u=a?.length?a[a.length-1]:l[1]),n.push(new i.A({variableName:s,dimensionName:r.name,values:[u],isSlice:!t.useRangeForRangedDimensionInfo||!!r.hasRanges}))}return n}function y(e){return!!e?.length&&e.some((e=>{if(null==e.values)return!0;const t=e.values.length;return 0===t||t>1||!e.isSlice&&Array.isArray(e.values[0])}))}function g(e,t){if(null==t||null==e)return null;let r=t.variables.map((e=>({...e})));return e?.variables?.length&&(r=r.filter((({name:t})=>e.variables.includes(t))),r.forEach((t=>{t.dimensions=t.dimensions.map((r=>p(r,e,t.name))).filter(n.Ru)}))),r}function w(e,t){const{values:r}=t;if(r?.length){const t=Array.isArray(r[0]),n=Array.isArray(e);return t!==n?-1:t&&n?r.findIndex((t=>t[0]===e[0]&&t[1]===e[1])):r.indexOf(e)}const{extent:n}=t;if(Array.isArray(e)||!n||e<n[0]||e>n[1])return-1;const i=t.interval||1;if("ISO8601"!==t.unit)return Math.round((e-n[0])/i);const o=n[0];let s=-1;switch(t.intervalUnit?.toLowerCase()||"days"){case"seconds":s=Math.round((e-o)/1e3/i);break;case"minutes":s=Math.round((e-o)/6e4/i);break;case"hours":s=Math.round((e-o)/36e5/i);break;case"days":s=Math.round((e-o)/864e5/i);break;case"months":{const t=new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear(),r=new Date(o).getUTCMonth(),n=new Date(e).getUTCMonth();s=0===t?n-r:n+11-r+12*(t-1)}break;case"years":s=Math.round((new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear())/i);break;case"decades":s=Math.round((new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear())/10/i)}return s}function b(e){let t=e.values?.length;if(t)return t;const{extent:r,unit:n}=e,i=e.interval||1,o=r?r[1]-r[0]:0;if("ISO8601"!==n)return Math.round(o/i);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(o/1e3/i);break;case"minutes":t=Math.round(o/6e4/i);break;case"hours":t=Math.round(o/36e5/i);break;case"days":t=Math.round(o/864e5/i);break;case"months":if(r){const e=new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear(),n=new Date(r[0]).getUTCMonth(),i=new Date(r[1]).getUTCMonth();t=0===e?i-n+1:i+11-n+12*(e-1)+1}else t=0;break;case"years":t=r?Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/i):0;break;case"decades":t=r?Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/10/i):0;break;default:t=0}return t}function v(e,t){let r=0;const n=e[0].variableName,i=[...t.variables].sort(((e,t)=>e.name>t.name?1:-1));for(let t=0;t<i.length;t++){const o=i[t],s=[...o.dimensions].sort(((e,t)=>e.name>t.name?-1:1));if(o.name!==n){r+=s.map((e=>b(e))).reduce(((e,t)=>e*t));continue}const a=s.map((e=>b(e))),l=s.length;for(let t=0;t<l;t++){const n=e.find((e=>e.dimensionName===s[t].name));if(null==n)return null;const i=w(n.values[0],s[t]);if(-1===i)return null;a.shift(),r+=t===l-1?i:i*a.reduce(((e,t)=>e*t))}break}return r}},32405:function(e,t,r){r.d(t,{SZ:function(){return i},e8:function(){return s},hm:function(){return o}});var n=r(73037);const i=(0,n.O)()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),o=(0,n.O)()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),s=(0,n.O)()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"})},80426:function(e,t,r){r.d(t,{D4:function(){return c},Hh:function(){return s}});var n=r(53216);const i=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let o=null;function s(){return o||(o=r.e(7535).then(r.bind(r,65915)).then((e=>e.l)).then((({default:e})=>e({locateFile:e=>(0,n.s)(`esri/layers/support/rasterFormats/${e}`)}))).then((e=>{!function(e){const{_malloc:t,_free:r,_lerc_getBlobInfo:n,_lerc_getDataRanges:o,_lerc_decode_4D:s,asm:u}=e;let c;const p=Object.values(u).find((t=>t&&"buffer"in t&&t.buffer===e.HEAPU8.buffer)),d=e=>{const r=e.map((e=>function(e){return 16+(e>>3<<3)}(e))),n=r.reduce(((e,t)=>e+t)),i=t(n);c=new Uint8Array(p.buffer);let o=r[0];r[0]=i;for(let e=1;e<r.length;e++){const t=r[e];r[e]=r[e-1]+o,o=t}return r};a.getBlobInfo=e=>{const t=new Uint8Array(48),i=new Uint8Array(24),[s,a,u]=d([e.length,t.length,i.length]);c.set(e,s),c.set(t,a),c.set(i,u);let h=n(s,e.length,a,u,12,3);if(h)throw r(s),new Error(`lerc-getBlobInfo: error code is ${h}`);c=new Uint8Array(p.buffer),l(c,a,t),l(c,u,i);const f=new Uint32Array(t.buffer),m=new Float64Array(i.buffer),[y,g,,w,b,v,M,S,I,A,x]=f,_={version:y,depthCount:A,width:w,height:b,validPixelCount:M,bandCount:v,blobSize:S,maskCount:I,dataType:g,minValue:m[0],maxValue:m[1],maxZerror:m[2],statistics:[],bandCountWithNoData:x};if(x&&A>1)return r(s),_;if(1===A&&1===v)return r(s),_.statistics.push({minValue:m[0],maxValue:m[1]}),_;const C=A*v*8,T=new Uint8Array(C),R=new Uint8Array(C);let k=s,D=0,N=0,P=!1;if(c.byteLength<s+2*C?(r(s),P=!0,[k,D,N]=d([e.length,C,C]),c.set(e,k)):[D,N]=d([C,C]),c.set(T,D),c.set(R,N),h=o(k,e.length,A,v,D,N),h)throw r(k),P||r(D),new Error(`lerc-getDataRanges: error code is ${h}`);c=new Uint8Array(p.buffer),l(c,D,T),l(c,N,R);const E=new Float64Array(T.buffer),L=new Float64Array(R.buffer),F=_.statistics;for(let e=0;e<v;e++)if(A>1){const t=E.slice(e*A,(e+1)*A),r=L.slice(e*A,(e+1)*A),n=Math.min.apply(null,t),i=Math.max.apply(null,r);F.push({minValue:n,maxValue:i,depthStats:{minValues:t,maxValues:r}})}else F.push({minValue:E[e],maxValue:L[e]});return r(k),P||r(D),_},a.decode=(e,t)=>{const{maskCount:n,depthCount:o,bandCount:a,width:u,height:h,dataType:f,bandCountWithNoData:m}=t,y=i[f],g=u*h,w=new Uint8Array(g*a),b=g*o*a*y.size,v=new Uint8Array(b),M=new Uint8Array(a),S=new Uint8Array(8*a),[I,A,x,_,C]=d([e.length,w.length,v.length,M.length,S.length]);c.set(e,I),c.set(w,A),c.set(v,x),c.set(M,_),c.set(S,C);const T=s(I,e.length,n,A,o,u,h,a,f,x,_,C);if(T)throw r(I),new Error(`lerc-decode: error code is ${T}`);c=new Uint8Array(p.buffer),l(c,x,v),l(c,A,w);let R=null;if(m){l(c,_,M),l(c,C,S),R=[];const e=new Float64Array(S.buffer);for(let t=0;t<M.length;t++)R.push(M[t]?e[t]:null)}return r(I),{data:v,maskData:w,noDataValues:R}}}(e)})),o)}const a={getBlobInfo:null,decode:null};function l(e,t,r){r.set(e.slice(t,t+r.length))}function u(e,t,r,n,i){if(r<2)return e;const o=new n(t*r);for(let n=0,i=0;n<t;n++)for(let s=0,a=n;s<r;s++,a+=t)o[a]=e[i++];return o}function c(e,t={}){const r=t.inputOffset??0,n=e instanceof Uint8Array?e.subarray(r):new Uint8Array(e,r),o=a.getBlobInfo(n),{data:s,maskData:l,noDataValues:c}=a.decode(n,o),{width:p,height:d,bandCount:h,depthCount:f,dataType:m,maskCount:y,statistics:g}=o,w=i[m],b=new w.ctor(s.buffer),v=[],M=[],S=p*d,I=S*f;for(let e=0;e<h;e++){const r=b.subarray(e*I,(e+1)*I);if(t.returnInterleaved)v.push(r);else{const e=u(r,S,f,w.ctor);v.push(e)}M.push(l.subarray(e*I,(e+1)*I))}const A=0===y?null:1===y?M[0]:new Uint8Array(S);if(y>1){A.set(M[0]);for(let e=1;e<M.length;e++){const t=M[e];for(let e=0;e<S;e++)A[e]=A[e]&t[e]}}const{noDataValue:x}=t,_=null!=x&&w.range[0]<=x&&w.range[1]>=x;if(y>0&&_)for(let e=0;e<h;e++){const t=v[e],r=M[e]||A;for(let e=0;e<S;e++)0===r[e]&&(t[e]=x)}const C=y===h&&h>1?M:null,{pixelType:T}=w;return{width:p,height:d,bandCount:h,pixelType:T,depthCount:f,statistics:g,pixels:v,mask:A,bandMasks:C,noDataValues:c}}},94235:function(e,t,r){function n(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function i(e,t){for(let r=0;r<t.length;r++)e.push(t[r])}r.d(t,{D:function(){return s}});const o=new Set;function s(e,t,r,s=!0){const a=function(e,t,r,n=!0){if(t%4!=0||r%4!=0){const i=new ArrayBuffer(4*Math.ceil(r/4)),o=new Uint8Array(i),s=new Uint8Array(e,t,r);if(n)for(let e=0;e<o.length;e+=4)o[e]=s[e+3],o[e+1]=s[e+2],o[e+2]=s[e+1],o[e+3]=s[e];else o.set(s);return new Uint32Array(o.buffer)}if(n){const n=new Uint8Array(e,t,r),i=new Uint8Array(n.length);for(let e=0;e<i.length;e+=4)i[e]=n[e+3],i[e+1]=n[e+2],i[e+2]=n[e+1],i[e+3]=n[e];return new Uint32Array(i.buffer)}return new Uint32Array(e,t,r/4)}(e,t,r,s);let l=9,u=n(),c=32,p=u.length,d=[],h=1,f=a[0],m=0;const y=a.length,g=8*(4*y-r),w=[];for(;null!=f;){if(c>=l)c-=l,m=f>>>32-l,f<<=l;else{m=f>>>32-c,f=a[h++];const e=l-c;c=32-e,m=(m<<e)+(f>>>c),f<<=e}if(257===m)break;if(256===m){l=9,u=n(),p=u.length,d=[];continue}const e=u[m];if(null==e){if(m>u.length)throw new Error("data integrity issue: code does not exist on code page");d.push(d[0]),u[p++]=d.slice(),i(w,d)}else i(w,e),d.push(e[0]),d.length>1&&(u[p++]=d.slice()),d=e.slice();if(o.has(p)&&l++,0===c&&(f=a[h++],c=32),h>y||h===y&&c<=g)break}return new Uint8Array(w)}o.add(511),o.add(1023),o.add(2047),o.add(4095),o.add(8191)},43008:function(e,t,r){r.d(t,{D:function(){return N},g:function(){return D}});var n=r(39819),i=r(95929),o=r(21327),s=r(42568),a=r(60539),l=r(82499);class u{constructor(e){this._canvas=null,this._ctx=null,e&&(this._canvas=e.canvas,this._ctx=e.ctx||e.canvas&&e.canvas.getContext("2d"))}decode(e,t,r){if(!e||e.byteLength<10)throw new n.A("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:i=0,height:o=0,format:s}=t;const{applyJpegMask:l}=t;if(l&&(!i||!o))throw new n.A("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise(((n,c)=>{let p=null;"jpg"===s&&l&&(p=u._getMask(e,{width:i,height:o}));const d=new Blob([new Uint8Array(e)],{type:"image/"+s=="jpg"?"jpeg":s}),h=URL.createObjectURL(d),f=new Image;let m;f.src=h,f.onload=()=>{if(URL.revokeObjectURL(h),(0,a.G4)(r))return void c((0,a.NK)());i=f.width,o=f.height,this._canvas&&this._ctx?(this._canvas.width===i&&this._canvas.height===o||(this._canvas.width=i,this._canvas.height=o),this._ctx.clearRect(0,0,i,o)):(this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=o,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(f,0,0);const e=this._ctx.getImageData(0,0,i,o);let s;if(m=e.data,t.renderOnCanvas){if(p)for(s=0;s<p.length;s++)p[s]?m[4*s+3]=255:m[4*s+3]=0;return this._ctx.putImageData(e,0,0),void n(null)}const l=i*o,u=new Uint8Array(l),d=new Uint8Array(l),y=new Uint8Array(l);if(p)for(s=0;s<l;s++)u[s]=m[4*s],d[s]=m[4*s+1],y[s]=m[4*s+2];else for(p=new Uint8Array(l),s=0;s<l;s++)u[s]=m[4*s],d[s]=m[4*s+1],y[s]=m[4*s+2],p[s]=m[4*s+3];n({width:i,height:o,pixels:[u,d,y],mask:p,pixelType:"u8"})},f.onerror=()=>{URL.revokeObjectURL(h),c("cannot load image")}}))}static _getMask(e,t){let r=null;try{const n=new Uint8Array(e),i=Math.ceil(n.length/2);let o=0;const s=n.length-2;for(o=i;o<s&&(255!==n[o]||217!==n[o+1]);o++);if(o+=2,o<n.length-1){const e=new l.Z(n.subarray(o)).getBytes();r=new Uint8Array(t.width*t.height);let i=0;for(let t=0;t<e.length;t++)for(let n=7;n>=0;n--)r[i++]=e[t]>>n&1}}catch(e){}return r}}var c=r(90735);class p{static decode(e,t=!1){const r=new Uint8Array(e),n=new c.J;n.parse(r);const{width:i,height:o,numComponents:s,eof:a}=n,u=n.getData(i,o,!0),p=i*o;let d,h=null,f=0,m=0,y=0;if(!t&&a<r.length-1)try{const e=new l.Z(r.subarray(a)).getBytes();h=new Uint8Array(p);let t=0;for(f=0;f<e.length;f++)for(y=7;y>=0;y--)h[t++]=e[f]>>y&1}catch{}if(1===s&&u.length===i*o){const e=new Uint8Array(u.buffer);d=[e,e,e]}else{for(d=[],f=0;f<3;f++)d.push(new Uint8Array(p));for(y=0,m=0;m<p;m++)for(f=0;f<3;f++)d[f][m]=u[y++]}return{width:i,height:o,pixels:d,mask:h}}}var d=r(80426),h=r(94235),f=r(95738);const m=(e,t)=>{const r=t.width*t.height,n=t.pixelType;return Math.floor(e.byteLength/(r*y(n)))},y=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t};class g{static decode(e,t){const r=t.pixelType,n=[],i=t.width*t.height,o=m(e,t),{bandIds:s,format:a}=t,l=s?.length||m(e,t),u=e.byteLength-e.byteLength%(i*y(r)),c=new r(e,0,i*o);let p,d,h,f,g=null;if("bip"===a)for(p=0;p<l;p++){for(h=new r(i),f=s?s[p]:p,d=0;d<i;d++)h[d]=c[d*o+f];n.push(h)}else if("bsq"===a)for(p=0;p<l;p++)f=s?s[p]:p,n.push(c.subarray(f*i,(f+1)*i));return u<e.byteLength-1&&(g=((e,t)=>{if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),n=new Uint8Array(t);let i=0,o=0,s=0,a=0;for(s=0;s<r.length-1;s++)for(o=r[s],a=7;a>=0;a--)n[i++]=o>>a&1;for(a=7;i<t-1;)o=r[r.length-1],n[i++]=o>>a&1,a--;return n})(e.slice(u),i)),{pixels:n,mask:g}}}var w=r(3685),b=r(70041),v=function(e){var t,r,n;function i(e){var t,r,n,i,o,s,a,l,u,c,p,d,h;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(t=this.readUInt32(),l=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join(""),l){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},i=this.readUInt16(),n=this.readUInt16()||100,o.delay=1e3*i/n,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===l&&(this.pos+=4,t-=4),e=(null!=o?o.data:void 0)||this.imgData,p=0;0<=t?p<t:p>t;0<=t?++p:--p)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(t),(u=255-this.transparency.indexed.length)>0)for(d=0;0<=u?d<u:d>u;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(c=this.read(t)).indexOf(0),a=String.fromCharCode.apply(String,c.slice(0,s)),this.text[a]=String.fromCharCode.apply(String,c.slice(s+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(h=this.colorType)||6===h,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return i.load=function(e,t,r){var n;return"function"==typeof t&&(r=t),(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){var e;return e=new i(new Uint8Array(n.response||n.mozResponseArrayBuffer)),"function"==typeof(null!=t?t.getContext:void 0)&&e.render(t),"function"==typeof r?r(e):void 0},n.send(null)},i.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(e){var t,r,n,i,o,s,a,u,c,p,d,h,f,m,y,g,w,b,v,M,S,I,A;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);for(e=(e=new l.Z(e)).getBytes(),g=(h=this.pixelBitlength/8)*this.width,f=new Uint8Array(g*this.height),s=e.length,y=0,m=0,r=0;m<s;){switch(e[m++]){case 0:for(i=v=0;v<g;i=v+=1)f[r++]=e[m++];break;case 1:for(i=M=0;M<g;i=M+=1)t=e[m++],o=i<h?0:f[r-h],f[r++]=(t+o)%256;break;case 2:for(i=S=0;S<g;i=S+=1)t=e[m++],n=(i-i%h)/h,w=y&&f[(y-1)*g+n*h+i%h],f[r++]=(w+t)%256;break;case 3:for(i=I=0;I<g;i=I+=1)t=e[m++],n=(i-i%h)/h,o=i<h?0:f[r-h],w=y&&f[(y-1)*g+n*h+i%h],f[r++]=(t+Math.floor((o+w)/2))%256;break;case 4:for(i=A=0;A<g;i=A+=1)t=e[m++],n=(i-i%h)/h,o=i<h?0:f[r-h],0===y?w=b=0:(w=f[(y-1)*g+n*h+i%h],b=n&&f[(y-1)*g+(n-1)*h+i%h]),a=o+w-b,u=Math.abs(a-o),p=Math.abs(a-w),d=Math.abs(a-b),c=u<=p&&u<=d?o:p<=d?w:b,f[r++]=(t+c)%256;break;default:throw new Error("Invalid filter algorithm: "+e[m-1])}y++}return f},i.prototype.decodePalette=function(){var e,t,r,n,i,o,s,a,l;for(r=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+r.length),n=0,r.length,e=0,t=s=0,a=r.length;s<a;t=s+=3)i[n++]=r[t],i[n++]=r[t+1],i[n++]=r[t+2],i[n++]=null!=(l=o[e++])?l:255;return i},i.prototype.copyToImageData=function(e,t){var r,n,i,o,s,a,l,u,c,p,d;if(n=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),n=4,r=!0),u=(i=e.data||e).length,s=c||t,o=a=0,1===n)for(;o<u;)l=c?4*t[o/4]:a,p=s[l++],i[o++]=p,i[o++]=p,i[o++]=p,i[o++]=r?s[l++]:this.transparency.grayscale&&this.transparency.grayscale===p?0:255,a=l;else for(;o<u;)l=c?4*t[o/4]:a,i[o++]=s[l++],i[o++]=s[l++],i[o++]=s[l++],i[o++]=r?s[l++]:this.transparency.rgb&&this.transparency.rgb[1]===s[l-3]&&this.transparency.rgb[3]===s[l-2]&&this.transparency.rgb[5]===s[l-1]?0:255,a=l},i.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e},r=e.document&&e.document.createElement("canvas"),n=r&&r.getContext("2d"),t=function(e){var t;return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t},i.prototype.decodeFrames=function(e){var r,n,i,o,s,a,l,u;if(this.animation){for(u=[],n=s=0,a=(l=this.animation.frames).length;s<a;n=++s)r=l[n],i=e.createImageData(r.width,r.height),o=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(i,o),r.imageData=i,u.push(r.image=t(i));return u}},i.prototype.renderFrame=function(e,t){var r,n,i;return r=(n=this.animation.frames)[t],i=n[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?e.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&e.putImageData(i.imageData,i.xOffset,i.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},i.prototype.animate=function(e){var t,r,n,i,o,s,a=this;return r=0,s=this.animation,i=s.numFrames,n=s.frames,o=s.numPlays,(t=function(){var s,l;if(s=r++%i,l=n[s],a.renderFrame(e,s),i>1&&r/i<o)return a.animation._timeout=setTimeout(t,l.delay)})()},i.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},i.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},i}(self);const M=new Set(["jpg","png","bmp","gif"]);async function S(e,t){if(!b.Z)throw new n.A("rasterCoded:decode","lerc decoder is not supported on big endian platform");await(0,d.Hh)();const{offset:r}=t,{width:i,height:a,pixelType:l,statistics:u,depthCount:c,noDataValues:p,bandMasks:h,pixels:f,mask:m}=(0,d.D4)(e,{inputOffset:r,returnInterleaved:t.returnInterleaved}),y=new o.A({width:i,height:a,pixelType:l.toLowerCase(),pixels:f,mask:m,statistics:u.map((({minValue:e,maxValue:t})=>new s.z(e,t))),bandMasks:h,depthCount:c,noDataValues:p});return u?.length||y.updateStatistics(),y}async function I(e,t){const r=await(0,w.D4)(e,{...t,noDataValue:null});(0,i.Lw)(r);const n=new o.A({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,bandMasks:r.bandMasks,statistics:null});return n.updateStatistics(),n}function A(e,t){const r=t.pixelType||"u8",n=o.A.getPixelArrayConstructor(r),i="u8"===r?e:new n(e.buffer),s=[],a=t.planes||1;if(1===a)s.push(i);else for(let r=0;r<a;r++){const o=(t.width||1)*(t.height||e.length),l=new n(o);for(let e=0;e<o;e++)l[e]=i[e*a+r];s.push(l)}const l=new o.A({width:t.width||1,height:t.height||e.length,pixels:s,pixelType:r,statistics:null});return l.updateStatistics(),l}function x(e,t){return A(new l.Z(new Uint8Array(e)).getBytes(),t)}function _(e,t){return A((0,h.D)(e,t.offset,t.eof,!t.isInputBigEndian),t)}function C(e,t,r){const{pixelTypeCtor:n}=function(e){let t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||2**32-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}(t.pixelType),i=(0,g.decode)(e,{width:t.width,height:t.height,pixelType:n,format:r}),s=new o.A({width:t.width,height:t.height,pixels:i.pixels,pixelType:t.pixelType,mask:i.mask,statistics:null});return s.updateStatistics(),s}function T(e,t){const r=p.decode(e,t.hasNoZlibMask??void 0),n=new o.A({width:r.width,height:r.height,pixels:r.pixels,pixelType:"u8",mask:r.mask,statistics:null});return n.updateStatistics(),n}function R(e,t){const r=new Uint8Array(e),n=new v(r),{width:i,height:s}=t,a=i*s,l=n.decode();let u,c=0,p=0;const d=new Uint8Array(a);for(c=0;c<a;c++)d[c]=l[4*c+3];const h=new o.A({width:i,height:s,pixels:[],pixelType:"u8",mask:d,statistics:[]});for(c=0;c<3;c++){for(u=new Uint8Array(a),p=0;p<a;p++)u[p]=l[4*p+c];h.addData({pixels:u})}return h.updateStatistics(),h}function k(e){if(null==e)throw new n.A("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let r="";return 255===t[0]&&216===t[1]?r="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?r="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===t[7]&&101===t[8]&&32===t[9]?r="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?r="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&43===t[3]?r="tiff":71===t[0]&&73===t[1]&&70===t[2]?r="gif":66===t[0]&&77===t[1]?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(r="error"),r}function D(e){let t=k(e);return"lerc2"===t?t="lerc":"error"===t&&(t=""),t}async function N(e,t={},r){if(null==e)throw new n.A("rasterCodec:decode","missing encodeddata parameter.");let i=t.format?.toLowerCase();if(!("bsq"!==i&&"bip"!==i||null!=t.width&&null!=t.height))throw new n.A("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===i&&t.customOptions)return async function(e,t){const r=await(0,w.s$)(e,t.customOptions),n=new o.A({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return n.updateStatistics(),n}(e,t);if((!i||"bsq"!==i&&"bip"!==i&&"deflate"!==i&&"lzw"!==i)&&(i=k(e)),t.useCanvas&&M.has(i))return async function(e,t,r,n){const i=new u,s={applyJpegMask:!1,format:t,...r},a=await i.decode(e,s,n),l=new o.A(a);return l.updateStatistics(),l}(e,i,t,r);const s=function(e){let t=null;switch(e){case"lerc":case"lerc2":t=S;break;case"jpg":t=T;break;case"png":t=R;break;case"bsq":case"bip":t=(t,r)=>C(t,r,e);break;case"tiff":t=I;break;case"deflate":t=x;break;case"lzw":t=_;break;case"error":t=()=>{throw new n.A("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new n.A("rasterCodec:decode","unsupported raster format")}}return t}(i);let a;t.isPoint&&(null!=(t={...t}).width&&t.width++,null!=t.height&&t.height++);const{offsets:l}=t;if(l&&l.length>1){const r=l.map(((r,n)=>s(e.slice(r,l[n+1]),t))),n=await Promise.all(r);a=n[0],a.pixels=n.map((e=>e.pixels[0]));const i=n.map((e=>e.mask));n.some((e=>null!=e))&&(i.forEach(((e,t)=>{null==e&&(i[t]=new Uint8Array(a.width*a.height).fill(255))})),a.bandMasks=i,a.mask=o.A.combineBandMasks(i)),a.updateStatistics()}else a=await s(e,{...t,offset:l?.[0]??t.offset});return"jpg"!==i&&null!=t.noDataValue&&1===a.depthCount&&(0,f.Sp)(a,t.noDataValue,{customFloatTolerance:t.tolerance}),t.isPoint&&function(e,t=1){if(!e)return;const{pixels:r,width:n,height:i,mask:s}=e;if(!r||0===r.length)return;const a=r.length,l=n-1,u=i-1,c=[];let p,d,h,f,m,y,g=null;const w=o.A.getPixelArrayConstructor(e.pixelType);if(0===t){for(p=0;p<a;p++){for(m=r[p],y=new w(l*u),d=0;d<u;d++)for(f=d*n,h=0;h<l;h++)y[d*l+h]=m[f+h];c.push(y)}if(null!=s)for(g=new Uint8Array(l*u),d=0;d<u;d++)for(f=d*n,h=0;h<l;h++)g[d*l+h]=s[f+h]}else{for(p=0;p<a;p++){for(m=r[p],y=new w(l*u),d=0;d<u;d++)for(f=d*n,h=0;h<l;h++)y[d*l+h]=(m[f+h]+m[f+h+1]+m[f+n+h]+m[f+n+h+1])/4;c.push(y)}if(s)for(g=new Uint8Array(l*u),d=0;d<u;d++)for(f=d*n,h=0;h<l;h++)g[d*l+h]=Math.min.apply(null,[s[f+h],s[f+h+1],s[f+n+h],s[f+n+h+1]])}e.width=l,e.height=u,e.mask=g,e.pixels=c}(a),a}},3685:function(e,t,r){r.d(t,{Cr:function(){return k},D4:function(){return U},JM:function(){return V},XO:function(){return N},r9:function(){return E},s$:function(){return z},uT:function(){return O},uc:function(){return D},zS:function(){return P}}),r(58941);var n=r(11958),i=r(90735),o=r(80426),s=r(94235),a=r(95738),l=r(57328),u=r(70041),c=r(82499);const p=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],d=4294967296,h=new Set([1,5,6,7,8,34712,34887]);function f(e,t){let r="unknown";return 3===e?r=64===t?"f64":"f32":1===e?1===t?r="u1":2===t?r="u2":4===t?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):2===e&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function m(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function y(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function g(e,t){return e.get(t)?.values}function w(e,t){return e.get(t)?.values}function b(e,t){return e.get(t)?.values?.[0]}function v(e,t){return e.get(t)?.values?.[0]}function M(e,t,r,n=0,i=l.A.tiffTags,o=4){const s=8===o,a=s?L(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),u=4+2*o,c=s?8:2,p=c+a*u;if(r+p>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:p};const d=r+p+4<=e.byteLength?j(new DataView(e,r+p,8===o?8:4),0,t,8===o):null,h=r+c,f=new Map;let m,y,g,w,b,v=0,M=0;for(let r=0;r<a;r++){y=new DataView(e,h+u*r,u),g=y.getUint16(0,t),b=y.getUint16(2,t),w=l.A.getTagName(g,i);const s=[];2===o?(v=y.getUint16(4,t),M=y.getUint16(6,t)):4===o?(v=y.getUint32(4,t),M=y.getUint32(8,t)):8===o&&(v=j(y,4,t,!0),M=j(y,12,t,!0),s.push(y.getUint32(12,t)),s.push(y.getUint32(16,t))),m={id:g,type:b,valueCount:v,valueOffset:M,valueOffsets:s,values:null},k(e,t,m,n,!1,o),f.set(w,m)}return{success:!0,ifd:f,nextIFD:d,requiredBufferSize:p}}const S=(e,t)=>(0,o.D4)(e,{inputOffset:t}).pixels[0];function I(e,t){if(1!==t&&2!==t&&4!==t)return e;const r=new Uint8Array(e),n=8/t,i=new Uint8Array(e.byteLength*n);let o=0;const s=2**t-1;for(let e=0;e<r.length;e++){const a=r[e];for(let e=0;e<n;e++)i[o++]=a<<t*e>>>8-t&s}return i.buffer}function A(e,t,r){const n=new i.J;n.parse(e),n.colorTransform=6===r?-1:0;const o=n.getData(n.width,n.height,1!==t&&4!==t);return new Uint8Array(o.buffer)}function x(e){const t=new c.Z(e).getBytes(),r=new ArrayBuffer(t.length),n=new Uint8Array(r);return n.set(t),n}async function _(e,t,r,n,i){const a=u.Z===t,l=v(r,"BITSPERSAMPLE"),c=v(r,"SAMPLESPERPIXEL")??1,p=v(r,"PHOTOMETRICINTERPRETATION"),d=v(r,"SAMPLEFORMAT")??1,h=f(d,l),y=v(r,"COMPRESSION")??1,g=m(h);let w,b,M;if(34887===y)return await(0,o.Hh)(),S(e,n);if(1===y)w=e.slice(n,n+i),b=new Uint8Array(w);else if(8===y||32946===y)b=new Uint8Array(e,n,i),b=x(b),w=b.buffer;else if(6===y)b=new Uint8Array(e,n,i),b=A(b,c,p),w=b.buffer;else if(7===y){const t=r.get("JPEGTABLES").values,o=t.length-2;b=new Uint8Array(o+i-2);for(let e=0;e<o;e++)b[e]=t[e];const s=new Uint8Array(e,n+2,i-2);for(let e=0;e<s.length;e++)b[o+e]=s[e];b=A(b,c,p),w=b.buffer}else{if(5!==y)throw new Error("tiff-decode: unsupport compression "+y);b=(0,s.D)(e,n,i,t),w=b.buffer}if(w=I(w,l),"u8"===h||"s8"===h||a)M=new g(w);else{w=new ArrayBuffer(b.length);const e=new Uint8Array(w);switch(h){case"u16":case"s16":for(let t=0;t<b.length;t+=2)e[t]=b[t+1],e[t+1]=b[t];break;case"u32":case"s32":case"f32":for(let t=0;t<b.length;t+=4)e[t]=b[t+3],e[t+1]=b[t+2],e[t+2]=b[t+1],e[t+3]=b[t]}M=new g(w)}const _=v(r,"PREDICTOR")??1,C=v(r,"TILEWIDTH"),T=v(r,"TILELENGTH");if(_>1&&(5===y||8===y||32946===y)&&C&&T){const e=N(r),t=new g(M.length);t.set(M),M=function(e,t,r,n,i){const o=n?4:1,s=r*o*i;n&&(e=new Uint8Array(e.buffer));for(let r=0;r<t;r++){const t=r*s;for(let r=i;r<s;r++)e[t+r]+=e[t+r-i]}if(!n)return e;const a=new Uint8Array(e.length),l=r*i;for(let r=0;r<t;r++){const t=r*s;for(let r=0;r<l;r++)for(let n=0;n<o;n++)a[t+r*o+n]=e[t+r+(o-n-1)*l]}return new Float32Array(a.buffer)}(t,T,C,3===d&&3===_,e?1:c)}return M}const C=(e,t,r)=>{const n=u.Z===t.littleEndian,i=w(r,"STRIPOFFSETS");if(void 0===i)return null;const{width:o,height:a,pixelType:l}=D([r]),c=v(r,"SAMPLESPERPIXEL")||t.planes,p=v(r,"PHOTOMETRICINTERPRETATION"),d=o*a,h=v(r,"BITSPERSAMPLE"),f=m(l),y=new f(d*c),g=w(r,"STRIPBYTECOUNTS"),b=v(r,"ROWSPERSTRIP"),M=v(r,"COMPRESSION")??1;let S,_,C,T,R,k,N,P,E;if(h%8==0)for(S=0;S<i.length;S++){if(R=S*(b*o)*c,"u8"===l||"s8"===l||n)8===M||32946===M?(N=new Uint8Array(e,i[S],g[S]),N=x(N),k=N.buffer):6===M?(N=new Uint8Array(e,i[S],g[S]),N=A(N,c,p),k=N.buffer):5===M?(N=(0,s.D)(e,i[S],g[S],t.littleEndian),k=N.buffer):k=e.slice(i[S],i[S]+g[S]),k=I(k,h),T=new f(k);else{switch(6===M||8===M||32946===M?(N=new Uint8Array(e,i[S],g[S]),P=x(N),k=P.buffer):(k=new ArrayBuffer(g[S]),N=new Uint8Array(e,i[S],g[S]),P=new Uint8Array(k)),l){case"u16":case"s16":for(C=0;C<N.length;C+=2)P[C]=N[C+1],P[C+1]=N[C];break;case"u32":case"s32":case"f32":for(C=0;C<N.length;C+=4)P[C]=N[C+3],P[C+1]=N[C+2],P[C+2]=N[C+1],P[C+3]=N[C]}k=I(k,h),T=new f(k)}y.set(T,R)}const L=[];if(1===c)L.push(y);else for(S=0;S<c;S++){for(E=new f(d),_=0;_<d;_++)E[_]=y[_*c+S];L.push(E)}return{width:o,height:a,pixelType:l,pixels:L}},T=(e,t,r)=>{if(!(e&&e.length>0&&t&&r))return null;let n,i,o;const s=e[0].length,a=e.length,l=new Uint8Array(s);for(let u=0;u<a;u++)if(n=e[u],i=t[u],o=r[u],0===u)for(let e=0;e<s;e++)l[e]=n[e]<i||n[e]>o?0:1;else for(let e=0;e<s;e++)l[e]&&(l[e]=n[e]<i||n[e]>o?0:1);return l},R=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||0===t.length)return null;const r=new Map;let n,i,o,s,a;for(let e=0;e<t.length;e++)n=t[e],i=n.slice(6,n.indexOf(">")),s=n.indexOf("sample="),s>-1&&(a=n.slice(s+8,n.indexOf('"',s+8))),s=n.indexOf("name="),s>-1&&(i=n.slice(s+6,n.indexOf('"',s+6))),i&&(o=n.slice(n.indexOf(">")+1,n.indexOf("</Item>")).trim(),null!=a?r.has(i)?r.get(i)[a]=o:r.set(i,[o]):r.set(i,o)),a=null;const l=r.get("STATISTICS_MINIMUM"),u=r.get("STATISTICS_MAXIMUM"),c=r.get("STATISTICS_MEAN"),p=r.get("STATISTICS_STDDEV");let d=null;if(l&&u){d=[];for(let e=0;e<l.length;e++)d.push({min:parseFloat(l[e]),max:parseFloat(u[e]),avg:c&&parseFloat(c[e]),stddev:p&&parseFloat(p[e])})}const h=r.get("BandName"),f=r.get("WavelengthMin"),m=r.get("WavelengthMax");let y=null;if(h){y=[];for(let e=0;e<h.length;e++)y.push({BandName:h[e],WavelengthMin:f&&parseFloat(f[e]),WavelengthMax:m&&parseFloat(m[e])})}return{statistics:d,bandProperties:y,dataType:r.get("DataType"),rawMetadata:r}};function k(e,t,r,n=0,i=!1,o=4){if(r.values)return!0;const s=r.type,a=r.valueCount;let l=r.valueOffset,u=[];const c=p[s],h=8*c,f=a*c,m=a*p[s]*8;let y,g;const w=8===o?64:32,b=r.valueOffsets;if(m>w&&f>(i?e.byteLength:e?e.byteLength-l+n:0))return r.offlineOffsetSize=[l,f],r.values=null,!1;if(m<=w){if(!t)if(w<=32)l>>>=32-m;else{const e=b?.length?b[0]:l>>>0,t=b?.length?b[1]:Math.round((l-e)/d);m<=32?(l=e>>>32-m,b[0]=l):(l=e*2**(32-m)+(t>>>32-m),b[0]=e,b[1]=t>>>32-m)}if(1===a&&h===w)u=[l];else if(64===w){const e=b?.length?b[0]:l>>>0,t=b?.length?b[1]:Math.round((l-e)/d);let r=e,n=32;for(g=1;g<=a;g++){const e=32-h*g%32;if(n<h){const i=r<<e>>>32-n,o=t<<32-n>>>32-n;r=t,u.push(i+o*2**(h-n)),n-=32-(h-n)}else u.push(r<<e>>>32-h),n-=h;0===n&&(n=32,r=t)}}else for(g=1;g<=a;g++){const e=32-h*g;u.push(l<<e>>>32-h)}}else{l-=n,i&&(l=0);for(let r=l;r<l+f;r+=c){switch(s){case 1:case 2:case 7:y=new DataView(e,r,1).getUint8(0);break;case 3:y=new DataView(e,r,2).getUint16(0,t);break;case 4:case 13:y=new DataView(e,r,4).getUint32(0,t);break;case 5:y=new DataView(e,r,4).getUint32(0,t)/new DataView(e,r+4,4).getUint32(0,t);break;case 6:y=new DataView(e,r,1).getInt8(0);break;case 8:y=new DataView(e,r,2).getInt16(0,t);break;case 9:y=new DataView(e,r,4).getInt32(0,t);break;case 10:y=new DataView(e,r,4).getInt32(0,t)/new DataView(e,r+4,4).getInt32(0,t);break;case 11:y=new DataView(e,r,4).getFloat32(0,t);break;case 12:y=new DataView(e,r,8).getFloat64(0,t);break;case 16:case 18:y=L(new DataView(e,r,8),0,t);break;case 17:y=F(new DataView(e,r,8),0,t);break;default:y=null}u.push(y)}}if(2===s){let e="";const t=u;for(u=[],g=0;g<t.length;g++)0===t[g]&&""!==e?(u.push(e),e=""):e+=String.fromCharCode(t[g]);""===e&&0!==u.length||u.push(e)}return r.values=u,!0}function D(e){const t=e[0],r=v(t,"TILEWIDTH"),n=v(t,"TILELENGTH"),i=v(t,"IMAGEWIDTH"),o=v(t,"IMAGELENGTH"),s=v(t,"BITSPERSAMPLE"),a=v(t,"SAMPLESPERPIXEL"),l=v(t,"SAMPLEFORMAT")??1,u=f(l,s),c=N(t),p=g(t,"GDAL_NODATA");let d=null;p?.length&&(d=p.map((e=>parseFloat(e))),d.some((e=>isNaN(e)))&&(d=null));const m=v(t,"COMPRESSION")??1;let M;switch(m){case 1:M="NONE";break;case 2:case 3:case 4:case 32771:M="CCITT";break;case 5:M="LZW";break;case 6:case 7:M="JPEG";break;case 32773:M="PACKBITS";break;case 8:case 32946:M="DEFLATE";break;case 34712:M="JPEG2000";break;case 34887:M="LERC";break;default:M=String(m)}let S=!0,I="";h.has(m)||(S=!1,I+="unsupported tag compression "+m),l>3&&(S=!1,I+="unsupported tag sampleFormat "+l),1!==s&&2!==s&&4!==s&&s%8!=0&&(S=!1,I+="unsupported tag bitsPerSample "+s);const A=b(t,"GEOASCIIPARAMS");let x;if(A){const e=A.split("|").find((e=>e.includes("ESRI PE String = "))),t=e?e.replace("ESRI PE String = ",""):"";x=t.startsWith("COMPD_CS")||t.startsWith("PROJCS")||t.startsWith("GEOGCS")?{wkid:null,wkt:t}:null}const _=w(t,"GEOTIEPOINTS"),C=w(t,"GEOPIXELSCALE"),T=w(t,"GEOTRANSMATRIX"),k=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let D,L,F=!1,j=!1;if(k){F=2===v(k,"GTRasterTypeGeoKey");const e=v(k,"GTModelTypeGeoKey");if(2===e){const e=v(k,"GeographicTypeGeoKey");e>=1024&&e<=32766&&(x={wkid:e}),x||32767!==e||(j=!0,x={wkid:4326})}else if(1===e){const e=v(k,"ProjectedCSTypeGeoKey");e>=1024&&e<=32766&&(x={wkid:e})}}if(C&&_&&_.length>=6?(D=[C[0],0,_[3]-_[0]*C[0],0,-Math.abs(C[1]),_[4]-_[1]*C[1]],F&&(D[2]-=.5*D[0]+.5*D[1],D[5]-=.5*D[3]+.5*D[4])):T&&16===T.length&&(D=F?[T[0],T[1],T[3]-.5*T[0],T[4],T[5],T[7]-.5*T[5]]:[T[0],T[1],T[3],T[4],T[5],T[7]]),D){const e=[{x:0,y:o},{x:0,y:0},{x:i,y:o},{x:i,y:0}];let t,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let i=0;i<e.length;i++)t=y(e[i],D),r=t.x>r?r:t.x,s=t.x<s?s:t.x,n=t.y>n?n:t.y,a=t.y<a?a:t.y;L={xmin:r,xmax:s,ymin:n,ymax:a,spatialReference:x}}else L={xmin:-.5,ymin:.5-o,xmax:i-.5,ymax:.5,spatialReference:x};j&&(L.xmax-L.xmin>400||Math.max(Math.abs(L.xmin),Math.abs(L.xmax))>361)&&(x=null,L.spatialReference=null);const O=P(e);let V,z,U,B,G;if(O.length>0){U=Math.round(Math.log(i/v(O[0],"IMAGEWIDTH"))/Math.LN2);const e=O[O.length-1];B=O.length,V=v(e,"TILEWIDTH"),z=v(e,"TILELENGTH")}V=null!=B&&B>0?V||r:null,z=null!=B&&B>0?z||n:null,r&&(G=[{maxCol:Math.ceil(i/r)-1,maxRow:Math.ceil(o/n)-1,minRow:0,minCol:0}],O.forEach((e=>{G.push({maxCol:Math.ceil(v(e,"IMAGEWIDTH")/v(e,"TILEWIDTH"))-1,maxRow:Math.ceil(v(e,"IMAGELENGTH")/v(e,"TILELENGTH"))-1,minRow:0,minCol:0})})));const H=b(e[0],"GDAL_METADATA"),J=R(H);I+=" "+Z({width:i,height:o,tileWidth:r,tileHeight:n,planes:a,ifds:e});const q=E(e).length===O.length+1,W=O?.length?O.map((e=>({x:i/v(e,"IMAGEWIDTH"),y:o/v(e,"IMAGELENGTH")}))):void 0;return{width:i,height:o,tileWidth:r,tileHeight:n,planes:a,isBSQ:c,pixelType:u,compression:M,noData:d,hasMaskBand:q,isSupported:S,pyramidResolutions:W,message:I,extent:L,isPseudoGeographic:j,affine:C?null:D,firstPyramidLevel:U,maximumPyramidLevel:B,pyramidBlockWidth:V,pyramidBlockHeight:z,tileBoundary:G,metadata:J}}function N(e,t){const r=g(e,"PLANARCONFIGURATION");return r?2===r[0]:!!t&&t.isBSQ}function P(e){return e.filter((e=>1===v(e,"NEWSUBFILETYPE")))}function E(e){return e.filter((e=>{const t=!(4&~(v(e,"NEWSUBFILETYPE")??0)),r=4===v(e,"PHOTOMETRICINTERPRETATION");return t&&r}))}function L(e,t,r){const n=e.getUint32(t,r),i=e.getUint32(t+4,r);return r?i*d+n:n*d+i}function F(e,t,r){let n=r?e.getInt32(t,r):e.getUint32(t,r),i=r?e.getUint32(t+4,r):e.getInt32(t+4,r);const o=(r?n:i)>=0?1:-1;return r?n*=o:i*=o,o*(r?i*d+n:n*d+i)}function j(e,t,r,n){return n?L(e,t,r):e.getUint32(t,r)}function O(e){const t=new DataView(e,0,16),r=t.getUint16(0,!1);let n=null;if(18761===r)n=!0;else{if(19789!==r)throw new Error("unexpected endianess byte");n=!1}const i=t.getUint16(2,n);if(42!==i&&43!==i)throw new Error("unexpected tiff identifier");let o=4;const s=43===i;if(s){const e=t.getUint16(o,n);if(o+=2,8!==e)throw new Error("unsupported bigtiff version");if(0!==t.getUint16(o,n))throw new Error("unsupported bigtiff version");o+=2}return{littleEndian:n,isBigTiff:s,firstIFDPos:j(t,o,n,s)}}function V(e,t,r,i=0,o=l.A.tiffTags,s=4){const a=M(e,t,r,i,o,s);let u;const c=a.ifd;if(c){if(l.A.ifdTags.forEach(((r,n)=>{c.has(n)&&(u=c.get(n),u.data=M(e,t,u.valueOffset-i,i,r).ifd)})),c.has("GEOKEYDIRECTORY")){u=c.get("GEOKEYDIRECTORY");const r=u.values;if(r&&r.length>4){const n=r[0]+"."+r[1]+"."+r[2];u.data=M(e,t,u.valueOffset+6-i,i,l.A.geoKeys,2).ifd,u.data&&u.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[n]})}}if(c.has("XMP")){u=c.get("XMP");const e=u.values;"number"==typeof e[0]&&7===u.type&&(u.values=[(0,n.w)(new Uint8Array(e))])}}return a}function Z(e){const{width:t,height:r,tileHeight:n,tileWidth:i}=e,o=e.planes,s=i?i*n:t*r,a=v(e.ifds[0],"BITSPERSAMPLE");let l="";return s*o>2**30/(a>8?a/8:1)&&(l=i?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}async function z(e,t){const{headerInfo:r,ifd:n,offsets:i,sizes:o}=t,s=[];for(let t=0;t<i.length;t++){o[t];const a=await _(e,r.littleEndian,n,i[t],o[t]||e.byteLength);s.push(a)}const l=N(n,r),u=v(n,"BITSPERSAMPLE"),c=f(v(n,"SAMPLEFORMAT")??1,u),p=v(n,"SAMPLESPERPIXEL")||r.planes,d=m(c),h=v(n,"TILEWIDTH"),y=v(n,"TILELENGTH"),g=v(n,"COMPRESSION")??1,w=h*y;let b;const M=[];let S=s[0];const I=34887===g;for(let e=0;e<p;e++){if(b=new d(w),s.length===p)S=s[e],S.length===w&&(b=S);else if(S.length)if(l||I)b=S.length===w?S:S.slice(w*e,w*(e+1));else for(let t=0;t<w;t++)b[t]=S[t*p+e];M.push(b)}const A=r.noData?r.noData[0]:t.noDataValue,x=r.metadata?r.metadata.statistics:null,C=x?x.map((e=>e.min)):null,R=x?x.map((e=>e.max)):null,k={pixelType:c,width:h,height:y,pixels:M,noDataValue:A};return null!=A?(0,a.Sp)(k,A):C&&R&&t.applyMinMaxConstraint&&(k.mask=T(M,C,R)),k}async function U(e,t={}){const r=t.pyramidLevel||0,n=t.headerInfo||function(e){const{littleEndian:t,isBigTiff:r,firstIFDPos:n}=O(e);let i=n;const o=[];do{const n=V(e,t,i,0,l.A.tiffTags,r?8:4);if(!n.success)break;o.push(n.ifd),i=n.nextIFD}while(i>0);return{...D(o),littleEndian:t,isBigTiff:r,ifds:o,pyramidIFDs:P(o),maskIFDs:E(o)}}(e),{ifds:i,noData:o}=n;if(0===i.length)throw new Error("no valid image file directory");const s=Z(n);if(s)throw s;let u=null;const c=-1===r?i[i.length-1]:i[r],p=o??t.noDataValue;return u=n.tileWidth?await async function(e,t,r){const n=w(r,"TILEOFFSETS");if(void 0===n)return null;const i=w(r,"TILEBYTECOUNTS"),{width:o,height:s,pixelType:a,tileWidth:l,tileHeight:u}=D([r]),c=N(r,t),p=v(r,"SAMPLESPERPIXEL")||t.planes,d=o*s,h=v(r,"BITSPERSAMPLE"),f=34887===(v(r,"COMPRESSION")??1),y=m(a),g=[];for(let e=0;e<p;e++)g.push(new y(d));let b,M,S,I,A,x,C,T,R,k,P,E,L;const F=Math.ceil(o/l),j=new Uint8Array(d).fill(255);let O=!1;if(h%8==0)if(f&&c&&p>1){const a=Math.round(n.length/p);for(b=0;b<a;b++){x=Math.floor(b/F)*u,C=b%F*l,T=x*o+C;for(let a=0;a<p;a++){const c=b*p+a;for(0===i[c]?(S=null,O=!0):S=await _(e,t.littleEndian,r,n[c],i[c]),k=0,R=T,E=Math.min(l,o-C),P=Math.min(u,s-x),L=g[a],I=0;I<P;I++)for(R=T+I*o,k=I*l,A=0;A<E;A++,R++,k++)S?L[R]=S[k]:j[R]=0}}}else for(b=0;b<n.length;b++)for(x=Math.floor(b/F)*u,C=b%F*l,T=x*o+C,0===i[b]?(S=null,O=!0):S=await _(e,t.littleEndian,r,n[b],i[b]),k=0,R=T,E=Math.min(l,o-C),P=Math.min(u,s-x),M=0;M<p;M++)if(L=g[M],c||f)for(I=0;I<P;I++)for(R=T+I*o,k=l*u*M+I*l,A=0;A<E;A++,R++,k++)S?L[R]=S[k]:j[R]=0;else for(I=0;I<P;I++)for(R=T+I*o,k=I*l*p+M,A=0;A<E;A++,R++,k+=p)S?L[R]=S[k]:j[R]=0;return{width:o,height:s,pixelType:a,pixels:g,mask:O?j:void 0}}(e,n,c):C(e,n,c),u?(null!=p&&(0,a.Sp)(u,p),u):u}},57328:function(e,t,r){r.d(t,{A:function(){return a}});const n=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),i=(()=>{const e=n.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),o=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),s=new Map;s.set("EXIFIFD",i),s.set("GPSIFD",["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"]);const a={tiffTags:n,ifdTags:s,geoKeys:o,getTagName:(e,t)=>{let r=(t||n)[e];return void 0===r&&(r="unknown"+String(e)),r}}},95738:function(e,t,r){r.d(t,{$p:function(){return c},Sp:function(){return p},X1:function(){return a},hP:function(){return s},yM:function(){return u},zw:function(){return l}});const n=9999999e31,i=2e-7,o={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function s(e){return o[e]??[-34028234663852886e22,34028234663852886e22]}function a(e,t){return null==e||null==t?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function l(e){return(e?.startsWith("s")||e?.startsWith("u"))??!1}function u(e,t,r,n){let[i,o]=s(r);const a=l(r);return a&&(i-=1e-5,o+=1e-5),a?r.startsWith("u")?function(e,t,r,n){const[i,o]=n;for(let n=0;n<t.length;n++)if(t[n]){const s=e[n];s<i||s>o?t[n]=0:r[n]=s+.5|0}}(e,t,n,[i,o]):function(e,t,r,n){const[i,o]=n;for(let n=0;n<t.length;n++)if(t[n]){const s=e[n];s<i||s>o?t[n]=0:r[n]=s+(s>0?.5:-.5)|0}}(e,t,n,[i,o]):function(e,t,r,n){const[i,o]=n;for(let n=0;n<t.length;n++)if(t[n]){const s=e[n];s<i||s>o?t[n]=0:r[n]=s}}(e,t,n,[i,o])}function c(e,t){for(let r=0;r<t.length;r++)t[r]&&isNaN(e[r])&&(t[r]=0,e[r]=0)}function p(e,t,r){if(e.depthCount&&e.depthCount>1)return;const{pixels:o,statistics:a,pixelType:l}=e,u=o[0].length,c=e.bandMasks??[],p=e.mask??new Uint8Array(u).fill(255),d="f32"===l||"f64"===l,h=s(l);let f=!1;for(let e=0;e<o.length;e++){const s="number"==typeof t?t:t[e];if(null==s)continue;const u=a?.[e]?.minValue??h[0],m=a?.[e]?.maxValue??h[1];if(u>s+Number.EPSILON||m<s-Number.EPSILON)continue;const y=c[e]||p.slice(),g=o[e],w=r?.customFloatTolerance;if(d&&0!==w){let e=w;e||(e=Math.abs(s)>=n?i*Math.abs(s):"f32"===l?2**-23:Number.EPSILON);for(let t=0;t<g.length;t++)y[t]&&Math.abs(g[t]-s)<e&&(g[t]=0,y[t]=0,p[t]=0,f=!0)}else for(let e=0;e<g.length;e++)y[e]&&g[e]===s&&(g[e]=0,y[e]=0,p[e]=0,f=!0);c[e]=y}f&&(e.bandMasks=e.bandMasks||e.pixels.length>1?c:null,e.mask=p),f&&"updateStatistics"in e&&e.updateStatistics()}},70041:function(e,t,r){r.d(t,{Z:function(){return n}});const n=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,1===t[0]})()},43264:function(e,t,r){r.d(t,{$i:function(){return j},AB:function(){return u},Ew:function(){return y},Hx:function(){return m},IB:function(){return n},J$:function(){return E},LY:function(){return I},QF:function(){return F},UK:function(){return f},Wb:function(){return i},Wt:function(){return S},Wy:function(){return c},XU:function(){return M},dK:function(){return v},eH:function(){return h},et:function(){return l},lD:function(){return P},qL:function(){return d},z$:function(){return _},z7:function(){return x},zg:function(){return p}});var n,i,o,s=r(21327),a=r(95738);(o=n||(n={}))[o.matchAny=0]="matchAny",o[o.matchAll=1]="matchAll",function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(i||(i={}));const l=6;function u(e){return null!=e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0}function c(e){if(!e?.length||e.some((e=>!u(e))))return null;if(1===e.length)return e[0]?.clone()??null;const t=e,{width:r,height:n,pixelType:i}=t[0];if(t.some((e=>e.width!==r||e.height!==n)))return null;const o=t.map((({mask:e})=>e)).filter((e=>null!=e));let a=null;o.length&&(a=new Uint8Array(r*n),a.set(o[0]),o.length>1&&b(o.slice(1),a));const l=[];t.forEach((({pixels:e})=>l.push(...e)));const c=t.map((({statistics:e})=>e)).filter((e=>e?.length)),p=[];return c.forEach((e=>p.push(...e))),new s.A({pixelType:i,width:r,height:n,mask:a,pixels:l,statistics:p.length?p:null})}function p(e){if(!e)return;const t=e.colormap;if(!t||0===t.length)return;const r=t.sort(((e,t)=>e[0]-t[0]));let n=0;r[0][0]<0&&(n=r[0][0]);const i=Math.max(256,r[r.length-1][0]-n+1),o=new Uint8Array(4*i),s=[];let a,l=0,u=0;const c=5===r[0].length;if(i>65536)return r.forEach((e=>{s[e[0]-n]=c?e.slice(1):e.slice(1).concat([255])})),{indexed2DColormap:s,offset:n,alphaSpecified:c};if(e.fillUnspecified)for(a=r[u],l=a[0]-n;l<i;l++)o[4*l]=a[1],o[4*l+1]=a[2],o[4*l+2]=a[3],o[4*l+3]=c?a[4]:255,l===a[0]-n&&(a=u===r.length-1?a:r[++u]);else for(l=0;l<r.length;l++)a=r[l],u=4*(a[0]-n),o[u]=a[1],o[u+1]=a[2],o[u+2]=a[3],o[u+3]=c?a[4]:255;return{indexedColormap:o,offset:n,alphaSpecified:c}}function d(e,t){if(!u(e))return e;if(!t||!t.indexedColormap&&!t.indexed2DColormap)return e;const r=e.clone(),n=r.pixels;let i=r.mask;const o=r.width*r.height;if(1!==n.length)return e;const{indexedColormap:s,indexed2DColormap:a,offset:l,alphaSpecified:c}=t;let p=0;const d=n[0],h=new Uint8Array(d.length),f=new Uint8Array(d.length),m=new Uint8Array(d.length);let y,g=0;if(s){const e=s.length-1;if(null!=i)for(p=0;p<o;p++)i[p]&&(g=4*(d[p]-l),g<l||g>e?i[p]=0:(h[p]=s[g],f[p]=s[g+1],m[p]=s[g+2],i[p]=s[g+3]));else{for(i=new Uint8Array(o),p=0;p<o;p++)g=4*(d[p]-l),g<l||g>e?i[p]=0:(h[p]=s[g],f[p]=s[g+1],m[p]=s[g+2],i[p]=s[g+3]);r.mask=i}}else if(a)if(null!=i)for(p=0;p<o;p++)i[p]&&(y=a[d[p]],h[p]=y[0],f[p]=y[1],m[p]=y[2],i[p]=y[3]);else{for(i=new Uint8Array(o),p=0;p<o;p++)y=a[d[p]],h[p]=y[0],f[p]=y[1],m[p]=y[2],i[p]=y[3];r.mask=i}return r.pixels=[h,f,m],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=c,r}function h(e,t){if(!u(e))return null;const{pixels:r,mask:n}=e,i=r.length;let o=t.lut;const{offset:a}=t;o&&1===o[0].length&&(o=r.map((()=>o)));const l=[],c=t.outputPixelType||"u8";for(let e=0;e<i;e++){const t=f(r[e],n,o[e],a||0,c);l.push(t)}const p=new s.A({width:e.width,height:e.height,pixels:l,mask:n,pixelType:c});return p.updateStatistics(),p}function f(e,t,r,n,i){const o=e.length,a=s.A.createEmptyBand(i,o);if(t)for(let i=0;i<o;i++)t[i]&&(a[i]=r[e[i]-n]);else for(let t=0;t<o;t++)a[t]=r[e[t]-n];return a}function m(e,t){if(!u(e))return null;const r=e.clone(),{pixels:n}=r,i=r.width*r.height,o=t.length,s=Math.floor(o/2),a=t[Math.floor(s)],l=n[0];let c,p,d,h,f,m,y=!1;const g=new Uint8Array(i),w=new Uint8Array(i),b=new Uint8Array(i);let v=r.mask;const M=4===t[0].mappedColor.length;for(v||(v=new Uint8Array(i),v.fill(M?255:1),r.mask=v),f=0;f<i;f++)if(v[f]){for(c=l[f],y=!1,m=s,p=a,d=0,h=o-1;h-d>1;){if(c===p.value){y=!0;break}c>p.value?d=m:h=m,m=Math.floor((d+h)/2),p=t[Math.floor(m)]}y||(c===t[d].value?(p=t[d],y=!0):c===t[h].value?(p=t[h],y=!0):c<t[d].value?(y=!1,p=null):c>t[d].value&&(c<t[h].value?(p=t[d],y=!0):h===o-1?(y=!1,p=null):(p=t[h],y=!0))),y?(g[f]=p.mappedColor[0],w[f]=p.mappedColor[1],b[f]=p.mappedColor[2],v[f]=p.mappedColor[3]):g[f]=w[f]=b[f]=v[f]=0}return r.pixels=[g,w,b],r.mask=v,r.pixelType="u8",r.maskIsAlpha=M,r}function y(e,t){if(!u(e))return null;const{width:r,height:n}=e,{inputRanges:i,outputValues:o,outputPixelType:l,noDataRanges:c,allowUnmatched:p,isLastInputRangeInclusive:d}=t,h=e.pixels[0],f=s.A.createEmptyBand(l,h.length),m=e.mask,y=new Uint8Array(r*n);m?y.set(m):y.fill(255);const g=e.pixelType.startsWith("f")?1e-6:0,w=i.map((e=>e-g));w[0]=i[0],w[w.length-1]=i[i.length-1]+(d?1e-6:0);const b=i.length/2,[v,M]=(0,a.hP)(l);for(let e=0;e<n;e++)for(let t=0;t<r;t++){const n=e*r+t;if(y[n]){const e=h[n];let t=!1;for(let r=b-1;r>=0;r--)if(e===w[2*r]||e>w[2*r]&&e<w[2*r+1]){f[n]=o[r],t=!0;break}t||(p?f[n]=e>M?M:e<v?v:e:y[n]=0)}}const S=c?.length;if(S)for(let e=0;e<n;e++)for(let t=0;t<r;t++){const n=e*r+t;if(!m||m[n]){const e=h[n];for(let t=0;t<S;t+=2)if(e>=c[t]&&e<=c[t+1]){f[n]=0,y[n]=0;break}}}return new s.A({width:r,height:n,pixelType:l,pixels:[f],mask:y})}function g(e,t,r,n){const i=null!=r&&r.length>=2?new Set(r):null,o=1===r?.length?r[0]:null,s=!!t?.length;for(let r=0;r<e.length;r++)if(n[r]){const a=e[r];if(s){let e=!1;for(let r=0;r<t.length;r+=2)if(a>=t[r]&&a<=t[r+1]){e=!0;break}e||(n[r]=0)}n[r]&&(a===o||i?.has(a))&&(n[r]=0)}}function w(e,t){const r=e[0].length;for(let n=0;n<r;n++)if(t[n]){let r=!1;for(let t=0;t<e.length;t++)if(e[t][n]){r=!0;break}r||(t[n]=0)}}function b(e,t){const r=e[0].length;for(let n=0;n<r;n++)if(t[n]){let r=!1;for(let t=0;t<e.length;t++)if(0===e[t][n]){r=!0;break}r&&(t[n]=0)}}function v(e,t){if(!u(e))return null;const{width:r,height:n,pixels:i}=e,o=r*n,a=new Uint8Array(o);e.mask?a.set(e.mask):a.fill(255);const l=i.length,{includedRanges:c,noDataValues:p,outputPixelType:d,matchAll:h,lookups:m}=t;if(m){const e=[];for(let t=0;t<l;t++){const r=m[t],n=f(i[t],a,r.lut,r.offset||0,"u8");e.push(n)}1===e.length?a.set(e[0]):h?w(e,a):b(e,a)}else if(h){const e=[];for(let t=0;t<l;t++){const r=new Uint8Array(o);r.set(a),g(i[t],c?.slice(2*t,2*t+2),p?.[t],r),e.push(r)}1===e.length?a.set(e[0]):w(e,a)}else for(let e=0;e<l;e++)g(i[e],c?.slice(2*e,2*e+2),p?.[e],a);return new s.A({width:r,height:n,pixelType:d,pixels:i,mask:a})}function M(e){const{srcPixelType:t,inputRanges:r,outputValues:n,allowUnmatched:i,noDataRanges:o,isLastInputRangeInclusive:l,outputPixelType:u}=e;if("u8"!==t&&"s8"!==t&&"u16"!==t&&"s16"!==t)return null;const c=t.includes("16")?65536:256,p=t.includes("s")?-c/2:0,d=s.A.createEmptyBand(u,c),h=new Uint8Array(c);i&&h.fill(255);const[f,m]=(0,a.hP)(u);if(r?.length&&n?.length){const e=1e-6,t=r.map((t=>t-e));t[0]=r[0],l&&(t[t.length-1]=r[r.length-1]);for(let e=0;e<t.length;e++){const r=n[e]>m?m:n[e]<f?f:n[e],i=Math.ceil(t[2*e]-p),o=Math.floor(t[2*e+1]-p);for(let e=i;e<=o;e++)d[e]=r,h[e]=255}}if(o?.length)for(let e=0;e<o.length;e++){const t=Math.ceil(o[2*e]-p),r=Math.floor(o[2*e+1]-p);for(let e=t;e<=r;e++)h[e]=0}return{lut:d,offset:p,mask:h}}function S(e,t,r){if("u8"!==e&&"s8"!==e&&"u16"!==e&&"s16"!==e)return null;const n=e.includes("16")?65536:256,i=e.includes("s")?-n/2:0,o=new Uint8Array(n);if(t)for(let e=0;e<t.length;e++){const r=Math.ceil(t[2*e]-i),n=Math.floor(t[2*e+1]-i);for(let e=r;e<=n;e++)o[e]=255}else o.fill(255);if(r)for(let e=0;e<r.length;e++)o[r[e]-i]=0;return{lut:o,offset:i}}function I(e,t){if(!e||0===e.length)return null;const r=e.find((e=>e.pixelBlock));if(null==r?.pixelBlock)return null;const n=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,i=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,o=.01*Math.min(n,i),s=e.sort(((e,t)=>Math.abs(e.extent.ymax-t.extent.ymax)>o?t.extent.ymax-e.extent.ymax:Math.abs(e.extent.xmin-t.extent.xmin)>o?e.extent.xmin-t.extent.xmin:0)),a=Math.min.apply(null,s.map((e=>e.extent.xmin))),l=Math.min.apply(null,s.map((e=>e.extent.ymin))),u=Math.max.apply(null,s.map((e=>e.extent.xmax))),c=Math.max.apply(null,s.map((e=>e.extent.ymax))),p={x:Math.round((t.xmin-a)/n),y:Math.round((c-t.ymax)/i)},d={width:Math.round((u-a)/n),height:Math.round((c-l)/i)},h={width:Math.round((t.xmax-t.xmin)/n),height:Math.round((t.ymax-t.ymin)/i)};return Math.round(d.width/r.pixelBlock.width)*Math.round(d.height/r.pixelBlock.height)!==s.length||p.x<0||p.y<0||d.width<h.width||d.height<h.height?null:{extent:t,pixelBlock:x(s.map((e=>e.pixelBlock)),d,{clipOffset:p,clipSize:h})}}function A(e,t,r,n,i,o){const{width:s,height:a}=r.block,{x:l,y:u}=r.offset,{width:c,height:p}=r.mosaic,d=function(e,t,r,n,i,o,s,a){return{xmin:i<=r*e?0:i<r*e+e?i-r*e:e,ymin:o<=n*t?0:o<n*t+t?o-n*t:t,xmax:i+s<=r*e?0:i+s<r*e+e?i+s-r*e:e,ymax:o+a<=n*t?0:o+a<n*t+t?o+a-n*t:t}}(s,a,n,i,l,u,c,p);let h=0,f=0;if(o){const e=o.hasGCSSShiftTransform?360:o.halfWorldWidth??0,t=s*o.resolutionX,r=o.startX+n*t;r<e&&r+t>e?f=o.rightPadding:r>=e&&(h=o.leftMargin-o.rightPadding,f=0)}if(d.xmax-=f,"number"!=typeof t)for(let r=d.ymin;r<d.ymax;r++){const o=(i*a+r-u)*c+(n*s-l)+h,p=r*s;for(let r=d.xmin;r<d.xmax;r++)e[o+r]=t[p+r]}else for(let r=d.ymin;r<d.ymax;r++){const o=(i*a+r-u)*c+(n*s-l)+h;for(let r=d.xmin;r<d.xmax;r++)e[o+r]=t}}function x(e,t,r={}){const{clipOffset:n,clipSize:i,alignmentInfo:o,blockWidths:a}=r;if(a)return function(e,t,r){const n=e.find((e=>null!=e));if(null==n)return null;const i=e.some((e=>null==e||!!e.mask)),{width:o,height:a}=t,l=i?new Uint8Array(o*a):null,{blockWidths:c}=r,p=[],d=n.getPlaneCount(),h=s.A.getPixelArrayConstructor(n.pixelType);if(i)for(let t=0,r=0;t<e.length;r+=c[t],t++){const n=e[t];if(!u(n))continue;const i=n.mask;for(let e=0;e<a;e++)for(let s=0;s<c[t];s++)l[e*o+s+r]=null==i?255:i[e*n.width+s]}const f=e.some((e=>e?.bandMasks&&e.bandMasks.length>1)),m=f?[]:void 0,y=o*a;for(let t=0;t<d;t++){const r=new h(y),n=f?new Uint8Array(y):void 0;for(let i=0,s=0;i<e.length;s+=c[i],i++){const l=e[i];if(!u(l))continue;const p=l.pixels[t];if(null!=p){for(let e=0;e<a;e++)for(let t=0;t<c[i];t++)r[e*o+t+s]=p[e*l.width+t];if(n){const e=l.bandMasks?.[t]??l.mask;for(let t=0;t<a;t++)for(let r=0;r<c[i];r++)n[t*o+r+s]=e?e[t*l.width+r]:255}}}p.push(r),m&&n&&m.push(n)}const g=new s.A({width:o,height:a,mask:l,bandMasks:m,pixels:p,pixelType:n.pixelType});return g.updateStatistics(),g}(e,t,{blockWidths:a});const l=e.find((e=>u(e)));if(null==l)return null;const c=i?i.width:t.width,p=i?i.height:t.height,d=l.width,h=l.height,f=t.width/d,m=t.height/h,y={offset:n||{x:0,y:0},mosaic:i||t,block:{width:d,height:h}},g=l.pixelType,w=s.A.getPixelArrayConstructor(g),b=l.pixels.length,v=[];let M,S;for(let t=0;t<b;t++){S=new w(c*p);for(let r=0;r<m;r++)for(let n=0;n<f;n++){const i=e[r*f+n];u(i)&&(M=i.pixels[t],A(S,M,y,n,r,o))}v.push(S)}const I=e.some((e=>null==e||null!=e.mask&&e.mask.length>0)),x=e.some((e=>e?.bandMasks&&e.bandMasks.length>1)),_=I?new Uint8Array(c*p):void 0,C=x?[]:void 0;if(_){for(let t=0;t<m;t++)for(let r=0;r<f;r++){const n=e[t*f+r],i=null!=n?n.mask:null;A(_,null!=i?i:n?255:0,y,r,t,o)}if(C)for(let t=0;t<b;t++){const r=new Uint8Array(c*p);for(let n=0;n<m;n++)for(let i=0;i<f;i++){const s=e[n*f+i],a=s?.bandMasks?.[t]??s?.mask;A(r,null!=a?a:s?255:0,y,i,n,o)}C.push(r)}}const T=new s.A({width:c,height:p,pixels:v,pixelType:g,bandMasks:C,mask:_});return T.updateStatistics(),T}function _(e,t,r){if(!u(e))return null;const{width:n,height:i}=e,o=t.x,s=t.y,a=r.width+o,l=r.height+s;if(o<0||s<0||a>n||l>i)return e;if(0===o&&0===s&&a===n&&l===i)return e;e.mask||(e.mask=new Uint8Array(n*i));const c=e.mask;for(let e=0;e<i;e++){const t=e*n;for(let r=0;r<n;r++)c[t+r]=e<s||e>=l||r<o||r>=a?0:1}return e.updateStatistics(),e}function C(e){if(!u(e))return null;const t=e.clone(),{width:r,height:n,pixels:i}=e,o=i[0],s=t.pixels[0],a=e.mask;for(let e=2;e<n-1;e++){const t=new Map;for(let n=e-2;n<e+2;n++)for(let e=0;e<4;e++){const i=n*r+e;k(t,o[i],a?a[i]:1)}s[e*r]=T(t),s[e*r+1]=s[e*r+2]=s[e*r];let n=3;for(;n<r-1;n++){let i=(e-2)*r+n+1;k(t,o[i],a?a[i]:1),i=(e-1)*r+n+1,k(t,o[i],a?a[i]:1),i=e*r+n+1,k(t,o[i],a?a[i]:1),i=(e+1)*r+n+1,k(t,o[i],a?a[i]:1),i=(e-2)*r+n-3,R(t,o[i],a?a[i]:1),i=(e-1)*r+n-3,R(t,o[i],a?a[i]:1),i=e*r+n-3,R(t,o[i],a?a[i]:1),i=(e+1)*r+n-3,R(t,o[i],a?a[i]:1),s[e*r+n]=T(t)}s[e*r+n+1]=s[e*r+n]}for(let e=0;e<r;e++)s[e]=s[r+e]=s[2*r+e],s[(n-1)*r+e]=s[(n-2)*r+e];return t.updateStatistics(),t}function T(e){if(0===e.size)return 0;let t=0,r=-1,n=0;const i=e.keys();let o=i.next();for(;!o.done;)n=e.get(o.value),n>t&&(r=o.value,t=n),o=i.next();return r}function R(e,t,r){if(0===r)return;const n=e.get(t);1===n?e.delete(t):e.set(t,n-1)}function k(e,t,r){0!==r&&e.set(t,e.has(t)?e.get(t)+1:1)}function D(e,t,r){let{x:n,y:i}=t;const{width:o,height:a}=r;if(0===n&&0===i&&a===e.height&&o===e.width)return e;const{width:l,height:c}=e,p=Math.max(0,i),d=Math.max(0,n),h=Math.min(n+o,l),f=Math.min(i+a,c);if(h<0||f<0||!u(e))return null;n=Math.max(0,-n),i=Math.max(0,-i);const{pixels:m}=e,y=o*a,g=m.length,w=[];for(let t=0;t<g;t++){const r=m[t],a=s.A.createEmptyBand(e.pixelType,y);for(let e=p;e<f;e++){const t=e*l;let s=(e+i-p)*o+n;for(let e=d;e<h;e++)a[s++]=r[t+e]}w.push(a)}const b=new Uint8Array(y),v=e.mask;for(let e=p;e<f;e++){const t=e*l;let r=(e+i-p)*o+n;for(let e=d;e<h;e++)b[r++]=v?v[t+e]:1}const M=new s.A({width:r.width,height:r.height,pixelType:e.pixelType,pixels:w,mask:b});return M.updateStatistics(),M}function N(e,t=!0){if(!u(e))return null;const{pixels:r,width:n,height:i,mask:o,pixelType:a}=e,l=[],c=Math.round(n/2),p=Math.round(i/2),d=i-1,h=n-1;for(let e=0;e<r.length;e++){const o=r[e],u=s.A.createEmptyBand(a,c*p);let f=0;for(let e=0;e<i;e+=2)for(let r=0;r<n;r+=2){const i=o[e*n+r];if(t){const t=r===h?i:o[e*n+r+1],s=e===d?i:o[e*n+r+n],a=r===h?s:e===d?t:o[e*n+r+n+1];u[f++]=(i+t+s+a)/4}else u[f++]=i}l.push(u)}let f=null;if(null!=o){f=new Uint8Array(c*p);let e=0;for(let r=0;r<i;r+=2)for(let i=0;i<n;i+=2){const s=o[r*n+i];if(t){const t=i===h?s:o[r*n+i+1],a=r===d?s:o[r*n+i+n],l=i===h?a:r===d?t:o[r*n+i+n+1];f[e++]=s*t*a*l?1:0}else f[e++]=s}}return new s.A({width:c,height:p,pixelType:a,pixels:l,mask:f})}function P(e,t,r=0,n=!0){if(!u(e))return null;const{width:i,height:o}=t;let{width:s,height:a}=e;const l=new Map,c={x:0,y:0},p=1+r;let d=e;for(let e=0;e<p;e++){const r=Math.ceil(s/i),u=Math.ceil(a/o);for(let n=0;n<u;n++){c.y=n*o;for(let o=0;o<r;o++){c.x=o*i;const r=D(d,c,t);l.set(`${e}/${n}/${o}`,r)}}e<p-1&&(d=N(d,n)),s=Math.round(s/2),a=Math.round(a/2)}return l}function E(e){const{pixelBlock:t,tileSize:r,level:n,row:i,col:o,useBilinear:s}=e;if(!u(t))return null;const{width:a,height:l}=r,c=2**n,p=c*a,d=c*l;let h=D(t,{y:i*d,x:o*p},{width:p,height:d});if(!h)return null;for(let e=n;e>0;e--)h=N(h,s);return h}function L(e,t,r,n,i=0){const{width:o,height:s}=e,{width:a,height:l}=t,u=n.cols,c=n.rows,p=Math.ceil(a/u-.1/u),d=Math.ceil(l/c-.1/c);let h,f,m,y,g,w,b;const v=p*u,M=v*d*c,S=new Float32Array(M),I=new Float32Array(M),A=new Uint32Array(M),x=new Uint32Array(M);let _,C,T=0;for(let e=0;e<d;e++)for(let t=0;t<p;t++){h=12*(e*p+t),f=r[h],m=r[h+1],y=r[h+2],g=r[h+3],w=r[h+4],b=r[h+5];for(let r=0;r<c;r++){T=(e*c+r)*v+t*u,C=(r+.5)/c;for(let e=0;e<r;e++)_=(e+.5)/u,S[T+e]=(f*_+m*C+y)*o+i,I[T+e]=(g*_+w*C+b)*s+i,A[T+e]=Math.floor(S[T+e]),x[T+e]=Math.floor(I[T+e])}h+=6,f=r[h],m=r[h+1],y=r[h+2],g=r[h+3],w=r[h+4],b=r[h+5];for(let r=0;r<c;r++){T=(e*c+r)*v+t*u,C=(r+.5)/c;for(let e=r;e<u;e++)_=(e+.5)/u,S[T+e]=(f*_+m*C+y)*o+i,I[T+e]=(g*_+w*C+b)*s+i,A[T+e]=Math.floor(S[T+e]),x[T+e]=Math.floor(I[T+e])}}return{offsets_x:S,offsets_y:I,offsets_xi:A,offsets_yi:x,gridWidth:v}}function F(e,t){const{coefficients:r,spacing:n}=t,{offsets_x:i,offsets_y:o,gridWidth:s}=L(e,e,r,{rows:n[0],cols:n[1]}),{width:a,height:l}=e,u=new Float32Array(a*l),c=180/Math.PI;for(let e=0;e<l;e++)for(let t=0;t<a;t++){const r=e*s+t,n=0===e?r:r-s,p=e===l-1?r:r+s,d=i[n]-i[p],h=o[p]-o[n];if(isNaN(d)||isNaN(h))u[e*a+t]=90;else{let r=Math.atan2(h,d)*c;r=(360+r)%360,u[e*a+t]=r}}return u}function j(e,t,r,n,i="nearest"){if(!u(e))return null;"majority"===i&&(e=C(e));const{pixels:o,mask:a,bandMasks:l,pixelType:c}=e,p=e.width,d=e.height,h=s.A.getPixelArrayConstructor(c),f=o.length,{width:m,height:y}=t;let g=!1;for(let e=0;e<r.length;e+=3)-1===r[e]&&-1===r[e+1]&&-1===r[e+2]&&(g=!0);const{offsets_x:w,offsets_y:b,offsets_xi:v,offsets_yi:M,gridWidth:S}=L({width:p,height:d},t,r,n,"majority"===i?.5:0);let I;const A=(e,t,r,n)=>{const i=e instanceof Float32Array||e instanceof Float64Array?0:.5;for(let o=0;o<y;o++){I=o*S;for(let s=0;s<m;s++){if(w[I]<0||b[I]<0)e[o*m+s]=0;else if(n)e[o*m+s]=t[v[I]+M[I]*p];else{const n=Math.floor(w[I]),a=Math.floor(b[I]),l=Math.ceil(w[I]),u=Math.ceil(b[I]),c=w[I]-n,d=b[I]-a;if(!r||r[n+a*p]&&r[l+a*p]&&r[n+u*p]&&r[l+u*p]){const r=(1-c)*t[n+a*p]+c*t[l+a*p],h=(1-c)*t[n+u*p]+c*t[l+u*p];e[o*m+s]=(1-d)*r+d*h+i}else e[o*m+s]=t[v[I]+M[I]*p]}I++}}},x=[];let _;const T=l?.length===f,R=[];for(let e=0;e<f;e++){if(T){const t=new Uint8Array(m*y);A(t,l[e],l[e],!0),R.push(t)}_=new h(m*y),A(_,o[e],T?l[e]:a,"nearest"===i||"majority"===i),x.push(_)}const k=new s.A({width:m,height:y,pixelType:c,pixels:x,bandMasks:T?R:void 0});if(null!=a)k.mask=new Uint8Array(m*y),A(k.mask,a,a,!0);else if(g){k.mask=new Uint8Array(m*y);for(let e=0;e<m*y;e++)k.mask[e]=w[e]<0||b[e]<0?0:1}return k.updateStatistics(),k}},72567:function(e,t,r){r.d(t,{DP:function(){return g},Nh:function(){return w},Pg:function(){return y},RP:function(){return c},WF:function(){return u},_N:function(){return b},eH:function(){return f},f4:function(){return m},fP:function(){return d},zj:function(){return p}});var n=r(95929),i=r(21327),o=r(95738),s=r(41259);const a=1,l=[.299,.587,.114];function u(e,t=256){t=Math.min(t,256);const{size:r,counts:n}=e,i=new Uint8Array(r),o=n.reduce(((e,r)=>e+r/t),0);let s=0,a=0,l=0,u=o;for(let e=0;e<r;e++)if(l+=n[e],!(e<r-1&&l+n[e+1]<u)){for(;s<t-1&&u<l;)s++,u+=o;for(let t=a;t<=e;t++)i[t]=s;a=e+1}for(let e=a;e<r;e++)i[e]=t-1;return i}function c(e){const{minCutOff:t,maxCutOff:r,gamma:n,pixelType:i,rounding:o}=e,s=e.outMin||0,a=e.outMax||255;if(!["u8","u16","s8","s16"].includes(i))return null;const l=t.length;let u,c,d=0;"s8"===i?d=-127:"s16"===i&&(d=-32767);let h=256;["u16","s16"].includes(i)&&(h=65536);const f=[],m=[],y=a-s;for(u=0;u<l;u++)m[u]=r[u]-t[u],f[u]=0===m[u]?0:y/m[u];let g;const b=[];let v,M,S;if(n&&n.length>=l){const e=w(l,n);for(u=0;u<l;u++){for(S=[],c=0;c<h;c++)if(0!==m[u])if(v=c+d,g=(v-t[u])/m[u],M=1,n[u]>1&&(M-=(1/y)**(g*e[u])),v<r[u]&&v>t[u]){const e=M*y*g**(1/n[u])+s;S[c]="floor"===o?Math.floor(e):"round"===o?Math.round(e):e}else v>=r[u]?S[c]=a:S[c]=s;else S[c]=s;b[u]=S}}else for(u=0;u<l;u++){for(S=[],c=0;c<h;c++)if(v=c+d,v<=t[u])S[c]=s;else if(v>=r[u])S[c]=a;else{const e=(v-t[u])*f[u]+s;S[c]="floor"===o?Math.floor(e):"round"===o?Math.round(e):e}b[u]=S}if(null!=e.contrastOffset){const t=p(e.contrastOffset,e.brightnessOffset);for(u=0;u<l;u++)for(S=b[u],c=0;c<h;c++)S[c]=t[S[c]]}return{lut:b,offset:d}}function p(e,t){const r=Math.min(Math.max(e,-100),100),n=Math.min(Math.max(t??0,-100),100);let i=0,o=0;const s=new Uint8Array(256);for(i=0;i<256;i++)r>0&&r<100?o=(200*i-25500+510*n)/(2*(100-r))+128:r<=0&&r>-100?o=(200*i-25500+510*n)*(100+r)/2e4+128:100===r?(o=200*i-25500+256*(100-r)+510*n,o=o>0?255:0):-100===r&&(o=128),s[i]=o>255?255:o<0?0:o;return s}function d(e,t,r){const n=[];for(let i=0;i<t.length;i++){let o=0,s=0,a=0;"min"in t[i]?({min:o,max:s,avg:a}=t[i]):[o,s,a]=t[i];let u=a??0;"u8"!==e&&(u=255*(u-o)/(s-o)),r&&(u*=l[i]),n.push(h(u))}return n}function h(e){if(e<=0||e>=255)return a;let t=0;150!==e&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const r=e+t,n=Math.log(e/255),i=Math.log(r/255);if(0===i)return a;const o=n/i;return isNaN(o)?a:Math.min(9.9,Math.max(.01,o))}function f(e){const{pixels:t,mask:r,pixelType:n,bandMasks:i}=e,o=t.map(((e,t)=>function(e,t,r){let n=1/0,i=-1/0,o=0,s=0,a=0,l=0;const u=e.length,c=new Map,p=[];for(let r=0;r<u;r++){const u=e[r];if(!t||t[r]){p.push(u);const e=(c.get(u)??0)+1;c.set(u,e),e>l&&(l=e,a=u),n=u<n?u:n,i=u>i?u:i,o+=u,s++}}if(0===s)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const d=o/s;let h=0;for(let r=0;r<u;r++)t&&!t[r]||(h+=(e[r]-d)**2);const f=t?t.filter((e=>e)).length:u,m=f<=1?0:Math.sqrt(h/(f-1));p.sort(((e,t)=>e-t));const y=s>>>1,g={min:n,max:i,avg:d,stddev:m,mode:a,median:s%2?p[Math.floor(y)]:(p[y-1]+p[y])/2};if(["u8","s8","u4","u2","u1"].includes(r)){const r=i-n+1,o=new Uint32Array(r);for(let r=0;r<u;r++)t&&!t[r]||o[e[r]-n]++;return{statistics:g,histogram:{min:n-.5,max:i+.5,size:r,counts:o}}}const w=256,b=new Uint32Array(w),v=(i-n)/w;if(0===v)return{statistics:g,histogram:{min:n,max:i,size:1,counts:new Uint32Array(1).fill(s)}};const M=new Uint32Array(257);for(let r=0;r<u;r++)t&&!t[r]||M[Math.floor((e[r]-n)/v)]++;for(let e=0;e<255;e++)b[e]=M[e];return b[255]=M[255]+M[w],{statistics:g,histogram:{min:n,max:i,size:w,counts:b}}}(e,i?.[t]??r,n)));return{statistics:o.map((({statistics:e})=>e)),histograms:o.map((({histogram:e})=>e))}}function m(e){if(!e?.pixels?.length)return null;const{pixels:t,mask:r,bandMasks:n,pixelType:i}=e,o=e.width*e.height,s=t.length,a=[],l=[],u=256;let c,p,d,h;for(let f=0;f<s;f++){d=new Uint32Array(u);const s=t[f],m=n?.[f]??r;if("u8"===i){if(c=255,p=0,m){for(let e=0;e<o;e++)if(m[e]){const t=s[e];c=t<c?t:c,p=t>p?t:p,d[t]++}}else for(let e=0;e<o;e++){const t=s[e];c=t<c?t:c,p=t>p?t:p,d[t]++}d=d.slice(c,p+1)}else{let t=!1;e.statistics||(e.updateStatistics(),t=!0);const r=e.statistics;c=r[f].minValue,p=r[f].maxValue;const n=(p-c)/u;if(0===n){!r||e.validPixelCount||t||e.updateStatistics();const n=(e.validPixelCount||e.width*e.height)/u;for(let e=0;e<u;e++)d[e]=Math.round(n*(e+1))-Math.round(n*e)}else{h=new Uint32Array(257);for(let e=0;e<o;e++)m&&!m[e]||h[Math.floor((s[e]-c)/n)]++;for(let e=0;e<255;e++)d[e]=h[e];d[255]=h[255]+h[u]}}const y="u8"===i?c-.5:c,g="u8"===i?p+.5:p;a.push({min:y,max:g,size:d.length,counts:d});let w=0,b=0,v=0;for(let e=0;e<d.length;e++)w+=d[e],b+=e*d[e];const M=b/w;for(let e=0;e<d.length;e++)v+=d[e]*(e-M)**2;const S=Math.sqrt(v/(w-1)),I=(g-y)/d.length,A=(M+("u8"===i?0:.5))*I+c,x=S*I;l.push({min:c,max:p,avg:A,stddev:x})}return{statistics:l,histograms:a}}function y(e){const t=[];for(let r=0;r<e.length;r++){const{min:n,max:i,size:o,counts:s}=e[r];let a=0,l=0;for(let e=0;e<o;e++)a+=s[e],l+=e*s[e];const u=l/a;let c=0;for(let e=0;e<o;e++)c+=s[e]*(e-u)**2;const p=(i-n)/o,d=(u+.5)*p+n,h=Math.sqrt(c/(a-1))*p;t.push({min:n,max:i,avg:d,stddev:h})}return t}function g(e,t){const{pixelBlock:r,bandIds:i,returnHistogramLut:a,rasterInfo:l}=t;let c=null,p=null,d=e.stretchType;if("number"==typeof d&&(d=s.x[d]),e.dra)if("minMax"===d&&r?.statistics)c=r.statistics.map((e=>[e.minValue,e.maxValue,0,0]));else{const e=m(r);c=null!=e?e.statistics:null,p=null!=e?e.histograms:null}else c=e.statistics?.length?e.statistics:l.statistics,p="histograms"in e?e.histograms:void 0,p||(p=l.histograms);"percentClip"!==d&&"histogramEqualization"!==d||p?.length||(d="minMax");const h=c?.length||p?.length||l.bandCount,f=[],y=[];let g,w,b,v,M,S,I,A,x;c&&!Array.isArray(c[0])&&(c=c.map((e=>[e.min,e.max,e.avg,e.stddev])));const[_,C]=(0,o.hP)(l.pixelType);if(!c?.length){for(c=[],A=0;A<h;A++)c.push([_,C,1,1]);"standardDeviation"===d&&(d="minMax")}switch(d){case"none":for(A=0;A<h;A++)f[A]=_,y[A]=C;break;case"minMax":for(A=0;A<h;A++){const e=c[A];f[A]=e[0],y[A]=e[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:t=2}=e;for(A=0;A<h;A++){const e=c[A];f[A]=e[2]-t*e[3],y[A]=e[2]+t*e[3],f[A]<e[0]&&(f[A]=e[0]),y[A]>e[1]&&(y[A]=e[1])}}break;case"histogramEqualization":for((0,n.Lw)(p),A=0;A<h;A++)f[A]=p[A].min,y[A]=p[A].max;break;case"percentClip":for((0,n.Lw)(p),A=0;A<p.length;A++){for(g=p[A],M=new Uint32Array(g.size),v=[...g.counts],v.length>=20&&(v[0]=v[1]=v[2]=v[v.length-1]=v[v.length-2]=0),b=0,w=(g.max-g.min)/g.size,I=-.5===g.min&&1===w?.5:0,x=0;x<g.size;x++)b+=v[x],M[x]=b;for(S=(e.minPercent||0)*b/100,f[A]=g.min+I,x=0;x<g.size;x++)if(M[x]>S){f[A]=g.min+w*(x+I);break}for(S=(1-(e.maxPercent||0)/100)*b,y[A]=g.max+I,x=g.size-2;x>=0;x--)if(M[x]<S){y[A]=g.min+w*(x+2-I);break}if(y[A]<f[A]){const e=f[A];f[A]=y[A],y[A]=e}}break;default:for(A=0;A<h;A++){const e=c[A];f[A]=e[0],y[A]=e[1]}}let T,R,k;return"histogramEqualization"===d?((0,n.Lw)(p),R=p[0].size||256,T=0,a&&(k=p.map((e=>u(e))))):(R=e.max||255,T=e.min||0),function(e,t){if(null==t||0===t.length)return e;const r=Math.max.apply(null,t),{minCutOff:n,maxCutOff:i,outMin:o,outMax:s,histogramLut:a}=e;return n.length===t.length||n.length<=r?e:{minCutOff:t.map((e=>n[e])),maxCutOff:t.map((e=>i[e])),histogramLut:a?t.map((e=>a[e])):null,outMin:o,outMax:s}}({minCutOff:f,maxCutOff:y,outMax:R,outMin:T,histogramLut:k},i)}function w(e,t){const r=new Float32Array(e);for(let n=0;n<e;n++)t[n]>1?t[n]>2?r[n]=6.5+(t[n]-2)**2.5:r[n]=6.5+100*(2-t[n])**4:r[n]=1;return r}function b(e,t){if(!e?.pixels?.length)return e;const{mask:r,bandMasks:n,width:o,height:s,pixels:a}=e,{minCutOff:l,maxCutOff:u,gamma:c}=t,p=t.outMin||0,d=t.outMax||255,h=o*s,f=t.outputPixelType||"u8",m=e.pixels.map((()=>i.A.createEmptyBand(f,h))),y=m.length,g=d-p,b=[],v=[];for(let e=0;e<y;e++)v[e]=u[e]-l[e],b[e]=0===v[e]?0:g/v[e];const M=f.startsWith("u")||f.startsWith("s"),S=c&&c.length>=y,I=!!t.isRenderer;if(S){const e=w(y,c);for(let t=0;t<y;t++){const i=n?.[t]??r;for(let r=0;r<h;r++)if(null==i||i[r]){if(0===v[t]){m[t][r]=p;continue}const n=a[t][r],i=(n-l[t])/v[t];let o=1;if(c[t]>1&&(o-=(1/g)**(i*e[t])),n<u[t]&&n>l[t]){const e=o*g*i**(1/c[t])+p;m[t][r]=I?Math.floor(e):M?Math.round(e):e}else n>=u[t]?m[t][r]=d:m[t][r]=p}}}else for(let e=0;e<y;e++){const t=n?.[e]??r;for(let r=0;r<h;r++)if(null==t||t[r]){const t=a[e][r];if(t<u[e]&&t>l[e]){const n=(t-l[e])*b[e]+p;m[e][r]=I?Math.floor(n):M?Math.round(n):n}else t>=u[e]?m[e][r]=d:m[e][r]=p}}const A=new i.A({width:o,height:s,mask:r,bandMasks:n,pixels:m,pixelType:f});return A.updateStatistics(),A}},55469:function(e,t,r){r.d(t,{E0:function(){return m},PP:function(){return y},SC:function(){return d},di:function(){return f},fw:function(){return p},ng:function(){return l},rk:function(){return a},yy:function(){return h}});var n=r(21327),i=r(42568),o=r(43264);const s=1,a=1/111e3;function l(e){let{altitude:t,azimuth:r}=e;const{hillshadeType:n,pixelSizePower:i=1,pixelSizeFactor:o=1,scalingType:s,isGCS:l,resolution:u}=e,c="multi-directional"===n?2*e.zFactor:e.zFactor,{x:p,y:d}=u;let h=c/(8*p),f=c/(8*d);if(l&&c>.001&&(h/=a,f/=a),"adjusted"===s)if(l){const e=p*a,t=d*a;h=(c+e**i*o)/(8*e),f=(c+t**i*o)/(8*t)}else h=(c+p**i*o)/(8*p),f=(c+d**i*o)/(8*d);let m=(90-t)*Math.PI/180,y=Math.cos(m),g=(360-r+90)*Math.PI/180,w=Math.sin(m)*Math.cos(g),b=Math.sin(m)*Math.sin(g);const v=[315,270,225,360,180,0],M=[60,60,60,60,60,90],S=new Float32Array([3,5,3,2,1,4]),I=S.reduce(((e,t)=>e+t)),A=S.map((e=>e/I)),x="multi-directional"===n?v.length:1,_=new Float32Array(6),C=new Float32Array(6),T=new Float32Array(6);if("multi-directional"===n)for(let e=0;e<x;e++)t=M[e],r=v[e],m=(90-t)*Math.PI/180,y=Math.cos(m),g=(360-r+90)*Math.PI/180,w=Math.sin(m)*Math.cos(g),b=Math.sin(m)*Math.sin(g),_[e]=y,C[e]=w,T[e]=b;else _.fill(y),C.fill(w),T.fill(b);return{resolution:u,factor:[h,f],sinZcosA:w,sinZsinA:b,cosZ:y,sinZcosAs:C,sinZsinAs:T,cosZs:_,weights:A,hillshadeType:["traditional","multi-directional"].indexOf(n)}}function u(e,t){const{width:r,height:n}=e,i=r*n,o=new Uint8Array(i),a=null!=e.mask;let l;if(a){l=new Uint8Array(e.mask);for(let e=0;e<l.length;e++)l[e]&&(o[e]=1,l[e]=1)}const u=e.pixels[0],c=new Float32Array(i),p=new Float32Array(i);let d,h=0;if(t){const{resolution:e}=t,r=e?(e.x+e.y)/2:1;h=200*t.zFactor/(r*r),d=new Float32Array(i)}const f=t?.curvatureType;let m,y,g,w,b,v,M,S;for(let e=s;e<n-s;e++){const t=e*r;for(let e=s;e<r-s;e++){const n=t+e;if(!l||0!==l[n]){if(l){if(l[n-r-1]+l[n-r]+l[n-r+1]+l[n-1]+l[n+1]+l[n+r-1]+l[n+r]+l[n+r+1]<7){o[n]=0;continue}m=l[n-r-1]?u[n-r-1]:u[n],y=l[n-r]?u[n-r]:u[n],g=l[n-r+1]?u[n-r+1]:u[n],w=l[n-1]?u[n-1]:u[n],b=l[n+1]?u[n+1]:u[n],v=l[n+r-1]?u[n+r-1]:u[n],M=l[n+r]?u[n+r]:u[n],S=l[n+r+1]?u[n+r+1]:u[n]}else m=u[n-r-1],y=u[n-r],g=u[n-r+1],w=u[n-1],b=u[n+1],v=u[n+r-1],M=u[n+r],S=u[n+r+1];if(c[n]=g+b+b+S-(m+w+w+v),p[n]=v+M+M+S-(m+y+y+g),null!=d){const e=u[n],t=.5*(w+b)-e,r=.5*(y+M)-e;if("standard"===f)d[n]=-h*(t+r);else{const e=(-m+g+v-S)/4,i=(-w+b)/2,o=(y-M)/2,s=i*i,a=o*o,l=s+a;l&&(d[n]="profile"===f?h*(t*s+r*a+e*i*o)/l:-h*(t*a+r*s-e*i*o)/l)}}}}}return{outMask:a?o:null,dzxs:c,dzys:p,curvatures:d}}function c(e,t,r){for(let n=0;n<r;n++)e[n*t]=e[n*t+1],e[(n+1)*t-1]=e[(n+1)*t-2];for(let n=1;n<t-1;n++)e[n]=e[n+t],e[n+(r-1)*t]=e[n+(r-2)*t]}function p(e,t){if(!(0,o.AB)(e))return e;const{factor:r,sinZcosA:a,sinZsinA:p,cosZ:d,sinZcosAs:h,sinZsinAs:f,cosZs:m,weights:y}=l(t),[g,w]=r,b="traditional"===t.hillshadeType,{width:v,height:M}=e,S=new Uint8Array(v*M),{dzxs:I,dzys:A,outMask:x}=u(e);for(let e=s;e<M-s;e++){const t=e*v;for(let e=s;e<v-s;e++){const r=t+e;if(!x||x[r]){const e=I[r]*g,t=A[r]*w,n=Math.sqrt(1+e*e+t*t);let i=0;if(b){let r=255*(d+p*t-a*e)/n;r<0&&(r=0),i=r}else{const r=f.length;for(let o=0;o<r;o++){let r=255*(m[o]+f[o]*t-h[o]*e)/n;r<0&&(r=0),i+=r*y[o]}}S[r]=255&i}}}return c(S,v,M),new n.A({width:v,height:M,pixels:[S],mask:x,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[new i.z(0,255)]})}function d(e,t,r,n){if(!(0,o.AB)(e)||!(0,o.AB)(t))return;const{min:i,max:s}=n,a=e.pixels[0],{pixels:l,mask:u}=t,c=l[0],p=255.00001/(s-i),d=new Uint8ClampedArray(c.length),h=new Uint8ClampedArray(c.length),f=new Uint8ClampedArray(c.length),m=r.length-1;for(let e=0;e<c.length;e++){if(u&&0===u[e])continue;const t=Math.floor((c[e]-i)*p),[n,o]=r[t<0?0:t>m?m:t],s=a[e],l=s*o,y=l*(1-Math.abs(n%2-1)),g=s-l;switch(Math.floor(n)){case 0:d[e]=l+g,h[e]=y+g,f[e]=g;break;case 1:d[e]=y+g,h[e]=l+g,f[e]=g;break;case 2:d[e]=g,h[e]=l+g,f[e]=y+g;break;case 3:d[e]=g,h[e]=y+g,f[e]=l+g;break;case 4:d[e]=y+g,h[e]=g,f[e]=l+g;break;case 5:case 6:d[e]=l+g,h[e]=g,f[e]=y+g}}e.pixels=[d,h,f],e.updateStatistics()}function h(e,t){if(!(0,o.AB)(e))return e;const r=t.zFactor,i=t.pixelSizePower??1,l=t.pixelSizeFactor??1,p=t.slopeType,d=t.isGCS,{x:h,y:f}=t.resolution;let m=r/(8*h),y=r/(8*f);d&&Math.abs(r-1)<1e-4&&(m/=a,y/=a),"adjusted"===p&&(m=(r+h**i*l)/(8*h),y=(r+f**i*l)/(8*f));const{dzxs:g,dzys:w,outMask:b}=u(e),{width:v,height:M}=e,S=new Float32Array(v*M);for(let e=s;e<M-s;e++){const t=e*v;for(let e=s;e<v-s;e++){const r=t+e;if(!b||b[r]){const n=g[r]*m,i=w[r]*y,o=Math.sqrt(n*n+i*i);S[t+e]="percent-rise"===p?100*o:57.2957795*Math.atan(o)}}}c(S,v,M);const I=new n.A({width:v,height:M,pixels:[S],mask:b,pixelType:"f32",validPixelCount:e.validPixelCount});return I.updateStatistics(),I}function f(e,t={}){if(!(0,o.AB)(e))return e;const{resolution:r}=t,a=r?1/r.x:1,l=r?1/r.y:1,{dzxs:p,dzys:d,outMask:h}=u(e),{width:f,height:m}=e,y=new Float32Array(f*m);for(let e=s;e<m-s;e++){const t=e*f;for(let e=s;e<f-s;e++){const r=t+e;if(!h||h[r]){const n=p[r]*a,i=d[r]*l;let o=-1;0===n&&0===i||(o=90-57.29578*Math.atan2(i,-n),o<0&&(o+=360),360===o?o=0:o>360&&(o%=360)),y[t+e]=o}}}return c(y,f,m),new n.A({width:f,height:m,pixels:[y],mask:h,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[new i.z(-1,360)]})}function m(e,t){if(!(0,o.AB)(e))return e;const{curvatures:r,outMask:i}=u(e,t),{width:s,height:a}=e;c(r,s,a);const l=new n.A({width:s,height:a,pixels:[r],mask:i,pixelType:"f32",validPixelCount:e.validPixelCount});return l.updateStatistics(),l}function y(e,t,r){const{hillshadeType:n,altitude:i,azimuth:o,zFactor:s,pixelSizeFactor:a,pixelSizePower:l,slopeType:u}=e;return{hillshadeType:n,altitude:i,azimuth:o,zFactor:s,pixelSizePower:l,pixelSizeFactor:a,scalingType:"scaled"===u?"adjusted":"none",resolution:t,isGCS:r}}},53611:function(e,t,r){r.d(t,{$Q:function(){return g},FI:function(){return m},KL:function(){return c},Lu:function(){return d},MD:function(){return u},Rn:function(){return y},Ud:function(){return T},Wu:function(){return k},Y2:function(){return f},gf:function(){return R}});var n=r(73037),i=r(21327),o=r(43264);const s=new Map;s.set("meter-per-second",1),s.set("kilometer-per-hour",.277778),s.set("knots",.514444),s.set("feet-per-second",.3048),s.set("mile-per-hour",.44704);const a=180/Math.PI,l=5,u=new n.J({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function c(e,t){return s.get(e)/s.get(t)||1}function p(e){return(450-e)%360}function d(e,t="geographic"){const[r,n]=e,i=Math.sqrt(r*r+n*n);let o=Math.atan2(n,r)*a;return o=(360+o)%360,"geographic"===t&&(o=p(o)),[i,o]}function h(e,t="geographic"){let r=e[1];"geographic"===t&&(r=p(r)),r%=360;const n=e[0];return[n*Math.cos(r/a),n*Math.sin(r/a)]}function f(e,t,r,n="geographic"){if(!(0,o.AB)(e)||null==r)return e;const i="vector-magdir"===t?e.clone():m(e,t),s=i.pixels[1];for(let e=0;e<s.length;e++)s[e]="geographic"===n?(s[e]+r[e]+270)%360:(s[e]+360-r[e])%360;return"vector-magdir"===t?i:m(i,"vector-magdir")}function m(e,t,r="geographic",n=1){if(!(0,o.AB)(e))return e;const{pixels:s,width:a,height:l}=e,u=a*l,c=s[0],p=s[1],f=e.pixelType.startsWith("f")?e.pixelType:"f32",m=i.A.createEmptyBand(f,u),y=i.A.createEmptyBand(f,u);let g=0;for(let e=0;e<l;e++)for(let e=0;e<a;e++)"vector-uv"===t?([m[g],y[g]]=d([c[g],p[g]],r),m[g]*=n):([m[g],y[g]]=h([c[g],p[g]],r),m[g]*=n,y[g]*=n),g++;const w=new i.A({pixelType:f,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[m,y]});return w.updateStatistics(),w}function y(e,t,r=1){if(1===r||!(0,o.AB)(e))return e;const n=e.clone(),{pixels:i,width:s,height:a}=n,l=i[0],u=i[1];let c=0;for(let e=0;e<a;e++)for(let e=0;e<s;e++)"vector-uv"===t?(l[c]*=r,u[c]*=r):l[c]*=r,c++;return n.updateStatistics(),n}function g(e,t,r,n,i){if(null==i||!i.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/n),height:Math.round(r/n),resolution:e.width/t};const o=i.xmin,s=i.ymax,a=(e.xmax-e.xmin)/t*n,l=(e.ymax-e.ymin)/r*n,u=(a+l)/2;return e.xmin=o+Math.floor((e.xmin-o)/a)*a,e.xmax=o+Math.ceil((e.xmax-o)/a)*a,e.ymin=s+Math.floor((e.ymin-s)/l)*l,e.ymax=s+Math.ceil((e.ymax-s)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:u}}const w=b(0,0,0);function b(e=0,t=0,r=Math.PI,n=!0){n&&(r=(2*Math.PI-r)%(2*Math.PI));const i=n?-1:1,o=13*i,s=-7*i,a=-2*i,l=-16*i,u=21.75,[c,p]=M(0,t+o,r,u),[d,h]=M(e-5.5,t+s,r,u),[f,m]=M(e+5.5,t+s,r,u),[y,g]=M(e-1.5,t+a,r,u),[w,b]=M(e+1.5,t+a,r,u),[v,S]=M(e-1.5,t+l,r,u),[I,A]=M(e+1.5,t+l,r,u);return[c,p,d,h,y,g,w,b,f,m,v,S,I,A]}function v(e=0,t=Math.PI,r=!0){r&&(t=(2*Math.PI-t)%(2*Math.PI));const n=r?-1:1,i=5*n,o=20*n,s=25*n,a=45,u=2*n,c=r?1:-1,p=5*c;let[d,h]=[0+p,0-o],[f,m]=[d+2*c,h],[y,g]=[f-0*c,m+u],[w,b]=[0-p,0-s],[v,S]=[w+0*c,b-u],I=Math.ceil(e/l),A=Math.floor(I/10);I-=8*A;const x=[],_=[];for(let e=0;e<I/2;e++,A--){A<=0&&I%2==1&&e===(I-1)/2&&(w=0,v=w+0*c,b=(b+h)/2,S=b-u);const[r,n]=M(w,b,t,a);if(A>0){const[e,i]=M(f,b,t,a),[o,s]=M(d,h,t,a);x.push(e),x.push(i),x.push(r),x.push(n),x.push(o),x.push(s)}else{const[e,i]=M(f,m,t,a),[o,s]=M(y,g,t,a),[l,u]=M(v,S,t,a);_.push(r),_.push(n),_.push(l),_.push(u),_.push(o),_.push(s),_.push(e),_.push(i)}b+=i,h+=i,m+=i,g+=i,S+=i}const[C,T]=M(0+p,0+o,t,a),R=7*c,[k,D]=M(0+R,0+o,t,a),[N,P]=M(0+p,0-s,t,a),[E,L]=M(0+R,0-s,t,a);return{pennants:x,barbs:_,shaft:[C,T,k,D,N,P,E,L]}}function M(e,t,r,n=1){const i=Math.sqrt(e*e+t*t)/n,o=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[i,(2*Math.PI+o-r)%(2*Math.PI)]}const S=[0,1,3,6,10,16,21,27,33,40,47,55,63],I=[0,.5,1,1.5,2],A=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function x(e,t,r,n){const i=c(n||"knots",r);let o;for(o=1;o<t.length;o++)if(o===t.length-1){if(e<t[o]*i)break}else if(e<=t[o]*i)break;return Math.min(o-1,t.length-2)}function _(e,t,r,n,i){let o=0;switch(t){case"beaufort_kn":o=x(e,S,"knots",r);break;case"beaufort_km":o=x(e,S,"kilometer-per-hour",r);break;case"beaufort_ft":o=x(e,S,"feet-per-second",r);break;case"beaufort_m":o=x(e,S,"meter-per-second",r);break;case"classified_arrow":o=x(e,i??[],n,r);break;case"ocean_current_m":o=x(e,I,"meter-per-second",r);break;case"ocean_current_kn":o=x(e,A,"knots",r)}return o}const C=[];function T(e,t){let r=0,n=0;const{width:i,height:o,mask:s}=e,a=e.pixels[0],p=[],d=[],h=c(u.fromJSON(t.inputUnit),"knots"),f="wind_speed"===t.style?l:Number.MAX_VALUE;for(let e=0;e<o;e++)for(let t=0;t<i;t++){const l=a[e*i+t]*h;if((!s||s[e*i+t])&&l<f){for(let n=0;n<4;n++)p[r++]=(t+.5)/i,p[r++]=(e+.5)/o,p[r++]=n<2?-.5:.5,p[r++]=n%2==0?-.5:.5,p[r++]=0,p[r++]=l;const s=4*(r/24-1);d[n++]=s,d[n++]=s+1,d[n++]=s+2,d[n++]=s+1,d[n++]=s+2,d[n++]=s+3}}return{vertexData:new Float32Array(p),indexData:new Uint32Array(d)}}function R(e,t){return"simple_scalar"===t.style?T(e,t):"wind_speed"===t.style?function(e,t){if(0===C.length)for(let e=0;e<30;e++)C.push(v(5*e,0,!t.invertDirection));const r=c(u.fromJSON(t.inputUnit),"knots"),{width:n,height:i,mask:o}=e,s=e.pixels[0],a=e.pixels[1],p=[],d=[];let h=0,f=0;for(let e=0;e<i;e++)for(let t=0;t<n;t++){const u=e*n+t,c=s[u]*r;if((!o||o[e*n+t])&&c>=l){const r=(a[u]+360)%360/180*Math.PI,{pennants:o,barbs:s,shaft:l}=C[Math.min(Math.floor(c/5),29)];if(o.length+s.length===0)continue;let m=p.length/6;const y=(t+.5)/n,g=(e+.5)/i;for(let e=0;e<o.length;e+=2)p[h++]=y,p[h++]=g,p[h++]=o[e],p[h++]=o[e+1]+r,p[h++]=0,p[h++]=c;for(let e=0;e<s.length;e+=2)p[h++]=y,p[h++]=g,p[h++]=s[e],p[h++]=s[e+1]+r,p[h++]=0,p[h++]=c;for(let e=0;e<l.length;e+=2)p[h++]=y,p[h++]=g,p[h++]=l[e],p[h++]=l[e+1]+r,p[h++]=0,p[h++]=c;for(let e=0;e<o.length/6;e++)d[f++]=m,d[f++]=m+1,d[f++]=m+2,m+=3;for(let e=0;e<s.length/8;e++)d[f++]=m,d[f++]=m+1,d[f++]=m+2,d[f++]=m+1,d[f++]=m+2,d[f++]=m+3,m+=4;d[f++]=m+0,d[f++]=m+1,d[f++]=m+2,d[f++]=m+1,d[f++]=m+3,d[f++]=m+2,m+=4}}return{vertexData:new Float32Array(p),indexData:new Uint32Array(d)}}(e,t):function(e,t){const{style:r,inputUnit:n,outputUnit:i,breakValues:o}=t,s=u.fromJSON(n),a=u.fromJSON(i);let l=0,c=0;const{width:p,height:d,mask:h}=e,f=e.pixels[0],m=e.pixels[1],y=null!=h?h.filter((e=>e>0)).length:p*d,g=new Float32Array(42*y),v=new Uint32Array(15*y),M=t.invertDirection?b(0,0,0,!1):w;for(let e=0;e<d;e++)for(let t=0;t<p;t++){const n=e*p+t;if(!h||h[e*p+t]){const i=(m[n]+360)%360/180*Math.PI,u=_(f[n],r,s,a,o);for(let r=0;r<M.length;r+=2)g[l++]=(t+.5)/p,g[l++]=(e+.5)/d,g[l++]=M[r],g[l++]=M[r+1]+i,g[l++]=u,g[l++]=f[n];const h=7*(l/42-1);v[c++]=h,v[c++]=h+1,v[c++]=h+2,v[c++]=h+0,v[c++]=h+4,v[c++]=h+3,v[c++]=h+0,v[c++]=h+2,v[c++]=h+3,v[c++]=h+2,v[c++]=h+5,v[c++]=h+3,v[c++]=h+5,v[c++]=h+6,v[c++]=h+3}}return{vertexData:g,indexData:v}}(e,t)}function k(e,t,r,n=[0,0],o=.5){const{width:s,height:a,mask:l}=e,[u,c]=e.pixels,[p,f]=n,m=Math.round((s-p)/r),y=Math.round((a-f)/r),g=m*y,w=new Float32Array(g),b=new Float32Array(g),v=new Uint8Array(g),M="vector-uv"===t;for(let e=0;e<y;e++)for(let t=0;t<m;t++){let n=0;const i=e*m+t,y=Math.max(0,e*r+f),g=Math.max(0,t*r+p),S=Math.min(a,y+r),I=Math.min(s,g+r);for(let e=y;e<S;e++)for(let t=g;t<I;t++){const r=e*s+t;if(!l||l[r]){n++;const e=M?[u[r],c[r]]:[u[r],(360+c[r])%360],[t,o]=M?e:h(e);w[i]+=t,b[i]+=o}}if(n>=(S-y)*(I-g)*(1-o)){v[i]=1;const[e,t]=d([w[i]/n,b[i]/n]);w[i]=e,b[i]=t}else v[i]=0,w[i]=0,b[i]=0}const S=new i.A({width:m,height:y,pixels:[w,b],mask:v});return S.updateStatistics(),S}},61343:function(e,t,r){r.d(t,{D:function(){return o}});var n=r(93389);const i=[];function o(e,t){if((0,n.Wo)(e.url??""))return!0;const{wkid:r}=t;for(const t of i){if((e.version??0)>=t[0])return!0;if("function"==typeof t[1]&&(t[1]=t[1]()),t[1].has(r))return!1}return!0}i.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),i.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),i.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),i.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),i.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}])},29606:function(e,t,r){r.d(t,{It:function(){return h},LG:function(){return s},OM:function(){return u},Sm:function(){return c},Y:function(){return a},bK:function(){return l},mm:function(){return d},sQ:function(){return p}});var n=r(46157),i=r(57165),o=r(1644);function s(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function l(e){return a(e,d.HOSTED_SERVICE)}function u(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function c(e,t,r){r?s(e,t):u(e,t)}async function p(e){const t=e.clone().normalize();let r;if(t.length>1)for(const e of t)r?e.width>r.width&&(r=e):r=e;else r=t[0];return async function(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,o.ci)(e);const r=i.A.WGS84;return await(0,n.initializeProjection)(t,r),(0,n.project)(e,r)}(r)}const d={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function h(e){const{portal:t,isOrgItem:r,itemControl:n}=e,i=t.user?.privileges;let o=!i||i.includes("features:user:edit"),s=!!r&&!!i?.includes("features:user:fullEdit");const a="update"===n||"admin"===n;return a?s=o=!0:s&&(o=!0),{features:{edit:o,fullEdit:s},content:{updateItem:a}}}},35060:function(e,t,r){r.d(t,{j:function(){return n}});const n=(0,r(73037).O)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},92778:function(e,t,r){r.d(t,{Gj:function(){return d},LF:function(){return f},uy:function(){return p}});var n=r(89001),i=r(74865),o=r(8795),s=r(30185),a=r(29360),l=r(93571),u=r(61065),c=r(80892);const p={key:"type",base:null,typeMap:{"unique-value":u.A,"class-breaks":i.A,"raster-colormap":s.A,"raster-stretch":l.A,"vector-field":c.A,"raster-shaded-relief":a.A,flow:o.A}},d={...p,typeMap:{...p.typeMap}};delete d.typeMap["vector-field"],delete d.typeMap.flow;const h={uniqueValue:u.A,classBreaks:i.A,rasterStretch:l.A,rasterColormap:s.A,vectorField:c.A,rasterShadedRelief:a.A,flowRenderer:o.A};function f(e,t){if(!e)return null;if("classBreaks"===e.type&&e.classificationMethod){const t=e.authoringInfo||{classificationMethod:""};t.classificationMethod=e.classificationMethod,e.authoringInfo=t}"vectorField"===e.type&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const r=(i=e)&&h[i.type]||null;var i;if(r){const n=new r;return n.read(e,t),n}return t?.messages&&e&&t.messages.push(new n.A("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}},74865:function(e,t,r){r.d(t,{A:function(){return T}});var n,i=r(53804),o=r(10748),s=r(73037),a=r(21609),l=r(40633),u=r(23502),c=r(77560),p=r(74376),d=r(47332),h=r(65953),f=r(81392),m=r(67888),y=r(53743),g=r(30047),w=r(29970),b=r(23879),v=r(85336),M=r(16986),S=r(54547);const I="percent-of-total",A="field",x=new s.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:I,esriNormalizeByField:A}),_=(0,m.dp)(b.A);let C=n=class extends((0,w.h)(g.A)){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let n=t.minValue;return e.map((e=>{const t=new b.A;return t.read(e,r),null==t.minValue&&(t.minValue=n),null==t.maxValue&&(t.maxValue=t.minValue),n=t.maxValue,t}))}writeClassBreakInfos(e,t,r,n){const i=e.map((e=>e.write({},n)));this._areClassBreaksConsecutive()&&i.forEach((e=>delete e.classMinValue)),t[r]=i}castField(e){return null==e?e:"function"==typeof e?(l.A.getLogger(this).error(".field: field must be a string value"),null):(0,m.GX)(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&A||r&&I||null,t&&r&&l.A.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==A&&e!==I||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let n=null;n="number"==typeof e?new b.A({minValue:e,maxValue:t,symbol:(0,o.dp)(r)}):_((0,a.o8)(e)),this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let n=0;n<r;n++){const r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(n,1);break}}}getBreakIndex(e,t){return this.valueExpression&&null==t?.arcade&&l.A.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await(0,S.lw)()});const n=this.getBreakIndex(e,r);return-1!==n?this.classBreakInfos[n]:null}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void l.A.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==t?.arcade){const e=await(0,S.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const n=this.getBreakIndex(e,r);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach((t=>{t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce(((e,t)=>e+t.getMeshHash()),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new n({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,a.o8)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,a.o8)(this.visualVariables),legendOptions:(0,a.o8)(this.legendOptions),authoringInfo:(0,a.o8)(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,y.Dx)(e,t,this.valueExpression)];(0,y.rq)(e,t,this.field),(0,y.rq)(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:n,spatialReference:i,arcade:o,timeZone:s}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=o.arcadeUtils;if(!l){const e=u.createSyntaxTree(a);l=u.createFunction(e),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const c=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:n,spatialReference:i}),s));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,n=this.normalizationType;let i=parseFloat(r[t]);if(n){const e=this.normalizationTotal,t=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if("log"===n)i=Math.log(i)*Math.LOG10E;else if(n!==I||null==e||isNaN(e)){if(n===A&&!isNaN(t)){if(isNaN(i)||isNaN(t))return-1;i/=t}}else i=i/e*100}return this._getBreakIndexfromInfos(i)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};(0,i._)([(0,u.MZ)(v.As)],C.prototype,"backgroundFillSymbol",void 0),(0,i._)([(0,u.MZ)({type:[b.A]})],C.prototype,"classBreakInfos",void 0),(0,i._)([(0,d.w)("classBreakInfos")],C.prototype,"readClassBreakInfos",null),(0,i._)([(0,f.K)("classBreakInfos")],C.prototype,"writeClassBreakInfos",null),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"defaultLabel",void 0),(0,i._)([(0,u.MZ)(v.z4)],C.prototype,"defaultSymbol",void 0),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"field",void 0),(0,i._)([(0,c.w)("field")],C.prototype,"castField",null),(0,i._)([(0,u.MZ)({type:Boolean})],C.prototype,"isMaxInclusive",void 0),(0,i._)([(0,u.MZ)({type:M.A,json:{write:!0}})],C.prototype,"legendOptions",void 0),(0,i._)([(0,u.MZ)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],C.prototype,"minValue",null),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"normalizationField",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],C.prototype,"normalizationTotal",void 0),(0,i._)([(0,u.MZ)({type:x.apiValues,value:null,json:{type:x.jsonValues,read:x.read,write:x.write}})],C.prototype,"normalizationType",null),(0,i._)([(0,p.e)({classBreaks:"class-breaks"})],C.prototype,"type",void 0),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"valueExpression",void 0),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],C.prototype,"valueExpressionTitle",void 0),C=n=(0,i._)([(0,h.$)("esri.renderers.ClassBreaksRenderer")],C);const T=C},8795:function(e,t,r){r.d(t,{A:function(){return g}});var n,i=r(53804),o=r(52874),s=r(73037),a=r(30905),l=r(13520),u=r(23502),c=(r(58941),r(40633),r(13798),r(74376)),p=r(65953),d=r(29970),h=r(53871),f=r(16986);const m=new s.J({flow_from:"flow-from",flow_to:"flow-to"});let y=n=class extends((0,d.h)(a.oY)){constructor(e){super(e),this.density=.8,this.color=new o.A([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:e,maxPathLength:t,trailWidth:r,flowSpeed:i,trailLength:o,smoothing:s,flowRepresentation:a,trailCap:l,background:u}=this,c=this.color.clone(),p=(this.visualVariables||[]).map((e=>e.clone())),d=this.authoringInfo?.clone(),h=this.legendOptions?.clone();return new n({density:e,color:c,maxPathLength:t,trailWidth:r,flowSpeed:i,trailLength:o,trailCap:l,background:u,smoothing:s,flowRepresentation:a,visualVariables:p,authoringInfo:d,legendOptions:h})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"density",void 0),(0,i._)([(0,u.MZ)({type:o.A,json:{write:{allowNull:!0}}})],y.prototype,"color",void 0),(0,i._)([(0,u.MZ)({type:Number,cast:l.cr,json:{write:!0}})],y.prototype,"maxPathLength",void 0),(0,i._)([(0,u.MZ)({type:Number,cast:l.cr,json:{write:!0}})],y.prototype,"trailWidth",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"flowSpeed",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"trailLength",void 0),(0,i._)([(0,u.MZ)({type:Number,cast:l.cr,json:{write:!1}})],y.prototype,"smoothing",void 0),(0,i._)([(0,u.MZ)({type:m.apiValues,json:{type:m.jsonValues,read:{reader:m.read},write:{writer:m.write}}})],y.prototype,"flowRepresentation",void 0),(0,i._)([(0,c.e)({flowRenderer:"flow"})],y.prototype,"type",void 0),(0,i._)([(0,u.MZ)({type:h.A,json:{write:!0}})],y.prototype,"authoringInfo",void 0),(0,i._)([(0,u.MZ)({type:f.A,json:{write:!0}})],y.prototype,"legendOptions",void 0),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],y.prototype,"trailCap",void 0),(0,i._)([(0,u.MZ)({type:String,json:{write:!0}})],y.prototype,"background",void 0),y=n=(0,i._)([(0,p.$)("esri.renderers.FlowRenderer")],y);const g=y},30185:function(e,t,r){r.d(t,{A:function(){return m}});var n=r(53804),i=r(30905),o=r(23502),s=(r(58941),r(40633),r(13798),r(74376)),a=r(65953),l=r(52874),u=r(67888);let c=class extends i.oY{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};(0,n._)([(0,o.MZ)({type:Number,json:{write:!0}})],c.prototype,"value",void 0),(0,n._)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"label",void 0),(0,n._)([(0,o.MZ)({type:l.A,json:{type:[u.jz],write:!0}})],c.prototype,"color",void 0),c=(0,n._)([(0,a.$)("esri.renderers.support.ColormapInfo")],c);const p=c;var d,h=r(3212);let f=d=class extends i.oY{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const r=5===e[0].length,n=[...e].sort(((e,t)=>e[0]-t[0])).map((e=>p.fromJSON({value:e[0],color:r?e.slice(1,5):e.slice(1,4).concat([255]),label:t?t[e[0]]??"":e[0]})));return new d({colormapInfos:n})}static createFromColorramp(e){const t=(0,h.R8)(e);return d.createFromColormap(t)}clone(){return new d({colormapInfos:this.colormapInfos.map((e=>e.toJSON()))})}extractColormap(){return this.colormapInfos.map((({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255])).sort(((e,t)=>e[0]-t[0]))}};(0,n._)([(0,o.MZ)({type:[p],json:{write:!0}})],f.prototype,"colormapInfos",void 0),(0,n._)([(0,s.e)({rasterColormap:"raster-colormap"})],f.prototype,"type",void 0),f=d=(0,n._)([(0,a.$)("esri.renderers.RasterColormapRenderer")],f);const m=f},29360:function(e,t,r){r.d(t,{A:function(){return h}});var n,i=r(53804),o=r(30905),s=r(21609),a=r(23502),l=(r(58941),r(40633),r(74376)),u=r(47332),c=r(65953),p=r(85982);let d=n=class extends o.oY{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return(0,p.r)(e)}clone(){return new n({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:(0,s.o8)(this.colorRamp)})}};(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"altitude",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"azimuth",void 0),(0,i._)([(0,a.MZ)({types:p.g,json:{write:!0}})],d.prototype,"colorRamp",void 0),(0,i._)([(0,u.w)("colorRamp")],d.prototype,"readColorRamp",null),(0,i._)([(0,a.MZ)({type:["traditional","multi-directional"],json:{write:!0}})],d.prototype,"hillshadeType",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"pixelSizePower",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"pixelSizeFactor",void 0),(0,i._)([(0,a.MZ)({type:["none","adjusted"],json:{write:!0}})],d.prototype,"scalingType",void 0),(0,i._)([(0,l.e)({rasterShadedRelief:"raster-shaded-relief"})],d.prototype,"type",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],d.prototype,"zFactor",void 0),d=n=(0,i._)([(0,c.$)("esri.renderers.RasterShadedReliefRenderer")],d);const h=d},93571:function(e,t,r){r.d(t,{A:function(){return g}});var n,i=r(53804),o=r(88022),s=r(30905),a=r(21609),l=r(40633),u=r(23502),c=(r(58941),r(74376)),p=r(47332),d=r(65953),h=r(81392),f=r(41259),m=r(85982);let y=n=class extends s.oY{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return(0,m.r)(e)}get statistics(){return this._get("statistics")}set statistics(e){(0,o.Lx)(l.A.getLogger(this),"statistics",{replacement:"customStatistics",version:"4.31",warnOnce:!0}),this._set("statistics",e)}get customStatistics(){const e=this.statistics;return e&&Array.isArray(e[0])?e.map((e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]}))):e}set customStatistics(e){this._set("statistics",e?.map((e=>[e.min,e.max,e.avg??0,e.stddev??1])))}readCustomStatistics(e){return e?.map((e=>({min:e[0],max:e[1],avg:e[2],stddev:e[3]})))}writeCustomStatistics(e,t,r){e?.length&&(t[r]=e.map((e=>[e.min,e.max,e.avg??0,e.stddev??1])))}readStretchType(e,t){let r=t.stretchType;return"number"==typeof r&&(r=f.x[r]),f.u.read(r)}clone(){return new n({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:(0,a.o8)(this.statistics),customStatistics:(0,a.o8)(this.customStatistics),gamma:(0,a.o8)(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:(0,a.o8)(this.colorRamp),histograms:(0,a.o8)(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};(0,i._)([(0,u.MZ)({types:m.g,json:{write:!0}})],y.prototype,"colorRamp",void 0),(0,i._)([(0,p.w)("colorRamp")],y.prototype,"readColorRamp",null),(0,i._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"computeGamma",void 0),(0,i._)([(0,u.MZ)({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],y.prototype,"dynamicRangeAdjustment",void 0),(0,i._)([(0,u.MZ)({type:[Number],json:{write:!0}})],y.prototype,"gamma",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"maxPercent",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"minPercent",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"numberOfStandardDeviations",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],y.prototype,"outputMax",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],y.prototype,"outputMin",void 0),(0,i._)([(0,u.MZ)({type:Number,json:{write:!0}})],y.prototype,"sigmoidStrengthLevel",void 0),(0,i._)([(0,u.MZ)({})],y.prototype,"statistics",null),(0,i._)([(0,u.MZ)()],y.prototype,"histograms",void 0),(0,i._)([(0,u.MZ)({json:{type:[[Number]],name:"statistics",write:!0}})],y.prototype,"customStatistics",null),(0,i._)([(0,p.w)("customStatistics")],y.prototype,"readCustomStatistics",null),(0,i._)([(0,h.K)("customStatistics")],y.prototype,"writeCustomStatistics",null),(0,i._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],y.prototype,"useGamma",void 0),(0,i._)([(0,u.MZ)({type:f.u.apiValues,json:{type:f.u.jsonValues,write:f.u.write}})],y.prototype,"stretchType",void 0),(0,i._)([(0,p.w)("stretchType",["stretchType"])],y.prototype,"readStretchType",null),(0,i._)([(0,c.e)({rasterStretch:"raster-stretch"})],y.prototype,"type",void 0),y=n=(0,i._)([(0,d.$)("esri.renderers.RasterStretchRenderer")],y);const g=y},30047:function(e,t,r){r.d(t,{A:function(){return p}});var n=r(53804),i=r(73037),o=r(30905),s=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(53871);const u=new i.J({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let c=class extends o.oY{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,n._)([(0,s.MZ)({type:l.A,json:{write:!0}})],c.prototype,"authoringInfo",void 0),(0,n._)([(0,s.MZ)({type:u.apiValues,readOnly:!0,json:{type:u.jsonValues,read:!1,write:{writer:u.write,ignoreOrigin:!0}}})],c.prototype,"type",void 0),c=(0,n._)([(0,a.$)("esri.renderers.Renderer")],c);const p=c},61065:function(e,t,r){r.d(t,{A:function(){return J}});var n=r(53804),i=r(10748),o=r(39819),s=r(21609),a=r(40633),l=r(34194),u=r(28181),c=r(23502),p=r(77560),d=r(74376),h=r(47332),f=r(65953),m=r(81392),y=r(72952),g=r(67888),w=r(53743),b=r(51432),v=r(30047),M=r(29970),S=r(85336),I=r(16986),A=r(75743),x=r(30905);r(58941),r(13798);let _=class extends((0,A.O)(x.oY)){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};(0,n._)([(0,c.MZ)(S.Ug)],_.prototype,"value",void 0),(0,n._)([(0,c.MZ)(S.Ug)],_.prototype,"value2",void 0),(0,n._)([(0,c.MZ)(S.Ug)],_.prototype,"value3",void 0),_=(0,n._)([(0,f.$)("esri.renderers.support.UniqueValue")],_);const C=_;var T=r(50659);let R=class extends((0,A.O)(x.oY)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(null==e)return null;const t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((e=>new C({value:e}))):"object"===t?e[0]instanceof C?e:e.map((e=>new C(e))):null}};(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],R.prototype,"description",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],R.prototype,"label",void 0),(0,n._)([(0,c.MZ)(S.z4)],R.prototype,"symbol",void 0),(0,n._)([(0,c.MZ)({type:[C],json:{type:[[String]],read:{reader:e=>e?e.map((e=>new C({value:e[0],value2:e[1],value3:e[2]}))):null},write:{writer:(e,t)=>{const r=[];for(const t of e){const e=[t.value,t.value2,t.value3].filter(T.Ru).map((e=>e.toString()));r.push(e)}t.values=r}}}})],R.prototype,"values",void 0),(0,n._)([(0,p.w)("values")],R.prototype,"castValues",null),R=(0,n._)([(0,f.$)("esri.renderers.support.UniqueValueClass")],R);const k=R;let D=class extends((0,A.O)(x.oY)){constructor(e){super(e),this.heading=null,this.classes=null}};(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],D.prototype,"heading",void 0),(0,n._)([(0,c.MZ)({type:[k],json:{write:!0}})],D.prototype,"classes",void 0),D=(0,n._)([(0,f.$)("esri.renderers.support.UniqueValueGroup")],D);const N=D;var P,E=r(99278),L=r(54547),F=r(60534),j=r(58916),O=r(36e3);const V="esri.renderers.UniqueValueRenderer",Z=()=>a.A.getLogger(V),z="uvInfos-watcher",U="uvGroups-watcher",B=(0,g.dp)(E.A);function G(e){return null!=e&&""!==e&&("string"!=typeof e||""!==e.trim()&&"<null>"!==e.toLowerCase())||(e=null),e+""}let H=P=class extends((0,M.h)(v.A)){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,t){if(!e&&!t)return;if(!e||!t)return{type:"complete",oldValue:e,newValue:t};let r=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let i=0;i<t.length;i++){const o=e.find((e=>e.value===t[i].value));o?(0,y.Ui)(o,t[i])?(n.changed.push({type:"complete",oldValue:o,newValue:t[i]}),r=!0):n.unchanged.push({oldValue:o,newValue:t[i]}):(n.added.push(t[i]),r=!0)}for(let i=0;i<e.length;i++)t.find((t=>t.value===e[i].value))||(n.removed.push(e[i]),r=!0);return r?n:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return null==e||"function"==typeof e?e:(0,g.GX)(e)}writeField(e,t,r,n){"string"==typeof e?t[r]=e:n?.messages?n.messages.push(new o.A("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Z().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||b.A.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const e=(0,F.f)(t.styleUrl,r);return Object.freeze({styleUrl:e})}}writeStyleOrigin(e,t,r,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,F.t)(e.styleUrl,n))}set uniqueValueGroups(e){this.styleOrigin?Z().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?Z().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Z().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r="object"==typeof e?B(e):new E.A({value:e,symbol:(0,i.dp)(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[G(r.value)]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void Z().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const n=t[r];if(String(n.value)===String(e)){delete this._valueInfoMap[G(e)],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&null==t?.arcade&&(r={...r,arcade:await(0,L.lw)()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&null==t?.arcade)return void Z().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&null==r?.arcade){const e=await(0,L.lw)(),{arcadeUtils:t}=e;t.hasGeometryOperations(this.valueExpression)&&await t.enableGeometryOperations(),r={...r,arcade:e}}const n=this._getUniqueValueInfo(e,r);return n?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce(((e,t)=>e+t.getMeshHash()),"");return`${e}.${t}.${r}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const e=new P({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,s.o8)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,s.o8)(this.visualVariables),legendOptions:(0,s.o8)(this.legendOptions),authoringInfo:(0,s.o8)(this.authoringInfo),backgroundFillSymbol:(0,s.o8)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=(0,s.o8)(this.uniqueValueInfos),r=(0,s.o8)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,s.o8)(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map((r=>r.collectRequiredFields(e,t))),(0,w.Dx)(e,t,this.valueExpression)];(0,w.rq)(e,t,this.field),(0,w.rq)(e,t,this.field2),(0,w.rq)(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return(0,j.cF)(this.styleOrigin,{portal:this.portal}).then((e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach((r=>{const n=new O.A({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=n,this._isDefaultSymbolDerived=!0);const i=new E.A({value:r.name,symbol:n});t.push(i),this._valueInfoMap[G(r.name)]=i})),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this}))}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}_updateUniqueValues(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[G(t.value)]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(z);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push((0,u.watch)((()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description})),((e,t)=>{e!==t&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)}),{sync:!0}));this.addHandles(t,z)}}_watchUniqueValueGroups(){this.removeHandles(U);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push((0,u.watch)((()=>({classes:r.classes})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}));for(const e of r.classes??[])t.push((0,u.watch)((()=>({symbol:e.symbol,values:e.values,label:e.label,description:e.description})),((e,t)=>{e!==t&&(this._updateInfosFromGroups(),this._isInfosSource=!1)}),{sync:!0}))}this.addHandles(t,U)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:n,fieldDelimiter:i,uniqueValueGroups:o,valueExpression:s}=this;if(!t&&!s)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const t of o)for(const o of t.classes??[]){const{symbol:t,label:s,values:l,description:u}=o;for(const o of l??[]){const{value:l,value2:c,value3:p}=o,d=[l];r&&d.push(c),n&&d.push(p);const h=a?d.join(i||""):d[0]??void 0;e.push(new E.A({symbol:t,label:s,value:h,description:u}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:n,fieldDelimiter:i,uniqueValueInfos:o}=this;if(!t&&!n||!o.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const s=!(!t||!r),a=o.map((e=>{const{symbol:t,label:r,value:n,description:o}=e,[a,l,u]=s?n?.toString()?.split(i||"")||[]:[n];return new k({symbol:t,label:r,description:o,values:[new C({value:a,value2:l,value3:u})]})})),l=[new N({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:n,spatialReference:i,arcade:o,timeZone:s}=t??{};let a=this._cache.compiledFunc;const l=o.arcadeUtils;if(!a){const e=l.createSyntaxTree(this.valueExpression);a=l.createFunction(e),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:n,spatialReference:i}),s));return this._valueInfoMap[G(u)]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let n;if(this.field2){const e=this.field2,i=this.field3,o=[];t&&o.push(r[t]),e&&o.push(r[e]),i&&o.push(r[i]),n=o.join(this.fieldDelimiter||"")}else t&&(n=r[t]);return this._valueInfoMap[G(n)]}static fromPortalStyle(e,t){const r=new P(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||b.A.getDefault());const n=r.populateFromStyle();return n.catch((t=>{Z().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",t)})),n}static fromStyleUrl(e,t){const r=new P(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const n=r.populateFromStyle();return n.catch((t=>{Z().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",t)})),n}};(0,n._)([(0,c.MZ)({readOnly:!0})],H.prototype,"_cache",null),(0,n._)([(0,d.e)({uniqueValue:"unique-value"})],H.prototype,"type",void 0),(0,n._)([(0,c.MZ)(S.As)],H.prototype,"backgroundFillSymbol",void 0),(0,n._)([(0,c.MZ)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],H.prototype,"field",null),(0,n._)([(0,p.w)("field")],H.prototype,"castField",null),(0,n._)([(0,m.K)("field")],H.prototype,"writeField",null),(0,n._)([(0,c.MZ)({type:String,value:null,json:{write:!0}})],H.prototype,"field2",null),(0,n._)([(0,c.MZ)({type:String,value:null,json:{write:!0}})],H.prototype,"field3",null),(0,n._)([(0,c.MZ)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],H.prototype,"orderByClassesEnabled",void 0),(0,n._)([(0,c.MZ)({type:String,value:null,json:{write:!0}})],H.prototype,"valueExpression",null),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],H.prototype,"valueExpressionTitle",void 0),(0,n._)([(0,c.MZ)({type:I.A,json:{write:!0}})],H.prototype,"legendOptions",void 0),(0,n._)([(0,c.MZ)({type:String,json:{write:!0}})],H.prototype,"defaultLabel",void 0),(0,n._)([(0,c.MZ)((0,l.$N)({...S.z4},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],H.prototype,"defaultSymbol",null),(0,n._)([(0,c.MZ)({type:String,value:null,json:{write:!0}})],H.prototype,"fieldDelimiter",null),(0,n._)([(0,c.MZ)({type:b.A,readOnly:!0})],H.prototype,"portal",void 0),(0,n._)([(0,h.w)("portal",["styleName"])],H.prototype,"readPortal",null),(0,n._)([(0,c.MZ)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],H.prototype,"styleOrigin",void 0),(0,n._)([(0,h.w)("styleOrigin",["styleName","styleUrl"])],H.prototype,"readStyleOrigin",null),(0,n._)([(0,m.K)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],H.prototype,"writeStyleOrigin",null),(0,n._)([(0,c.MZ)({type:[N],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||function(e){const{field1:t,field2:r,field3:n,fieldDelimiter:i,uniqueValueInfos:o,valueExpression:s}=e,a=!(!t||!r);return[{classes:(o??[]).map((e=>{const{symbol:o,label:l,value:u,description:c}=e,[p,d,h]=a?u?.toString()?.split(i||"")||[]:[u],f=[];return(t||s)&&f.push(p),r&&f.push(d),n&&f.push(h),{symbol:o,label:l,values:[f],description:c}}))}]}(t)).map((e=>N.fromJSON(e,r)))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],H.prototype,"uniqueValueGroups",null),(0,n._)([(0,c.MZ)({type:[E.A],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],H.prototype,"uniqueValueInfos",null),H=P=(0,n._)([(0,f.$)(V)],H);const J=H},80892:function(e,t,r){r.d(t,{A:function(){return D}});var n,i=r(53804),o=r(52874),s=(r(50917),r(59469)),a=(r(10748),r(73037)),l=r(30905),u=r(21609),c=r(23502),p=(r(58941),r(40633),r(74376)),d=r(47332),h=r(65953),f=r(65298),m=r(53611),y=r(74865),g=r(29970),w=r(23879),b=r(36604),v=r(53096),M=r(70481),S=r(22198),I=r(90363),A=r(89814),x=r(45532),_=r(24411);const C=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),T=new a.J({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),R=new a.J({flow_from:"flow-from",flow_to:"flow-to"});let k=n=class extends((0,g.h)(l.oY)){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return C.has(e)?m.MD.fromJSON(e):null}readOutputUnit(e,t){return C.has(e)?m.MD.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)"size"===t.type&&e.push(t);if(0===e.length){const t=new v.A({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)"rotation"===t.type&&e.push(t);if(0===e.length){const t=new b.A({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new n({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:(0,u.o8)(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,r=[]){const n=new Array,i=(0,m.KL)(this.inputUnit,this.outputUnit),o=this.rotationVariables[0]?.rotationType||this.rotationType,a=t?(0,m.FI)(e.pixelBlock,"vector-uv",o,i):(0,m.Rn)(e.pixelBlock,"vector-magdir",i);if(null==a)return n;const l=e.extent,u=null!=a.mask&&a.mask.length>0;let c=0;const p=(l.xmax-l.xmin)/a.width,d=(l.ymax-l.ymin)/a.height;for(let e=0;e<a.height;e++)for(let t=0;t<a.width;t++,c++){let i=new x.default({x:l.xmin+t*p+p/2,y:l.ymax-e*d-d/2,spatialReference:l.spatialReference});i=(await(0,f.el)(i))[0];const o=r.some((e=>e.intersects(i)));if((!u||a.mask[c])&&!o){const e={Magnitude:a.pixels[0][c],Direction:a.pixels[1][c]},t=new s.default({geometry:new x.default({x:i.x,y:i.y,spatialReference:l.spatialReference}),attributes:e});t.symbol=this._getVisualVariablesAppliedSymbol(t),n.push(t)}}return n}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new I.A({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new S.A({width:0}),size:20,color:e||new o.A([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;const t=this.styleRenderer?.getSymbol(e)?.clone(),r=this.sizeVariables,n=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach((r=>(0,A.UQ)(t,(0,M.getAllSizes)([r],e)))),n&&n.length){const r="flow-to"===this.flowRepresentation==("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180;e.attributes.Direction=e.attributes.Direction+r,this.rotationVariables.forEach((r=>(0,A.GG)(t,(0,M.getRotationAngle)(r,e),r.axis)))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new y.A(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new o.A([214,47,39])),classBreakInfos:this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])}}_createBeaufortMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new o.A([214,47,39])),classBreakInfos:this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new o.A([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((e=>3.28084*e)),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new o.A([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((e=>2.23694*e)),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new o.A([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];return t=t.map((e=>3.6*e)),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])}}_createCurrentMeterRenderer(){return{defaultSymbol:this._getDefaultSymbol(new o.A([177,177,177])),classBreakInfos:this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])}}_createCurrentKnotsRenderer(){return{defaultSymbol:this._getDefaultSymbol(new o.A([177,177,177])),classBreakInfos:this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])}}_createClassifiedArrowRenderer(){const e=this._getDefaultSymbol(new o.A([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const e=this.sizeVariables[0].minDataValue,r=this.sizeVariables[0].maxDataValue;if(e&&r){const n=(r-e)/5;t=Array.from(Array(6).keys()).map((t=>e+n*t))}}return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])}}_createSimpleScalarRenderer(){return{defaultSymbol:_.A.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map((e=>5*e)),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=_.A.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),n=e.map(((n,i)=>{let o;if(i!==e.length-1)if(0===i)o={minValue:n,maxValue:e[i+1],symbol:r};else{const r=_.A.fromJSON({type:"esriPMS",imageData:t[i].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:n,maxValue:e[i+1],symbol:r}}return new w.A(o)}));return{defaultSymbol:r,classBreakInfos:n}}_getClassBreaks(e,t){return t.map(((t,r)=>new w.A({minValue:e[r],maxValue:e[r+1],symbol:this._getDefaultSymbol(new o.A(t))})))}};(0,i._)([(0,c.MZ)({type:["Magnitude"],json:{write:!0}})],k.prototype,"attributeField",void 0),(0,i._)([(0,c.MZ)({type:R.apiValues,json:{type:R.jsonValues,read:{reader:R.read},write:{writer:R.write}}})],k.prototype,"flowRepresentation",void 0),(0,i._)([(0,c.MZ)({type:["geographic","arithmetic"],json:{write:!0}})],k.prototype,"rotationType",void 0),(0,i._)([(0,c.MZ)({type:T.apiValues,json:{type:T.jsonValues,read:{reader:T.read},write:{writer:T.write}}})],k.prototype,"style",void 0),(0,i._)([(0,c.MZ)({json:{write:!0}})],k.prototype,"symbolTileSize",void 0),(0,i._)([(0,c.MZ)({type:m.MD.apiValues,json:{type:m.MD.jsonValues,write:{writer:m.MD.write}}})],k.prototype,"inputUnit",void 0),(0,i._)([(0,d.w)("inputUnit")],k.prototype,"readInputUnit",null),(0,i._)([(0,c.MZ)({type:m.MD.apiValues,json:{type:m.MD.jsonValues,read:{reader:m.MD.read},write:{writer:m.MD.write}}})],k.prototype,"outputUnit",void 0),(0,i._)([(0,d.w)("outputUnit")],k.prototype,"readOutputUnit",null),(0,i._)([(0,p.e)({vectorField:"vector-field"})],k.prototype,"type",void 0),(0,i._)([(0,c.MZ)({type:y.A})],k.prototype,"styleRenderer",null),(0,i._)([(0,c.MZ)({type:v.A})],k.prototype,"sizeVariables",null),(0,i._)([(0,c.MZ)({type:b.A})],k.prototype,"rotationVariables",null),k=n=(0,i._)([(0,h.$)("esri.renderers.VectorFieldRenderer")],k);const D=k},29970:function(e,t,r){r.d(t,{h:function(){return x}});var n=r(53804),i=r(23502),o=(r(58941),r(40633)),s=(r(13798),r(47332)),a=r(65953),l=r(81392),u=r(53743);const c=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var p=r(74843),d=r(14170),h=r(36604),f=r(53096),m=r(64494),y=r(83525),g=r(73037),w=r(89001);const b={color:p.A,size:f.A,opacity:d.A,rotation:h.A},v=new g.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),M=/^\[([^\]]+)\]$/i;let S=class extends y.A{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),e=e?.filter((e=>!!e)),e?.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some((e=>!!e.target))&&e.sort(((e,t)=>{let r=null;return r=e.target===t.target?0:e.target?1:-1,r}));for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:n,rotationType:i}=t,s=n?.match(M),a=s?.[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:i,field:a})),e)return e.map((e=>{const t=v.read(e.type),n=b[t];n||(o.A.getLogger(this).warn(`Unknown variable type: ${t}`),r?.messages&&r.messages.push(new w.A("visual-variable:unsupported",`visualVariable of type '${t}' is not supported`,{definition:e,context:r})));const i=new n;return i.read(e,r),i}))}writeVariables(e,t){const r=[];for(const n of e){const e=n.toJSON(t);e&&r.push(e)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,n._)([(0,i.MZ)()],S.prototype,"visualVariables",null),S=(0,n._)([(0,a.$)("esri.renderers.visualVariables.VisualVariableFactory")],S);const I=S,A={base:m.A,key:"type",typeMap:{opacity:d.A,color:p.A,rotation:h.A,size:f.A}},x=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new I}set visualVariables(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(e,t,r){return this._vvFactory.readVariables(e,t,r)}writeVisualVariables(e,t,r,n){t[r]=this._vvFactory.writeVariables(e,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const e of this.visualVariables)if(e.arcadeRequired)return!0;return!1}hasVisualVariables(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}getVisualVariablesForType(e,t){const r=this.visualVariables;return r?r.filter((r=>r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target))):[]}async collectVVRequiredFields(e,t){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const n of r)n&&(n.field&&(0,u.rq)(e,t,n.field),n.normalizationField&&(0,u.rq)(e,t,n.normalizationField),n.valueExpression&&(_(n.valueExpression,e,t)||await(0,u.Dx)(e,t,n.valueExpression)))}};return(0,n._)([(0,i.MZ)({types:[A],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,n._)([(0,s.w)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,n._)([(0,l.K)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,n._)([(0,a.$)("esri.renderers.mixins.VisualVariablesMixin")],t),t};function _(e,t,r){const n=(i=e,i.match(c)?.[1]?.replace(/\\'/g,"'")??null);var i;return null!=n&&((0,u.rq)(t,r,n),!0)}},53871:function(e,t,r){r.d(t,{A:function(){return L}});var n,i=r(53804),o=r(73037),s=r(30905),a=r(21609),l=r(23502),u=r(67888),c=r(47332),p=r(65953);r(58941),r(40633),r(13798);let d=n=class extends s.oY{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new n({minValue:this.minValue,maxValue:this.maxValue})}};var h;(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],d.prototype,"minValue",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],d.prototype,"maxValue",void 0),d=n=(0,i._)([(0,p.$)("esri.renderers.support.AuthoringInfoClassBreakInfo")],d);let f=h=class extends s.oY{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new h({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,a.o8)(this.classBreakInfos)})}};(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"field",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,i._)([(0,l.MZ)({type:[d],json:{write:!0}})],f.prototype,"classBreakInfos",void 0),f=h=(0,i._)([(0,p.$)("esri.renderers.support.AuthoringInfoFieldInfo")],f);var m,y=r(77560);let g=m=class extends s.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new m({label:this.label,value:this.value,size:this.size})}};(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],g.prototype,"label",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],g.prototype,"size",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],g.prototype,"value",void 0),g=m=(0,i._)([(0,p.$)("esri.renderers.support.AuthoringInfoSizeStop")],g);const w=g;var b;const v=new o.J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),M=new o.J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),S={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},I=["high-to-low","above-and-below","centered-on","extremes"],A=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],x=["seconds","minutes","hours","days","months","years"];let _=b=class extends s.oY{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}get normalizationField(){return"reference-size"===this.theme?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return"reference-size"===this.theme?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return"reference-size"===this.theme?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get sizeStops(){return"reference-size"===this.theme?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new b({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:(0,a.o8)(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,i._)([(0,l.MZ)({types:S,json:{write:!0}})],_.prototype,"endTime",void 0),(0,i._)([(0,y.w)("endTime")],_.prototype,"castEndTime",null),(0,i._)([(0,l.MZ)({type:String,json:{write:!0}})],_.prototype,"field",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"maxSliderValue",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0}})],_.prototype,"minSliderValue",void 0),(0,i._)([(0,l.MZ)({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],_.prototype,"normalizationField",null),(0,i._)([(0,l.MZ)({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_.prototype,"referenceSizeScale",null),(0,i._)([(0,l.MZ)({type:["circle","diamond","hexagon-flat","hexagon-pointy","square"],value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],_.prototype,"referenceSizeSymbolStyle",null),(0,i._)([(0,l.MZ)({types:S,json:{write:!0}})],_.prototype,"startTime",void 0),(0,i._)([(0,y.w)("startTime")],_.prototype,"castStartTime",null),(0,i._)([(0,l.MZ)({type:[w],json:{origins:{"web-scene":{write:!1}},write:!0}})],_.prototype,"sizeStops",null),(0,i._)([(0,l.MZ)({type:v.apiValues,value:null,json:{type:v.jsonValues,read:v.read,write:v.write}})],_.prototype,"style",null),(0,i._)([(0,l.MZ)({type:A,value:null,json:{type:A,origins:{"web-scene":{type:I,write:{writer:(e,t)=>{I.includes(e)&&(t.theme=e)}}}},write:!0}})],_.prototype,"theme",null),(0,i._)([(0,l.MZ)({type:M.apiValues,json:{type:M.jsonValues,read:M.read,write:M.write}})],_.prototype,"type",void 0),(0,i._)([(0,l.MZ)({type:x,json:{type:x,write:!0}})],_.prototype,"units",void 0),_=b=(0,i._)([(0,p.$)("esri.renderers.support.AuthoringInfoVisualVariable")],_);const C=_;var T,R=r(85982);const k=new o.J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),D=new o.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),N=new o.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),P=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers"];let E=T=class extends s.oY{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?(0,R.r)(e):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new T({classificationMethod:this.classificationMethod,colorRamp:(0,a.o8)(this.colorRamp),fadeRatio:(0,a.o8)(this.fadeRatio),fields:this.fields?.slice(),field1:(0,a.o8)(this.field1),field2:(0,a.o8)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,i._)([(0,l.MZ)({type:k.apiValues,value:null,json:{type:k.jsonValues,read:k.read,write:k.write,origins:{"web-document":{default:"manual",type:k.jsonValues,read:k.read,write:k.write}}}})],E.prototype,"classificationMethod",null),(0,i._)([(0,l.MZ)({types:R.g,json:{write:!0}})],E.prototype,"colorRamp",void 0),(0,i._)([(0,c.w)("colorRamp")],E.prototype,"readColorRamp",null),(0,i._)([(0,l.MZ)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"fadeRatio",void 0),(0,i._)([(0,l.MZ)({type:[String],value:null,json:{write:!0}})],E.prototype,"fields",null),(0,i._)([(0,l.MZ)({type:f,value:null,json:{write:!0}})],E.prototype,"field1",null),(0,i._)([(0,l.MZ)({type:f,value:null,json:{write:!0}})],E.prototype,"field2",null),(0,i._)([(0,l.MZ)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],E.prototype,"flowTheme",null),(0,i._)([(0,l.MZ)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],E.prototype,"focus",null),(0,i._)([(0,l.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],E.prototype,"isAutoGenerated",void 0),(0,i._)([(0,l.MZ)({type:Number,value:null,json:{type:u.jz,write:!0}})],E.prototype,"numClasses",null),(0,i._)([(0,l.MZ)({type:P,json:{type:P,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],E.prototype,"lengthUnit",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"maxSliderValue",void 0),(0,i._)([(0,l.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"minSliderValue",void 0),(0,i._)([(0,l.MZ)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],E.prototype,"statistics",null),(0,i._)([(0,l.MZ)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],E.prototype,"standardDeviationInterval",null),(0,i._)([(0,l.MZ)({type:D.apiValues,value:null,json:{type:D.jsonValues,read:D.read,write:D.write,origins:{"web-scene":{type:N.jsonValues,write:{writer:N.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],E.prototype,"type",null),(0,i._)([(0,l.MZ)({type:[C],json:{write:!0}})],E.prototype,"visualVariables",void 0),(0,i._)([(0,l.MZ)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],E.prototype,"univariateSymbolStyle",null),(0,i._)([(0,l.MZ)({type:["high-to-low","above-and-below","above","below"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],E.prototype,"univariateTheme",null),E=T=(0,i._)([(0,p.$)("esri.renderers.support.AuthoringInfo")],E);const L=E},23879:function(e,t,r){r.d(t,{A:function(){return c}});var n,i=r(53804),o=r(30905),s=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(85336);let u=n=class extends o.oY{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],u.prototype,"minValue",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],u.prototype,"maxValue",void 0),(0,i._)([(0,s.MZ)(l.Wp)],u.prototype,"symbol",void 0),u=n=(0,i._)([(0,a.$)("esri.renderers.support.ClassBreakInfo")],u);const c=u},31233:function(e,t,r){r.d(t,{A:function(){return m}});var n=r(53804),i=r(30905),o=r(40633),s=r(23502),a=(r(58941),r(13798),r(65953)),l=r(98521),u=r(43264),c=r(72567),p=r(55469),d=r(3212),h=r(9059);let f=class extends i.oY{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t=this._updateUVRenderer(e);break;case"rasterColormap":t=this._updateColormapRenderer(e);break;case"rasterStretch":t=this._updateStretchRenderer(e);break;case"classBreaks":t=this._updateClassBreaksRenderer(e);break;case"rasterShadedRelief":t=this._updateShadedReliefRenderer(e);break;case"vectorField":t=this._updateVectorFieldRenderer();break;case"flowRenderer":t=this._updateFlowRenderer()}return t}symbolize(e){let t=e?.pixelBlock;if(!y(t))return t;if(e.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=t.extractBands(e.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolizeColormap(t);break;case"classBreaks":r=this._symbolizeClassBreaks(t);break;case"rasterStretch":r=this._symbolizeStretch(t,e.bandIds);break;case"rasterShadedRelief":{const n=e.extent,i=n.spatialReference.isGeographic,o={x:(n.xmax-n.xmin)/t.width,y:(n.ymax-n.ymin)/t.height};r=this._symbolizeShadedRelief(t,{isGCS:i,resolution:o});break}}return r}catch(e){return o.A.getLogger(this).error("symbolize",e.message),t}}simpleStretch(e,t){if(!y(e))return e;try{return e.pixels.length>3&&(e=e.extractBands([0,1,2])),(0,c._N)(e,{...t,isRenderer:!0})}catch(t){return o.A.getLogger(this).error("symbolize",t.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:e,offset:t}=this.lookup.colormapLut||{};return{colormap:e,colormapOffset:t,isClassBreaks:"classBreaks"===this.rendererJSON.type,type:"lut"}}const{pixelBlock:t,isGCS:r,resolution:n,bandIds:i}=e,{rendererJSON:o}=this;return"rasterStretch"===o.type?this._generateStretchWebGLParams(t,o,i):"rasterShadedRelief"===o.type?this._generateShadedReliefWebGLParams(o,r,n??void 0):"vectorField"===o.type?this._generateVectorFieldWebGLParams(o):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(e){return this._isLUTChanged()&&!this.bind().success?e:(0,u.qL)(e,this.lookup.colormapLut)}_symbolizeClassBreaks(e){const{canUseIndexedLUT:t}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?e:t?(0,u.qL)(e,this.lookup.colormapLut):(0,u.Hx)(e,this.lookup.remapLut??[])}_symbolizeStretch(e,t){const{rasterInfo:r}=this,{pixelType:n,bandCount:i}=r,o=this.rendererJSON,s=["u8","u16","s8","s16"].includes(n);let a,l;const{dra:p}=o,{gamma:d}=this.lookup;if("histogramEqualization"===o.stretchType){const n=p?null:this.lookup?.histogramLut,i=(0,c.DP)(o,{rasterInfo:r,pixelBlock:e,bandIds:t,returnHistogramLut:!n}),s=(0,c._N)(e,{...i,gamma:d,isRenderer:!0});l=(0,u.eH)(s,{lut:p?i.histogramLut:n,offset:0})}else if(s){if(p){const i=(0,c.DP)(o,{rasterInfo:r,pixelBlock:e,bandIds:t});a=(0,c.RP)({pixelType:n,...i,gamma:d,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return e;a=this.lookup?this.lookup.stretchLut:null}else a=this.lookup?this.lookup.stretchLut:null;if(!a)return e;i>1&&null!=t&&t.length===e?.pixels.length&&a?.lut.length===i&&(a={lut:t.map((e=>a.lut[e])),offset:a.offset}),l=(0,u.eH)(e,a)}else{const n=(0,c.DP)(o,{rasterInfo:r,pixelBlock:e,bandIds:t});l=(0,c._N)(e,{...n,gamma:d,isRenderer:!0})}if(o.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;l=(0,u.qL)(l,this.lookup?.colormapLut)}return l}_symbolizeShadedRelief(e,t){const r=this.rendererJSON,n={...r,...t},i=(0,p.fw)(e,n);if(!r.colorRamp)return i;let o;if(this._isLUTChanged(!0)){if(!this.bind().success)return i;o=this.lookup?this.lookup.hsvMap:null}else o=this.lookup?this.lookup.hsvMap:null;if(!o)return i;const s=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return(0,p.SC)(i,e,o,s),i}_isVectorFieldData(){const{bandCount:e,dataType:t}=this.rasterInfo;return 2===e&&("vector-magdir"===t||"vector-uv"===t)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const{bandCount:t,attributeTable:r,pixelType:n}=this.rasterInfo,i=e.field1;if(!i)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const o=e.defaultSymbol,s=1===t&&["u8","s8"].includes(n);if(!(0,h.hu)(this.rasterInfo,i)&&!s)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const a=[];if(null!=r){const t=r.fields.find((e=>"value"===e.name.toLowerCase()));if(!t)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};r.features.forEach((r=>{const n=e.uniqueValueInfos?.find((e=>String(e.value)===String(r.attributes[i]))),s=n?.symbol?.color;s?a.push([r.attributes[t.name]].concat(s)):o&&a.push([r.attributes[t.name]].concat(o.color))}))}else{if("value"!==i.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};e.uniqueValueInfos?.forEach((e=>{const t=e?.symbol?.color;t?a.push([parseInt(""+e.value,10)].concat(t)):o&&a.push([parseInt(""+e.value,10)].concat(o?.color))}))}if(0===a.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const l=(0,u.zg)({colormap:a});return this.lookup={rendererJSON:e,colormapLut:l},this.canRenderInWebGL=(0,h.WN)(l?.indexedColormap),{success:!0}}_updateColormapRenderer(e){if(!(0,h.FA)(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const t=e.colormapInfos.map((e=>[e.value].concat(e.color))).sort(((e,t)=>e[0]-t[0]));if(!t||0===t.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const r=(0,u.zg)({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=(0,h.WN)(r?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(e){if(!(0,h.iL)(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(e.colorRamp){const t=(0,d.R8)(e.colorRamp,{interpolateAlpha:!0}),r=(0,u.zg)({colormap:t}),n=(0,d.S2)(r.indexedColormap);this.lookup={rendererJSON:e,colormapLut:r,hsvMap:n}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(e){const{attributeTable:t,pixelType:r}=this.rasterInfo,n=null!=t?t.fields.find((e=>"value"===e.name.toLowerCase())):null,i=null!=t?t.fields.find((t=>t.name.toLowerCase()===e.field.toLowerCase())):null,o=null!=n&&null!==i;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(r)||o,tableValueField:n,tableBreakField:i}}_updateClassBreaksRenderer(e){const{attributeTable:t}=this.rasterInfo,{canUseIndexedLUT:r,tableValueField:n,tableBreakField:i}=this._analyzeClassBreaks(e),o=e.classBreakInfos;if(!o?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const s=o.sort(((e,t)=>e.classMaxValue-t.classMaxValue)),a=s[s.length-1];let l=e.minValue;if(!r){const t=[];for(let e=0;e<s.length;e++)t.push({value:s[e].classMinValue??l,mappedColor:s[e].symbol.color}),l=s[e].classMaxValue;return t.push({value:a.classMaxValue,mappedColor:a.symbol.color}),this.lookup={rendererJSON:e,remapLut:t},this.canRenderInWebGL=!1,{success:!0}}const c=[];if(null!=t&&null!=n&&null!==i&&n!==i){const r=n.name,o=i.name,a=s[s.length-1],{classMaxValue:u}=a;l=e.minValue;for(const e of t.features){const t=e.attributes[r],n=e.attributes[o],i=n===u?a:n<l?null:s.find((({classMaxValue:e})=>e>n));i&&c.push([t].concat(i.symbol.color))}}else{l=Math.floor(e.minValue);for(let e=0;e<s.length;e++){const t=s[e];for(let e=l;e<t.classMaxValue;e++)c.push([e].concat(t.symbol.color));l=Math.ceil(t.classMaxValue)}a.classMaxValue===l&&c.push([a.classMaxValue].concat(a.symbol.color))}const p=(0,u.zg)({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:p},this.canRenderInWebGL=(0,h.WN)(p?.indexedColormap),{success:!0}}_updateStretchRenderer(e){let{stretchType:t,dra:r}=e;if(!("none"===t||e.statistics?.length||function(e){return null!=e&&e.length>0&&null!=e[0].min&&null!=e[0].max}(this.rasterInfo.statistics)||r))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const n=e.histograms||this.rasterInfo.histograms;!function(e){return"percentClip"===e||"histogramEqualization"===e}(e.stretchType)||n?.length||r||(t="minMax");const{computeGamma:i,useGamma:o,colorRamp:s}=e;let{gamma:a}=e;if(o&&i&&!a?.length){const t=e.statistics?.length?e.statistics:this.rasterInfo.statistics;a=(0,c.fP)(this.rasterInfo.pixelType,t)}const l=this.rasterInfo.pixelType,p=!r&&["u8","u16","s8","s16"].includes(l);if("histogramEqualization"===t){const t=n.map((e=>(0,c.WF)(e)));this.lookup={rendererJSON:e,histogramLut:t}}else if(p){const t=(0,c.DP)(e,{rasterInfo:this.rasterInfo}),r=(0,c.RP)({pixelType:l,...t,gamma:o?a:null,rounding:"floor"});this.lookup={rendererJSON:e,stretchLut:r}}if(s&&!function(e){return"algorithmic"===e.type&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}(s)){const t=(0,d.R8)(s,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=(0,u.zg)({colormap:t}),this.lookup.rendererJSON=e}return this.lookup.gamma=o&&a?.length?a:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(e,t,r){let n=null,i=null;const o=this.lookup?.colormapLut;t.colorRamp&&o&&(n=o.indexedColormap,i=o.offset),"histogramEqualization"===t.stretchType&&(t={...t,stretchType:"minMax"});const{gamma:s}=this.lookup,a=!(!t.useGamma||!s?.some((e=>1!==e))),{minCutOff:l,maxCutOff:u,outMin:p,outMax:d}=(0,c.DP)(t,{rasterInfo:this.rasterInfo,pixelBlock:e,bandIds:r});let h=0;null!=e&&(h=e.getPlaneCount(),2===h&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const{bandCount:f}=this.rasterInfo,m=Math.min(3,r?.length||h||f,f),y=new Float32Array(m),g=n||a?1:255;let w;for(w=0;w<l.length;w++)y[w]=u[w]===l[w]?0:(d-p)/(u[w]-l[w])/g;const b=new Float32Array(m);if(a&&s)for(w=0;w<m;w++)s[w]>1?s[w]>2?b[w]=6.5+(s[w]-2)**2.5:b[w]=6.5+100*(2-s[w])**4:b[w]=1;return{bandCount:m,outMin:p/g,outMax:d/g,minCutOff:l,maxCutOff:u,factor:y,useGamma:a,gamma:a?s:[1,1,1],gammaCorrection:a?b:[1,1,1],colormap:n,colormapOffset:i,stretchType:t.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(e,t=!1,r={x:0,y:0}){let n=null,i=null;const o=this.lookup?.colormapLut;e.colorRamp&&o&&(n=o.indexedColormap,i=o.offset);const s={...e,isGCS:t,resolution:r},a=(0,p.ng)(s),l=this.rasterInfo.statistics?.[0];return{...a,minValue:l?.min??0,maxValue:l?.max??8e3,hillshadeType:"traditional"===e.hillshadeType?0:1,type:"hillshade",colormap:n,colormapOffset:i}}_generateVectorFieldWebGLParams(e){const{style:t,inputUnit:r,outputUnit:n,visualVariables:i,symbolTileSize:o,flowRepresentation:s}=e;let a;const l=this.rasterInfo.statistics?.[0].min??0,u=this.rasterInfo.statistics?.[0].max??50,c=i?.find((e=>"sizeInfo"===e.type))??{type:"sizeInfo",field:"Magnitude",maxDataValue:u,maxSize:.8*o,minDataValue:l,minSize:.2*o},p=c.minDataValue??l,d=c.maxDataValue??u,h=null!=c.maxSize&&null!=c.minSize?[c.minSize/o,c.maxSize/o]:[.2,.8];if("wind_speed"===t){const e=(h[0]+h[1])/2;h[0]=h[1]=e}const f=null!=p&&null!=d?[p,d]:null;if("classified_arrow"===t)if(null!=p&&null!=d&&null!=c){a=[];const e=(c.maxDataValue-c.minDataValue)/5;for(let t=0;t<6;t++)a.push(c.minDataValue+e*t)}else a=[0,1e-6,3.5,7,10.5,14];const m="flow_to"===s==("ocean_current_kn"===t||"ocean_current_m"===t)?0:Math.PI,y=i?.find((e=>"rotationInfo"===e.type));return{breakValues:a,dataRange:f,inputUnit:r,outputUnit:n,symbolTileSize:o,symbolPercentRange:h,style:t||"single_arrow",rotation:m,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":y?.rotationType||e.rotationType,type:"vectorField"}}};(0,n._)([(0,s.MZ)({json:{write:!0}})],f.prototype,"rendererJSON",void 0),(0,n._)([(0,s.MZ)({type:l.A,json:{write:!0}})],f.prototype,"rasterInfo",void 0),(0,n._)([(0,s.MZ)({json:{write:!0}})],f.prototype,"lookup",void 0),(0,n._)([(0,s.MZ)()],f.prototype,"canRenderInWebGL",void 0),f=(0,n._)([(0,a.$)("esri.renderers.support.RasterSymbolizer")],f);const m=f;function y(e){return(0,u.AB)(e)&&0!==e.validPixelCount}},16986:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(53804),i=r(75743),o=r(73037),s=r(30905),a=r(23502),l=(r(58941),r(40633),r(13798),r(74376)),u=r(65953);const c=(0,o.O)()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let p=class extends((0,i.O)(s.oY)){constructor(e){super(e),this.title=null,this.order=null}};(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],p.prototype,"title",void 0),(0,n._)([(0,l.e)(c)],p.prototype,"order",void 0),p=(0,n._)([(0,u.$)("esri.renderers.support.RendererLegendOptions")],p);const d=p},99278:function(e,t,r){r.d(t,{A:function(){return c}});var n,i=r(53804),o=r(30905),s=r(23502),a=(r(58941),r(40633),r(13798),r(65953)),l=r(85336);let u=n=class extends o.oY{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new n({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,i._)([(0,s.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,i._)([(0,s.MZ)(l.Wp)],u.prototype,"symbol",void 0),(0,i._)([(0,s.MZ)(l.Ug)],u.prototype,"value",void 0),u=n=(0,i._)([(0,a.$)("esri.renderers.support.UniqueValueInfo")],u);const c=u},3212:function(e,t,r){r.d(t,{L7:function(){return a},M5:function(){return f},R8:function(){return w},S2:function(){return b},hf:function(){return S},hs:function(){return h},iv:function(){return g},kH:function(){return u},vL:function(){return I},vj:function(){return l}});var n=r(52874),i=r(75505),o=r(73037),s=r(30905);const a=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],l=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],u=new o.J({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function c(e,t){if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function p(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function d(e,t){if(!e)return;const r=t??l;let i=null;return"algorithmic"===e.type?r.some((t=>{if(c(e.fromColor.toRgb(),t.fromColor)&&c(e.toColor.toRgb(),t.toColor))return i=t.id,!0})):"multipart"===e.type&&r.some((t=>{const r=e.colorRamps,o=t.colorRamps;if(r&&o&&r.length===o.length&&!o.some(((e,t)=>{if(!c(r[t].fromColor.toRgb(),new n.A(e.fromColor).toRgb())||!c(r[t].toColor.toRgb(),new n.A(e.toColor).toRgb()))return!0}))){if(i)return!0;i=t.id}})),i}function h(e,t=!1){const r="string"==typeof e?e:function(e,t,r=!1){if(!e)return;let n=!1,i=d(e,t);return null!=i||r||(n=!0,i=d(e=function(e){if("multipart"===e.type){const t=e.clone();return t.colorRamps?.length?(t.colorRamps=t.colorRamps.reverse().map((e=>p(e))),t):t}return p(e)}(e),t)),i?{id:i,inverted:n}:void 0}(e,void 0,t)?.id;return r?u.toJSON(r):null}function f(e,t="esriCIELabAlgorithm"){const r=l.find((({id:t})=>t===e));return r?r.colorRamps?{type:"multipart",colorRamps:r.colorRamps.map((e=>({type:"algorithmic",algorithm:t,fromColor:[...e.fromColor],toColor:[...e.toColor]})))}:{type:"algorithmic",algorithm:t,fromColor:[...r.fromColor],toColor:[...r.toColor]}:null}function m(e){const t=(e=e||{}).numColors||256,r=e.distanceOffset||0,n=null!=e.isCustomInterval?e.isCustomInterval:null!==e.distanceInterval&&e.distanceInterval!==1/(t-1),i=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:r,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:i,isCustomInterval:n,weights:e.weights}}function y(e,t){let{fromColor:r,toColor:n}=e;r=[...r],n=[...n],3===r.length&&(r=r.concat([255])),3===n.length&&(n=n.concat([255]));const o=e.algorithm||"esriCIELabAlgorithm",s=m(t),{numColors:a,distanceOffset:l,isCustomInterval:u,interpolateAlpha:c}=s;if(1===a&&0===l)return[r];if(2===a&&0===l&&!u)return[r,n];const p={r:r[0],g:r[1],b:r[2]},d={r:n[0],g:n[1],b:n[2]},h="esriCIELabAlgorithm"===o?function(e,t,r){const{numColors:n,distanceOffset:i,distanceInterval:o,isCustomInterval:s}=r;let{l:a,a:l,b:u}=e;const c=(t.l-a)*o,p=(t.a-l)*o,d=(t.b-u)*o,h=[];if(i){const e=i/o;a+=e*c,l+=e*p,u+=e*d}for(let e=0;e<n-1;e++)h.push({l:a,a:l,b:u}),a+=c,l+=p,u+=d;return h.push(s?{l:a,a:l,b:u}:t),h}((0,i.ZD)(p),(0,i.ZD)(d),s):"esriHSVAlgorithm"===o?function(e,t,r){const{numColors:n,distanceOffset:i,distanceInterval:o,isCustomInterval:s}=r,a=0===e.s,l=0===t.s;let u=e.h,c=t.h;a&&!l?u=c:l&&!a&&(t={...t,h:u},c=u);let p,d=Math.abs(c-u);const h=360;d<180?p=(c-u)*o:(d=h-d,p=u>c?d*o:-d*o);const f=(t.s-e.s)*o,m=(t.v-e.v)*o;let{s:y,v:g}=e,w=u;if(i){const e=i/o;w=(w+e*p+h)%h,y+=e*f,g+=e*m}const b=[];for(let e=0;e<n-1;e++)b.push({h:w,s:y,v:g}),w=(w+p+h)%h,y+=f,g+=m;return b.push(s?{h:w,s:y,v:g}:t),b}((0,i.N2)(p),(0,i.N2)(d),s):function(e,t,r){const{numColors:n,distanceOffset:i,distanceInterval:o,isCustomInterval:s}=r,a=e.h,l=t.h,u=2*Math.PI;let c;if(a<=l){const e=l-a,t=l-a-u;c=Math.abs(t)<Math.abs(e)?t:e}else{const e=l+u-a,t=l-a;c=Math.abs(t)<Math.abs(e)?t:e}const p=c*o,d=(t.l-e.l)*o,h=(t.c-e.c)*o;let{l:f,c:m,h:y}=e;if(i){const e=i/o;f+=e*d,m+=e*h,y=(y+e*p+u)%u}const g=[];for(let e=0;e<n-1;e++)g.push({l:f,c:m,h:y}),f+=d,m+=h,y=(y+p+u)%u;return g.push(s?{l:f,c:m,h:y}:t),g}((0,i.RH)(p),(0,i.RH)(d),s),f=[],y=r[3]??255,g=((n[3]??255)-y)/(a-1);for(let e=0;e<a;e++){const{r:t,g:r,b:n}=(0,i.$)(h[e]),o=c?Math.round(y+g*e):255;f.push([t,r,n,o])}return f}function g(e,t){const r=(0,s.Wj)(e)?e.toJSON():e;return"multipart"===r.type?function(e,t){const{numColors:r,interpolateAlpha:n}=m(t);let i=t?.weights;const{colorRamps:o}=e;if(i){const e=i.reduce(((e,t)=>e+t));i=i.map((t=>t/e))}else{i=[];for(let e=0;e<o.length;e++)i[e]=1/o.length}const s=[],a=1/(r-1);let l=0,u=!1;for(let e=0;e<o.length;e++){const t=s.length,c=u?0:t*a-l;l+=i[e];let p=e===o.length-1?r-1-t:(i[e]-c)/a;if(u=Math.ceil(p)===p,p=Math.ceil(p),0===p)continue;const d=y(o[e],{numColors:p,interpolateAlpha:n,distanceOffset:c/i[e],distanceInterval:a/i[e]});s.push(...d)}const c=[...o[o.length-1].toColor];return 3===c.length&&c.push(255),s.push(c),s}(r,t):y(r,t)}function w(e,t){const r=g(e,t),n=t?.interpolateAlpha;return r.forEach(((e,t)=>{e.unshift(t),n||e.pop()})),r}function b(e){const t=[];for(let r=0;r<e.length;r+=4){const n=(0,i.N2)({r:e[r],g:e[r+1],b:e[r+2]});t.push([n.h/60,n.s/100,255*n.v/100])}return t}function v(e){const t=(0,i.N2)(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function M(e){const t=e.toJSON();return{Algorithm:t?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:v(e.fromColor),ToColor:v(e.toColor)}}function S(e){const t=h(e);if(!t)return null;if("algorithmic"===e.type)return{...M(e),Name:t};if(e.colorRamps){const r=e.colorRamps.map(M);return{type:"MultiPartColorRamp",NumColorRamps:r.length,ArrayOfColorRamp:r,Name:t}}return null}function I(e){const t=e.reverse().map((e=>{const t=e.toString(16);return t.length<2?"0"+t:t}));return 4294967295&Number.parseInt(t.join(""),16)}},85336:function(e,t,r){r.d(t,{As:function(){return p},Ug:function(){return d},Wp:function(){return c},z4:function(){return u}});var n=r(10748),i=r(34194),o=r(51575),s=r(8404),a=r(34563),l=r(15186);const u={types:n.xK,json:{write:{writer:s.M9},origins:{"web-scene":{types:n.On,write:{writer:s.M9},read:{reader:(0,o.C)({types:n.On})}}}}},c=(0,i.$N)({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},u),p={types:{base:a.A,key:"type",typeMap:{"simple-fill":n.Es.typeMap["simple-fill"],"picture-fill":n.Es.typeMap["picture-fill"],"polygon-3d":n.Es.typeMap["polygon-3d"],cim:n.Es.typeMap.cim}},json:{write:{writer:s.M9},origins:{"web-scene":{type:l.A,write:{writer:s.M9}}}}},d={cast:e=>null==e||"string"==typeof e||"number"==typeof e?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}}},9059:function(e,t,r){function n(e,t){const{attributeTable:r,bandCount:n}=e;return!((null!=r||(i=e,!["u8","s8"].includes(i.pixelType)||null==i.statistics?.[0]?.min||null==i.statistics[0]?.max||1!==i.bandCount))&&(null==r||n>1||t&&null==r.fields.find((e=>e.name.toLowerCase()===t.toLowerCase()))));var i}function i(e){const{bandCount:t,dataType:r,pixelType:n}=e;return"elevation"===r||"generic"===r&&1===t&&("s16"===n||"s32"===n||"f32"===n||"f64"===n)}function o(e,t=!1){const{bandCount:r,colormap:n,pixelType:i}=e;return 1===r&&(!!n?.length||!t&&"u8"===i)}function s(e,t=!1){const{attributeTable:r,bandCount:n}=e;return 1===n&&(!t||null!=r||null!=e.histograms)}function a(e){const{dataType:t}=e;return"vector-uv"===t||"vector-magdir"===t}function l(e){const{dataType:t}=e;return"vector-uv"===t||"vector-magdir"===t}function u(e){return!!e?.length&&e.length<=16384}r.d(t,{FA:function(){return o},QJ:function(){return l},WN:function(){return u},hu:function(){return n},iL:function(){return i},rd:function(){return a},xX:function(){return s}})},41262:function(e,t,r){r.d(t,{$P:function(){return N},I8:function(){return v},Mm:function(){return I},PD:function(){return M},ci:function(){return C},fp:function(){return S},m7:function(){return _},w6:function(){return A}});var n=r(52874),i=(r(92778),r(62938),r(56740)),o=(r(8795),r(53871)),s=(r(23879),r(3212)),a=r(9059),l=r(99278),u=(r(74843),r(53096)),c=(r(71859),r(74373),r(49241),r(96245)),p=r(8740),d=r(93571),h=r(61065),f=r(30185),m=(r(29360),r(74865),r(80892));const y=.25,g=c.A.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),w=c.A.fromJSON(s.vj[0]),b=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function v(e){return e.presetRenderers?.find((({method:t,value:r})=>"raster-function-template"===t?r===e.rasterFunctionName:"variable"===t&&r===e.variableName))}function M(e,t){const{attributeTable:r,colormap:i}=e;if((0,a.rd)(e)){const t=function(e){if(!(0,a.rd)(e))return null;let t;if(null!=e.statistics&&e.statistics.length&&("vector-magdir"===e.dataType||"vector-uv"===e.dataType)){const{minMagnitude:r,maxMagnitude:n}=function(e,t){let r,n;if("vector-magdir"===e)r=t[0].min,n=t[0].max;else{const e=t[0].min,i=t[0].max,o=t[1].min,s=t[1].max;r=0,n=Math.max(Math.abs(e),Math.abs(o),Math.abs(i),Math.abs(s))}return{minMagnitude:r,maxMagnitude:n}}(e.dataType,e.statistics);t=[new u.A({field:"Magnitude",minSize:10,maxSize:40,minDataValue:r,maxDataValue:n})]}const r=null!=e.multidimensionalInfo?k.get(e.multidimensionalInfo.variables[0].unit):void 0,n=new m.A({visualVariables:t,inputUnit:r,rotationType:"geographic"});return n.visualVariables=[...n.sizeVariables,...n.rotationVariables],n}(e);if(null!=t)return t}if(t?.rasterFunctionColorRamp){const r=x(e,t);return r.colorRamp=t.rasterFunctionColorRamp,r}if(null!=i){const t=function(e){if(!(0,a.FA)(e))return null;let t;const{attributeTable:r,colormap:n}=e;if(null!=r){const e=R(r,"value"),n=T(r,null,!0);"string"===n.type&&(t={},r.features.forEach((r=>{const i=r.attributes;t[i[e.name]]=n?i[n.name]:i[e.name]})))}return f.A.createFromColormap(n,t)}(e);if(null!=t)return t}if(null!=r){const t=function(e,t){if(!(0,a.hu)(e,t))return null;const{attributeTable:r,statistics:i}=e,u=T(r,t),c=R(r,"red"),d=R(r,"green"),f=R(r,"blue"),m=new o.A,y=[],g=new Set,b=!!(c&&d&&f);if(null!=r)r.features.forEach((e=>{const t=e.attributes[u.name];if(!g.has(e.attributes[u.name])&&null!=t){g.add(t);const i=b&&("single"===c.type||"double"===c.type)&&("single"===d.type||"double"===d.type)&&("single"===f.type||"double"===f.type)&&!r.features.some((e=>e.attributes[c.name]>1||e.attributes[d.name]>1||e.attributes[f.name]>1)),o=i?255:1;y.push(new l.A({value:e.attributes[u.name],label:e.attributes[u.name]+"",symbol:new p.A({style:"solid",outline:null,color:new n.A(b?[e.attributes[c.name]*o,e.attributes[d.name]*o,e.attributes[f.name]*o,1]:[0,0,0,0])})}))}}));else if(i?.[0])for(let e=i[0].min;e<=i[0].max;e++)y.push(new l.A({value:e,label:e.toString(),symbol:new p.A({style:"solid",outline:null,color:new n.A([0,0,0,0])})}));if(y.sort(((e,t)=>e.value&&"string"==typeof e.value.valueOf()?0:e.value>t.value?1:-1)),!b){const e=(0,s.R8)(w,{numColors:y.length});y.forEach(((t,r)=>t.symbol.color=new n.A(e[r].slice(1,4)))),m.colorRamp=w}return new h.A({field:u.name,uniqueValueInfos:y,authoringInfo:m})}(e);if(null!=t)return t}return x(e,t)}function S(e,t=!1){const r=["raster-stretch"];return(0,a.FA)(e,t)&&r.push("raster-colormap"),(0,a.hu)(e)&&r.push("unique-value"),(0,a.xX)(e,t)&&r.push("class-breaks"),(0,a.iL)(e)&&r.push("raster-shaded-relief"),(0,a.rd)(e)&&r.push("vector-field"),(0,a.QJ)(e)&&r.push("flow"),r}function I(e){return"Function"===e.datasetFormat&&"Colormap"===e.rasterFunction.functionName?e.rasterFunction.colorRamp:void 0}function A(e,t,r){const n=r?.toLowerCase().replace("bicubic","cubic"),i=["nearest","bilinear","cubic","majority"].find((e=>e===n));return"Map"===t?i??"bilinear":"standard-time"===e.dataType?i??"nearest":"thematic"===e.dataType||e.attributeTable||e.colormap?"nearest"===i||"majority"===i?i:"nearest":i??"bilinear"}function x(e,t){e=_(e,t?.variableName);const{bandCount:r}=e;let{bandIds:n,stretchType:i}=t||{};n?.some((e=>e>=r))&&(n=null);let o=e.statistics,s=e.histograms;r>1?(n=n?.length?n:C(e),o=null==o?null:n?.map((e=>o[e])),s=null==s?null:n?.map((e=>s[e]))):n=[0],null==i&&(i=function(e){let t="percent-clip";const{pixelType:r,dataType:n,histograms:i,statistics:o,multidimensionalInfo:s}=e,a=b.has(n)||"generic"===n&&null!=s;return"u8"!==r||"processed"!==n&&null!=i&&null!=o?"u8"===r||"elevation"===n||a?t="min-max":null!=i?t="percent-clip":null!=o&&(t="min-max"):t="none",t}(e)),t?.includeStatisticsInStretch&&("percent-clip"===i||"histogram-equalization"===i)&&e.statistics?.length&&(i="min-max");let a=!1;switch(i){case"none":a=!1;break;case"percent-clip":a=!s?.length;break;default:a=!o?.length}const{dataType:l}=e,u=1===n?.length&&b.has(l)?g:null,c=new d.A({stretchType:i,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:1===n?.length?[1]:[1,1,1],useGamma:!1});return"percent-clip"===i?c.maxPercent=c.minPercent=y:"standard-deviation"===i&&(c.numberOfStandardDeviations=2),a||null==e.multidimensionalInfo&&!t?.includeStatisticsInStretch||("percent-clip"===i?c.histograms=s:"min-max"!==i&&"standard-deviation"!==i||(c.statistics=o)),c}function _(e,t){const{multidimensionalInfo:r}=e;if(!t||!r)return e;const n=r.variables.find((e=>e.name===t));if(!n)return e;if(e=e.clone(),n){const{statistics:t,histograms:r}=n;t?.length&&(e.statistics=t.map((e=>({min:e.min,max:e.max,avg:e.avg,stddev:e.stddev})))),r?.length&&(e.histograms=r)}return e}function C(e){const t=e.bandCount;if(1===t)return null;if(2===t)return[0];const{bandInfos:r}=e;let n;if(r.length===t){const{red:e,green:t,blue:i,nir:o}=function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=n.name.toLowerCase();if("red"===i)t.red=r;else if("green"===i)t.green=r;else if("blue"===i)t.blue=r;else if("nearinfrared"===i||"nearinfrared_1"===i||"nir"===i)t.nir=r;else if(n.maxWavelength&&n.minWavelength){const e=n.minWavelength,i=n.maxWavelength;null==t.blue&&e>=410&&e<=480&&i>=480&&i<=540?t.blue=r:null==t.green&&e>=490&&e<=560&&i>=560&&i<=610?t.green=r:null==t.red&&e>=595&&e<=670&&i>=660&&i<=730?t.red=r:null==t.nir&&e>=700&&e<=860&&i>=800&&i<=950&&(t.nir=r)}}return t}(r);null!=e&&null!=t&&null!=i?n=[e,t,i]:null!=o&&null!=e&&null!=t&&(n=[o,e,t])}return!n&&t>=3&&(n=[0,1,2]),n}function T(e,t,r){let n;return null!=e?(n=t?e.fields.find((e=>t.toLowerCase()===e.name.toLowerCase())):function(e){let t;for(let r=0;r<e.length;r++){const n=e[r].name.toLowerCase();if("string"===e[r].type){if(n.startsWith("class")){t=e[r];break}null==t&&(n.endsWith("name")||n.endsWith("type"))&&(t=e[r])}}return t}(e.fields),n||(r||(n=e.fields.find((e=>"string"===e.type))),n||(n=R(e,"value")))):n=new i.A({name:"value"}),n}function R(e,t){return null==e?null:e.fields.find((e=>e.name.toLowerCase()===t))}const k=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function D(e){return{color:e.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function N(e){if("uniqueValue"===e.type){const t=e.uniqueValueInfos,r=t?.[0].symbol;return r?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map((e=>({value:e.value,label:e.label,symbol:e.symbol?D(e.symbol):null})))),e}if("classBreaks"===e.type){const t=e.classBreakInfos,r=t[0].symbol;return r?.symbolLayers?.length&&(e.classBreakInfos=t.map((e=>({classMinValue:e.classMinValue,classMaxValue:e.classMaxValue,label:e.label,symbol:e.symbol?D(e.symbol):null})))),e}return e}},41259:function(e,t,r){r.d(t,{u:function(){return n},x:function(){return i}});const n=new(r(73037).J)({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),i={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"}},74843:function(e,t,r){r.d(t,{A:function(){return c}});var n,i=r(53804),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953)),a=r(64494),l=r(71859);let u=n=class extends a.A{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new n({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,i._)([(0,o.MZ)({readOnly:!0})],u.prototype,"cache",null),(0,i._)([(0,o.MZ)({type:["color"],json:{type:["colorInfo"]}})],u.prototype,"type",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"normalizationField",void 0),(0,i._)([(0,o.MZ)({type:[l.A],json:{write:!0}})],u.prototype,"stops",null),u=n=(0,i._)([(0,s.$)("esri.renderers.visualVariables.ColorVariable")],u);const c=u},14170:function(e,t,r){r.d(t,{A:function(){return g}});var n,i=r(53804),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953)),a=r(64494),l=r(30905),u=r(67888),c=r(47332),p=r(81392),d=r(59798);let h=n=class extends l.oY{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return(0,d.D)(t.transparency)}writeOpacity(e,t,r){t[r]=(0,d.p)(e)}clone(){return new n({label:this.label,opacity:this.opacity,value:this.value})}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],h.prototype,"label",void 0),(0,i._)([(0,o.MZ)({type:Number,json:{type:u.jz,write:{target:"transparency"}}})],h.prototype,"opacity",void 0),(0,i._)([(0,c.w)("opacity",["transparency"])],h.prototype,"readOpacity",null),(0,i._)([(0,p.K)("opacity")],h.prototype,"writeOpacity",null),(0,i._)([(0,o.MZ)({type:Number,json:{write:!0}})],h.prototype,"value",void 0),h=n=(0,i._)([(0,s.$)("esri.renderers.visualVariables.support.OpacityStop")],h);const f=h;var m;let y=m=class extends a.A{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)),this._set("stops",e)}clone(){return new m({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((e=>e.clone())),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map((e=>e.value||0))}};(0,i._)([(0,o.MZ)({readOnly:!0})],y.prototype,"cache",null),(0,i._)([(0,o.MZ)({type:["opacity"],json:{type:["transparencyInfo"]}})],y.prototype,"type",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],y.prototype,"normalizationField",void 0),(0,i._)([(0,o.MZ)({type:[f],json:{write:!0}})],y.prototype,"stops",null),y=m=(0,i._)([(0,s.$)("esri.renderers.visualVariables.OpacityVariable")],y);const g=y},36604:function(e,t,r){r.d(t,{A:function(){return u}});var n,i=r(53804),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953)),a=r(64494);let l=n=class extends a.A{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic"}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}clone(){return new n({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};(0,i._)([(0,o.MZ)({readOnly:!0})],l.prototype,"cache",null),(0,i._)([(0,o.MZ)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],l.prototype,"axis",void 0),(0,i._)([(0,o.MZ)({type:["rotation"],json:{type:["rotationInfo"]}})],l.prototype,"type",void 0),(0,i._)([(0,o.MZ)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],l.prototype,"rotationType",void 0),l=n=(0,i._)([(0,s.$)("esri.renderers.visualVariables.RotationVariable")],l);const u=l},53096:function(e,t,r){r.d(t,{A:function(){return _}});var n=r(53804),i=r(39819),o=r(73037),s=r(40633),a=r(23502),l=r(77560),u=r(47332),c=r(65953),p=r(81392),d=r(64494),h=r(13520),f=r(59423),m=(r(58941),r(13798),r(96893));let y=class extends m.A{constructor(){super(...arguments),this.customValues=null}};(0,n._)([(0,a.MZ)({type:[Number],json:{write:!0}})],y.prototype,"customValues",void 0),y=(0,n._)([(0,c.$)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],y);const g=y;var w,b=r(32974),v=r(70481);const M=new o.J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),S=new o.J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers"});function I(e){if(null!=e)return"string"==typeof e||"number"==typeof e?function(e){return(0,h.cr)(e)}(e):"size"===e.type?(0,b.of)(e)?e:(delete(e={...e}).type,new x(e)):void 0}function A(e,t,r){if("object"!=typeof e)return e;const n=new x;return n.read(e,r),n}let x=w=class extends d.A{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&v.viewScaleRE.test(this.valueExpression)}}set index(e){(0,b.of)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,b.of)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return(0,b.eh)(this)}set maxDataValue(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return I(e)}readMaxSize(e,t,r){return A(e,0,r)}set minDataValue(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(s.A.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return I(e)}readMinSize(e,t,r){return A(e,0,r)}get arcadeRequired(){return!!this.valueExpression||null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(s.A.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return(0,b.KZ)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,n){if("$view.scale"===e){if(n?.messages){const e=this.index,t="string"==typeof e?e:`visualVariables[${e}]`;n.messages.push(new i.A("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:t+".valueExpression",context:n}))}}else t[r]=e}readValueUnit(e){return e?S.read(e):null}clone(){return new w({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,b.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,b.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===b._w.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===b._w.Stops){const e=this.stops;if(!e)return this;const t=e.map((e=>e.size)).reverse(),r=e.length;for(let n=0;n<r;n++)e[n].size=t[n];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map((e=>e.value||0))}};(0,n._)([(0,a.MZ)({readOnly:!0})],x.prototype,"cache",null),(0,n._)([(0,a.MZ)({type:M.apiValues,json:{type:M.jsonValues,origins:{"web-map":{read:!1}},read:M.read,write:M.write}})],x.prototype,"axis",void 0),(0,n._)([(0,a.MZ)()],x.prototype,"index",null),(0,n._)([(0,a.MZ)({type:String,readOnly:!0})],x.prototype,"inputValueType",null),(0,n._)([(0,a.MZ)({type:g,json:{write:!0}})],x.prototype,"legendOptions",void 0),(0,n._)([(0,a.MZ)({type:Number,value:null,json:{write:!0}})],x.prototype,"maxDataValue",null),(0,n._)([(0,a.MZ)({type:Number,value:null,json:{write:!0}})],x.prototype,"maxSize",null),(0,n._)([(0,l.w)("maxSize")],x.prototype,"castMaxSize",null),(0,n._)([(0,u.w)("maxSize")],x.prototype,"readMaxSize",null),(0,n._)([(0,a.MZ)({type:Number,value:null,json:{write:!0}})],x.prototype,"minDataValue",null),(0,n._)([(0,a.MZ)({type:Number,value:null,json:{write:!0}})],x.prototype,"minSize",null),(0,n._)([(0,l.w)("minSize")],x.prototype,"castMinSize",null),(0,n._)([(0,u.w)("minSize")],x.prototype,"readMinSize",null),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],x.prototype,"normalizationField",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],x.prototype,"arcadeRequired",null),(0,n._)([(0,a.MZ)({type:String})],x.prototype,"scaleBy",void 0),(0,n._)([(0,a.MZ)({type:[f.A],value:null,json:{write:!0}})],x.prototype,"stops",null),(0,n._)([(0,a.MZ)({type:["outline"],json:{write:!0}})],x.prototype,"target",void 0),(0,n._)([(0,a.MZ)({type:String,readOnly:!0})],x.prototype,"transformationType",null),(0,n._)([(0,a.MZ)({type:["size"],json:{type:["sizeInfo"]}})],x.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],x.prototype,"useSymbolValue",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],x.prototype,"valueExpression",void 0),(0,n._)([(0,u.w)("valueExpression",["valueExpression","expression"])],x.prototype,"readValueExpression",null),(0,n._)([(0,p.K)("web-scene","valueExpression")],x.prototype,"writeValueExpressionWebScene",null),(0,n._)([(0,a.MZ)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],x.prototype,"valueRepresentation",void 0),(0,n._)([(0,a.MZ)({type:S.apiValues,json:{write:S.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],x.prototype,"valueUnit",void 0),(0,n._)([(0,u.w)("valueUnit")],x.prototype,"readValueUnit",null),x=w=(0,n._)([(0,c.$)("esri.renderers.visualVariables.SizeVariable")],x);const _=x},64494:function(e,t,r){r.d(t,{A:function(){return f}});var n=r(53804),i=r(73037),o=r(30905),s=r(40633),a=r(23502),l=r(77560),u=r(65953),c=r(67888),p=r(96893);const d=new i.J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let h=class extends o.oY{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(s.A.getLogger(this).error(".field: field must be a string value"),null):(0,c.GX)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,n._)([(0,a.MZ)()],h.prototype,"index",void 0),(0,n._)([(0,a.MZ)({type:d.apiValues,readOnly:!0,json:{read:d.read,write:d.write}})],h.prototype,"type",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,n._)([(0,l.w)("field")],h.prototype,"castField",null),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),(0,n._)([(0,a.MZ)({type:String,json:{write:!0}})],h.prototype,"valueExpressionTitle",void 0),(0,n._)([(0,a.MZ)({readOnly:!0})],h.prototype,"arcadeRequired",null),(0,n._)([(0,a.MZ)({type:p.A,json:{write:!0}})],h.prototype,"legendOptions",void 0),h=(0,n._)([(0,u.$)("esri.renderers.visualVariables.VisualVariable")],h);const f=h},71859:function(e,t,r){r.d(t,{A:function(){return d}});var n,i=r(53804),o=r(52874),s=r(30905),a=r(23502),l=r(67888),u=(r(13798),r(58941),r(65953)),c=r(81392);let p=n=class extends s.oY{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new n({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,i._)([(0,a.MZ)({type:o.A,json:{type:[l.jz],write:!0}})],p.prototype,"color",void 0),(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],p.prototype,"value",void 0),(0,i._)([(0,c.K)("value")],p.prototype,"writeValue",null),p=n=(0,i._)([(0,u.$)("esri.renderers.visualVariables.support.ColorStop")],p);const d=p},59423:function(e,t,r){r.d(t,{A:function(){return c}});var n,i=r(53804),o=r(30905),s=r(13520),a=r(23502),l=(r(58941),r(40633),r(13798),r(65953));let u=n=class extends o.oY{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new n({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],u.prototype,"label",void 0),(0,i._)([(0,a.MZ)({type:Number,cast:s.cr,json:{write:!0}})],u.prototype,"size",void 0),(0,i._)([(0,a.MZ)({type:Number,json:{write:!0}})],u.prototype,"value",void 0),(0,i._)([(0,a.MZ)({type:Boolean,json:{write:!1}})],u.prototype,"useMinValue",void 0),(0,i._)([(0,a.MZ)({type:Boolean,json:{write:!1}})],u.prototype,"useMaxValue",void 0),u=n=(0,i._)([(0,l.$)("esri.renderers.visualVariables.support.SizeStop")],u);const c=u},96893:function(e,t,r){r.d(t,{A:function(){return u}});var n=r(53804),i=r(75743),o=r(30905),s=r(23502),a=(r(58941),r(40633),r(13798),r(65953));let l=class extends((0,i.O)(o.oY)){constructor(){super(...arguments),this.showLegend=null,this.title=null}};(0,n._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],l.prototype,"showLegend",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],l.prototype,"title",void 0),l=(0,n._)([(0,a.$)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],l);const u=l},32974:function(e,t,r){var n,i;function o(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function s(e){return null!=e&&!isNaN(e)&&isFinite(e)}function a(e){return e.valueExpression?n.Expression:e.field&&"string"==typeof e.field?n.Field:n.Unknown}function l(e,t){const r=t||a(e),o=e.valueUnit||"unknown";return r===n.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}r.d(t,{KZ:function(){return l},Yf:function(){return n},_w:function(){return i},eh:function(){return a},gf:function(){return s},of:function(){return o}}),function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"}(n||(n={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(i||(i={}))},70481:function(e,t,r){r.r(t),r.d(t,{getAllSizes:function(){return x},getColor:function(){return m},getOpacity:function(){return y},getRotationAngle:function(){return g},getSize:function(){return w},getSizeForValue:function(){return M},getSizeFromNumberOrVariable:function(){return b},getSizeRangeAtScale:function(){return S},getVisualVariableValues:function(){return I},viewScaleRE:function(){return f}});var n=r(52874),i=r(59469),o=r(82547),s=r(40633),a=r(85031),l=r(32974);const u=()=>s.A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),c=e=>u().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),p=()=>u().error("Use of arcade expressions requires an arcade context"),d=new i.default,h=Math.PI,f=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function m(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"color"===e.type)):e;if(!i)return;if("esri.renderers.visualVariables.ColorVariable"!==i.declaredClass)return void c("ColorVariable");const o="number"==typeof t,s=o?null:t,a=s?.attributes;let l=o?t:null;const u=i.field,{ipData:d,hasExpression:h}=i.cache;let f=i.cache.compiledFunc;if(!u&&!h){const e=i.stops;return e&&e[0]&&e[0].color}if("number"!=typeof l)if(h){if(null==r?.arcade)return void p();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,n=t.getViewInfo(e),o=t.createExecContext(s,n,r.timeZone);if(!f){const e=t.createSyntaxTree(i.valueExpression);f=t.createFunction(e),i.cache.compiledFunc=f}l=t.executeFunction(f,o)}else a&&(l=a[u]);const m=i.normalizationField,y=null!=a&&null!=m?parseFloat(a[m]):void 0;if(null!=l&&(!m||o||!isNaN(y)&&0!==y)){isNaN(y)||o||(l/=y);const e=A(l,d);if(e){const t=e[0],o=e[1],s=t===o?i.stops[t].color:n.A.blendColors(i.stops[t].color,i.stops[o].color,e[2],null!=r?r.color:void 0);return new n.A(s)}}}function y(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.OpacityVariable"!==n.declaredClass)return void c("OpacityVariable");const i="number"==typeof t,o=i?null:t,s=o?.attributes;let a=i?t:null;const l=n.field,{ipData:u,hasExpression:d}=n.cache;let h=n.cache.compiledFunc;if(!l&&!d){const e=n.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof a)if(d){if(null==r?.arcade)return void p();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,i=t.getViewInfo(e),s=t.createExecContext(o,i,r.timeZone);if(!h){const e=t.createSyntaxTree(n.valueExpression);h=t.createFunction(e),n.cache.compiledFunc=h}a=t.executeFunction(h,s)}else s&&(a=s[l]);const f=n.normalizationField,m=null!=s&&null!=f?parseFloat(s[f]):void 0;if(null!=a&&(!f||i||!isNaN(m)&&0!==m)){isNaN(m)||i||(a/=m);const e=A(a,u);if(e){const t=e[0],r=e[1];if(t===r)return n.stops[t].opacity;{const i=n.stops[t].opacity;return i+(n.stops[r].opacity-i)*e[2]}}}}function g(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.RotationVariable"!==n.declaredClass)return void c("RotationVariable");const i=n.axis||"heading",o="heading"===i&&"arithmetic"===n.rotationType?90:0,s="heading"===i&&"arithmetic"===n.rotationType?-1:1,a="number"==typeof t?null:t,l=a?.attributes,u=n.field,{hasExpression:d}=n.cache;let h=n.cache.compiledFunc,f=0;if(!u&&!d)return f;if(d){if(null==r?.arcade)return void p();const e={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},t=r.arcade.arcadeUtils,i=t.getViewInfo(e),o=t.createExecContext(a,i,r.timeZone);if(!h){const e=t.createSyntaxTree(n.valueExpression);h=t.createFunction(e),n.cache.compiledFunc=h}f=t.executeFunction(h,o)}else l&&(f=l[u]||0);return f="number"!=typeof f||isNaN(f)?null:o+s*f,f}function w(e,t,r){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void c("SizeVariable");const i=M(function(e,t,r){const n="number"==typeof t,i=n?null:t,o=i?.attributes;let s=n?t:null;const{isScaleDriven:a}=e.cache;let u=e.cache.compiledFunc;if(a){const t=null!=r?r.scale:void 0,n=null!=r?r.view:void 0;s=null==t||"3d"===n?function(e){let t=null,r=null;const n=e.stops;return n?(t=n[0].value,r=n[n.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}(e):t}else if(!n)switch(e.inputValueType){case l.Yf.Expression:{if(null==r?.arcade)return void p();const t={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},n=r.arcade.arcadeUtils,o=n.getViewInfo(t),a=n.createExecContext(i,o,r.timeZone);if(!u){const t=n.createSyntaxTree(e.valueExpression);u=n.createFunction(t),e.cache.compiledFunc=u}s=n.executeFunction(u,a);break}case l.Yf.Field:o&&(s=o[e.field]);break;case l.Yf.Unknown:s=null}if(!(0,l.gf)(s))return null;if(n||!e.normalizationField)return s;const c=o?parseFloat(o[e.normalizationField]):null;return(0,l.gf)(c)&&0!==c?s/c:null}(n,t,r),n,t,r,n.cache.ipData);return null==i||isNaN(i)?0:i}function b(e,t,r){return null==e?null:(0,l.of)(e)?w(e,t,r):(0,l.gf)(e)?e:null}function v(e,t,r){return(0,l.gf)(r)&&e>r?r:(0,l.gf)(t)&&e<t?t:e}function M(e,t,r,n,i){switch(t.transformationType){case l._w.Additive:return function(e,t,r,n){return e+((b(t.minSize,r,n)||t.minDataValue)??0)}(e,t,r,n);case l._w.Constant:return function(e,t,r){const n=e.stops;let i=n?.length&&n[0].size;return null==i&&(i=e.minSize),b(i,t,r)}(t,r,n);case l._w.ClampedLinear:return function(e,t,r,n){const i=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),o=b(t.minSize,r,n),s=b(t.maxSize,r,n),a=null!=n?n.shape:void 0;if(e<=t.minDataValue)return o;if(e>=t.maxDataValue)return s;if(null==o||null==s)return null;if("area"===t.scaleBy&&a){const e="circle"===a,t=e?h*(o/2)**2:o*o,r=t+i*((e?h*(s/2)**2:s*s)-t);return e?2*Math.sqrt(r/h):Math.sqrt(r)}return o+i*(s-o)}(e,t,r,n);case l._w.Proportional:return function(e,t,r,n){const i=null!=n?n.shape:void 0,o=e/t.minDataValue,s=b(t.minSize,r,n),a=b(t.maxSize,r,n);let l=null;return l="circle"===i?2*Math.sqrt(o*(s/2)**2):"square"===i||"diamond"===i||"image"===i?Math.sqrt(o*s**2):o*s,v(l,s,a)}(e,t,r,n);case l._w.Stops:return function(e,t,r,n,i){const[o,s,a]=A(e,i);if(o===s)return b(t.stops?.[o].size,r,n);{const e=b(t.stops?.[o].size,r,n);return e+(b(t.stops?.[s].size,r,n)-e)*a}}(e,t,r,n,i);case l._w.RealWorldSize:return function(e,t,r,n){const i=(n?.resolution??1)*a.j[t.valueUnit],o=b(t.minSize,r,n),s=b(t.maxSize,r,n),{valueRepresentation:l}=t;let u=null;return u="area"===l?2*Math.sqrt(e/h)/i:"radius"===l||"distance"===l?2*e/i:e/i,v(u,o,s)}(e,t,r,n);case l._w.Identity:return e;case l._w.Unknown:return null}}function S(e,t,r){const{isScaleDriven:n}=e.cache;if(!(n&&"3d"===r||t))return null;const i={scale:t,view:r};let o=b(e.minSize,d,i),s=b(e.maxSize,d,i);if(null!=o||null!=s){if(o>s){const e=s;s=o,o=e}return{minSize:o,maxSize:s}}}function I(e,t,r){if(!e.visualVariables)return;const n=[],i=[],o=[],s=[],a=[];for(const t of e.visualVariables)switch(t.type){case"color":i.push(t);break;case"opacity":o.push(t);break;case"rotation":a.push(t);break;case"size":s.push(t)}return i.forEach((e=>{const i=m(e,t,r);n.push({variable:e,value:i})})),o.forEach((e=>{const i=y(e,t,r);n.push({variable:e,value:i})})),a.forEach((e=>{const i=g(e,t,r);n.push({variable:e,value:i})})),s.forEach((e=>{const i=w(e,t,r);n.push({variable:e,value:i})})),n.filter((e=>null!=e.value))}function A(e,t){if(!t)return;let r=0,n=t.length-1;return t.some(((t,i)=>e<t?(n=i,!0):(r=i,!1))),[r,n,(e-t[r])/(t[n]-t[r])]}function x(e,t,r){const n=["proportional","proportional","proportional"];for(const i of e){const e=i.useSymbolValue?"symbol-value":w(i,t,r);switch(i.axis){case"width":n[0]=e;break;case"depth":n[1]=e;break;case"height":n[2]=e;break;case"width-and-depth":n[0]=e,n[1]=e;break;case"all":case void 0:case null:n[0]=e,n[1]=e,n[2]=e;break;default:(0,o.Xb)(i.axis)}}return n}},26765:function(e,t,r){r.d(t,{V:function(){return o},X:function(){return i}});var n=r(74697);function i(e){return{geometryType:(0,n.$B)(e[0]),geometries:e.map((e=>e.toJSON()))}}function o(e,t,r){const i=(0,n.xD)(t);return e.map((e=>{const t=i.fromJSON(e);return t.spatialReference=r,t}))}},30164:function(e,t,r){r.d(t,{E9:function(){return f},Tw:function(){return d},X6:function(){return h}});var n=r(93040),i=r(91484),o=r(45532),s=r(57165),a=r(98521),l=r(70850),u=r(39397),c=r(51084);async function p(e,t,r){const p=(0,u.Dl)(e),{rasterFunction:d,sourceJSON:h}=t||{},f=d?JSON.stringify(d.rasterFunctionDefinition||d):null,m=(0,u.lF)({...p.query,renderingRule:f,f:"json"}),y=(0,u.jV)(m,r);e=p.path;const g=h||await(0,n.A)(e,y).then((e=>e.data)),w=g.hasRasterAttributeTable?(0,n.A)(`${e}/rasterAttributeTable`,y):null,b=g.hasColormap?(0,n.A)(`${e}/colormap`,y):null,v=g.hasHistograms?(0,n.A)(`${e}/histograms`,y):null,M=g.currentVersion>=10.3?(0,n.A)(`${e}/keyProperties`,y):null,S=g.hasMultidimensions?(0,n.A)(`${e}/multidimensionalInfo`,y):null,I=await Promise.allSettled([w,b,v,M,S]);let A=null;if(g.minValues&&g.minValues.length===g.bandCount){A=[];for(let e=0;e<g.minValues.length;e++)A.push({min:g.minValues[e],max:g.maxValues[e],avg:g.meanValues[e],stddev:g.stdvValues[e]})}const x=i.default.fromJSON(g.extent),_=Math.ceil(x.width/g.pixelSizeX-.1),C=Math.ceil(x.height/g.pixelSizeY-.1),T=s.A.fromJSON(g.spatialReference||g.extent.spatialReference),R="fulfilled"===I[0].status?I[0].value?.data:null,k=R?.features?.length?c.A.fromJSON(R):null,D="fulfilled"===I[1].status?I[1].value?.data.colormap:null,N=D?.length?D:null,P="fulfilled"===I[2].status?I[2].value?.data.histograms:null,E=P?.[0]?.counts?.length?P:null,L="fulfilled"===I[3].status?I[3].value?.data??{}:{},F="fulfilled"===I[4].status?I[4].value?.data.multidimensionalInfo:null,j=F?.variables?.length?F:null;j&&j.variables.forEach((e=>{e.statistics?.length&&e.statistics.forEach((e=>{e.avg=e.mean,e.stddev=e.standardDeviation}))}));const{defaultVariable:O,serviceDataType:V}=g;O&&O!==L.DefaultVariable&&(L.DefaultVariable=O),V?.includes("esriImageServiceDataTypeVector")&&!V.includes(L.DataType)&&(L.DataType=V.replace("esriImageServiceDataType",""));let Z=g.noDataValue;g.noDataValues?.length&&g.noDataValues.some((e=>e!==Z))&&(Z=g.noDataValues);const z=g.transposeInfo?new l.A({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:"lerc",origin:new o.default({x:g.extent.xmin,y:g.extent.ymax,spatialReference:T}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(_,C))/Math.LN2-8)),transposeInfo:g.transposeInfo}):void 0;return new a.A({width:_,height:C,bandCount:g.bandCount,extent:i.default.fromJSON(g.extent),spatialReference:T,pixelSize:new o.default({x:g.pixelSizeX,y:g.pixelSizeY,spatialReference:T}),pixelType:g.pixelType.toLowerCase(),statistics:A,attributeTable:k,colormap:N,histograms:E,keyProperties:L,noDataValue:Z,multidimensionalInfo:j,storageInfo:z})}function d(e,t,r){return p(e,{sourceJSON:t},r)}function h(e,t,r){return p(e,{rasterFunction:t},r)}function f(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}},12873:function(e,t,r){function n(e){const t={};for(const r in e){if("declaredClass"===r)continue;const i=e[r];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){t[r]=[];for(let e=0;e<i.length;e++)t[r][e]=n(i[e])}else"object"==typeof i?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}r.d(t,{z:function(){return n}})},48066:function(e,t,r){r.d(t,{I:function(){return s}});var n=r(39397),i=r(90066),o=r(7926);async function s(e,t,r){const s=(0,n.Dl)(e),{data:a}=await(0,i.gW)(s,o.A.from(t),r);return a.count}},30067:function(e,t,r){r.d(t,{V:function(){return s}});var n=r(39397),i=r(90066),o=r(7926);async function s(e,t,r){const s=(0,n.Dl)(e),{data:a}=await(0,i.Pk)(s,o.A.from(t),r);return a.objectIds}},94072:function(e,t,r){r.d(t,{e:function(){return l},s:function(){return a}});var n=r(39397),i=r(90066),o=r(51084),s=r(7926);async function a(e,t,r){const n=await l(e,t,r);return o.A.fromJSON(n)}async function l(e,t,r){const o=(0,n.Dl)(e),a={...r},l=s.A.from(t),{data:u}=await(0,i.eW)(o,l,l.sourceSpatialReference,a);return u}},45608:function(e,t,r){r.d(t,{SH:function(){return T},ae:function(){return I},cn:function(){return w}});var n=r(39819),i=r(68225),o=r(76613),s=r(38519);const a=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],u=["upperLeft","lowerLeft"];function c(e){return e>=a.length?null:a[e]}function p(e){return e>=l.length?null:l[e]}function d(e){return e>=u.length?null:u[e]}function h(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function f(e,t,r){const n=e.asUnsafe(),i=t.createPointGeometry(r);for(;n.next();)switch(n.tag()){case 3:{const e=n.getUInt32(),r=n.pos()+e;let o=0;for(;n.pos()<r;)t.addCoordinatePoint(i,n.getSInt64(),o++);break}default:n.skip()}return i}function m(e,t,r){const n=e.asUnsafe(),i=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const e=n.getUInt32(),r=n.pos()+e;let o=0;for(;n.pos()<r;)t.addLength(i,n.getUInt32(),o++);break}case 3:{const e=n.getUInt32(),r=n.pos()+e;let s=0;for(t.allocateCoordinates(i);n.pos()<r;)t.addCoordinate(i,n.getSInt64(),s),s++,s===o&&(s=0);break}default:n.skip()}return i}function y(e){const t=e.asUnsafe(),r=new o.A;let n="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),n=t.pos()+e;for(;t.pos()<n;)r.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),n=t.pos()+e;for(;t.pos()<n;)r.coords.push(t.getSInt64());break}case 1:n=s.z[t.getEnum()];break;default:t.skip()}return{queryGeometry:r,queryGeometryType:n}}function g(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function w(e){const t=e.asUnsafe(),r={type:c(0)};for(;t.next();)switch(t.tag()){case 1:r.name=t.getString();break;case 2:r.type=c(t.getEnum());break;case 3:r.alias=t.getString();break;case 4:r.sqlType=p(t.getEnum());break;case 5:default:t.skip();break;case 6:r.defaultValue=t.getString()}return r}function b(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.name=r.getString();break;case 2:t.isSystemMaintained=r.getBool();break;default:r.skip()}return t}function v(e,t,r,n){const i=t.createFeature(r);let o=0;for(;e.next();)switch(e.tag()){case 1:{const t=n[o++].name;i.attributes[t]=e.processMessage(g);break}case 2:i.geometry=e.processMessageWithArgs(m,t,r);break;case 4:i.centroid=e.processMessageWithArgs(f,t,r);break;default:e.skip()}return i}function M(e){const t=[1,1,1,1],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function S(e){const t=[0,0,0,0],r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t[0]=r.getDouble();break;case 2:t[1]=r.getDouble();break;case 4:t[2]=r.getDouble();break;case 3:t[3]=r.getDouble();break;default:r.skip()}return t}function I(e){const t={originPosition:d(0)},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.originPosition=d(r.getEnum());break;case 2:t.scale=r.processMessage(M);break;case 3:t.translate=r.processMessage(S);break;default:r.skip()}return t}function A(e){const t={},r=e.asUnsafe();for(;r.next();)switch(r.tag()){case 1:t.shapeAreaFieldName=r.getString();break;case 2:t.shapeLengthFieldName=r.getString();break;case 3:t.units=r.getString();break;default:r.skip()}return t}function x(e,t){const r=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:r.wkid=e.getUInt32();break;case 5:r.wkt=e.getString();break;case 2:r.latestWkid=e.getUInt32();break;case 3:r.vcsWkid=e.getUInt32();break;case 4:r.latestVcsWkid=e.getUInt32();break;default:e.skip()}return r}function _(e,t){const r=t.createFeatureResult(),n=e.asUnsafe();r.geometryType=h(t,0);let i=!1;for(;n.next();)switch(n.tag()){case 1:r.objectIdFieldName=n.getString();break;case 3:r.globalIdFieldName=n.getString();break;case 4:r.geohashFieldName=n.getString();break;case 5:r.geometryProperties=n.processMessage(A);break;case 7:r.geometryType=h(t,n.getEnum());break;case 8:r.spatialReference=n.processMessageWithArgs(x,t);break;case 10:r.hasZ=n.getBool();break;case 11:r.hasM=n.getBool();break;case 12:r.transform=n.processMessage(I);break;case 9:r.exceededTransferLimit=n.getBool();break;case 13:t.addField(r,n.processMessage(w));break;case 15:i||(t.prepareFeatures(r),i=!0),t.addFeature(r,n.processMessageWithArgs(v,t,r,r.fields));break;case 2:r.uniqueIdField=n.processMessage(b);break;default:n.skip()}return t.finishFeatureResult(r),r}function C(e,t){const r={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(y);break;case 1:r.featureResult=e.processMessageWithArgs(_,t);break;default:e.skip()}return null!=n&&r.featureResult&&t.addQueryGeometry(r,n),r}function T(e,t){try{const r=2,n=new i.A(new Uint8Array(e),new DataView(e)),o={};for(;n.next();)n.tag()===r?o.queryResult=n.processMessageWithArgs(C,t):n.skip();return o}catch(e){throw new n.A("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e})}}},38519:function(e,t,r){r.d(t,{S:function(){return u},z:function(){return l}});var n=r(62938),i=r(57652),o=r(65215),s=r(72887),a=r(76613);const l=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class u{constructor(e){this._options=e,this.geometryTypes=l,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new s.A}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||(0,i.aI)(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,n.G9)(this._options.sourceSpatialReference)/(0,n.G9)(e.spatialReference);if(1!==t)for(const r of e.features){if(!(0,o.N3)(r))continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new o.Om}createSpatialReference(){return{wkid:0}}createGeometry(){return new a.A}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new a.A}}},55723:function(e,t,r){r.d(t,{m:function(){return i}});var n=r(45608);function i(e,t){const r=(0,n.SH)(e,t),i=r.queryResult.featureResult,o=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const e=i.objectIdFieldName;for(const t of i.features)t.attributes&&(t.objectId=t.attributes[e])}return i&&(i.queryGeometry=o,i.queryGeometryType=s),i}},90066:function(e,t,r){r.d(t,{IJ:function(){return f},Jf:function(){return w},Pk:function(){return y},eW:function(){return h},gW:function(){return g},kS:function(){return m}});var n=r(93040),i=r(90683),o=r(74697),s=r(65298),a=r(57652),l=r(12873),u=r(55723),c=r(45406);const p="Layer does not support extent calculation.";function d(e,t){const r=e.geometry,n=e.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const i=n;let s,l,u;if(null!=r&&(l=r.spatialReference,u=(0,a.YX)(l),i.geometryType=(0,o.$B)(r),i.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}(r,e.compactGeometryEnabled),i.inSR=u),n.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(i.objectIds=n.objectIds.join(",")),n.orderByFields&&(i.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete i.outFields:n.outFields.includes("*")?i.outFields="*":i.outFields=n.outFields.join(","),n.outSR?(i.outSR=(0,a.YX)(n.outSR),s=e.outSpatialReference):r&&(n.returnGeometry||n.returnCentroid)&&(i.outSR=i.inSR,s=l),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(i.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(i.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(i.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=l&&null!=e.quantizationParameters?.extent&&l.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,i.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(i.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(i.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(i.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const e=n.timeExtent,{start:t,end:r}=e;null==t&&null==r||(i.time=t===r?t:`${t??"null"},${r??"null"}`),delete n.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=l&&null!=s&&l.equals(s)&&(i.defaultSR=i.inSR,delete i.inSR,delete i.outSR),i}async function h(e,t,r,n){const i=null!=t.timeExtent&&t.timeExtent.isEmpty?{data:{features:[]}}:await b(e,t,"json",n);return(0,c.q)(t,r,i.data),i}async function f(e,t,r,n){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const i=await m(e,t,n),o=i;return o.data=(0,u.m)(i.data,r),o}function m(e,t,r){return b(e,t,"pbf",r)}function y(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):b(e,t,"json",r,{returnIdsOnly:!0})}function g(e,t,r){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):b(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function w(e,t,r){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const n=await b(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),i=n.data;if(i.hasOwnProperty("extent"))return n;if(i.features)throw new Error(p);if(i.hasOwnProperty("count"))throw new Error(p);return n}async function b(e,t,r,o={},a={}){const u="string"==typeof e?(0,i.An)(e):e,c=t.geometry?[t.geometry]:[],p=await(0,s.el)(c,null,{signal:o.signal}),h=p?.[0];null!=h&&((t=t.clone()).geometry=h);const f=(0,l.z)({...u.query,f:r,...a,...d(t,a)});return(0,n.A)((0,i.fj)(u.path,(m=a,null==t.formatOf3DObjects||m.returnCountOnly||m.returnExtentOnly||m.returnIdsOnly?"query":"query3d")),{...o,responseType:"pbf"===r?"array-buffer":"json",query:{...f,...o.query}});var m}},45406:function(e,t,r){r.d(t,{q:function(){return i}});var n=r(6996);function i(e,t,r){if(!r?.features||!r.hasZ)return;const i=(0,n.N)(r.geometryType,t,e.outSpatialReference);if(null!=i)for(const e of r.features)i(e.geometry)}},30698:function(e,t,r){r.d(t,{A:function(){return h}});var n,i=r(53804),o=r(52874),s=r(21609),a=r(23502),l=r(67888),u=r(74376),c=r(65953),p=r(9035);let d=n=class extends p.A{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new n({fromColor:(0,s.o8)(this.fromColor),toColor:(0,s.o8)(this.toColor),algorithm:this.algorithm})}};(0,i._)([(0,u.e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],d.prototype,"algorithm",void 0),(0,i._)([(0,a.MZ)({type:o.A,json:{type:[l.jz],write:!0}})],d.prototype,"fromColor",void 0),(0,i._)([(0,a.MZ)({type:o.A,json:{type:[l.jz],write:!0}})],d.prototype,"toColor",void 0),(0,i._)([(0,a.MZ)({type:["algorithmic"]})],d.prototype,"type",void 0),d=n=(0,i._)([(0,c.$)("esri.rest.support.AlgorithmicColorRamp")],d);const h=d},74373:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(53804),i=r(73037),o=r(30905),s=r(23502),a=(r(58941),r(40633),r(13798),r(74376)),l=r(65953);const u=new i.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),c=new i.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let p=class extends o.oY{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}};(0,n._)([(0,a.e)({classBreaksDef:"class-breaks-definition"})],p.prototype,"type",void 0),(0,n._)([(0,s.MZ)({json:{write:!0}})],p.prototype,"breakCount",void 0),(0,n._)([(0,s.MZ)({json:{write:!0}})],p.prototype,"classificationField",void 0),(0,n._)([(0,s.MZ)({type:String,json:{read:u.read,write:u.write}})],p.prototype,"classificationMethod",void 0),(0,n._)([(0,s.MZ)({json:{write:!0}})],p.prototype,"normalizationField",void 0),(0,n._)([(0,s.MZ)({json:{read:c.read,write:c.write}})],p.prototype,"normalizationType",void 0),(0,n._)([(0,s.MZ)({value:null,json:{write:!0}})],p.prototype,"standardDeviationInterval",null),(0,n._)([(0,s.MZ)({value:null,json:{write:!0}})],p.prototype,"definedInterval",null),p=(0,n._)([(0,l.$)("esri.rest.support.ClassBreaksDefinition")],p);const d=p},9035:function(e,t,r){r.d(t,{A:function(){return l}});var n=r(53804),i=r(30905),o=r(23502),s=(r(58941),r(40633),r(13798),r(65953));let a=class extends i.oY{constructor(e){super(e),this.type=null}};(0,n._)([(0,o.MZ)({readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,n._)([(0,s.$)("esri.rest.support.ColorRamp")],a);const l=a},51084:function(e,t,r){r.d(t,{A:function(){return b}});var n,i=r(53804),o=r(50917),s=r(59469),a=r(73037),l=r(30905),u=r(21609),c=r(23502),p=(r(58941),r(40633),r(47332)),d=r(65953),h=r(81392),f=r(57165),m=r(74697),y=r(56740);const g=new a.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let w=n=class extends l.oY{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=f.A.fromJSON(t.spatialReference),n=[];for(let t=0;t<e.length;t++){const i=e[t],o=s.default.fromJSON(i),a=i.geometry?.spatialReference;null==o.geometry||a||(o.geometry.spatialReference=r);const l=i.aggregateGeometries,u=o.aggregateGeometries;if(l&&null!=u)for(const e in u){const t=u[e],n=l[e],i=n?.spatialReference;null==t||i||(t.spatialReference=r)}n.push(o)}return n}writeGeometryType(e,t,r,n){if(e)return void g.write(e,t,r,n);const{features:i}=this;if(i)for(const e of i)if(null!=e?.geometry)return void g.write(e.geometry.type,t,r,n)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=(0,m.rS)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=f.A.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const e of r)if(e&&null!=e.geometry&&e.geometry.spatialReference)return void(t.spatialReference=e.geometry.spatialReference.toJSON())}clone(){return new n(this.cloneProperties())}cloneProperties(){return(0,u.o8)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const t=e?.[r];n.geometry=t?.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,i]}=e,o=this.features,s=this._getQuantizationFunction(this.geometryType,(e=>Math.round((e-n)/t)),(e=>Math.round((i-e)/r)));for(let e=0,t=o.length;e<t;e++)s?.(o[e].geometry)||(o.splice(e,1),e--,t--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,i],scale:[o,s]}=r;let a=null,l=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;a=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;l=r=>null==r?r:r*t+e}const u=this._getHydrationFunction(e,(e=>e*o+n),(e=>i-e*s),a,l);for(const{geometry:e}of t)null!=e&&u&&u(e);return this.transform=null,this}_quantizePoints(e,t,r){let n,i;const o=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=r(a[1]);e===n&&s===i||(o.push([e-n,s-i]),n=e,i=s)}else n=t(a[0]),i=r(a[1]),o.push([n,i])}return o.length>0?o:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const n=(0,m.Bi)(e)?e.rings:e.paths,i=[];for(let e=0,o=n.length;e<o;e++){const o=n[e],s=this._quantizePoints(o,t,r);s&&i.push(s)}return i.length>0?((0,m.Bi)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const n=this._quantizePoints(e.points,t,r);return n&&n.length>0?(e.points=n,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,n,i){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?e=>{const o=(0,m.Bi)(e)?e.rings:e.paths;let s,a;for(let e=0,n=o.length;e<n;e++){const n=o[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];e>0?(s+=i[0],a+=i[1]):(s=i[0],a=i[1]),i[0]=t(s),i[1]=r(a)}}if(n&&i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2]),r[3]=i(r[3])}}else if(n)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=n(r[2])}}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];for(let e=0,r=t.length;e<r;e++){const r=t[e];r[2]=i(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const o=e.points;let s,a;for(let e=0,n=o.length;e<n;e++){const n=o[e];e>0?(s+=n[0],a+=n[1]):(s=n[0],a=n[1]),n[0]=t(s),n[1]=r(a)}if(n&&i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=n(t[2]),t[3]=i(t[3])}else if(n)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=n(t[2])}else if(i)for(let e=0,t=o.length;e<t;e++){const t=o[e];t[2]=i(t[2])}}:null}};(0,i._)([(0,c.MZ)({type:String,json:{write:!0}})],w.prototype,"displayFieldName",void 0),(0,i._)([(0,c.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"exceededTransferLimit",void 0),(0,i._)([(0,c.MZ)({type:[s.default],json:{write:!0}})],w.prototype,"features",void 0),(0,i._)([(0,p.w)("features")],w.prototype,"readFeatures",null),(0,i._)([(0,c.MZ)({type:[y.A],json:{write:!0}})],w.prototype,"fields",void 0),(0,i._)([(0,c.MZ)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g.read}}})],w.prototype,"geometryType",void 0),(0,i._)([(0,h.K)("geometryType")],w.prototype,"writeGeometryType",null),(0,i._)([(0,c.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"hasM",void 0),(0,i._)([(0,c.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],w.prototype,"hasZ",void 0),(0,i._)([(0,c.MZ)({types:o.yR,json:{write:!0}})],w.prototype,"queryGeometry",void 0),(0,i._)([(0,p.w)("queryGeometry")],w.prototype,"readQueryGeometry",null),(0,i._)([(0,c.MZ)({type:f.A,json:{write:!0}})],w.prototype,"spatialReference",void 0),(0,i._)([(0,h.K)("spatialReference")],w.prototype,"writeSpatialReference",null),(0,i._)([(0,c.MZ)({json:{write:!0}})],w.prototype,"transform",void 0),w=n=(0,i._)([(0,d.$)("esri.rest.support.FeatureSet")],w),w.prototype.toJSON.isDefaultToJSON=!0;const b=w},78263:function(e,t,r){r.d(t,{A:function(){return g}});var n,i=r(53804),o=r(50917),s=r(30905),a=r(21609),l=r(23502),u=(r(58941),r(40633),r(65953)),c=r(81392),p=r(74697),d=r(84284),h=r(77345),f=r(52038),m=r(45532);let y=n=class extends s.oY{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,r){null!=e&&(t.geometryType=(0,p.$B)(e),t[r]=e.toJSON())}clone(){return new n((0,a.o8)({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};(0,i._)([(0,l.MZ)({types:o.yR,json:{read:p.rS}})],y.prototype,"geometry",void 0),(0,i._)([(0,c.K)("geometry")],y.prototype,"writeGeometry",null),(0,i._)([(0,l.MZ)({type:d.A,json:{write:!0}})],y.prototype,"mosaicRule",void 0),(0,i._)([(0,l.MZ)({type:h.A,json:{write:!0,name:"renderingRule"}})],y.prototype,"rasterFunction",void 0),(0,i._)([(0,l.MZ)({type:m.default,json:{write:!0}})],y.prototype,"pixelSize",void 0),(0,i._)([(0,l.MZ)({json:{write:!0}})],y.prototype,"raster",void 0),(0,i._)([(0,l.MZ)({type:f.A,json:{read:{source:"time"},write:{target:"time"}}})],y.prototype,"timeExtent",void 0),y=n=(0,i._)([(0,u.$)("esri.rest.support.ImageHistogramParameters")],y);const g=y},96245:function(e,t,r){r.d(t,{A:function(){return p}});var n,i=r(53804),o=r(21609),s=r(23502),a=(r(58941),r(40633),r(65953)),l=r(30698),u=r(9035);let c=n=class extends u.A{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new n({colorRamps:(0,o.o8)(this.colorRamps)})}};(0,i._)([(0,s.MZ)({type:[l.A],json:{write:!0}})],c.prototype,"colorRamps",void 0),(0,i._)([(0,s.MZ)({type:["multipart"]})],c.prototype,"type",void 0),c=n=(0,i._)([(0,a.$)("esri.rest.support.MultipartColorRamp")],c);const p=c},85982:function(e,t,r){r.d(t,{g:function(){return s},r:function(){return a}});var n=r(30698),i=r(9035),o=r(96245);const s={key:"type",base:i.A,typeMap:{algorithmic:n.A,multipart:o.A}};function a(e){return e?.type?"algorithmic"===e.type?n.A.fromJSON(e):"multipart"===e.type?o.A.fromJSON(e):null:null}},49241:function(e,t,r){r.d(t,{t:function(){return s}});var n=r(40633);const i=()=>n.A.getLogger("esri.rest.support.generateRendererUtils");function o(e,t){return Number(e.toFixed(t))}function s(e){const{normalizationTotal:t}=e;return{classBreaks:a(e),normalizationTotal:t}}function a(e){const t=e.definition,{classificationMethod:r,normalizationType:n,definedInterval:i}=t,s=t.breakCount??1,a=[];let c=e.values;if(0===c.length)return[];c=c.sort(((e,t)=>e-t));const p=c[0],d=c[c.length-1];if("equal-interval"===r)if(c.length>=s){const e=(d-p)/s;let t=p;for(let r=1;r<s;r++){const i=o(p+r*e,6);a.push({minValue:t,maxValue:i,label:l(t,i,n)}),t=i}a.push({minValue:t,maxValue:d,label:l(t,d,n)})}else c.forEach((e=>{a.push({minValue:e,maxValue:e,label:l(e,e,n)})}));else if("natural-breaks"===r){const t=function(e){const t=[],r=[];let n=Number.MIN_VALUE,i=1,o=-1;for(let s=0;s<e.length;s++){const a=e[s];a===n?(i++,r[o]=i):null!==a&&(t.push(a),n=a,i=1,r.push(i),o++)}return{uniqueValues:t,valueFrequency:r}}(c),r=e.valueFrequency||t.valueFrequency,i=u(t.uniqueValues,r,s);let h=p;for(let e=1;e<s;e++)if(t.uniqueValues.length>e){const r=o(t.uniqueValues[i[e]],6);a.push({minValue:h,maxValue:r,label:l(h,r,n)}),h=r}a.push({minValue:h,maxValue:d,label:l(h,d,n)})}else if("quantile"===r)if(c.length>=s&&p!==d){let e=p,t=Math.ceil(c.length/s),r=0;for(let i=1;i<s;i++){let o=t+r-1;o>c.length&&(o=c.length-1),o<0&&(o=0),a.push({minValue:e,maxValue:c[o],label:l(e,c[o],n)}),e=c[o],r+=t,t=Math.ceil((c.length-r)/(s-i))}a.push({minValue:e,maxValue:d,label:l(e,d,n)})}else{let e=-1;for(let t=0;t<c.length;t++){const r=c[t];r!==e&&(e=r,a.push({minValue:e,maxValue:r,label:l(e,r,n)}),e=r)}}else if("standard-deviation"===r){const e=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r];return t/=e.length,t}(c),t=function(e,t){let r=0;for(let n=0;n<e.length;n++){const i=e[n];r+=(i-t)*(i-t)}return r/=e.length,Math.sqrt(r)}(c,e);if(0===t)a.push({minValue:c[0],maxValue:c[0],label:l(c[0],c[0],n)});else{const r=function(e,t,r,n,i){let o=Math.max(n-e,t-n)/i/r;return o=o>=1?1:o>=.5?.5:.25,o}(p,d,s,e,t)*t;let i=0,u=p;for(let t=s;t>=1;t--){const s=o(e-(t-.5)*r,6);a.push({minValue:u,maxValue:s,label:l(u,s,n)}),u=s,i++}let c=o(e+.5*r,6);a.push({minValue:u,maxValue:c,label:l(u,c,n)}),u=c,i++;for(let t=1;t<=s;t++)c=i===2*s?d:o(e+(t+.5)*r,6),a.push({minValue:u,maxValue:c,label:l(u,c,n)}),u=c,i++}}else if("defined-interval"===r){if(!i)return a;const e=c[0],t=c[c.length-1],r=Math.ceil((t-e)/i);let s=e;for(let t=1;t<r;t++){const r=o(e+t*i,6);a.push({minValue:s,maxValue:r,label:l(s,r,n)}),s=r}a.push({minValue:s,maxValue:t,label:l(s,t,n)})}return a}function l(e,t,r){let n=null;return n=e===t?r&&"percent-of-total"===r?e+"%":e.toString():r&&"percent-of-total"===r?e+"% - "+t+"%":e+" - "+t,n}function u(e,t,r){const n=e.length,i=[];r>n&&(r=n);for(let e=0;e<r;e++)i.push(Math.round(e*n/r-1));i.push(n-1);let o=c(i,e,t,r);return function(e,t,r,n,i,o){let s=0,a=0,l=0,u=0,c=!0;for(let d=0;d<2&&c;d++){0===d&&(c=!1);for(let d=0;d<o-1;d++)for(;r[d+1]+1!==r[d+2];){r[d+1]=r[d+1]+1;const o=p(d,r,n,i);l=o.sbMean,s=o.sbSdcm;const h=p(d+1,r,n,i);if(u=h.sbMean,a=h.sbSdcm,!(s+a<t[d]+t[d+1])){r[d+1]=r[d+1]-1;break}t[d]=s,t[d+1]=a,e[d]=l,e[d+1]=u,c=!0}for(let d=o-1;d>0;d--)for(;r[d]!==r[d-1]+1;){r[d]=r[d]-1;const o=p(d-1,r,n,i);l=o.sbMean,s=o.sbSdcm;const h=p(d,r,n,i);if(u=h.sbMean,a=h.sbSdcm,!(s+a<t[d-1]+t[d])){r[d]=r[d]+1;break}t[d-1]=s,t[d]=a,e[d-1]=l,e[d]=u,c=!0}}return c}(o.mean,o.sdcm,i,e,t,r)&&(o=c(i,e,t,r)),i}function c(e,t,r,n){let i=[],o=[],s=[],a=0;const l=[],u=[];for(let i=0;i<n;i++){const n=p(i,e,t,r);l.push(n.sbMean),u.push(n.sbSdcm),a+=u[i]}let c,d=a,h=!0;for(;h||a<d;){h=!1,i=[];for(let t=0;t<n;t++)i.push(e[t]);for(let r=0;r<n;r++)for(let i=e[r]+1;i<=e[r+1];i++)if(c=t[i],r>0&&i!==e[r+1]&&Math.abs(c-l[r])>Math.abs(c-l[r-1]))e[r]=i;else if(r<n-1&&e[r]!==i-1&&Math.abs(c-l[r])>Math.abs(c-l[r+1])){e[r+1]=i-1;break}d=a,a=0,o=[],s=[];for(let i=0;i<n;i++){o.push(l[i]),s.push(u[i]);const n=p(i,e,t,r);l[i]=n.sbMean,u[i]=n.sbSdcm,a+=u[i]}}if(a>d){for(let t=0;t<n;t++)e[t]=i[t],l[t]=o[t],u[t]=s[t];a=d}return{mean:l,sdcm:u}}function p(e,t,r,n){let o=0,s=0;for(let i=t[e]+1;i<=t[e+1];i++){const e=n[i];o+=r[i]*e,s+=e}s<=0&&i().warn("Exception in Natural Breaks calculation");const a=o/s;let l=0;for(let i=t[e]+1;i<=t[e+1];i++)l+=n[i]*(r[i]-a)**2;return{sbMean:a,sbSdcm:l}}},39397:function(e,t,r){r.d(t,{Dl:function(){return s},jV:function(){return o},lF:function(){return a}}),r(25591),r(7156);var n=r(21609),i=r(90683);function o(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function s(e){return"string"==typeof e?(0,i.An)(e):(0,n.o8)(e)}function a(e,t,r){const n={};for(const i in e){if("declaredClass"===i)continue;const o=e[i];if(null!=o&&"function"!=typeof o)if(Array.isArray(o))n[i]=o.map((e=>a(e)));else if("object"==typeof o)if(o.toJSON){const e=o.toJSON(r?.[i]);n[i]=t?e:JSON.stringify(e)}else n[i]=t?o:JSON.stringify(o);else n[i]=o}return n}r(48893)},18950:function(e,t,r){r.d(t,{DQ:function(){return c},tn:function(){return u}});var n=r(90473),i=r(53743),o=r(57435),s=(r(58439),r(57746),r(44433),r(48212)),a=(r(40401),r(16621),r(12966),r(84847),r(33504)),l=r(49595);function u({displayField:e,editFieldsInfo:t,fields:r,objectIdField:l,title:u},c){if(!r)return null;const f=function(e,t){const r=t?.visibleFieldNames;return function({fields:e,ignoreFieldTypes:t,sortDisabled:r}){const n=e;return t&&(e=e.filter((e=>!t.includes(e.type)))),e===n&&(e=e.slice()),!0!==r&&e.sort(d),e}({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||m,sortDisabled:t?.sortDisabled}).map((t=>new a.A({fieldName:t.name,isEditable:(0,i.R$)(t,e),label:t.alias,format:h(t),visible:p(t,{...e,visibleFieldNames:r})})))}({editFieldsInfo:t,fields:r,objectIdField:l},c);if(!f.length)return null;const y=function(e){const t=(0,i.mB)(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}({titleBase:u,fields:r,displayField:e}),g=[new s.A,new o.A];return new n.A({title:y,content:g,fieldInfos:f})}function c(e){const{title:t,graphic:r}=e??{},{attributes:n,sourceLayer:i}=r??{},o=i&&"displayField"in i?i.displayField:null,s=o?n?.[o]:null,a=r?.getObjectId()?.toString();return t||s||a||""}const p=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,i.Bz)(e,t);function d(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function h(e){switch(e.type){case"small-integer":case"integer":case"single":return new l.A({digitSeparator:!0,places:0});case"double":return new l.A({digitSeparator:!0,places:2});case"string":return(0,i.JL)(e.name)?new l.A({digitSeparator:!0,places:0}):void 0;default:return}}function f(e){if("name"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return"name"===t}const m=["geometry","blob","raster","guid","xml"]},23532:function(e,t,r){r.d(t,{$:function(){return n},u:function(){return i}});const n="20241120",i="02addf7fe96c3305c24f844efa4a31df2498ca51"},38821:function(e,t,r){r.d(t,{D:function(){return o},K:function(){return i}});var n=r(33389);const i={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},o={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:n.fu.Loop,repeatdelay:0,easing:n.Hz.Linear},CIMSymbolAnimationSize:{tosize:10},CIMSymbolAnimationScale:{scalefactor:1},CIMSymbolAnimationColor:{tocolor:[255,255,255,1]},CIMSymbolAnimationTransparency:{totransparency:0},CIMSymbolAnimationRotation:{torotation:0},CIMSymbolAnimationOffset:{offsetx:0,offsety:0}}},33389:function(e,t,r){var n,i,o,s,a,l,u,c,p,d,h,f,m,y,g,w,b,v,M,S,I,A,x,_,C,T,R,k,D,N,P,E,L,F,j,O,V,Z,z,U,B,G,H,J,q,W,$,K,Y,Q,X,ee,te,re,ne,ie,oe,se,ae,le,ue,ce;r.d(t,{$2:function(){return a},C1:function(){return o},Hz:function(){return f},JO:function(){return i},M1:function(){return x},O$:function(){return se},Q1:function(){return $},TZ:function(){return b},WE:function(){return D},Y:function(){return u},YI:function(){return Y},bj:function(){return c},e_:function(){return W},f0:function(){return oe},fu:function(){return h},g7:function(){return p},ip:function(){return K},mU:function(){return N},oF:function(){return I},uQ:function(){return A},uT:function(){return V},vG:function(){return le},wd:function(){return B},xR:function(){return n},xn:function(){return v},xw:function(){return T},yS:function(){return Z}}),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(o||(o={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(s||(s={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(a||(a={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(l||(l={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(u||(u={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(c||(c={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(p||(p={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(d||(d={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(h||(h={})),function(e){e.Linear="Linear",e.EaseIn="EaseIn",e.EaseOut="EaseOut",e.EaseInOut="EaseInOut"}(f||(f={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(m||(m={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(y||(y={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(w||(w={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(b||(b={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(v||(v={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(M||(M={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(S||(S={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(I||(I={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees",e.TipWithPerpendicularAndTicks="TipWithPerpendicularAndTicks",e.ConcentricCircles="ConcentricCircles",e.DoubleJogArrow="DoubleJogArrow",e.LinkedChevrons="LinkedChevrons",e.SegmentThenHalfCircle="SegmentThenHalfCircle",e.LineWithStraightTicks="LineWithStraightTicks",e.DoubleCurve="DoubleCurve",e.ParallelWithTicksByWidth="ParallelWithTicksByWidth",e.EnclosingRoundedRectangle="EnclosingRoundedRectangle"}(A||(A={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(x||(x={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(_||(_={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(C||(C={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(T||(T={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(R||(R={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(k||(k={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(D||(D={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(N||(N={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(P||(P={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(E||(E={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(L||(L={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(F||(F={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(j||(j={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(O||(O={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(V||(V={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(Z||(Z={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(z||(z={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(U||(U={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(B||(B={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(G||(G={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(H||(H={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(J||(J={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(q||(q={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(W||(W={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}($||($={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(K||(K={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(Y||(Y={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(Q||(Q={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(X||(X={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(ee||(ee={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(te||(te={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(re||(re={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(ne||(ne={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ie||(ie={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(oe||(oe={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(se||(se={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(ae||(ae={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(le||(le={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ue||(ue={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(ce||(ce={}))},7590:function(e,t,r){r.d(t,{$w:function(){return g},Bu:function(){return k},DW:function(){return _},FH:function(){return Z},FM:function(){return u},G9:function(){return o},GV:function(){return b},Go:function(){return c},K3:function(){return V},Kn:function(){return A},MM:function(){return h},MO:function(){return B},Nl:function(){return D},Ny:function(){return v},O2:function(){return N},UE:function(){return P},YC:function(){return U},YF:function(){return L},ZO:function(){return j},_1:function(){return T},_H:function(){return S},_W:function(){return w},_d:function(){return x},bs:function(){return z},dI:function(){return $},e6:function(){return p},gQ:function(){return l},iA:function(){return O},jn:function(){return m},lW:function(){return d},mA:function(){return f},n5:function(){return E},pM:function(){return C},pV:function(){return I},pk:function(){return G},rB:function(){return H},s4:function(){return i},xo:function(){return R},yH:function(){return M},zb:function(){return F},zr:function(){return y}});var n=r(38821);function i(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function o(e){return[e.r,e.g,e.b,e.a]}const s=" /-,\n";function a(e){let t=e.length;for(;t--;)if(!s.includes(e.charAt(t)))return!1;return!0}function l(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.slice(n,i);r.push([t,null,a(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.slice(n,i)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length){const t=e.slice(n);r.push([t,null,a(t)])}return r}function u(e,t,r,n){let i="",o=null;for(const n of t){const[t,s,a]=n;if(t)a?o=t:(o&&(i+=o,o=null),i+=t);else{let t=s;null!=r&&(t=B(s,r));const n=e.attributes[t];n&&(o&&(i+=o,o=null),i+=n)}}return function(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}(i,n)}function c(e,t,r,n,i,o,s=!0){const a=t/i,l=r/o,u=Math.ceil(a/2),c=Math.ceil(l/2);for(let r=0;r<o;r++)for(let p=0;p<i;p++){const d=4*(p+(s?o-r-1:r)*i);let h=0,f=0,m=0,y=0,g=0,w=0,b=0;const v=(r+.5)*l;for(let n=Math.floor(r*l);n<(r+1)*l;n++){const r=Math.abs(v-(n+.5))/c,i=(p+.5)*a,o=r*r;for(let r=Math.floor(p*a);r<(p+1)*a;r++){let s=Math.abs(i-(r+.5))/u;const a=Math.sqrt(o+s*s);a>=-1&&a<=1&&(h=2*a*a*a-3*a*a+1,h>0&&(s=4*(r+n*t),b+=h*e[s+3],m+=h,e[s+3]<255&&(h=h*e[s+3]/250),y+=h*e[s],g+=h*e[s+1],w+=h*e[s+2],f+=h))}}n[d]=y/f,n[d+1]=g/f,n[d+2]=w/f,n[d+3]=b/m}}function p(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function d(e){return e.data?.symbol??null}function h(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function m(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function y(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const g=(e,t=0)=>null==e||isNaN(e)?t:e,w=(e,t)=>null!=e?e:t,b=(e,t)=>e??t,v=e=>e.tintColor?p(e.tintColor):[255,255,255,1],M=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function S(){return r.e(4696).then(r.bind(r,28356))}function I(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function A(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function x(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function _(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function C(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=C(t);if(null!=e)return e}break;case"CIMTextSymbol":return C(e.symbol);case"CIMSolidFill":return e.color}return null}function T(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=T(e);if(null!=t)return t}break}case"CIMTextSymbol":return T(e.symbol);case"CIMSolidStroke":return e.color}}function R(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=R(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return R(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function k(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function D(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function N(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const P=e=>e.includes("data:image/svg+xml");function E(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function L(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function F(e,t,r,n,i,o,s=!0){const{infos:a}=o;let l=1,u=0,c=0,p=0,d=1;for(const{absoluteAnchorPoint:e,offsetX:t,offsetY:r,rotation:n,size:i,frameHeight:o,rotateClockWise:h,scaleSymbolsProportionally:f}of a)d=e?1:l,c=q(t,r,u,d,c),p=J(t,r,u,d,p),o&&(f||s)&&(l*=i/o),u=W(n,h,u);const h=q(n,i,u,d,c),f=J(n,i,u,d,p);return{size:e*l,rotation:W(t,r,u),offsetX:h,offsetY:f}}function j(e){if(null==e)return!1;if(Array.isArray(e))return e.every((e=>j(e)));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function O(e,t){if("color"===t||"outlinecolor"===t||"backgroundcolor"===t||"borderlinecolor"===t||"tintcolor"===t)return[...n.K[t]];const r=n.D[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function V(e){return"string"==typeof e?function(e){return e.split(" ").map((e=>Number(e)))}(e):e}function Z(e){return e?.dashTemplate&&(e.dashTemplate=V(e.dashTemplate)),e}function z(e){if(null==e)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const e of t)if("CIMVectorMarker"===e.type)return z(e)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const e of t)if(e.symbol)return z(e.symbol)}}return"Normal"}function U(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=r.size??n.D.CIMVectorMarker.size;e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&y(r.markerPlacement)){const e=r.size??n.D.CIMVectorMarker.size;e>t&&(t=e)}break;case"CIMPictureFill":{const e=r.height;null!=e&&e>t&&(t=e)}}return t}}}function B(e,t){if(null!==t){const r=t.get(e);return r?r.name:e}return e}function G(e){return e.map((e=>({...e,propertyName:L(e.propertyName)})))}function H(e){const t={};for(const r in e){const n=e[r];t[L(r)]=n}return t}function J(e,t,r,n,i){const o=r*Math.PI/180;if(o){const r=Math.cos(o);return(Math.sin(o)*e+r*t)*n+i}return t*n+i}function q(e,t,r,n,i){const o=r*Math.PI/180;return o?(Math.cos(o)*e-Math.sin(o)*t)*n+i:e*n+i}function W(e,t,r){return t?r-e:r+e}function $(e,t,r){const n="Color"===r||"TintColor"===r||"ToColor"===r,i="Rotation"===r||"Angle"===r||"ToRotation"===r;let o=t[L(r)];if(null!=o&&(n?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:i&&(o*=Math.PI/180)),null==o&&(o=O(t.type,r.toLowerCase()),null!=o&&(n?o=[o[0]/255,o[1]/255,o[2]/255,o[3]]:i&&(o*=Math.PI/180))),null!=t.primitiveName){const s=e[t.primitiveName];if(null!=s){const e=s[r];null==e||("string"==typeof e||"number"==typeof e||Array.isArray(e)?(o=e,null!=o&&(n?o=[o[0]/255,o[1]/255,o[2]/255,o[3]/255]:i&&(o*=Math.PI/180))):(o={valueExpressionInfo:e,defaultValue:o},null!=o&&(n?o={type:"Process",op:"ArcadeColor",value:o}:i&&(o={type:"Process",op:"Divide",left:o,right:180/Math.PI}))))}}if(null==o)throw new Error(`Failed to derive a value or an expression for "${r}".`);return o}},77927:function(e,t,r){r.d(t,{Fe:function(){return p},Km:function(){return o},Nk:function(){return l}});var n=r(52874),i=r(7590);function o(e,t,r,n){if(e)if("CIMTextSymbol"!==e.type){if(r&&e.effects)for(const r of e.effects)a(r,t);if(e.symbolLayers)for(const r of e.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":s(r,t,n);break;case"CIMPictureStroke":case"CIMSolidStroke":!n?.preserveOutlineWidth&&r.width&&(r.width*=t);break;case"CIMPictureFill":r.height&&(r.height*=t),r.offsetX&&(r.offsetX*=t),r.offsetY&&(r.offsetY*=t);break;case"CIMHatchFill":o(r.lineSymbol,t,!0,{...n,preserveOutlineWidth:!1}),r.offsetX&&(r.offsetX*=t),r.offsetY&&(r.offsetY*=t),r.separation&&(r.separation*=t)}}else null!=e.height&&(e.height*=t)}function s(e,t,r){if(e&&(e.markerPlacement&&function(e,t){switch((0,i.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map((e=>e*t));e.placementTemplate=r}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const r=e.placementTemplate.map((e=>e*t));e.placementTemplate=r}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const n of e.markerGraphics)e.scaleSymbolsProportionally||o(n.symbol,t,!0,r)}function a(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const r=e.dashTemplate.map((e=>e*t));e.dashTemplate=r}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return u((0,i.lW)(e),t),t.length?new n.A((0,i.e6)(t[0])):null}function u(e,t){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const n="CIMPolygonSymbol"===e.type;if(r?.symbolLayers)for(const e of r.symbolLayers)if(!(e.colorLocked||n&&((0,i.mA)(e)||(0,i.MM)(e)&&e.markerPlacement&&(0,i.zr)(e.markerPlacement))))switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor&&c(t,e.tintColor);break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":c(t,e.color);break;case"CIMHatchFill":u(e.lineSymbol,t)}}function c(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}function p(e,t,r){t instanceof n.A||(t=new n.A(t));const o=(0,i.lW)(e);o&&d(o,t,r)}function d(e,t,r){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const o="CIMPolygonSymbol"===n?.type;if(n?.symbolLayers)for(const e of n.symbolLayers){if(e.colorLocked)continue;if(o)if(r){const{layersToColor:t}=r;if(((0,i.mA)(e)||(0,i.MM)(e)&&e.markerPlacement&&(0,i.zr)(e.markerPlacement))&&"fill"===t||(0,i.jn)(e)&&"outline"===t)continue}else if((0,i.mA)(e)||(0,i.MM)(e)&&e.markerPlacement&&(0,i.zr)(e.markerPlacement))continue;const n=t.toArray();switch(e.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":e.tintColor=n;break;case"CIMVectorMarker":e.markerGraphics?.forEach((e=>{d(e.symbol,t,r)}));break;case"CIMSolidStroke":case"CIMSolidFill":e.color=n;break;case"CIMHatchFill":d(e.lineSymbol,t,r)}}}},74661:function(e,t,r){r.d(t,{A7:function(){return u},Cx:function(){return c},Hk:function(){return p},JJ:function(){return m},SF:function(){return d},UK:function(){return l},jM:function(){return h},x3:function(){return f}}),r(58941);var n=r(8740),i=r(22198),o=r(90363),s=r(90972),a=r(6259);const l=o.A.fromJSON(a.Cb),u=i.A.fromJSON(a.yM),c=n.A.fromJSON(a.WR),p=s.A.fromJSON(a.JZ);function d(e){if(null==e)return null;switch(e.type){case"mesh":return null;case"point":case"multipoint":return l;case"polyline":return u;case"polygon":case"extent":return c}return null}const h=o.A.fromJSON(a.nC),f=i.A.fromJSON(a.HW),m=n.A.fromJSON(a.b6)},40990:function(e,t,r){r.d(t,{af:function(){return v},al:function(){return b},dX:function(){return M}});var n=r(52874),i=(r(10748),r(78879)),o=(r(58941),r(13520)),s=r(22762),a=r(56150),l=r(97025),u=r(78018),c=r(15186),p=r(10052),d=r(74661),h=r(6259),f=r(77529);const m=u.A.fromSimpleMarkerSymbol(d.UK),y=a.A.fromSimpleLineSymbol(d.A7),g=c.A.fromSimpleFillSymbol(d.Cx),w=new l.A({symbolLayers:new i.A([new s.A({material:{color:h.fT},edges:new p.A({size:(0,o.PN)(1),color:new n.A(h.JR)})})])}),b=new a.A({symbolLayers:new i.A([new f.A({material:{color:new n.A([0,0,0])},size:(0,o.PN)(1)})])}),v=new c.A({symbolLayers:new i.A([new s.A({outline:{color:new n.A([0,0,0]),size:(0,o.PN)(1)}})])});function M(e){if(null==e)return null;switch(e.type){case"mesh":return w;case"point":case"multipoint":return m;case"polyline":return y;case"polygon":case"extent":return g}return null}},6259:function(e,t,r){r.d(t,{Cb:function(){return o},HW:function(){return c},JR:function(){return i},JZ:function(){return l},WR:function(){return a},b6:function(){return p},fT:function(){return n},nC:function(){return u},yM:function(){return s}});const n=[252,146,31,255],i=[153,153,153,255],o={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},u={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},31827:function(e,t,r){r.d(t,{$4:function(){return b},O0:function(){return v},O1:function(){return M},Sw:function(){return S},eH:function(){return g},rc:function(){return w}});var n=r(53216),i=r(52874),o=r(93040),s=r(99680),a=r(13520),l=r(77927);const u="picture-fill",c="simple-fill",p="simple-line",d="simple-marker",h="text",f="cim",m=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),y=new s.q(1e3);function g(e){const t=e.style;let r=null;if(e)switch(e.type){case d:"cross"!==t&&"x"!==t&&(r=e.color);break;case c:t&&"solid"!==t?"none"!==t&&(r={type:"pattern",x:0,y:0,src:(0,n.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5}):r=e.color;break;case u:r={type:"pattern",src:e.url,width:(0,a.Lz)(e.width)*e.xscale,height:(0,a.Lz)(e.height)*e.yscale,x:(0,a.Lz)(e.xoffset),y:(0,a.Lz)(e.yoffset)};break;case h:r=e.color;break;case f:r=(0,l.Nk)(e)}return r}function w(e,t){const r=e+"-"+t;return void 0!==y.get(r)?Promise.resolve(y.get(r)):(0,o.A)(e,{responseType:"image"}).then((e=>{const n=e.data,i=n.naturalWidth,o=n.naturalHeight,s=document.createElement("canvas");s.width=i,s.height=o;const a=s.getContext("2d");a.fillStyle=t,a.fillRect(0,0,i,o),a.globalCompositeOperation="destination-in",a.drawImage(n,0,0);const l=s.toDataURL();return y.put(r,l),l}))}function b(e){if(!e)return null;let t=null;switch(e.type){case c:case u:case d:t=b(e.outline);break;case p:{const r=(0,a.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==r&&(t={color:e.color,style:M(e.style),width:r,cap:e.cap,join:"miter"===e.join?(0,a.Lz)(e.miterLimit):e.join},t.dashArray=v(t).join(",")||"none");break}default:t=null}return t}function v(e){if(!e?.style)return[];const{dashArray:t,style:r,width:n}=e;if("string"==typeof t&&"none"!==t)return t.split(",").map((e=>Number(e)));const i=n??0,o=m.has(r)?m.get(r).map((e=>e*i)):[];if("butt"!==e.cap)for(const[e,t]of o.entries())o[e]=e%2==1?t+i:Math.max(t-i,1);return o}const M=(()=>{const e={};return t=>{if(e[t])return e[t];const r=t.replaceAll("-","");return e[t]=r,r}})(),S=new i.A([128,128,128])},8404:function(e,t,r){r.d(t,{M9:function(){return u},oO:function(){return c},rS:function(){return h}});var n=r(10748),i=r(39819),o=r(11432),s=r(97992),a=r(11299),l=r(36e3);function u(e,t,r,n){const i=d(e,{},{context:n,isLabelSymbol:!1});null!=i&&(t[r]=i)}function c(e,t,r,n){const i=d(e,{},{context:n,isLabelSymbol:!0});null!=i&&(t[r]=i)}function p(e){return e instanceof s.A||e instanceof l.A}function d(e,t,r){if(null==e)return null;const{context:n,isLabelSymbol:l}=r,u=n?.origin,c=n?.messages;if("web-scene"===u&&!p(e)){const r=(0,a.t)(e,{retainCIM:!0,hasLabelingContext:l});return null!=r.symbol?r.symbol.write(t,n):(c?.push(new i.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:r.error})),null)}return(0,o.TU)(n?.layer)&&function(e){return e instanceof s.A&&("polygon-3d"===e.type||"line-3d"===e.type)}(e)?(c?.push(new i.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${n?.layer?.declaredClass}'.`,{symbol:e,context:n})),null):("web-map"===u||"portal-item"===u&&!(0,o.TU)(n?.layer))&&p(e)?(c?.push(new i.A("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(t,n)}function h(e,t){return(0,n.Bu)(e,null,t)}},58916:function(e,t,r){r.d(t,{jg:function(){return g},cF:function(){return p},bo:function(){return d},yA:function(){return f},o5:function(){return h}});var n=r(93040),i=r(39819),o=r(58941),s=r(60539),a=r(90683),l=r(51432),u=r(26544);const c=new Map;function p(e,t,r){return null!=e?.styleUrl?async function(e,t){try{return{data:(await f(e,t)).data,baseUrl:(0,a.nM)(e),styleUrl:e}}catch(e){return(0,s.QP)(e),null}}(e.styleUrl,r):null!=e?.styleName?function(e,t,r){const n=null!=t.portal?t.portal:l.A.getDefault();let o;const s=`${n.url} - ${n.user?.username} - ${e}`,a=c.get(s);if(a)return a;const p=function(e,t,r){return t.load(r).then((()=>{const n=new u.A({disableExtraQuery:!0,query:`owner:${m} AND type:${y} AND typekeywords:"${e}"`});return t.queryItems(n,r)})).then((({results:t})=>{let n=null;const o=e.toLowerCase();if(t&&Array.isArray(t))for(const e of t){const t=e.typeKeywords?.some((e=>e.toLowerCase()===o));if(t&&e.type===y&&e.owner===m){n=e;break}}if(!n)throw new i.A("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)}))}(e,n,r).then((e=>(o=e,e.fetchData()))).then((t=>({data:t,baseUrl:o.itemUrl??"",styleName:e})));return c.set(s,p),p}(e.styleName,t,r):Promise.reject(new i.A("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function d(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function h(e,t,r=["gltf"]){if("cimRef"===t)return encodeURI(e.cimRef);if(e.formatInfos&&!(0,o.A)("enable-feature:force-wosr"))for(const t of r){const r=e.formatInfos.find((e=>e.type===t));if(r)return r.href}return encodeURI(e.webRef)}function f(e,t){const r={responseType:"json",query:{f:"json"},...t};return(0,n.A)((0,a.S8)(e),r)}const m="esri_en",y="Style",g="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},11299:function(e,t,r){r.d(t,{c:function(){return w},t:function(){return b}});var n=r(10748),i=r(39819),o=r(40990),s=r(36e3),a=r(78018),l=r(22198),u=r(56150),c=r(90363),p=r(24411),d=r(8740),h=r(97025),f=r(15186),m=r(90972),y=r(56922);const g="#useCIMFallbackSymbology()",w={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function b(e,t=w){if(!e)return{symbol:null};const{retainId:r=w.retainId,ignoreDrivers:b=w.ignoreDrivers,hasLabelingContext:v=w.hasLabelingContext,retainCIM:M=w.retainCIM,cimFallbackEnabled:S=w.cimFallbackEnabled}=t;let I=null;if((0,n.wk)(e)||e instanceof s.A)I=e.clone();else if("cim"===e.type){const r=e.data?.symbol?.type;switch(r){case"CIMPointSymbol":I=M?e.clone():a.A.fromCIMSymbol(e);break;case"CIMLineSymbol":S&&(I=o.al.clone(),t?.logWarning?.(g,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":S&&(I=o.af.clone(),t?.logWarning?.(g,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!I)return{error:new i.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${r||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof l.A)I=u.A.fromSimpleLineSymbol(e);else if(e instanceof c.A)I=a.A.fromSimpleMarkerSymbol(e);else if(e instanceof p.A)I=a.A.fromPictureMarkerSymbol(e);else if(e instanceof d.A)I=t.geometryType&&"mesh"===t.geometryType?h.A.fromSimpleFillSymbol(e):f.A.fromSimpleFillSymbol(e);else{if(!(e instanceof m.A))return{error:new i.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};I=v?y.A.fromTextSymbol(e):a.A.fromTextSymbol(e)}return r&&I&&"cim"!==I.type&&(I.id=e.id),b&&(0,n.wk)(I)&&I.symbolLayers.forEach((e=>e.ignoreDrivers=!0)),{symbol:I}}},89814:function(e,t,r){r.d(t,{$d:function(){return f},GG:function(){return I},N7:function(){return m},Sx:function(){return y},UQ:function(){return S},di:function(){return A},dt:function(){return w},f3:function(){return x},k_:function(){return h},yG:function(){return _}});var n=r(52874),i=r(10748),o=r(77472),s=(r(58941),r(13520)),a=r(32501),l=r(60318),u=r(77927),c=r(31827),p=r(13109);const d=new n.A("white");function h(e){if(!e)return 0;if((0,i.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,s.PN)((0,c.$4)(e)?.width)}function f(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function m(e){return e.resource?.href??""}function y(e,t){if(!e)return null;let r=null;return(0,i.wk)(e)?r=function(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(r="water"===e.type?e.color:e.material?e.material.color:null)})),r?new n.A(r):null}(e):(0,i.$y)(e)&&(r="cim"===e.type?(0,u.Nk)(e):e.color?new n.A(e.color):null),r?g(r,t):null}function g(e,t){if(null==t||null==e)return e;const r=e.toRgba();return r[3]=r[3]*t,new n.A(r)}function w(e,t,r){var o,s,a;e&&(t||null!=r)&&(t&&(t=new n.A(t)),(0,i.wk)(e)?function(e,t,r){const n=e.symbolLayers;if(!n)return;const i=e=>g(t=t??e??(null!=r?d:null),r);n.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=i(e.color);else{const t=null!=e.material?e.material.color:null,n=i(t);null==e.material?e.material=new p.N({color:n}):e.material.color=n,null!=r&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,r))}}))}(e,t,r):(0,i.$y)(e)&&(o=e,a=r,(s=(s=t)??o.color)&&(o.color=g(s,a)),null!=a&&"outline"in o&&o.outline?.color&&(o.outline.color=g(o.outline.color,a))))}function b(e){for(const t of e)if("number"==typeof t)return t;return null}function v(e,t,r){for(let n=0;n<3;n++){const i=e[n];switch(i){case"symbol-value":{const e=r[n];return null!=e?e/t[n]:1}case"proportional":break;default:if(i&&t[n])return i/t[n]}}return 1}function M(e,t,r,n){switch(e){case"proportional":return r*n;case"symbol-value":return null!=t?t:r;default:return e}}async function S(e,t){if(e&&t)return(0,i.wk)(e)?async function(e,t){const n=e.symbolLayers;n&&await(0,o.jJ)(n,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const r=b(t);null!=r&&(e.size=r)}(e,t);break;case"path":!function(e,t){const r=v(t,a.Un,[e.width,void 0,e.height]);e.width=M(t[0],e.width,1,r),e.height=M(t[2],e.height,1,r)}(e,t);break;case"object":await async function(e,t){const{resourceSize:n,symbolSize:i}=await async function(e){const{computeObjectLayerResourceSize:t}=await r.e(7269).then(r.bind(r,9141)),n=await t(e,10),{width:i,height:o,depth:s}=e,a=[i,s,o];let l=1;for(let e=0;e<3;e++){const t=a[e];if(null!=t){l=t/n[e];break}}for(let e=0;e<3;e++)null==a[e]&&(a[e]=n[e]*l);return{resourceSize:n,symbolSize:a}}(e),o=v(t,n,i);e.width=M(t[0],i[0],n[0],o),e.depth=M(t[1],i[1],n[1],o),e.height=M(t[2],i[2],n[2],o)}(e,t)}}(e,t)))}(e,t):void((0,i.$y)(e)&&function(e,t){const r=b(t);if(null!=r)switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=r,e.height=r*t):(e.width=r*t,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}(e,t))}function I(e,t,r){if(e&&null!=t)if((0,i.wk)(e)){const n=e.symbolLayers;n&&n.forEach((e=>{if("object"===e.type)switch(r){case"tilt":e.tilt=(e.tilt??0)+t;break;case"roll":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}"icon"===e.type&&(e.angle+=t)}))}else(0,i.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle+=t))}function A(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,l.zu)(t)}function x(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}async function _(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}},92777:function(e,t,r){r.d(t,{A:function(){return P}});var n=r(53804),i=r(30905),o=r(21609),s=r(23502),a=r(77560),l=r(47332),u=r(65953),c=r(81392);let p=class extends i.oY{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,n._)([(0,s.MZ)()],p.prototype,"type",void 0),p=(0,n._)([(0,u.$)("esri.tables.elements.AttributeTableElement")],p);const d=p;var h,f=r(67888);r(58941),r(40633),r(13798);let m=h=class extends d{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new h({description:this.description,displayType:this.displayType,label:this.label})}};(0,n._)([(0,s.MZ)({type:["auto"],json:{write:!0}})],m.prototype,"displayType",void 0),(0,n._)([(0,s.MZ)({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0),m=h=(0,n._)([(0,u.$)("esri.tables.elements.AttributeTableAttachmentElement")],m);const y=m;var g;let w=g=class extends d{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new g({description:this.description,fieldName:this.fieldName,label:this.label})}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],w.prototype,"fieldName",void 0),(0,n._)([(0,s.MZ)({type:String,json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=g=(0,n._)([(0,u.$)("esri.tables.elements.AttributeTableFieldElement")],w);const b=w;var v;let M=v=class extends d{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new v({description:this.description,label:this.label,relationshipId:this.relationshipId})}};(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],M.prototype,"relationshipId",void 0),(0,n._)([(0,s.MZ)({type:["relationship"],json:{read:!1,write:!0}})],M.prototype,"type",void 0),M=v=(0,n._)([(0,u.$)("esri.tables.elements.AttributeTableRelationshipElement")],M);const S=M;function I(e){return{typesWithGroup:{base:d,key:"type",typeMap:{attachment:y,field:b,group:e,relationship:S}},typesWithoutGroup:{base:d,key:"type",typeMap:{attachment:y,field:b,relationship:S}}}}function A(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>n[e.type])).map((e=>n[e.type].fromJSON(e)))}function x(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>n[e.type])).map((e=>e.toJSON()))}function _(e,t,r=!0){return e?e.map((e=>(0,f.aq)(r?t.typesWithGroup:t.typesWithoutGroup,e))):null}var C;let T=C=class extends d{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return _(e,R,!1)}readElements(e,t){return A(t.attributeTableElements,R,!1)}writeElements(e,t){t.attributeTableElements=x(e,R,!1)}clone(){return new C({description:this.description,elements:(0,o.o8)(this.elements),label:this.label})}};(0,n._)([(0,s.MZ)({json:{write:!0}})],T.prototype,"elements",void 0),(0,n._)([(0,a.w)("elements")],T.prototype,"castElements",null),(0,n._)([(0,l.w)("elements",["attributeTableElements"])],T.prototype,"readElements",null),(0,n._)([(0,c.K)("elements")],T.prototype,"writeElements",null),(0,n._)([(0,s.MZ)({type:String,json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=C=(0,n._)([(0,u.$)("esri.tables.elements.AttributeTableGroupElement")],T);const R=I(T);var k;const D=I(T);let N=k=class extends i.oY{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return _(e,D)}readElements(e,t){return A(t.attributeTableElements,D)}writeElements(e,t){t.attributeTableElements=x(e,D)}clone(){return new k({elements:(0,o.o8)(this.elements),orderByFields:this.orderByFields})}};(0,n._)([(0,s.MZ)({json:{write:!0}})],N.prototype,"elements",void 0),(0,n._)([(0,a.w)("elements")],N.prototype,"castElements",null),(0,n._)([(0,l.w)("elements",["attributeTableElements"])],N.prototype,"readElements",null),(0,n._)([(0,c.K)("elements")],N.prototype,"writeElements",null),(0,n._)([(0,s.MZ)({type:[Object],json:{write:!0}})],N.prototype,"orderByFields",void 0),N=k=(0,n._)([(0,u.$)("esri.tables.AttributeTableTemplate")],N);const P=N},92427:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(53804),i=r(75743),o=r(30905),s=r(45139),a=r(23502),l=(r(58941),r(40633),r(13798),r(74376)),u=r(65953),c=r(35060);let p=class extends((0,i.O)(o.oY)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,s.t)(this.value,this.unit,"milliseconds")}};(0,n._)([(0,l.e)(c.j,{nonNullable:!0})],p.prototype,"unit",void 0),(0,n._)([(0,a.MZ)({type:Number,json:{write:!0},nonNullable:!0})],p.prototype,"value",void 0),p=(0,n._)([(0,u.$)("esri.time.TimeInterval")],p);const d=p},20106:function(e,t,r){r.d(t,{CW:function(){return d},pH:function(){return y}}),r(50917);var n=r(58941),i=r(40633),o=r(15774),s=r(60539),a=r(13798),l=r(57652),u=r(91484);const c=()=>i.A.getLogger("esri.views.2d.engine.flow.dataUtils"),p=10;async function d(e,t,r,i){const o=performance.now(),l=function(e,t){const r=function(e,t,r,n){if(0===n)return e;const i=Math.round(3*n),o=new Array(2*i+1);let s=0;for(let e=-i;e<=i;e++){const t=Math.exp(-e*e/(n*n));o[e+i]=t,s+=t}for(let e=-i;e<=i;e++)o[e+i]/=s;const a=new Float32Array(e.length);for(let n=0;n<r;n++)for(let r=0;r<t;r++){let s=0,l=0;for(let a=-i;a<=i;a++){if(r+a<0||r+a>=t)continue;const u=o[a+i];s+=u*e[2*(n*t+(r+a))],l+=u*e[2*(n*t+(r+a))+1]}a[2*(n*t+r)]=s,a[2*(n*t+r)+1]=l}const l=new Float32Array(e.length);for(let e=0;e<t;e++)for(let n=0;n<r;n++){let s=0,u=0;for(let l=-i;l<=i;l++){if(n+l<0||n+l>=r)continue;const c=o[l+i];s+=c*a[2*((n+l)*t+e)],u+=c*a[2*((n+l)*t+e)+1]}l[2*(n*t+e)]=s,l[2*(n*t+e)+1]=u}return l}(t.data,t.width,t.height,e.smoothing);return e.interpolate?(e,n)=>{const i=Math.floor(e),o=Math.floor(n);if(i<0||i>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const s=e-i,a=n-o,l=i,u=o,c=i<t.width-1?i+1:i,p=o<t.height-1?o+1:o,d=r[2*(u*t.width+l)],h=r[2*(u*t.width+c)],f=r[2*(p*t.width+l)],m=r[2*(p*t.width+c)],y=r[2*(u*t.width+l)+1],g=r[2*(u*t.width+c)+1];return[(d*(1-a)+f*a)*(1-s)+(h*(1-a)+m*a)*s,(y*(1-a)+r[2*(p*t.width+l)+1]*a)*(1-s)+(g*(1-a)+r[2*(p*t.width+c)+1]*a)*s]}:(e,n)=>{const i=Math.round(e),o=Math.round(n);return i<0||i>=t.width||o<0||o>=t.height?[0,0]:[r[2*(o*t.width+i)],r[2*(o*t.width+i)+1]]}}(t,r),u=performance.now(),d=f(t,l,r.width,r.height),h=performance.now(),m=function(e){const t=new a.A,r=e.reduce(((e,t)=>e+t.length),0),n=new Float32Array(4*r),i=new Array(e.length);let o=0,s=0;for(const r of e){const e=o;for(const e of r)n[4*o]=e.x,n[4*o+1]=e.y,n[4*o+2]=e.t,n[4*o+3]=e.speed,o++;i[s++]={startVertex:e,numberOfVertices:r.length,totalTime:r[r.length-1].t,timeSeed:t.getFloat()}}return{lineVertices:n,lineDescriptors:i}}(d),y=performance.now(),g="Streamlines"===e?function(e,t){const{lineVertices:r,lineDescriptors:n}=e;let i=0,o=0;for(const e of n)i+=2*e.numberOfVertices,o+=6*(e.numberOfVertices-1);const s=new Float32Array(9*i),a=new Uint32Array(o);let l=0,u=0;function c(){a[u++]=l-2,a[u++]=l,a[u++]=l-1,a[u++]=l,a[u++]=l+1,a[u++]=l-1}function p(e,t,r,n,i,o,a,u){const c=9*l;let p=0;s[c+p++]=e,s[c+p++]=t,s[c+p++]=1,s[c+p++]=r,s[c+p++]=o,s[c+p++]=a,s[c+p++]=n/2,s[c+p++]=i/2,s[c+p++]=u,l++,s[c+p++]=e,s[c+p++]=t,s[c+p++]=-1,s[c+p++]=r,s[c+p++]=o,s[c+p++]=a,s[c+p++]=-n/2,s[c+p++]=-i/2,s[c+p++]=u,l++}for(const e of n){const{totalTime:n,timeSeed:i}=e;let o=null,s=null,a=null,l=null,u=null,d=null;for(let h=0;h<e.numberOfVertices;h++){const f=r[4*(e.startVertex+h)],m=r[4*(e.startVertex+h)+1],y=r[4*(e.startVertex+h)+2],g=r[4*(e.startVertex+h)+3];let w=null,b=null,v=null,M=null;if(h>0){w=f-o,b=m-s;const e=Math.sqrt(w*w+b*b);if(w/=e,b/=e,h>1){let e=w+u,r=b+d;const n=Math.sqrt(e*e+r*r);e/=n,r/=n;const i=Math.min(1/(e*w+r*b),t);e*=i,r*=i,v=-r,M=e}else v=-b,M=w;null!==v&&null!==M&&(p(o,s,a,v,M,n,i,g),c())}o=f,s=m,a=y,u=w,d=b,l=g}p(o,s,a,-d,u,n,i,l)}return{vertexData:s,indexData:a}}(m,p):function(e){const{lineVertices:t,lineDescriptors:r}=e;let n=0,i=0;for(const e of r){const t=e.numberOfVertices-1;n+=4*t*2,i+=6*t*2}const o=new Float32Array(16*n),s=new Uint32Array(i);let a,l,u,c,p,d,h,f,m,y,g,w,b,v,M=0,S=0;function I(){s[S++]=M-8,s[S++]=M-7,s[S++]=M-6,s[S++]=M-7,s[S++]=M-5,s[S++]=M-6,s[S++]=M-4,s[S++]=M-3,s[S++]=M-2,s[S++]=M-3,s[S++]=M-1,s[S++]=M-2}function A(e,t,r,n,i,s,a,l,u,c,p,d,h,f){const m=16*M;let y=0;for(const g of[1,2])for(const w of[1,2,3,4])o[m+y++]=e,o[m+y++]=t,o[m+y++]=r,o[m+y++]=n,o[m+y++]=a,o[m+y++]=l,o[m+y++]=u,o[m+y++]=c,o[m+y++]=g,o[m+y++]=w,o[m+y++]=h,o[m+y++]=f,o[m+y++]=i/2,o[m+y++]=s/2,o[m+y++]=p/2,o[m+y++]=d/2,M++}function x(e,t){let r=m+g,n=y+w;const i=Math.sqrt(r*r+n*n);r/=i,n/=i;const o=m*r+y*n;r/=o,n/=o;let s=g+b,M=w+v;const S=Math.sqrt(s*s+M*M);s/=S,M/=S;const x=g*s+w*M;s/=x,M/=x,A(a,l,u,c,-n,r,p,d,h,f,-M,s,e,t),I()}function _(e,t,r,n,i,o){if(m=g,y=w,g=b,w=v,null==m&&null==y&&(m=g,y=w),null!=p&&null!=d){b=e-p,v=t-d;const r=Math.sqrt(b*b+v*v);b/=r,v/=r}null!=m&&null!=y&&x(i,o),a=p,l=d,u=h,c=f,p=e,d=t,h=r,f=n}function C(e,t){m=g,y=w,g=b,w=v,null==m&&null==y&&(m=g,y=w),null!=m&&null!=y&&x(e,t)}for(const e of r){a=null,l=null,u=null,c=null,p=null,d=null,h=null,f=null,m=null,y=null,g=null,w=null,b=null,v=null;const{totalTime:r,timeSeed:n}=e;for(let i=0;i<e.numberOfVertices;i++)_(t[4*(e.startVertex+i)],t[4*(e.startVertex+i)+1],t[4*(e.startVertex+i)+2],t[4*(e.startVertex+i)+3],r,n);C(r,n)}return{vertexData:o,indexData:s}}(m),w=performance.now();return(0,n.A)("esri-2d-profiler")&&(c().info("I.1","_createFlowFieldFromData (ms)",Math.round(u-o)),c().info("I.2","_getStreamlines (ms)",Math.round(h-u)),c().info("I.3","createAnimatedLinesData (ms)",Math.round(y-h)),c().info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(w-y)),c().info("I.5","createFlowMesh (ms)",Math.round(w-o)),c().info("I.6","Mesh size (bytes)",g.vertexData.buffer.byteLength+g.indexData.buffer.byteLength)),await Promise.resolve(),(0,s.Te)(i),g}function h(e,t,r,n,i,o,s,a,l){const u=[];let c=r,p=n,d=0,[h,f]=t(c,p);h*=e.velocityScale,f*=e.velocityScale;const m=Math.sqrt(h*h+f*f);let y,g;u.push({x:c,y:p,t:d,speed:m});for(let r=0;r<e.verticesPerLine;r++){let[r,n]=t(c,p);r*=e.velocityScale,n*=e.velocityScale;const h=Math.sqrt(r*r+n*n);if(h<e.minSpeedThreshold)return u;const f=r/h,m=n/h;if(c+=f*e.segmentLength,p+=m*e.segmentLength,d+=e.segmentLength/h,Math.acos(f*y+m*g)>e.maxTurnAngle)return u;if(e.collisions){const e=Math.round(c*l),t=Math.round(p*l);if(e<0||e>s-1||t<0||t>a-1)return u;const r=o[t*s+e];if(-1!==r&&r!==i)return u;o[t*s+e]=i}u.push({x:c,y:p,t:d,speed:h}),y=f,g=m}return u}function f(e,t,r,n){const i=[],o=new a.A,s=1/Math.max(e.lineCollisionWidth,1),l=Math.round(r*s),u=Math.round(n*s),c=new Int32Array(l*u);for(let e=0;e<c.length;e++)c[e]=-1;const p=[];for(let t=0;t<n;t+=e.lineSpacing)for(let n=0;n<r;n+=e.lineSpacing)p.push({x:n,y:t,sort:o.getFloat()});p.sort(((e,t)=>e.sort-t.sort));for(const{x:r,y:n}of p)if(o.getFloat()<e.density){const o=h(e,t,r,n,i.length,c,l,u,s);if(o.length<2)continue;i.push(o)}return i}function m(e,t){const r=t.pixels,{width:n,height:i}=t,s=new Float32Array(n*i*2),a=t.mask||new Uint8Array(n*i*2);if(t.mask||a.fill(255),"vector-uv"===e)for(let e=0;e<n*i;e++)s[2*e]=r[0][e],s[2*e+1]=-r[1][e];else if("vector-magdir"===e)for(let e=0;e<n*i;e++){const t=r[0][e],n=(0,o.kU)(r[1][e]),i=Math.cos(n-Math.PI/2),a=Math.sin(n-Math.PI/2);s[2*e]=i*t,s[2*e+1]=a*t}return{data:s,mask:a,width:n,height:i}}async function y(e,t,r,i,o,s){const a=performance.now(),p=(0,l.Vp)(t.spatialReference);if(!p){const l=await g(e,t,r,i,o,s);return(0,n.A)("esri-2d-profiler")&&c().info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-a)),(0,n.A)("esri-2d-profiler")&&c().info("I.9","Number of parts",1),l}const[d,h]=p.valid,f=h-d,m=Math.ceil(t.width/f),y=t.width/m,w=Math.round(r/m);let b=t.xmin;const v=[],M=performance.now();for(let r=0;r<m;r++){const r=new u.default({xmin:b,xmax:b+y,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});v.push(g(e,r,w,i,o,s)),b+=y}const S=await Promise.all(v);(0,n.A)("esri-2d-profiler")&&c().info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-M)),(0,n.A)("esri-2d-profiler")&&c().info("I.9","Number of parts",S.length);const I={data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i};let A=0;for(const e of S){for(let t=0;t<e.height;t++)for(let n=0;n<e.width;n++)A+n>=r||(I.data[2*(t*r+A+n)]=e.data[2*(t*e.width+n)],I.data[2*(t*r+A+n)+1]=e.data[2*(t*e.width+n)+1],I.mask[t*r+A+n]=e.mask[t*e.width+n]);A+=e.width}return(0,n.A)("esri-2d-profiler")&&c().info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-a)),I}async function g(e,t,r,n,i,o){const s={requestProjectedLocalDirections:!0,signal:o};if(null!=i&&(s.timeExtent=i),"imagery"===e.type){await e.load({signal:o});const i=e.rasterInfo.dataType,a=await e.fetchImage(t,r,n,s);return null==a?.pixelData?.pixelBlock?{data:new Float32Array(r*n*2),mask:new Uint8Array(r*n),width:r,height:n}:m(i,a.pixelData.pixelBlock)}await e.load({signal:o});const a=e.serviceRasterInfo.dataType,l=await e.fetchPixels(t,r,n,s);return null==l?.pixelBlock?{data:new Float32Array(r*n*2),mask:new Uint8Array(r*n),width:r,height:n}:m(a,l.pixelBlock)}},91448:function(e,t,r){var n;r.d(t,{X:function(){return n}}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(n||(n={}))}}]);
//# sourceMappingURL=ImageryLayer.js.map