{"version":3,"file":"rest-query-operations-queryAttachments.js","mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA,cAAc,MAAM,gCAAgC,GAAG,0BAA0B,gCAAgC,YAAY,sBAAsB,OAAO,cAAc,MAAM,iBAAiB,GAAG,sBAAsB,gCAAgC,sBAAgD;;;;;;;;;;;;;;;;;;;;;;ACJxS;AACA;AACA;AACA;AACwP,cAAc,mBAAmB,8PAA8P,gBAAgB,WAAW,kBAAkB,MAAM,oDAAoD,GAAG,kBAAkB,MAAM,KAAK,KAAK,2DAAC,CAAC,6DAAC,IAAI,OAAO,GAAG,EAAE,eAAe,EAAE,MAAM,kEAAC,aAAa,OAAO,wCAAwC,8BAA8B,SAAS,kBAAkB,OAAO,MAAM,sEAAC,EAAE,4BAA4B,GAAG,cAAc,iBAAiB,uBAAuB,EAAE,uDAAC,kEAAkE,wBAAwB,MAAM,YAAY,QAAQ,wBAAwB,uDAAC,iCAAiC,+CAA+C,2DAA2D,MAAkG;;;;;;;;;;;;;;;;;;;;;;;ACJryC;AACA;AACA;AACA;AACsd,MAAM,SAAS,GAAG,4BAA4B,IAAI,4BAA4B,IAAI,8BAA8B,IAAI,8BAA8B,IAAI,8BAA8B,IAAI,6BAA6B,IAAI,6BAA6B,IAAI,gCAAgC,sBAAsB,6DAAC,CAAC,eAAe,mMAAmM,sBAAsB,MAAM,WAAW,QAAQ,0EAAC,EAAE,sDAAsD,EAAE,kBAAkB,QAAQ,cAAc,8NAA8N,IAAI,uDAAC,EAAE,sFAAC,EAAE,YAAY,qCAAqC,uDAAC,EAAE,sFAAC,mCAAmC,uDAAC,EAAE,sFAAC,EAAE,YAAY,uCAAuC,uDAAC,EAAE,sFAAC,EAAE,KAAK,wEAAC,CAAC,4BAA4B,uDAAC,EAAE,sFAAC,EAAE,YAAY,kCAAkC,uDAAC,EAAE,sFAAC,EAAE,YAAY,kCAAkC,uDAAC,EAAE,sFAAC,EAAE,YAAY,8BAA8B,uDAAC,EAAE,sFAAC,EAAE,MAAM,SAAS,wCAAwC,uDAAC,EAAE,sFAAC,EAAE,MAAM,SAAS,wCAAwC,uDAAC,EAAE,sFAAC,EAAE,KAAK,wEAAC,CAAC,8BAA8B,uDAAC,EAAE,sFAAC,EAAE,MAAM,SAAS,iCAAiC,uDAAC,EAAE,sFAAC,+CAA+C,UAA+B","sources":["webpack://defra/./node_modules/@arcgis/core/layers/support/exifUtils.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/queryAttachments.js","webpack://defra/./node_modules/@arcgis/core/rest/query/support/AttachmentInfo.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction n(n){const{exifInfo:e,exifName:a,tagName:u}=n;if(!e||!a||!u)return null;const f=e.find((n=>n.name===a));return f?t({tagName:u,tags:f.tags}):null}function t(n){const{tagName:t,tags:e}=n;if(!e||!t)return null;const a=e.find((n=>n.name===t));return a?.value||null}export{n as getExifValue};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{addTokenParameter as t}from\"../../../kernel.js\";import o from\"../../../request.js\";import{addProxy as e}from\"../../../core/urlUtils.js\";import{mapParameters as n}from\"../../operations/urlUtils.js\";import r from\"../support/AttachmentInfo.js\";function s(t){const o=t.toJSON();return o.attachmentTypes&&(o.attachmentTypes=o.attachmentTypes.join(\",\")),o.keywords&&(o.keywords=o.keywords.join(\",\")),o.globalIds&&(o.globalIds=o.globalIds.join(\",\")),o.objectIds&&(o.objectIds=o.objectIds.join(\",\")),o.size&&(o.size=o.size.join(\",\")),o}function a(o,n){const s={};for(const a of n){const{parentObjectId:n,parentGlobalId:c,attachmentInfos:m}=a;for(const a of m){const{id:m}=a,p=e(t(`${o.path}/${n}/attachments/${m}`)),i=r.fromJSON(a);i.set({url:p,parentObjectId:n,parentGlobalId:c}),s[n]?s[n].push(i):s[n]=[i]}}return s}function c(t,e,r){let a={query:n({...t.query,f:\"json\",...s(e)})};return r&&(a={...r,...a,query:{...r.query,...a.query}}),o(t.path+\"/queryAttachments\",a).then((t=>t.data.attachmentGroups))}async function m(t,e,n){const{objectIds:r}=e,s=[];for(const a of r)s.push(o(t.path+\"/\"+a+\"/attachments\",n));return Promise.all(s).then((t=>r.map(((o,e)=>({parentObjectId:o,attachmentInfos:t[e].data.attachmentInfos})))))}export{c as executeAttachmentQuery,m as fetchAttachments,a as processAttachmentQueryResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../../core/JSONSupport.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{Integer as e}from\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/RandomLCG.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{getExifValue as n}from\"../../../layers/support/exifUtils.js\";var s;const p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let d=s=class extends t{constructor(o){super(o),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:o}=this,t=n({exifName:\"Exif IFD0\",tagName:\"Orientation\",exifInfo:o});return p[t]||null}clone(){return new s({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};o([r({type:String})],d.prototype,\"contentType\",void 0),o([r()],d.prototype,\"exifInfo\",void 0),o([r({readOnly:!0})],d.prototype,\"orientationInfo\",null),o([r({type:e})],d.prototype,\"id\",void 0),o([r({type:String})],d.prototype,\"globalId\",void 0),o([r({type:String})],d.prototype,\"keywords\",void 0),o([r({type:String})],d.prototype,\"name\",void 0),o([r({json:{read:!1}})],d.prototype,\"parentGlobalId\",void 0),o([r({json:{read:!1}})],d.prototype,\"parentObjectId\",void 0),o([r({type:e})],d.prototype,\"size\",void 0),o([r({json:{read:!1}})],d.prototype,\"url\",void 0),d=s=o([i(\"esri.rest.query.support.AttachmentInfo\")],d);const a=d;export{a as default};\n"],"names":[],"sourceRoot":""}