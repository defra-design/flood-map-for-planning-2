"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[8117],{31012:function(e,t,r){r.d(t,{A:function(){return d}});var n=r(53804),i=r(83525),o=r(50659),s=r(75743),a=r(88781),u=r(30905),c=r(23502),l=(r(58941),r(40633),r(65953));let p=0,f=class extends((0,u.Te)((0,s.O)((0,a.sA)(i.A)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${p++}`,this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":case"viewshed":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(o.Ru)}};(0,n._)([(0,c.MZ)({type:String,constructOnly:!0,clonable:!1})],f.prototype,"id",void 0),(0,n._)([(0,c.MZ)({type:String})],f.prototype,"title",void 0),(0,n._)([(0,c.MZ)({clonable:!1,value:null})],f.prototype,"parent",null),(0,n._)([(0,c.MZ)({readOnly:!0})],f.prototype,"isEditable",null),f=(0,n._)([(0,l.$)("esri.analysis.Analysis")],f);const d=f},97922:function(e,t,r){r.d(t,{xH:function(){return s},N1:function(){return u}}),r(20551);var n=r(32501),i=r(79578),o=(r(38177),r(73364),r(24761),r(13794),r(50456));function s(e,t){return a(e)===a(t)}function a(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:"";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&"objectIdField"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}r(59356),o.R6,o.HE,o.R6,o.R6,r(89756),r(84363),(0,n.vt)();const u={json:{write:{writer:function(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:e.objectId}}}}}}};(0,i.vt)(),(0,n.vt)()},2075:function(e,t,r){r.d(t,{a:function(){return v},b:function(){return $},c:function(){return m},f:function(){return w},g:function(){return S},h:function(){return N},u:function(){return _}}),r(58941);var n=r(40633),i=r(15774),o=r(89736),s=r(73364),a=r(39714),u=r(20551),c=r(32501),l=r(87416),p=r(72485),f=r(73313),d=r(5596),y=r(79578),h=r(29531),g=r(50973);const b=()=>n.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");function v(e=V){return{plane:(0,d.vt)(e.plane),origin:(0,c.o8)(e.origin),basis1:(0,c.o8)(e.basis1),basis2:(0,c.o8)(e.basis2)}}function m(e,t=v()){return w(e.origin,e.basis1,e.basis2,t)}function w(e,t,r,n=v()){return(0,u.c)(n.origin,e),(0,u.c)(n.basis1,t),(0,u.c)(n.basis2,r),_(n),function(e,t){Math.abs((0,u.f)(e.basis1,e.basis2)/((0,u.l)(e.basis1)*(0,u.l)(e.basis2)))>1e-6&&b().warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,u.f)(e.basis1,q(e)))>1e-6&&b().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,u.f)(q(e),e.origin)-e.plane[3])>1e-6&&b().warn(t,"Plane offset is not consistent with plane origin")}(n,"fromValues()"),n}function _(e){(0,d.mR)(e.basis2,e.basis1,e.origin,e.plane)}function I(e,t,r){e!==r&&m(e,r);const n=(0,u.h)(g.rq.get(),q(e),t);return(0,u.g)(r.origin,r.origin,n),r.plane[3]-=t,r}function S(e,t=v()){const r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return(0,u.i)(t.origin,e[0]+r,e[1]+n,0),(0,u.i)(t.basis1,r,0,0),(0,u.i)(t.basis2,0,n,0),(0,d.fA)(0,0,1,0,t.plane),t}function M(e,t,r){return!!(0,d.Ui)(e.plane,t,r)&&x(e,r)}function T(e,t,r){const n=P.get();C(e,t,n,P.get());let o=Number.POSITIVE_INFINITY;for(const s of U){const a=G(e,s,F.get()),c=g.rq.get();if((0,d.T7)(n,a,c)){const e=(0,u.o)(g.rq.get(),t.origin,c),n=Math.abs((0,i.XM)((0,u.f)(t.direction,e)));n<o&&(o=n,(0,u.c)(r,c))}}return o===Number.POSITIVE_INFINITY?E(e,t,r):r}function E(e,t,r){if(M(e,t,r))return r;const n=P.get(),i=P.get();C(e,t,n,i);let o=Number.POSITIVE_INFINITY;for(const s of U){const a=G(e,s,F.get()),c=g.rq.get();if((0,d.gv)(n,a,c)){const e=(0,y.kb)(t,c);if(!(0,d.Tj)(i,c))continue;e<o&&(o=e,(0,u.c)(r,c))}}return A(e,t.origin)<o&&O(e,t.origin,r),r}function O(e,t,r){const n=(0,d._I)(e.plane,t,g.rq.get()),i=(0,f.H6)(R(e,e.basis1),n,-1,1,g.rq.get()),o=(0,f.H6)(R(e,e.basis2),n,-1,1,g.rq.get());return(0,u.d)(r,(0,u.g)(g.rq.get(),i,o),e.origin),r}function L(e,t,r){const{origin:n,basis1:i,basis2:o}=e,s=(0,u.d)(g.rq.get(),t,n),a=(0,h.gr)(i,s),c=(0,h.gr)(o,s),l=(0,h.gr)(q(e),s);return(0,u.i)(r,a,c,l)}function A(e,t){const r=L(e,t,g.rq.get()),{basis1:n,basis2:i}=e,o=(0,u.l)(n),s=(0,u.l)(i),a=Math.max(Math.abs(r[0])-o,0),c=Math.max(Math.abs(r[1])-s,0),l=r[2];return a*a+c*c+l*l}function N(e,t){return Math.sqrt(A(e,t))}function j(e,t){const r=-e.plane[3];return(0,h.gr)(q(e),t)-r}function q(e){return(0,d.Qj)(e.plane)}function x(e,t){const r=(0,u.d)(g.rq.get(),t,e.origin),n=(0,u.k)(e.basis1),i=(0,u.k)(e.basis2),o=(0,u.f)(e.basis1,r),s=(0,u.f)(e.basis2,r);return-o-n<0&&o-n<0&&-s-i<0&&s-i<0}function R(e,t){const r=F.get();return(0,u.c)(r.origin,e.origin),(0,u.c)(r.vector,t),r}function G(e,t,r){const{basis1:n,basis2:i,origin:o}=e,s=(0,u.h)(g.rq.get(),n,t.origin[0]),a=(0,u.h)(g.rq.get(),i,t.origin[1]);(0,u.g)(r.origin,s,a),(0,u.g)(r.origin,r.origin,o);const c=(0,u.h)(g.rq.get(),n,t.direction[0]),l=(0,u.h)(g.rq.get(),i,t.direction[1]);return(0,u.h)(r.vector,(0,u.g)(c,c,l),2),r}function C(e,t,r,n){const i=q(e);(0,d.mR)(i,t.direction,t.origin,r),(0,d.mR)((0,d.Qj)(r),i,t.origin,n)}const V={plane:(0,d.vt)(),origin:(0,c.fA)(0,0,0),basis1:(0,c.fA)(1,0,0),basis2:(0,c.fA)(0,1,0)},P=new o.I(d.vt),F=new o.I(f.vt),D=(0,c.vt)(),Z=new o.I((()=>v())),U=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],B=(0,a.vt)(),k=(0,a.vt)(),$=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:class{constructor(){this.plane=(0,d.vt)(),this.origin=(0,c.vt)(),this.basis1=(0,c.vt)(),this.basis2=(0,c.vt)()}},altitudeAt:j,axisAt:function(e,t,r,n){return function(e,t,r){switch(t){case p._.X:(0,u.c)(r,e.basis1),(0,u.n)(r,r);break;case p._.Y:(0,u.c)(r,e.basis2),(0,u.n)(r,r);break;case p._.Z:(0,u.c)(r,q(e))}return r}(e,r,n)},cameraFrustumCoverage:function(e,t){return(t-e)/t},closestPoint:E,closestPointOnSilhouette:T,copy:m,copyWithoutVerify:function(e,t){(0,u.c)(t.origin,e.origin),(0,u.c)(t.basis1,e.basis1),(0,u.c)(t.basis2,e.basis2),(0,d.C)(t.plane,e.plane)},create:v,distance:N,distance2:A,distanceToSilhouette:function(e,t){let r=Number.NEGATIVE_INFINITY;for(const n of U){const i=G(e,n,F.get()),o=(0,f.kb)(i,t);o>r&&(r=o)}return Math.sqrt(r)},elevate:I,equals:function(e,t){return(0,u.p)(e.basis1,t.basis1)&&(0,u.p)(e.basis2,t.basis2)&&(0,u.p)(e.origin,t.origin)},extrusionContainsPoint:function(e,t){return(0,d.Tj)(e.plane,t)&&x(e,t)},fromAABoundingRect:S,fromValues:w,getExtent:function(e,t){const r=e.basis1[0],n=e.basis2[1],[i,o]=e.origin;return(0,l.fA)(i-r,o-n,i+r,o+n,t)},intersectRay:M,intersectRayClosestSilhouette:function(e,t,r){if(M(e,t,r))return r;const n=T(e,t,g.rq.get());return(0,u.g)(r,t.origin,(0,u.h)(g.rq.get(),t.direction,(0,u.j)(t.origin,n)/(0,u.l)(t.direction))),r},normal:q,projectPoint:O,projectPointLocal:L,rotate:function(e,t,r,n){return e!==n&&m(e,n),(0,s.$0)(k,t,r),(0,u.t)(n.basis1,e.basis1,k),(0,u.t)(n.basis2,e.basis2,k),_(n),n},setAltitudeAt:function(e,t,r,n){const i=j(e,t),o=(0,u.h)(D,q(e),r-i);return(0,u.g)(n,t,o),n},setExtent:function(e,t,r){return S(t,r),I(r,j(e,e.origin),r),r},transform:function(e,t,r){return e!==r&&m(e,r),(0,s.B8)(B,t),(0,s.mg)(B,B),(0,u.t)(r.basis1,e.basis1,B),(0,u.t)(r.basis2,e.basis2,B),(0,u.t)((0,d.Qj)(r.plane),(0,d.Qj)(e.plane),B),(0,u.t)(r.origin,e.origin,t),(0,d.mP)(r.plane,r.plane,r.origin),r},up:V,updateUnboundedPlane:_,wrap:function(e,t,r){const n=Z.get();return n.origin=e,n.basis1=t,n.basis2=r,n.plane=(0,d.LV)(0,0,0,0),_(n),n}},Symbol.toStringTag,{value:"Module"}))},13794:function(e,t,r){r.d(t,{N:function(){return h},a:function(){return S},c:function(){return g},e:function(){return m},f:function(){return M},g:function(){return I},k:function(){return N},l:function(){return w},m:function(){return b},n:function(){return E},o:function(){return V},p:function(){return q},s:function(){return D},w:function(){return _}}),r(58941),r(40633);var n=r(15774),i=r(73364),o=r(20551),s=r(32501),a=r(33400),u=r(41546),c=r(8527),l=r(72485),p=r(79578);function f(e,t){const r=(0,o.l)(e),i=(0,n.YN)(e[2]/r),s=Math.atan2(e[1]/r,e[0]/r);return(0,o.i)(t,r,i,s),t}var d=r(29531),y=r(50973);const h=g();function g(){return(0,u.vt)()}const b=a.e,v=a.e;function m(e,t){return(0,a.c)(t,e)}function w(e,t){return(0,u.fA)(e[0],e[1],e[2],t)}function _(e){return e}function I(e){return e[3]}function S(e){return e}function M(e,t,r,n){return(0,u.fA)(e,t,r,n)}function T(e,t,r){if(null==t)return!1;if(!L(e,t,O))return!1;let{t0:n,t1:i}=O;if((n<0||i<n&&i>0)&&(n=i),n<0)return!1;if(r){const{origin:e,direction:i}=t;r[0]=e[0]+i[0]*n,r[1]=e[1]+i[1]*n,r[2]=e[2]+i[2]*n}return!0}function E(e,t,r){const n=(0,p.Cr)(t,r);if(!L(e,n,O))return[];const{origin:i,direction:a}=n,{t0:u,t1:l}=O,f=t=>{const r=(0,s.vt)();return(0,o.b)(r,i,a,t),q(e,r,r)};return Math.abs(u-l)<(0,c.FD)()?[f(u)]:[f(u),f(l)]}const O={t0:0,t1:0};function L(e,t,r){const{origin:n,direction:i}=t,o=A;o[0]=n[0]-e[0],o[1]=n[1]-e[1],o[2]=n[2]-e[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===s)return!1;const a=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),u=a*a-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(u<0)return!1;const c=Math.sqrt(u);return r.t0=(-a-c)/(2*s),r.t1=(-a+c)/(2*s),!0}const A=(0,s.vt)();function N(e,t){return T(e,t,null)}function j(e,t,r){const n=y.rq.get(),s=y.Rc.get();(0,o.e)(n,t.origin,t.direction);const a=I(e);(0,o.e)(r,n,t.origin),(0,o.h)(r,r,1/(0,o.l)(r)*a);const u=x(e,t.origin),c=(0,d.g7)(t.origin,r);return(0,i.$0)(s,c+u,n),(0,o.t)(r,r,s),r}function q(e,t,r){const n=(0,o.d)(y.rq.get(),t,e),i=(0,o.h)(y.rq.get(),n,e[3]/(0,o.l)(n));return(0,o.g)(r,i,e)}function x(e,t){const r=(0,o.d)(y.rq.get(),t,e),i=(0,o.l)(r),s=I(e),a=s+Math.abs(s-i);return(0,n.XM)(s/a)}const R=(0,s.vt)();function G(e,t,r,n){const i=(0,o.d)(R,t,e);switch(r){case l._.X:{const e=f(i,R)[2];return(0,o.i)(n,-Math.sin(e),Math.cos(e),0)}case l._.Y:{const e=f(i,R),t=e[1],r=e[2],s=Math.sin(t);return(0,o.i)(n,-s*Math.cos(r),-s*Math.sin(r),Math.cos(t))}case l._.Z:return(0,o.n)(n,i);default:return}}function C(e,t){const r=(0,o.d)(P,t,e);return(0,o.l)(r)-e[3]}function V(e,t){const r=(0,o.s)(e,t),n=I(e);return r<=n*n}const P=(0,s.vt)(),F=g(),D=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:h,altitudeAt:C,angleToSilhouette:x,axisAt:G,cameraFrustumCoverage:function(e,t,r,n){const i=I(e),o=i*i,s=t+.5*Math.PI,a=r*r+o-2*Math.cos(s)*r*i,u=Math.sqrt(a),c=a-o;if(c<=0)return.5;const l=Math.sqrt(c),p=Math.acos(l/u)-Math.asin(i/(u/Math.sin(s)));return Math.min(1,(p+.5*n)/n)},clear:function(e){e[0]=e[1]=e[2]=e[3]=0},closestPoint:function(e,t,r){return T(e,t,r)?r:((0,p.oC)(t,e,r),q(e,r,r))},closestPointOnSilhouette:j,containsPoint:V,copy:m,create:g,distanceToSilhouette:function(e,t){const r=(0,o.d)(y.rq.get(),t,e),n=(0,o.k)(r),i=e[3]*e[3];return Math.sqrt(Math.abs(n-i))},elevate:function(e,t,r){return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=e[3]+t,r},equals:v,exactEquals:b,fromCenterAndRadius:w,fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},fromValues:M,getCenter:S,getExtent:function(e,t){return t},getRadius:I,intersectLine:E,intersectRay:T,intersectRayClosestSilhouette:function(e,t,r){if(T(e,t,r))return r;const n=j(e,t,y.rq.get());return(0,o.g)(r,t.origin,(0,o.h)(y.rq.get(),t.direction,(0,o.j)(t.origin,n)/(0,o.l)(t.direction))),r},intersectsRay:N,projectPoint:q,setAltitudeAt:function(e,t,r,n){const i=C(e,t),s=G(e,t,l._.Z,P),a=(0,o.h)(P,s,r-i);return(0,o.g)(n,t,a)},setExtent:function(e,t,r){return e!==r&&m(e,r),r},tmpSphere:F,union:function(e,t,r=(0,u.vt)()){const n=(0,o.j)(e,t),i=e[3],s=t[3];return n+s<i?((0,a.c)(r,e),r):n+i<s?((0,a.c)(r,t),r):((0,o.m)(r,e,t,(n+s-i)/(2*n)),r[3]=(n+i+s)/2,r)},wrap:_},Symbol.toStringTag,{value:"Module"}))},77793:function(e,t,r){r.d(t,{P:function(){return m},L:function(){return w}});var n=r(53804),i=r(83525),o=r(90194),s=r(21609),a=r(72977);class u{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(a.AU),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new u,r=this._originStores[a.Gr.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,(0,s.o8)(e),a.Gr.DEFAULTS)}));for(let r=a.Gr.SERVICE;r<a.AU;r++){const n=this._originStores[r];n&&n.forEach(((n,i)=>{e&&e.has(i)||t.set(i,(0,s.o8)(n),r)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=a.Gr.USER){let n=this._originStores[r];if(n||(n=new Map,this._originStores[r]=n),n.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=a.Gr.USER){const r=this._originStores[t];if(!r)return;const n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return n}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],n=r?.get(e),i=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),i!==n}originOf(e){return this._propertyOriginMap.get(e)||a.Gr.DEFAULTS}forEach(e){this._values.forEach(e)}}var c=r(97354),l=r(63693),p=r(65953);const f=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,l.oY)(this),r=t.store,n=new u;t.store=n,(0,o.k)(t,r,n)}read(e,t){(0,c.L)(this,e,t)}getAtOrigin(e,t){const r=d(this),n=(0,a.aB)(t);if("string"==typeof e)return r.get(e,n);const i={};return e.forEach((e=>{i[e]=r.get(e,n)})),i}originOf(e){return(0,a.OL)(this.originIdOf(e))}originIdOf(e){return d(this).originOf(e)}revert(e,t){const r=d(this),n=(0,a.aB)(t),i=(0,l.oY)(this);let o;o="string"==typeof e?"*"===e?r.keys(n):[e]:e,o.forEach((e=>{i.invalidate(e),r.revert(e,n),i.commit(e)}))}};return t=(0,n._)([(0,p.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function d(e){return(0,l.oY)(e).store}let y=class extends(f(i.A)){};y=(0,n._)([(0,p.$)("esri.core.ReadOnlyMultiOriginJSONSupport")],y);var h=r(62664),g=r(99495);const b=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return v(this).delete(e,(0,a.aB)(t))}write(e,t){return(0,g.M)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,l.oY)(this).setAtOrigin(e,t,(0,a.aB)(r))}removeOrigin(e){const t=v(this),r=(0,a.aB)(e),n=t.keys(r);for(const e of n)t.originOf(e)===r&&t.set(e,t.get(e,r),a.Gr.USER)}updateOrigin(e,t){const r=v(this),n=(0,a.aB)(t),i=(0,h.Jt)(this,e);for(let t=n+1;t<a.AU;++t)r.delete(e,t);r.set(e,i,n)}toJSON(e){return this.write({},e)}};return t=(0,n._)([(0,p.$)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function v(e){return(0,l.oY)(e).store}const m=e=>{let t=class extends(b(f(e))){constructor(...e){super(...e)}};return t=(0,n._)([(0,p.$)("esri.core.MultiOriginJSONSupport")],t),t};let w=class extends(m(i.A)){};w=(0,n._)([(0,p.$)("esri.core.MultiOriginJSONSupport")],w)},89736:function(e,t,r){r.d(t,{I:function(){return i}});var n=r(29601);class i{constructor(e){this._allocator=e,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,n.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,o));e++)this._items.push(this._allocator())}}const o=1024},64786:function(e,t,r){r.d(t,{K:function(){return n}});const n=["operational-layers","basemap","ground"]},87725:function(e,t,r){function n(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,r,n,i,o,s,a,u){return[e,t,r,n,i,o,s,a,u]}r.d(t,{fA:function(){return i},vt:function(){return n},zK:function(){return o}});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:n,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},39714:function(e,t,r){function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t,r,n,i,o,s,a,u,c,l,p,f,d,y,h){return[e,t,r,n,i,o,s,a,u,c,l,p,f,d,y,h]}r.d(t,{fA:function(){return o},o8:function(){return i},vt:function(){return n},zK:function(){return s}});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:i,create:n,createView:function(e,t){return new Float64Array(e,t,16)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},61769:function(e,t,r){function n(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}r.d(t,{o8:function(){return i},vt:function(){return n},zK:function(){return o}});const o=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:n,fromValues:function(e,t,r,n){return[e,t,r,n]}},Symbol.toStringTag,{value:"Module"}))},73313:function(e,t,r){r.d(t,{C:function(){return c},Cr:function(){return p},H6:function(){return h},_I:function(){return d},dz:function(){return g},fA:function(){return l},kb:function(){return f},ld:function(){return b},sd:function(){return y},vt:function(){return u}});var n=r(15774),i=r(89736),o=r(20551),s=r(32501),a=r(50973);function u(e){return e?{origin:(0,s.o8)(e.origin),vector:(0,s.o8)(e.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function c(e,t=u()){return l(e.origin,e.vector,t)}function l(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.c)(r.vector,t),r}function p(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.d)(r.vector,t,e),r}function f(e,t){const r=(0,o.d)(a.rq.get(),t,e.origin),i=(0,o.f)(e.vector,r),s=(0,o.f)(e.vector,e.vector),u=(0,n.qE)(i/s,0,1),c=(0,o.d)(a.rq.get(),(0,o.h)(a.rq.get(),e.vector,u),r);return(0,o.f)(c,c)}function d(e,t,r){return h(e,t,0,1,r)}function y(e,t,r){return(0,o.g)(r,e.origin,(0,o.h)(r,e.vector,t))}function h(e,t,r,i,s){const{vector:u,origin:c}=e,l=(0,o.d)(a.rq.get(),t,c),p=(0,o.f)(u,l)/(0,o.k)(u);return(0,o.h)(s,u,(0,n.qE)(p,r,i)),(0,o.g)(s,s,e.origin)}function g(e,t){if(v(e,function(e,t){const r=w.get();return r.origin=e,r.vector=t,r}(t.origin,t.direction),!1,m)){const{tA:t,pB:r,distance2:n}=m;if(t>=0&&t<=1)return n;if(t<0)return(0,o.s)(e.origin,r);if(t>1)return(0,o.s)((0,o.g)(a.rq.get(),e.origin,e.vector),r)}return null}function b(e,t,r){return!!v(e,t,!0,m)&&((0,o.c)(r,m.pA),!0)}function v(e,t,r,i){const s=1e-6,u=e.origin,c=(0,o.g)(a.rq.get(),u,e.vector),l=t.origin,p=(0,o.g)(a.rq.get(),l,t.vector),f=a.rq.get(),d=a.rq.get();if(f[0]=u[0]-l[0],f[1]=u[1]-l[1],f[2]=u[2]-l[2],d[0]=p[0]-l[0],d[1]=p[1]-l[1],d[2]=p[2]-l[2],Math.abs(d[0])<s&&Math.abs(d[1])<s&&Math.abs(d[2])<s)return!1;const y=a.rq.get();if(y[0]=c[0]-u[0],y[1]=c[1]-u[1],y[2]=c[2]-u[2],Math.abs(y[0])<s&&Math.abs(y[1])<s&&Math.abs(y[2])<s)return!1;const h=f[0]*d[0]+f[1]*d[1]+f[2]*d[2],g=d[0]*y[0]+d[1]*y[1]+d[2]*y[2],b=f[0]*y[0]+f[1]*y[1]+f[2]*y[2],v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],m=(y[0]*y[0]+y[1]*y[1]+y[2]*y[2])*v-g*g;if(Math.abs(m)<s)return!1;let w=(h*g-b*v)/m,_=(h+g*w)/v;r&&(w=(0,n.qE)(w,0,1),_=(0,n.qE)(_,0,1));const I=a.rq.get(),S=a.rq.get();return I[0]=u[0]+w*y[0],I[1]=u[1]+w*y[1],I[2]=u[2]+w*y[2],S[0]=l[0]+_*d[0],S[1]=l[1]+_*d[1],S[2]=l[2]+_*d[2],i.tA=w,i.tB=_,i.pA=I,i.pB=S,i.distance2=(0,o.s)(I,S),!0}const m={tA:0,tB:0,pA:(0,s.vt)(),pB:(0,s.vt)(),distance2:0},w=new i.I((()=>u()))},5596:function(e,t,r){r.d(t,{C:function(){return p},Cr:function(){return h},Io:function(){return G},LV:function(){return l},O_:function(){return y},Qj:function(){return f},T7:function(){return A},Tj:function(){return j},U5:function(){return O},Ui:function(){return L},Z1:function(){return R},_I:function(){return x},b6:function(){return q},ci:function(){return b},fA:function(){return d},gv:function(){return N},lU:function(){return g},mN:function(){return C},mP:function(){return M},mR:function(){return E},vt:function(){return c},ze:function(){return T}});var n=r(15774),i=r(20551),o=r(32501),s=(r(33400),r(29531)),a=r(50973),u=r(76185);function c(e=Z){return[e[0],e[1],e[2],e[3]]}function l(e=Z[0],t=Z[1],r=Z[2],n=Z[3]){return d(e,t,r,n,a.Km.get())}function p(e,t){return d(t[0],t[1],t[2],t[3],e)}function f(e){return e}function d(e,t,r,n,i=c()){return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function y(e,t,r){const n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i,r[3]=-(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]),r}function h(e,t,r,n=c()){const i=r[0]-t[0],o=r[1]-t[1],s=r[2]-t[2],a=e[0]-t[0],u=e[1]-t[1],l=e[2]-t[2],p=o*l-s*u,f=s*a-i*l,d=i*u-o*a,y=p*p+f*f+d*d,h=Math.abs(y-1)>1e-5&&y>1e-12?1/Math.sqrt(y):1;return n[0]=p*h,n[1]=f*h,n[2]=d*h,n[3]=-(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]),n}function g(e,t,r,n=0,o=Math.floor(r*(1/3)),s=Math.floor(r*(2/3))){if(r<3)return!1;t(m,n);let a=o,u=!1;for(;a<r-1&&!u;)t(w,a),a++,u=!(0,i.p)(m,w);if(!u)return!1;for(a=Math.max(a,s),u=!1;a<r&&!u;)t(_,a),a++,(0,i.d)(I,m,w),(0,i.n)(I,I),(0,i.d)(S,w,_),(0,i.n)(S,S),u=!(0,i.p)(m,_)&&!(0,i.p)(w,_)&&Math.abs((0,i.f)(I,S))<v;return u?(h(m,w,_,e),!0):(0!==n||1!==o||2!==s)&&g(e,t,r,0,1,2)}function b(e,t,r=!0){const n=t.length/3;return g(e,((e,r)=>(0,i.i)(e,t[3*r+0],t[3*r+1],t[3*r+2])),r?n-1:n)}const v=.99619469809,m=(0,o.vt)(),w=(0,o.vt)(),_=(0,o.vt)(),I=(0,o.vt)(),S=(0,o.vt)();function M(e,t,r){return t!==e&&p(e,t),e[3]=-(0,i.f)(e,r),e}function T(e,t){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function E(e,t,r,n){return(0,i.e)(_,t,e),y(r,_,n)}function O(e,t,r,n){return F(D(e,t,(0,i.d)(a.rq.get(),r,t),B,n))}function L(e,t,r){return null!=t&&F(D(e,t.origin,t.direction,k,r))}function A(e,t,r){return F(D(e,t.origin,t.vector,U.NONE,r))}function N(e,t,r){return F(D(e,t.origin,t.vector,U.CLAMP,r))}function j(e,t){return C(e,t)>=0}function q(e,t){const r=(0,i.f)(e,t.ray.direction),n=-C(e,t.ray.origin);if(r>-1e-6&&r<1e-6)return n>0;const o=n/r;return r>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function x(e,t,r){const n=(0,i.h)(a.rq.get(),e,-e[3]),o=function(e,t,r){const n=(0,i.h)(a.rq.get(),e,(0,i.f)(e,t));return(0,i.d)(r,t,n),r}(e,(0,i.d)(a.rq.get(),t,n),a.rq.get());return(0,i.g)(r,o,n),r}function R(e,t,r,n){const o=e,c=a.rq.get(),l=a.rq.get();(0,u.VV)(o,c,l);const p=(0,i.d)(a.rq.get(),r,t),f=(0,s.gr)(c,p),d=(0,s.gr)(l,p),y=(0,s.gr)(o,p);return(0,i.i)(n,f,d,y)}function G(e,t){return Math.abs(C(e,t))}function C(e,t){return(0,i.f)(e,t)+e[3]}var V,P;function F(e){return e===V.INTERSECTS_INSIDE_OUT||e===V.INTERSECTS_OUTSIDE_IN}function D(e,t,r,o,s){const a=(0,i.f)(e,r),u=C(e,t);if(0===a)return u>=0?V.INSIDE:V.OUTSIDE;let c=-u/a;return o&U.CLAMP&&(c=(0,n.qE)(c,0,1)),!(o&U.INFINITE_MIN)&&c<0||!(o&U.INFINITE_MAX)&&c>1?u>=0?V.INSIDE:V.OUTSIDE:((0,i.g)(s,t,(0,i.h)(s,r,c)),u>=0?V.INTERSECTS_INSIDE_OUT:V.INTERSECTS_OUTSIDE_IN)}(P=V||(V={}))[P.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",P[P.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",P[P.INSIDE=2]="INSIDE",P[P.OUTSIDE=3]="OUTSIDE";const Z=[0,0,1,0];var U;!function(e){e[e.NONE=0]="NONE",e[e.CLAMP=1]="CLAMP",e[e.INFINITE_MIN=4]="INFINITE_MIN",e[e.INFINITE_MAX=8]="INFINITE_MAX"}(U||(U={}));const B=U.INFINITE_MIN|U.INFINITE_MAX,k=U.INFINITE_MAX},79578:function(e,t,r){r.d(t,{C:function(){return p},Cr:function(){return f},LV:function(){return l},kb:function(){return d},oC:function(){return y},vt:function(){return u}}),r(50659);var n=r(89736),i=(r(44705),r(87725)),o=r(20551),s=r(32501),a=r(50973);function u(e){return e?c((0,s.o8)(e.origin),(0,s.o8)(e.direction)):c((0,s.vt)(),(0,s.vt)())}function c(e,t){return{origin:e,direction:t}}function l(e,t){const r=h.get();return r.origin=e,r.direction=t,r}function p(e,t=u()){return function(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.c)(r.direction,t),r}(e.origin,e.direction,t)}function f(e,t,r=u()){return(0,o.c)(r.origin,e),(0,o.d)(r.direction,t,e),r}function d(e,t){const r=(0,o.e)(a.rq.get(),(0,o.n)(a.rq.get(),e.direction),(0,o.d)(a.rq.get(),t,e.origin));return(0,o.f)(r,r)}function y(e,t,r){const n=(0,o.f)(e.direction,(0,o.d)(r,t,e.origin));return(0,o.g)(r,e.origin,(0,o.h)(r,e.direction,n)),r}const h=new n.I((()=>u()));(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,i.vt)()},29531:function(e,t,r){r.d(t,{EJ:function(){return c},_I:function(){return s},g7:function(){return u},gr:function(){return a}});var n=r(15774),i=r(20551),o=r(32501);function s(e,t,r){const n=(0,i.f)(e,t)/(0,i.f)(e,e);return(0,i.h)(r,e,n)}function a(e,t){return(0,i.f)(e,t)/(0,i.l)(e)}function u(e,t){const r=(0,i.f)(e,t)/((0,i.l)(e)*(0,i.l)(t));return-(0,n.XM)(r)}function c(e,t,r){(0,i.n)(l,e),(0,i.n)(p,t);const o=(0,i.f)(l,p),s=(0,n.XM)(o),a=(0,i.e)(l,l,p);return(0,i.f)(a,r)<0?2*Math.PI-s:s}const l=(0,o.vt)(),p=(0,o.vt)()},50973:function(e,t,r){r.d(t,{Rc:function(){return y},J8:function(){return h},oG:function(){return p},rq:function(){return f},Km:function(){return d}}),r(58941);var n=r(29601),i=r(87725),o=r(39714),s=r(61769),a=r(1932),u=r(32501),c=r(41546);class l{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,n.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new l(a.vt)}static createVec3f64(){return new l(u.vt)}static createVec4f64(){return new l(c.vt)}static createMat3f64(){return new l(i.vt)}static createMat4f64(){return new l(o.vt)}static createQuatf64(){return new l(s.vt)}get test(){}}const p=l.createVec2f64(),f=l.createVec3f64(),d=l.createVec4f64(),y=(l.createMat3f64(),l.createMat4f64()),h=l.createQuatf64()},36313:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(53804),i=(r(50917),r(97922)),o=r(75743),s=r(16691),a=r(30905),u=r(95929),c=r(23502),l=r(77560),p=(r(13798),r(58941),r(65953)),f=r(67888),d=r(45532);let y=class extends((0,a.Te)(o.P)){constructor(e){super(e),this.observer=null,this.farDistance=1e3,this.heading=0,this.tilt=90,this.horizontalFieldOfView=45,this.verticalFieldOfView=45,this.feature=null}isValid(){return null!=this.observer&&this.farDistance>0}equals(e){return(0,u.CM)(this.observer,e.observer)&&this.farDistance===e.farDistance&&this.heading===e.heading&&this.tilt===e.tilt&&this.horizontalFieldOfView===e.horizontalFieldOfView&&this.verticalFieldOfView===e.verticalFieldOfView&&(0,i.xH)(this.feature,e.feature)}};(0,n._)([(0,c.MZ)({type:d.default,json:{write:!0}})],y.prototype,"observer",void 0),(0,n._)([(0,c.MZ)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],y.prototype,"farDistance",void 0),(0,n._)([(0,c.MZ)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,l.w)((e=>s.ie.normalize((0,f.GB)(e),void 0,!0)))],y.prototype,"heading",void 0),(0,n._)([(0,c.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],y.prototype,"tilt",void 0),(0,n._)([(0,c.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}})],y.prototype,"horizontalFieldOfView",void 0),(0,n._)([(0,c.MZ)({type:Number,nonNullable:!0,range:{min:0,max:180},json:{write:{isRequired:!0}}})],y.prototype,"verticalFieldOfView",void 0),(0,n._)([(0,c.MZ)(i.N1)],y.prototype,"feature",void 0),(0,n._)([(0,c.MZ)({json:{read:!1}})],y.prototype,"isValid",null),y=(0,n._)([(0,p.$)("esri.analysis.Viewshed")],y);const h=y;var g=r(31012),b=r(78879),v=r(61500),m=r(15774),w=r(28181),_=(r(40633),r(46157)),I=r(91484);const S=b.A.ofType(h);let M=class extends g.A{constructor(e){super(e),this.type="viewshed",this._extent=null}initialize(){this.addHandles((0,w.watch)((()=>this._computeExtent()),(e=>{null==e.pending&&(this._extent=e.extent)}),w.pc))}get viewsheds(){return this._get("viewsheds")||new S}set viewsheds(e){this._set("viewsheds",(0,v.V)(e,this.viewsheds,S))}get spatialReference(){for(const e of this.viewsheds)if(null!=e.observer)return e.observer.spatialReference;return null}get extent(){return this._extent}get requiredPropertiesForEditing(){return this.viewsheds.items.map((({observer:e})=>e))}async waitComputeExtent(){const e=this._computeExtent();null!=e.pending&&await e.pending}_computeExtent(){const{spatialReference:e}=this;if(null==e)return{pending:null,extent:null};const t=this.viewsheds.filter((e=>null!=e.observer)),r=t.map((e=>e.observer)).toArray(),n=(0,_.projectOrLoadMany)(r,e);return null!=n.pending?{pending:n.pending,extent:null}:{pending:null,extent:n.geometries.map(((e,r)=>{const n=t.at(r);return null!=e&&null!=n?this._computeViewshedExtent(this.viewsheds.at(r),e):null})).filter((e=>null!=e)).reduce(((e,t)=>function(e,t){return null==e?t:null==t?e:e.union(t)}(e,t)),null)}}_computeViewshedExtent(e,t){const{farDistance:r,heading:n,tilt:i,horizontalFieldOfView:o,verticalFieldOfView:a}=e,{spatialReference:u}=t,c=o/2,l=a/2,p=r/u.metersPerUnit,f=[s.ie.normalize(n-c),n,s.ie.normalize(n+c)],d=I.default.fromPoint(t),y=e=>{const t=f.map((t=>s.ie.normalize(t-e)));if(t[0]>t[2]||360===o)return p;const r=t.map((e=>Math.abs(e>180?360-e:e))).reduce(((e,t)=>e>t?t:e));return r>90?0:p*Math.cos((0,m.kU)(r))};d.xmax+=y(90),d.xmin-=y(-90),d.ymax+=y(0),d.ymin-=y(180);const h=t.z;if(null!=h){let e=h,t=h;const n=i-90,o=(0,m.qE)(n+l,-90,90),s=(0,m.qE)(n-l,-90,90),a=u?.isGeographic?r:p;e+=a*E(o),t+=a*E(s);const f=T(l)*a,y=E(n)*f*(1-T(c));i<90&&(e-=y),i>90&&(t-=y),d.zmax=Math.max(e,h),d.zmin=Math.min(t,h)}return d}clear(){this.viewsheds.removeAll()}};function T(e){return Math.cos((0,m.kU)(e))}function E(e){return Math.sin((0,m.kU)(e))}(0,n._)([(0,c.MZ)({type:["viewshed"]})],M.prototype,"type",void 0),(0,n._)([(0,c.MZ)({cast:v.H,type:S,nonNullable:!0})],M.prototype,"viewsheds",null),(0,n._)([(0,c.MZ)({readOnly:!0})],M.prototype,"spatialReference",null),(0,n._)([(0,c.MZ)()],M.prototype,"_extent",void 0),(0,n._)([(0,c.MZ)({readOnly:!0})],M.prototype,"extent",null),(0,n._)([(0,c.MZ)({readOnly:!0})],M.prototype,"requiredPropertiesForEditing",null),M=(0,n._)([(0,p.$)("esri.analysis.ViewshedAnalysis")],M);const O=M;var L=r(77793),A=r(81392),N=r(20833),j=r(92078);let q=class extends((0,j.q)((0,L.P)(N.A))){constructor(e){super(e),this.type="viewshed",this.operationalLayerType="ViewshedLayer",this.source=new O,this.opacity=1}initialize(){this.addHandles((0,w.watch)((()=>this.source),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),w.pc))}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new O)}get analysis(){return this.source}set analysis(e){this.source=e}get viewsheds(){return this.source.viewsheds}set viewsheds(e){this.source.viewsheds=e}writeViewsheds(e,t,r,n){t.viewsheds=e.filter((e=>e.isValid())).map((e=>e.toJSON(n))).toJSON()}};(0,n._)([(0,c.MZ)({json:{read:!1},readOnly:!0})],q.prototype,"type",void 0),(0,n._)([(0,c.MZ)({type:["ViewshedLayer"]})],q.prototype,"operationalLayerType",void 0),(0,n._)([(0,c.MZ)({nonNullable:!0})],q.prototype,"source",void 0),(0,n._)([(0,c.MZ)({readOnly:!0})],q.prototype,"spatialReference",null),(0,n._)([(0,c.MZ)({readOnly:!0})],q.prototype,"fullExtent",null),(0,n._)([(0,c.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],q.prototype,"opacity",void 0),(0,n._)([(0,c.MZ)({type:["show","hide"]})],q.prototype,"listMode",void 0),(0,n._)([(0,c.MZ)({type:b.A.ofType(h),json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{ignoreOrigin:!0}}}}})],q.prototype,"viewsheds",null),(0,n._)([(0,A.K)("web-scene","viewsheds")],q.prototype,"writeViewsheds",null),q=(0,n._)([(0,p.$)("esri.layers.ViewshedLayer")],q);const x=q},92078:function(e,t,r){r.d(t,{q:function(){return w}});var n=r(53804),i=r(39819),o=r(90683),s=r(23502),a=r(67888),u=(r(13798),r(58941),r(47332)),c=r(65953),l=r(81392),p=r(64786),f=r(97354),d=r(99495);const y={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},h={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},g={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},b={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":y,"web-map/basemap":h,"web-map/tables":g,"link-chart/operational-layers":{...y,LinkChartLayer:!0},"link-chart/basemap":h,"link-chart/tables":g,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};var v=r(7010),m=r(52038);const w=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,n){(n&&"ground"===n.layerContainerType||e&&(0,d.R)(this,r,{},n))&&(t[r]=e)}writeOperationalLayerType(e,t,r,n){e&&"tables"!==n?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?m.A.fromArray(e):null}writeTimeExtent(e,t,r,n){e&&"tables"!==n.layerContainerType&&(e.isEmpty?n?.messages&&n.messages.push(new i.A("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,f.t)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`,r=b[e];let n=!!r?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(n=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(n=!1),!n)return t.messages?.push(new i.A("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),n=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof i.A&&"web-document-write:property-required"===e.name)).length;return(0,o.w8)(r?.url)?(t?.messages?.push(new i.A("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:r}beforeSave(){}};return(0,n._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,n._)([(0,u.w)("id",["id"])],t.prototype,"readId",null),(0,n._)([(0,s.MZ)(v.C1)],t.prototype,"listMode",void 0),(0,n._)([(0,l.K)("listMode")],t.prototype,"writeListMode",null),(0,n._)([(0,s.MZ)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:p.K}}}}})],t.prototype,"operationalLayerType",void 0),(0,n._)([(0,l.K)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,n._)([(0,s.MZ)(v.ke)],t.prototype,"opacity",void 0),(0,n._)([(0,s.MZ)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,n._)([(0,l.K)("title"),(0,l.K)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,n._)([(0,s.MZ)({type:m.A,json:{origins:{"web-scene":{write:{layerContainerTypes:p.K}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,n._)([(0,u.w)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,n._)([(0,l.K)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[a.jz,a.Uv]]}})],t.prototype,"writeTimeExtent",null),(0,n._)([(0,s.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:p.K}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,n._)([(0,c.$)("esri.layers.mixins.OperationalLayer")],t),t}},7010:function(e,t,r){r.d(t,{C1:function(){return M},Fm:function(){return w},Ih:function(){return m},M6:function(){return p},OZ:function(){return d},PY:function(){return l},Qo:function(){return g},Yj:function(){return h},fV:function(){return y},hG:function(){return S},hn:function(){return I},id:function(){return _},kF:function(){return f},ke:function(){return v},zQ:function(){return T}});var n=r(64786),i=r(91484),o=r(57165),s=r(60534),a=r(6422),u=r(92777),c=r(59798);const l={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:n.K}}},p={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},f={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:n.K}}},d={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:s.w}}},y={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:n.K}}},h={value:null,type:a.A,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:n.K}}};function g(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const b={write:{enabled:!0,layerContainerTypes:n.K},read:!0},v={type:Number,json:{origins:{"web-document":b,"portal-item":{write:!0}}}},m={...v,json:{...v.json,origins:{"web-document":{...b,write:{enabled:!0,layerContainerTypes:n.K,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,c.D)(t.layerDefinition.drawingInfo.transparency):void 0:(0,c.D)(t.drawingInfo.transparency)}}},w={type:i.default,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=i.default.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=o.A.fromJSON(t.spatialReference)),r}}}},read:!1}},_={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},I={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:n.K}}},name:"layerDefinition.minScale",write:!0}},S={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:n.K}}},name:"layerDefinition.maxScale",write:!0}},M={json:{write:{ignoreOrigin:!0,layerContainerTypes:n.K},origins:{"web-map":{read:!1,write:!1}}}},T={type:u.A,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}}},92777:function(e,t,r){r.d(t,{A:function(){return x}});var n=r(53804),i=r(30905),o=r(21609),s=r(23502),a=r(77560),u=r(47332),c=r(65953),l=r(81392);let p=class extends i.oY{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,n._)([(0,s.MZ)()],p.prototype,"type",void 0),p=(0,n._)([(0,c.$)("esri.tables.elements.AttributeTableElement")],p);const f=p;var d,y=r(67888);r(58941),r(40633),r(13798);let h=d=class extends f{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new d({description:this.description,displayType:this.displayType,label:this.label})}};(0,n._)([(0,s.MZ)({type:["auto"],json:{write:!0}})],h.prototype,"displayType",void 0),(0,n._)([(0,s.MZ)({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=d=(0,n._)([(0,c.$)("esri.tables.elements.AttributeTableAttachmentElement")],h);const g=h;var b;let v=b=class extends f{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new b({description:this.description,fieldName:this.fieldName,label:this.label})}};(0,n._)([(0,s.MZ)({type:String,json:{write:!0}})],v.prototype,"fieldName",void 0),(0,n._)([(0,s.MZ)({type:String,json:{read:!1,write:!0}})],v.prototype,"type",void 0),v=b=(0,n._)([(0,c.$)("esri.tables.elements.AttributeTableFieldElement")],v);const m=v;var w;let _=w=class extends f{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new w({description:this.description,label:this.label,relationshipId:this.relationshipId})}};(0,n._)([(0,s.MZ)({type:Number,json:{write:!0}})],_.prototype,"relationshipId",void 0),(0,n._)([(0,s.MZ)({type:["relationship"],json:{read:!1,write:!0}})],_.prototype,"type",void 0),_=w=(0,n._)([(0,c.$)("esri.tables.elements.AttributeTableRelationshipElement")],_);const I=_;function S(e){return{typesWithGroup:{base:f,key:"type",typeMap:{attachment:g,field:m,group:e,relationship:I}},typesWithoutGroup:{base:f,key:"type",typeMap:{attachment:g,field:m,relationship:I}}}}function M(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>n[e.type])).map((e=>n[e.type].fromJSON(e)))}function T(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>n[e.type])).map((e=>e.toJSON()))}function E(e,t,r=!0){return e?e.map((e=>(0,y.aq)(r?t.typesWithGroup:t.typesWithoutGroup,e))):null}var O;let L=O=class extends f{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return E(e,A,!1)}readElements(e,t){return M(t.attributeTableElements,A,!1)}writeElements(e,t){t.attributeTableElements=T(e,A,!1)}clone(){return new O({description:this.description,elements:(0,o.o8)(this.elements),label:this.label})}};(0,n._)([(0,s.MZ)({json:{write:!0}})],L.prototype,"elements",void 0),(0,n._)([(0,a.w)("elements")],L.prototype,"castElements",null),(0,n._)([(0,u.w)("elements",["attributeTableElements"])],L.prototype,"readElements",null),(0,n._)([(0,l.K)("elements")],L.prototype,"writeElements",null),(0,n._)([(0,s.MZ)({type:String,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=O=(0,n._)([(0,c.$)("esri.tables.elements.AttributeTableGroupElement")],L);const A=S(L);var N;const j=S(L);let q=N=class extends i.oY{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return E(e,j)}readElements(e,t){return M(t.attributeTableElements,j)}writeElements(e,t){t.attributeTableElements=T(e,j)}clone(){return new N({elements:(0,o.o8)(this.elements),orderByFields:this.orderByFields})}};(0,n._)([(0,s.MZ)({json:{write:!0}})],q.prototype,"elements",void 0),(0,n._)([(0,a.w)("elements")],q.prototype,"castElements",null),(0,n._)([(0,u.w)("elements",["attributeTableElements"])],q.prototype,"readElements",null),(0,n._)([(0,l.K)("elements")],q.prototype,"writeElements",null),(0,n._)([(0,s.MZ)({type:[Object],json:{write:!0}})],q.prototype,"orderByFields",void 0),q=N=(0,n._)([(0,c.$)("esri.tables.AttributeTableTemplate")],q);const x=q},76185:function(e,t,r){r.d(t,{VV:function(){return a},hG:function(){return o},wp:function(){return s}}),r(15774);var n=r(20551),i=r(32501);function o(e){const t=e[0]*e[0]+e[4]*e[4]+e[8]*e[8],r=e[1]*e[1]+e[5]*e[5]+e[9]*e[9],n=e[2]*e[2]+e[6]*e[6]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}function s(e,t){const r=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),i=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),o=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return(0,n.i)(e,r,i,o),e}function a(e,t,r){Math.abs(e[0])>Math.abs(e[1])?(0,n.i)(t,0,1,0):(0,n.i)(t,1,0,0),(0,n.e)(r,e,t),(0,n.e)(t,r,e),(0,n.n)(r,r),(0,n.n)(t,t)}(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()},89756:function(e,t,r){r.d(t,{MQ:function(){return i}}),r(38177);var n=r(50456);r(59356);class i extends n.R6{constructor(e,t,r){super(e,t),this.triangleNr=r}}},38177:function(e,t,r){var n,i;r.d(t,{H6:function(){return o},dz:function(){return n},oH:function(){return i}}),function(e){e[e.OBJECT=0]="OBJECT",e[e.HUD=1]="HUD",e[e.TERRAIN=2]="TERRAIN",e[e.OVERLAY=3]="OVERLAY",e[e.I3S=4]="I3S",e[e.PCL=5]="PCL",e[e.LOD=6]="LOD",e[e.VOXEL=7]="VOXEL",e[e.TILES3D=8]="TILES3D"}(n||(n={}));class o{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}!function(e){e[e.MIN=0]="MIN",e[e.MINMAX=1]="MINMAX",e[e.ALL=2]="ALL"}(i||(i={}))},50456:function(e,t,r){r.d(t,{B$:function(){return o},HE:function(){return s},R6:function(){return a}});var n=r(32501);class i{constructor(e,t,r){this.object=e,this.geometryId=t,this.triangleNr=r}}class o extends i{constructor(e,t,r,i){super(e,t,r),this.center=null!=i?(0,n.o8)(i):null}}class s{constructor(e){this.layerUid=e}}class a extends s{constructor(e,t){super(e),this.graphicUid=t}}},59356:function(e,t,r){r.d(t,{i3:function(){return i}}),r(20551);var n=r(32501);function i(e){return null!=e?.dist}r(2075),r(38177),(0,n.vt)()},84363:function(e,t,r){r.d(t,{h:function(){return i}}),r(38177);var n=r(50456);r(59356);class i extends n.R6{constructor(e,t,r,n,i,o){super(e,t),this.layerUid=e,this.graphicUid=t,this.geometryId=r,this.triangleNr=n,this.baseBoundingSphere=i,this.numLodLevels=o}}}}]);
//# sourceMappingURL=ViewshedLayer.js.map