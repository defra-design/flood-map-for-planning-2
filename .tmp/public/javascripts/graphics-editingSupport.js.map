{"version":3,"file":"graphics-editingSupport.js","mappings":"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","sources":["webpack://defra/./node_modules/@arcgis/core/geometry/support/normalizeUtils.js","webpack://defra/./node_modules/@arcgis/core/rest/geometryService/cut.js","webpack://defra/./node_modules/@arcgis/core/rest/geometryService/simplify.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/editingSupport.js","webpack://defra/./node_modules/@arcgis/core/layers/mixins/EditBusLayer.js","webpack://defra/./node_modules/@arcgis/core/layers/support/infoFor3D.js","webpack://defra/./node_modules/@arcgis/core/rest/geometryService/utils.js","webpack://defra/./node_modules/@arcgis/core/rest/utils.js","webpack://defra/./node_modules/@arcgis/core/versionManagement/support/versionManagementUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../config.js\";import e from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import o from\"../Polygon.js\";import s from\"../Polyline.js\";import{getGeometryParts as r,cutParams as i,offsetMagnitude as l,updatePolyGeometry as c}from\"./normalizeUtilsCommon.js\";import{getInfo as f}from\"./spatialReferenceUtils.js\";import{geographicToWebMercator as u,webMercatorToGeographic as p}from\"./webMercatorUtils.js\";import{cut as a}from\"../../rest/geometryService/cut.js\";import{simplify as h}from\"../../rest/geometryService/simplify.js\";const m=()=>n.getLogger(\"esri.geometry.support.normalizeUtils\");function g(t){return\"polygon\"===t.type}function y(t){return\"polygon\"===t[0].type}function x(t){return\"polyline\"===t[0].type}function d(t){const e=[];let n=0,o=0;for(let s=0;s<t.length;s++){const r=t[s];let i=null;for(let t=0;t<r.length;t++)i=r[t],e.push(i),0===t?(n=i[0],o=n):(n=Math.min(n,i[0]),o=Math.max(o,i[0]));i&&e.push([(n+o)/2,0])}return e}function M(t,n){if(!(t instanceof s||t instanceof o)){const t=\"straightLineDensify: the input geometry is neither polyline nor polygon\";throw m().error(t),new e(t)}const i=r(t),l=[];for(const e of i){const t=[];l.push(t),t.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],r=e[o][1],i=e[o+1][0],l=e[o+1][1],c=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),f=(l-r)/c,u=(i-s)/c,p=c/n;if(p>1){for(let l=1;l<=p-1;l++){const e=l*n,o=u*e+s,i=f*e+r;t.push([o,i])}const e=(c+Math.floor(p-1)*n)/2,o=u*e+s,i=f*e+r;t.push([o,i])}t.push([i,l])}}return g(t)?new o({rings:l,spatialReference:t.spatialReference}):new s({paths:l,spatialReference:t.spatialReference})}function w(t,e,n){if(e){const e=M(t,1e6);t=p(e,!0)}return n&&(t=c(t,n)),t}function b(t,e,n){if(Array.isArray(t)){const o=t[0];if(o>e){const n=l(o,e);t[0]=o+n*(-2*e)}else if(o<n){const e=l(o,n);t[0]=o+e*(-2*n)}}else{const o=t.x;if(o>e){const n=l(o,e);t=t.clone().offset(n*(-2*e),0)}else if(o<n){const e=l(o,n);t=t.clone().offset(e*(-2*n),0)}}return t}function j(t,e){let n=-1;for(let o=0;o<e.cutIndexes.length;o++){const s=e.cutIndexes[o],i=e.geometries[o],c=r(i);for(let t=0;t<c.length;t++){const e=c[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const o=e[t][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*l(n,180);for(let s=0;s<e.length;s++){const e=i.getPoint(t,s);i.setPoint(t,s,e.clone().offset(o,0))}return!0}}))}if(s===n){if(y(t))for(const e of r(i))t[s]=t[s].addRing(e);else if(x(t))for(const e of r(i))t[s]=t[s].addPath(e)}else n=s,t[s]=i}return t}async function R(e,n,r){if(!Array.isArray(e))return R([e],n);n&&\"string\"!=typeof n&&m().warn(\"normalizeCentralMeridian()\",\"The url object is deprecated, use the url string instead\");const p=\"string\"==typeof n?n:n?.url??t.geometryServiceUrl;let g,y,x,d,M,v,P,L,U=0;const z=[],A=[];for(const t of e)if(null!=t)if(g||(g=t.spatialReference,y=f(g),x=g.isWebMercator,v=x?102100:4326,d=i[v].maxX,M=i[v].minX,P=i[v].plus180Line,L=i[v].minus180Line),y)if(\"mesh\"===t.type)A.push(t);else if(\"point\"===t.type)A.push(b(t.clone(),d,M));else if(\"multipoint\"===t.type){const e=t.clone();e.points=e.points.map((t=>b(t,d,M))),A.push(e)}else if(\"extent\"===t.type){const e=t.clone()._normalize(!1,!1,y);A.push(e.rings?new o(e):e)}else if(t.extent){const e=t.extent,n=l(e.xmin,M)*(2*d);let o=0===n?t.clone():c(t.clone(),n);e.offset(n,0);let{xmin:s,xmax:r}=e;s=Number(s.toFixed(9)),r=Number(r.toFixed(9)),e.intersects(P)&&r!==d?(U=r>U?r:U,o=w(o,x),z.push(o),A.push(\"cut\")):e.intersects(L)&&s!==M?(U=r*(2*d)>U?r*(2*d):U,o=w(o,x,360),z.push(o),A.push(\"cut\")):A.push(o)}else A.push(t.clone());else A.push(t);else A.push(t);let F=l(U,d),N=-90;const S=F,k=new s;for(;F>0;){const t=360*F-180;k.addPath([[t,N],[t,-1*N]]),N*=-1,F--}if(z.length>0&&S>0){const t=j(z,await a(p,z,k,r)),n=[],o=[];for(let r=0;r<A.length;r++){const s=A[r];if(\"cut\"!==s)o.push(s);else{const s=t.shift(),i=e[r];null!=i&&\"polygon\"===i.type&&i.rings&&i.rings.length>1&&s.rings.length>=i.rings.length?(n.push(s),o.push(\"simplify\")):o.push(x?u(s):s)}}if(!n.length)return o;const s=await h(p,n,r),i=[];for(let e=0;e<o.length;e++){const t=o[e];\"simplify\"!==t?i.push(t):i.push(x?u(s.shift()):s.shift())}return i}const C=[];for(let t=0;t<A.length;t++){const e=A[t];if(\"cut\"!==e)C.push(e);else{const t=z.shift();C.push(!0===x?u(t):t)}}return C}function v(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&f(t.spatialReference);if(!n)return e;const[o,s]=n.valid,r=2*s,{width:i}=e;let l,{xmin:c,xmax:u}=e;if([c,u]=[u,c],\"extent\"===t.type||0===i||i<=s||i>r||c<o||u>s)return e;switch(t.type){case\"polygon\":if(!(t.rings.length>1))return e;l=d(t.rings);break;case\"polyline\":if(!(t.paths.length>1))return e;l=d(t.paths);break;case\"multipoint\":l=t.points}const p=e.clone();for(let f=0;f<l.length;f++){let t=l[f][0];t<0?(t+=s,u=Math.max(t,u)):(t-=s,c=Math.min(t,c))}return p.xmin=c,p.xmax=u,p.width<i?(p.xmin-=s,p.xmax-=s,p):e}function P(t,e,n){const o=f(n);if(null==o)return t;const[s,r]=o.valid,i=2*r;let l=0,c=0;e>r?l=Math.ceil(Math.abs(e-r)/i):e<s&&(l=-Math.ceil(Math.abs(e-s)/i)),t>r?c=Math.ceil(Math.abs(t-r)/i):t<s&&(c=-Math.ceil(Math.abs(t-s)/i));let u=t+(l-c)*i;const p=u-e;return p>r?u-=i:p<s&&(u+=i),u}function L(t,e){const n=f(e);if(n){const[e,o]=n.valid,s=o-e;if(t<e)for(;t<e;)t+=s;if(t>o)for(;t>o;)t-=s}return t}export{P as getClosestDenormalizedXToReference,v as getDenormalizedExtent,R as normalizeCentralMeridian,L as normalizeMapX,M as straightLineDensify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import{getJsonType as t,fromJSON as r}from\"../../geometry/support/jsonUtils.js\";import{srToRESTValue as s}from\"../../geometry/support/spatialReferenceUtils.js\";import{parseUrl as o}from\"../utils.js\";async function i(i,n,p,m){const a=o(i),u=n[0].spatialReference,c={...m,responseType:\"json\",query:{...a.query,f:\"json\",sr:s(u),target:JSON.stringify({geometryType:t(n[0]),geometries:n}),cutter:JSON.stringify(p)}},f=await e(a.path+\"/cut\",c),{cutIndexes:y,geometries:g=[]}=f.data;return{cutIndexes:y,geometries:g.map((e=>{const t=r(e);return t.spatialReference=u,t}))}}export{i as cut};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport r from\"../../request.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import{getJsonType as e}from\"../../geometry/support/jsonUtils.js\";import{srToRESTValue as s}from\"../../geometry/support/spatialReferenceUtils.js\";import{encodeGeometries as o,decodeGeometries as i}from\"./utils.js\";async function m(m,p,f){const n=\"string\"==typeof m?t(m):m,a=p[0].spatialReference,u=e(p[0]),l={...f,query:{...n.query,f:\"json\",sr:s(a),geometries:JSON.stringify(o(p))}},{data:y}=await r(n.path+\"/simplify\",l);return i(y.geometries,u,a)}export{m as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../Polyline.js\";import n from\"../SpatialReference.js\";import{isPolygon as t}from\"./jsonUtils.js\";const r={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new e({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.WebMercator}),minus180Line:new e({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:n.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:n.WGS84})}};function i(e,n){return Math.ceil((e-n)/(2*n))}function s(e,n){const t=o(e);for(const r of t)for(const e of r)e[0]+=n;return e}function o(e){return t(e)?e.rings:e.paths}export{r as cutParams,o as getGeometryParts,i as offsetMagnitude,s as updatePolyGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as i}from\"../../core/promiseUtils.js\";import{dataComponents as n}from\"../../core/urlUtils.js\";import{generateBracedUUID as o}from\"../../core/uuid.js\";import{normalizeCentralMeridian as l}from\"../../geometry/support/normalizeUtils.js\";import{isGeographic as d,equals as u,isWGS84 as p,isWebMercator as c}from\"../../geometry/support/spatialReferenceUtils.js\";import{isEditBusLayer as h,emitApplyEditsEvent as m}from\"../mixins/EditBusLayer.js\";import{isValidFieldValue as f}from\"../support/fieldUtils.js\";import{isGlbSupportedEditFormat as y}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as g,getEffectiveLayerCapabilities as b}from\"../support/layerUtils.js\";function w(e){return null!=e?.applyEdits}function F(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function A(e){return e.every(F)}function v(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function I(e){return e.every(v)}async function $(e,t,a,s={}){let n;const o=\"gdbVersion\"in e?e.gdbVersion:null,l=s.gdbVersion??o;if(h(e)&&e.url)n=m(e.url,e.layerId,l,\"original-and-current-features\"===s.returnServiceEditsOption);else{n=i(),n.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:n.promise};e.emit(\"apply-edits\",t)}try{const{results:i,edits:o}=await E(e,t,a,s),l=e=>e.filter((e=>!e.error)).map(r),d={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return i.editedFeatureResults?.length&&(d.editedFeatures=i.editedFeatureResults),n.resolve(d),i}catch(d){throw n.reject(d),d}}async function E(e,t,r,s){if(await e.load(),!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!g(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:n}=await S(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,n)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function S(e,t,r){const i=b(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),l=null!=e.infoFor3D;if(V(t,i,r,!!n,!!o,`${e.type}-layer`),!i.data.isVersioned&&r?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!i.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");const d={...r};if(null!=d.rollbackOnFailureEnabled||i.editing.supportsRollbackOnFailure||(d.rollbackOnFailureEnabled=!0),d.rollbackOnFailureEnabled||\"original-and-current-features\"!==d.returnServiceEditsOption||(!1===d.rollbackOnFailureEnabled&&s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"),d.rollbackOnFailureEnabled=!0),!i.editing.supportsReturnServiceEditsInSourceSpatialReference&&d.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(d.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==d.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const u=G(t,i,`${e.type}-layer`),p=r?.globalIdUsed||l,c=e.fields.filter((e=>\"big-integer\"===e.type||\"oid\"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new a(`${e.type}-layer:invalid-parameter`,\"Layer does not specify a global id field.\");u.addFeatures.forEach((e=>B(e,t)))}u.addFeatures.forEach((t=>O(t,e,p,c))),u.updateFeatures.forEach((t=>k(t,e,p,c))),u.deleteFeatures.forEach((t=>U(t,e,p,c))),u.addAttachments.forEach((t=>L(t,e))),u.updateAttachments.forEach((t=>L(t,e))),l&&await x(u,e);return{edits:await T(u),options:d}}function R(e,t,r,s){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"`'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(s.length&&\"attributes\"in e)for(const i of s){const r=e.attributes[i.name];if(void 0!==r&&!f(i,r))throw new a(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function j(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,o=\"local\"===i.type,l=d(n),h=u(n,s),m=h||p(n)&&(p(s)||c(s));if(!(o&&l&&m||!o&&!l&&h))throw new a(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function O(e,t,a,r){R(e,t,a,r),j(e,t)}function U(e,t,a,r){R(e,t,a,r)}function k(e,t,r,s){R(e,t,r,s),j(e,t);const i=b(t);if(\"geometry\"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function L(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=n(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}function B(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=o())}async function T(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await l(r),i=t.length,n=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+n).forEach(((e,t)=>a[t].geometry=e)),e}function D(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&t.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function G(e,t,r){const s=D(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new a(`${r}:unsupported-operation`,\"Layer does not support adding features.\");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new a(`${r}:unsupported-operation`,\"Layer does not support updating features.\");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new a(`${r}:unsupported-operation`,\"Layer does not support deleting features.\");return s.addFeatures=s.addFeatures.map(M),s.updateFeatures=s.updateFeatures.map(M),s.addAssetFeatures=[],s}function V(e,t,r,s,i,n){if(!e||!s&&!i)throw new a(`${n}:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!t.editing.supportsGlobalId&&r?.globalIdUsed)throw new a(`${n}:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!t.editing.supportsGlobalId&&i)throw new a(`${n}:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!r?.globalIdUsed&&i)throw new a(`${n}:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\")}function M(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function x(e,t){const{infoFor3D:r}=t;if(null==r)return;if(!y(r))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const a of e.addFeatures??[])z(a)&&s.push(a);for(const a of e.updateFeatures??[])z(a)&&s.push(a)}function z(e){return\"mesh\"===e?.geometry?.type}function q(e,t,r,s){if(!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{$ as applyEdits,V as checkEditingCapabilities,I as isFeatureIdentifierArrayWithGlobalId,A as isFeatureIdentifierArrayWithObjectId,v as isFeatureIdentifierWithGlobalId,F as isFeatureIdentifierWithObjectId,D as normalizeCollections,G as normalizeEdits,T as normalizeGeometries,M as shallowCloneFeature,q as uploadAssets};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Evented.js\";import{clone as i}from\"../../core/lang.js\";import{createResolver as s}from\"../../core/promiseUtils.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import{defaultVersionNameLookup as o,isVersionInEditSession as n}from\"../../versionManagement/support/versionManagementUtils.js\";const a=new e.EventEmitter;function l(t){return a.on(\"apply-edits\",new WeakRef(t))}function h(t){return a.on(\"update-moment\",new WeakRef(t))}function c(t,e,i=null,r=!1){const d=s();return r=null==e||r,a.emit(\"apply-edits\",{serviceUrl:t,layerId:e,gdbVersion:i,mayReceiveServiceEdits:r,result:d.promise}),d}function u(t,e,i=null,s){a.emit(\"update-moment\",{serviceUrl:t,layerId:e,gdbVersion:i,moment:s})}const m=Symbol();function p(t){return null!=t&&\"object\"==typeof t&&m in t}function b(t){return null!=t&&\"object\"==typeof t&&\"gdbVersion\"in t}function g(t,e,i){const s=new URL(t).host,r=o.get(s),d=t=>!t||t===r;return d(e)&&d(i)||e===i}const F=e=>{var s;let o=class extends e{constructor(...t){super(...t),this[s]=!0,this._applyEditsHandler=t=>{const{serviceUrl:e,layerId:s,gdbVersion:r,mayReceiveServiceEdits:d,result:o}=t,n=e===this.url,a=null!=s&&null!=this.layerId&&s===this.layerId,l=b(this),h=b(this)&&g(e,r,this.gdbVersion);if(!n||l&&!h||!a&&!d)return;const c=o.then((t=>{if(this.lastEditsEventDate=new Date,a&&(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length))return this.emit(\"edits\",i(t)),t;const s=t.editedFeatures?.find((({layerId:t})=>t===this.layerId));if(s){const{adds:e,updates:r,deletes:d}=s.editedFeatures,o={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:e?e.map((({attributes:t})=>({objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}))):[],deletedFeatures:d?d.map((({attributes:t})=>({objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}))):[],updatedFeatures:r?r.map((({current:{attributes:t}})=>({objectId:this.objectIdField&&t[this.objectIdField],globalId:this.globalIdField&&t[this.globalIdField]}))):[],editedFeatures:i(t.editedFeatures),exceededTransferLimit:!1,historicMoment:i(t.historicMoment)};return this.emit(\"edits\",o),o}const d={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:i(t.editedFeatures),exceededTransferLimit:!1,historicMoment:i(t.historicMoment)};return\"historicMoment\"in this&&this._shouldUpdateHistoricMoment(e,r,d.historicMoment)&&this.emit(\"edits\",d),d})).then((t=>(\"historicMoment\"in this&&this._shouldUpdateHistoricMoment(e,r,t.historicMoment)&&(this.historicMoment=t.historicMoment),t)));this.emit(\"apply-edits\",{result:c})},this._updateMomentHandler=t=>{const{serviceUrl:e,gdbVersion:i,moment:s}=t,r=e===this.url,d=b(this),o=b(this)&&g(e,i,this.gdbVersion),n=b(this)&&!g(e,this.gdbVersion,null);r&&d&&o&&n&&\"historicMoment\"in this&&this.historicMoment!==s&&(this.historicMoment=s)},this.when().then((()=>{this.addHandles(l(this._applyEditsHandler)),\"historicMoment\"in this&&this.addHandles(h(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(t,e,i){return\"historicMoment\"in this&&this.historicMoment!==i&&n(t,e)}};return s=m,t([r()],o.prototype,\"lastEditsEventDate\",void 0),o=t([d(\"esri.layers.mixins.EditBusLayer\")],o),o};export{F as EditBusLayer,c as emitApplyEditsEvent,u as emitUpdateMomentEvent,p as isEditBusLayer,b as isLayerWithGDBVersion,l as onApplyEditsEvent,h as onUpdateMomentEvent,g as versionMatches};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst t=[[\"binary\",\"application/octet-stream\",\"bin\",\"\"]];function n(t,n){return null!=C(n.name,t?.supportedFormats??[])}function r(t,n){if(!t)return!1;const r=c(n,t.supportedFormats??[]);return null!=r&&t.editFormats.includes(r)}function o(t){return F(t?.supportedFormats??[]).flatMap(j).map((t=>`.${t}`))}function e(t){const n={};for(const r of F(t?.supportedFormats??[])){const[t,o]=g(r).split(\";\"),e=t.trim().toLowerCase(),u=j(r).map((t=>`.${t}`));n[e]??=[],n[e].push(...u)}return{description:\"3D Models\",accept:n}}function u(t,n){return L(b(t,n))}function i(t,n){return L(C(t,n))}function s(t,n){return g(w(t,n))}function c(t,n){return i(t.name,n)??u(t.type,n)}function p(t,n,r){return u(t,r)??i(n,r)}function a({supportedFormats:t}){return p(\"model/gltf-binary\",\"glb\",t)}function f(t){const n=a(t);return null!=n&&t.editFormats.includes(n)}function d({supportedFormats:t}){return p(\"model/gltf+json\",\"gltf\",t)}function l({supportedFormats:t}){return p(\"application/esri3do-SR_world\",\"wld\",t)}function m({supportedFormats:t}){return p(\"application/esri3do-SR_prj\",\"prj\",t)}function F(n){return[...t,...n]}function w(t,n){return F(n).find((n=>L(n)===t))}function b(t,n){const r=t.toLowerCase();return F(n).find((t=>g(t)===r))}function C(t,n){const r=t.toLowerCase();return F(n).find((t=>j(t).some((t=>r.endsWith(t)))))}function L(t){return t?.[0]}function g(t){return t?.[1].toLowerCase()}function j(t){return t?.[2].split(\",\").map((t=>t.toLowerCase()))??[]}function y(t){return t?.[3]}function M(t){return t.tables?.find((t=>\"assetMaps\"===t.role))}export{M as getAssetMapTable,c as getFileFormatId,e as getFilePickerAcceptType,i as getFilenameFormatId,y as getFormatDescription,j as getFormatExtensions,L as getFormatId,s as getFormatIdMimeType,g as getFormatMimeType,a as getGlbFormatId,d as getGltfFormatId,u as getMimeTypeFormatId,p as getMimeTypeOrFilenameFormatId,m as getPrjFormatId,o as getSupportedExtensions,l as getWorldFileFormatId,r as isFileEditFormat,n as isFileSupported,f as isGlbSupportedEditFormat};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getJsonType as e,getGeometryType as t}from\"../../geometry/support/jsonUtils.js\";function r(t){return{geometryType:e(t[0]),geometries:t.map((e=>e.toJSON()))}}function o(e,r,o){const n=t(r);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=o,t}))}export{o as decodeGeometries,r as encodeGeometries};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport r from\"../config.js\";import{id as t}from\"../kernel.js\";import{clone as o}from\"../core/lang.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import{isApiKeyApplicable as e}from\"../support/apiKeyUtils.js\";function i(r,t){return t?{...t,query:{...r??{},...t.query}}:{query:r}}function f(r){return\"string\"==typeof r?n(r):o(r)}function s(r,t,o){const n={};for(const e in r){if(\"declaredClass\"===e)continue;const i=r[e];if(null!=i&&\"function\"!=typeof i)if(Array.isArray(i))n[e]=i.map((r=>s(r)));else if(\"object\"==typeof i)if(i.toJSON){const r=i.toJSON(o?.[e]);n[e]=t?r:JSON.stringify(r)}else n[e]=t?i:JSON.stringify(i);else n[e]=i}return n}function u(o,n){return o?e(o,n)?n||r.apiKey:t?.findCredential(o)?.token:null}export{i as asValidOptions,s as encode,u as getToken,f as parseUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{generateLowercaseBracedUUID as r}from\"../../core/uuid.js\";const t=r(),n=new Map,s=new Map,a=new Map;async function o(r,t,s){if(!r||!s)return!1;if(!t)return!0;const a=new URL(r).host;let o=n.get(a);if(!o){const t=r.replace(/\\/FeatureServer/i,\"/VersionManagementServer\").replace(/\\/\\d*$/,\"\");o=(await e(t,{responseType:\"json\",query:{f:\"json\"}})).data.defaultVersionName}return o===t}async function i(e,r,n=!1){if(!e||!r)return!0;const a=e.replace(/\\/FeatureServer/i,\"/VersionManagementServer\").replace(/\\/\\d*$/,\"\"),o=s.get(a)?.entries();if(o)for(const[s,i]of o)if(i.name===r){const e=!i.stack?.hasForwardEdits();if(!e&&n){const[{deleteForwardEdits:e},{default:r}]=await Promise.all([import(/* webpackChunkName: \"rest-versionManagement-gdbVersion-deleteForwardEdits\" */ \"../../rest/versionManagement/gdbVersion/deleteForwardEdits.js\"),import(/* webpackChunkName: \"rest-versionManagement-gdbVersion-support-DeleteForwardEditsParameters\" */ \"../../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters.js\")]),n=await e(a,s,new r({sessionId:t,moment:i.moment}));return n.success&&i.stack?.clearForwardEdits(),n.success}return e}return!0}function c(e,r){if(!e)return!1;const t=e.replace(/\\/FeatureServer/i,\"/VersionManagementServer\").replace(/\\/\\d*$/,\"\"),n=s.get(t)?.entries();if(n)for(const[s,a]of n)if(a.name===r){return\"edit\"===a.lockType}return!1}export{t as currentSessionId,n as defaultVersionNameLookup,o as isHistoricVersion,i as isSafeToEditVersion,c as isVersionInEditSession,s as versionCollection,a as versionCollectionCount};\n"],"names":["getLogger","y","t","type","x","d","e","n","o","s","length","r","i","push","Math","min","max","M","error","l","c","sqrt","f","u","p","floor","g","rings","spatialReference","paths","w","b","Array","isArray","clone","offset","j","cutIndexes","geometries","some","Number","toFixed","getPoint","setPoint","addRing","addPath","async","R","warn","url","geometryServiceUrl","v","P","L","U","z","A","isWebMercator","maxX","minX","plus180Line","minus180Line","points","map","_normalize","extent","xmin","xmax","intersects","F","N","S","k","m","a","responseType","query","sr","target","JSON","stringify","geometryType","cutter","path","data","shift","C","valid","width","ceil","abs","WebMercator","WGS84","applyEdits","objectId","every","globalId","I","$","gdbVersion","layerId","returnServiceEditsOption","promise","then","addedFeatures","updatedFeatures","deletedFeatures","addedAttachments","updatedAttachments","deletedAttachments","emit","result","results","edits","load","layer","options","addFeatures","updateFeatures","deleteFeatures","addAttachments","updateAttachments","deleteAttachments","infoFor3D","editing","supportsGlobalId","globalIdUsed","V","isVersioned","supportsRollbackOnFailure","rollbackOnFailureEnabled","supportsReturnServiceEditsInSourceSpatialReference","returnServiceEditsInSourceSR","from","isCollection","toArray","D","operations","supportsAdd","supportsUpdate","supportsDelete","addAssetFeatures","G","fields","filter","globalIdField","forEach","attributes","B","O","geometry","supportsGeometryUpdate","T","addFeatureResults","updateFeatureResults","deleteFeatureResults","addAttachmentResults","updateAttachmentResults","deleteAttachmentResults","E","exceededTransferLimit","historicMoment","editMoment","Date","globalIdToObjectId","editedFeatureResults","editedFeatures","resolve","reject","name","MAX_SAFE_INTEGER","feature","hasZ","capabilities","supportsZ","hasM","supportsM","vertexSpace","h","wkid","attachment","uploadId","File","supportsUploadWithItemId","isBase64","concat","slice","q","uploadAssets","EventEmitter","serviceUrl","mayReceiveServiceEdits","Symbol","URL","host","get","constructor","super","this","_applyEditsHandler","lastEditsEventDate","find","adds","updates","deletes","objectIdField","current","_shouldUpdateHistoricMoment","_updateMomentHandler","moment","when","addHandles","on","WeakRef","prototype","supportedFormats","editFormats","includes","toLowerCase","split","endsWith","tables","role","toJSON","fromJSON","Map","replace","defaultVersionName","entries","stack","hasForwardEdits","deleteForwardEdits","default","Promise","all","sessionId","success","clearForwardEdits","lockType"],"sourceRoot":""}