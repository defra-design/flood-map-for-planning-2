"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[5959],{32003:function(e,t,r){r.d(t,{a:function(){return f},b:function(){return o},n:function(){return u},s:function(){return i},t:function(){return s}}),r(58941);var n=r(40633);function f(e,t,r){s(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r,n=4,f=n){if(e.length/n!=t.length/f)return;const s=e.length/n,u=r[0],i=r[1],o=r[2],c=r[3],y=r[4],l=r[5],p=r[6],a=r[7],d=r[8];let h=0,T=0;for(let r=0;r<s;r++){const r=t[h],s=t[h+1],B=t[h+2],E=t[h+3];e[T]=u*r+c*s+p*B,e[T+1]=i*r+y*s+a*B,e[T+2]=o*r+l*s+d*B,e[T+3]=E,h+=f,T+=n}}function u(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,f=e.typedBufferStride,s=t.typedBuffer,u=t.typedBufferStride;for(let e=0;e<r;e++){const t=e*f,r=e*u,i=s[r],o=s[r+1],c=s[r+2],y=i*i+o*o+c*c;if(y>0){const e=1/Math.sqrt(y);n[t]=e*i,n[t+1]=e*o,n[t+2]=e*c}}}function i(e,t,r){o(e.typedBuffer,t,r,e.typedBufferStride)}function o(e,t,r,n=4){const f=Math.min(e.length/n,t.count),s=t.typedBuffer,u=t.typedBufferStride;let i=0,o=0;for(let t=0;t<f;t++)e[o]=r*s[i],e[o+1]=r*s[i+1],e[o+2]=r*s[i+2],e[o+3]=r*s[i+3],i+=u,o+=n}Object.freeze(Object.defineProperty({__proto__:null,normalize:u,scale:o,scaleView:i,transformMat3:s,transformMat3View:f,transformMat4:function(e,t,r,f=4,s=f){if(e.length/f!=t.length/s)return void n.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const u=e.length/f,i=r[0],o=r[1],c=r[2],y=r[3],l=r[4],p=r[5],a=r[6],d=r[7],h=r[8],T=r[9],B=r[10],E=r[11],m=r[12],b=r[13],g=r[14],A=r[15];let O=0,S=0;for(let r=0;r<u;r++){const r=t[O],n=t[O+1],u=t[O+2],w=t[O+3];e[S]=i*r+l*n+h*u+m*w,e[S+1]=o*r+p*n+T*u+b*w,e[S+2]=c*r+a*n+B*u+g*w,e[S+3]=y*r+d*n+E*u+A*w,O+=s,S+=f}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,f=r[0],s=r[1],u=r[2],i=r[3],o=r[4],c=r[5],y=r[6],l=r[7],p=r[8],a=r[9],d=r[10],h=r[11],T=r[12],B=r[13],E=r[14],m=r[15],b=e.typedBuffer,g=e.typedBufferStride,A=t.typedBuffer,O=t.typedBufferStride;for(let e=0;e<n;e++){const t=e*g,r=e*O,n=A[r],S=A[r+1],w=A[r+2],L=A[r+3];b[t]=f*n+o*S+p*w+T*L,b[t+1]=s*n+c*S+a*w+B*L,b[t+2]=u*n+y*S+d*w+E*L,b[t+3]=i*n+l*S+h*w+m*L}}},Symbol.toStringTag,{value:"Module"}))},92754:function(e,t,r){r.d(t,{Y$:function(){return p},qB:function(){return b},Qt:function(){return I},My:function(){return z},bf:function(){return U},jZ:function(){return T},j0:function(){return B},Sx:function(){return E},E$:function(){return m},h:function(){return x},P:function(){return N},SL:function(){return S},gH:function(){return a},si:function(){return g},mJ:function(){return X},UL:function(){return D},D6:function(){return Y},Yi:function(){return M},An:function(){return v},LC:function(){return w},xs:function(){return d},Xm:function(){return A},Vp:function(){return j},zD:function(){return $},m8:function(){return G},nS:function(){return R},H$:function(){return P},eI:function(){return L},Eq:function(){return h},Aj:function(){return O},E7:function(){return q},Y4:function(){return k},TX:function(){return V},Uz:function(){return C},ml:function(){return F},XP:function(){return _}});class n{constructor(e,t,r=0,n,f){this.TypedArrayConstructor=e,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==f?new s(t,u):new s(t,u,(f-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<9;e++)t[e]=this.typedBuffer[r++];return t}setMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<9;e++)this.typedBuffer[r++]=t[e]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const n=this.typedBuffer,f=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;for(let e=0;e<9;++e)n[s++]=f[u++]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=9;class f{constructor(e,t,r=0,n,f){this.TypedArrayConstructor=e,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==f?new s(t,u):new s(t,u,(f-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<16;e++)t[e]=this.typedBuffer[r++];return t}setMat(e,t){let r=e*this.typedBufferStride;for(let e=0;e<16;e++)this.typedBuffer[r++]=t[e]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){this.copyFromTypedBuffer(e,t.typedBuffer,r*t.typedBufferStride)}copyFromTypedBuffer(e,t,r){const n=this.typedBuffer;let f=e*this.typedBufferStride;for(let e=0;e<16;++e)n[f++]=t[r++]}get buffer(){return this.typedBuffer.buffer}}f.ElementCount=16;class s{constructor(e,t,r=0,n,f){this.TypedArrayConstructor=e,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==f?new s(t,u):new s(t,u,(f-r)/s.BYTES_PER_ELEMENT),this.stride=n,this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}get(e){return this.typedBuffer[e*this.typedBufferStride]}set(e,t){this.typedBuffer[e*this.typedBufferStride]=t}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=1;var u=r(13786);class i{constructor(e,t,r=0,n,f){this.TypedArrayConstructor=e,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==f?new s(t,u):new s(t,u,(f-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getVec(e,t){return e*=this.typedBufferStride,(0,u.hZ)(t,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e]=t[1]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e]=r}copyFrom(e,t,r){const n=this.typedBuffer,f=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;n[s++]=f[u++],n[s]=f[u]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=2;var o=r(20551);class c{constructor(e,t,r=0,n,f){this.TypedArrayConstructor=e,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==f?new s(t,u):new s(t,u,(f-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getVec(e,t){return e*=this.typedBufferStride,(0,o.i)(t,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e]=t[2]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e]=n}copyFrom(e,t,r){const n=this.typedBuffer,f=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;n[s++]=f[u++],n[s++]=f[u++],n[s]=f[u]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=3;var y=r(33400);class l{constructor(e,t,r=0,n,f){this.TypedArrayConstructor=e,this.start=r,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const u=0===t.byteLength?0:r;this.typedBuffer=null==f?new s(t,u):new s(t,u,(f-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,t,r=this.count-t){const n=this.typedBuffer.byteOffset+t*this.stride;return new e(this.buffer,n,this.stride,n+r*this.stride)}getVec(e,t){return e*=this.typedBufferStride,(0,y.s)(t,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(e,t){e*=this.typedBufferStride,this.typedBuffer[e++]=t[0],this.typedBuffer[e++]=t[1],this.typedBuffer[e++]=t[2],this.typedBuffer[e]=t[3]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n,f){e*=this.typedBufferStride,this.typedBuffer[e++]=t,this.typedBuffer[e++]=r,this.typedBuffer[e++]=n,this.typedBuffer[e]=f}copyFrom(e,t,r){const n=this.typedBuffer,f=t.typedBuffer;let s=e*this.typedBufferStride,u=r*t.typedBufferStride;n[s++]=f[u++],n[s++]=f[u++],n[s++]=f[u++],n[s]=f[u]}get buffer(){return this.typedBuffer.buffer}}l.ElementCount=4;class p extends s{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType="f32";class a extends i{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(a,e,t)}static fromTypedArray(e,t){return new a(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}a.ElementType="f32";class d extends c{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(d,e,t)}static fromTypedArray(e,t){return new d(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}d.ElementType="f32";class h extends l{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(h,e,t)}static fromTypedArray(e,t){return new h(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}h.ElementType="f32";class T extends n{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(T,e,t)}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType="f32";class B extends n{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(B,e,t)}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType="f64";class E extends f{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}slice(e,t){return this.sliceBuffer(E,e,t)}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType="f32";class m extends f{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(m,e,t)}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType="f64";class b extends s{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(b,e,t)}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType="f64";class g extends i{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(g,e,t)}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType="f64";class A extends c{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(A,e,t)}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType="f64";class O extends l{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}slice(e,t){return this.sliceBuffer(O,e,t)}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType="f64";class S extends s{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(S,e,t)}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType="u8";class w extends i{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(w,e,t)}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType="u8";class L extends c{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(L,e,t)}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType="u8";class _ extends l{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}slice(e,t){return this.sliceBuffer(_,e,t)}static fromTypedArray(e,t){return new _(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}_.ElementType="u8";class x extends s{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(x,e,t)}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType="u16";class M extends i{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(M,e,t)}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType="u16";class R extends c{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(R,e,t)}static fromTypedArray(e,t){return new R(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}R.ElementType="u16";class C extends l{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}slice(e,t){return this.sliceBuffer(C,e,t)}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType="u16";class N extends s{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(N,e,t)}static fromTypedArray(e,t){return new N(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}N.ElementType="u32";class v extends i{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(v,e,t)}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType="u32";class P extends c{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(P,e,t)}static fromTypedArray(e,t){return new P(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}P.ElementType="u32";class F extends l{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}slice(e,t){return this.sliceBuffer(F,e,t)}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType="u32";class U extends s{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(U,e,t)}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType="i8";class Y extends i{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(Y,e,t)}static fromTypedArray(e,t){return new Y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}Y.ElementType="i8";class G extends c{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(G,e,t)}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType="i8";class V extends l{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}slice(e,t){return this.sliceBuffer(V,e,t)}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType="i8";class I extends s{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(I,e,t)}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType="i16";class X extends i{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(X,e,t)}static fromTypedArray(e,t){return new X(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}X.ElementType="i16";class j extends c{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(j,e,t)}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType="i16";class q extends l{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}slice(e,t){return this.sliceBuffer(q,e,t)}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType="i16";class z extends s{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(z,e,t)}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType="i32";class D extends i{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(D,e,t)}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType="i32";class $ extends c{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer($,e,t)}static fromTypedArray(e,t){return new $(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}$.ElementType="i32";class k extends l{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}slice(e,t){return this.sliceBuffer(k,e,t)}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType="i32"},47797:function(e,t,r){r.d(t,{projectMeshVertexPositions:function(){return i}});var n=r(57617),f=r(65907),s=r(57652),u=r(20007);function i(e,t){const r=(0,u.UR)(e,f.A.absolute);if(!r)return null;let i=r.position;return(0,s.aI)(e.spatialReference,t)||(i=new Float64Array(r.position.length),(0,n.projectBuffer)(r.position,e.spatialReference,0,i,t,0))?i:null}},83614:function(e,t,r){r.d(t,{$5:function(){return O},CN:function(){return m},GN:function(){return _},JP:function(){return E},KM:function(){return w},Mv:function(){return R},OD:function(){return C},X4:function(){return b},gZ:function(){return L},gr:function(){return A},qs:function(){return S},si:function(){return g},xA:function(){return M}});var n=r(15774),f=r(44705),s=r(87725),u=r(73364),i=r(39714),o=r(20551),c=r(32501),y=r(7456),l=r(57617),p=r(43587),a=r(57652),d=r(1644),h=r(92754),T=r(62693),B=r(32003);const E="Projection may be possible after calling projection.load().";function m(e,t,r,n){e.error(`Failed to project from (wkid:${t.wkid}) to (wkid:${r.wkid}).${n?" ":""}${n}`)}function b(e,t,r,n,f,s){return F(N.TO_PCPF,h.xs.fromTypedArray(e),C.NORMAL,h.Xm.fromTypedArray(t),r,h.Xm.fromTypedArray(n),f,h.xs.fromTypedArray(s))?s:null}function g(e,t,r,n,f,s){return F(N.FROM_PCPF,h.xs.fromTypedArray(e),C.NORMAL,h.Xm.fromTypedArray(t),r,h.Xm.fromTypedArray(n),f,h.xs.fromTypedArray(s))?s:null}function A(e,t,r,n){return(0,l.projectBuffer)(e,t,0,r,n,0)?r:null}function O(e,t,r,n){return(0,l.projectBuffer)(e,t,0,r,n,0)?r:null}function S(e,t,r){return(0,f.Ge)(V,r),(0,T.b)(t,e,V),(0,n.or)(V)&&(0,T.n)(t,t),t}function w(e,t,r){return(0,f.z0)(V,r),(0,B.t)(t,e,V),(0,n.or)(V)&&(0,T.n)(t,t,4),t}function L(e,t,r,f){const s=t===C.NORMAL;return x(e,t,r,((e,t)=>{const r=Math.cos((0,n.kU)(e));t[0]=s?r:1/r,t[1]=1}),f)}function _(e,t,r,n){const f=t===C.NORMAL;return x(e,t,r,((e,t)=>{const r=Math.cosh(-e/p.$O.radius);t[0]=1,t[1]=f?r:1/r}),n)}function x(e,t,r,n,f){const s=t===C.NORMAL?3:4,u=[0,0];for(let t=0,i=1;t<e.length;t+=s,i+=3){n(r[i],u);const o=e[t]*u[0],c=e[t+1]*u[1],y=e[t+2],l=1/Math.sqrt(o*o+c*c+y*y);f[t]=o*l,f[t+1]=c*l,f[t+2]=y*l,4===s&&(f[t+3]=e[t+3])}return f}function M(e,t,r,n,f,s){if(!F(N.TO_PCPF,h.xs.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT),C.TANGENT,h.Xm.fromTypedArray(t),r,h.Xm.fromTypedArray(n),f,h.xs.fromTypedArray(s,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let t=3;t<e.length;t+=4)s[t]=e[t];return s}function R(e,t,r,n,f,s){if(!F(N.FROM_PCPF,h.xs.fromTypedArray(e,16),C.TANGENT,h.Xm.fromTypedArray(t),r,h.Xm.fromTypedArray(n),f,h.xs.fromTypedArray(s,16)))return null;for(let t=3;t<e.length;t+=4)s[t]=e[t];return s}var C,N,v;function P(e,t,r,n,s){switch((0,y.l)(n,r,G,n),e===N.FROM_PCPF&&(0,u.B8)(G,G),t){case C.NORMAL:return(0,f.Ge)(s,G);case C.TANGENT:return(0,f.z0)(s,G)}}function F(e,t,r,n,f,s,u,i){if(!t)return;const c=n.count;if(function(e){return e.isWGS84||(0,a.x1)(e)||(0,a.q8)(e)||(0,a.KQ)(e)}(f))for(let n=0;n<c;n++)s.getVec(n,U),t.getVec(n,Y),(0,o.q)(Y,Y,P(e,r,U,u,V)),i.setVec(n,Y);else for(let f=0;f<c;f++){s.getVec(f,U),t.getVec(f,Y);const c=(0,d.jg)(n.get(f,1));let y=Math.cos(c);r===C.TANGENT!=(e===N.TO_PCPF)&&(y=1/y),P(e,r,U,u,V),e===N.TO_PCPF?(V[0]*=y,V[1]*=y,V[2]*=y,V[3]*=y,V[4]*=y,V[5]*=y):(V[0]*=y,V[3]*=y,V[6]*=y,V[1]*=y,V[4]*=y,V[7]*=y),(0,o.q)(Y,Y,V),(0,o.n)(Y,Y),i.setVec(f,Y)}return i}(v=C||(C={}))[v.NORMAL=0]="NORMAL",v[v.TANGENT=1]="TANGENT",function(e){e[e.TO_PCPF=0]="TO_PCPF",e[e.FROM_PCPF=1]="FROM_PCPF"}(N||(N={}));const U=(0,c.vt)(),Y=(0,c.vt)(),G=(0,i.vt)(),V=(0,s.vt)()},20007:function(e,t,r){r.d(t,{UR:function(){return g},p5:function(){return b},xK:function(){return _}});var n=r(40633),f=r(15774),s=r(62938),u=r(44705),i=r(87725),o=r(73364),c=r(39714),y=r(20551),l=r(32501),p=r(96611),a=r(7456),d=r(56763),h=r(67376),T=r(57652),B=r(62693),E=r(83614);const m=()=>n.A.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function b(e,t,{vertexSpace:r,spatialReference:n}){if("georeferenced"===r.type){const f=e;if(!(0,d.g)(t,f,n))return!1;const{origin:s}=r;return(0,y.d)(e,f,s),!0}const f=(0,p.lO)(n),s=e;if(!(0,d.g)(t,s,f))return!1;const{origin:u}=r,i=N;if(!(0,a.l)(n,u,i,f))return!1;const c=(0,o.B8)(N,i);return null!=c&&((0,y.t)(e,s,c),!0)}function g(e,t,r){const{vertexSpace:n,transform:f,vertexAttributes:s}=e,i=(0,h.Hq)(n)?f:null,l=w(e.spatialReference,r,v.SOURCE_AND_TARGET);if((0,h.yJ)(n,t)&&(!i||(0,o.t2)(i.localMatrix,c.zK))&&L(l)){const{position:e,normal:t,tangent:n}=s,f=r?.allowBufferReuse;return{position:f?e:e.slice(),normal:f?t:t?.slice(),tangent:f?n:n?.slice()}}switch(e.vertexSpace.type){case"local":return"local"===t.type?function({vertexAttributes:e,spatialReference:t,transform:r},{origin:n},f,s){const u=A(t,s);if(!(0,a.l)(t,n,x,u))return(0,E.CN)(m(),t,u),null;if(r&&(0,o.lw)(x,x,r.localMatrix),!(0,a.l)(t,f,M,u))return(0,E.CN)(m(),u,t),null;(0,o.B8)(M,M);const i=(0,o.lw)(x,M,x);return S(i,t,s,v.SOURCE_AND_TARGET),O(e,i)}(e,e.vertexSpace,t.origin,r):function({spatialReference:e,vertexAttributes:t,transform:r},{origin:n},f,s){const u=A(e,s);if(!(0,a.l)(e,n,x,u))return(0,E.CN)(m(),e,u),null;r&&(0,o.lw)(x,x,r.localMatrix),S(x,e,s,v.SOURCE);const i=new Float64Array(t.position.length),c=function(e,t,r,n,f){(0,B.t)(n,e,t);const s=new Float64Array(e.length);return(0,E.$5)(n,f,s,r)?s:((0,E.CN)(m(),f,r),null)}(t.position,x,e,i,u);if(!c)return null;const l=function(e,t,r,n,f,s){if(null==f)return null;const u=new Float32Array(f.length);return(0,E.qs)(f,u,s),(0,E.si)(u,e,t,r,n,u)?u:((0,E.CN)(m(),n,t),null)}(c,e,i,u,t.normal,x);if(t.normal&&!l)return null;const p=function(e,t,r,n,f,s){if(null==f)return null;const u=new Float32Array(f.length);return(0,E.KM)(f,u,s),(0,E.Mv)(u,e,t,r,n,u)?u:((0,E.CN)(m(),n,t),null)}(c,e,i,u,t.tangent,x);if(t.tangent&&!p)return null;if(f){const e=(0,y.v)(C,f);(0,B.a)(c,c,e)}return{position:c,normal:l,tangent:p}}(e,e.vertexSpace,t.origin,r);case"georeferenced":return"local"===t.type?function({vertexAttributes:e,spatialReference:t,transform:r},{origin:n},f,s){const i=A(t,s);if(!(0,a.l)(t,f,x,i))return(0,E.CN)(m(),t,i),null;const c=1/w(t,s,v.TARGET);(0,o.hs)(x,x,[c,c,c]);const y=(0,o.B8)(M,x),{position:l,normal:p,tangent:d}=function(e,t,r){if(!t)return e;if(!r){const{position:r,normal:n,tangent:f}=e;return{position:(0,B.a)(new Float64Array(r.length),r,t),tangent:f,normal:n}}const n=O(e,r.localMatrix);return(0,B.a)(n.position,n.position,t),n}(e,n,r),h=new Float64Array(l.length),T=function(e,t,r,n,f){const s=(0,E.gr)(e,t,n,f);if(!s)return(0,E.CN)(m(),t,f),null;const u=new Float64Array(s.length);return(0,B.t)(u,s,r),u}(l,t,y,h,i);if(!T)return null;const b=(0,u.Ge)(R,y),g=function(e,t,r,n,f,s,u){if(null==e)return null;const i=u??new Float32Array(e.length);return(0,E.X4)(e,t,r,n,f,i)?((0,B.b)(i,i,s),i):((0,E.CN)(m(),r,f),null)}(p,l,t,h,i,b,p!==e.normal?p:void 0);if(!g&&p)return null;const S=function(e,t,r,n,f,s,u){if(null==e)return null;const i=u??new Float32Array(e.length);return(0,E.xA)(e,t,r,n,f,i)?((0,B.b)(i,i,s,4),i):((0,E.CN)(m(),r,f),null)}(d,l,t,h,i,b,d!==e.tangent?d:void 0);return!S&&d?null:{position:T,normal:g,tangent:S}}(e,e.vertexSpace,t.origin,r):function({vertexAttributes:e,transform:t,spatialReference:r},{origin:n},f,s){const u=w(r,s,v.SOURCE_AND_TARGET),i=n||!L(u)?(0,o.C)(x,t?.localMatrix??c.zK):null;i&&S(i,r,s,v.SOURCE_AND_TARGET);const{position:l,normal:p,tangent:a}=i?O(e,i):e,d=s?.allowBufferReuse,h=d?l:new Float64Array(l.length);let T=l;if(n&&(T=(0,B.a)(h,T,n)),f){const e=(0,y.v)(C,f);T=(0,B.a)(h,T,e)}return{position:T!==e.position||d?T:T.slice(),normal:p!==e.normal||d?p:p?.slice(),tangent:a!==e.tangent||d?a:a?.slice()}}(e,e.vertexSpace,t.origin,r)}}function A(e,t){return t?.useEllipsoid&&(0,T.B3)(e)?p.Y0:(0,p.lO)(e)}function O(e,t){const r=new Float64Array(e.position.length);(0,B.t)(r,e.position,t);const n=e.normal?new Float32Array(e.normal.length):null,f=e.tangent?new Float32Array(e.tangent.length):null;return n&&e.normal&&(0,E.qs)(e.normal,n,t),f&&e.tangent&&(0,E.KM)(e.tangent,f,t),{position:r,normal:n,tangent:f}}function S(e,t,r,n){const f=w(t,r,n);L(f)||(0,o.hs)(e,e,[f,f,f])}function w(e,t,r){const n=!!(r&v.SOURCE),f=!!(r&v.TARGET),s=t?.sourceUnit,u=t?.targetUnit;if(!s&&!u)return 1;let i=_(s,e);n||!s||L(i)||(m().warn("source unit conversion not supported"),i=1);let o=1/_(u,e);return f||!u||L(o)||(m().warn("target unit conversion not supported"),o=1),i*o}function L(e){return(0,f.Io)(e,1)}function _(e,t){if(null==e)return 1;const r=(0,s.KX)(t);return 1/(0,s.oU)(r,"meters",e)}const x=(0,c.vt)(),M=(0,c.vt)(),R=(0,i.vt)(),C=(0,l.vt)(),N=(0,c.vt)();var v,P;(P=v||(v={}))[P.NONE=0]="NONE",P[P.SOURCE=1]="SOURCE",P[P.TARGET=2]="TARGET",P[P.SOURCE_AND_TARGET=3]="SOURCE_AND_TARGET"},67376:function(e,t,r){r.d(t,{CK:function(){return p},E9:function(){return y},Hq:function(){return l},MW:function(){return a},TE:function(){return d},yJ:function(){return h}});var n=r(88022),f=r(40633),s=r(20551),u=r(45532),i=r(65907),o=r(20460);function c(){return f.A.getLogger("esri.geometry.Mesh")}function y(e){return!l(e)}function l(e){return null!=e.origin}function p(e){return l(e.vertexSpace)}function a(e,t){if(!l(e))return null;const[r,n,f]=e.origin;return new u.default({x:r,y:n,z:f,spatialReference:t})}function d(e,t){const{x:r,y:f,z:s,spatialReference:u}=e,y=[r,f,s??0];return void 0!==t?.geographic&&((0,n.io)(c(),"option: geographic",{replacement:"Use the `vertexSpace` option instead.",version:"4.29",warnOnce:!0}),t.vertexSpace&&c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")),"local"===(t?.vertexSpace??(l=t?.geographic,null==l?void 0:l?"local":"georeferenced")??function(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}(u))?new o.A({origin:y}):new i.A({origin:y});var l}function h(e,t){return e.type===t.type&&(e.origin===t.origin||null!=e.origin&&null!=t.origin&&(0,s.p)(e.origin,t.origin))}}}]);
//# sourceMappingURL=geometry-support-meshUtils-projectMeshVertexPositions.js.map