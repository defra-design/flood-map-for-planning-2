{"version":3,"file":"GroupLayer.js","mappings":"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","sources":["webpack://defra/./node_modules/@arcgis/core/core/CollectionFlattener.js","webpack://defra/./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js","webpack://defra/./node_modules/@arcgis/core/core/ReadOnlyMultiOriginJSONSupport.js","webpack://defra/./node_modules/@arcgis/core/core/accessorSupport/MultiOriginStore.js","webpack://defra/./node_modules/@arcgis/core/core/accessorSupport/layerContainerType.js","webpack://defra/./node_modules/@arcgis/core/core/loadAll.js","webpack://defra/./node_modules/@arcgis/core/layers/GroupLayer.js","webpack://defra/./node_modules/@arcgis/core/layers/mixins/OperationalLayer.js","webpack://defra/./node_modules/@arcgis/core/layers/mixins/PortalLayer.js","webpack://defra/./node_modules/@arcgis/core/layers/mixins/operationalLayers.js","webpack://defra/./node_modules/@arcgis/core/layers/support/commonProperties.js","webpack://defra/./node_modules/@arcgis/core/portal/support/portalItemUtils.js","webpack://defra/./node_modules/@arcgis/core/support/LayersMixin.js","webpack://defra/./node_modules/@arcgis/core/support/TablesMixin.js","webpack://defra/./node_modules/@arcgis/core/support/collectionUtils.js","webpack://defra/./node_modules/@arcgis/core/support/tagSymbols.js","webpack://defra/./node_modules/@arcgis/core/tables/AttributeTableTemplate.js","webpack://defra/./node_modules/@arcgis/core/tables/elements/AttributeTableAttachmentElement.js","webpack://defra/./node_modules/@arcgis/core/tables/elements/AttributeTableElement.js","webpack://defra/./node_modules/@arcgis/core/tables/elements/AttributeTableFieldElement.js","webpack://defra/./node_modules/@arcgis/core/tables/elements/AttributeTableGroupElement.js","webpack://defra/./node_modules/@arcgis/core/tables/elements/AttributeTableRelationshipElement.js","webpack://defra/./node_modules/@arcgis/core/tables/support/elements.js","webpack://defra/./node_modules/@arcgis/core/webdoc/interfaces.js","webpack://defra/./node_modules/@arcgis/core/webdoc/support/saveUtils.js","webpack://defra/./node_modules/@arcgis/core/webdoc/support/writeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import o from\"./Collection.js\";import{sync as e}from\"./reactiveUtils.js\";import{property as s}from\"./accessorSupport/decorators/property.js\";import{subclass as i}from\"./accessorSupport/decorators/subclass.js\";import{autorun as r}from\"./accessorSupport/trackingUtils.js\";let l=class extends o{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(r((()=>this._refresh()),e))}destroy(){this.getCollections=null}_refresh(){const t=null!=this.getCollections?this.getCollections():null;if(null==t)return void this.removeAll();let o=0;for(const e of t)null!=e&&(o=this._processCollection(o,e));this.splice(o,this.length)}_createNewInstance(t){return new o(t)}_processCollection(t,o){if(!o)return t;const e=this.itemFilterFunction??(t=>!!t);for(const s of o)if(s){if(e(s)){const o=this.indexOf(s,t);o>=0?o!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const o=this.getChildrenFunction(s);if(Array.isArray(o))for(const e of o)t=this._processCollection(t,e);else t=this._processCollection(t,o)}}return t}};t([s()],l.prototype,\"getCollections\",void 0),t([s()],l.prototype,\"getChildrenFunction\",void 0),t([s()],l.prototype,\"itemFilterFunction\",void 0),l=t([i(\"esri.core.CollectionFlattener\")],l);const n=l;export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{ReadOnlyMultiOriginJSONMixin as s}from\"./ReadOnlyMultiOriginJSONSupport.js\";import{get as e}from\"./accessorSupport/get.js\";import{nameToId as o,OriginId as i,originIdNum as p}from\"./accessorSupport/PropertyOrigin.js\";import{getProperties as c}from\"./accessorSupport/utils.js\";import{write as u}from\"./accessorSupport/write.js\";import{subclass as n}from\"./accessorSupport/decorators/subclass.js\";const l=t=>{let s=class extends t{constructor(...r){super(...r)}clear(r,t=\"user\"){return O(this).delete(r,o(t))}write(r,t){return u(this,r=r||{},t),r}setAtOrigin(r,t,s){c(this).setAtOrigin(r,t,o(s))}removeOrigin(r){const t=O(this),s=o(r),e=t.keys(s);for(const o of e)t.originOf(o)===s&&t.set(o,t.get(o,s),i.USER)}updateOrigin(r,t){const s=O(this),i=o(t),c=e(this,r);for(let e=i+1;e<p;++e)s.delete(r,e);s.set(r,c,i)}toJSON(r){return this.write({},r)}};return s=r([n(\"esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport\")],s),s.prototype.toJSON.isDefaultToJSON=!0,s};function O(r){return c(r).store}const S=t=>{let e=class extends(l(s(t))){constructor(...r){super(...r)}};return e=r([n(\"esri.core.MultiOriginJSONSupport\")],e),e};let m=class extends(S(t)){};m=r([n(\"esri.core.MultiOriginJSONSupport\")],m);export{S as MultiOriginJSONMixin,m as MultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import t from\"./Accessor.js\";import{setupConstructedDefaults as s}from\"./accessorSupport/defaultsStoreUtils.js\";import o from\"./accessorSupport/MultiOriginStore.js\";import{nameToId as e,idToName as i}from\"./accessorSupport/PropertyOrigin.js\";import{read as c}from\"./accessorSupport/read.js\";import{getProperties as n}from\"./accessorSupport/utils.js\";import{subclass as p}from\"./accessorSupport/decorators/subclass.js\";const u=t=>{let u=class extends t{constructor(...r){super(...r);const t=n(this),e=t.store,i=new o;t.store=i,s(t,e,i)}read(r,t){c(this,r,t)}getAtOrigin(r,t){const s=a(this),o=e(t);if(\"string\"==typeof r)return s.get(r,o);const i={};return r.forEach((r=>{i[r]=s.get(r,o)})),i}originOf(r){return i(this.originIdOf(r))}originIdOf(r){return a(this).originOf(r)}revert(r,t){const s=a(this),o=e(t),i=n(this);let c;c=\"string\"==typeof r?\"*\"===r?s.keys(o):[r]:r,c.forEach((r=>{i.invalidate(r),s.revert(r,o),i.commit(r)}))}};return u=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],u),u};function a(r){return n(r).store}let f=class extends(u(t)){};f=r([p(\"esri.core.ReadOnlyMultiOriginJSONSupport\")],f);export{u as ReadOnlyMultiOriginJSONMixin,f as ReadOnlyMultiOriginJSONSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../lang.js\";import{originIdNum as s,OriginId as e}from\"./PropertyOrigin.js\";class r{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(s),this._values=new Map,this.multipleOriginsSupported=!0}clone(i){const o=new r,n=this._originStores[e.DEFAULTS];n&&n.forEach(((s,r)=>{o.set(r,t(s),e.DEFAULTS)}));for(let r=e.SERVICE;r<s;r++){const s=this._originStores[r];s&&s.forEach(((s,e)=>{i&&i.has(e)||o.set(e,t(s),r)}))}return o}get(t,s){const e=void 0===s?this._values:this._originStores[s];return e?e.get(t):void 0}keys(t){const s=null==t?this._values:this._originStores[t];return s?[...s.keys()]:[]}set(t,s,r=e.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(t,s),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const e=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,r),e!==s}return!1}delete(t,s=e.USER){const r=this._originStores[s];if(!r)return;const i=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===s){this._values.delete(t);for(let e=s-1;e>=0;e--){const s=this._originStores[e];if(s&&s.has(t)){this._values.set(t,s.get(t)),this._propertyOriginMap.set(t,e);break}}}return i}has(t,s){const e=void 0===s?this._values:this._originStores[s];return!!e&&e.has(t)}revert(t,s){for(;s>0&&!this.has(t,s);)--s;const e=this._originStores[s],r=e?.get(t),i=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,s),i!==r}originOf(t){return this._propertyOriginMap.get(t)||e.DEFAULTS}forEach(t){this._values.forEach(t)}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst a=(a=>a)([\"operational-layers\",\"basemap\",\"ground\"]);export{a as excludeTables};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{map as o,result as l}from\"./asyncUtils.js\";import n from\"./Collection.js\";import r from\"./Loadable.js\";async function t(o,l){return await o.load(),a(o,l)}async function a(t,a){const s=[],c=(...o)=>{for(const l of o)null!=l&&(Array.isArray(l)?c(...l):n.isCollection(l)?l.forEach((o=>c(o))):r.isLoadable(l)&&s.push(l))};a(c);let f=null;if(await o(s,(async o=>{const n=await l(i(o)?o.loadAll():o.load());!1!==n.ok||f||(f=n)})),f)throw f.error;return t}function i(o){return\"loadAll\"in o&&\"function\"==typeof o.loadAll}export{t as loadAll,a as loadAllChildren};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import i from\"../core/CollectionFlattener.js\";import{loadAll as t}from\"../core/loadAll.js\";import r from\"../core/Logger.js\";import{MultiOriginJSONMixin as s}from\"../core/MultiOriginJSONSupport.js\";import{debounce as o,throwIfAbortError as a}from\"../core/promiseUtils.js\";import{watch as l,syncAndInitial as n,on as p,sync as d}from\"../core/reactiveUtils.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{getProperties as c}from\"../core/accessorSupport/utils.js\";import{reader as h}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as u}from\"../core/accessorSupport/decorators/writer.js\";import{OriginId as b}from\"../core/accessorSupport/PropertyOrigin.js\";import v from\"./Layer.js\";import{BlendLayer as f}from\"./mixins/BlendLayer.js\";import{OperationalLayer as j}from\"./mixins/OperationalLayer.js\";import{PortalLayer as L}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as g}from\"./mixins/ScaleRangeLayer.js\";import{layerLookupMap as w}from\"./support/lazyLayerLoader.js\";import S from\"../portal/PortalItem.js\";import{createFlattenedTablesCollection as _}from\"../support/collectionUtils.js\";import{LayersMixin as I}from\"../support/LayersMixin.js\";import{TablesMixin as O}from\"../support/TablesMixin.js\";import{WebSceneTag as M}from\"../support/tagSymbols.js\";import{SaveOperationType as x}from\"../webdoc/interfaces.js\";import{beforeSave as P}from\"../webdoc/support/saveUtils.js\";import{getLayerJSON as A}from\"../webdoc/support/writeUtils.js\";let V=class extends(f(g(j(L(O(I(s(v)))))))){constructor(e){super(e),this.allLayers=new i({getCollections:()=>[this.layers],getChildrenFunction:e=>\"layers\"in e?e.layers:null}),this.allTables=_(this),this.fullExtent=void 0,this.operationalLayerType=\"GroupLayer\",this.spatialReference=void 0,this.type=\"group\",this._debouncedSaveOperations=o((async(e,i,t)=>{const{save:r,saveAs:s}=await import(/* webpackChunkName: \"save-groupLayerUtils\" */ \"./save/groupLayerUtils.js\");switch(e){case x.SAVE:return r(this,i);case x.SAVE_AS:return s(this,t,i)}}))}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([l((()=>{let e=this.parent;for(;e&&\"parent\"in e&&e.parent;)e=e.parent;return e&&M in e}),(e=>{const i=\"prevent-adding-tables\";this.removeHandles(i),e&&(this.tables.removeAll(),this.addHandles(p((()=>this.tables),\"before-add\",(e=>{e.preventDefault(),r.getLogger(this).errorOnce(\"tables\",\"tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.\")})),i))}),n),l((()=>this.visible),this._onVisibilityChange.bind(this),d)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf(\"portalItem\")===b.USER}_writeLayers(e,i,t,r){const s=[];if(!e)return s;e.forEach((e=>{const i=A(e,r.webmap?r.webmap.getLayerJSONFromResourceInfo(e):null,r);i?.layerType&&s.push(i)})),i.layers=s}set portalItem(e){this._set(\"portalItem\",e)}readPortalItem(e,i,t){const{itemId:r,layerType:s}=i;if(\"GroupLayer\"===s&&r)return new S({id:r,portal:t?.portal})}writePortalItem(e,i){e?.id&&(i.itemId=e.id)}set visibilityMode(e){const i=this._get(\"visibilityMode\")!==e;this._set(\"visibilityMode\",e),i&&this._enforceVisibility(e,this.visible)}async beforeSave(){return P(this)}load(e){const i=this.loadFromPortal({supportedTypes:[\"Feature Service\",\"Feature Collection\",\"Group Layer\",\"Scene Service\"],layerModuleTypeMap:w},e).catch((e=>{if(a(e),this.sourceIsPortalItem)throw e}));return this.addResolvingPromise(i),Promise.resolve(this)}async loadAll(){return t(this,(e=>{e(this.layers,this.tables)}))}async save(e){return this._debouncedSaveOperations(x.SAVE,e)}async saveAs(e,i){return this._debouncedSaveOperations(x.SAVE_AS,i,e)}layerAdded(e){e.visible&&\"exclusive\"===this.visibilityMode?this._turnOffOtherLayers(e):\"inherited\"===this.visibilityMode&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer read to Grouplayer: uid=${e.uid}`):this.addHandles(l((()=>e.visible),(i=>this._onChildVisibilityChange(e,i)),d),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach((i=>{i!==e&&(i.visible=!1)}))}_enforceVisibility(e,i){if(!c(this).initialized)return;const t=this.layers;let r=t.find((e=>e.visible));switch(e){case\"exclusive\":t.length&&!r&&(r=t.at(0),r.visible=!0),this._turnOffOtherLayers(r);break;case\"inherited\":t.forEach((e=>{e.visible=i}))}}_onVisibilityChange(e){\"inherited\"===this.visibilityMode&&this.layers.forEach((i=>{i.visible=e}))}_onChildVisibilityChange(e,i){switch(this.visibilityMode){case\"exclusive\":i?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case\"inherited\":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((e=>e.visible))}};e([y({readOnly:!0,dependsOn:[]})],V.prototype,\"allLayers\",void 0),e([y({readOnly:!0})],V.prototype,\"allTables\",void 0),e([y({json:{read:!0,write:!0}})],V.prototype,\"blendMode\",void 0),e([y()],V.prototype,\"fullExtent\",void 0),e([y({readOnly:!0})],V.prototype,\"sourceIsPortalItem\",null),e([y({json:{read:!1,write:{ignoreOrigin:!0}}})],V.prototype,\"layers\",void 0),e([u(\"layers\")],V.prototype,\"_writeLayers\",null),e([y({type:[\"GroupLayer\"]})],V.prototype,\"operationalLayerType\",void 0),e([y({json:{origins:{\"web-map\":{read:!1,write:{overridePolicy(e,i,t){return{enabled:\"Group Layer\"===e?.type&&t?.initiator!==this}}}},\"web-scene\":{read:!1,write:!1}}}})],V.prototype,\"portalItem\",null),e([h(\"web-map\",\"portalItem\",[\"itemId\"])],V.prototype,\"readPortalItem\",null),e([u(\"web-map\",\"portalItem\",{itemId:{type:String}})],V.prototype,\"writePortalItem\",null),e([y()],V.prototype,\"spatialReference\",void 0),e([y({json:{read:!1},readOnly:!0,value:\"group\"})],V.prototype,\"type\",void 0),e([y({type:[\"independent\",\"inherited\",\"exclusive\"],value:\"independent\",json:{write:!0,origins:{\"web-map\":{type:[\"independent\",\"exclusive\"],write:(e,i,t)=>{\"inherited\"!==e&&(i[t]=e)}}}}})],V.prototype,\"visibilityMode\",null),V=e([m(\"esri.layers.GroupLayer\")],V);const C=V;export{C as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isBlobProtocol as t}from\"../../core/urlUtils.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import{Integer as o,Null as s}from\"../../core/accessorSupport/ensureType.js\";import\"../../core/RandomLCG.js\";import\"../../core/has.js\";import{reader as n}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import{excludeTables as l}from\"../../core/accessorSupport/layerContainerType.js\";import{readLoadable as y}from\"../../core/accessorSupport/read.js\";import{willPropertyWrite as m}from\"../../core/accessorSupport/write.js\";import{supportedTypes as c}from\"./operationalLayers.js\";import{listMode as d,opacity as u}from\"../support/commonProperties.js\";import w from\"../../time/TimeExtent.js\";const b=b=>{let T=class extends b{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,r,t){return\"Group Layer\"===t?.portalItem?.type?void 0:e}writeListMode(e,r,t,i){(i&&\"ground\"===i.layerContainerType||e&&m(this,t,{},i))&&(r[t]=e)}writeOperationalLayerType(e,r,t,i){e&&\"tables\"!==i?.layerContainerType&&(r.layerType=e)}writeTitle(e,r){r.title=e??\"Layer\"}readTimeExtent(e){return e?w.fromArray(e):null}writeTimeExtent(e,t,i,o){e&&\"tables\"!==o.layerContainerType&&(e.isEmpty?o?.messages&&o.messages.push(new r(\"layer:invalid-visibilityTimeExtent\",\"visibilityTimeExtent cannot be empty\")):t[i]=e.toArray())}read(e,r){r&&(r.layer=this),y(this,e,(r=>super.read(e,r)),r)}write(e,i){if(!this.persistenceEnabled&&!i?.ignorePersistenceEnabled)return null;if(i?.origin){const e=`${i.origin}/${i.layerContainerType||\"operational-layers\"}`,t=c[e];let o=!!t?.[this.operationalLayerType];if(\"ArcGISTiledElevationServiceLayer\"===this.operationalLayerType&&\"web-scene/operational-layers\"===e&&(o=!1),\"ArcGISDimensionLayer\"===this.operationalLayerType&&\"web-map/operational-layers\"===e&&(o=!1),!o)return i.messages?.push(new r(\"layer:unsupported\",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const o=super.write(e,{...i,layer:this}),s=!!i&&!!i.messages&&!!i.messages.filter((e=>e instanceof r&&\"web-document-write:property-required\"===e.name)).length;return t(o?.url)?(i?.messages?.push(new r(\"layer:invalid-url\",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:o}beforeSave(){}};return e([i({type:String,json:{write:{ignoreOrigin:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0}},\"portal-item\":{write:!1}}}})],T.prototype,\"id\",void 0),e([n(\"id\",[\"id\"])],T.prototype,\"readId\",null),e([i(d)],T.prototype,\"listMode\",void 0),e([p(\"listMode\")],T.prototype,\"writeListMode\",null),e([i({type:String,readOnly:!0,json:{read:!1,write:{target:\"layerType\",ignoreOrigin:!0},origins:{\"portal-item\":{write:!1},\"web-scene\":{name:\"layerType\",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:l}}}}})],T.prototype,\"operationalLayerType\",void 0),e([p(\"operationalLayerType\")],T.prototype,\"writeOperationalLayerType\",null),e([i(u)],T.prototype,\"opacity\",void 0),e([i({type:Boolean,readOnly:!1})],T.prototype,\"persistenceEnabled\",void 0),e([i({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{\"web-scene\":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},\"portal-item\":{write:!1}}},value:\"Layer\"})],T.prototype,\"title\",void 0),e([p(\"title\"),p([\"web-scene\"],\"title\")],T.prototype,\"writeTitle\",null),e([i({type:w,json:{origins:{\"web-scene\":{write:{layerContainerTypes:l}}}}})],T.prototype,\"visibilityTimeExtent\",void 0),e([n(\"visibilityTimeExtent\")],T.prototype,\"readTimeExtent\",null),e([p([\"portal-item\",\"web-map\",\"web-scene\"],\"visibilityTimeExtent\",{visibilityTimeExtent:{type:[[o,s]]}})],T.prototype,\"writeTimeExtent\",null),e([i({type:Boolean,json:{origins:{\"web-scene\":{name:\"visibility\",write:{enabled:!0,layerContainerTypes:l}}},name:\"visibility\",write:!0}})],T.prototype,\"visible\",void 0),T=e([a(\"esri.layers.mixins.OperationalLayer\")],T),T};function T(e){return\"operationalLayerType\"in e}export{b as OperationalLayer,T as isOperationalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../config.js\";import{id as r}from\"../../kernel.js\";import s from\"../../request.js\";import{result as i}from\"../../core/asyncUtils.js\";import o from\"../../core/Error.js\";import a from\"../../core/Logger.js\";import{destroyMaybe as l}from\"../../core/maybe.js\";import{throwIfAborted as n,isAbortError as p,throwIfAbortError as u}from\"../../core/promiseUtils.js\";import{hasSameCanonicalPortal as c,normalize as d,hasSamePortal as m}from\"../../core/urlUtils.js\";import{property as h}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{reader as f}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as g}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as y}from\"../../core/accessorSupport/decorators/writer.js\";import{getOwningPortalUrl as I}from\"../support/layerUtils.js\";import v from\"../../portal/Portal.js\";import P from\"../../portal/PortalItem.js\";import w from\"../../portal/PortalUser.js\";import{getUserPrivileges as U}from\"../../portal/support/portalItemUtils.js\";const j=j=>{let _=class extends j{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=l(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(t){t!==this._get(\"portalItem\")&&(this.removeOrigin(\"portal-item\"),this._set(\"portalItem\",t))}readPortalItem(t,e,r){if(e.itemId)return new P({id:e.itemId,portal:r?.portal})}writePortalItem(t,e){t?.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem?.id)try{const{load:r}=await import(/* webpackChunkName: \"portal-support-layersLoader\" */ \"../../portal/support/layersLoader.js\");return n(e),await r({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(r){throw p(r)||a.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\\n  ${r}`),r}}async finishLoadEditablePortalLayer(t){this._set(\"userHasEditingPrivileges\",await this._fetchUserHasEditingPrivileges(t).catch((t=>(u(t),!0))))}async setUserPrivileges(t,r){if(!e.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(r);if(this.url)try{const{features:{edit:e,fullEdit:s},content:{updateItem:i}}=await this._fetchUserPrivileges(t,r);this._set(\"userHasEditingPrivileges\",e),this._set(\"userHasFullEditingPrivileges\",s),this._set(\"userHasUpdateItemPrivileges\",i)}catch(s){u(s)}}async _fetchUserPrivileges(t,e){let s=this.portalItem;if(!t||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(e);const i=t===s.id;if(i&&s.portal.user)return U(s);let o,a;if(i)o=s.portal.url;else try{o=await I(this.url,e)}catch(d){u(d)}if(!o||!c(o,s.portal.url))return this._fetchFallbackUserPrivileges(e);try{const t=null!=e?e.signal:null;a=await(r?.getCredential(`${o}/sharing`,{prompt:!1,signal:t}))}catch(d){u(d)}const l=!0,n=!1,p=!1;if(!a)return{features:{edit:l,fullEdit:n},content:{updateItem:p}};try{if(i?await s.reload():(s=new P({id:t,portal:{url:o}}),await s.load(e)),s.portal.user)return U(s)}catch(d){u(d)}return{features:{edit:l,fullEdit:n},content:{updateItem:p}}}async _fetchFallbackUserPrivileges(t){let e=!0;try{e=await this._fetchUserHasEditingPrivileges(t)}catch(r){u(r)}return{features:{edit:e,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(t){const e=this.url?r?.findCredential(this.url):null;if(!e)return!0;const s=E.credential===e?E.user:await this._fetchEditingUser(t);return E.credential=e,E.user=s,null==s?.privileges||s.privileges.includes(\"features:user:edit\")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const o=r?.findServerInfo(this.url??\"\");if(!o?.owningSystemUrl)return null;const a=`${o.owningSystemUrl}/sharing/rest`,l=v.getDefault();if(l&&l.loaded&&d(l.restUrl)===d(a))return l.user;const n=`${a}/community/self`,p=null!=t?t.signal:null,u=await i(s(n,{authMode:\"no-prompt\",query:{f:\"json\"},signal:p}));return u.ok?w.fromJSON(u.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e?.portal,s=this.portalItem?.id&&(this.portalItem.portal||v.getDefault());return r&&s&&!m(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new o(\"layer:cross-portal\",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return t([h({type:P})],_.prototype,\"portalItem\",null),t([f(\"web-document\",\"portalItem\",[\"itemId\"])],_.prototype,\"readPortalItem\",null),t([y(\"web-document\",\"portalItem\",{itemId:{type:String}})],_.prototype,\"writePortalItem\",null),t([h({clonable:!1})],_.prototype,\"resourceReferences\",void 0),t([h({type:Boolean,readOnly:!0})],_.prototype,\"userHasEditingPrivileges\",void 0),t([h({type:Boolean,readOnly:!0})],_.prototype,\"userHasFullEditingPrivileges\",void 0),t([h({type:Boolean,readOnly:!0})],_.prototype,\"userHasUpdateItemPrivileges\",void 0),_=t([g(\"esri.layers.mixins.PortalLayer\")],_),_},E={credential:null,user:null};export{j as PortalLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},r={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},a={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},i={\"web-scene/operational-layers\":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},\"web-scene/basemap\":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},\"web-scene/ground\":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},\"web-scene/tables\":{ArcGISFeatureLayer:!0},\"web-map/operational-layers\":e,\"web-map/basemap\":r,\"web-map/tables\":a,\"link-chart/operational-layers\":{...e,LinkChartLayer:!0},\"link-chart/basemap\":r,\"link-chart/tables\":a,\"portal-item/operational-layers\":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}};export{i as supportedTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{excludeTables as e}from\"../../core/accessorSupport/layerContainerType.js\";import r from\"../../geometry/Extent.js\";import n from\"../../geometry/SpatialReference.js\";import{w as i}from\"../../chunks/persistableUrlUtils.js\";import a from\"../../symbols/support/ElevationInfo.js\";import t from\"../../tables/AttributeTableTemplate.js\";import{transparencyToOpacity as o}from\"../../webdoc/support/opacityUtils.js\";const s={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},\"web-map\":{read:!1,write:!1}},name:\"screenSizePerspective\",write:{enabled:!0,layerContainerTypes:e}}},l={type:Boolean,value:!0,json:{name:\"disablePopup\",read:{reader:(e,r)=>!r.disablePopup},write:{enabled:!0,writer(e,r,n){r[n]=!e}}}},p={type:Boolean,value:!0,nonNullable:!0,json:{name:\"showLabels\",write:{enabled:!0,layerContainerTypes:e}}},y={type:String,json:{origins:{\"portal-item\":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:i}}},d={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:\"showLegend\",write:{enabled:!0,layerContainerTypes:e}}},c={value:null,type:a,json:{origins:{service:{name:\"elevationInfo\",write:!0}},name:\"layerDefinition.elevationInfo\",write:{enabled:!0,layerContainerTypes:e}}};function m(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const w={write:{enabled:!0,layerContainerTypes:e},read:!0},f={type:Number,json:{origins:{\"web-document\":w,\"portal-item\":{write:!0}}}},b={...f,json:{...f.json,origins:{\"web-document\":{...w,write:{enabled:!0,layerContainerTypes:e,target:{opacity:{type:Number},\"layerDefinition.drawingInfo.transparency\":{type:Number}}}}},read:{source:[\"layerDefinition.drawingInfo.transparency\",\"drawingInfo.transparency\"],reader:(e,r,n)=>n&&\"service\"!==n.origin||!r.drawingInfo||void 0===r.drawingInfo.transparency?r.layerDefinition?.drawingInfo&&void 0!==r.layerDefinition.drawingInfo.transparency?o(r.layerDefinition.drawingInfo.transparency):void 0:o(r.drawingInfo.transparency)}}},g={type:r,readOnly:!0,json:{origins:{service:{read:{source:[\"fullExtent\",\"spatialReference\"],reader:(e,i)=>{const a=r.fromJSON(e);return null!=i.spatialReference&&\"object\"==typeof i.spatialReference&&(a.spatialReference=n.fromJSON(i.spatialReference)),a}}}},read:!1}},u={type:String,json:{origins:{service:{read:!1},\"portal-item\":{read:!1}}}},j={type:Number,json:{origins:{service:{write:{enabled:!1}},\"web-scene\":{name:\"layerDefinition.minScale\",write:{enabled:!0,layerContainerTypes:e}}},name:\"layerDefinition.minScale\",write:!0}},v={type:Number,json:{origins:{service:{write:{enabled:!1}},\"web-scene\":{name:\"layerDefinition.maxScale\",write:{enabled:!0,layerContainerTypes:e}}},name:\"layerDefinition.maxScale\",write:!0}},I={json:{write:{ignoreOrigin:!0,layerContainerTypes:e},origins:{\"web-map\":{read:!1,write:!1}}}},T={type:t,json:{name:\"attributeTableInfo\",write:!0,origins:{\"web-scene\":{read:!1,write:!1}}}};export{T as attributeTableTemplate,c as elevationInfo,u as id,p as labelsVisible,d as legendEnabled,I as listMode,v as maxScale,j as minScale,f as opacity,b as opacityDrawingInfo,l as popupEnabled,m as readOnlyService,g as sceneLayerFullExtent,s as screenSizePerspectiveEnabled,y as url};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{initializeProjection as e,project as t}from\"../../geometry/projection.js\";import r from\"../../geometry/SpatialReference.js\";import{webMercatorToGeographic as n}from\"../../geometry/support/webMercatorUtils.js\";async function o(o){const i=o.spatialReference;if(i.isWGS84)return o.clone();if(i.isWebMercator)return n(o);const s=r.WGS84;return await e(i,s),t(o,s)}function i(e,t){if(!s(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function s(e,t){return!!e.typeKeywords?.includes(t)}function c(e){return s(e,f.HOSTED_SERVICE)}function a(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function u(e,t,r){r?i(e,t):a(e,t)}async function l(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return o(r)}const f={DEVELOPER_BASEMAP:\"DeveloperBasemap\",JSAPI:\"ArcGIS API for JavaScript\",METADATA:\"Metadata\",MULTI_LAYER:\"Multilayer\",SINGLE_LAYER:\"Singlelayer\",TABLE:\"Table\",HOSTED_SERVICE:\"Hosted Service\",LOCAL_SCENE:\"ViewingMode-Local\",TILED_IMAGERY:\"Tiled Imagery\",GROUP_LAYER_MAP:\"Map\",ORIENTED_IMAGERY_LAYER:\"OrientedImageryLayer\"};function E(e){const{portal:t,isOrgItem:r,itemControl:n}=e,o=t.user?.privileges;let i=!o||o.includes(\"features:user:edit\"),s=!!r&&!!o?.includes(\"features:user:fullEdit\");const c=\"update\"===n||\"admin\"===n;return c?s=i=!0:s&&(i=!0),{features:{edit:i,fullEdit:s},content:{updateItem:c}}}export{i as addTypeKeyword,E as getUserPrivileges,l as getWGS84ExtentForItem,s as hasTypeKeyword,c as isHostedLayer,a as removeTypeKeyword,u as toggleTypeKeyword,f as typeKeyword};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../core/Collection.js\";import{referenceSetter as t}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{isPromiseLike as o}from\"../core/promiseUtils.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../layers/Layer.js\";function d(e,r,t){let s,o;if(e)for(let a=0,i=e.length;a<i;a++){if(s=e.at(a),s?.[r]===t)return s;if(\"group\"===s?.type&&(o=d(s.layers,r,t),o))return o}}const l=l=>{let y=class extends l{constructor(...e){super(...e),this.layers=new r;const t=e=>{e.parent&&\"remove\"in e.parent&&e.parent.remove(e)},o=e=>{e.parent=this,this.layerAdded(e),\"elevation\"!==e.type&&\"base-elevation\"!==e.type||s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as an operational layer and will therefore be ignored.`)},a=e=>{e.parent=null,this.layerRemoved(e)};this.addHandles([this.layers.on(\"before-add\",(e=>{if(e.item===this)return e.preventDefault(),void s.getLogger(this).error(\"#add()\",\"Cannot add layer to itself.\");t(e.item)})),this.layers.on(\"after-add\",(e=>o(e.item))),this.layers.on(\"after-remove\",(e=>a(e.item)))])}destroy(){const e=this.layers.toArray();for(const r of e)r.destroy();this.layers.destroy()}set layers(e){this._set(\"layers\",t(e,this._get(\"layers\")))}add(e,r){const t=this.layers;if(r=t.getNextIndex(r),e instanceof n){const s=e;s.parent===this?this.reorder(s,r):t.add(s,r)}else o(e)?e.then((e=>{this.destroyed||this.add(e,r)})):s.getLogger(this).error(\"#add()\",\"The item being added is not a Layer or a Promise that resolves to a Layer.\")}addMany(e,r){const t=this.layers;let s=t.getNextIndex(r);e.slice().forEach((e=>{e.parent!==this?(t.add(e,s),s+=1):this.reorder(e,s)}))}findLayerById(e){return d(this.layers,\"id\",e)}findLayerByUid(e){return d(this.layers,\"uid\",e)}remove(e){return this.layers.remove(e)}removeMany(e){return this.layers.removeMany(e)}removeAll(){return this.layers.removeAll()}reorder(e,r){return this.layers.reorder(e,r)}layerAdded(e){}layerRemoved(e){}};return e([a()],y.prototype,\"layers\",null),y=e([i(\"esri.support.LayersMixin\")],y),y};export{l as LayersMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"../core/Collection.js\";import{referenceSetter as r}from\"../core/collectionUtils.js\";import s from\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";function a(t,e,r){if(t)for(let s=0,o=t.length;s<o;s++){const o=t.at(s);if(o[e]===r)return o;if(\"group\"===o?.type){const t=a(o.tables,e,r);if(t)return t}}}const n=n=>{let l=class extends n{constructor(...t){super(...t),this.tables=new e,this.addHandles([this.tables.on(\"after-add\",(t=>{const e=t.item;e.parent&&e.parent!==this&&\"tables\"in e.parent&&e.parent.tables.remove(e),e.parent=this,\"feature\"!==e.type&&s.getLogger(this).error(`Layer 'title:${e.title}, id:${e.id}' of type '${e.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on(\"after-remove\",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.toArray();for(const e of t)e.destroy();this.tables.destroy()}set tables(t){this._set(\"tables\",r(t,this._get(\"tables\")))}findTableById(t){return a(this.tables,\"id\",t)}findTableByUid(t){return a(this.tables,\"uid\",t)}};return t([o()],l.prototype,\"tables\",null),l=t([i(\"esri.support.TablesMixin\")],l),l};export{n as TablesMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../core/CollectionFlattener.js\";function t(t){return new e({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const t=[];return\"tables\"in e&&t.push(e.tables),\"layers\"in e&&t.push(e.layers),t},itemFilterFunction:e=>{const t=e.parent;return!!t&&\"tables\"in t&&t.tables.includes(e)}})}function n(e){for(const t of e.values())t?.destroy();e.clear()}export{t as createFlattenedTablesCollection,n as destroyMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e=Symbol(\"WebScene\");export{e as WebSceneTag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";import{clone as r}from\"../core/lang.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{cast as s}from\"../core/accessorSupport/decorators/cast.js\";import{reader as l}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as p}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as m}from\"../core/accessorSupport/decorators/writer.js\";import n from\"./elements/AttributeTableGroupElement.js\";import{ensureType as c,fromJSON as a,toJSON as i,buildTypeMaps as u}from\"./support/elements.js\";var d;const b=u(n);let j=d=class extends t{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return c(e,b)}readElements(e,t){return a(t.attributeTableElements,b)}writeElements(e,t){t.attributeTableElements=i(e,b)}clone(){return new d({elements:r(this.elements),orderByFields:this.orderByFields})}};e([o({json:{write:!0}})],j.prototype,\"elements\",void 0),e([s(\"elements\")],j.prototype,\"castElements\",null),e([l(\"elements\",[\"attributeTableElements\"])],j.prototype,\"readElements\",null),e([m(\"elements\")],j.prototype,\"writeElements\",null),e([o({type:[Object],json:{write:!0}})],j.prototype,\"orderByFields\",void 0),j=d=e([p(\"esri.tables.AttributeTableTemplate\")],j);const f=j;export{f as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"./AttributeTableElement.js\";var s;let p=s=class extends o{constructor(t){super(t),this.displayType=\"auto\",this.type=\"attachment\"}clone(){return new s({description:this.description,displayType:this.displayType,label:this.label})}};t([e({type:[\"auto\"],json:{write:!0}})],p.prototype,\"displayType\",void 0),t([e({type:[\"attachment\"],readOnly:!0,json:{read:!1,write:!0}})],p.prototype,\"type\",void 0),p=s=t([r(\"esri.tables.elements.AttributeTableAttachmentElement\")],p);const a=p;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends o{constructor(t){super(t),this.description=null,this.label=null,this.type=null}};t([e({type:String,json:{write:!0}})],s.prototype,\"description\",void 0),t([e({type:String,json:{write:!0}})],s.prototype,\"label\",void 0),t([e()],s.prototype,\"type\",void 0),s=t([r(\"esri.tables.elements.AttributeTableElement\")],s);const p=s;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"./AttributeTableElement.js\";var s;let i=s=class extends o{constructor(e){super(e),this.fieldName=null,this.type=\"field\"}clone(){return new s({description:this.description,fieldName:this.fieldName,label:this.label})}};e([t({type:String,json:{write:!0}})],i.prototype,\"fieldName\",void 0),e([t({type:String,json:{read:!1,write:!0}})],i.prototype,\"type\",void 0),i=s=e([r(\"esri.tables.elements.AttributeTableFieldElement\")],i);const p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{clone as t}from\"../../core/lang.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{cast as s}from\"../../core/accessorSupport/decorators/cast.js\";import{reader as o}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import n from\"./AttributeTableElement.js\";import{ensureType as m,fromJSON as a,toJSON as c,buildTypeMaps as i}from\"../support/elements.js\";var u;let b=u=class extends n{constructor(e){super(e),this.elements=null,this.type=\"group\"}castElements(e){return m(e,d,!1)}readElements(e,t){return a(t.attributeTableElements,d,!1)}writeElements(e,t){t.attributeTableElements=c(e,d,!1)}clone(){return new u({description:this.description,elements:t(this.elements),label:this.label})}};e([r({json:{write:!0}})],b.prototype,\"elements\",void 0),e([s(\"elements\")],b.prototype,\"castElements\",null),e([o(\"elements\",[\"attributeTableElements\"])],b.prototype,\"readElements\",null),e([p(\"elements\")],b.prototype,\"writeElements\",null),e([r({type:String,json:{read:!1,write:!0}})],b.prototype,\"type\",void 0),b=u=e([l(\"esri.tables.elements.AttributeTableGroupElement\")],b);const d=i(b),j=b;export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"./AttributeTableElement.js\";var s;let i=s=class extends o{constructor(e){super(e),this.relationshipId=null,this.type=\"relationship\"}clone(){return new s({description:this.description,label:this.label,relationshipId:this.relationshipId})}};e([t({type:Number,json:{write:!0}})],i.prototype,\"relationshipId\",void 0),e([t({type:[\"relationship\"],json:{read:!1,write:!0}})],i.prototype,\"type\",void 0),i=s=e([r(\"esri.tables.elements.AttributeTableRelationshipElement\")],i);const p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ensureOneOfType as t}from\"../../core/accessorSupport/ensureType.js\";import e from\"../elements/AttributeTableAttachmentElement.js\";import p from\"../elements/AttributeTableElement.js\";import r from\"../elements/AttributeTableFieldElement.js\";import o from\"../elements/AttributeTableRelationshipElement.js\";function i(t){return{typesWithGroup:{base:p,key:\"type\",typeMap:{attachment:e,field:r,group:t,relationship:o}},typesWithoutGroup:{base:p,key:\"type\",typeMap:{attachment:e,field:r,relationship:o}}}}function n(t,e,p=!0){if(!t)return null;const r=p?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>r[t.type])).map((t=>r[t.type].fromJSON(t)))}function u(t,e,p=!0){if(!t)return null;const r=p?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter((t=>r[t.type])).map((t=>t.toJSON()))}function s(e,p,r=!0){return e?e.map((e=>t(r?p.typesWithGroup:p.typesWithoutGroup,e))):null}export{i as buildTypeMaps,s as ensureType,n as fromJSON,u as toJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar A;!function(A){A[A.SAVE=0]=\"SAVE\",A[A.SAVE_AS=1]=\"SAVE_AS\"}(A||(A={}));export{A as SaveOperationType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";async function r(e){const r=[];for(const o of e.allLayers)if(\"beforeSave\"in o&&\"function\"==typeof o.beforeSave){const e=o.beforeSave();e&&r.push(e)}await Promise.allSettled(r)}const o=new Set([\"layer:unsupported\",\"property:unsupported\",\"symbol:unsupported\",\"symbol-layer:unsupported\",\"url:unsupported\"]);function t(r,t,n){let s=(r.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:r,message:o,details:t})=>new e(r,o,t)));if(r.blockedRelativeUrls&&(s=s.concat(r.blockedRelativeUrls.map((r=>new e(\"url:unsupported\",`Relative url '${r}' is not supported`))))),n){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:t}=n;e&&(s=s.filter((({name:e})=>!(o.has(e)||r.includes(e))))),t&&(s=s.filter((e=>\"web-document-write:property-required\"!==e.name)))}if(s.length>0)throw new e(t.errorName,\"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:s})}export{r as beforeSave,t as evaluateWriteErrors};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{clone as t}from\"../../core/lang.js\";import{getDeepValue as n}from\"../../core/object.js\";import{numberToJSON as r}from\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import{isFeatureCollectionLayer as i}from\"../../layers/support/layerUtils.js\";const o=new Set([\"bing-maps\",\"imagery\",\"imagery-tile\",\"map-image\",\"open-street-map\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wms\",\"wmts\"]),l=new Set([\"catalog\",\"csv\",\"feature\",\"geo-rss\",\"geojson\",\"group\",\"imagery\",\"imagery-tile\",\"kml\",\"knowledge-graph\",\"map-image\",\"map-notes\",\"media\",\"ogc-feature\",\"oriented-imagery\",\"route\",\"stream\",\"subtype-group\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wfs\",\"wms\",\"wmts\"]);function a(e){o.delete(e),l.delete(e)}function s(e){o.add(e),l.add(e)}function d(e){return\"basemap\"===e.layerContainerType?o:\"operational-layers\"===e.layerContainerType?l:null}function p(e,t){if(t.restrictedWebMapWriting){const n=d(t);return null==n||n.has(e.type)&&!i(e)}return!0}function u(e,t){if(t)if(i(e)){const r=n(\"featureCollection.layers\",t),i=r?.[0]?.layerDefinition;i&&c(e,i)}else\"group\"!==e.type&&c(e,t)}function c(e,t){\"maxScale\"in e&&(t.maxScale=r(e.maxScale)??void 0),\"minScale\"in e&&(t.minScale=r(e.minScale)??void 0)}function m(e,t){if(u(e,t),t&&(t.id=e.id,\"blendMode\"in e&&(t.blendMode=e.blendMode,\"normal\"===t.blendMode&&delete t.blendMode),t.opacity=r(e.opacity)??void 0,t.title=e.title||\"Layer\",t.visibility=e.visible,\"legendEnabled\"in e&&\"wmts\"!==e.type))if(i(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function f(n,r,o){if(!n.persistenceEnabled)return null;if(!(\"write\"in n)||!n.write)return o?.messages&&o.messages.push(new e(\"layer:unsupported\",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted`,{layer:n})),null;if(i(n)&&!n.isTable)r=n.resourceInfo;else if(p(n,o)){const e={};return n.write(e,o)?e:null}return null!=r&&m(n,r=t(r)),r}export{s as disableRestrictedWriting,a as enableRestrictedWriting,f as getLayerJSON};\n"],"names":[],"sourceRoot":""}