{"version":3,"file":"views-3d-layers-graphics-objectResourceUtils.js","mappings":"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","sources":["webpack://defra/./node_modules/@arcgis/core/chunks/DefaultMaterial.glsl.js","webpack://defra/./node_modules/@arcgis/core/chunks/RealisticTree.glsl.js","webpack://defra/./node_modules/@arcgis/core/chunks/SSAO.glsl.js","webpack://defra/./node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js","webpack://defra/./node_modules/@arcgis/core/chunks/boundedPlane.js","webpack://defra/./node_modules/@arcgis/core/chunks/sphere.js","webpack://defra/./node_modules/@arcgis/core/chunks/vec2.js","webpack://defra/./node_modules/@arcgis/core/chunks/vec3.js","webpack://defra/./node_modules/@arcgis/core/chunks/vec33.js","webpack://defra/./node_modules/@arcgis/core/chunks/vec4.js","webpack://defra/./node_modules/@arcgis/core/chunks/vec43.js","webpack://defra/./node_modules/@arcgis/core/core/NestedMap.js","webpack://defra/./node_modules/@arcgis/core/core/ObjectStack.js","webpack://defra/./node_modules/@arcgis/core/core/VectorStack.js","webpack://defra/./node_modules/@arcgis/core/core/devEnvironmentUtils.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/quatf64.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/quat.js","webpack://defra/./node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js","webpack://defra/./node_modules/@arcgis/core/geometry/projection/localRotationUtils.js","webpack://defra/./node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/FloatArray.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/Indices.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/BufferView.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/internals/Mat3.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/internals/Mat4.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/internals/Scalar.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/internals/Vec2.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/internals/Vec3.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/internals/Vec4.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/math/common.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/buffer/types.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/lineSegment.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/plane.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/ray.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/sphereUtils.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/triangle.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/vector.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/vectorStacks.js","webpack://defra/./node_modules/@arcgis/core/libs/basisu/BasisU.js","webpack://defra/./node_modules/@arcgis/core/libs/basisu/TextureFormat.js","webpack://defra/./node_modules/@arcgis/core/support/requestImageUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/glTF/DefaultLoadingContext.js","webpack://defra/./node_modules/@arcgis/core/views/3d/glTF/internal/TextureTransformUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/glTF/internal/indexUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/layers/graphics/ProcessedObjectResource.js","webpack://defra/./node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","webpack://defra/./node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js","webpack://defra/./node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js","webpack://defra/./node_modules/@arcgis/core/views/3d/support/debugFlags.js","webpack://defra/./node_modules/@arcgis/core/views/3d/support/dito.js","webpack://defra/./node_modules/@arcgis/core/views/3d/support/mathUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoubleConfiguration.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceConstants.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/TextureTransformUV.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloat16Encoding.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4sPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatDrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2PassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix3DrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix3PassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sDrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfigurationKey.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAO.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOBlurTechnique.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAONoiseData.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOParameters.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOTechnique.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/AttributeArray.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/BoundingInfo.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RayIntersections.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/geometryDataUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechniqueConfiguration.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl/RenderNode.js","webpack://defra/./node_modules/@arcgis/core/views/3d/webgl/formats.js","webpack://defra/./node_modules/@arcgis/core/views/ViewingMode.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/GLObjectType.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/Texture.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/Util.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/ValidatedTextureDescriptor.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/checkWebGLError.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/doublePrecisionUtils.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/enums.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/getDataTypeBytes.js","webpack://defra/./node_modules/@arcgis/core/views/webgl/renderState.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{isColorOrColorEmission as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as s,NormalType as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as m}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VertexNormal as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{VerticalOffset as v}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as u}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ComputeNormalTexture as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js\";import{EvaluateAmbientOcclusion as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as w,addAmbientBoostFactor as p,addLightingGlobalFactor as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{addMainLightIntensity as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{Normals as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{PhysicallyBasedRendering as L}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as C,PBRMode as j}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMapPass as P,ReadShadowMapDraw as T}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{terrainDepthTest as O}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{colorTextureUV as N,normalTextureUV as S,emissiveTextureUV as A,occlusionTextureUV as V,metallicRoughnessTextureUV as $}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TextureTransformUV.glsl.js\";import{VisualVariables as D}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{alphaCutoff as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{DiscardOrAdjustAlphaPass as E}from\"../views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl.js\";import{MixExternalColor as U}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{addProjViewLocalOrigin as I,addCameraPosition as B}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as F}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as _}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as R}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as z,If as G}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as W}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as k}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as H}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as q}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";function J(J){const K=new W,{vertex:Q,fragment:X,varyings:Y}=K,{output:Z,normalType:ee,offsetBackfaces:re,instancedColor:oe,spherical:ie,receiveShadows:ae,snowCover:le,pbrMode:se,textureAlphaPremultiplied:te,instancedDoublePrecision:ne,hasVertexColors:de,hasVertexTangents:ce,hasColorTexture:me,hasNormalTexture:ge,hasNormalTextureTransform:ve,hasColorTextureTransform:ue}=J;if(I(Q,J),K.include(n),Y.add(\"vpos\",\"vec3\"),K.include(D,J),K.include(l,J),K.include(v,J),K.include(N,J),!o(Z))return K.include(u,J),K;K.include(S,J),K.include(A,J),K.include(V,J),K.include($,J),B(Q,J),K.include(s,J),K.include(a,J);const be=ee===t.Attribute||ee===t.Compressed;return be&&re&&K.include(r),K.include(b,J),K.include(g,J),oe&&K.attributes.add(H.INSTANCECOLOR,\"vec4\"),Y.add(\"vPositionLocal\",\"vec3\"),K.include(c,J),K.include(e,J),K.include(d,J),K.include(m,J),Q.uniforms.add(new _(\"externalColor\",(e=>e.externalColor))),Y.add(\"vcolorExt\",\"vec4\"),J.terrainDepthTest&&Y.add(\"depth\",\"float\"),Q.main.add(z`\n    forwardNormalizedVertexColor();\n    vcolorExt = externalColor;\n    ${G(oe,\"vcolorExt *= instanceColor * 0.003921568627451;\")}\n    vcolorExt *= vvColor();\n    vcolorExt *= getSymbolColor();\n    forwardColorMixMode();\n\n    if (vcolorExt.a < ${z.float(M)}) {\n      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n    } else {\n      vpos = getVertexInLocalOriginSpace();\n      vPositionLocal = vpos - view[3].xyz;\n      vpos = subtractOrigin(vpos);\n      ${G(be,\"vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\")}\n      vpos = addVerticalOffset(vpos, localOrigin);\n      ${G(ce,\"vTangent = dpTransformVertexTangent(tangent);\")}\n      gl_Position = transformPosition(proj, view, vpos);\n      ${G(be&&re,\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);\")}\n    }\n\n    ${G(J.terrainDepthTest,\"depth = (view * vec4(vpos, 1.0)).z;\")}\n    forwardLinearDepth();\n    forwardTextureCoordinates();\n    forwardColorUV();\n    forwardNormalUV();\n    forwardEmissiveUV();\n    forwardOcclusionUV();\n    forwardMetallicRoughnessUV();\n  `),K.include(w,J),K.include(h,J),K.include(E,J),K.include(ne?P:T,J),K.include(O,J),K.include(i,J),K.include(q,J),B(X,J),X.uniforms.add(Q.uniforms.get(\"localOrigin\"),new F(\"ambient\",(e=>e.ambient)),new F(\"diffuse\",(e=>e.diffuse)),new R(\"opacity\",(e=>e.opacity)),new R(\"layerOpacity\",(e=>e.layerOpacity))),me&&X.uniforms.add(new k(\"tex\",(e=>e.texture))),K.include(C,J),K.include(L,J),X.include(U),K.include(y,J),p(X),f(X),x(X),X.main.add(z`\n      discardBySlice(vpos);\n      ${G(J.terrainDepthTest,\"terrainDepthTest(depth);\")}\n      ${me?z`\n              vec4 texColor = texture(tex, ${ue?\"colorUV\":\"vuv0\"});\n              ${G(te,\"texColor.rgb /= texColor.a;\")}\n              discardOrAdjustAlpha(texColor);`:z`vec4 texColor = vec4(1.0);`}\n      shadingParams.viewDirection = normalize(vpos - cameraPosition);\n      ${ee===t.ScreenDerivative?z`vec3 normal = screenDerivativeNormal(vPositionLocal);`:z`shadingParams.normalView = vNormalWorld;\n                 vec3 normal = shadingNormal(shadingParams);`}\n      applyPBRFactors();\n      float ssao = evaluateAmbientOcclusionInverse() * getBakedOcclusion();\n\n      vec3 posWorld = vpos + localOrigin;\n\n      float additionalAmbientScale = additionalDirectedAmbientLight(posWorld);\n      float shadow = ${ae?\"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth))\":G(ie,\"lightingGlobalFactor * (1.0 - additionalAmbientScale)\",\"0.0\")};\n\n      vec3 matColor = max(ambient, diffuse);\n      vec3 albedo = mixExternalColor(${G(de,\"vColor.rgb *\")} matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n      float opacity_ = layerOpacity * mixExternalOpacity(${G(de,\"vColor.a * \")} opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n      ${ge?`mat3 tangentSpace = computeTangentSpace(${ce?\"normal\":\"normal, vpos, vuv0\"});\\n             vec3 shadingNormal = computeTextureNormal(tangentSpace, ${ve?\"normalUV\":\"vuv0\"});`:\"vec3 shadingNormal = normal;\"}\n      vec3 normalGround = ${ie?\"normalize(posWorld);\":\"vec3(0.0, 0.0, 1.0);\"}\n\n      ${G(le,z`\n            float snow = smoothstep(0.5, 0.55, dot(normal, normalGround));\n            albedo = mix(albedo, vec3(1), snow);\n            shadingNormal = mix(shadingNormal, normal, snow);\n            ssao = mix(ssao, 1.0, snow);`)}\n\n      vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n\n      ${se===j.Normal||se===j.Schematic?z`\n              float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];\n              ${G(le,z`mrr = mix(mrr, vec3(0.0, 1.0, 0.04), snow);`)}\n              vec4 emission = ${le?\"mix(getEmissions(), vec4(0.0), snow)\":\"getEmissions()\"};\n              vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:z`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}\n      vec4 finalColor = vec4(shadedColor, opacity_);\n      outputColorHighlightOID(finalColor, vpos);\n  `),K}const K=Object.freeze(Object.defineProperty({__proto__:null,build:J},Symbol.toStringTag,{value:\"Module\"}));export{K as D,J as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{ShaderOutput as i}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VerticalOffset as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as m}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{EvaluateAmbientOcclusion as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as b,addAmbientBoostFactor as w,addLightingGlobalFactor as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{addMainLightDirection as p,addMainLightIntensity as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js\";import{PhysicallyBasedRendering as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PBRMode as x,PhysicallyBasedRenderingParameters as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMapPass as C,ReadShadowMapDraw as L}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{terrainDepthTest as j}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{VisualVariables as O}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{alphaCutoff as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{DiscardOrAdjustAlphaPass as P}from\"../views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlpha.glsl.js\";import{MixExternalColor as A}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{addProjViewLocalOrigin as S,addCameraPosition as D}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float3PassUniform as E}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as $}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as F}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as N,If as T}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as V}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as I}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as _}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{outputColorHighlightOID as B}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";function R(R){const z=new V,{vertex:k,fragment:G,varyings:U}=z,{output:W,offsetBackfaces:H,instancedColor:q,pbrMode:J,snowCover:K,spherical:Q}=R,X=J===x.Normal||J===x.Schematic;if(S(k,R),z.include(s),U.add(\"vpos\",\"vec3\"),z.include(O,R),z.include(l,R),z.include(g,R),W===i.Color&&(D(z.vertex,R),z.include(t,R),z.include(a,R),H&&z.include(r),q&&z.attributes.add(_.INSTANCECOLOR,\"vec4\"),U.add(\"vNormalWorld\",\"vec3\"),U.add(\"localvpos\",\"vec3\"),R.terrainDepthTest&&U.add(\"depth\",\"float\"),z.include(d,R),z.include(e,R),z.include(n,R),z.include(c,R),k.uniforms.add(new $(\"externalColor\",(e=>e.externalColor))),U.add(\"vcolorExt\",\"vec4\"),k.main.add(N`\n      forwardNormalizedVertexColor();\n      vcolorExt = externalColor;\n      ${T(q,\"vcolorExt *= instanceColor * 0.003921568627451;\")}\n      vcolorExt *= vvColor();\n      vcolorExt *= getSymbolColor();\n      forwardColorMixMode();\n\n      if (vcolorExt.a < ${N.float(M)}) {\n        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n      } else {\n        vpos = getVertexInLocalOriginSpace();\n        localvpos = vpos - view[3].xyz;\n        vpos = subtractOrigin(vpos);\n        vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        ${T(H,\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);\")}\n      }\n      ${T(R.terrainDepthTest,\"depth = (view * vec4(vpos, 1.0)).z;\")}\n      forwardLinearDepth();\n      forwardTextureCoordinates();`)),W===i.Color){const{hasColorTexture:e,hasColorTextureTransform:r,receiveShadows:i}=R;z.include(b,R),z.include(v,R),z.include(P,R),z.include(R.instancedDoublePrecision?C:L,R),z.include(j,R),z.include(o,R),z.include(B,R),D(z.fragment,R),p(G),w(G),h(G),G.uniforms.add(k.uniforms.get(\"localOrigin\"),k.uniforms.get(\"view\"),new E(\"ambient\",(e=>e.ambient)),new E(\"diffuse\",(e=>e.diffuse)),new F(\"opacity\",(e=>e.opacity)),new F(\"layerOpacity\",(e=>e.layerOpacity))),e&&G.uniforms.add(new I(\"tex\",(e=>e.texture))),z.include(y,R),z.include(u,R),G.include(A),f(G),G.main.add(N`\n      discardBySlice(vpos);\n      ${T(R.terrainDepthTest,\"terrainDepthTest(depth);\")}\n      vec4 texColor = ${e?`texture(tex, ${r?\"colorUV\":\"vuv0\"})`:\" vec4(1.0)\"};\n      ${T(e,`${T(R.textureAlphaPremultiplied,\"texColor.rgb /= texColor.a;\")}\\n        discardOrAdjustAlpha(texColor);`)}\n      vec3 viewDirection = normalize(vpos - cameraPosition);\n      applyPBRFactors();\n      float ssao = evaluateAmbientOcclusionInverse();\n      ssao *= getBakedOcclusion();\n\n      float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n      vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n      float shadow = ${i?\"max(lightingGlobalFactor * (1.0 - additionalAmbientScale), readShadowMap(vpos, linearDepth))\":Q?\"lightingGlobalFactor * (1.0 - additionalAmbientScale)\":\"0.0\"};\n      vec3 matColor = max(ambient, diffuse);\n      ${R.hasVertexColors?N`vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n             float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:N`vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n             float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}\n      ${T(K,\"albedo = mix(albedo, vec3(1), 0.9);\")}\n      ${N`vec3 shadingNormal = normalize(vNormalWorld);\n             albedo *= 1.2;\n             vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);\n             float alignmentLightView = clamp(dot(viewForward, -mainLightDirection), 0.0, 1.0);\n             float transmittance = 1.0 - clamp(dot(viewForward, shadingNormal), 0.0, 1.0);\n             float treeRadialFalloff = vColor.r;\n             float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n             additionalLight += backLightFactor * mainLightIntensity;`}\n      ${T(X,`vec3 normalGround = ${Q?\"normalize(vpos + localOrigin)\":\"vec3(0.0, 0.0, 1.0)\"};`)}\n      ${X?N`float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];\n                 ${T(K,N`mrr = vec3(0.0, 1.0, 0.04);`)}\n            vec4 emission = ${K?\"vec4(0.0)\":\"getEmissions()\"};\n            vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:N`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}\n      vec4 finalColor = vec4(shadedColor, opacity_);\n      outputColorHighlightOID(finalColor, vpos);`)}return z.include(m,R),z}const z=Object.freeze(Object.defineProperty({__proto__:null,build:R},Symbol.toStringTag,{value:\"Module\"}));export{z as R,R as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{ScreenSpacePass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{CameraSpace as a}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{Float2PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as s}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as c}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const u=16;function f(){const r=new c,f=r.fragment;return r.include(t),r.include(a),f.include(o),f.uniforms.add(new i(\"radius\",((e,r)=>d(r.camera)))).code.add(s`vec3 sphere[16] = vec3[16](\nvec3(0.186937, 0.0, 0.0),\nvec3(0.700542, 0.0, 0.0),\nvec3(-0.864858, -0.481795, -0.111713),\nvec3(-0.624773, 0.102853, -0.730153),\nvec3(-0.387172, 0.260319, 0.007229),\nvec3(-0.222367, -0.642631, -0.707697),\nvec3(-0.01336, -0.014956, 0.169662),\nvec3(0.122575, 0.1544, -0.456944),\nvec3(-0.177141, 0.85997, -0.42346),\nvec3(-0.131631, 0.814545, 0.524355),\nvec3(-0.779469, 0.007991, 0.624833),\nvec3(0.308092, 0.209288,0.35969),\nvec3(0.359331, -0.184533, -0.377458),\nvec3(0.192633, -0.482999, -0.065284),\nvec3(0.233538, 0.293706, -0.055139),\nvec3(0.417709, -0.386701, 0.442449)\n);\nfloat fallOffFunction(float vv, float vn, float bias) {\nfloat f = max(radius * radius - vv, 0.0);\nreturn f * f * f * max(vn - bias, 0.0);\n}`),f.code.add(s`float aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {\nvec3 v = Q - C;\nfloat vv = dot(v, v);\nfloat vn = dot(normalize(v), n_C);\nreturn fallOffFunction(vv, vn, 0.1);\n}`),f.uniforms.add(new l(\"normalMap\",(e=>e.normalTexture)),new l(\"depthMap\",(e=>e.depthTexture)),new i(\"projScale\",(e=>e.projScale)),new l(\"rnm\",(e=>e.noiseTexture)),new n(\"rnmScale\",((r,t)=>e(m,t.camera.fullWidth/r.noiseTexture.descriptor.width,t.camera.fullHeight/r.noiseTexture.descriptor.height))),new i(\"intensity\",(e=>e.intensity)),new n(\"screenSize\",((r,t)=>e(m,t.camera.fullWidth,t.camera.fullHeight)))),r.outputs.add(\"fragOcclusion\",\"float\"),f.main.add(s`\n      float depth = depthFromTexture(depthMap, uv);\n\n      // Early out if depth is out of range, such as in the sky\n      if (depth >= 1.0 || depth <= 0.0) {\n        fragOcclusion = 1.0;\n        return;\n      }\n\n      // get the normal of current fragment\n      vec4 norm4 = texture(normalMap, uv);\n      if(norm4.a != 1.0) {\n        fragOcclusion = 1.0;\n        return;\n      }\n      vec3 norm = vec3(-1.0) + 2.0 * norm4.xyz;\n\n      float currentPixelDepth = linearizeDepth(depth);\n      vec3 currentPixelPos = reconstructPosition(gl_FragCoord.xy, currentPixelDepth);\n\n      float sum = 0.0;\n      vec3 tapPixelPos;\n\n      vec3 fres = normalize(2.0 * texture(rnm, uv * rnmScale).xyz - 1.0);\n\n      // note: the factor 2.0 should not be necessary, but makes ssao much nicer.\n      // bug or deviation from CE somewhere else?\n      float ps = projScale / (2.0 * currentPixelPos.z * zScale.x + zScale.y);\n\n      for(int i = 0; i < ${s.int(u)}; ++i) {\n        vec2 unitOffset = reflect(sphere[i], fres).xy;\n        vec2 offset = vec2(-unitOffset * radius * ps);\n\n        // don't use current or very nearby samples\n        if( abs(offset.x) < 2.0 || abs(offset.y) < 2.0){\n          continue;\n        }\n\n        vec2 tc = vec2(gl_FragCoord.xy + offset);\n        if (tc.x < 0.0 || tc.y < 0.0 || tc.x > screenSize.x || tc.y > screenSize.y) continue;\n        vec2 tcTap = tc / screenSize;\n        float occluderFragmentDepth = linearDepthFromTexture(depthMap, tcTap);\n\n        tapPixelPos = reconstructPosition(tc, occluderFragmentDepth);\n\n        sum += aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);\n      }\n\n      // output the result\n      float A = max(1.0 - sum * intensity / float(${s.int(u)}), 0.0);\n\n      // Anti-tone map to reduce contrast and drag dark region farther: (x^0.2 + 1.2 * x^4) / 2.2\n      A = (pow(A, 0.2) + 1.2 * A * A * A * A) / 2.2;\n\n      fragOcclusion = A;`),r}function d(e){return Math.max(10,20*e.computeScreenPixelSizeAtDist(Math.abs(4*e.relativeElevation)))}const m=r(),v=Object.freeze(Object.defineProperty({__proto__:null,build:f,getRadius:d},Symbol.toStringTag,{value:\"Module\"}));export{v as S,f as b,d as g};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{ReadDepth as r}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js\";import{Float2DrawUniform as o}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{FloatPassUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as l}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DDrawUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const d=4;function i(){const i=new l,f=i.fragment;i.include(e);const u=(d+1)/2,c=1/(2*u*u);return f.include(r),f.uniforms.add(new s(\"depthMap\",(e=>e.depthTexture)),new n(\"tex\",(e=>e.colorTexture)),new o(\"blurSize\",(e=>e.blurSize)),new t(\"projScale\",((e,r)=>{const o=r.camera.distance;return o>5e4?Math.max(0,e.projScale-(o-5e4)):e.projScale}))),f.code.add(a`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${a.float(c)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),i.outputs.add(\"fragBlur\",\"float\"),f.main.add(a`\n    float b = 0.0;\n    float w_total = 0.0;\n\n    float center_d = linearDepthFromTexture(depthMap, uv);\n\n    float sharpness = -0.05 * projScale / center_d;\n    for (int r = -${a.int(d)}; r <= ${a.int(d)}; ++r) {\n      float rf = float(r);\n      vec2 uvOffset = uv + rf * blurSize;\n      blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n    }\n    fragBlur = b / w_total;`),i}const f=Object.freeze(Object.defineProperty({__proto__:null,build:i},Symbol.toStringTag,{value:\"Module\"}));export{f as S,i as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import s from\"../core/Logger.js\";import{acosClamped as t}from\"../core/mathUtils.js\";import{ObjectStack as i}from\"../core/ObjectStack.js\";import{invert as n,transpose as r,fromRotation as o}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{create as e}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{c as a,h as c,g as u,i as g,j as b,l as f,o as p,f as l,d as m,p as d,t as h,n as j,k as y}from\"./vec32.js\";import{fromValues as I,clone as P,create as v}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as N}from\"../geometry/support/aaBoundingRect.js\";import{Axis as w}from\"../geometry/support/Axis.js\";import{create as x,projectPointClamp as M,distance2 as S}from\"../geometry/support/lineSegment.js\";import{create as T,wrap as V,copy as A,fromVectorsAndPoint as E,fromValues as _,intersectRay as O,intersectLineSegment as k,intersectLineSegmentClamp as B,isPointInside as C,projectPoint as F,getNormal as R,setOffsetFromPoint as Y}from\"../geometry/support/plane.js\";import{distance2 as q}from\"../geometry/support/ray.js\";import{projectPointSignedLength as L}from\"../geometry/support/vector.js\";import{sv3d as U}from\"../geometry/support/vectorStacks.js\";const z=()=>s.getLogger(\"esri.views.3d.support.geometryUtils.boundedPlane\");class D{constructor(){this.plane=T(),this.origin=v(),this.basis1=v(),this.basis2=v()}}const G=D;function W(s=Ms){return{plane:T(s.plane),origin:P(s.origin),basis1:P(s.basis1),basis2:P(s.basis2)}}function X(s,t,i){const n=As.get();return n.origin=s,n.basis1=t,n.basis2=i,n.plane=V(0,0,0,0),K(n),n}function Z(s,t=W()){return J(s.origin,s.basis1,s.basis2,t)}function H(s,t){a(t.origin,s.origin),a(t.basis1,s.basis1),a(t.basis2,s.basis2),A(t.plane,s.plane)}function J(s,t,i,n=W()){return a(n.origin,s),a(n.basis1,t),a(n.basis2,i),K(n),ws(n,\"fromValues()\"),n}function K(s){E(s.basis2,s.basis1,s.origin,s.plane)}function Q(s,t,i){s!==i&&Z(s,i);const n=c(U.get(),ys(s),t);return u(i.origin,i.origin,n),i.plane[3]-=t,i}function $(s,t,i){return ts(t,i),Q(i,ls(s,s.origin),i),i}function ss(s,t){const i=s.basis1[0],n=s.basis2[1],[r,o]=s.origin;return N(r-i,o-n,r+i,o+n,t)}function ts(s,t=W()){const i=(s[2]-s[0])/2,n=(s[3]-s[1])/2;return g(t.origin,s[0]+i,s[1]+n,0),g(t.basis1,i,0,0),g(t.basis2,0,n,0),_(0,0,1,0,t.plane),t}function is(s,t,i){return!!O(s.plane,t,i)&&Ps(s,i)}function ns(s,t,i){if(is(s,t,i))return i;const n=rs(s,t,U.get());return u(i,t.origin,c(U.get(),t.direction,b(t.origin,n)/f(t.direction))),i}function rs(s,i,n){const r=Ss.get();xs(s,i,r,Ss.get());let o=Number.POSITIVE_INFINITY;for(const e of Es){const c=Ns(s,e,Ts.get()),u=U.get();if(k(r,c,u)){const s=p(U.get(),i.origin,u),r=Math.abs(t(l(i.direction,s)));r<o&&(o=r,a(n,u))}}return o===Number.POSITIVE_INFINITY?es(s,i,n):n}function os(s,t){return(t-s)/t}function es(s,t,i){if(is(s,t,i))return i;const n=Ss.get(),r=Ss.get();xs(s,t,n,r);let o=Number.POSITIVE_INFINITY;for(const e of Es){const c=Ns(s,e,Ts.get()),u=U.get();if(B(n,c,u)){const s=q(t,u);if(!C(r,u))continue;s<o&&(o=s,a(i,u))}}return us(s,t.origin)<o&&as(s,t.origin,i),i}function as(s,t,i){const n=F(s.plane,t,U.get()),r=M(vs(s,s.basis1),n,-1,1,U.get()),o=M(vs(s,s.basis2),n,-1,1,U.get());return m(i,u(U.get(),r,o),s.origin),i}function cs(s,t,i){const{origin:n,basis1:r,basis2:o}=s,e=m(U.get(),t,n),a=L(r,e),c=L(o,e),u=L(ys(s),e);return g(i,a,c,u)}function us(s,t){const i=cs(s,t,U.get()),{basis1:n,basis2:r}=s,o=f(n),e=f(r),a=Math.max(Math.abs(i[0])-o,0),c=Math.max(Math.abs(i[1])-e,0),u=i[2];return a*a+c*c+u*u}function gs(s,t){return Math.sqrt(us(s,t))}function bs(s,t){let i=Number.NEGATIVE_INFINITY;for(const n of Es){const r=Ns(s,n,Ts.get()),o=S(r,t);o>i&&(i=o)}return Math.sqrt(i)}function fs(s,t){return C(s.plane,t)&&Ps(s,t)}function ps(s,t,i,n){return Is(s,i,n)}function ls(s,t){const i=-s.plane[3];return L(ys(s),t)-i}function ms(s,t,i,n){const r=ls(s,t),o=c(Vs,ys(s),i-r);return u(n,t,o),n}function ds(s,t){return d(s.basis1,t.basis1)&&d(s.basis2,t.basis2)&&d(s.origin,t.origin)}function hs(s,t,i){return s!==i&&Z(s,i),n(_s,t),r(_s,_s),h(i.basis1,s.basis1,_s),h(i.basis2,s.basis2,_s),h(R(i.plane),R(s.plane),_s),h(i.origin,s.origin,t),Y(i.plane,i.plane,i.origin),i}function js(s,t,i,n){return s!==n&&Z(s,n),o(Os,t,i),h(n.basis1,s.basis1,Os),h(n.basis2,s.basis2,Os),K(n),n}function ys(s){return R(s.plane)}function Is(s,t,i){switch(t){case w.X:a(i,s.basis1),j(i,i);break;case w.Y:a(i,s.basis2),j(i,i);break;case w.Z:a(i,ys(s))}return i}function Ps(s,t){const i=m(U.get(),t,s.origin),n=y(s.basis1),r=y(s.basis2),o=l(s.basis1,i),e=l(s.basis2,i);return-o-n<0&&o-n<0&&-e-r<0&&e-r<0}function vs(s,t){const i=Ts.get();return a(i.origin,s.origin),a(i.vector,t),i}function Ns(s,t,i){const{basis1:n,basis2:r,origin:o}=s,e=c(U.get(),n,t.origin[0]),a=c(U.get(),r,t.origin[1]);u(i.origin,e,a),u(i.origin,i.origin,o);const g=c(U.get(),n,t.direction[0]),b=c(U.get(),r,t.direction[1]);return c(i.vector,u(g,g,b),2),i}function ws(s,t){Math.abs(l(s.basis1,s.basis2)/(f(s.basis1)*f(s.basis2)))>1e-6&&z().warn(t,\"Provided basis vectors are not perpendicular\"),Math.abs(l(s.basis1,ys(s)))>1e-6&&z().warn(t,\"Basis vectors and plane normal are not perpendicular\"),Math.abs(-l(ys(s),s.origin)-s.plane[3])>1e-6&&z().warn(t,\"Plane offset is not consistent with plane origin\")}function xs(s,t,i,n){const r=ys(s);E(r,t.direction,t.origin,i),E(R(i),r,t.origin,n)}const Ms={plane:T(),origin:I(0,0,0),basis1:I(1,0,0),basis2:I(0,1,0)},Ss=new i(T),Ts=new i(x),Vs=v(),As=new i((()=>W())),Es=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],_s=e(),Os=e(),ks=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:G,altitudeAt:ls,axisAt:ps,cameraFrustumCoverage:os,closestPoint:es,closestPointOnSilhouette:rs,copy:Z,copyWithoutVerify:H,create:W,distance:gs,distance2:us,distanceToSilhouette:bs,elevate:Q,equals:ds,extrusionContainsPoint:fs,fromAABoundingRect:ts,fromValues:J,getExtent:ss,intersectRay:is,intersectRayClosestSilhouette:ns,normal:ys,projectPoint:as,projectPointLocal:cs,rotate:js,setAltitudeAt:ms,setExtent:$,transform:hs,up:Ms,updateUnboundedPlane:K,wrap:X},Symbol.toStringTag,{value:\"Module\"}));export{ls as A,G as B,ms as C,ds as D,Ms as E,W as a,ks as b,Z as c,os as d,fs as e,J as f,ts as g,gs as h,is as i,H as j,Q as k,ss as l,ns as m,ys as n,rs as o,es as p,as as q,js as r,$ as s,hs as t,K as u,cs as v,X as w,us as x,bs as y,ps as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import\"../core/Logger.js\";import{acosClamped as t}from\"../core/mathUtils.js\";import{fromRotation as r}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{g as n,h as s,j as o,l as e,e as i,t as a,d as c,k as u,n as f,i as m,s as l,m as g,b as p}from\"./vec32.js\";import{create as h}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{e as M,c as j}from\"./vec42.js\";import{create as d,fromValues as y}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{getEpsilon as b}from\"../core/libs/gl-matrix-2/math/common.js\";import{Axis as x}from\"../geometry/support/Axis.js\";import{fromPoints as v,closestPoint as S}from\"../geometry/support/ray.js\";import{cartesianToSpherical as q}from\"../geometry/support/sphereUtils.js\";import{angle as A}from\"../geometry/support/vector.js\";import{sv3d as P,sm4d as R}from\"../geometry/support/vectorStacks.js\";const C=E();function E(){return d()}const _=M,k=M;function w(t,r){return j(r,t)}function O(t,r){return y(t[0],t[1],t[2],r)}function T(t){return t}function z(t){t[0]=t[1]=t[2]=t[3]=0}function L(t,r){return t[0]=t[1]=t[2]=0,t[3]=r,t}function N(t){return t[3]}function U(t){return t}function V(t,r,n,s){return y(t,r,n,s)}function Z(t,r,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+r,n}function B(t,r,n){return t!==n&&w(t,n),n}function D(t,r){return r}function F(t,r,n){if(null==r)return!1;if(!Y(t,r,X))return!1;let{t0:s,t1:o}=X;if((s<0||o<s&&o>0)&&(s=o),s<0)return!1;if(n){const{origin:t,direction:o}=r;n[0]=t[0]+o[0]*s,n[1]=t[1]+o[1]*s,n[2]=t[2]+o[2]*s}return!0}function I(t,r,n){const s=v(r,n);if(!Y(t,s,X))return[];const{origin:o,direction:e}=s,{t0:i,t1:a}=X,c=r=>{const n=h();return p(n,o,e,r),$(t,n,n)};return Math.abs(i-a)<b()?[c(i)]:[c(i),c(a)]}const X={t0:0,t1:0};function Y(t,r,n){const{origin:s,direction:o}=r,e=G;e[0]=s[0]-t[0],e[1]=s[1]-t[1],e[2]=s[2]-t[2];const i=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===i)return!1;const a=2*(o[0]*e[0]+o[1]*e[1]+o[2]*e[2]),c=a*a-4*i*(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]-t[3]*t[3]);if(c<0)return!1;const u=Math.sqrt(c);return n.t0=(-a-u)/(2*i),n.t1=(-a+u)/(2*i),!0}const G=h();function H(t,r){return F(t,r,null)}function J(t,r,i){if(F(t,r,i))return i;const a=K(t,r,P.get());return n(i,r.origin,s(P.get(),r.direction,o(r.origin,a)/e(r.direction))),i}function K(t,n,o){const c=P.get(),u=R.get();i(c,n.origin,n.direction);const f=N(t);i(o,c,n.origin),s(o,o,1/e(o)*f);const m=rt(t,n.origin),l=A(n.origin,o);return r(u,l+m,c),a(o,o,u),o}function Q(t,r,n,s){const o=N(t),e=o*o,i=r+.5*Math.PI,a=n*n+e-2*Math.cos(i)*n*o,c=Math.sqrt(a),u=a-e;if(u<=0)return.5;const f=Math.sqrt(u),m=Math.acos(f/c)-Math.asin(o/(c/Math.sin(i)));return Math.min(1,(m+.5*s)/s)}function W(t,r,n){return F(t,r,n)?n:(S(r,U(t),n),$(t,n,n))}function $(t,r,o){const i=c(P.get(),r,U(t)),a=s(P.get(),i,t[3]/e(i));return n(o,a,U(t))}function tt(t,r){const n=c(P.get(),r,U(t)),s=u(n),o=t[3]*t[3];return Math.sqrt(Math.abs(s-o))}function rt(r,n){const s=c(P.get(),n,U(r)),o=e(s),i=N(r),a=i+Math.abs(i-o);return t(i/a)}const nt=h();function st(t,r,n,s){const o=c(nt,r,U(t));switch(n){case x.X:{const t=q(o,nt)[2];return m(s,-Math.sin(t),Math.cos(t),0)}case x.Y:{const t=q(o,nt),r=t[1],n=t[2],e=Math.sin(r);return m(s,-e*Math.cos(n),-e*Math.sin(n),Math.cos(r))}case x.Z:return f(s,o);default:return}}function ot(t,r){const n=c(ct,r,U(t));return e(n)-t[3]}function et(t,r,o,e){const i=ot(t,r),a=st(t,r,x.Z,ct),c=s(ct,a,o-i);return n(e,r,c)}function it(t,r){const n=l(U(t),r),s=N(t);return n<=s*s}function at(t,r,n=d()){const s=o(U(t),U(r)),e=t[3],i=r[3];return s+i<e?(j(n,t),n):s+e<i?(j(n,r),n):(g(n,U(t),U(r),(s+i-e)/(2*s)),n[3]=(s+e+i)/2,n)}const ct=h(),ut=E(),ft=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:C,altitudeAt:ot,angleToSilhouette:rt,axisAt:st,cameraFrustumCoverage:Q,clear:z,closestPoint:W,closestPointOnSilhouette:K,containsPoint:it,copy:w,create:E,distanceToSilhouette:tt,elevate:Z,equals:k,exactEquals:_,fromCenterAndRadius:O,fromRadius:L,fromValues:V,getCenter:U,getExtent:D,getRadius:N,intersectLine:I,intersectRay:F,intersectRayClosestSilhouette:J,intersectsRay:H,projectPoint:$,setAltitudeAt:et,setExtent:B,tmpSphere:ut,union:at,wrap:T},Symbol.toStringTag,{value:\"Module\"}));export{W as A,rt as B,st as C,ot as D,et as E,C as N,U as a,L as b,E as c,Q as d,w as e,V as f,N as g,tt as h,F as i,K as j,H as k,O as l,_ as m,I as n,it as o,$ as p,k as q,z as r,ft as s,ut as t,at as u,Z as v,T as w,B as x,D as y,J as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isArray as e,isFloat as t,maximumValue as r,isSigned as f}from\"../core/typedArrayUtil.js\";function o(e,t){n(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function n(o,n,l=2,u=l){const i=n.length/2;let a=0,d=0;if(e(n)||t(n)){for(let e=0;e<i;++e)o[a]=n[d],o[a+1]=n[d+1],a+=l,d+=u;return}const c=r(n);if(f(n))for(let e=0;e<i;++e)o[a]=Math.max(n[d]/c,-1),o[a+1]=Math.max(n[d+1]/c,-1),a+=l,d+=u;else for(let e=0;e<i;++e)o[a]=n[d]/c,o[a+1]=n[d+1]/c,a+=l,d+=u}function l(e,t,r,f){const o=e.typedBuffer,n=e.typedBufferStride,l=f?.count??e.count;let u=(f?.dstIndex??0)*n;for(let i=0;i<l;++i)o[u]=t,o[u+1]=r,u+=n}const u=Object.freeze(Object.defineProperty({__proto__:null,fill:l,normalizeIntegerBuffer:n,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:\"Module\"}));export{n as a,l as f,o as n,u as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import\"../core/Logger.js\";function t(t,r,f){e(t.typedBuffer,r.typedBuffer,f,t.typedBufferStride,r.typedBufferStride)}function e(t,e,r,f=3,n=f){if(t.length/f!==Math.ceil(e.length/n))return t;const o=t.length/f,i=r[0],u=r[1],l=r[2],a=r[4],s=r[5],c=r[6],d=r[8],p=r[9],h=r[10],y=r[12],B=r[13],g=r[14];let m=0,M=0;for(let S=0;S<o;S++){const r=e[m],o=e[m+1],S=e[m+2];t[M]=i*r+a*o+d*S+y,t[M+1]=u*r+s*o+p*S+B,t[M+2]=l*r+c*o+h*S+g,m+=n,M+=f}return t}function r(t,e,r){f(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function f(t,e,r,f=3,n=f){if(t.length/f!==Math.ceil(e.length/n))return;const o=t.length/f,i=r[0],u=r[1],l=r[2],a=r[3],s=r[4],c=r[5],d=r[6],p=r[7],h=r[8];let y=0,B=0;for(let g=0;g<o;g++){const r=e[y],o=e[y+1],g=e[y+2];t[B]=i*r+a*o+d*g,t[B+1]=u*r+s*o+p*g,t[B+2]=l*r+c*o+h*g,y+=n,B+=f}}function n(t,e,r){o(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function o(t,e,r,f=3,n=f){const o=Math.min(t.length/f,e.length/n);let i=0,u=0;for(let l=0;l<o;l++)t[u]=r*e[i],t[u+1]=r*e[i+1],t[u+2]=r*e[i+2],i+=n,u+=f;return t}function i(t,e,r,f=3,n=f){const o=t.length/f;if(o!==Math.ceil(e.length/n))return t;let i=0,u=0;for(let l=0;l<o;l++)t[u]=e[i]+r[0],t[u+1]=e[i+1]+r[1],t[u+2]=e[i+2]+r[2],i+=n,u+=f;return t}function u(t,e){l(t.typedBuffer,e.typedBuffer,t.typedBufferStride,e.typedBufferStride)}function l(t,e,r=3,f=r){const n=Math.min(t.length/r,e.length/f);let o=0,i=0;for(let u=0;u<n;u++){const n=e[o],u=e[o+1],l=e[o+2],a=n*n+u*u+l*l;if(a>0){const e=1/Math.sqrt(a);t[i]=e*n,t[i+1]=e*u,t[i+2]=e*l}o+=f,i+=r}}function a(t,e,r){const f=Math.min(t.count,e.count),n=t.typedBuffer,o=t.typedBufferStride,i=e.typedBuffer,u=e.typedBufferStride;let l=0,a=0;for(let s=0;s<f;s++)n[a]=i[l]>>r,n[a+1]=i[l+1]>>r,n[a+2]=i[l+2]>>r,l+=u,a+=o}const s=Object.freeze(Object.defineProperty({__proto__:null,normalize:l,normalizeView:u,scale:o,scaleView:n,shiftRight:a,transformMat3:f,transformMat3View:r,transformMat4:e,transformMat4View:t,translate:i},Symbol.toStringTag,{value:\"Module\"}));export{i as a,f as b,r as c,t as d,u as e,o as f,a as g,l as n,n as s,e as t,s as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(e,f){t(e.typedBuffer,f.typedBuffer,e.typedBufferStride,f.typedBufferStride)}function t(e,t,f=3,o=f){const r=t.length/o;let n=0,u=0;for(let c=0;c<r;++c)e[n]=t[u],e[n+1]=t[u+1],e[n+2]=t[u+2],n+=f,u+=o}function f(e,t,f,o,r){const n=e.typedBuffer,u=e.typedBufferStride,c=r?.count??e.count;let d=(r?.dstIndex??0)*u;for(let l=0;l<c;++l)n[d]=t,n[d+1]=f,n[d+2]=o,d+=u}const o=Object.freeze(Object.defineProperty({__proto__:null,copy:t,copyView:e,fill:f},Symbol.toStringTag,{value:\"Module\"}));export{e as a,t as c,f,o as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import{getMathLogger as t}from\"../geometry/support/buffer/math/common.js\";function e(t,e,r){if(t.count!==e.count)return;const f=t.count,n=r[0],o=r[1],u=r[2],s=r[3],c=r[4],i=r[5],a=r[6],d=r[7],l=r[8],p=r[9],y=r[10],m=r[11],B=r[12],h=r[13],g=r[14],S=r[15],M=t.typedBuffer,b=t.typedBufferStride,j=e.typedBuffer,v=e.typedBufferStride;for(let _=0;_<f;_++){const t=_*b,e=_*v,r=j[e],f=j[e+1],w=j[e+2],V=j[e+3];M[t]=n*r+c*f+l*w+B*V,M[t+1]=o*r+i*f+p*w+h*V,M[t+2]=u*r+a*f+y*w+g*V,M[t+3]=s*r+d*f+m*w+S*V}}function r(e,r,f,n=4,o=n){if(e.length/n!=r.length/o)return void t().error(\"source and destination buffers need to have the same number of elements\");const u=e.length/n,s=f[0],c=f[1],i=f[2],a=f[3],d=f[4],l=f[5],p=f[6],y=f[7],m=f[8],B=f[9],h=f[10],g=f[11],S=f[12],M=f[13],b=f[14],j=f[15];let v=0,_=0;for(let t=0;t<u;t++){const t=r[v],f=r[v+1],u=r[v+2],w=r[v+3];e[_]=s*t+d*f+m*u+S*w,e[_+1]=c*t+l*f+B*u+M*w,e[_+2]=i*t+p*f+h*u+b*w,e[_+3]=a*t+y*f+g*u+j*w,v+=o,_+=n}}function f(t,e,r){n(t.typedBuffer,e.typedBuffer,r,t.typedBufferStride,e.typedBufferStride)}function n(t,e,r,f=4,n=f){if(t.length/f!=e.length/n)return;const o=t.length/f,u=r[0],s=r[1],c=r[2],i=r[3],a=r[4],d=r[5],l=r[6],p=r[7],y=r[8];let m=0,B=0;for(let h=0;h<o;h++){const r=e[m],o=e[m+1],h=e[m+2],g=e[m+3];t[B]=u*r+i*o+l*h,t[B+1]=s*r+a*o+p*h,t[B+2]=c*r+d*o+y*h,t[B+3]=g,m+=n,B+=f}}function o(t,e){const r=Math.min(t.count,e.count),f=t.typedBuffer,n=t.typedBufferStride,o=e.typedBuffer,u=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*u,r=o[e],c=o[e+1],i=o[e+2],a=r*r+c*c+i*i;if(a>0){const e=1/Math.sqrt(a);f[t]=e*r,f[t+1]=e*c,f[t+2]=e*i}}}function u(t,e,r){s(t.typedBuffer,e,r,t.typedBufferStride)}function s(t,e,r,f=4){const n=Math.min(t.length/f,e.count),o=e.typedBuffer,u=e.typedBufferStride;let s=0,c=0;for(let i=0;i<n;i++)t[c]=r*o[s],t[c+1]=r*o[s+1],t[c+2]=r*o[s+2],t[c+3]=r*o[s+3],s+=u,c+=f}const c=Object.freeze(Object.defineProperty({__proto__:null,normalize:o,scale:s,scaleView:u,transformMat3:n,transformMat3View:f,transformMat4:r,transformMat4View:e},Symbol.toStringTag,{value:\"Module\"}));export{f as a,s as b,e as c,r as d,o as n,u as s,n as t,c as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(e,f){t(e.typedBuffer,f,e.typedBufferStride)}function t(e,t,f=4){const o=t.typedBuffer,r=t.typedBufferStride,n=t.count;let u=0,c=0;for(let d=0;d<n;++d)e[u]=o[c],e[u+1]=o[c+1],e[u+2]=o[c+2],e[u+3]=o[c+3],u+=f,c+=r}function f(e,t,f,o,r,n){const u=e.typedBuffer,c=e.typedBufferStride,d=n?.count??e.count;let l=(n?.dstIndex??0)*c;for(let p=0;p<d;++p)u[l]=t,u[l+1]=f,u[l+2]=o,u[l+3]=r,l+=c}const o=Object.freeze(Object.defineProperty({__proto__:null,copy:t,copyView:e,fill:f},Symbol.toStringTag,{value:\"Module\"}));export{t as a,e as c,f,o as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(t,e){return this._outer.get(t)?.get(e)}getInner(t){return this._outer.get(t)}set(t,e,r){const o=this._outer.get(t);o?o.set(e,r):this._outer.set(t,new Map([[e,r]]))}delete(t,e){const r=this._outer.get(t);r&&(r.delete(e),0===r.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((e,r)=>t(e,r)))}forAll(t){for(const e of this._outer.values())for(const r of e.values())t(r)}}export{t as NestedMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{nextTick as t}from\"./nextTick.js\";class s{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&t((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,i));t++)this._items.push(this._allocator())}}const i=1024;export{s as ObjectStack};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"./has.js\";import{nextTick as t}from\"./nextTick.js\";import{create as e}from\"./libs/gl-matrix-2/factories/mat3f64.js\";import{create as r}from\"./libs/gl-matrix-2/factories/mat4f64.js\";import{create as s}from\"./libs/gl-matrix-2/factories/quatf64.js\";import{create as i}from\"./libs/gl-matrix-2/factories/vec2f64.js\";import{create as a}from\"./libs/gl-matrix-2/factories/vec3f64.js\";import{create as c}from\"./libs/gl-matrix-2/factories/vec4f64.js\";class m{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&t((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new m(i)}static createVec3f64(){return new m(a)}static createVec4f64(){return new m(c)}static createMat3f64(){return new m(e)}static createMat4f64(){return new m(r)}static createQuatf64(){return new m(s)}get test(){}}export{m as VectorStack};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction c(c){return c=c||globalThis.location.hostname,i.some((a=>null!=c?.match(a)))}function a(c,a){return c?(a=a||globalThis.location.hostname)?null!=a.match(t)||null!=a.match(s)?c.replace(\"static.arcgis.com\",\"staticdev.arcgis.com\"):null!=a.match(o)||null!=a.match(l)?c.replace(\"static.arcgis.com\",\"staticqa.arcgis.com\"):c:c:null}const t=/^devext\\.arcgis\\.com$/,o=/^qaext\\.arcgis\\.com$/,s=/^[\\w-]*\\.mapsdevext\\.arcgis\\.com$/,l=/^[\\w-]*\\.mapsqa\\.arcgis\\.com$/,i=[/^([\\w-]*\\.)?[\\w-]*\\.zrh-dev-local\\.esri\\.com$/,t,o,/^jsapps\\.esri\\.com$/,s,l];export{a as adjustStaticAGOUrl,i as devHostnames,c as isDevEnvironment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,0,1,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function t(e,r,t,n,o,u,c,a,l){return[e,r,t,n,o,u,c,a,l]}function n(e,r){return new Float64Array(e,r,9)}const o=e(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{o as IDENTITY,r as clone,e as create,n as createView,t as fromValues,u as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function t(e,r,t,n,o,u,c,a,l,f,i,_,b,m,p,s){return[e,r,t,n,o,u,c,a,l,f,i,_,b,m,p,s]}function n(e,r){return new Float64Array(e,r,16)}const o=e(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{o as IDENTITY,r as clone,e as create,n as createView,t as fromValues,u as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(){return[0,0,0,1]}function t(e){return[e[0],e[1],e[2],e[3]]}function n(e,t,n,r){return[e,t,n,r]}const r=e(),o=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:r,clone:t,create:e,fromValues:n},Symbol.toStringTag,{value:\"Module\"}));export{r as IDENTITY,t as clone,e as create,n as fromValues,o as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction n(){return new Float32Array(2)}function r(n){const r=new Float32Array(2);return r[0]=n[0],r[1]=n[1],r}function t(n,r){const t=new Float32Array(2);return t[0]=n,t[1]=r,t}function e(n,r){return new Float32Array(n,r,2)}function o(){return n()}function u(){return t(1,1)}function c(){return t(1,0)}function a(){return t(0,1)}const i=o(),f=u(),l=c(),s=a(),y=Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:s,ZEROS:i,clone:r,create:n,createView:e,fromValues:t,ones:u,unitX:c,unitY:a,zeros:o},Symbol.toStringTag,{value:\"Module\"}));export{f as ONES,l as UNIT_X,s as UNIT_Y,i as ZEROS,r as clone,n as create,e as createView,t as fromValues,u as ones,c as unitX,a as unitY,y as v,o as zeros};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../factories/mat3f64.js\";import{create as n}from\"../factories/quatf64.js\";import{create as s,fromValues as o}from\"../factories/vec3f64.js\";import{getEpsilon as a,RANDOM as r}from\"./common.js\";import{f as e,e as c,G as i,n as u}from\"../../../../chunks/vec32.js\";import{c as h,s as M,g as f,d as l,h as m,l as p,j as q,b as j,n as d,a as g,e as P}from\"../../../../chunks/vec42.js\";function I(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function b(t,n,s){s*=.5;const o=Math.sin(s);return t[0]=o*n[0],t[1]=o*n[1],t[2]=o*n[2],t[3]=Math.cos(s),t}function v(t,n){const s=2*Math.acos(n[3]),o=Math.sin(s/2);return o>a()?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),s}function x(t,n,s){const o=n[0],a=n[1],r=n[2],e=n[3],c=s[0],i=s[1],u=s[2],h=s[3];return t[0]=o*h+e*c+a*u-r*i,t[1]=a*h+e*i+r*c-o*u,t[2]=r*h+e*u+o*i-a*c,t[3]=e*h-o*c-a*i-r*u,t}function y(t,n,s){s*=.5;const o=n[0],a=n[1],r=n[2],e=n[3],c=Math.sin(s),i=Math.cos(s);return t[0]=o*i+e*c,t[1]=a*i+r*c,t[2]=r*i-a*c,t[3]=e*i-o*c,t}function A(t,n,s){s*=.5;const o=n[0],a=n[1],r=n[2],e=n[3],c=Math.sin(s),i=Math.cos(s);return t[0]=o*i-r*c,t[1]=a*i+e*c,t[2]=r*i+o*c,t[3]=e*i-a*c,t}function _(t,n,s){s*=.5;const o=n[0],a=n[1],r=n[2],e=n[3],c=Math.sin(s),i=Math.cos(s);return t[0]=o*i+a*c,t[1]=a*i-o*c,t[2]=r*i+e*c,t[3]=e*i-r*c,t}function k(t,n){const s=n[0],o=n[1],a=n[2];return t[0]=s,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-s*s-o*o-a*a)),t}function z(t,n,s,o){const r=n[0],e=n[1],c=n[2],i=n[3];let u,h,M,f,l,m=s[0],p=s[1],q=s[2],j=s[3];return h=r*m+e*p+c*q+i*j,h<0&&(h=-h,m=-m,p=-p,q=-q,j=-j),1-h>a()?(u=Math.acos(h),M=Math.sin(u),f=Math.sin((1-o)*u)/M,l=Math.sin(o*u)/M):(f=1-o,l=o),t[0]=f*r+l*m,t[1]=f*e+l*p,t[2]=f*c+l*q,t[3]=f*i+l*j,t}function E(t){const n=r,s=n(),o=n(),a=n(),e=Math.sqrt(1-s),c=Math.sqrt(s);return t[0]=e*Math.sin(2*Math.PI*o),t[1]=e*Math.cos(2*Math.PI*o),t[2]=c*Math.sin(2*Math.PI*a),t[3]=c*Math.cos(2*Math.PI*a),t}function L(t,n){const s=n[0],o=n[1],a=n[2],r=n[3],e=s*s+o*o+a*a+r*r,c=e?1/e:0;return t[0]=-s*c,t[1]=-o*c,t[2]=-a*c,t[3]=r*c,t}function O(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function S(t,n){const s=n[0]+n[4]+n[8];let o;if(s>0)o=Math.sqrt(s+1),t[3]=.5*o,o=.5/o,t[0]=(n[5]-n[7])*o,t[1]=(n[6]-n[2])*o,t[2]=(n[1]-n[3])*o;else{let s=0;n[4]>n[0]&&(s=1),n[8]>n[3*s+s]&&(s=2);const a=(s+1)%3,r=(s+2)%3;o=Math.sqrt(n[3*s+s]-n[3*a+a]-n[3*r+r]+1),t[s]=.5*o,o=.5/o,t[3]=(n[3*a+r]-n[3*r+a])*o,t[a]=(n[3*a+s]+n[3*s+a])*o,t[r]=(n[3*r+s]+n[3*s+r])*o}return t}function T(t,n,s,o){const a=.5*Math.PI/180;n*=a,s*=a,o*=a;const r=Math.sin(n),e=Math.cos(n),c=Math.sin(s),i=Math.cos(s),u=Math.sin(o),h=Math.cos(o);return t[0]=r*i*h-e*c*u,t[1]=e*c*h+r*i*u,t[2]=e*i*u-r*c*h,t[3]=e*i*h+r*c*u,t}function G(t){return\"quat(\"+t[0]+\", \"+t[1]+\", \"+t[2]+\", \"+t[3]+\")\"}const W=h,X=M,Y=f,Z=x,w=l,B=m,C=p,D=q,F=D,H=j,J=H,K=d,N=g,Q=P;function R(t,n,s){const o=e(n,s);return o<-.999999?(c(U,V,n),i(U)<1e-6&&c(U,$,n),u(U,U),b(t,U,Math.PI),t):o>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(c(U,n,s),t[0]=U[0],t[1]=U[1],t[2]=U[2],t[3]=1+o,K(t,t))}const U=s(),V=o(1,0,0),$=o(0,1,0);function tt(t,n,s,o,a,r){return z(nt,n,a,r),z(st,s,o,r),z(t,nt,st,2*r*(1-r)),t}const nt=n(),st=n();function ot(t,n,s,o){const a=at;return a[0]=s[0],a[3]=s[1],a[6]=s[2],a[1]=o[0],a[4]=o[1],a[7]=o[2],a[2]=-n[0],a[5]=-n[1],a[8]=-n[2],K(t,S(t,a))}const at=t(),rt=Object.freeze(Object.defineProperty({__proto__:null,add:Y,calculateW:k,conjugate:O,copy:W,dot:B,equals:Q,exactEquals:N,fromEuler:T,fromMat3:S,getAxisAngle:v,identity:I,invert:L,len:F,length:D,lerp:C,mul:Z,multiply:x,normalize:K,random:E,rotateX:y,rotateY:A,rotateZ:_,rotationTo:R,scale:w,set:X,setAxes:ot,setAxisAngle:b,slerp:z,sqlerp:tt,sqrLen:J,squaredLength:H,str:G},Symbol.toStringTag,{value:\"Module\"}));export{Y as add,k as calculateW,O as conjugate,W as copy,B as dot,Q as equals,N as exactEquals,T as fromEuler,S as fromMat3,v as getAxisAngle,I as identity,L as invert,F as len,D as length,C as lerp,Z as mul,x as multiply,K as normalize,rt as q,E as random,y as rotateX,A as rotateY,_ as rotateZ,R as rotationTo,w as scale,X as set,ot as setAxes,b as setAxisAngle,z as slerp,tt as sqlerp,J as sqrLen,H as squaredLength,G as str};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{deg2rad as r}from\"../../core/mathUtils.js\";import{fromTranslation as t,identity as o}from\"../../core/libs/gl-matrix-2/math/mat4.js\";import{create as n}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeENUToPCPFLocalRotation as i,computePCPFToENULocalRotation as l}from\"./localRotationUtils.js\";import{classifySpatialReference as s,sourceClassificationCache as e,destClassificationCache as m,ProjectionID as c,projectionTable as f}from\"./projectors.js\";import{equals as u}from\"../support/spatialReferenceUtils.js\";function C(r,n,C,R){if(null==r||null==R)return!1;const p=s(r,e),a=s(R,m);if(p===a&&!E(a)&&(p!==c.UNKNOWN||u(r,R)))return t(C,n),!0;if(E(a)){const r=f[p][c.LON_LAT],t=f[c.LON_LAT][a];return null!=r&&null!=t&&(r(n,0,A,0),t(A,0,L,0),i(_*A[0],_*A[1],C),C[12]=L[0],C[13]=L[1],C[14]=L[2],!0)}const O=E(p);if((a===c.WEB_MERCATOR||a===c.PLATE_CARREE||a===c.WGS84||a===c.CGCS2000)&&(p===c.WGS84||O||p===c.WEB_MERCATOR||p===c.CGCS2000)){const r=f[p][c.LON_LAT],t=f[c.LON_LAT][a];return null!=r&&null!=t&&(r(n,0,A,0),t(A,0,L,0),O?l(_*A[0],_*A[1],C):o(C),C[12]=L[0],C[13]=L[1],C[14]=L[2],!0)}return!1}function E(r){return r===c.SPHERICAL_ECEF||r===c.SPHERICAL_MARS_PCPF||r===c.SPHERICAL_MOON_PCPF||r===c.WGS84_ECEF}const _=r(1),A=n(),L=n();export{C as computeTranslationToOriginAndRotation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{transpose as t}from\"../../core/libs/gl-matrix-2/math/mat4.js\";function n(t,n,o){const r=Math.sin(t),a=Math.cos(t),i=Math.sin(n),s=Math.cos(n),c=o;return c[0]=-r,c[4]=-i*a,c[8]=s*a,c[12]=0,c[1]=a,c[5]=-i*r,c[9]=s*r,c[13]=0,c[2]=0,c[6]=s,c[10]=i,c[14]=0,c[3]=0,c[7]=0,c[11]=0,c[15]=1,c}function o(o,r,a){return n(o,r,a),t(a,a),a}export{n as computeENUToPCPFLocalRotation,o as computePCPFToENULocalRotation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{SphericalECEFSpatialReferenceLike as e,SphericalPCPFMarsLike as t,SphericalPCPFMoonLike as s,WGS84ECEFSpatialReferenceLike as n}from\"./ellipsoidUtils.js\";import o from\"./SpatialReference.js\";import{isWKIDFromMars as i,isWKIDFromMoon as r}from\"./support/spatialReferenceUtils.js\";const p=new o(e),l=new o(t),f=new o(s),w=new o(n);function a(e){const t=c.get(e);if(t)return t;let s=p;if(e)if(e===l)s=l;else if(e===f)s=f;else{const t=e.wkid,n=e.latestWkid;if(null!=t||null!=n)i(t)||i(n)?s=l:(r(t)||r(n))&&(s=f);else{const t=e.wkt2??e.wkt;if(t){const e=t.toUpperCase();e===k?s=l:e===m&&(s=f)}}}return c.set(e,s),s}const c=new Map,k=l.wkt.toUpperCase(),m=f.wkt.toUpperCase();export{p as SphericalECEFSpatialReference,l as SphericalPCPFMars,f as SphericalPCPFMoon,w as WGS84ECEFSpatialReference,a as getSphericalPCPF};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{nativeArrayMaxSize as r,isArray as n}from\"../../core/typedArrayUtil.js\";function t(n,t=!1){return n<=r?t?new Array(n).fill(0):new Array(n):new Float32Array(n)}function e(t){return n(t)?t.length<r?t:new Float32Array(t):t.length<r?Array.from(t):t}function a(t){return(n(t)?t.length:t.byteLength/8)<=r?Array.from(t):new Float32Array(t)}function o(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}export{e as compactFloatArray,a as floatArrayFrom,o as floatSubArray,t as newFloatArray};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isArray as r,nativeArrayMaxSize as n}from\"../../core/typedArrayUtil.js\";function t(t){if(r(t)){if(t.length<n)return t}else if(t.length<n)return Array.from(t);let i=!0,f=!0;return t.some(((r,n)=>(i=i&&0===r,f=f&&r===n,!i&&!f))),i?A(t.length):f?l(t.length):r(t)||t.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?e(t):t}function e(n){let t=!0;for(const e of n){if(e>=65536)return r(n)?new Uint32Array(n):n;e>=256&&(t=!1)}return t?new Uint8Array(n):new Uint16Array(n)}function i(r){return r<=n?new Array(r):r<=65536?new Uint16Array(r):new Uint32Array(r)}function f(r){return r<=n?new Array(r):new Uint32Array(r)}let a=(()=>{const r=new Uint32Array(131072);for(let n=0;n<r.length;++n)r[n]=n;return r})();const u=[0],o=(()=>{const r=new Uint16Array(65536);for(let n=0;n<r.length;++n)r[n]=n;return r})();function l(r){if(1===r)return u;if(r<n)return Array.from(new Uint16Array(o.buffer,0,r));if(r<o.length)return new Uint16Array(o.buffer,0,r);if(r>a.length){const n=Math.max(2*a.length,r);a=new Uint32Array(n);for(let r=0;r<a.length;r++)a[r]=r}return new Uint32Array(a.buffer,0,r)}let y=new Uint8Array(65536);function A(r){if(1===r)return u;if(r<n)return new Array(r).fill(0);if(r>y.length){const n=Math.max(2*y.length,r);y=new Uint8Array(n)}return new Uint8Array(y.buffer,0,r)}export{t as compactIndices,l as getContinuousIndexArray,A as getZeroIndexArray,i as newIndexArray,f as newIntArray};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BufferViewMat3Impl as e}from\"./internals/Mat3.js\";import{BufferViewMat4Impl as t}from\"./internals/Mat4.js\";import{BufferViewScalarImpl as r}from\"./internals/Scalar.js\";import{BufferViewVec2Impl as s}from\"./internals/Vec2.js\";import{BufferViewVec3Impl as f}from\"./internals/Vec3.js\";import{BufferViewVec4Impl as n}from\"./internals/Vec4.js\";class y extends r{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType=\"f32\"}static fromTypedArray(e,t){return new y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}y.ElementType=\"f32\";class u extends s{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType=\"f32\"}slice(e,t){return this.sliceBuffer(u,e,t)}static fromTypedArray(e,t){return new u(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}u.ElementType=\"f32\";class i extends f{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType=\"f32\"}slice(e,t){return this.sliceBuffer(i,e,t)}static fromTypedArray(e,t){return new i(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}i.ElementType=\"f32\";class c extends n{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType=\"f32\"}slice(e,t){return this.sliceBuffer(c,e,t)}static fromTypedArray(e,t){return new c(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}c.ElementType=\"f32\";class l extends e{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType=\"f32\"}slice(e,t){return this.sliceBuffer(l,e,t)}static fromTypedArray(e,t){return new l(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}l.ElementType=\"f32\";class a extends e{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType=\"f64\"}slice(e,t){return this.sliceBuffer(a,e,t)}static fromTypedArray(e,t){return new a(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}a.ElementType=\"f64\";class p extends t{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType=\"f32\"}slice(e,t){return this.sliceBuffer(p,e,t)}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType=\"f32\";class b extends t{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType=\"f64\"}slice(e,t){return this.sliceBuffer(b,e,t)}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType=\"f64\";class o extends r{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType=\"f64\"}slice(e,t){return this.sliceBuffer(o,e,t)}static fromTypedArray(e,t){return new o(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}o.ElementType=\"f64\";class m extends s{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType=\"f64\"}slice(e,t){return this.sliceBuffer(m,e,t)}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType=\"f64\";class T extends f{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType=\"f64\"}slice(e,t){return this.sliceBuffer(T,e,t)}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType=\"f64\";class h extends n{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType=\"f64\"}slice(e,t){return this.sliceBuffer(h,e,t)}static fromTypedArray(e,t){return new h(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}h.ElementType=\"f64\";class d extends r{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType=\"u8\"}slice(e,t){return this.sliceBuffer(d,e,t)}static fromTypedArray(e,t){return new d(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}d.ElementType=\"u8\";class A extends s{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType=\"u8\"}slice(e,t){return this.sliceBuffer(A,e,t)}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType=\"u8\";class O extends f{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType=\"u8\"}slice(e,t){return this.sliceBuffer(O,e,t)}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType=\"u8\";class x extends n{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType=\"u8\"}slice(e,t){return this.sliceBuffer(x,e,t)}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType=\"u8\";class g extends r{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType=\"u16\"}slice(e,t){return this.sliceBuffer(g,e,t)}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType=\"u16\";class w extends s{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType=\"u16\"}slice(e,t){return this.sliceBuffer(w,e,t)}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType=\"u16\";class E extends f{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType=\"u16\"}slice(e,t){return this.sliceBuffer(E,e,t)}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType=\"u16\";class L extends n{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType=\"u16\"}slice(e,t){return this.sliceBuffer(L,e,t)}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType=\"u16\";class B extends r{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType=\"u32\"}slice(e,t){return this.sliceBuffer(B,e,t)}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType=\"u32\";class F extends s{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType=\"u32\"}slice(e,t){return this.sliceBuffer(F,e,t)}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType=\"u32\";class I extends f{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType=\"u32\"}slice(e,t){return this.sliceBuffer(I,e,t)}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType=\"u32\";class U extends n{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType=\"u32\"}slice(e,t){return this.sliceBuffer(U,e,t)}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType=\"u32\";class j extends r{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType=\"i8\"}slice(e,t){return this.sliceBuffer(j,e,t)}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType=\"i8\";class V extends s{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType=\"i8\"}slice(e,t){return this.sliceBuffer(V,e,t)}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType=\"i8\";class M extends f{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType=\"i8\"}slice(e,t){return this.sliceBuffer(M,e,t)}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType=\"i8\";class S extends n{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType=\"i8\"}slice(e,t){return this.sliceBuffer(S,e,t)}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType=\"i8\";class k extends r{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType=\"i16\"}slice(e,t){return this.sliceBuffer(k,e,t)}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType=\"i16\";class q extends s{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType=\"i16\"}slice(e,t){return this.sliceBuffer(q,e,t)}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType=\"i16\";class v extends f{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType=\"i16\"}slice(e,t){return this.sliceBuffer(v,e,t)}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType=\"i16\";class z extends n{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType=\"i16\"}slice(e,t){return this.sliceBuffer(z,e,t)}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType=\"i16\";class C extends r{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType=\"i32\"}slice(e,t){return this.sliceBuffer(C,e,t)}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType=\"i32\";class D extends s{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType=\"i32\"}slice(e,t){return this.sliceBuffer(D,e,t)}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType=\"i32\";class G extends f{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType=\"i32\"}slice(e,t){return this.sliceBuffer(G,e,t)}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType=\"i32\";class H extends n{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType=\"i32\"}slice(e,t){return this.sliceBuffer(H,e,t)}static fromTypedArray(e,t){return new H(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}H.ElementType=\"i32\";export{y as BufferViewFloat,o as BufferViewFloat64,k as BufferViewInt16,C as BufferViewInt32,j as BufferViewInt8,l as BufferViewMat3f,a as BufferViewMat3f64,p as BufferViewMat4f,b as BufferViewMat4f64,g as BufferViewUint16,B as BufferViewUint32,d as BufferViewUint8,u as BufferViewVec2f,m as BufferViewVec2f64,q as BufferViewVec2i16,D as BufferViewVec2i32,V as BufferViewVec2i8,w as BufferViewVec2u16,F as BufferViewVec2u32,A as BufferViewVec2u8,i as BufferViewVec3f,T as BufferViewVec3f64,v as BufferViewVec3i16,G as BufferViewVec3i32,M as BufferViewVec3i8,E as BufferViewVec3u16,I as BufferViewVec3u32,O as BufferViewVec3u8,c as BufferViewVec4f,h as BufferViewVec4f64,z as BufferViewVec4i16,H as BufferViewVec4i32,S as BufferViewVec4i8,L as BufferViewVec4u16,U as BufferViewVec4u32,x as BufferViewVec4u8};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=9;const i=this.TypedArrayConstructor;void 0===f&&(f=9*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<9;f++)e[f]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<9;f++)this.typedBuffer[r++]=e[f]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,d=r*e.typedBufferStride;for(let u=0;u<9;++u)f[i++]=s[d++]}get buffer(){return this.typedBuffer.buffer}}t.ElementCount=9;export{t as BufferViewMat3Impl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=16;const i=this.TypedArrayConstructor;void 0===f&&(f=16*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<16;f++)e[f]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<16;f++)this.typedBuffer[r++]=e[f]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){this.copyFromTypedBuffer(t,e.typedBuffer,r*e.typedBufferStride)}copyFromTypedBuffer(t,e,r){const f=this.typedBuffer;let s=t*this.typedBufferStride;for(let i=0;i<16;++i)f[s++]=e[r++]}get buffer(){return this.typedBuffer.buffer}}t.ElementCount=16;export{t as BufferViewMat4Impl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e,r=0,s,i){this.TypedArrayConstructor=t,this.elementCount=1;const f=this.TypedArrayConstructor;void 0===s&&(s=f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==i?new f(e,u):new f(e,u,(i-r)/f.BYTES_PER_ELEMENT),this.stride=s,this.typedBufferStride=s/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}t.ElementCount=1;export{t as BufferViewScalarImpl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{set as t}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";class e{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=2;const i=this.TypedArrayConstructor;void 0===f&&(f=2*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,t(r,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,d=r*e.typedBufferStride;f[i++]=s[d++],f[i]=s[d]}get buffer(){return this.typedBuffer.buffer}}e.ElementCount=2;export{e as BufferViewVec2Impl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{i as t}from\"../../../../chunks/vec32.js\";class e{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=3;const i=this.TypedArrayConstructor;void 0===f&&(f=3*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,t(r,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,f){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t]=f}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}e.ElementCount=3;export{e as BufferViewVec3Impl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{s as t}from\"../../../../chunks/vec42.js\";class e{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const i=this.TypedArrayConstructor;void 0===f&&(f=4*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,t(r,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t++]=e[2],this.typedBuffer[t]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,f,s){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t++]=f,this.typedBuffer[t]=s}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i++]=s[u++],f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}e.ElementCount=4;export{e as BufferViewVec4Impl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport r from\"../../../../core/Logger.js\";const e=()=>r.getLogger(\"esri.views.3d.support.buffer.math\");export{e as getMathLogger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"u8\":case\"i8\":return 1;case\"u16\":case\"i16\":return 2;case\"u32\":case\"i32\":case\"f32\":return 4;case\"f64\":return 8}}function c(e){switch(e){case\"u8\":case\"u16\":case\"u32\":return!1;case\"i8\":case\"i16\":case\"i32\":case\"f32\":case\"f64\":return!0}}function s(e){switch(e){case\"u8\":case\"u16\":case\"u32\":case\"i8\":case\"i16\":case\"i32\":return!0;case\"f32\":case\"f64\":return!1}}function r(e){switch(e){case\"u8\":return 255;case\"u16\":return 65535;case\"u32\":return 4294967295;case\"i8\":return 127;case\"i16\":return 32767;case\"i32\":return 2147483647;case\"f32\":return 3402823e32;case\"f64\":return 179769e303}}export{e as elementTypeSize,s as isInteger,c as isSigned,r as maximumValue};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,d as o,f as e,h as i,g as c,k as s,s as u}from\"../../chunks/vec32.js\";import{clone as a,create as g}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function m(t,r){const n=S.get();return n.origin=t,n.vector=r,n}function p(t,r=v()){return h(t.origin,t.vector,r)}function h(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function b(t,r,e=v()){return n(e.origin,t),o(e.vector,r,t),e}function M(r,n){const c=o(f.get(),n,r.origin),s=e(r.vector,c),u=e(r.vector,r.vector),a=t(s/u,0,1),g=o(f.get(),i(f.get(),r.vector,a),c);return e(g,g)}function j(t,r,n){return A(t,r,0,1,n)}function l(t,r,n){return c(n,t.origin,i(n,t.vector,r))}function A(r,n,u,a,g){const{vector:v,origin:m}=r,p=o(f.get(),n,m),h=e(v,p)/s(v);return i(g,v,t(h,u,a)),c(g,g,r.origin)}function d(t,r){if(k(t,m(r.origin,r.direction),!1,x)){const{tA:r,pB:n,distance2:o}=x;if(r>=0&&r<=1)return o;if(r<0)return u(t.origin,n);if(r>1)return u(c(f.get(),t.origin,t.vector),n)}return null}function B(t,r,o){return!!k(t,r,!0,x)&&(n(o,x.pA),!0)}function k(r,n,o,e){const i=1e-6,s=r.origin,a=c(f.get(),s,r.vector),g=n.origin,v=c(f.get(),g,n.vector),m=f.get(),p=f.get();if(m[0]=s[0]-g[0],m[1]=s[1]-g[1],m[2]=s[2]-g[2],p[0]=v[0]-g[0],p[1]=v[1]-g[1],p[2]=v[2]-g[2],Math.abs(p[0])<i&&Math.abs(p[1])<i&&Math.abs(p[2])<i)return!1;const h=f.get();if(h[0]=a[0]-s[0],h[1]=a[1]-s[1],h[2]=a[2]-s[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const b=m[0]*p[0]+m[1]*p[1]+m[2]*p[2],M=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],j=m[0]*h[0]+m[1]*h[1]+m[2]*h[2],l=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],A=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*l-M*M;if(Math.abs(A)<i)return!1;let d=(b*M-j*l)/A,B=(b+M*d)/l;o&&(d=t(d,0,1),B=t(B,0,1));const k=f.get(),x=f.get();return k[0]=s[0]+d*h[0],k[1]=s[1]+d*h[1],k[2]=s[2]+d*h[2],x[0]=g[0]+B*p[0],x[1]=g[1]+B*p[1],x[2]=g[2]+B*p[2],e.tA=d,e.tB=B,e.pA=k,e.pB=x,e.distance2=u(k,x),!0}const x={tA:0,tB:0,pA:g(),pB:g(),distance2:0},S=new r((()=>v()));export{B as closestLineSegmentPoint,d as closestRayDistance2,p as copy,v as create,M as distance2,b as fromPoints,h as fromValues,l as pointAt,j as projectPoint,A as projectPointClamp,m as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{c as n,p as r,d as o,n as c,f as e,i as u,e as I,h as i,g as f}from\"../../chunks/vec32.js\";import{create as s}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{a as N,e as E}from\"../../chunks/vec42.js\";import{projectPointSignedLength as a}from\"./vector.js\";import{sv4d as T,sv3d as S}from\"./vectorStacks.js\";import{tangentFrame as _}from\"../../views/3d/support/mathUtils.js\";function M(t=$){return[t[0],t[1],t[2],t[3]]}const m=N,g=E;function D(t=$[0],n=$[1],r=$[2],o=$[3]){return U(t,n,r,o,T.get())}function h(t,n){return U(n[0],n[1],n[2],n[3],t)}function O(t){return t}function U(t,n,r,o,c=M()){return c[0]=t,c[1]=n,c[2]=r,c[3]=o,c}function C(t,r,o){return n(o,t),o[3]=r,o}function l(t,n,r){const o=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],c=Math.abs(o-1)>1e-5&&o>1e-12?1/Math.sqrt(o):1;return r[0]=n[0]*c,r[1]=n[1]*c,r[2]=n[2]*c,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function p(t,n,r,o=M()){const c=r[0]-n[0],e=r[1]-n[1],u=r[2]-n[2],I=t[0]-n[0],i=t[1]-n[1],f=t[2]-n[2],s=e*f-u*i,N=u*I-c*f,E=c*i-e*I,a=s*s+N*N+E*E,T=Math.abs(a-1)>1e-5&&a>1e-12?1/Math.sqrt(a):1;return o[0]=s*T,o[1]=N*T,o[2]=E*T,o[3]=-(o[0]*t[0]+o[1]*t[1]+o[2]*t[2]),o}function v(t,n,u,I=0,i=Math.floor(u*(1/3)),f=Math.floor(u*(2/3))){if(u<3)return!1;n(R,I);let s=i,N=!1;for(;s<u-1&&!N;)n(j,s),s++,N=!r(R,j);if(!N)return!1;for(s=Math.max(s,f),N=!1;s<u&&!N;)n(b,s),s++,o(d,R,j),c(d,d),o(X,j,b),c(X,X),N=!r(R,b)&&!r(j,b)&&Math.abs(e(d,X))<F;return N?(p(R,j,b,t),!0):(0!==I||1!==i||2!==f)&&v(t,n,u,0,1,2)}function A(t,n,r=!0){const o=n.length/3;return v(t,((t,r)=>u(t,n[3*r+0],n[3*r+1],n[3*r+2])),r?o-1:o)}const F=.99619469809,R=s(),j=s(),b=s(),d=s(),X=s();function y(t,n,r){return n!==t&&h(t,n),t[3]=-e(O(t),r),t}function L(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function P(t,n,r,o){return I(b,n,t),l(r,b,o)}function k(t,n,r,c){return Y(Z(t,n,o(S.get(),r,n),nt,c))}function x(t,n,r){return null!=n&&Y(Z(t,n.origin,n.direction,rt,r))}function q(t,n,r){return Y(Z(t,n.origin,n.vector,tt.NONE,r))}function w(t,n,r){return Y(Z(t,n.origin,n.vector,tt.CLAMP,r))}function z(t,n){return V(t,n)>=0}function B(t,n){const r=e(O(t),n.ray.direction),o=-V(t,n.ray.origin);if(o<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return o>0;if((o<0||r<0)&&!(o<0&&r<0))return!0;const c=o/r;return r>0?c<n.c1&&(n.c1=c):c>n.c0&&(n.c0=c),n.c0<=n.c1}function G(t,n){const r=e(O(t),n.ray.direction),o=-V(t,n.ray.origin);if(r>-1e-6&&r<1e-6)return o>0;const c=o/r;return r>0?c<n.c1&&(n.c1=c):c>n.c0&&(n.c0=c),n.c0<=n.c1}function H(t,n,r){const c=i(S.get(),O(t),-t[3]),e=K(t,o(S.get(),n,c),S.get());return f(r,e,c),r}function J(t,n,r,c){const e=O(t),I=S.get(),i=S.get();_(e,I,i);const f=o(S.get(),r,n),s=a(I,f),N=a(i,f),E=a(e,f);return u(c,s,N,E)}function K(t,n,r){const c=i(S.get(),O(t),e(O(t),n));return o(r,n,c),r}function Q(t,n){return Math.abs(V(t,n))}function V(t,n){return e(O(t),n)+t[3]}var W;function Y(t){return t===W.INTERSECTS_INSIDE_OUT||t===W.INTERSECTS_OUTSIDE_IN}function Z(n,r,o,c,u){const I=e(O(n),o),s=V(n,r);if(0===I)return s>=0?W.INSIDE:W.OUTSIDE;let N=-s/I;return c&tt.CLAMP&&(N=t(N,0,1)),!(c&tt.INFINITE_MIN)&&N<0||!(c&tt.INFINITE_MAX)&&N>1?s>=0?W.INSIDE:W.OUTSIDE:(f(u,r,i(u,o,N)),s>=0?W.INTERSECTS_INSIDE_OUT:W.INTERSECTS_OUTSIDE_IN)}!function(t){t[t.INTERSECTS_INSIDE_OUT=0]=\"INTERSECTS_INSIDE_OUT\",t[t.INTERSECTS_OUTSIDE_IN=1]=\"INTERSECTS_OUTSIDE_IN\",t[t.INSIDE=2]=\"INSIDE\",t[t.OUTSIDE=3]=\"OUTSIDE\"}(W||(W={}));const $=[0,0,1,0];var tt;!function(t){t[t.NONE=0]=\"NONE\",t[t.CLAMP=1]=\"CLAMP\",t[t.INFINITE_MIN=4]=\"INFINITE_MIN\",t[t.INFINITE_MAX=8]=\"INFINITE_MAX\"}(tt||(tt={}));const nt=tt.INFINITE_MIN|tt.INFINITE_MAX,rt=tt.INFINITE_MAX;export{tt as IntersectFlags,W as IntersectResult,B as clip,G as clipInfinite,h as copy,M as create,Q as distance,g as equals,m as exactEquals,A as fromArray,v as fromManyPoints,C as fromNormalAndOffset,p as fromPoints,l as fromPositionAndNormal,U as fromValues,P as fromVectorsAndPoint,O as getNormal,k as intersectLine,Z as intersectLineOrRay,q as intersectLineSegment,w as intersectLineSegmentClamp,x as intersectRay,z as isPointInside,L as negate,H as projectPoint,J as projectPointLocal,K as projectVector,y as setOffsetFromPoint,V as signedDistance,$ as up,D as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{equals as i}from\"../../core/arrayUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{set as n,invert as t}from\"../../core/libs/gl-matrix-2/math/mat3.js\";import{create as o}from\"../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{c as e,d as c,e as s,n as a,f as u,g as f,h as g,a as m,i as d}from\"../../chunks/vec32.js\";import{clone as l,create as j}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{sv3d as p}from\"./vectorStacks.js\";function b(i){return i?h(l(i.origin),l(i.direction)):h(j(),j())}function h(i,r){return{origin:i,direction:r}}function x(r,n){return i(r.origin,n.origin)&&i(r.direction,n.direction)}function k(i,r){const n=O.get();return n.origin=i,n.direction=r,n}function v(i,r=b()){return q(i.origin,i.direction,r)}function S(i,r,n=b()){return e(n.origin,i),c(n.direction,r,i),n}function q(i,r,n=b()){return e(n.origin,i),e(n.direction,r),n}function w(i,r){const n=s(p.get(),a(p.get(),i.direction),c(p.get(),r,i.origin));return u(n,n)}function y(i,r,n){const t=u(i.direction,c(n,r,i.origin));return f(n,i.origin,g(n,i.direction,t)),n}function M(i,r,o,e){const c=i.origin,l=r.origin,j=i.direction,p=r.direction,b=u(a(z,j),a(A,p));if(Math.abs(b)>=1)return null;const h=s(z,j,p),x=m(U,l,c),k=n(B,j[0],j[1],j[2],-p[0],-p[1],-p[2],h[0],h[1],h[2]),v=t(B,k);if(null==v)return[o,e];const S=u(d(z,v[0],v[3],v[6]),x),q=u(d(A,v[1],v[4],v[7]),x);return f(o,c,g(U,j,S)),f(e,l,g(U,p,q)),[o,e]}const O=new r((()=>b())),U=j(),z=j(),A=j(),B=o();export{y as closestPoint,M as closestPoints,v as copy,b as create,w as distance2,x as equals,S as fromPoints,q as fromValues,k as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{asinClamped as t}from\"../../core/mathUtils.js\";import{l as o,i as s}from\"../../chunks/vec32.js\";function n(n,a){const c=o(n),i=t(n[2]/c),r=Math.atan2(n[1]/c,n[0]/c);return s(a,c,i,r),a}function a(t,o){const n=t[0],a=t[1],c=t[2],i=Math.cos(a);s(o,n*i*Math.cos(c),n*i*Math.sin(c),n*Math.sin(a))}export{n as cartesianToSpherical,a as sphericalToCartesian};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ObjectStack as t}from\"../../core/ObjectStack.js\";import{c as e,d as n,e as r,f as o,h as c,g as s,l as p}from\"../../chunks/vec32.js\";import{clone as i,create as a}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as f,distance2 as u,fromValues as g}from\"./lineSegment.js\";import{sv3d as m}from\"./vectorStacks.js\";function j(t){return t?{p0:i(t.p0),p1:i(t.p1),p2:i(t.p2)}:{p0:a(),p1:a(),p2:a()}}function l(t,e,n){const r=x.get();return r.p0=t,r.p1=e,r.p2=n,r}function h(t,e=j()){return b(t.p0,t.p1,t.p2,e)}function b(t,n,r,o=j()){return e(o.p0,t),e(o.p1,n),e(o.p2,r),o}function d(t,e){const c=t.p0,s=t.p1,p=t.p2,i=n(m.get(),s,c),a=n(m.get(),p,s),f=n(m.get(),c,p),j=n(m.get(),e,c),l=n(m.get(),e,s),h=n(m.get(),e,p),b=r(i,i,f),d=o(r(m.get(),i,b),j),k=o(r(m.get(),a,b),l),v=o(r(m.get(),f,b),h);if(d>0&&k>0&&v>0){const t=o(b,j);return t*t/o(b,b)}const S=u(g(c,i,w.get()),e),x=u(g(s,a,w.get()),e),M=u(g(p,f,w.get()),e);return Math.min(S,x,M)}function k(t,e,n){const r=1e-5,{direction:o,origin:p}=e,{p0:i,p1:a,p2:f}=t,u=a[0]-i[0],g=a[1]-i[1],m=a[2]-i[2],j=f[0]-i[0],l=f[1]-i[1],h=f[2]-i[2],b=o[1]*h-l*o[2],d=o[2]*j-h*o[0],k=o[0]*l-j*o[1],v=u*b+g*d+m*k;if(v>-r&&v<r)return!1;const S=1/v,w=p[0]-i[0],x=p[1]-i[1],M=p[2]-i[2],O=S*(w*b+x*d+M*k);if(O<0||O>1)return!1;const V=x*m-g*M,q=M*u-m*w,y=w*g-u*x,z=S*(o[0]*V+o[1]*q+o[2]*y);if(z<0||O+z>1)return!1;if(n){c(n,o,S*(j*V+l*q+h*y)),s(n,p,n)}return!0}function v(t,e,n){const r=e[0]-t[0],o=e[1]-t[1],c=n[0]-t[0],s=n[1]-t[1];return.5*Math.abs(r*s-o*c)}function S(t,e,o){return n(M,e,t),n(O,o,t),.5*p(r(M,M,O))}const w=new t(f),x=new t((()=>j())),M=a(),O=a();export{v as areaPoints2d,S as areaPoints3d,h as copy,j as create,d as distance2,b as fromValues,k as intersectRay,l as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{acosClamped as t}from\"../../core/mathUtils.js\";import{f as r,h as n,l as o,n as s,e as c}from\"../../chunks/vec32.js\";import{create as e}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";function i(t,o,s){const c=r(t,o)/r(t,t);return n(s,t,c)}function f(t,n){return r(t,n)/o(t)}function a(n,s){const c=r(n,s)/(o(n)*o(s));return-t(c)}function u(n,o,e){s(m,n),s(h,o);const i=r(m,h),f=t(i),a=c(m,m,h);return r(a,e)<0?2*Math.PI-f:f}const m=e(),h=e();export{a as angle,u as angleAroundAxis,i as projectPoint,f as projectPointSignedLength};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VectorStack as e}from\"../../core/VectorStack.js\";const t=e.createVec2f64(),c=e.createVec3f64(),r=e.createVec4f64(),a=e.createMat3f64(),f=e.createMat4f64(),o=e.createQuatf64();export{a as sm3d,f as sm4d,o as sq4d,t as sv2d,c as sv3d,r as sv4d};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as s}from\"../../assets.js\";function i(){return t??=(async()=>{const i=await import(/* webpackChunkName: \"chunks-basis_transcoder\" */ \"../../chunks/basis_transcoder.js\"),t=await i.default({locateFile:i=>s(`esri/libs/basisu/${i}`)});return t.initializeBasis(),t})(),t}let t;export{i as getBasisTranscoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar _;!function(_){_[_.ETC1_RGB=0]=\"ETC1_RGB\",_[_.ETC2_RGBA=1]=\"ETC2_RGBA\",_[_.BC1_RGB=2]=\"BC1_RGB\",_[_.BC3_RGBA=3]=\"BC3_RGBA\",_[_.BC4_R=4]=\"BC4_R\",_[_.BC5_RG=5]=\"BC5_RG\",_[_.BC7_M6_RGB=6]=\"BC7_M6_RGB\",_[_.BC7_M5_RGBA=7]=\"BC7_M5_RGBA\",_[_.PVRTC1_4_RGB=8]=\"PVRTC1_4_RGB\",_[_.PVRTC1_4_RGBA=9]=\"PVRTC1_4_RGBA\",_[_.ASTC_4x4_RGBA=10]=\"ASTC_4x4_RGBA\",_[_.ATC_RGB=11]=\"ATC_RGB\",_[_.ATC_RGBA=12]=\"ATC_RGBA\",_[_.FXT1_RGB=17]=\"FXT1_RGB\",_[_.PVRTC2_4_RGB=18]=\"PVRTC2_4_RGB\",_[_.PVRTC2_4_RGBA=19]=\"PVRTC2_4_RGBA\",_[_.ETC2_EAC_R11=20]=\"ETC2_EAC_R11\",_[_.ETC2_EAC_RG11=21]=\"ETC2_EAC_RG11\",_[_.RGBA32=13]=\"RGBA32\",_[_.RGB565=14]=\"RGB565\",_[_.BGR565=15]=\"BGR565\",_[_.RGBA4444=16]=\"RGBA4444\"}(_||(_={}));export{_ as TextureFormat};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,r){const{data:a}=await e(t,{responseType:\"image\",...r});return a}export{t as requestImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport r from\"../../../request.js\";import{result as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import{throwIfAborted as a,throwIfAbortError as o}from\"../../../core/promiseUtils.js\";import{isDataProtocol as s,dataToArrayBuffer as i}from\"../../../core/urlUtils.js\";class n{constructor(r){this._streamDataRequester=r}async loadJSON(r,e){return this._load(\"json\",r,e)}async loadBinary(r,e){return s(r)?(a(e),i(r)):this._load(\"binary\",r,e)}async loadImage(r,e){return this._load(\"image\",r,e)}async _load(a,s,i){if(null==this._streamDataRequester)return(await r(s,{responseType:m[a]})).data;const n=await e(this._streamDataRequester.request(s,a,i));if(!0===n.ok)return n.value;throw o(n.error),new t(\"glt-loader-request-error\",`Request for resource failed: ${n.error}`)}}const m={image:\"image\",binary:\"array-buffer\",json:\"json\",\"image+type\":void 0};export{n as DefaultLoadingContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{fromValues as t,create as o}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{ZEROS as r,ONES as l}from\"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{multiply as i}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";function s(s){if(null==s)return null;const a=null!=s.offset?s.offset:r,n=null!=s.rotation?s.rotation:0,e=null!=s.scale?s.scale:l,f=t(1,0,0,0,1,0,a[0],a[1],1),c=t(Math.cos(n),-Math.sin(n),0,Math.sin(n),Math.cos(n),0,0,0,1),m=t(e[0],0,0,0,e[1],0,0,0,1),u=o();return i(u,c,m),i(u,f,u),u}export{s as getTransformMatrix};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isUint8Array as r}from\"../../../../core/typedArrayUtil.js\";import{getContinuousIndexArray as t,newIndexArray as e}from\"../../../../geometry/support/Indices.js\";import{PrimitiveType as n}from\"../../../webgl/enums.js\";function o(r,t){switch(t){case n.TRIANGLES:return f(r);case n.TRIANGLE_STRIP:return u(r);case n.TRIANGLE_FAN:return i(r)}}function f(e){return\"number\"==typeof e?t(e):r(e)?new Uint16Array(e):e}function u(r){const t=\"number\"==typeof r?r:r.length;if(t<3)return[];const n=t-2,o=e(3*n);if(\"number\"==typeof r){let r=0;for(let t=0;t<n;t+=1)t%2==0?(o[r++]=t,o[r++]=t+1,o[r++]=t+2):(o[r++]=t+1,o[r++]=t,o[r++]=t+2)}else{let t=0;for(let e=0;e<n;e+=1)e%2==0?(o[t++]=r[e],o[t++]=r[e+1],o[t++]=r[e+2]):(o[t++]=r[e+1],o[t++]=r[e],o[t++]=r[e+2])}return o}function i(r){const t=\"number\"==typeof r?r:r.length;if(t<3)return new Uint16Array(0);const e=t-2,n=e<=65536?new Uint16Array(3*e):new Uint32Array(3*e);if(\"number\"==typeof r){let r=0;for(let t=0;t<e;++t)n[r++]=0,n[r++]=t+1,n[r++]=t+2;return n}const o=r[0];let f=r[1],u=0;for(let i=0;i<e;++i){const t=r[i+2];n[u++]=o,n[u++]=f,n[u++]=t,f=t}return n}export{o as convertPrimitiveToTriangles};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{TextureEncodingMimeType as e}from\"../../webgl-engine/lib/basicInterfaces.js\";class t{constructor(t){this.data=t,this.type=\"encoded-mesh-texture\",this.encoding=e.KTX2_ENCODING}}function r(e){return\"encoded-mesh-texture\"===e?.type}async function n(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function o(r,n){if(n===e.KTX2_ENCODING)return new t(r);const o=new Blob([r],{type:n}),c=URL.createObjectURL(o),s=new Image;if(has(\"esri-iPhone\"))return new Promise(((e,t)=>{const r=()=>{o(),e(s)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(c),s.removeEventListener(\"load\",r),s.removeEventListener(\"error\",n)};s.addEventListener(\"load\",r),s.addEventListener(\"error\",n),s.src=c}));try{s.src=c,await s.decode()}catch(i){console.warn(\"Failed decoding HTMLImageElement\")}return URL.revokeObjectURL(c),s}export{t as EncodedMeshTexture,o as imageFromBinaryData,r as isEncodedMeshTexture,n as jsonFromBinaryData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass s{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class t{constructor(t,e,r){this.name=t,this.lodThreshold=e,this.pivotOffset=r,this.stageResources=new s,this.numberOfVertices=0}}export{t as ProcessedObjectResource,s as ProcessedObjectStageResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{hasScaling as t}from\"../../../../core/mathUtils.js\";import{normalFromMat4 as r,fromMat4 as o}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as i}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ONES as a}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as l,d as u,E as c,l as m,n as f,m as d}from\"../../../../chunks/vec32.js\";import{create as p}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as g,expandWithVec3 as x}from\"../../../../geometry/support/aaBoundingBox.js\";import{newFloatArray as b}from\"../../../../geometry/support/FloatArray.js\";import{BufferViewVec4f as h,BufferViewVec4u8 as T,BufferViewVec4u16 as y,BufferViewVec3f as w,BufferViewVec3u8 as v,BufferViewVec3u16 as R}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as j,b as B,n as M,f as S}from\"../../../../chunks/vec3.js\";import{t as F,b as A}from\"../../../../chunks/vec4.js\";import{a as E}from\"../../../../chunks/vec2.js\";import{c as O}from\"../../../../chunks/vec33.js\";import{a as C}from\"../../../../chunks/vec43.js\";import{DefaultLoadingContext as L}from\"../../glTF/DefaultLoadingContext.js\";import{convertPrimitiveToTriangles as I}from\"../../glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as N}from\"../../glTF/internal/resourceUtils.js\";import{getTransformMatrix as k}from\"../../glTF/internal/TextureTransformUtils.js\";import{ProcessedObjectResource as P}from\"./ProcessedObjectResource.js\";import{load as U,processLoadResult as V}from\"./wosrLoader.js\";import{NormalType as _}from\"../../webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{Attribute as D}from\"../../webgl-engine/lib/Attribute.js\";import{AlphaDiscardMode as G,DepthTestFunction as q,CullFaceOptions as W}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as H}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as $}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as z}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as K}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{colorGamma as Q}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{esriSymbologyMRRFactors as J,advancedMRRFactors as X,useSchematicPBR as Y,schematicMRRFactors as Z}from\"../../webgl-engine/materials/pbrUtils.js\";async function ee(t,r){const o=te(e(t));if(\"wosr\"===o.fileType){const e=await(r.cache?r.cache.loadWOSR(o.url,r):U(o.url,r)),{engineResources:t,referenceBoundingBox:s}=V(e,r);return{lods:t,referenceBoundingBox:s,isEsriSymbolResource:!1,isWosr:!0}}let s;if(r.cache)s=await r.cache.loadGLTF(o.url,r,!!r.usePBR);else{const{loadGLTF:e}=await import(/* webpackChunkName: \"glTF-loader\" */ \"../../glTF/loader.js\");s=await e(new L(r.streamDataRequester),o.url,r,r.usePBR)}const i=s.model.meta?.ESRI_proxyEllipsoid,n=s.meta.isEsriSymbolResource&&null!=i&&\"EsriRealisticTreesStyle\"===s.meta.ESRI_webstyle;n&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,ae(s,i));const a=!!r.usePBR,l=s.meta.isEsriSymbolResource?{usePBR:a,isSchematic:!1,treeRendering:n,mrrFactors:J}:{usePBR:a,isSchematic:!1,treeRendering:!1,mrrFactors:X},u={...r.materialParameters,treeRendering:n},{engineResources:c,referenceBoundingBox:m}=re(s,l,u,r,o.specifiedLodIndex);return{lods:c,referenceBoundingBox:m,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function te(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function re(e,t,r,o,s){const i=e.model,n=new Array,a=new Map,l=new Map,u=i.lods.length,c=g();return i.lods.forEach(((e,m)=>{const f=!0===o.skipHighLods&&(u>1&&0===m||u>3&&1===m)||!1===o.skipHighLods&&null!=s&&m!==s;if(f&&0!==m)return;const d=new P(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const s=f?new K({},o):oe(i,e,d,t,r,a,l,o),{geometry:n,vertexCount:u}=se(e,s??new K({},o)),p=n.boundingInfo;null!=p&&0===m&&(x(c,p.bbMin),x(c,p.bbMax)),null!=s&&(d.stageResources.geometries.push(n),d.numberOfVertices+=u)})),f||n.push(d)})),{engineResources:n,referenceBoundingBox:c}}function oe(e,t,r,o,s,i,n,l){const u=t.material+(t.attributes.normal?\"_normal\":\"\")+(t.attributes.color?\"_color\":\"\")+(t.attributes.texCoord0?\"_texCoord0\":\"\")+(t.attributes.tangent?\"_tangent\":\"\"),c=e.materials.get(t.material),m=null!=t.attributes.texCoord0,f=null!=t.attributes.normal;if(null==c)return null;const d=ne(c.alphaMode);if(!i.has(u)){if(m){const t=(t,r=!1)=>{if(null!=t&&!n.has(t)){const o=e.textures.get(t);if(null!=o){const e=o.data;n.set(t,new $(N(e)?e.data:e,{...o.parameters,preMultiplyAlpha:!N(e)&&r,encoding:N(e)&&null!=e.encoding?e.encoding:void 0}))}}};t(c.textureColor,d!==G.Opaque),t(c.textureNormal),t(c.textureOcclusion),t(c.textureEmissive),t(c.textureMetallicRoughness)}const r=c.color[0]**(1/Q),p=c.color[1]**(1/Q),g=c.color[2]**(1/Q),x=c.emissiveFactor[0]**(1/Q),b=c.emissiveFactor[1]**(1/Q),h=c.emissiveFactor[2]**(1/Q),T=null!=c.textureColor&&m?n.get(c.textureColor):null,y=Y({normalTexture:c.textureNormal,metallicRoughnessTexture:c.textureMetallicRoughness,metallicFactor:c.metallicFactor,roughnessFactor:c.roughnessFactor,emissiveTexture:c.textureEmissive,emissiveFactor:c.emissiveFactor,occlusionTexture:c.textureOcclusion}),w=null!=c.normalTextureTransform?.scale?c.normalTextureTransform?.scale:a;i.set(u,new K({...o,transparent:d===G.Blend,customDepthTest:q.Lequal,textureAlphaMode:d,textureAlphaCutoff:c.alphaCutoff,diffuse:[r,p,g],ambient:[r,p,g],opacity:c.opacity,doubleSided:c.doubleSided,doubleSidedType:\"winding-order\",cullFace:c.doubleSided?W.None:W.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:f?_.Attribute:_.ScreenDerivative,castShadows:!0,receiveShadows:c.receiveShadows,receiveAmbientOcclusion:c.receiveAmbientOcclustion,textureId:null!=T?T.id:void 0,colorMixMode:c.colorMixMode,normalTextureId:null!=c.textureNormal&&m?n.get(c.textureNormal).id:void 0,textureAlphaPremultiplied:null!=T&&!!T.parameters.preMultiplyAlpha,occlusionTextureId:null!=c.textureOcclusion&&m?n.get(c.textureOcclusion).id:void 0,emissiveTextureId:null!=c.textureEmissive&&m?n.get(c.textureEmissive).id:void 0,metallicRoughnessTextureId:null!=c.textureMetallicRoughness&&m?n.get(c.textureMetallicRoughness).id:void 0,emissiveFactor:[x,b,h],mrrFactors:y?Z:[c.metallicFactor,c.roughnessFactor,o.mrrFactors[2]],isSchematic:y,colorTextureTransformMatrix:k(c.colorTextureTransform),normalTextureTransformMatrix:k(c.normalTextureTransform),scale:[w[0],w[1]],occlusionTextureTransformMatrix:k(c.occlusionTextureTransform),emissiveTextureTransformMatrix:k(c.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:k(c.metallicRoughnessTextureTransform),...s},l))}const p=i.get(u);if(r.stageResources.materials.push(p),m){const e=e=>{null!=e&&r.stageResources.textures.push(n.get(e))};e(c.textureColor),e(c.textureNormal),e(c.textureOcclusion),e(c.textureEmissive),e(c.textureMetallicRoughness)}return p}function se(e,s){const i=e.attributes.position.count,n=I(e.indices||i,e.primitiveType),a=b(3*i),{typedBuffer:l,typedBufferStride:u}=e.attributes.position;j(a,l,e.transform,3,u);const c=[[z.POSITION,new D(a,n,3,!0)]];if(null!=e.attributes.normal){const o=b(3*i),{typedBuffer:s,typedBufferStride:a}=e.attributes.normal;r(ie,e.transform),B(o,s,ie,3,a),t(ie)&&M(o,o),c.push([z.NORMAL,new D(o,n,3,!0)])}if(null!=e.attributes.tangent){const r=b(4*i),{typedBuffer:s,typedBufferStride:a}=e.attributes.tangent;o(ie,e.transform),F(r,s,ie,4,a),t(ie)&&M(r,r,4),c.push([z.TANGENT,new D(r,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=b(2*i),{typedBuffer:r,typedBufferStride:o}=e.attributes.texCoord0;E(t,r,2,o),c.push([z.UV0,new D(t,n,2,!0)])}const m=e.attributes.color;if(null!=m){const t=new Uint8Array(4*i);4===m.elementCount?m instanceof h?A(t,m,255):m instanceof T?C(t,m):m instanceof y&&A(t,m,1/256):(t.fill(255),m instanceof w?S(t,m.typedBuffer,255,4,m.typedBufferStride):e.attributes.color instanceof v?O(t,m.typedBuffer,4,e.attributes.color.typedBufferStride):e.attributes.color instanceof R&&S(t,m.typedBuffer,1/256,4,m.typedBufferStride)),c.push([z.COLOR,new D(t,n,4,!0)])}return{geometry:new H(s,c),vertexCount:i}}const ie=s();function ne(e){switch(e){case\"BLEND\":return G.Blend;case\"MASK\":return G.Mask;case\"OPAQUE\":case null:case void 0:return G.Opaque}}function ae(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];for(const s of o.parts){const o=s.attributes.normal;if(null==o)return;const a=s.attributes.position,g=a.count,x=p(),b=p(),h=p(),y=new Uint8Array(4*g),v=new Float64Array(3*g),R=i(n(),s.transform);let j=0,B=0;for(let i=0;i<g;i++){a.getVec(i,b),o.getVec(i,x),l(b,b,s.transform),u(h,b,t.center),c(h,h,t.radius);const n=h[2],p=m(h),g=Math.min(.45+.55*p*p,1);c(h,h,t.radius),null!==R&&l(h,h,R),f(h,h),r+1!==e.model.lods.length&&e.model.lods.length>1&&d(h,h,x,n>-1?.2:Math.min(-4*n-3.8,1)),v[j]=h[0],v[j+1]=h[1],v[j+2]=h[2],j+=3,y[B]=255*g,y[B+1]=255*g,y[B+2]=255*g,y[B+3]=255,B+=4}s.attributes.normal=new w(v),s.attributes.color=new T(y)}}}export{ee as fetch,te as parseUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import{estimateNestedObjectSize as r}from\"../../../../core/byteSizeEstimations.js\";import n from\"../../../../core/Error.js\";import s from\"../../../../core/Logger.js\";import{NestedMap as a}from\"../../../../core/NestedMap.js\";import{throwIfAbortError as o}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{fromArray as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as u,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{getContinuousIndexArray as m}from\"../../../../geometry/support/Indices.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Attribute as f}from\"../../webgl-engine/lib/Attribute.js\";import{CullFaceOptions as d,AlphaDiscardMode as g}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Geometry as y}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as b}from\"../../webgl-engine/lib/Texture.js\";import{VertexAttribute as w}from\"../../webgl-engine/lib/VertexAttribute.js\";import{DefaultMaterial as x}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{TextureWrapMode as h}from\"../../../webgl/enums.js\";const v=()=>s.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");async function A(e,t){const n=await j(e,t),s=await E(n.textureDefinitions??{},t);let a=0;for(const r in s)if(s.hasOwnProperty(r)){const e=s[r];a+=e?.image?e.image.width*e.image.height*4:0}return{resource:n,textures:s,size:a+r(n)}}async function j(r,n){const s=n?.streamDataRequester;if(s)return I(r,s,n);const a=await t(e(r,n));if(!0===a.ok)return a.value.data;o(a.error),P(a.error)}async function I(e,r,n){const s=await t(r.request(e,\"json\",n));if(!0===s.ok)return s.value;o(s.error),P(s.error.details.url)}function P(e){throw new n(\"\",`Request for object resource failed: ${e}`)}function M(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(v().warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t?.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(v().warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(v().warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(v().warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else v().warn(\"Indexed geometries must specify faces\"),n=!1;break}default:v().warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(v().warn(\"Geometry requires material\"),n=!1);const s=e.params.vertexAttributes;for(const a in s){s[a].values||(v().warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function T(e,t){const r=new Array,n=new Array,s=new Array,o=new a,u=e.resource,c=i.parse(u.version||\"1.0\",\"wosr\");q.validate(c);const p=u.model.name,g=u.model.geometries,h=u.materialDefinitions??{},v=e.textures;let A=0;const j=new Map;for(let a=0;a<g.length;a++){const e=g[a];if(!M(e))continue;const i=k(e),u=e.params.vertexAttributes,c=[],p=t=>{if(\"PerAttributeArray\"===e.params.topology)return null;const r=e.params.faces;for(const e in r)if(e===t)return r[e].values;return null},I=u[w.POSITION],P=I.values.length/I.valuesPerElement;for(const t in u){const e=u[t],r=e.values,n=p(t)??m(P);c.push([t,new f(r,n,e.valuesPerElement,!0)])}const T=i.texture,U=v&&v[T];if(U&&!j.has(T)){const{image:e,parameters:t}=U,r=new b(e,t);n.push(r),j.set(T,r)}const E=j.get(T),q=E?E.id:void 0,R=i.material;let B=o.get(R,T);if(null==B){const e=h[R.slice(R.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=U&&U.alphaChannelUsage,n=e.transparency>0||\"transparency\"===r||\"maskAndTransparency\"===r,s=U?O(U.alphaChannelUsage):void 0,a={ambient:l(e.diffuse),diffuse:l(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:s,textureAlphaCutoff:.33,textureId:q,initTextureTransparent:!0,doubleSided:!0,cullFace:d.None,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:U?.parameters.preMultiplyAlpha??!1};t?.materialParameters&&Object.assign(a,t.materialParameters),B=new x(a,t),o.set(R,T,B)}s.push(B);const C=new y(B,c);A+=c.find((e=>e[0]===w.POSITION))?.[1]?.indices.length??0,r.push(C)}return{engineResources:[{name:p,stageResources:{textures:n,materials:s,geometries:r},pivotOffset:u.model.pivotOffset,numberOfVertices:A,lodThreshold:null}],referenceBoundingBox:U(r)}}function U(e){const t=u();return e.forEach((e=>{const r=e.boundingInfo;null!=r&&(c(t,r.bbMin),c(t,r.bbMax))})),t}async function E(e,t){const r=new Array;for(const a in e){const n=e[a],s=n.images[0].data;if(!s){v().warn(\"Externally referenced texture data is not yet supported\");continue}const o=n.encoding+\";base64,\"+s,i=\"/textureDefinitions/\"+a,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",u={noUnpackFlip:!0,wrap:{s:h.REPEAT,t:h.REPEAT},preMultiplyAlpha:O(l)!==g.Opaque},c=t?.disableTextures?Promise.resolve(null):p(o,t);r.push(c.then((e=>({refId:i,image:e,parameters:u,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function O(e){switch(e){case\"mask\":return g.Mask;case\"maskAndTransparency\":return g.MaskBlend;case\"none\":return g.Opaque;default:return g.Blend}}function k(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const q=new i(1,2,\"wosr\");export{E as createTextureResources,A as load,T as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clamp as e}from\"../../../../core/mathUtils.js\";import{fromMat4 as t}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as o}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{identity as i,copy as n,set as s,multiply as r,scale as l,translate as a,rotateZ as u,rotateX as f,rotateY as c}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as p}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as d}from\"../../../../chunks/vec32.js\";import{create as z}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{meterIn as m}from\"../../../../renderers/support/lengthUtils.js\";import{debugFlags as v}from\"../../support/debugFlags.js\";import{NoParameters as S}from\"../../webgl-engine/core/shaderModules/interfaces.js\";var h,y;!function(e){e[e.Undefined=0]=\"Undefined\",e[e.DefinedSize=1]=\"DefinedSize\",e[e.DefinedScale=2]=\"DefinedScale\"}(h||(h={})),function(e){e[e.Undefined=0]=\"Undefined\",e[e.DefinedAngle=1]=\"DefinedAngle\"}(y||(y={}));class x{constructor(e){this.field=e}}class g extends x{constructor(e){super(e),this.minSize=[0,0,0],this.maxSize=[0,0,0],this.offset=[0,0,0],this.factor=[0,0,0],this.type=[h.Undefined,h.Undefined,h.Undefined]}}class b extends x{constructor(e){super(e),this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.values=[0,0,0,0,0,0,0,0]}}class C extends x{constructor(e){super(e),this.values=[0,0,0,0,0,0,0,0],this.opacityValues=[0,0,0,0,0,0,0,0]}}class D extends x{constructor(e){super(e),this.offset=[0,0,0],this.factor=[1,1,1],this.type=[0,0,0]}}class U{}function w(e){return null!=e}function V(e){return\"number\"==typeof e}function M(e){return\"string\"==typeof e}function j(e){return null==e||M(e)}function A(e,t){e&&e.push(t)}function I(e,t,o,i=p()){const n=e||0,s=t||0,r=o||0;return 0!==n&&u(i,i,-n/180*Math.PI),0!==s&&f(i,i,s/180*Math.PI),0!==r&&c(i,i,r/180*Math.PI),i}function T(e,t,o,i,n){const s=e.minSize,r=e.maxSize;if(e.useSymbolValue){const e=i.symbolSize[o];return t.minSize[o]=e,t.maxSize[o]=e,t.offset[o]=t.minSize[o],t.factor[o]=0,t.type[o]=h.DefinedSize,!0}if(w(e.field))return w(e.stops)?2===e.stops.length&&V(e.stops[0].size)&&V(e.stops[1].size)?(F(e.stops[0].size,e.stops[1].size,e.stops[0].value,e.stops[1].value,t,o),t.type[o]=h.DefinedSize,!0):(A(n,\"Could not convert size info: stops only supported with 2 elements\"),!1):V(s)&&V(r)&&w(e.minDataValue)&&w(e.maxDataValue)?(F(s,r,e.minDataValue,e.maxDataValue,t,o),t.type[o]=h.DefinedSize,!0):\"unknown\"===e.valueUnit?(A(n,\"Could not convert size info: proportional size not supported\"),!1):null!=m[e.valueUnit]?(t.minSize[o]=-1/0,t.maxSize[o]=1/0,t.offset[o]=0,t.factor[o]=1/m[e.valueUnit],t.type[o]=h.DefinedSize,!0):(A(n,\"Could not convert size info: scale-dependent size not supported\"),!1);if(!w(e.field)){if(e.stops?.[0]&&V(e.stops[0].size))return t.minSize[o]=e.stops[0].size,t.maxSize[o]=e.stops[0].size,t.offset[o]=t.minSize[o],t.factor[o]=0,t.type[o]=h.DefinedSize,!0;if(V(s))return t.minSize[o]=s,t.maxSize[o]=s,t.offset[o]=s,t.factor[o]=0,t.type[o]=h.DefinedSize,!0}return A(n,\"Could not convert size info: unsupported variant of sizeInfo\"),!1}function F(e,t,o,i,n,s){const r=Math.abs(i-o)>0?(t-e)/(i-o):0;n.minSize[s]=r>0?e:t,n.maxSize[s]=r>0?t:e,n.offset[s]=e-o*r,n.factor[s]=r}function P(e,t,o,i){if(e.normalizationField||e.valueRepresentation)return A(i,\"Could not convert size info: unsupported property\"),null;if(!j(e.field))return A(i,\"Could not convert size info: field is not a string\"),null;if(t.size){if(e.field)if(t.size.field){if(e.field!==t.size.field)return A(i,\"Could not convert size info: multiple fields in use\"),null}else t.size.field=e.field}else t.size=new g(e.field);let n;switch(e.axis){case\"width\":return n=T(e,t.size,0,o,i),n?t:null;case\"height\":return n=T(e,t.size,2,o,i),n?t:null;case\"depth\":return n=T(e,t.size,1,o,i),n?t:null;case\"width-and-depth\":return n=T(e,t.size,0,o,i),n&&T(e,t.size,1,o,i),n?t:null;case null:case void 0:case\"all\":return n=T(e,t.size,0,o,i),n=n&&T(e,t.size,1,o,i),n=n&&T(e,t.size,2,o,i),n?t:null;default:return A(i,`Could not convert size info: unknown axis \"${e.axis}\"\"`),null}}function R(e,t,o){for(let n=0;n<3;++n){let o=t.unitInMeters;e.type[n]===h.DefinedSize&&(o*=t.modelSize[n],e.type[n]=h.DefinedScale),e.minSize[n]=e.minSize[n]/o,e.maxSize[n]=e.maxSize[n]/o,e.offset[n]=e.offset[n]/o,e.factor[n]=e.factor[n]/o}let i;if(e.type[0]!==h.Undefined)i=0;else if(e.type[1]!==h.Undefined)i=1;else{if(e.type[2]===h.Undefined)return A(o,\"No size axis contains a valid size or scale\"),!1;i=2}for(let n=0;n<3;++n)e.type[n]===h.Undefined&&(e.minSize[n]=e.minSize[i],e.maxSize[n]=e.maxSize[i],e.offset[n]=e.offset[i],e.factor[n]=e.factor[i],e.type[n]=e.type[i]);return!0}function k(e,t,o){e[4*t]=o.r/255,e[4*t+1]=o.g/255,e[4*t+2]=o.b/255,e[4*t+3]=o.a}function E(e,t,o){if(e.normalizationField)return A(o,\"Could not convert color info: unsupported property\"),null;if(M(e.field)){if(!e.stops)return A(o,\"Could not convert color info: missing stops or colors\"),null;{if(e.stops.length>8)return A(o,\"Could not convert color info: too many color stops\"),null;t.color=new b(e.field);const i=e.stops;for(let e=0;e<8;++e){const o=i[Math.min(e,i.length-1)];t.color.values[e]=o.value,k(t.color.colors,e,o.color)}}}else{if(!(e.stops&&e.stops.length>=0))return A(o,\"Could not convert color info: no field and no colors/stops\"),null;{const o=e.stops&&e.stops.length>=0&&e.stops[0].color;t.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(let e=0;e<8;e++)t.color.values[e]=1/0,k(t.color.colors,e,o)}}return t}function _(e,t,o){if(e.normalizationField)return A(o,\"Could not convert opacity info: unsupported property\"),null;if(M(e.field)){if(!e.stops)return A(o,\"Could not convert opacity info: missing stops or opacities\"),null;{if(e.stops.length>8)return A(o,\"Could not convert opacity info: too many opacity stops\"),null;t.opacity=new C(e.field);const i=e.stops;for(let e=0;e<8;++e){const o=i[Math.min(e,i.length-1)];t.opacity.values[e]=o.value,t.opacity.opacityValues[e]=o.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return A(o,\"Could not convert opacity info: no field and no opacities/stops\"),null;{const o=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;t.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(let e=0;e<8;e++)t.opacity.values[e]=1/0,t.opacity.opacityValues[e]=o}}return t}function q(e,t,o){const i=2===o&&\"arithmetic\"===e.rotationType;t.offset[o]=i?90:0,t.factor[o]=i?-1:1,t.type[o]=1}function $(e,t,o){if(!M(e.field))return A(o,\"Could not convert rotation info: field is not a string\"),null;if(t.rotation){if(e.field)if(t.rotation.field){if(e.field!==t.rotation.field)return A(o,\"Could not convert rotation info: multiple fields in use\"),null}else t.rotation.field=e.field}else t.rotation={field:e.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(e.axis){case\"tilt\":return q(e,t.rotation,0),t;case\"roll\":return q(e,t.rotation,1),t;case null:case void 0:case\"heading\":return q(e,t.rotation,2),t;default:return A(o,`Could not convert rotation info: unknown axis \"${e.axis}\"\"`),null}}class B{constructor(e,t=[1,1,1],o=[1,1,1],i=1,n=[0,0,0],s=[1,1,1],r=[0,0,0]){this.supports=e,this.modelSize=t,this.symbolSize=o,this.unitInMeters=i,this.anchor=n,this.scale=s,this.rotation=r}}function L(e,t,o){if(!e)return null;const i=e.reduce(((e,i)=>{if(!e)return e;if(i.valueExpression)return A(o,\"Could not convert visual variables: arcade expressions not supported\"),null;switch(i.type){case\"size\":return t.supports.size?P(i,e,t,o):e;case\"color\":return t.supports.color?E(i,e,o):e;case\"opacity\":return t.supports.opacity?_(i,e,o):null;case\"rotation\":return t.supports.rotation?$(i,e,o):e;default:return null}}),new U);return!(e.length>0&&i)||i.size||i.color||i.opacity||i.rotation?i?.size&&!R(i.size,t,o)?null:i:null}class N{constructor(e,t,o){this.visualVariables=e,this.materialParameters=t,this.requiresShaderTransformation=o}}function O(e,t){if(!e)return null;if(v.TESTS_DISABLE_FAST_UPDATES)return null;const o=L(e.visualVariables,t);return o?new N(o,K(o,t),!!o.size):null}function G(e,t,o){if(!t||!e)return!1;const i=e.visualVariables,n=L(t.visualVariables,o);return!!n&&(!!(H(i.size,n.size,\"size\")&&H(i.color,n.color,\"color\")&&H(i.rotation,n.rotation,\"rotation\")&&H(i.opacity,n.opacity,\"opacity\"))&&(e.visualVariables=n,e.materialParameters=K(n,o),e.requiresShaderTransformation=!!n.size,!0))}function H(e,t,o){if(!!e!=!!t)return!1;if(e&&e.field!==t?.field)return!1;if(e&&\"rotation\"===o){const o=e,i=t;for(let e=0;e<3;e++)if(o.type[e]!==i.type[e]||o.offset[e]!==i.offset[e]||o.factor[e]!==i.factor[e])return!1}return!0}class J extends S{constructor(e){super(),this.vvSize=e?.size??null,this.vvColor=e?.color??null,this.vvOpacity=e?.opacity??null}}function K(e,n){const s=new J(e);return s.vvSize&&(s.vvSymbolAnchor=n.anchor,i(ee),I(n.rotation[2],n.rotation[0],n.rotation[1],ee),s.vvSymbolRotationMatrix=s.vvSymbolRotationMatrix||o(),t(s.vvSymbolRotationMatrix,ee)),s}function Q(t,o,i){if(!t.vvSize)return i;n(Y,i);const u=t.vvSymbolRotationMatrix;s(ee,u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,0,0,0,1),r(Y,Y,ee);for(let n=0;n<3;++n){const i=t.vvSize.offset[n]+o[0]*t.vvSize.factor[n];Z[n]=e(i,t.vvSize.minSize[n],t.vvSize.maxSize[n])}return l(Y,Y,Z),a(Y,Y,t.vvSymbolAnchor),Y}function W(t,o,i){if(!o.vvSize)return d(t,1,1,1),t;for(let n=0;n<3;++n){const s=o.vvSize.offset[n]+i[0]*o.vvSize.factor[n];t[n]=e(s,o.vvSize.minSize[n],o.vvSize.maxSize[n])}return t}function X(e,t){const o=null==e?0:t.attributes[e];return\"number\"==typeof o&&isFinite(o)?o:0}const Y=p(),Z=z(),ee=p();export{B as ConvertOptions,b as FastColorInfo,C as FastOpacityInfo,D as FastRotationInfo,y as FastRotationType,g as FastSizeInfo,h as FastSizeType,N as FastSymbolUpdatesState,U as FastVisualVariables,J as VisualVariablesParameters,L as convertVisualVariables,Q as evaluateModelTransform,W as evaluateModelTransformScale,X as getAttributeValue,K as getMaterialParameters,O as initFastSymbolUpdatesState,G as updateFastSymbolUpdatesState};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";var n;function e(t){switch(t){case\"multiply\":default:return n.Multiply;case\"ignore\":return n.Ignore;case\"replace\":return n.Replace;case\"tint\":return n.Tint}}function r(e,r,a){if(null==e||r===n.Ignore)return a[0]=255,a[1]=255,a[2]=255,void(a[3]=255);const c=t(Math.round(e[3]*i),0,i),p=0===c||r===n.Tint?0:r===n.Replace?u:l;a[0]=t(Math.round(e[0]*o),0,o),a[1]=t(Math.round(e[1]*o),0,o),a[2]=t(Math.round(e[2]*o),0,o),a[3]=c+p}!function(t){t[t.Multiply=1]=\"Multiply\",t[t.Ignore=2]=\"Ignore\",t[t.Replace=3]=\"Replace\",t[t.Tint=4]=\"Tint\"}(n||(n={}));const o=255,i=85,u=i,l=2*i;export{n as ColorMixModeEnum,r as encodeSymbolColor,e as parseColorMixMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BufferViewVec2f as e,BufferViewVec2f64 as t,BufferViewVec3f as s,BufferViewVec3f64 as i,BufferViewVec4f as r,BufferViewVec4f64 as n,BufferViewMat3f as h,BufferViewMat3f64 as d,BufferViewMat4f as u,BufferViewMat4f64 as f,BufferViewVec4u8 as l,BufferViewFloat as o,BufferViewFloat64 as p,BufferViewUint8 as c,BufferViewUint16 as a,BufferViewInt8 as _,BufferViewVec2i8 as y,BufferViewVec2i16 as m,BufferViewVec2u8 as F,BufferViewVec4u16 as g,BufferViewUint32 as b,BufferViewVec3u8 as w,BufferViewVec2u16 as v,BufferViewVec3u16 as E,BufferViewVec2u32 as A,BufferViewVec3u32 as T,BufferViewVec4u32 as M,BufferViewVec3i8 as B,BufferViewVec4i8 as U,BufferViewInt16 as z,BufferViewVec3i16 as C,BufferViewVec4i16 as L,BufferViewInt32 as j,BufferViewVec2i32 as x,BufferViewVec3i32 as $,BufferViewVec4i32 as V}from\"../../../../geometry/support/buffer/BufferView.js\";import{elementTypeSize as k}from\"../../../../geometry/support/buffer/types.js\";import{assert as q}from\"../../webgl-engine/lib/Util.js\";class D{constructor(e,t){this.layout=e,this.buffer=\"number\"==typeof t?new ArrayBuffer(t*e.stride):t;for(const s of e.fields.keys()){const t=e.fields.get(s);this[s]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const s=this[e];return s&&s.elementCount===t.ElementCount&&s.elementType===t.ElementType?s:null}slice(e,t){return new D(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,s=0,i=e.count){const r=this.stride;if(r%4==0){const n=new Uint32Array(e.buffer,t*r,i*r/4);new Uint32Array(this.buffer,s*r,i*r/4).set(n)}else{const n=new Uint8Array(e.buffer,t*r,i*r);new Uint8Array(this.buffer,s*r,i*r).set(n)}return this}get usedMemory(){return this.byteLength}dispose(){}}class G{constructor(e){this._stride=0,this._lastAligned=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:N(e[1].constructor)}))))}freeze(){return this}vec2f(t,s){return this._appendField(t,e,s),this}vec2f64(e,s){return this._appendField(e,t,s),this}vec3f(e,t){return this._appendField(e,s,t),this}vec3f64(e,t){return this._appendField(e,i,t),this}vec4f(e,t){return this._appendField(e,r,t),this}vec4f64(e,t){return this._appendField(e,n,t),this}mat3f(e,t){return this._appendField(e,h,t),this}mat3f64(e,t){return this._appendField(e,d,t),this}mat4f(e,t){return this._appendField(e,u,t),this}mat4f64(e,t){return this._appendField(e,f,t),this}vec4u8(e,t){return this._appendField(e,l,t),this}f32(e,t){return this._appendField(e,o,t),this}f64(e,t){return this._appendField(e,p,t),this}u8(e,t){return this._appendField(e,c,t),this}u16(e,t){return this._appendField(e,a,t),this}i8(e,t){return this._appendField(e,_,t),this}vec2i8(e,t){return this._appendField(e,y,t),this}vec2i16(e,t){return this._appendField(e,m,t),this}vec2u8(e,t){return this._appendField(e,F,t),this}vec4u16(e,t){return this._appendField(e,g,t),this}u32(e,t){return this._appendField(e,b,t),this}_appendField(e,t,s){if(this._fields.has(e))return void q(!1,`${e} already added to vertex buffer layout`);const i=t.ElementCount*k(t.ElementType),r=this._stride;this._stride+=i,this._fields.set(e,{size:i,constructor:t,offset:r,optional:s})}createBuffer(e){return new D(this,e)}createView(e){return new D(this,e)}clone(){const e=new G;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,s)=>e._fields.set(s,t))),e.BufferType=this.BufferType,e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach((t=>e=Math.max(e,k(t.constructor.ElementType)))),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}function H(){return new G}class I{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const s={...e,constructor:K(e.constructor)};this.fields.push([t,s])})),this.stride=e.stride}}const J=[o,e,s,r,h,u,p,t,i,n,d,f,c,F,w,l,a,v,E,g,b,A,T,M,_,y,B,U,z,m,C,L,j,x,$,V];function K(e){return`${e.ElementType}_${e.ElementCount}`}function N(e){return O.get(e)}const O=new Map;J.forEach((e=>O.set(K(e),e)));export{D as InterleavedBuffer,G as InterleavedLayout,I as PackedLayout,H as newLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as E}from\"../../../chunks/tslib.es6.js\";import _ from\"../../../core/Accessor.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as S}from\"../../../core/accessorSupport/decorators/subclass.js\";let T=class extends _{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};E([o()],T.prototype,\"SCENEVIEW_HITTEST_RETURN_INTERSECTOR\",void 0),E([o()],T.prototype,\"DECONFLICTOR_SHOW_VISIBLE\",void 0),E([o()],T.prototype,\"DECONFLICTOR_SHOW_INVISIBLE\",void 0),E([o()],T.prototype,\"DECONFLICTOR_SHOW_GRID\",void 0),E([o()],T.prototype,\"LABELS_SHOW_BORDER\",void 0),E([o()],T.prototype,\"TEXT_SHOW_BASELINE\",void 0),E([o()],T.prototype,\"TEXT_SHOW_BORDER\",void 0),E([o()],T.prototype,\"OVERLAY_DRAW_DEBUG_TEXTURE\",void 0),E([o()],T.prototype,\"OVERLAY_SHOW_CENTER\",void 0),E([o()],T.prototype,\"SHOW_POI\",void 0),E([o()],T.prototype,\"TESTS_DISABLE_OPTIMIZATIONS\",void 0),E([o()],T.prototype,\"TESTS_DISABLE_FAST_UPDATES\",void 0),E([o()],T.prototype,\"DRAW_MESH_GEOMETRY_NORMALS\",void 0),E([o()],T.prototype,\"FEATURE_TILE_FETCH_SHOW_TILES\",void 0),E([o()],T.prototype,\"FEATURE_TILE_TREE_SHOW_TILES\",void 0),E([o()],T.prototype,\"TERRAIN_TILE_TREE_SHOW_TILES\",void 0),E([o()],T.prototype,\"I3S_TREE_SHOW_TILES\",void 0),E([o()],T.prototype,\"I3S_SHOW_MODIFICATIONS\",void 0),E([o()],T.prototype,\"LOD_INSTANCE_RENDERER_DISABLE_UPDATES\",void 0),E([o()],T.prototype,\"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL\",void 0),E([o()],T.prototype,\"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES\",void 0),E([o()],T.prototype,\"LINE_WIREFRAMES\",void 0),T=E([S(\"esri.views.3d.support.debugFlags\")],T);const t=new T;export{t as debugFlags};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{fromValues as t}from\"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{IDENTITY as r,create as n}from\"../../../core/libs/gl-matrix-2/factories/quatf64.js\";import{create as i}from\"../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{h as o,g as s}from\"../../../chunks/vec32.js\";import{create as e,fromValues as a}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Vertices as c}from\"../webgl-engine/lib/Attribute.js\";const m=1e-6,f=e(),h=e();function u(t,r){const{data:n,size:i}=t,o=n.length/i;if(o<=0)return;const s=new tt(t);it(f,s.minProj,s.maxProj),st(f,f,.5),ot(h,s.maxProj,s.minProj);const a=nt(h),m=new rt;m.quality=a,o<14&&(t=new c(new Float64Array(s.buffer,112,42),3));const u=e(),j=e(),P=e(),b=e(),x=e(),I=e(),N=e();switch(l(s,t,N,u,j,P,b,x,I,m)){case 1:return void O(f,h,r);case 2:return void K(t,b,r)}w(t,N,u,j,P,b,x,I,m),L(t,m.b0,m.b1,m.b2,D,H);const V=e();ot(V,H,D),m.quality=nt(V),m.quality<a?Z(m.b0,m.b1,m.b2,D,H,V,r):O(f,h,r)}function l(t,r,n,i,o,s,e,a,c,f){if(A(t,i,o),ft(i,o)<m)return 1;ot(e,i,o),ct(e,e);return q(r,i,e,s)<m?2:(ot(a,o,s),ct(a,a),ot(c,s,i),ct(c,c),at(n,a,e),ct(n,n),Y(r,n,e,a,c,f),0)}const j=e(),P=e(),b=e(),x=e(),I=e(),N=e(),V=e(),y=e();function w(t,r,n,i,o,s,e,a,c){M(t,r,n,j,P),void 0!==j[0]&&(ot(b,j,n),ct(b,b),ot(x,j,i),ct(x,x),ot(I,j,o),ct(I,I),at(N,x,s),ct(N,N),at(V,I,e),ct(V,V),at(y,b,a),ct(y,y),Y(t,N,s,x,b,c),Y(t,V,e,I,x,c),Y(t,y,a,b,I,c)),void 0!==P[0]&&(ot(b,P,n),ct(b,b),ot(x,P,i),ct(x,x),ot(I,P,o),ct(I,I),at(N,x,s),ct(N,N),at(V,I,e),ct(V,V),at(y,b,a),ct(y,y),Y(t,N,s,x,b,c),Y(t,V,e,I,x,c),Y(t,y,a,b,I,c))}function A(t,r,n){let i=ft(t.maxVert[0],t.minVert[0]),o=0;for(let s=1;s<7;++s){const r=ft(t.maxVert[s],t.minVert[s]);r>i&&(i=r,o=s)}et(r,t.minVert[o]),et(n,t.maxVert[o])}const g=[0,0,0];function q(t,r,n,i){const{data:o,size:s}=t;let e=Number.NEGATIVE_INFINITY,a=0;for(let c=0;c<o.length;c+=s){g[0]=o[c]-r[0],g[1]=o[c+1]-r[1],g[2]=o[c+2]-r[2];const t=n[0]*g[0]+n[1]*g[1]+n[2]*g[2],i=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],s=g[0]*g[0]+g[1]*g[1]+g[2]*g[2]-t*t/i;s>e&&(e=s,a=c)}return et(i,o,a),e}const d=i();function M(t,r,n,i,o){G(t,r,d,o,i);const s=ht(n,r);d[1]-m<=s&&(i[0]=void 0),d[0]+m>=s&&(o[0]=void 0)}const F=e(),T=e(),v=e(),E=e(),p=e(),z=e();function Y(t,r,n,i,o,s){if(mt(r)<m)return;at(F,n,r),at(T,i,r),at(v,o,r),S(t,r,d),p[1]=d[0],E[1]=d[1],z[1]=E[1]-p[1];const e=[n,i,o],a=[F,T,v];for(let c=0;c<3;++c){S(t,e[c],d),p[0]=d[0],E[0]=d[1],S(t,a[c],d),p[2]=d[0],E[2]=d[1],z[0]=E[0]-p[0],z[2]=E[2]-p[2];const n=nt(z);n<s.quality&&(et(s.b0,e[c]),et(s.b1,r),et(s.b2,a[c]),s.quality=n)}}const _=e();function S(t,r,n){const{data:i,size:o}=t;n[0]=Number.POSITIVE_INFINITY,n[1]=Number.NEGATIVE_INFINITY;for(let s=0;s<i.length;s+=o){const t=i[s]*r[0]+i[s+1]*r[1]+i[s+2]*r[2];n[0]=Math.min(n[0],t),n[1]=Math.max(n[1],t)}}function G(t,r,n,i,o){const{data:s,size:e}=t;et(i,s),et(o,i),n[0]=ht(_,r),n[1]=n[0];for(let a=e;a<s.length;a+=e){const t=s[a]*r[0]+s[a+1]*r[1]+s[a+2]*r[2];t<n[0]&&(n[0]=t,et(i,s,a)),t>n[1]&&(n[1]=t,et(o,s,a))}}function O(t,n,i){i.center=t,i.halfSize=o(n,n,.5),i.quaternion=r}const k=e(),B=e(),C=e(),D=e(),H=e(),J=e();function K(t,r,n){et(k,r),Math.abs(r[0])>Math.abs(r[1])&&Math.abs(r[0])>Math.abs(r[2])?k[0]=0:Math.abs(r[1])>Math.abs(r[2])?k[1]=0:k[2]=0,mt(k)<m&&(k[0]=k[1]=k[2]=1),at(B,r,k),ct(B,B),at(C,r,B),ct(C,C),L(t,r,B,C,D,H),ot(J,H,D),Z(r,B,C,D,H,J,n)}function L(t,r,n,i,o,s){S(t,r,d),o[0]=d[0],s[0]=d[1],S(t,n,d),o[1]=d[0],s[1]=d[1],S(t,i,d),o[2]=d[0],s[2]=d[1]}const Q=e(),R=e(),U=e(),W=t(1,0,0,0,1,0,0,0,1),X=n();function Z(t,r,n,i,e,a,c){W[0]=t[0],W[1]=t[1],W[2]=t[2],W[3]=r[0],W[4]=r[1],W[5]=r[2],W[6]=n[0],W[7]=n[1],W[8]=n[2],c.quaternion=ut(X,W),it(Q,i,e),st(Q,Q,.5),st(R,t,Q[0]),st(U,r,Q[1]),it(R,R,U),st(U,n,Q[2]),c.center=s(R,R,U),c.halfSize=o(Q,a,.5)}const $=7;class tt{constructor(t){this.minVert=new Array($),this.maxVert=new Array($);const r=64*$;this.buffer=new ArrayBuffer(r);let n=0;this.minProj=new Float64Array(this.buffer,n,$),n+=8*$,this.maxProj=new Float64Array(this.buffer,n,$),n+=8*$;for(let a=0;a<$;++a)this.minVert[a]=new Float64Array(this.buffer,n,3),n+=24;for(let a=0;a<$;++a)this.maxVert[a]=new Float64Array(this.buffer,n,3),n+=24;for(let a=0;a<$;++a)this.minProj[a]=Number.POSITIVE_INFINITY,this.maxProj[a]=Number.NEGATIVE_INFINITY;const i=new Array($),o=new Array($),{data:s,size:e}=t;for(let a=0;a<s.length;a+=e){let t=s[a];t<this.minProj[0]&&(this.minProj[0]=t,i[0]=a),t>this.maxProj[0]&&(this.maxProj[0]=t,o[0]=a),t=s[a+1],t<this.minProj[1]&&(this.minProj[1]=t,i[1]=a),t>this.maxProj[1]&&(this.maxProj[1]=t,o[1]=a),t=s[a+2],t<this.minProj[2]&&(this.minProj[2]=t,i[2]=a),t>this.maxProj[2]&&(this.maxProj[2]=t,o[2]=a),t=s[a]+s[a+1]+s[a+2],t<this.minProj[3]&&(this.minProj[3]=t,i[3]=a),t>this.maxProj[3]&&(this.maxProj[3]=t,o[3]=a),t=s[a]+s[a+1]-s[a+2],t<this.minProj[4]&&(this.minProj[4]=t,i[4]=a),t>this.maxProj[4]&&(this.maxProj[4]=t,o[4]=a),t=s[a]-s[a+1]+s[a+2],t<this.minProj[5]&&(this.minProj[5]=t,i[5]=a),t>this.maxProj[5]&&(this.maxProj[5]=t,o[5]=a),t=s[a]-s[a+1]-s[a+2],t<this.minProj[6]&&(this.minProj[6]=t,i[6]=a),t>this.maxProj[6]&&(this.maxProj[6]=t,o[6]=a)}for(let a=0;a<$;++a){let t=i[a];et(this.minVert[a],s,t),t=o[a],et(this.maxVert[a],s,t)}}}class rt{constructor(){this.b0=a(1,0,0),this.b1=a(0,1,0),this.b2=a(0,0,1),this.quality=0}}function nt(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function it(t,r,n){t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2]}function ot(t,r,n){t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2]}function st(t,r,n){t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n}function et(t,r,n=0){t[0]=r[n],t[1]=r[n+1],t[2]=r[n+2]}function at(t,r,n){const i=r[0],o=r[1],s=r[2],e=n[0],a=n[1],c=n[2];t[0]=o*c-s*a,t[1]=s*e-i*c,t[2]=i*a-o*e}function ct(t,r){const n=r[0]*r[0]+r[1]*r[1]+r[2]*r[2];if(n>0){const i=1/Math.sqrt(n);t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i}}function mt(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function ft(t,r){const n=r[0]-t[0],i=r[1]-t[1],o=r[2]-t[2];return n*n+i*i+o*o}function ht(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function ut(t,r){const n=r[0]+r[4]+r[8];if(n>0){let i=Math.sqrt(n+1);t[3]=.5*i,i=.5/i,t[0]=(r[5]-r[7])*i,t[1]=(r[6]-r[2])*i,t[2]=(r[1]-r[3])*i}else{let n=0;r[4]>r[0]&&(n=1),r[8]>r[3*n+n]&&(n=2);const i=(n+1)%3,o=(n+2)%3;let s=Math.sqrt(r[3*n+n]-r[3*i+i]-r[3*o+o]+1);t[n]=.5*s,s=.5/s,t[3]=(r[3*i+o]-r[3*o+i])*s,t[i]=(r[3*i+n]+r[3*n+i])*s,t[o]=(r[3*o+n]+r[3*n+o])*s}return t}export{u as computeOBB};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{acosClamped as t}from\"../../../core/mathUtils.js\";import{i as n,f as s,n as r,e as o,l as a,h as c,g as i,m as u,d as h}from\"../../../chunks/vec32.js\";import{create as e}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";function f(t,n){return t>n?Math.cos(n):Math.cos(t)}function M(t,n,s){return 2*Math.atan(s*Math.tan(.5*t)/n)}function l(t,n,s){return 2*Math.atan(n*Math.tan(.5*t)/s)}function m(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],s=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,s,r))}function g(t,s){const r=Math.sqrt(s[0]*s[0]+s[4]*s[4]+s[8]*s[8]),o=Math.sqrt(s[1]*s[1]+s[5]*s[5]+s[9]*s[9]),a=Math.sqrt(s[2]*s[2]+s[6]*s[6]+s[10]*s[10]);return n(t,r,o,a),t}function p(t,o,a){a=a||t;const c=s(t,o);n(a,t[0]-c*o[0],t[1]-c*o[1],t[2]-c*o[2]),r(a,a)}function q(t,s,a){Math.abs(t[0])>Math.abs(t[1])?n(s,0,1,0):n(s,1,0,0),o(a,t,s),o(s,a,t),r(a,a),r(s,s)}function b(t,n,s,r,o,a){const c=t+(n-t)*o;return c+(s+(r-s)*o-c)*a}function j(t,n,r,o=e()){const h=a(t),f=a(n),M=s(t,n)/(h*f);if(M<.9999999999999999){const s=Math.acos(M),a=((1-r)*h+r*f)/Math.sin(s),u=a/h*Math.sin((1-r)*s),e=a/f*Math.sin(r*s);return c(A,t,u),c(B,n,e),i(o,A,B)}return u(o,t,n,r)}function x(t,n,o,f=e(),M=e()){const l=a(t),m=a(n),g=s(t,n)/(l*m);if(g<.9999999999999999){const s=Math.acos(g),r=Math.sin(s),a=Math.sin(o*s),u=Math.sin((1-o)*s),h=(1-o)*l+o*m;{const s=h/r,o=s/m*a;c(A,t,s/l*u),c(B,n,o),i(f,A,B)}{const e=1/l*(-Math.cos((1-o)*s)*s*h+u*(-l+m));c(A,t,e);const f=1/m*(Math.cos(o*s)*s*h+a*(-l+m));c(B,n,f),i(M,A,B),c(M,M,1/r)}return M}return u(f,t,n,o),h(M,n,t),r(M,M),M}function v(n,a,c){n=r(A,n),a=r(B,a);const i=t(s(n,a));if(c){const t=o(z,n,a);if(s(t,c)<0)return-i}return i}function d(t){const n=t.length;return s=>{if(s<=t[0][0])return t[0][1];if(s>=t[n-1][0])return t[n-1][1];let r=1;for(;s>t[r][0];)r++;const o=t[r-1][0],a=t[r][0],c=(a-s)/(a-o);return c*t[r-1][1]+(1-c)*t[r][1]}}function k(t,n,a,c){h(w,n,t),h(y,a,t),o(c,w,y),r(c,c),c[3]=-s(t,c)}function U(t,s){if(n(s,0,0,0),t.length>0){for(let n=0;n<t.length;++n)i(s,s,t[n]);c(s,s,1/t.length)}}const w=e(),y=e(),z=e(),A=e(),B=e();export{v as angle,b as bilerp,f as cosCapped,M as fovx2fovy,l as fovy2fovx,p as makeOrthonormal,d as makePiecewiseLinearFunction,m as maxScale,U as midpoint3d,k as planeFromPoints,g as scaleFromMatrix,j as slerp,x as slerpTangent,q as tangentFrame};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{fromQuat as t,scale as a}from\"../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as e}from\"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{create as s}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as i,conjugate as r,multiply as n}from\"../../../core/libs/gl-matrix-2/math/quat.js\";import{IDENTITY as o,create as h}from\"../../../core/libs/gl-matrix-2/factories/quatf64.js\";import{i as c,w as d,x as _,y as l,z as m,q as f,g as u,A as g,a as p,l as M,h as b,b as j,B as S,C as z,D as x}from\"../../../chunks/vec32.js\";import{ZEROS as C,create as y,UNIT_Z as q,freeze as Q}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{t as w}from\"../../../chunks/vec42.js\";import{create as v}from\"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{getReferenceEllipsoid as P}from\"../../../geometry/ellipsoidUtils.js\";import{getSphericalPCPF as A}from\"../../../geometry/spatialReferenceEllipsoidUtils.js\";import{computeTranslationToOriginAndRotation as R}from\"../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectBuffer as H}from\"../../../geometry/projection/projectBuffer.js\";import{getProjector as B}from\"../../../geometry/projection/projectors.js\";import{getNormal as D}from\"../../../geometry/support/plane.js\";import{isPlateCarree as W}from\"../../../geometry/support/spatialReferenceUtils.js\";import{sv3d as k,sq4d as G}from\"../../../geometry/support/vectorStacks.js\";import{ViewingMode as U}from\"../../ViewingMode.js\";import{computeOBB as Z}from\"./dito.js\";import{Vertices as F}from\"../webgl-engine/lib/Attribute.js\";class I{constructor(t=C,a=gt,e=o){this._data=[t[0],t[1],t[2],a[0],a[1],a[2],e[0],e[1],e[2],e[3]]}clone(){const t=new I;return t._data=this._data.slice(),t}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(t){const a=new I;return a._data=t.slice(),a}static fromJSON(t){return new I(t.center,t.halfSize,t.quaternion)}copy(t){this._data=t.data.slice()}get center(){return c(k.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(t){return t[0]=this._data[0],t[1]=this._data[1],t[2]=this._data[2],t}set center(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2]}setCenter(t,a,e){this._data[0]=t,this._data[1]=a,this._data[2]=e}get halfSize(){return c(k.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(t){return t[0]=this._data[3],t[1]=this._data[4],t[2]=this._data[5],t}set halfSize(t){this._data[3]=t[0],this._data[4]=t[1],this._data[5]=t[2]}get quaternion(){return i(G.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(t){return t[0]=this._data[6],t[1]=this._data[7],t[2]=this._data[8],t[3]=this._data[9],t}set quaternion(t){this._data[6]=t[0],this._data[7]=t[1],this._data[8]=t[2],this._data[9]=t[3]}get data(){return this._data}getCorners(t){const a=O,e=this._data;a[0]=e[6],a[1]=e[7],a[2]=e[8],a[3]=e[9];for(let s=0;s<8;++s){const i=t[s];i[0]=(1&s?-1:1)*e[3],i[1]=(2&s?-1:1)*e[4],i[2]=(4&s?-1:1)*e[5],d(i,i,a),i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}}doesIntersectFrustumConservativeApproximation(t){return this.intersectPlane(t[0])<=0&&this.intersectPlane(t[1])<=0&&this.intersectPlane(t[2])<=0&&this.intersectPlane(t[3])<=0&&this.intersectPlane(t[4])<=0&&this.intersectPlane(t[5])<=0}get radius(){const t=this._data[3],a=this._data[4],e=this._data[5];return Math.sqrt(t*t+a*a+e*e)}intersectSphere(t){X[0]=this._data[0]-t[0],X[1]=this._data[1]-t[1],X[2]=this._data[2]-t[2];const a=this.getQuaternion(T);return r(O,a),d(X,X,O),_(X,X),Y[0]=Math.min(X[0],this._data[3]),Y[1]=Math.min(X[1],this._data[4]),Y[2]=Math.min(X[2],this._data[5]),l(Y,X)<t[3]*t[3]}intersectSphereWithMBS(t,a=this.radius){const e=this._data;X[0]=e[0]-t[0],X[1]=e[1]-t[1],X[2]=e[2]-t[2];const s=t[3],i=s+a;return!(m(X)>i*i)&&(O[0]=-e[6],O[1]=-e[7],O[2]=-e[8],O[3]=e[9],d(X,X,O),_(X,X),Y[0]=Math.min(X[0],e[3]),Y[1]=Math.min(X[1],e[4]),Y[2]=Math.min(X[2],e[5]),l(Y,X)<s*s)}intersectPlane(t){const a=t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3],e=this.projectedRadius(D(t));return a>e?1:a<-e?-1:0}intersectRay(t,a,e=0){const s=this._data,i=O;i[0]=-s[6],i[1]=-s[7],i[2]=-s[8],i[3]=s[9],X[0]=t[0]-s[0],X[1]=t[1]-s[1],X[2]=t[2]-s[2];const r=d(X,X,O),n=d(Y,a,O);let o=-1/0,h=1/0;const c=this.getHalfSize(ct);for(let d=0;d<3;d++){const t=r[d],a=n[d],s=c[d]+e;if(Math.abs(a)>1e-6){const e=(s-t)/a,i=(-s-t)/a;o=Math.max(o,Math.min(e,i)),h=Math.min(h,Math.max(e,i))}else if(t>s||t<-s)return!1}return o<=h}projectedArea(e,s,i,n){const o=this.getQuaternion(T);r(O,o),X[0]=e[0]-this._data[0],X[1]=e[1]-this._data[1],X[2]=e[2]-this._data[2],d(X,X,O);const h=this.getHalfSize(ct),_=X[0]<-h[0]?-1:X[0]>h[0]?1:0,l=X[1]<-h[1]?-1:X[1]>h[1]?1:0,m=X[2]<-h[2]?-1:X[2]>h[2]?1:0,g=Math.abs(_)+Math.abs(l)+Math.abs(m);if(0===g)return 1/0;const p=1===g?4:6,M=6*(_+3*l+9*m+13);t(dt,o),a(dt,dt,h);const b=this.getCenter(ot);for(let t=0;t<p;t++){const a=K[M+t];c(X,((1&a)<<1)-1,(2&a)-1,((4&a)>>1)-1),f(X,X,dt),u(E,b,X),E[3]=1,w(E,E,s);const e=1/Math.max(1e-6,E[3]);N[2*t]=E[0]*e,N[2*t+1]=E[1]*e}const j=2*p-2;let S=N[0]*(N[3]-N[j+1])+N[j]*(N[1]-N[j-1]);for(let t=2;t<j;t+=2)S+=N[t]*(N[t+3]-N[t-1]);return Math.abs(S)*i*n*.125}projectedRadius(t){const a=this.getQuaternion(T);return r(O,a),d(X,t,O),Math.abs(X[0]*this._data[3])+Math.abs(X[1]*this._data[4])+Math.abs(X[2]*this._data[5])}minimumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]-this.projectedRadius(D(t))}maximumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]+this.projectedRadius(D(t))}toAaBoundingBox(a){const e=this.getQuaternion(T),s=t(dt,e),i=this._data[3]*Math.abs(s[0])+this._data[4]*Math.abs(s[3])+this._data[5]*Math.abs(s[6]),r=this._data[3]*Math.abs(s[1])+this._data[4]*Math.abs(s[4])+this._data[5]*Math.abs(s[7]),n=this._data[3]*Math.abs(s[2])+this._data[4]*Math.abs(s[5])+this._data[5]*Math.abs(s[8]);a[0]=this._data[0]-i,a[1]=this._data[1]-r,a[2]=this._data[2]-n,a[3]=this._data[0]+i,a[4]=this._data[1]+r,a[5]=this._data[2]+n}transform(t,a,e,s=0,i=A(e),r=A(a),n=B(a,r)){if(e===i)a.isGeographic?st(this,t,a,s,r):et(this,t,a,s,r,n);else if(a.isWGS84&&(e.isWebMercator||W(e)))$(a,this,e,t,s);else if(a.isWebMercator&&W(e))tt(a,this,e,t,s);else{const i=this.getCenter(ot);i[2]+=s,H(i,a,0,i,e,0),t.center=i,this!==t&&(t.quaternion=this.getQuaternion(T),t.halfSize=this.getHalfSize(ct))}}}const O=h(),T=h(),V=h(),X=y(),Y=y(),E=v();function J(t,a=new I){return Z(t,a),a}const N=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],K=(()=>{const t=new Int8Array(162);let a=0;const e=e=>{for(let s=0;s<e.length;s++)t[a+s]=e[s];a+=6};return e([6,2,3,1,5,4]),e([0,2,3,1,5,4]),e([0,2,3,7,5,4]),e([0,1,3,2,6,4]),e([0,1,3,2,0,0]),e([0,1,5,7,3,2]),e([0,1,3,7,6,4]),e([0,1,3,7,6,2]),e([0,1,5,7,6,2]),e([0,1,5,4,6,2]),e([0,1,5,4,0,0]),e([0,1,3,7,5,4]),e([0,2,6,4,0,0]),e([0,0,0,0,0,0]),e([1,3,7,5,0,0]),e([2,3,7,6,4,0]),e([2,3,7,6,0,0]),e([2,3,1,5,7,6]),e([0,1,5,7,6,2]),e([0,1,5,7,6,4]),e([0,1,3,7,6,4]),e([4,5,7,6,2,0]),e([4,5,7,6,0,0]),e([4,5,1,3,7,6]),e([0,2,3,7,5,4]),e([6,2,3,7,5,4]),e([6,2,3,1,5,4]),t})();function L(t,a,e,s,i){const n=t.getQuaternion(T);i.quaternion=n,r(O,n);const o=t.getCenter(ot),h=t.getHalfSize(ct);if(s===U.Global){d(mt,o,O),_(ft,mt),g(ut,ft,h),p(ut,ft,ut);const s=M(ut);u(ut,ft,h);const r=M(ut);if(s<e)i.center=o,c(mt,e,e,e),i.halfSize=u(mt,h,mt);else{const n=r>0?1+a/r:1,o=s>0?1+e/s:1,c=(o+n)/2,_=(o-n)/2;b(ut,ft,_),i.halfSize=j(ut,ut,h,c),b(ut,ft,c),j(ut,ut,h,_),S(mt,mt),z(mt,ut,mt);const l=t.getQuaternion(V);i.center=d(mt,mt,l)}}else{i.center=j(mt,o,q,(e+a)/2);const t=d(mt,q,O);_(t,t),i.halfSize=j(ft,h,t,(e-a)/2)}return i}function $(t,a,e,s,i){a.getCenter(ot),ot[2]+=i;const r=A(e);H(ot,t,0,ot,r,0),at(r,a,ot,e,s)}function tt(t,a,e,s,i){a.getCenter(ot),ot[2]+=i,at(t,a,ot,e,s)}function at(a,e,s,i,r){const n=e.getQuaternion(T),o=t(dt,n),h=e.getHalfSize(ct);for(let t=0;t<8;++t){for(let a=0;a<3;++a)nt[a]=h[a]*(t&1<<a?-1:1);for(let a=0;a<3;++a){let e=s[a];for(let t=0;t<3;++t)e+=nt[t]*o[3*t+a];it[3*t+a]=e}}H(it,a,0,it,i,0,8),J(rt,r)}function et(t,a,e,s,i=A(e),o=B(e,i)){t.getCorners(lt),t.getCenter(nt),nt[2]+=s,R(e,nt,_t,i),a.setCenter(_t[12],_t[13],_t[14]);const h=2*Math.sqrt(1+_t[0]+_t[5]+_t[10]);O[0]=(_t[6]-_t[9])/h,O[1]=(_t[8]-_t[2])/h,O[2]=(_t[1]-_t[4])/h,O[3]=.25*h;const l=t.getQuaternion(T);a.quaternion=n(O,O,l),r(O,O),c(ft,0,0,0);const m=a.getCenter(ht);for(const r of lt)r[2]+=s,o(r,0,r,0),p(mt,r,m),d(mt,mt,O),_(mt,mt),x(ft,ft,mt);a.halfSize=ft}function st(t,a,e,s,i=A(e)){const n=P(e),o=1+Math.max(0,s)/(n.radius+t.centerZ);t.getCenter(nt),nt[2]+=s,H(nt,e,0,nt,i,0),a.center=nt;const h=t.getQuaternion(T);a.quaternion=h,r(O,h),c(mt,0,0,1),d(mt,mt,O);const _=t.getHalfSize(ct);c(mt,_[0]*Math.abs(mt[0]),_[1]*Math.abs(mt[1]),_[2]*Math.abs(mt[2])),b(mt,mt,n.inverseFlattening),u(mt,_,mt),a.halfSize=b(mt,mt,o)}const it=new Array(24),rt=new F(it,3),nt=y(),ot=y(),ht=y(),ct=y(),dt=e(),_t=s(),lt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],mt=y(),ft=y(),ut=y(),gt=Q(-1,-1,-1);export{I as Obb,J as compute,L as computeOffsetObb};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ColorMixModeEnum as o}from\"../../../../../layers/support/symbolColorUtils.js\";import{glsl as l}from\"../../../../core/shaderModules/interfaces.js\";function e(e){e.vertex.code.add(l`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${l.int(o.Multiply)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${l.int(o.Replace)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${l.int(o.Tint)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${l.int(o.Multiply)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{e as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"./ShaderOutput.js\";import{VertexPosition as a}from\"./attributes/VertexPosition.glsl.js\";import{Float2PassUniform as r}from\"../shaderModules/Float2PassUniform.js\";import{glsl as o}from\"../shaderModules/interfaces.js\";function t(e){e.varyings.add(\"linearDepth\",\"float\")}function i(e){e.vertex.uniforms.add(new r(\"nearFar\",((e,a)=>a.camera.nearFar)))}function d(e){e.vertex.code.add(o`float calculateLinearDepth(vec2 nearFar,float z) {\nreturn (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);\n}`)}function n(r,n){const{vertex:s}=r;switch(n.output){case e.Color:case e.ColorEmission:if(n.receiveShadows)return t(r),void s.code.add(o`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case e.Shadow:case e.ShadowHighlight:case e.ShadowExcludeHighlight:case e.ViewshedShadow:return r.include(a,n),t(r),i(r),d(r),void s.code.add(o`void forwardLinearDepth() {\nlinearDepth = calculateLinearDepth(nearFar, vPosition_view.z);\n}`)}s.code.add(o`void forwardLinearDepth() {}`)}export{n as ForwardLinearDepth,d as addCalculateLinearDepth,t as addLinearDepth,i as addNearFar};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../shaderModules/interfaces.js\";import{VertexAttribute as e}from\"../../lib/VertexAttribute.js\";function i(i,o=!0){i.attributes.add(e.POSITION,\"vec2\"),o&&i.varyings.add(\"uv\",\"vec2\"),i.vertex.main.add(t`\n      gl_Position = vec4(position, 0.0, 1.0);\n      ${o?t`uv = position * 0.5 + vec2(0.5);`:\"\"}\n  `)}export{i as ScreenSpacePass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar n;function o(o){return o===n.Shadow||o===n.ShadowHighlight||o===n.ShadowExcludeHighlight||o===n.ViewshedShadow}function r(o){return f(o)||o===n.Normal}function t(o){return w(o)||o===n.Normal}function i(o){return o===n.Highlight||o===n.ObjectAndLayerIdColor}function h(n){return e(n)||i(n)}function e(o){return o===n.Color}function u(n){return e(n)||S(n)}function l(o){return e(o)||o===n.ObjectAndLayerIdColor}function d(o){return e(o)||o===n.Highlight}function c(n){return d(n)||C(n)}function a(n){return e(n)||i(n)}function g(n){return u(n)||i(n)}function f(n){return a(n)||C(n)}function w(n){return g(n)||C(n)}function C(o){return o===n.Depth}function S(o){return o===n.ColorEmission}!function(n){n[n.Color=0]=\"Color\",n[n.ColorEmission=1]=\"ColorEmission\",n[n.Depth=2]=\"Depth\",n[n.Normal=3]=\"Normal\",n[n.Shadow=4]=\"Shadow\",n[n.ShadowHighlight=5]=\"ShadowHighlight\",n[n.ShadowExcludeHighlight=6]=\"ShadowExcludeHighlight\",n[n.ViewshedShadow=7]=\"ViewshedShadow\",n[n.Highlight=8]=\"Highlight\",n[n.ObjectAndLayerIdColor=9]=\"ObjectAndLayerIdColor\",n[n.COUNT=10]=\"COUNT\"}(n||(n={}));export{n as ShaderOutput,h as is2DGeometryOutput,r as is3DGeometryOutput,t as is3DGeometryOutputMRT,e as isColor,S as isColorEmission,w as isColorEmissionHighlightOIDOrDepth,g as isColorEmissionHighlightOrOID,f as isColorHighlightOIDOrDepth,c as isColorHighlightOrDepth,a as isColorHighlightOrOID,u as isColorOrColorEmission,d as isColorOrHighlight,l as isColorOrOID,C as isDepth,i as isHighlightOrOID,o as isShadowRelatedOutput};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{translate as e}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as s}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as i,g as a,d as l,i as o}from\"../../../../../chunks/vec32.js\";import{ZEROS as c,create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Float3DrawUniform as t}from\"../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as n}from\"../shaderModules/Float3PassUniform.js\";import{NoParameters as f,glsl as d}from\"../shaderModules/interfaces.js\";class u extends f{constructor(e){super(),this.slicePlaneLocalOrigin=e}}function _(e,s){m(e,s,new n(\"slicePlaneOrigin\",((e,i)=>g(s,e,i))),new n(\"slicePlaneBasis1\",((e,i)=>I(s,e,i,i.slicePlane?.basis1))),new n(\"slicePlaneBasis2\",((e,i)=>I(s,e,i,i.slicePlane?.basis2))))}function P(e,s){m(e,s,new t(\"slicePlaneOrigin\",((e,i)=>g(s,e,i))),new t(\"slicePlaneBasis1\",((e,i)=>I(s,e,i,i.slicePlane?.basis1))),new t(\"slicePlaneBasis2\",((e,i)=>I(s,e,i,i.slicePlane?.basis2))))}function m(e,s,...i){if(!s.hasSlicePlane){const i=d`#define rejectBySlice(_pos_) false\n#define discardBySlice(_pos_) {}\n#define highlightSlice(_color_, _pos_) (_color_)`;return s.hasSliceInVertexProgram&&e.vertex.code.add(i),void e.fragment.code.add(i)}const a=d`struct SliceFactors {\nfloat front;\nfloat side0;\nfloat side1;\nfloat side2;\nfloat side3;\n};\nSliceFactors calculateSliceFactors(vec3 pos) {\nvec3 rel = pos - slicePlaneOrigin;\nvec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);\nfloat slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);\nfloat basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);\nfloat basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);\nfloat basis1Dot = dot(slicePlaneBasis1, rel);\nfloat basis2Dot = dot(slicePlaneBasis2, rel);\nreturn SliceFactors(\ndot(slicePlaneNormal, pos) + slicePlaneW,\n-basis1Dot - basis1Len2,\nbasis1Dot - basis1Len2,\n-basis2Dot - basis2Len2,\nbasis2Dot - basis2Len2\n);\n}\nbool sliceByFactors(SliceFactors factors) {\nreturn factors.front < 0.0\n&& factors.side0 < 0.0\n&& factors.side1 < 0.0\n&& factors.side2 < 0.0\n&& factors.side3 < 0.0;\n}\nbool sliceEnabled() {\nreturn dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;\n}\nbool sliceByPlane(vec3 pos) {\nreturn sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));\n}\n#define rejectBySlice(_pos_) sliceByPlane(_pos_)\n#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,l=d`vec4 applySliceHighlight(vec4 color, vec3 pos) {\nSliceFactors factors = calculateSliceFactors(pos);\nconst float HIGHLIGHT_WIDTH = 1.0;\nconst vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);\nfactors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);\nfactors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);\nfactors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);\nfactors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);\nfactors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);\nif (sliceByFactors(factors)) {\nreturn color;\n}\nfloat highlightFactor = (1.0 - step(0.5, factors.front))\n* (1.0 - step(0.5, factors.side0))\n* (1.0 - step(0.5, factors.side1))\n* (1.0 - step(0.5, factors.side2))\n* (1.0 - step(0.5, factors.side3));\nreturn mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);\n}`,o=s.hasSliceHighlight?d`\n        ${l}\n        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))\n      `:d`#define highlightSlice(_color_, _pos_) (_color_)`;s.hasSliceInVertexProgram&&e.vertex.uniforms.add(...i).code.add(a),e.fragment.uniforms.add(...i).code.add(a),e.fragment.code.add(o)}function p(e,s,i){return e.instancedDoublePrecision?o(b,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]):s.slicePlaneLocalOrigin}function h(e,s){return null!=e?l(B,s.origin,e):s.origin}function H(s,i,a){return s.hasSliceTranslatedView?null!=i?e(S,a.camera.viewMatrix,i):a.camera.viewMatrix:null}function g(e,s,a){if(null==a.slicePlane)return c;const l=p(e,s,a),o=h(l,a.slicePlane),r=H(e,l,a);return null!=r?i(B,o,r):o}function I(e,s,o,r){if(null==r||null==o.slicePlane)return c;const t=p(e,s,o),n=h(t,o.slicePlane),f=H(e,t,o);return null!=f?(a(v,r,n),i(B,n,f),i(v,v,f),l(v,v,B)):r}const b=r(),B=r(),v=r(),S=s();export{P as SliceDraw,_ as SlicePass,u as SlicePlaneParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{addCalculateLinearDepth as e}from\"./ForwardLinearDepth.glsl.js\";import{glsl as r}from\"../shaderModules/interfaces.js\";function o(o){e(o),o.vertex.code.add(r`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {\nvec4 eye = view * vec4(pos, 1.0);\ndepth = calculateLinearDepth(nearFar,eye.z);\nreturn proj * eye;\n}`),o.vertex.code.add(r`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {\nreturn proj * (view * vec4(pos, 1.0));\n}`)}export{o as Transform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../../../chunks/tslib.es6.js\";import{ShaderTechniqueConfiguration as s,parameter as e}from\"../../shaderTechnique/ShaderTechniqueConfiguration.js\";class i extends s{constructor(){super(...arguments),this.instancedDoublePrecision=!1,this.hasModelTransformation=!1}}o([e()],i.prototype,\"instancedDoublePrecision\",void 0),o([e()],i.prototype,\"hasModelTransformation\",void 0);export{i as InstancedDoubleConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{normalFromMat4 as e}from\"../../../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{IDENTITY as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as a}from\"../../../../../../chunks/vec32.js\";import{create as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ShaderOutput as i}from\"../ShaderOutput.js\";import{DoublePrecision as t}from\"../util/DoublePrecision.glsl.js\";import{addViewNormal as s}from\"../util/View.glsl.js\";import{Float3DrawUniform as l}from\"../../shaderModules/Float3DrawUniform.js\";import{NoParameters as m,glsl as c}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as d}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as u}from\"../../shaderModules/Matrix4PassUniform.js\";import{VertexAttribute as v}from\"../../../lib/VertexAttribute.js\";import{encodeDoubleHi as g,encodeDoubleLo as p}from\"../../../../../webgl/doublePrecisionUtils.js\";class x extends m{constructor(){super(...arguments),this.modelTransformation=null}}const f=r();function M(r,n){const m=n.hasModelTransformation,x=n.instancedDoublePrecision;m&&(r.vertex.uniforms.add(new u(\"model\",(e=>e.modelTransformation??o))),r.vertex.uniforms.add(new d(\"normalLocalOriginFromModel\",(r=>(e(f,r.modelTransformation??o),f))))),n.instanced&&x&&(r.attributes.add(v.INSTANCEMODELORIGINHI,\"vec3\"),r.attributes.add(v.INSTANCEMODELORIGINLO,\"vec3\"),r.attributes.add(v.INSTANCEMODEL,\"mat3\"),r.attributes.add(v.INSTANCEMODELNORMAL,\"mat3\"));const M=r.vertex;x&&(M.include(t,n),M.uniforms.add(new l(\"viewOriginHi\",((e,r)=>g(a(O,r.camera.viewInverseTransposeMatrix[3],r.camera.viewInverseTransposeMatrix[7],r.camera.viewInverseTransposeMatrix[11]),O))),new l(\"viewOriginLo\",((e,r)=>p(a(O,r.camera.viewInverseTransposeMatrix[3],r.camera.viewInverseTransposeMatrix[7],r.camera.viewInverseTransposeMatrix[11]),O))))),M.code.add(c`\n    vec3 getVertexInLocalOriginSpace() {\n      return ${m?x?\"(model * vec4(instanceModel * localPosition().xyz, 1.0)).xyz\":\"(model * localPosition()).xyz\":x?\"instanceModel * localPosition().xyz\":\"localPosition().xyz\"};\n    }\n\n    vec3 subtractOrigin(vec3 _pos) {\n      ${x?c`\n          // Negated inputs are intentionally the first two arguments. The other way around the obfuscation in dpAdd() stopped\n          // working for macOS 14+ and iOS 17+.\n          // Issue: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/56280\n          vec3 originDelta = dpAdd(-instanceModelOriginHi, -instanceModelOriginLo, viewOriginHi, viewOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `),M.code.add(c`\n    vec3 dpNormal(vec4 _normal) {\n      return normalize(${m?x?\"normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz)\":\"normalLocalOriginFromModel * _normal.xyz\":x?\"instanceModelNormal * _normal.xyz\":\"_normal.xyz\"});\n    }\n    `),n.output===i.Normal&&(s(M),M.code.add(c`\n    vec3 dpNormalView(vec4 _normal) {\n      return normalize((viewNormal * ${m?x?\"vec4(normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz), 1.0)\":\"vec4(normalLocalOriginFromModel * _normal.xyz, 1.0)\":x?\"vec4(instanceModelNormal * _normal.xyz, 1.0)\":\"_normal\"}).xyz);\n    }\n    `)),n.hasVertexTangents&&M.code.add(c`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${m?x?\"return vec4(normalLocalOriginFromModel * (instanceModelNormal * _tangent.xyz), _tangent.w);\":\"return vec4(normalLocalOriginFromModel * _tangent.xyz, _tangent.w);\":x?\"return vec4(instanceModelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n    }`)}const O=n();export{x as InstancedDoublePassParameters,M as InstancedDoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../../../core/compilerUtils.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as o}from\"../../../lib/VertexAttribute.js\";function t(t,i){switch(i.normalType){case a.Compressed:t.attributes.add(o.NORMALCOMPRESSED,\"vec2\"),t.vertex.code.add(r`vec3 decompressNormal(vec2 normal) {\nfloat z = 1.0 - abs(normal.x) - abs(normal.y);\nreturn vec3(normal + sign(normal) * min(z, 0.0), z);\n}\nvec3 normalModel() {\nreturn decompressNormal(normalCompressed);\n}`);break;case a.Attribute:t.attributes.add(o.NORMAL,\"vec3\"),t.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`);break;case a.ScreenDerivative:t.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`);break;default:e(i.normalType);case a.COUNT:}}var a;!function(e){e[e.Attribute=0]=\"Attribute\",e[e.Compressed=1]=\"Compressed\",e[e.ScreenDerivative=2]=\"ScreenDerivative\",e[e.COUNT=3]=\"COUNT\"}(a||(a={}));export{t as NormalAttribute,a as NormalType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as o}from\"../ShaderOutput.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as d}from\"../../../lib/VertexAttribute.js\";function e(e,t){if(t.output!==o.ObjectAndLayerIdColor)return e.vertex.code.add(r`void forwardObjectAndLayerIdColor() {}`),void e.fragment.code.add(r`void outputObjectAndLayerIdColor() {}`);const a=t.objectAndLayerIdColorInstanced;e.varyings.add(\"objectAndLayerIdColorVarying\",\"vec4\"),e.attributes.add(a?d.INSTANCEOBJECTANDLAYERIDCOLOR:d.OBJECTANDLAYERIDCOLOR,\"vec4\"),e.vertex.code.add(r`\n    void forwardObjectAndLayerIdColor() {\n      objectAndLayerIdColorVarying = ${a?\"instanceObjectAndLayerIdColor\":\"objectAndLayerIdColor\"} * 0.003921568627451;\n    }`),e.fragment.code.add(r`void outputObjectAndLayerIdColor() {\nfragColor = objectAndLayerIdColorVarying;\n}`)}export{e as ObjectAndLayerIdColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as t}from\"../../../lib/VertexAttribute.js\";function o(o){o.attributes.add(t.POSITION,\"vec3\"),o.vertex.code.add(e`vec3 positionModel() { return position; }`)}export{o as PositionAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{IntegerPassUniform as r}from\"../../shaderModules/IntegerPassUniform.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as l}from\"../../../lib/VertexAttribute.js\";import{colorMixModes as d}from\"../../../materials/internal/MaterialUtil.js\";function i(i,t){t.hasSymbolColors?(i.include(o),i.attributes.add(l.SYMBOLCOLOR,\"vec4\"),i.varyings.add(\"colorMixMode\",\"mediump float\"),i.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`)):(i.fragment.uniforms.add(new r(\"colorMixMode\",(o=>d[o.colorMixMode]))),i.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`))}export{i as SymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../../../core/compilerUtils.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as t}from\"../../../lib/VertexAttribute.js\";var d;function o(o,v){switch(v.textureCoordinateType){case d.Default:return o.attributes.add(t.UV0,\"vec2\"),o.varyings.add(\"vuv0\",\"vec2\"),void o.vertex.code.add(r`void forwardTextureCoordinates() {\nvuv0 = uv0;\n}`);case d.Compressed:return o.attributes.add(t.UV0,\"vec2\"),o.varyings.add(\"vuv0\",\"vec2\"),void o.vertex.code.add(r`vec2 getUV0() {\nreturn uv0 / 16384.0;\n}\nvoid forwardTextureCoordinates() {\nvuv0 = getUV0();\n}`);case d.Atlas:return o.attributes.add(t.UV0,\"vec2\"),o.varyings.add(\"vuv0\",\"vec2\"),o.attributes.add(t.UVREGION,\"vec4\"),o.varyings.add(\"vuvRegion\",\"vec4\"),void o.vertex.code.add(r`void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}`);default:e(v.textureCoordinateType);case d.None:return void o.vertex.code.add(r`void forwardTextureCoordinates() {}`);case d.COUNT:return}}!function(e){e[e.None=0]=\"None\",e[e.Default=1]=\"Default\",e[e.Atlas=2]=\"Atlas\",e[e.Compressed=3]=\"Compressed\",e[e.COUNT=4]=\"COUNT\"}(d||(d={}));export{o as TextureCoordinateAttribute,d as TextureCoordinateType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as r}from\"../../../lib/VertexAttribute.js\";function e(e,d){d.hasVertexColors?(e.attributes.add(r.COLOR,\"vec4\"),e.varyings.add(\"vColor\",\"vec4\"),e.vertex.code.add(o`void forwardVertexColor() { vColor = color; }`),e.vertex.code.add(o`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):e.vertex.code.add(o`void forwardVertexColor() {}\nvoid forwardNormalizedVertexColor() {}`)}export{e as VertexColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{neverReached as r}from\"../../../../../../core/compilerUtils.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{create as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{NormalType as e,NormalAttribute as l}from\"./NormalAttribute.glsl.js\";import{VertexPositionPassParameters as m,VertexPositionDrawParameters as s}from\"./VertexPosition.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";import{Matrix3DrawUniform as i}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as d}from\"../../shaderModules/Matrix3PassUniform.js\";function c(o,a){switch(a.normalType){case e.Attribute:case e.Compressed:o.include(l,a),o.varyings.add(\"vNormalWorld\",\"vec3\"),o.varyings.add(\"vNormalView\",\"vec3\"),o.vertex.uniforms.add(new i(\"transformNormalGlobalFromModel\",(r=>r.transformNormalGlobalFromModel)),new d(\"transformNormalViewFromGlobal\",(r=>r.transformNormalViewFromGlobal))),o.vertex.code.add(t`void forwardNormal() {\nvNormalWorld = transformNormalGlobalFromModel * normalModel();\nvNormalView = transformNormalViewFromGlobal * vNormalWorld;\n}`);break;case e.ScreenDerivative:o.vertex.code.add(t`void forwardNormal() {}`);break;default:r(a.normalType);case e.COUNT:}}class f extends m{constructor(){super(...arguments),this.transformNormalViewFromGlobal=o()}}class n extends s{constructor(){super(...arguments),this.transformNormalGlobalFromModel=o(),this.toMapSpace=a()}}export{c as VertexNormal,n as VertexNormalDrawParameters,f as VertexNormalPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{PositionAttribute as t}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as i}from\"../util/DoublePrecision.glsl.js\";import{Float3DrawUniform as a}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as m}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as s,NoParameters as d}from\"../../shaderModules/interfaces.js\";import{Matrix3DrawUniform as l}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as n}from\"../../shaderModules/Matrix3PassUniform.js\";import{Matrix4PassUniform as f}from\"../../shaderModules/Matrix4PassUniform.js\";function v(r,o){r.include(t);const e=r.vertex;e.include(i,o),r.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),r.varyings.add(\"vPosition_view\",\"vec3\"),e.uniforms.add(new m(\"transformWorldFromViewTH\",(r=>r.transformWorldFromViewTH)),new m(\"transformWorldFromViewTL\",(r=>r.transformWorldFromViewTL)),new n(\"transformViewFromCameraRelativeRS\",(r=>r.transformViewFromCameraRelativeRS)),new f(\"transformProjFromView\",(r=>r.transformProjFromView)),new l(\"transformWorldFromModelRS\",(r=>r.transformWorldFromModelRS)),new a(\"transformWorldFromModelTH\",(r=>r.transformWorldFromModelTH)),new a(\"transformWorldFromModelTL\",(r=>r.transformWorldFromModelTL))),e.code.add(s`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\ntransformWorldFromModelTL,\ntransformWorldFromModelTH,\n-transformWorldFromViewTL,\n-transformWorldFromViewTH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}`),e.code.add(s`\n    void forwardPosition(float fOffset) {\n      vPositionWorldCameraRelative = positionWorldCameraRelative();\n      if (fOffset != 0.0) {\n        vPositionWorldCameraRelative += fOffset * ${o.spherical?s`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:s`vec3(0.0, 0.0, 1.0)`};\n      }\n\n      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;\n      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);\n    }\n  `),r.fragment.uniforms.add(new m(\"transformWorldFromViewTL\",(r=>r.transformWorldFromViewTL))),e.code.add(s`vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}`),r.fragment.code.add(s`vec3 positionWorld() {\nreturn transformWorldFromViewTL + vPositionWorldCameraRelative;\n}`)}class F extends d{constructor(){super(...arguments),this.transformWorldFromViewTH=e(),this.transformWorldFromViewTL=e(),this.transformViewFromCameraRelativeRS=r(),this.transformProjFromView=o()}}class W extends d{constructor(){super(...arguments),this.transformWorldFromModelRS=r(),this.transformWorldFromModelTH=e(),this.transformWorldFromModelTL=e()}}export{v as VertexPosition,W as VertexPositionDrawParameters,F as VertexPositionPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{TextureCoordinateType as e,TextureCoordinateAttribute as t}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as o}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function u(u,n){const{textureCoordinateType:s}=n;if(s===e.None||s===e.COUNT)return;u.include(t,n);const i=s===e.Atlas;i&&u.include(o),u.fragment.code.add(r`\n    vec4 textureLookup(sampler2D tex, vec2 uv) {\n      return ${i?\"textureAtlasLookup(tex, uv, vuvRegion)\":\"texture(tex, uv)\"};\n    }\n  `)}export{u as VertexTextureCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../../../chunks/vec42.js\";import{create as r}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{ScreenSizePerspective as t,addScreenSizePerspectiveAlignment as l}from\"../util/ScreenSizePerspective.glsl.js\";import{addCameraPosition as o}from\"../util/View.glsl.js\";import{Float4PassUniform as c}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as i}from\"../../shaderModules/interfaces.js\";function a(e,r){const c=e.vertex;r.hasVerticalOffset?(f(c),r.hasScreenSizePerspective&&(e.include(t),l(c),o(e.vertex,r)),c.code.add(i`\n      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n        ${r.spherical?i`vec3 worldNormal = normalize(worldPos + localOrigin);`:i`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}\n        ${r.hasScreenSizePerspective?i`\n            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));\n            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:i`\n            float verticalOffsetScreenHeight = verticalOffset.x;`}\n        // Screen sized offset in world space, used for example for line callouts\n        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n        return worldNormal * worldOffset;\n      }\n\n      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n        return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n      }\n    `)):c.code.add(i`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const s=r();function f(r){r.uniforms.add(new c(\"verticalOffset\",((r,t)=>{const{minWorldLength:l,maxWorldLength:o,screenLength:c}=r.verticalOffset,i=Math.tan(.5*t.camera.fovY)/(.5*t.camera.fullViewport[3]),a=t.camera.pixelRatio||1;return e(s,c*a,i,l,o)})))}export{a as VerticalOffset,f as addVerticalOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{addNearFar as e}from\"../ForwardLinearDepth.glsl.js\";import{ShaderOutput as o}from\"../ShaderOutput.js\";import{SliceDraw as r}from\"../Slice.glsl.js\";import{Transform as t}from\"../Transform.glsl.js\";import{NormalAttribute as i,NormalType as a}from\"../attributes/NormalAttribute.glsl.js\";import{ObjectAndLayerIdColor as s}from\"../attributes/ObjectAndLayerIdColor.glsl.js\";import{TextureCoordinateAttribute as l}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as d}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as n}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as c}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as u}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as p}from\"../util/DiscardOrAdjustAlpha.glsl.js\";import{addProjViewLocalOrigin as m}from\"../util/View.glsl.js\";import{glsl as v,If as g}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as f}from\"../../shaderModules/Texture2DPassUniform.js\";import{AlphaDiscardMode as x}from\"../../../lib/basicInterfaces.js\";function h(h,O){const{vertex:j,fragment:w}=h,b=O.hasColorTexture&&O.alphaDiscardMode!==x.Opaque,{output:C,normalType:V,hasColorTextureTransform:A}=O;switch(C){case o.Depth:m(j,O),h.include(t,O),h.include(r,O),h.include(l,O),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`),h.include(p,O),w.main.add(v`\n          discardBySlice(vpos);\n          ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                 discardOrAdjustAlpha(texColor);`)}`);break;case o.Shadow:case o.ShadowHighlight:case o.ShadowExcludeHighlight:case o.ViewshedShadow:case o.ObjectAndLayerIdColor:m(j,O),h.include(t,O),h.include(l,O),h.include(u,O),h.include(n,O),h.include(r,O),h.include(s,O),e(h),h.varyings.add(\"depth\",\"float\"),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);\nforwardTextureCoordinates();\nforwardObjectAndLayerIdColor();`),h.include(p,O),w.main.add(v`\n          discardBySlice(vpos);\n          ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                 discardOrAdjustAlpha(texColor);`)}\n          ${C===o.ObjectAndLayerIdColor?v`outputObjectAndLayerIdColor();`:v`outputDepth(depth);`}`);break;case o.Normal:{m(j,O),h.include(t,O),h.include(i,O),h.include(d,O),h.include(l,O),h.include(u,O),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),V===a.ScreenDerivative&&h.varyings.add(\"vPositionView\",\"vec3\");const e=V===a.Attribute||V===a.Compressed;j.main.add(v`\n          vpos = getVertexInLocalOriginSpace();\n          ${e?v`vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:v`vPositionView = (view * vec4(vpos, 1.0)).xyz;`}\n          vpos = subtractOrigin(vpos);\n          vpos = addVerticalOffset(vpos, localOrigin);\n          gl_Position = transformPosition(proj, view, vpos);\n          forwardTextureCoordinates();`),h.include(r,O),h.include(p,O),w.main.add(v`\n          discardBySlice(vpos);\n          ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                 discardOrAdjustAlpha(texColor);`)}\n\n          ${V===a.ScreenDerivative?v`vec3 normal = screenDerivativeNormal(vPositionView);`:v`vec3 normal = normalize(vNormalWorld);\n                     if (gl_FrontFacing == false){\n                       normal = -normal;\n                     }`}\n          fragColor = vec4(0.5 + 0.5 * normal, 1.0);`);break}case o.Highlight:m(j,O),h.include(t,O),h.include(l,O),h.include(u,O),b&&w.uniforms.add(new f(\"tex\",(e=>e.texture))),j.main.add(v`vpos = getVertexInLocalOriginSpace();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();`),h.include(r,O),h.include(p,O),h.include(c,O),w.main.add(v`\n          discardBySlice(vpos);\n          ${g(b,v`vec4 texColor = texture(tex, ${A?\"colorUV\":\"vuv0\"});\n                 discardOrAdjustAlpha(texColor);`)}\n          calculateOcclusionAndOutputHighlight();`)}}export{h as DefaultMaterialAuxiliaryPasses};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isColorOrColorEmission as e}from\"../ShaderOutput.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{Float3DrawUniform as i}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as r}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as o,If as t}from\"../../shaderModules/interfaces.js\";import{Texture2DDrawUniform as m}from\"../../shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as n}from\"../../shaderModules/Texture2DPassUniform.js\";import{BindType as a}from\"../../shaderTechnique/BindType.js\";import{GLEmissiveTexturePassParameters as u}from\"../../../lib/GLTextureMaterial.js\";var d;!function(e){e[e.None=0]=\"None\",e[e.Value=1]=\"Value\",e[e.Texture=2]=\"Texture\",e[e.COUNT=3]=\"COUNT\"}(d||(d={}));class f extends u{}function c(u,f){if(!e(f.output))return;const{emissionSource:c,hasEmissiveTextureTransform:x,bindType:l}=f,p=c===d.Texture;p&&(u.include(s,f),u.fragment.uniforms.add(l===a.Pass?new n(\"texEmission\",(e=>e.textureEmissive)):new m(\"texEmission\",(e=>e.textureEmissive))));const v=c===d.Value||p;v&&u.fragment.uniforms.add(l===a.Pass?new r(\"emissionFactor\",(e=>e.emissiveFactor)):new i(\"emissionFactor\",(e=>e.emissiveFactor))),u.fragment.code.add(o`\n    vec4 getEmissions() {\n      vec4 emissions = ${v?\"vec4(emissionFactor, 1.0)\":\"vec4(0.0)\"};\n      ${t(p,`emissions *= textureLookup(texEmission, ${x?\"emissiveUV\":\"vuv0\"});\\n         emissions.w = emissions.rgb == vec3(0.0) ? 0.0: emissions.w;`)};\n      return emissions;\n    }\n  `)}export{d as EmissionSource,c as Emissions,f as EmissionsParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as t}from\"../ShaderOutput.js\";import{Rgba4FloatEncoding as a}from\"../util/RgbaFloat16Encoding.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";function e(e,d){switch(d.output){case t.Shadow:case t.ShadowHighlight:case t.ShadowExcludeHighlight:case t.ViewshedShadow:e.fragment.include(a),e.fragment.code.add(o`float _calculateFragDepth(const in float depth) {\nconst float SLOPE_SCALE = 2.0;\nconst float BIAS = 20.0 * .000015259;\nfloat m = max(abs(dFdx(depth)), abs(dFdy(depth)));\nreturn depth + SLOPE_SCALE * m + BIAS;\n}\nvoid outputDepth(float _linearDepth) {\nfragColor = floatToRgba4(_calculateFragDepth(_linearDepth));\n}`)}}export{e as OutputDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as i}from\"../ShaderOutput.js\";import{Integer2PassUniform as e}from\"../../shaderModules/Integer2PassUniform.js\";import{IntegerPassUniform as t}from\"../../shaderModules/IntegerPassUniform.js\";import{glsl as h}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as l}from\"../../shaderModules/Texture2DPassUniform.js\";function g(g,d){const{fragment:c}=g;d.output===i.Highlight?(c.uniforms.add(new l(\"depthTexture\",((i,e)=>e.mainDepth)),new l(\"highlightTexture\",((i,e)=>e.highlightMixTexture)),new t(\"highlightLevel\",((i,e)=>e.highlightLevel)),new e(\"highlightMixOrigin\",((i,e)=>e.highlightMixOrigin))),g.outputs.add(\"fragHighlight\",\"vec2\",0),c.code.add(h`vec2 getAccumulatedHighlight() {\nreturn texelFetch(highlightTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;\n}\nvoid outputHighlight(bool occluded) {\nif (highlightLevel == 0) {\nuint bits = occluded ? 3u : 1u;\nfragHighlight = vec2(float(bits) / 255.0, 0.0);\n} else {\nint ll = (highlightLevel & 3) << 1;\nint li = (highlightLevel >> 2) & 3;\nuint bits;\nif (occluded) {\nbits = 3u << ll;\n} else {\nbits = 1u << ll;\n}\nvec2 combinedHighlight = getAccumulatedHighlight();\nuint accumulatedI = uint(combinedHighlight[li] * 255.0);\ncombinedHighlight[li] = float(bits | accumulatedI) / 255.0;\nfragHighlight = combinedHighlight;\n}\n}\nbool isHighlightOccluded() {\nfloat sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;\nreturn gl_FragCoord.z > sceneDepth + 5e-7;\n}\nvoid calculateOcclusionAndOutputHighlight() {\noutputHighlight(isHighlightOccluded());\n}`),d.canHaveOverlay&&(c.constants.add(\"occlusionAndMask\",\"int\",85),c.code.add(h`void outputAllHighlights(vec2 highlightToAdd) {\nif (highlightToAdd == vec2(0.0)) { discard; }\nint occludedOrMask = isHighlightOccluded() ? 0xaa : 0;\nivec2 added = ivec2(highlightToAdd * 255.0);\nivec2 masked = (added & ivec2(occlusionAndMask)) | (ivec2(occludedOrMask) & (added<<1));\nfragHighlight = vec2(masked) / 255.0;\n}`))):c.code.add(h`void calculateOcclusionAndOutputHighlight() {}`)}export{g as OutputHighlight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{set as e}from\"../../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{Float2PassUniform as r}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";function a(e){e.uniforms.add(new r(\"zProjectionMap\",((e,t)=>c(t.camera)))),e.code.add(o`float linearizeDepth(float depth) {\nfloat depthNdc = depth * 2.0 - 1.0;\nfloat c1 = zProjectionMap[0];\nfloat c2 = zProjectionMap[1];\nreturn -(c1 / (depthNdc + c2 + 1e-7));\n}`),e.code.add(o`float depthFromTexture(sampler2D depthTexture, vec2 uv) {\nivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));\nfloat depth = texelFetch(depthTexture, iuv, 0).r;\nreturn depth;\n}`),e.code.add(o`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {\nreturn linearizeDepth(depthFromTexture(depthTexture, uv));\n}`)}function c(t){const r=t.projectionMatrix;return e(d,r[14],r[10])}const d=t();export{a as ReadDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n{\nreturn ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n}`),a.add(e`float integratedRadiance(float cosTheta2, float roughness)\n{\nreturn (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n}`),a.add(e`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n{\nfloat cosTheta2 = 1.0 - RdotNG * RdotNG;\nfloat intRadTheta = integratedRadiance(cosTheta2, roughness);\nfloat ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\nfloat sky = 2.0 - ground;\nreturn (ground * ambientGround + sky * ambientSky) * 0.5;\n}`)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{IDENTITY as e}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{ONES as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{TextureCoordinateType as r}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexTextureCoordinates as a}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{NormalsDoubleSidedMode as n}from\"./Normals.glsl.js\";import{Float2PassUniform as o}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as m}from\"../../shaderModules/Matrix3PassUniform.js\";import{Texture2DDrawUniform as d}from\"../../shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as l}from\"../../shaderModules/Texture2DPassUniform.js\";import{BindType as i}from\"../../shaderTechnique/BindType.js\";import{VertexAttribute as c}from\"../../../lib/VertexAttribute.js\";function T(T,u){const x=T.fragment;u.hasVertexTangents?(T.attributes.add(c.TANGENT,\"vec4\"),T.varyings.add(\"vTangent\",\"vec4\"),u.doubleSidedMode===n.WindingOrder?x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):x.code.add(s`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):x.code.add(s`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`),u.textureCoordinateType!==r.None&&(T.include(a,u),x.uniforms.add(u.bindType===i.Pass?new l(\"normalTexture\",(e=>e.textureNormal)):new d(\"normalTexture\",(e=>e.textureNormal))),u.hasNormalTextureTransform&&(x.uniforms.add(new o(\"scale\",(e=>e.scale??t))),x.uniforms.add(new m(\"normalTextureTransformMatrix\",(t=>t.normalTextureTransformMatrix??e)))),x.code.add(s`vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\nvec3 rawNormal = textureLookup(normalTexture, uv).rgb * 2.0 - 1.0;`),u.hasNormalTextureTransform&&x.code.add(s`mat3 normalTextureRotation = mat3(normalTextureTransformMatrix[0][0]/scale[0], normalTextureTransformMatrix[0][1]/scale[1], 0.0,\nnormalTextureTransformMatrix[1][0]/scale[0], normalTextureTransformMatrix[1][1]/scale[1], 0.0,\n0.0, 0.0, 0.0 );\nrawNormal.xy = (normalTextureRotation * vec3(rawNormal.x, rawNormal.y, 1.0)).xy;`),x.code.add(s`return tangentSpace * rawNormal;\n}`))}export{T as ComputeNormalTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{i}from\"../../../../../../chunks/vec32.js\";import{create as n}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as t}from\"../../../../../../chunks/vec42.js\";import{create as g}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{PBRMode as h}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{Float4PassUniform as l}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";function r(n,g){const r=n.fragment,o=void 0!==g.lightingSphericalHarmonicsOrder?g.lightingSphericalHarmonicsOrder:2;0===o?(r.uniforms.add(new e(\"lightingAmbientSH0\",((n,t)=>i(a,t.lighting.sh.r[0],t.lighting.sh.g[0],t.lighting.sh.b[0])))),r.code.add(s`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===o?(r.uniforms.add(new l(\"lightingAmbientSH_R\",((i,n)=>t(m,n.lighting.sh.r[0],n.lighting.sh.r[1],n.lighting.sh.r[2],n.lighting.sh.r[3]))),new l(\"lightingAmbientSH_G\",((i,n)=>t(m,n.lighting.sh.g[0],n.lighting.sh.g[1],n.lighting.sh.g[2],n.lighting.sh.g[3]))),new l(\"lightingAmbientSH_B\",((i,n)=>t(m,n.lighting.sh.b[0],n.lighting.sh.b[1],n.lighting.sh.b[2],n.lighting.sh.b[3])))),r.code.add(s`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===o&&(r.uniforms.add(new e(\"lightingAmbientSH0\",((n,t)=>i(a,t.lighting.sh.r[0],t.lighting.sh.g[0],t.lighting.sh.b[0]))),new l(\"lightingAmbientSH_R1\",((i,n)=>t(m,n.lighting.sh.r[1],n.lighting.sh.r[2],n.lighting.sh.r[3],n.lighting.sh.r[4]))),new l(\"lightingAmbientSH_G1\",((i,n)=>t(m,n.lighting.sh.g[1],n.lighting.sh.g[2],n.lighting.sh.g[3],n.lighting.sh.g[4]))),new l(\"lightingAmbientSH_B1\",((i,n)=>t(m,n.lighting.sh.b[1],n.lighting.sh.b[2],n.lighting.sh.b[3],n.lighting.sh.b[4]))),new l(\"lightingAmbientSH_R2\",((i,n)=>t(m,n.lighting.sh.r[5],n.lighting.sh.r[6],n.lighting.sh.r[7],n.lighting.sh.r[8]))),new l(\"lightingAmbientSH_G2\",((i,n)=>t(m,n.lighting.sh.g[5],n.lighting.sh.g[6],n.lighting.sh.g[7],n.lighting.sh.g[8]))),new l(\"lightingAmbientSH_B2\",((i,n)=>t(m,n.lighting.sh.b[5],n.lighting.sh.b[6],n.lighting.sh.b[7],n.lighting.sh.b[8])))),r.code.add(s`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),g.pbrMode!==h.Normal&&g.pbrMode!==h.Schematic||r.code.add(s`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}const a=n(),m=g();export{r as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as s}from\"../../shaderModules/Texture2DPassUniform.js\";import{blurSizePixels as r}from\"../../../effects/ssao/SSAO.js\";function t(t,o){const a=t.fragment;o.receiveAmbientOcclusion?(a.uniforms.add(new s(\"ssaoTex\",((e,s)=>s.ssao?.getTexture()))),a.constants.add(\"blurSizePixelsInverse\",\"float\",1/r),a.code.add(e`float evaluateAmbientOcclusionInverse() {\nvec2 ssaoTextureSizeInverse = 1.0 / vec2(textureSize(ssaoTex, 0));\nreturn texture(ssaoTex, gl_FragCoord.xy * blurSizePixelsInverse * ssaoTextureSizeInverse).r;\n}\nfloat evaluateAmbientOcclusion() {\nreturn 1.0 - evaluateAmbientOcclusionInverse();\n}`)):a.code.add(e`float evaluateAmbientOcclusionInverse() { return 1.0; }\nfloat evaluateAmbientOcclusion() { return 0.0; }`)}export{t as EvaluateAmbientOcclusion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{neverReached as i}from\"../../../../../../core/compilerUtils.js\";import{EvaluateAmbientLighting as n}from\"./EvaluateAmbientLighting.glsl.js\";import{EvaluateAmbientOcclusion as e}from\"./EvaluateAmbientOcclusion.glsl.js\";import{addMainLightDirection as o,addMainLightIntensity as t,applyShading as a}from\"./MainLighting.glsl.js\";import{PhysicallyBasedRendering as r}from\"./PhysicallyBasedRendering.glsl.js\";import{PBRMode as l}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{PiUtils as c}from\"./PiUtils.glsl.js\";import{BooleanPassUniform as d}from\"../../shaderModules/BooleanPassUniform.js\";import{FloatPassUniform as s}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as m}from\"../../shaderModules/interfaces.js\";import{ambientBoost as g}from\"../../../lighting/SceneLighting.js\";function h(i){i.constants.add(\"ambientBoostFactor\",\"float\",g)}function u(i){i.uniforms.add(new s(\"lightingGlobalFactor\",((i,n)=>n.lighting.globalFactor)))}function p(g,p){const v=g.fragment;switch(g.include(e,p),p.pbrMode!==l.Disabled&&g.include(r,p),g.include(n,p),g.include(c),v.code.add(m`\n    const float GAMMA_SRGB = 2.1;\n    const float INV_GAMMA_SRGB = 0.4761904;\n    ${p.pbrMode===l.Disabled?\"\":\"const vec3 GROUND_REFLECTANCE = vec3(0.2);\"}\n  `),h(v),u(v),o(v),v.code.add(m`\n    float additionalDirectedAmbientLight(vec3 vPosWorld) {\n      float vndl = dot(${p.spherical?m`normalize(vPosWorld)`:m`vec3(0.0, 0.0, 1.0)`}, mainLightDirection);\n      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n    }\n  `),t(v),v.code.add(m`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {\nfloat additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);\nreturn (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * mainLightIntensity;\n}`),p.pbrMode){case l.Disabled:case l.WaterOnIntegratedMesh:case l.Water:g.include(a),v.code.add(m`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight) {\nvec3 mainLighting = applyShading(normalWorld, shadow);\nvec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);\nvec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\nvec3 totalLight = mainLighting + ambientLighting + additionalLight;\ntotalLight = min(totalLight, vec3(PI));\nvec3 outColor = vec3((albedoLinear / PI) * totalLight);\nreturn pow(outColor, vec3(INV_GAMMA_SRGB));\n}`);break;case l.Normal:case l.Schematic:v.code.add(m`const float fillLightIntensity = 0.25;\nconst float horizonLightDiffusion = 0.4;\nconst float additionalAmbientIrradianceFactor = 0.02;\nvec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec4 _emission, float additionalAmbientIrradiance)\n{\nvec3 viewDirection = -viewDir;\nvec3 h = normalize(viewDirection + mainLightDirection);\nPBRShadingInfo inputs;\ninputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\ninputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);\nvec3 reflectedView = normalize(reflect(viewDirection, normal));\ninputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);\ninputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\ninputs.ssao = ssao;\ninputs.metalness = mrr[0];\ninputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),v.code.add(m`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\ninputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\ninputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),p.useFillLights?v.uniforms.add(new d(\"hasFillLights\",((i,n)=>n.enableFillLights))):v.constants.add(\"hasFillLights\",\"bool\",!1),v.code.add(m`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);\nambientDir = ambientDir != vec3(0.0) ? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));\ninputs.NdotAmbDir = hasFillLights ? abs(dot(normal, ambientDir)) : 1.0;\nfloat NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);\nvec3 mainLightIrradianceComponent = NdotL * (1.0 - shadow) * mainLightIntensity;\nvec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * mainLightIntensity * fillLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;\ninputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;\ninputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),v.uniforms.add(new s(\"lightingSpecularStrength\",((i,n)=>n.lighting.mainLight.specularStrength)),new s(\"lightingEnvironmentStrength\",((i,n)=>n.lighting.mainLight.environmentStrength))).code.add(m`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;\nvec3 horizonRingH = normalize(viewDirection + horizonRingDir);\ninputs.NdotH_Horizon = dot(normal, horizonRingH);\nfloat NdotH = clamp(dot(normal, h), 0.0, 1.0);\nvec3 mainLightRadianceComponent = lightingSpecularStrength * normalDistribution(NdotH, inputs.roughness) * mainLightIntensity * (1.0 - shadow);\nvec3 horizonLightRadianceComponent = lightingEnvironmentStrength * normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * mainLightIntensity * fillLightIntensity;\nvec3 ambientLightRadianceComponent = lightingEnvironmentStrength * calculateAmbientRadiance(ssao) + additionalLight;\nfloat normalDirectionModifier = mix(1., min(mix(0.1, 2.0, (inputs.NdotNG + 1.) * 0.5), 1.0), clamp(inputs.roughness * 5.0, 0.0 , 1.0));\ninputs.skyRadianceToSurface = (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;\ninputs.groundRadianceToSurface = 0.5 * GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;\ninputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),v.code.add(m`\n        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);\n        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;\n        vec3 emissionComponent = _emission.rgb == vec3(0.0) ? _emission.rgb : pow(_emission.rgb, vec3(GAMMA_SRGB));\n        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;\n        ${p.pbrMode!==l.Schematic||p.hasColorTexture?m`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`:m`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`}\n        return outColor;\n      }\n    `);break;case l.Simplified:case l.TerrainWithWater:o(v),t(v),v.code.add(m`const float roughnessTerrain = 0.5;\nconst float specularityTerrain = 0.5;\nconst vec3 fresnelReflectionTerrain = vec3(0.04);\nvec3 evaluatePBRSimplifiedLighting(vec3 n, vec3 c, float shadow, float ssao, vec3 al, vec3 vd, vec3 nup) {\nvec3 viewDirection = -vd;\nvec3 h = normalize(viewDirection + mainLightDirection);\nfloat NdotL = clamp(dot(n, mainLightDirection), 0.001, 1.0);\nfloat NdotV = clamp(abs(dot(n, viewDirection)), 0.001, 1.0);\nfloat NdotH = clamp(dot(n, h), 0.0, 1.0);\nfloat NdotNG = clamp(dot(n, nup), -1.0, 1.0);\nvec3 albedoLinear = pow(c, vec3(GAMMA_SRGB));\nfloat lightness = 0.3 * albedoLinear[0] + 0.5 * albedoLinear[1] + 0.2 * albedoLinear[2];\nvec3 f0 = (0.85 * lightness + 0.15) * fresnelReflectionTerrain;\nvec3 f90 =  vec3(clamp(dot(f0, vec3(50.0 * 0.33)), 0.0, 1.0));\nvec3 mainLightIrradianceComponent = (1. - shadow) * NdotL * mainLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(n, ssao) + al;\nvec3 ambientSky = ambientLightIrradianceComponent + mainLightIrradianceComponent;\nvec3 indirectDiffuse = ((1.0 - NdotNG) * mainLightIrradianceComponent + (1.0 + NdotNG ) * ambientSky) * 0.5;\nvec3 outDiffColor = albedoLinear * (1.0 - f0) * indirectDiffuse / PI;\nvec3 mainLightRadianceComponent = normalDistribution(NdotH, roughnessTerrain) * mainLightIntensity;\nvec2 dfg = prefilteredDFGAnalytical(roughnessTerrain, NdotV);\nvec3 specularColor = f0 * dfg.x + f90 * dfg.y;\nvec3 specularComponent = specularityTerrain * specularColor * mainLightRadianceComponent;\nvec3 outColorLinear = outDiffColor + specularComponent;\nvec3 outColor = pow(outColorLinear, vec3(INV_GAMMA_SRGB));\nreturn outColor;\n}`);break;default:i(p.pbrMode);case l.COUNT:}}export{p as EvaluateSceneLighting,h as addAmbientBoostFactor,u as addLightingGlobalFactor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Float3PassUniform as i}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as n}from\"../../shaderModules/interfaces.js\";function t(n){n.uniforms.add(new i(\"mainLightDirection\",((i,n)=>n.lighting.mainLight.direction)))}function a(n){n.uniforms.add(new i(\"mainLightIntensity\",((i,n)=>n.lighting.mainLight.intensity)))}function o(i){t(i.fragment),a(i.fragment),i.fragment.code.add(n`vec3 applyShading(vec3 shadingNormalWorld, float shadow) {\nfloat dotVal = clamp(dot(shadingNormalWorld, mainLightDirection), 0.0, 1.0);\nreturn mainLightIntensity * ((1.0 - shadow) * dotVal);\n}`)}export{t as addMainLightDirection,a as addMainLightIntensity,o as applyShading};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{neverReached as a}from\"../../../../../../core/compilerUtils.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function e(e,o){const n=e.fragment;switch(n.code.add(r`struct ShadingNormalParameters {\nvec3 normalView;\nvec3 viewDirection;\n} shadingParams;`),o.doubleSidedMode){case i.None:n.code.add(r`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn normalize(params.normalView);\n}`);break;case i.View:n.code.add(r`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);\n}`);break;case i.WindingOrder:n.code.add(r`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);\n}`);break;default:a(o.doubleSidedMode);case i.COUNT:}}var i;!function(a){a[a.None=0]=\"None\",a[a.View=1]=\"View\",a[a.WindingOrder=2]=\"WindingOrder\",a[a.COUNT=3]=\"COUNT\"}(i||(i={}));export{e as Normals,i as NormalsDoubleSidedMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{AnalyticalSkyModel as e}from\"./AnalyticalSkyModel.glsl.js\";import{PBRMode as o}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{PiUtils as t}from\"./PiUtils.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function n(n,r){const l=n.fragment.code;n.include(t),r.pbrMode!==o.Normal&&r.pbrMode!==o.Schematic&&r.pbrMode!==o.Simplified&&r.pbrMode!==o.TerrainWithWater||(l.add(a`float normalDistribution(float NdotH, float roughness)\n{\nfloat a = NdotH * roughness;\nfloat b = roughness / (1.0 - NdotH * NdotH + a * a);\nreturn b * b * INV_PI;\n}`),l.add(a`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\nconst vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\nconst vec2 c2 = vec2(-1.04, 1.04);\nvec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\nreturn c2 * a004 + r.zw;\n}`)),r.pbrMode!==o.Normal&&r.pbrMode!==o.Schematic||(n.include(e),l.add(a`struct PBRShadingInfo\n{\nfloat NdotV;\nfloat LdotH;\nfloat NdotNG;\nfloat RdotNG;\nfloat NdotAmbDir;\nfloat NdotH_Horizon;\nvec3 skyRadianceToSurface;\nvec3 groundRadianceToSurface;\nvec3 skyIrradianceToSurface;\nvec3 groundIrradianceToSurface;\nfloat averageAmbientRadiance;\nfloat ssao;\nvec3 albedoLinear;\nvec3 f0;\nvec3 f90;\nvec3 diffuseColor;\nfloat metalness;\nfloat roughness;\n};`),l.add(a`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\nvec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\nvec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\nvec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\nvec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\nvec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\nvec3 specularComponent = specularColor * indirectSpecular;\nreturn (diffuseComponent + specularComponent);\n}`),l.add(a`float gamutMapChanel(float x, vec2 p){\nreturn (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n}`),l.add(a`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\nvec3 outColor;\nvec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\noutColor.x = gamutMapChanel(inColor.x, p) ;\noutColor.y = gamutMapChanel(inColor.y, p) ;\noutColor.z = gamutMapChanel(inColor.z, p) ;\nreturn outColor;\n}`))}function r(e,o){const n=e.fragment.code;e.include(t),n.add(a`\n  struct PBRShadingWater\n  {\n      float NdotL;   // cos angle between normal and light direction\n      float NdotV;   // cos angle between normal and view direction\n      float NdotH;   // cos angle between normal and half vector\n      float VdotH;   // cos angle between view direction and half vector\n      float LdotH;   // cos angle between light direction and half vector\n      float VdotN;   // cos angle between view direction and normal vector\n  };\n\n  float dtrExponent = ${o.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n  `),n.add(a`vec3 fresnelReflection(float angle, vec3 f0, float f90) {\nreturn f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n}`),n.add(a`float normalDistributionWater(float NdotH, float roughness)\n{\nfloat r2 = roughness * roughness;\nfloat NdotH2 = NdotH * NdotH;\nfloat denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\nreturn r2 / denom;\n}`),n.add(a`float geometricOcclusionKelemen(float LoH)\n{\nreturn 0.25 / (LoH * LoH);\n}`),n.add(a`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n{\nvec3  F = fresnelReflection(props.VdotH, F0, F0Max);\nfloat dSun = normalDistributionWater(props.NdotH, roughness);\nfloat V = geometricOcclusionKelemen(props.LdotH);\nfloat diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\nfloat strengthSunHaze  = 1.2;\nfloat dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze) * strengthSunHaze;\nreturn ((dSun + dSunHaze) * V) * F;\n}`)}export{n as PhysicallyBasedRendering,r as PhysicallyBasedRenderingWater};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VertexTextureCoordinates as e}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{Float3DrawUniform as r}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as o}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as s,If as t}from\"../../shaderModules/interfaces.js\";import{Texture2DDrawUniform as a}from\"../../shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as i}from\"../../shaderModules/Texture2DPassUniform.js\";import{BindType as c}from\"../../shaderTechnique/BindType.js\";import{GLTextureMaterialBindParameters as l}from\"../../../lib/GLTextureMaterial.js\";import{schematicMRRFactors as u}from\"../../../materials/pbrUtils.js\";var n;!function(e){e[e.Disabled=0]=\"Disabled\",e[e.Normal=1]=\"Normal\",e[e.Schematic=2]=\"Schematic\",e[e.Water=3]=\"Water\",e[e.WaterOnIntegratedMesh=4]=\"WaterOnIntegratedMesh\",e[e.Simplified=5]=\"Simplified\",e[e.TerrainWithWater=6]=\"TerrainWithWater\",e[e.COUNT=7]=\"COUNT\"}(n||(n={}));class d extends l{constructor(){super(...arguments),this.mrrFactors=u}}function m(l,u){const d=u.pbrMode,m=l.fragment;if(d!==n.Schematic&&d!==n.Disabled&&d!==n.Normal)return void m.code.add(s`void applyPBRFactors() {}`);if(d===n.Disabled)return void m.code.add(s`void applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`);if(d===n.Schematic)return void m.code.add(s`vec3 mrr = vec3(0.0, 0.6, 0.2);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`);const{hasMetallicRoughnessTexture:p,hasMetallicRoughnessTextureTransform:h,hasOcclusionTexture:f,hasOcclusionTextureTransform:v,bindType:x}=u;(p||f)&&l.include(e,u),m.code.add(s`vec3 mrr;\nfloat occlusion;`),p&&m.uniforms.add(x===c.Pass?new i(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness)):new a(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness))),f&&m.uniforms.add(x===c.Pass?new i(\"texOcclusion\",(e=>e.textureOcclusion)):new a(\"texOcclusion\",(e=>e.textureOcclusion))),m.uniforms.add(x===c.Pass?new o(\"mrrFactors\",(e=>e.mrrFactors)):new r(\"mrrFactors\",(e=>e.mrrFactors))),m.code.add(s`\n    ${t(p,s`void applyMetallicRoughness(vec2 uv) {\n            vec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;\n            mrr[0] *= metallicRoughness.b;\n            mrr[1] *= metallicRoughness.g;\n          }`)}\n\n    ${t(f,\"void applyOcclusion(vec2 uv) { occlusion *= textureLookup(texOcclusion, uv).r; }\")}\n\n    float getBakedOcclusion() {\n      return ${f?\"occlusion\":\"1.0\"};\n    }\n\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      occlusion = 1.0;\n\n      ${t(p,`applyMetallicRoughness(${h?\"metallicRoughnessUV\":\"vuv0\"});`)}\n      ${t(f,`applyOcclusion(${v?\"occlusionUV\":\"vuv0\"});`)}\n    }\n  `)}export{n as PBRMode,d as PBRRenderingParameters,m as PhysicallyBasedRenderingParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t){const a=3.141592653589793,n=.3183098861837907;t.vertex.constants.add(\"PI\",\"float\",a),t.fragment.constants.add(\"PI\",\"float\",a),t.fragment.constants.add(\"LIGHT_NORMALIZATION\",\"float\",n),t.fragment.constants.add(\"INV_PI\",\"float\",n),t.fragment.constants.add(\"HALF_PI\",\"float\",1.570796326794897),t.fragment.constants.add(\"TWO_PI\",\"float\",6.28318530717958)}export{t as PiUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{IDENTITY as e}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as s}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Rgba4FloatEncoding as a}from\"../util/RgbaFloat16Encoding.glsl.js\";import{Float4PassUniform as t}from\"../../shaderModules/Float4PassUniform.js\";import{IntegerPassUniform as o}from\"../../shaderModules/IntegerPassUniform.js\";import{NoParameters as i,glsl as r}from\"../../shaderModules/interfaces.js\";import{Matrix4sDrawUniform as c}from\"../../shaderModules/Matrix4sDrawUniform.js\";import{Matrix4sPassUniform as d}from\"../../shaderModules/Matrix4sPassUniform.js\";import{Texture2DPassUniform as p}from\"../../shaderModules/Texture2DPassUniform.js\";class n extends i{constructor(){super(...arguments),this.origin=s()}}class l extends n{}class v extends i{constructor(){super(...arguments),this.modelTransformation=e}}class h extends v{constructor(){super(...arguments),this.origin=s()}}function m(e,s){s.receiveShadows&&(e.fragment.uniforms.add(new d(\"shadowMapMatrix\",((e,s)=>s.shadowMap.getShadowMapMatrices(e.origin)),4)),f(e))}function x(e,s){s.receiveShadows&&(e.fragment.uniforms.add(new c(\"shadowMapMatrix\",((e,s)=>s.shadowMap.getShadowMapMatrices(e.origin)),4)),f(e))}function f(e){const s=e.fragment;s.include(a),s.uniforms.add(new p(\"shadowMap\",((e,s)=>s.shadowMap.depthTexture)),new o(\"numCascades\",((e,s)=>s.shadowMap.numCascades)),new t(\"cascadeDistances\",((e,s)=>s.shadowMap.cascadeDistances))).code.add(r`int chooseCascade(float depth, out mat4 mat) {\nvec4 distance = cascadeDistances;\nint i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\nmat = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];\nreturn i;\n}\nvec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\nvec4 lv = mat * vec4(_vpos, 1.0);\nlv.xy /= lv.w;\nreturn 0.5 * lv.xyz + vec3(0.5);\n}\nvec2 cascadeCoordinates(int i, ivec2 textureSize, vec3 lvpos) {\nfloat xScale = float(textureSize.y) / float(textureSize.x);\nreturn vec2((float(i) + lvpos.x) * xScale, lvpos.y);\n}\nfloat readShadowMapDepth(ivec2 uv, sampler2D _depthTex) {\nreturn rgba4ToFloat(texelFetch(_depthTex, uv, 0));\n}\nfloat posIsInShadow(ivec2 uv, vec3 lvpos, sampler2D _depthTex) {\nreturn readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;\n}\nfloat filterShadow(vec2 uv, vec3 lvpos, ivec2 texSize, sampler2D _depthTex) {\nvec2 st = fract(uv * vec2(texSize) + vec2(0.5));\nivec2 base = ivec2(uv * vec2(texSize) - vec2(0.5));\nfloat s00 = posIsInShadow(ivec2(base.x, base.y), lvpos, _depthTex);\nfloat s10 = posIsInShadow(ivec2(base.x + 1, base.y), lvpos, _depthTex);\nfloat s11 = posIsInShadow(ivec2(base.x + 1, base.y + 1), lvpos, _depthTex);\nfloat s01 = posIsInShadow(ivec2(base.x, base.y + 1), lvpos, _depthTex);\nreturn mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n}\nfloat readShadowMap(const in vec3 _vpos, float _linearDepth) {\nmat4 mat;\nint i = chooseCascade(_linearDepth, mat);\nif (i >= numCascades) { return 0.0; }\nvec3 lvpos = lightSpacePosition(_vpos, mat);\nif (lvpos.z >= 1.0 || lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\nivec2 size = textureSize(shadowMap, 0);\nvec2 uv = cascadeCoordinates(i, size, lvpos);\nreturn filterShadow(uv, lvpos, size, shadowMap);\n}`)}export{x as ReadShadowMapDraw,l as ReadShadowMapDrawParameters,v as ReadShadowMapParameters,m as ReadShadowMapPass,h as ReadShadowMapPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e=3e5,o=5e5;export{o as distanceFadeEnd,e as distanceFadeStart};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ReadDepth as e}from\"../output/ReadDepth.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as r}from\"../../shaderModules/Texture2DPassUniform.js\";function a(a,{occlusionPass:n,terrainDepthTest:i,cullAboveTerrain:o}){i?(a.fragment.include(e),a.fragment.uniforms.add(new r(\"terrainDepthTexture\",((e,t)=>t.terrainDepth?.attachment))).code.add(t`\n   ${n?\"bool\":\"void\"} terrainDepthTest(float fragmentDepth) {\n      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;\n      float linearDepth = linearizeDepth(depth);\n      ${n?t`return fragmentDepth < linearDepth && depth < 1.0;`:t`if(fragmentDepth ${o?\">\":\"<=\"} linearDepth) discard;`}\n    }`)):n?a.fragment.code.add(t`#define terrainDepthTest(fragmentDepth) false`):a.fragment.code.add(t`#define terrainDepthTest(fragmentDepth) {}`)}export{a as terrainDepthTest};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{IDENTITY as r}from\"../../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{TextureCoordinateType as e}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as a}from\"../../shaderModules/Matrix3PassUniform.js\";function s(e,s){s.hasColorTextureTransform?(e.varyings.add(\"colorUV\",\"vec2\"),e.vertex.uniforms.add(new a(\"colorTextureTransformMatrix\",(e=>e.colorTextureTransformMatrix??r))).code.add(o`void forwardColorUV(){\ncolorUV = (colorTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):e.vertex.code.add(o`void forwardColorUV(){}`)}function i(s,i){i.hasNormalTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"normalUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"normalTextureTransformMatrix\",(e=>e.normalTextureTransformMatrix??r))).code.add(o`void forwardNormalUV(){\nnormalUV = (normalTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardNormalUV(){}`)}function t(s,i){i.hasEmissionTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"emissiveUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"emissiveTextureTransformMatrix\",(e=>e.emissiveTextureTransformMatrix??r))).code.add(o`void forwardEmissiveUV(){\nemissiveUV = (emissiveTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardEmissiveUV(){}`)}function d(s,i){i.hasOcclusionTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"occlusionUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"occlusionTextureTransformMatrix\",(e=>e.occlusionTextureTransformMatrix??r))).code.add(o`void forwardOcclusionUV(){\nocclusionUV = (occlusionTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardOcclusionUV(){}`)}function n(s,i){i.hasMetallicRoughnessTextureTransform&&i.textureCoordinateType!==e.None?(s.varyings.add(\"metallicRoughnessUV\",\"vec2\"),s.vertex.uniforms.add(new a(\"metallicRoughnessTextureTransformMatrix\",(e=>e.metallicRoughnessTextureTransformMatrix??r))).code.add(o`void forwardMetallicRoughnessUV(){\nmetallicRoughnessUV = (metallicRoughnessTextureTransformMatrix * vec3(vuv0, 1.0)).xy;\n}`)):s.vertex.code.add(o`void forwardMetallicRoughnessUV(){}`)}export{s as colorTextureUV,t as emissiveTextureUV,n as metallicRoughnessTextureUV,i as normalTextureUV,d as occlusionTextureUV};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{Float4sPassUniform as o}from\"../../shaderModules/Float4sPassUniform.js\";import{FloatsPassUniform as r}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as v}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as t}from\"../../shaderModules/Matrix3PassUniform.js\";import{VertexAttribute as a}from\"../../../lib/VertexAttribute.js\";import{vvColorNumber as i}from\"../../../materials/VisualVariablePassParameters.js\";function l(l,n){const{vertex:s,attributes:u}=l;n.hasVvInstancing&&(n.vvSize||n.vvColor)&&u.add(a.INSTANCEFEATUREATTRIBUTE,\"vec4\"),n.vvSize?(s.uniforms.add(new e(\"vvSizeMinSize\",(e=>e.vvSize.minSize))),s.uniforms.add(new e(\"vvSizeMaxSize\",(e=>e.vvSize.maxSize))),s.uniforms.add(new e(\"vvSizeOffset\",(e=>e.vvSize.offset))),s.uniforms.add(new e(\"vvSizeFactor\",(e=>e.vvSize.factor))),s.uniforms.add(new t(\"vvSymbolRotationMatrix\",(e=>e.vvSymbolRotationMatrix))),s.uniforms.add(new e(\"vvSymbolAnchor\",(e=>e.vvSymbolAnchor))),s.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`),s.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):s.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),n.vvColor?(s.constants.add(\"vvColorNumber\",\"int\",i),s.uniforms.add(new r(\"vvColorValues\",(e=>e.vvColor.values),i),new o(\"vvColorColors\",(e=>e.vvColor.colors),i)),s.code.add(v`\n      vec4 interpolateVVColor(float value) {\n        if (value <= vvColorValues[0]) {\n          return vvColorColors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (vvColorValues[i] >= value) {\n            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);\n            return mix(vvColorColors[i-1], vvColorColors[i], f);\n          }\n        }\n        return vvColorColors[vvColorNumber - 1];\n      }\n\n      vec4 vvGetColor(vec4 featureAttribute) {\n        return interpolateVVColor(featureAttribute.y);\n      }\n\n      ${n.hasVvInstancing?v`\n            vec4 vvColor() {\n              return vvGetColor(instanceFeatureAttribute);\n            }`:\"vec4 vvColor() { return vec4(1.0); }\"}\n    `)):s.code.add(v`vec4 vvColor() { return vec4(1.0); }`)}export{l as VisualVariables};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst o=1/255.5;export{o as alphaCutoff};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{set as r}from\"../../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{s as e}from\"../../../../../../chunks/vec42.js\";import{create as t}from\"../../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{Float2PassUniform as a}from\"../../shaderModules/Float2PassUniform.js\";import{Float4PassUniform as s}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as i}from\"../../shaderModules/interfaces.js\";function f(r){r.fragment.uniforms.add(new s(\"projInfo\",((r,o)=>c(o.camera)))),r.fragment.uniforms.add(new a(\"zScale\",((r,o)=>m(o.camera)))),r.fragment.code.add(i`vec3 reconstructPosition(vec2 fragCoord, float depth) {\nreturn vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);\n}`)}function c(r){const o=r.projectionMatrix;return 0===o[11]?e(n,2/(r.fullWidth*o[0]),2/(r.fullHeight*o[5]),(1+o[12])/o[0],(1+o[13])/o[5]):e(n,-2/(r.fullWidth*o[0]),-2/(r.fullHeight*o[5]),(1-o[8])/o[0],(1-o[9])/o[5])}const n=t();function m(o){return 0===o.projectionMatrix[11]?r(l,0,1):r(l,1,0)}const l=o();export{f as CameraSpace,c as getProjectionInfo,m as getZScale};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as c}from\"../../shaderModules/interfaces.js\";function e(e){e.code.add(c`vec4 premultiplyAlpha(vec4 v) {\nreturn vec4(v.rgb * v.a, v.a);\n}\nvec3 rgb2hsv(vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nfloat rgb2v(vec3 c) {\nreturn max(c.x, max(c.y, c.z));\n}`)}export{e as ColorConversion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{alphaCutoff as o}from\"./AlphaCutoff.js\";import{FloatDrawUniform as a}from\"../../shaderModules/FloatDrawUniform.js\";import{FloatPassUniform as r}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";import{AlphaDiscardMode as d}from\"../../../lib/basicInterfaces.js\";function t(o,a){f(o,a,new r(\"textureAlphaCutoff\",(o=>o.textureAlphaCutoff)))}function s(o,r){f(o,r,new a(\"textureAlphaCutoff\",(o=>o.textureAlphaCutoff)))}function f(a,r,t){const s=a.fragment;switch(r.alphaDiscardMode){case d.Blend:a.fragment.code.add(e`\n        #define discardOrAdjustAlpha(color) { if (color.a < ${e.float(o)}) { discard; } }\n      `);break;case d.Opaque:s.code.add(e`void discardOrAdjustAlpha(inout vec4 color) {\ncolor.a = 1.0;\n}`);break;case d.Mask:s.uniforms.add(t).code.add(e`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case d.MaskBlend:s.uniforms.add(t).code.add(e`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}export{s as DiscardOrAdjustAlphaDraw,t as DiscardOrAdjustAlphaPass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function c({code:c},i){i.doublePrecisionRequiresObfuscation?c.add(e`vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}`):c.add(e`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}`)}export{c as DoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ColorMixModeEnum as e}from\"../../../../layers/support/symbolColorUtils.js\";import{ColorConversion as t}from\"./ColorConversion.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function i(i){i.include(t),i.code.add(r`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in macOS using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${r.int(e.Multiply)}) {\n        return allMixed;\n      }\n      if (mode == ${r.int(e.Ignore)}) {\n        return internalMixed;\n      }\n      if (mode == ${r.int(e.Replace)}) {\n        return externalColor;\n      }\n\n      // tint (or something invalid)\n      float vIn = rgb2v(internalMixed);\n      vec3 hsvTint = rgb2hsv(externalColor);\n      vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n      return hsv2rgb(hsvOut);\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in macOS using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${r.int(e.Ignore)}) {\n        return internalMixed;\n      }\n      if (mode == ${r.int(e.Replace)}) {\n        return externalOpacity;\n      }\n\n      // multiply or tint (or something invalid)\n      return allMixed;\n    }\n  `)}export{i as MixExternalColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function a(a){a.code.add(o`const float MAX_RGBA4_FLOAT =\n15.0 / 16.0 +\n15.0 / 16.0 / 16.0 +\n15.0 / 16.0 / 16.0 / 16.0 +\n15.0 / 16.0 / 16.0 / 16.0 / 16.0;\nconst vec4 FIXED_POINT_FACTORS_RGBA4 = vec4(1.0, 16.0, 16.0 * 16.0, 16.0 * 16.0 * 16.0);\nvec4 floatToRgba4(const float value) {\nfloat valueInValidDomain = clamp(value, 0.0, MAX_RGBA4_FLOAT);\nvec4 fixedPointU4 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS_RGBA4) * 16.0);\nconst float toU4AsFloat = 1.0 / 15.0;\nreturn fixedPointU4 * toU4AsFloat;\n}\nconst vec4 RGBA4_2_FLOAT_FACTORS = vec4(\n15.0 / (16.0),\n15.0 / (16.0 * 16.0),\n15.0 / (16.0 * 16.0 * 16.0),\n15.0 / (16.0 * 16.0 * 16.0 * 16.0)\n);\nfloat rgba4ToFloat(vec4 rgba) {\nreturn dot(rgba, RGBA4_2_FLOAT_FACTORS);\n}`)}export{a as Rgba4FloatEncoding};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{i as e}from\"../../../../../../chunks/vec32.js\";import{create as a}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Float3PassUniform as r}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";function s(e){e.vertex.code.add(c`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\nreturn absCosAngle * absCosAngle * absCosAngle;\n}`),e.vertex.code.add(c`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {\nreturn vec3(\nmin(params.x / (distanceToCamera - params.y), 1.0),\nscreenSizePerspectiveViewAngleDependentFactor(absCosAngle),\nparams.z\n);\n}`),e.vertex.code.add(c`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {\nreturn mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);\n}`),e.vertex.code.add(c`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {\nreturn applyScreenSizePerspectiveScaleFactorFloat(\nsize,\nscreenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n);\n}`),e.vertex.code.add(c`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {\nreturn mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);\n}`),e.vertex.code.add(c`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {\nreturn applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}`)}function t(e){e.uniforms.add(new r(\"screenSizePerspective\",(e=>i(e.screenSizePerspective))))}function o(e){e.uniforms.add(new r(\"screenSizePerspectiveAlignment\",(e=>i(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function i(a){return e(n,a.parameters.divisor,a.parameters.offset,a.minScaleFactor)}const n=a();export{s as ScreenSizePerspective,t as addScreenSizePerspective,o as addScreenSizePerspectiveAlignment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";function e(e){e.fragment.code.add(a`vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nreturn textureGrad(tex, uvAtlas, dUVdx, dUVdy);\n}`)}export{e as TextureAtlasLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{translate as r}from\"../../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as e}from\"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i}from\"../../../../../../chunks/vec32.js\";import{ZEROS as a,create as o}from\"../../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{Float3DrawUniform as s}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as n}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as t}from\"../../shaderModules/FloatPassUniform.js\";import{Matrix4DrawUniform as m}from\"../../shaderModules/Matrix4DrawUniform.js\";import{Matrix4PassUniform as c}from\"../../shaderModules/Matrix4PassUniform.js\";function f(r,e){e.instancedDoublePrecision?r.constants.add(\"cameraPosition\",\"vec3\",a):r.uniforms.add(new s(\"cameraPosition\",((r,e)=>i(v,e.camera.viewInverseTransposeMatrix[3]-r.origin[0],e.camera.viewInverseTransposeMatrix[7]-r.origin[1],e.camera.viewInverseTransposeMatrix[11]-r.origin[2]))))}function d(e,a){if(!a.instancedDoublePrecision)return void e.uniforms.add(new c(\"proj\",((r,e)=>e.camera.projectionMatrix)),new m(\"view\",((e,i)=>r(l,i.camera.viewMatrix,e.origin))),new s(\"localOrigin\",(r=>r.origin)));const o=r=>i(v,r.camera.viewInverseTransposeMatrix[3],r.camera.viewInverseTransposeMatrix[7],r.camera.viewInverseTransposeMatrix[11]);e.uniforms.add(new c(\"proj\",((r,e)=>e.camera.projectionMatrix)),new c(\"view\",((e,i)=>r(l,i.camera.viewMatrix,o(i)))),new n(\"localOrigin\",((r,e)=>o(e))))}const l=e(),v=o();function p(r){r.uniforms.add(new c(\"viewNormal\",((r,e)=>e.camera.viewInverseTransposeMatrix)))}function w(r){r.uniforms.add(new t(\"pixelRatio\",((r,e)=>e.camera.pixelRatio/e.overlayStretch)))}export{f as addCameraPosition,w as addPixelRatio,d as addProjViewLocalOrigin,p as addViewNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as o}from\"./Uniform.js\";import{BindType as r}from\"../shaderTechnique/BindType.js\";class s extends o{constructor(o,s){super(o,\"bool\",r.Pass,((r,e,t)=>r.setUniform1b(o,s(e,t))))}}export{s as BooleanPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"vec2\",e.Draw,((e,s,t,i)=>e.setUniform2fv(r,o(s,t,i))))}}export{o as Float2DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"vec2\",s.Pass,((s,o,t)=>s.setUniform2fv(r,e(o,t))))}}export{e as Float2PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"vec3\",e.Draw,((e,s,t,i)=>e.setUniform3fv(r,o(s,t,i))))}}export{o as Float3DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"vec3\",s.Pass,((s,o,t)=>s.setUniform3fv(r,e(o,t))))}}export{e as Float3PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"vec4\",s.Pass,((s,o,t)=>s.setUniform4fv(r,e(o,t))))}}export{e as Float4PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e,o){super(r,\"vec4\",s.Pass,((s,o,t)=>s.setUniform4fv(r,e(o,t))),o)}}export{e as Float4sPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as o}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"float\",o.Draw,((o,s,t)=>o.setUniform1f(r,e(s,t))))}}export{e as FloatDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"float\",s.Pass,((s,e,t)=>s.setUniform1f(r,o(e,t))))}}export{o as FloatPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o,e){super(r,\"float\",s.Pass,((s,e,t)=>s.setUniform1fv(r,o(e,t))),e)}}export{o as FloatsPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"ivec2\",s.Pass,((s,o,i)=>s.setUniform2iv(r,e(o,i))))}}export{e as Integer2PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"int\",s.Pass,((s,o,i)=>s.setUniform1i(r,e(o,i))))}}export{e as IntegerPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"mat3\",e.Draw,((e,s,t)=>e.setUniformMatrix3fv(r,o(s,t))))}}export{o as Matrix3DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"mat3\",s.Pass,((s,o,t)=>s.setUniformMatrix3fv(r,e(o,t))))}}export{e as Matrix3PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"mat4\",e.Draw,((e,s,t)=>e.setUniformMatrix4fv(r,o(s,t))))}}export{o as Matrix4DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"mat4\",s.Pass,((s,o,t)=>s.setUniformMatrix4fv(r,e(o,t))))}}export{e as Matrix4PassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o,s){super(r,\"mat4\",e.Draw,((e,s,t,i)=>e.setUniformMatrix4fv(r,o(s,t,i))),s)}}export{o as Matrix4sDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e,o){super(r,\"mat4\",s.Pass,((s,o,t)=>s.setUniformMatrix4fv(r,e(o,t))),o)}}export{e as Matrix4sPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import\"../../../../../core/has.js\";import t from\"../../../../../core/Logger.js\";import{BindType as r}from\"../shaderTechnique/BindType.js\";import{assert as n}from\"../../lib/Util.js\";const s=()=>t.getLogger(\"esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder\");class i{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class o extends i{constructor(){super(...arguments),this.vertex=new h,this.fragment=new h,this.attributes=new m,this.varyings=new _,this.extensions=new d,this.outputs=new l}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){const t=this.extensions.generateSource(e),r=this.attributes.generateSource(e),n=this.varyings.generateSource(e),s=\"vertex\"===e?this.vertex:this.fragment,i=s.uniforms.generateSource(),o=s.code.generateSource(),a=s.main.generateSource(),u=\"vertex\"===e?S:f,c=s.constants.generateSource(),h=this.outputs.generateSource(e);return`#version 300 es\\n${t.join(\"\\n\")}\\n\\n${u}\\n\\n${c.join(\"\\n\")}\\n\\n${i.join(\"\\n\")}\\n\\n${r.join(\"\\n\")}\\n\\n${n.join(\"\\n\")}\\n\\n${h.join(\"\\n\")}\\n\\n${o.join(\"\\n\")}\\n\\n${a.join(\"\\n\")}`}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[r.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[r.Pass];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r)=>{for(let i=0;i<s;++i)n[i](e,t,r)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[r.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[r.Draw];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r,i)=>{for(let o=0;o<s;++o)n[o](e,i,t,r)}}}class a{constructor(e){this._stage=e,this._entries=new Map}add(...e){for(const t of e)this._add(t);return this._stage}get(e){return this._entries.get(e)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new e(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else s().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class u{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(){if(this._bodies.length>0)return[`void main() {\\n ${this._bodies.join(\"\\n\")||\"\"} \\n}`];throw new e(\"Shader does not contain main function body.\")}}class c{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class h extends i{constructor(){super(...arguments),this.uniforms=new a(this),this.main=new u(this),this.code=new c(this),this.constants=new g(this)}get builder(){return this}}class m{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return\"fragment\"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class _{constructor(){this._entries=new Map}add(e,t){this._entries.has(e)&&n(this._entries.get(e)===t),this._entries.set(e,t)}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push(\"vertex\"===e?`out ${r} ${n};`:`in ${r} ${n};`))),t}}class d{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t=\"vertex\"===e?d.ALLOWLIST_VERTEX:d.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}d.ALLOWLIST_FRAGMENT=[\"GL_EXT_shader_texture_lod\",\"GL_OES_standard_derivatives\"],d.ALLOWLIST_VERTEX=[];class l{constructor(){this._entries=new Map}add(e,t,r=0){const s=this._entries.get(r);s?n(s.name===e&&s.type===t,`Fragment shader output location ${r} occupied`):this._entries.set(r,{name:e,type:t})}generateSource(e){if(\"vertex\"===e)return[];0===this._entries.size&&this._entries.set(0,{name:l.DEFAULT_NAME,type:l.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}l.DEFAULT_TYPE=\"vec4\",l.DEFAULT_NAME=\"fragColor\";class g{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n=\"ERROR_CONSTRUCTOR_STRING\";switch(t){case\"float\":n=g._numberToFloatStr(r);break;case\"int\":n=g._numberToIntStr(r);break;case\"bool\":n=r.toString();break;case\"vec2\":n=`vec2(${g._numberToFloatStr(r[0])},                            ${g._numberToFloatStr(r[1])})`;break;case\"vec3\":n=`vec3(${g._numberToFloatStr(r[0])},                            ${g._numberToFloatStr(r[1])},                            ${g._numberToFloatStr(r[2])})`;break;case\"vec4\":n=`vec4(${g._numberToFloatStr(r[0])},                            ${g._numberToFloatStr(r[1])},                            ${g._numberToFloatStr(r[2])},                            ${g._numberToFloatStr(r[3])})`;break;case\"ivec2\":n=`ivec2(${g._numberToIntStr(r[0])},                             ${g._numberToIntStr(r[1])})`;break;case\"ivec3\":n=`ivec3(${g._numberToIntStr(r[0])},                             ${g._numberToIntStr(r[1])},                             ${g._numberToIntStr(r[2])})`;break;case\"ivec4\":n=`ivec4(${g._numberToIntStr(r[0])},                             ${g._numberToIntStr(r[1])},                             ${g._numberToIntStr(r[2])},                             ${g._numberToIntStr(r[3])})`;break;case\"mat2\":case\"mat3\":case\"mat4\":n=`${t}(${Array.prototype.map.call(r,(e=>g._numberToFloatStr(e))).join(\", \")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const f=\"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n  precision highp sampler2D;\\n#else\\n  precision mediump float;\\n  precision mediump sampler2D;\\n#endif\",S=\"precision highp float;\\nprecision highp sampler2D;\";export{c as Code,i as Includes,u as Main,o as ShaderBuilder,h as Stage,a as Uniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class s extends r{constructor(r,s){super(r,\"sampler2D\",e.Draw,((e,o,t)=>e.bindTexture(r,s(o,t))))}}export{s as Texture2DDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class s extends r{constructor(r,s){super(r,\"sampler2D\",e.Pass,((e,o,t)=>e.bindTexture(r,s(o,t))))}}export{s as Texture2DPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{BindType as s}from\"../shaderTechnique/BindType.js\";class a{constructor(a,i,e,r,t=null){if(this.name=a,this.type=i,this.arraySize=t,this.bind={[s.Pass]:null,[s.Draw]:null},r)switch(e){case s.Pass:this.bind[s.Pass]=r;break;case s.Draw:this.bind[s.Draw]=r}}equals(s){return this.type===s.type&&this.name===s.name&&this.arraySize===s.arraySize}}export{a as Uniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass n{}const t=n;function o(n,...t){let o=\"\";for(let r=0;r<t.length;r++)o+=n[r]+t[r];return o+=n[n.length-1],o}function r(n,t,o=\"\"){return n?t:o}!function(n){function t(n){return Math.round(n).toString()}function o(n){return n.toPrecision(8)}n.int=t,n.float=o}(o||(o={}));export{r as If,t as NoParameters,o as glsl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.Pass=0]=\"Pass\",a[a.Draw=1]=\"Draw\"}(a||(a={}));export{a as BindType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t,o){this._module=t,this._load=o}get(){return this._module}async reload(){return this._module=await this._load(),this._module}}export{t as ReloadableShaderModule};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as i}from\"../../../../../core/maybe.js\";import{Default3D as e}from\"../../lib/DefaultVertexAttributeLocations.js\";import{Program as t}from\"../../lib/Program.js\";import{PrimitiveType as r}from\"../../../../webgl/enums.js\";import{makePipelineState as o,blendWithPremultipliedAlpha as s,defaultColorWrite as a}from\"../../../../webgl/renderState.js\";class n{constructor(o,s,a,n,l=e){this.release=n,this.locations=l,this.primitiveType=r.TRIANGLES,this.key=s.key,this._program=new t(o.rctx,a.get().build(s),l),this._pipeline=this.initializePipeline(s),this.reload=async e=>{if(e&&await a.reload(),!this.key.equals(s.key))throw new Error(\"Configuration was changed after construction, cannot reload shader\");i(this._program),this._program=new t(o.rctx,a.get().build(s),l),this._pipeline=this.initializePipeline(s)}}destroy(){this._program=i(this._program),this._pipeline=null}get program(){return this._program}get compiled(){return this.program.compiled}ensureAttributeLocations(i){this.program.assertCompatibleVertexAttributeLocations(i)}getPipeline(i,e){return this._pipeline}initializePipeline(i){return o({blending:s,colorWrite:a})}}export{n as ShaderTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import{NoParameters as t}from\"../shaderModules/interfaces.js\";import{ShaderTechniqueConfigurationKey as r}from\"./ShaderTechniqueConfigurationKey.js\";class a extends t{constructor(){super(),this._parameterBits=this._parameterBits?.map((()=>0))??[],this._parameterNames??=[]}get key(){return this._key??=new r(this._parameterBits),this._key}decode(e=this.key){const t=this._parameterBits;this._parameterBits=[...e.bits];const r=this._parameterNames.map((e=>`    ${e}: ${this[e]}`)).join(\"\\n\");return this._parameterBits=t,r}}function i(t={}){return(r,a)=>{r.hasOwnProperty(\"_parameterNames\")||Object.defineProperty(r,\"_parameterNames\",{value:r._parameterNames?.slice()??[],configurable:!0,writable:!0}),r.hasOwnProperty(\"_parameterBits\")||Object.defineProperty(r,\"_parameterBits\",{value:r._parameterBits?.slice()??[0],configurable:!0,writable:!0}),r._parameterNames.push(a);const i=t.count||2,s=Math.ceil(Math.log2(i)),o=r._parameterBits;let n=0;for(;o[n]+s>16;)n++,n>=o.length&&o.push(0);const p=o[n],m=(1<<s)-1<<p;o[n]+=s,t.count?Object.defineProperty(r,a,{get(){return(this._parameterBits[n]&m)>>p},set(r){if(this[a]!==r){if(this._key=null,this._parameterBits[n]=this._parameterBits[n]&~m|+r<<p&m,\"number\"!=typeof r)throw new e(`Configuration value for ${a} must be a number, got ${typeof r}`);if(null==t.count)throw new e(`Configuration value for ${a} must provide a count option`)}}}):Object.defineProperty(r,a,{get(){return!!((this._parameterBits[n]&m)>>p)},set(t){if(this[a]!==t&&(this._key=null,this._parameterBits[n]=this._parameterBits[n]&~m|+t<<p&m,\"boolean\"!=typeof t))throw new e(`Configuration value for ${a} must be boolean, got ${typeof t}`)}})}}export{a as ShaderTechniqueConfiguration,i as parameter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{equals as t}from\"../../../../../core/arrayUtils.js\";class s{constructor(t){this._bits=[...t]}equals(s){return t(this._bits,s.bits)}get code(){return this._code??=String.fromCharCode(...this._bits),this._code}get bits(){return this._bits}}export{s as ShaderTechniqueConfigurationKey};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport has from\"../../../../../core/has.js\";function e(){return!!has(\"enable-feature:objectAndLayerId-rendering\")}export{e as olidEnabled};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{clamp as r}from\"../../../../../core/mathUtils.js\";import{disposeMaybe as s}from\"../../../../../core/maybe.js\";import{watch as t}from\"../../../../../core/reactiveUtils.js\";import{Milliseconds as i}from\"../../../../../core/time.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{set as m}from\"../../../../../core/libs/gl-matrix-2/math/vec2.js\";import{InternalRenderCategory as n}from\"../../../webgl.js\";import{ColorFormat as c}from\"../../../webgl/formats.js\";import p from\"../../../webgl/RenderNode.js\";import{distanceFadeEnd as h,distanceFadeStart as l}from\"../../core/shaderLibrary/shading/ScreenSpaceConstants.js\";import{SSAOBlurTechnique as u}from\"./SSAOBlurTechnique.js\";import{noiseData as d}from\"./SSAONoiseData.js\";import{SSAOPassParameters as f,BlurDrawParameters as b}from\"./SSAOParameters.js\";import{SSAOTechnique as w}from\"./SSAOTechnique.js\";import{RenderRequestType as T}from\"../../lib/basicInterfaces.js\";import{g as S}from\"../../../../../chunks/SSAO.glsl.js\";import{TextureWrapMode as _,PixelFormat as P,DepthStencilAttachment as j,FramebufferBit as g}from\"../../../../webgl/enums.js\";import{Texture as x}from\"../../../../webgl/Texture.js\";import{TextureDescriptor as q}from\"../../../../webgl/TextureDescriptor.js\";const A=2;let O=class extends p{constructor(e){super(e),this.consumes={required:[\"normals\"]},this.produces=n.SSAO,this.isEnabled=()=>!1,this._enableTime=i(0),this._passParameters=new f,this._drawParameters=new b}initialize(){const e=Uint8Array.from(atob(d),(e=>e.charCodeAt(0))),r=new q;r.wrapMode=_.CLAMP_TO_EDGE,r.pixelFormat=P.RGB,r.wrapMode=_.REPEAT,r.hasMipmap=!0,r.width=32,r.height=32,this._passParameters.noiseTexture=new x(this.renderingContext,r,e),this.techniques.precompile(w),this.techniques.precompile(u),this.addHandles(t((()=>this.isEnabled()),(()=>this._enableTime=i(0))))}destroy(){this._passParameters.noiseTexture=s(this._passParameters.noiseTexture)}render(e){const s=this.bindParameters,t=e.find((({name:e})=>\"normals\"===e)),o=t?.getTexture(),a=t?.getTexture(j),p=this.fboCache,d=s.camera,f=d.fullViewport[2],b=d.fullViewport[3],_=Math.round(f/A),P=Math.round(b/A),x=this.techniques.acquire(w),q=this.techniques.acquire(u);if(!x.compiled||!q.compiled)return this._enableTime=i(performance.now()),this.requestRender(T.UPDATE),x.release(),q.release(),p.acquire(_,P,n.SSAO,c.RED);0===this._enableTime&&(this._enableTime=i(performance.now()));const O=this.renderingContext,E=this.view.qualitySettings.fadeDuration,v=d.relativeElevation,R=r((h-v)/(h-l),0,1),C=E>0?Math.min(E,performance.now()-this._enableTime)/E:1,D=C*R;this._passParameters.normalTexture=o,this._passParameters.depthTexture=a,this._passParameters.projScale=1/d.computeScreenPixelSizeAtDist(1),this._passParameters.intensity=4*y/S(d)**6*D;const V=p.acquire(f,b,\"ssao input\",c.RG);O.bindFramebuffer(V.fbo),O.setViewport(0,0,f,b),O.bindTechnique(x,s,this._passParameters,this._drawParameters),O.screen.draw(),x.release();const M=p.acquire(_,P,\"ssao blur\",c.RED);O.bindFramebuffer(M.fbo),this._drawParameters.colorTexture=V.getTexture(),m(this._drawParameters.blurSize,0,A/b),O.bindTechnique(q,s,this._passParameters,this._drawParameters),O.setViewport(0,0,_,P),O.screen.draw(),V.release();const L=p.acquire(_,P,n.SSAO,c.RED);return O.bindFramebuffer(L.fbo),O.setViewport(0,0,f,b),O.setClearColor(1,1,1,0),O.clear(g.COLOR),this._drawParameters.colorTexture=M.getTexture(),m(this._drawParameters.blurSize,A/f,0),O.bindTechnique(q,s,this._passParameters,this._drawParameters),O.setViewport(0,0,_,P),O.screen.draw(),q.release(),O.setViewport4fv(d.fullViewport),M.release(),C<1&&this.requestRender(T.UPDATE),L}};e([o()],O.prototype,\"consumes\",void 0),e([o()],O.prototype,\"produces\",void 0),e([o({constructOnly:!0})],O.prototype,\"techniques\",void 0),e([o({constructOnly:!0})],O.prototype,\"isEnabled\",void 0),O=e([a(\"esri.views.3d.webgl-engine.effects.ssao.SSAO\")],O);const y=.5;export{O as SSAO,A as blurSizePixels};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{S as o}from\"../../../../../chunks/SSAOBlur.glsl.js\";import{makePipelineState as s,defaultColorWrite as i}from\"../../../../webgl/renderState.js\";class l extends r{constructor(r,s,i){super(r,s,new e(o,(()=>import(/* webpackChunkName: \"shaders-SSAOBlur.glsl\" */ \"../../shaders/SSAOBlur.glsl.js\"))),i)}initializePipeline(){return s({colorWrite:i})}}export{l as SSAOBlurTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e=\"eXKEvZaUc66cjIKElE1jlJ6MjJ6Ufkl+jn2fcXp5jBx7c6KEflSGiXuXeW6OWs+tfqZ2Yot2Y7Zzfo2BhniEj3xoiXuXj4eGZpqEaHKDWjSMe7palFlzc3BziYOGlFVzg6Zzg7CUY5JrjFF7eYJ4jIKEcyyEonSXe7qUfqZ7j3xofqZ2c4R5lFZ5Y0WUbppoe1l2cIh2ezyUho+BcHN2cG6DbpqJhqp2e1GcezhrdldzjFGUcyxjc3aRjDyEc1h7Sl17c6aMjH92pb6Mjpd4dnqBjMOEhqZleIOBYzB7gYx+fnqGjJuEkWlwnCx7fGl+c4hjfGyRe5qMlNOMfnqGhIWHc6OMi4GDc6aMfqZuc6aMzqJzlKZ+lJ6Me3qRfoFue0WUhoR5UraEa6qMkXiPjMOMlJOGe7JrUqKMjK6MeYRzdod+Sl17boiPc6qEeYBlcIh2c1WEe7GDiWCDa0WMjEmMdod+Y0WcdntzhmN8WjyMjKJjiXtzgYxYaGd+a89zlEV7e2GJfnd+lF1rcK5zc4p5cHuBhL6EcXp5eYB7fnh8iX6HjIKEeaxuiYOGc66RfG2Ja5hzjlGMjEmMe9OEgXuPfHyGhPeEdl6JY02McGuMfnqGhFiMa3WJfnx2l4hwcG1uhmN8c0WMc39og1GBbrCEjE2EZY+JcIh2cIuGhIWHe0mEhIVrc09+gY5+eYBlnCyMhGCDl3drfmmMgX15aGd+gYx+fnuRfnhzY1SMsluJfnd+hm98WtNrcIuGh4SEj0qPdkqOjFF7jNNjdnqBgaqUjMt7boeBhnZ4jDR7c5pze4GGjEFrhLqMjHyMc0mUhKZze4WEa117kWlwbpqJjHZ2eX2Bc09zeId+e0V7WlF7jHJ2l72BfId8l3eBgXyBe897jGl7c66cgW+Xc76EjKNbgaSEjGx4fId8jFFjgZB8cG6DhlFziZhrcIh2fH6HgUqBgXiPY8dahGFzjEmMhEFre2dxhoBzc5SGfleGe6alc7aUeYBlhKqUdlp+cH5za4OEczxza0Gcc4J2jHZ5iXuXjH2Jh5yRjH2JcFx+hImBjH+MpddCl3dreZeJjIt8ZW18bm1zjoSEeIOBlF9oh3N7hlqBY4+UeYFwhLJjeYFwaGd+gUqBYxiEYot2fqZ2ondzhL6EYyiEY02Ea0VjgZB8doaGjHxoc66cjEGEiXuXiXWMiZhreHx8frGMe75rY02Ec5pzfnhzlEp4a3VzjM+EhFFza3mUY7Zza1V5e2iMfGyRcziEhDyEkXZ2Y4OBnCx7g5t2eyBjgV6EhEFrcIh2dod+c4Z+nJ5zjm15jEmUeYxijJp7nL6clIpjhoR5WrZraGd+fnuRa6pzlIiMg6ZzfHx5foh+eX1ufnB5eX1ufnB5aJt7UqKMjIh+e3aBfm5lbYSBhGFze6J4c39oc0mUc4Z+e0V7fKFVe0WEdoaGY02Ec4Z+Y02EZYWBfH6HgU1+gY5+hIWUgW+XjJ57ebWRhFVScHuBfJ6PhBx7WqJzlM+Ujpd4gHZziX6HjHmEgZN+lJt5boiPe2GJgX+GjIGJgHZzeaxufnB5hF2JtdN7jJ57hp57hK6ElFVzg6ZzbmiEbndzhIWHe3uJfoFue3qRhJd2j3xoc65zlE1jc3p8lE1jhniEgXJ7e657vZaUc3qBh52BhIF4aHKDa9drgY5+c52GWqZzbpqJe8tjnM+UhIeMfo2BfGl+hG1zSmmMjKJjZVaGgX15c1lze0mEp4OHa3mUhIWHhDyclJ6MeYOJkXiPc0VzhFiMlKaEboSJa5Jze41re3qRhn+HZYWBe0mEc4p5fnORbox5lEp4hGFjhGGEjJuEc1WEhLZjeHeGa7KlfHx2hLaMeX1ugY5+hIWHhKGPjMN7c1WEho1zhoBzZYx7fnhzlJt5exyUhFFziXtzfmmMa6qMYyiEiXxweV12kZSMeWqXSl17fnhzxmmMrVGEe1mcc4p5eHeGjK6MgY5+doaGa6pzlGV7g1qBh4KHkXiPeW6OaKqafqZ2eXZ5e1V7jGd7boSJc3BzhJd2e0mcYot2h1RoY8dahK6EQmWEWjx7e1l2lL6UgXyBdnR4eU9zc0VreX1umqaBhld7fo2Bc6KEc5Z+hDyEcIeBWtNrfHyGe5qMhMuMe5qMhEGEbVVupcNzg3aHhIF4boeBe0mEdlptc39ofFl5Y8uUlJOGiYt2UmGEcyxjjGx4jFF7a657ZYWBnElzhp57iXtrgZN+tfOEhIOBjE2HgU1+e8tjjKNbiWCDhE15gUqBgYN7fnqGc66ce9d7iYSBj0qPcG6DnGGcT3eGa6qMZY+JlIiMl4hwc3aRdnqBlGV7eHJ2hLZjfnuRhDyEeX6MSk17g6Z+c6aUjHmEhIF4gXyBc76EZW18fGl+fkl+jCxrhoVwhDyUhIqGlL2DlI6EhJd2tdN7eYORhEGMa2Faa6pzc3Bzc4R5lIRznM+UY9eMhDycc5Z+c4p5c4iGY117pb6MgXuPrbJafnx2eYOJeXZ5e657hDyEcziElKZjfoB5eHeGj4WRhGGEe6KGeX1utTStc76EhFGJnCyMa5hzfH6HnNeceYB7hmN8gYuMhIVrczSMgYF8h3N7c5pza5hzjJqEYIRdgYuMlL2DeYRzhGGEeX1uhLaEc4iGeZ1zdl6JhrVteX6Me2iMfm5lWqJzSpqEa6pzdnmchHx2c6OMhNdrhoR5g3aHczxzeW52gV6Ejm15frGMc0Vzc4Z+l3drfniJe+9rWq5rlF1rhGGEhoVwe9OEfoh+e7pac09+c3qBY0lrhDycdnp2lJ6MiYOGhGCDc3aRlL2DlJt5doaGdnp2gYF8gWeOjF2Uc4R5c5Z+jEmMe7KEc4mEeYJ4dmyBe0mcgXiPbqJ7eYB7fmGGiYSJjICGlF1reZ2PnElzbpqJfH6Hc39oe4WEc5eJhK6EhqyJc3qBgZB8c09+hEmEaHKDhFGJc5SGiXWMUpaEa89zc6OMnCyMiXtrho+Be5qMc7KEjJ57dmN+hKGPjICGbmiEe7prdod+hGCDdnmchBx7eX6MkXZ2hGGEa657hm98jFFjY5JreYOJgY2EjHZ2a295Y3FajJ6Mc1J+YzB7e4WBjF2Uc4R5eV12gYxzg1qBeId+c9OUc5pzjFFjgY5+hFiMlIaPhoR5lIpjjIKBlNdSe7KEeX2BfrGMhIqGc65zjE2UhK6EklZ+QmWEeziMWqZza3VzdnR4foh+gYF8n3iJiZhrnKp7gYF8eId+lJ6Me1lrcIuGjKJjhmN8c66MjFF7a6prjJ6UnJ5zezyUfruRWlF7nI5zfHyGe657h4SEe8tjhBx7jFFjc09+c39ojICMeZeJeXt+YzRzjHZ2c0WEcIeBeXZ5onSXkVR+gYJ+eYFwdldzgYF7eX2BjJ6UiXuXlE1jh4SEe1mchLJjc4Z+hqZ7eXZ5bm1zlL6Ue5p7iWeGhKqUY5pzjKJjcIeBe8t7gXyBYIRdlEp4a3mGnK6EfmmMZpqEfFl5gYxzjKZuhGFjhoKGhHx2fnx2eXuMe3aBiWeGvbKMe6KGa5hzYzB7gZOBlGV7hmN8hqZlYot2Y117a6pzc6KEfId8foB5rctrfneJfJ6PcHN2hFiMc5pzjH92c0VzgY2EcElzdmCBlFVzg1GBc65zY4OBboeBcHiBeYJ4ewxzfHx5lIRzlEmEnLKEbk1zfJ6PhmN8eYBljBiEnMOEiXxwezyUcIeBe76EdsKEeX2BdnR4jGWUrXWMjGd7fkl+j4WRlEGMa5Jzho+BhDyEfnqMeXt+g3aHlE1jczClhNN7ZW18eHx8hGFjZW18iXWMjKJjhH57gYuMcIuGWjyMe4ZtjJuExmmMj4WRdntzi4GDhFFzYIRdnGGcjJp7Y0F7e4WEkbCGiX57fnSHa657a6prhBCMe3Z+SmmMjH92eHJ2hK6EY1FzexhrvbKMnI5za4OEfnd+eXuMhImBe897hLaMjN+EfG+BeIOBhF1+eZeJi4GDkXZ2eXKEgZ6Ejpd4c2GHa1V5e5KUfqZuhCx7jKp7lLZrg11+hHx2hFWUoot2nI5zgbh5mo9zvZaUe3qRbqKMfqZ2kbCGhFiM\";export{e as noiseData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as s}from\"../../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{NoParameters as e}from\"../../core/shaderModules/interfaces.js\";class r extends e{constructor(){super(...arguments),this.projScale=1}}class t extends r{constructor(){super(...arguments),this.intensity=1}}class c extends e{}class o extends c{constructor(){super(...arguments),this.blurSize=s()}}export{o as BlurDrawParameters,r as BlurPassParameters,c as SSAODrawParameters,t as SSAOPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{S as o}from\"../../../../../chunks/SSAO.glsl.js\";import{makePipelineState as s,defaultColorWrite as i}from\"../../../../webgl/renderState.js\";class t extends r{constructor(r,s,i){super(r,s,new e(o,(()=>import(/* webpackChunkName: \"shaders-SSAO.glsl\" */ \"../../shaders/SSAO.glsl.js\"))),i)}initializePipeline(){return s({colorWrite:i})}}export{t as SSAOTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass s{constructor(s,t,i=t){this.data=s,this.size=t,this.stride=i}}class t extends s{constructor(s,t,i,e=!1,c=i){super(s,i,c),this.indices=t,this.exclusive=e}}export{t as Attribute,s as Vertices};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{nativeArrayMaxSize as r,isArray as t,isUint16Array as a}from\"../../../../core/typedArrayUtil.js\";function o(o){if(o.length<r)return Array.from(o);if(t(o))return Float64Array.from(o);if(!(\"BYTES_PER_ELEMENT\"in o))return Array.from(o);switch(o.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(o);case 2:return a(o)?Uint16Array.from(o):Int16Array.from(o);case 4:return Float32Array.from(o);default:return Float64Array.from(o)}}export{o as cloneAttributeData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getBasisTranscoder as e}from\"../../../../libs/basisu/BasisU.js\";import{TextureFormat as t}from\"../../../../libs/basisu/TextureFormat.js\";import{CompressedTextureFormat as n,PixelFormat as s,TextureSamplingMode as r}from\"../../../webgl/enums.js\";import{Texture as i}from\"../../../webgl/Texture.js\";import{getBytesPerElementFormat as a}from\"../../../webgl/Util.js\";let l=null,o=null;async function g(){return null==o&&(o=e(),l=await o),o}function u(e,t){if(null==l)return e.byteLength;const n=new l.BasisFile(new Uint8Array(e)),s=E(n)?m(n.getNumLevels(0),n.getHasAlpha(),n.getImageWidth(0,0),n.getImageHeight(0,0),t):0;return n.close(),n.delete(),s}function c(e,t){if(null==l)return e.byteLength;const n=new l.KTX2File(new Uint8Array(e)),s=T(n)?m(n.getLevels(),n.getHasAlpha(),n.getWidth(),n.getHeight(),t):0;return n.close(),n.delete(),s}function m(e,t,s,r,i){const l=a(t?n.COMPRESSED_RGBA8_ETC2_EAC:n.COMPRESSED_RGB8_ETC2),o=i&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(s*r*l*o)}function E(e){return e.getNumImages()>=1&&!e.isUASTC()}function T(e){return e.getFaces()>=1&&e.isETC1S()}async function h(e,t,n){null==l&&(l=await g());const s=new l.BasisFile(new Uint8Array(n));if(!E(s))return null;s.startTranscoding();const r=p(e,t,s.getNumLevels(0),s.getHasAlpha(),s.getImageWidth(0,0),s.getImageHeight(0,0),((e,t)=>s.getImageTranscodedSizeInBytes(0,e,t)),((e,t,n)=>s.transcodeImage(n,0,e,t,0,0)));return s.close(),s.delete(),r}async function _(e,t,n){null==l&&(l=await g());const s=new l.KTX2File(new Uint8Array(n));if(!T(s))return null;s.startTranscoding();const r=p(e,t,s.getLevels(),s.getHasAlpha(),s.getWidth(),s.getHeight(),((e,t)=>s.getImageTranscodedSizeInBytes(e,0,0,t)),((e,t,n)=>s.transcodeImage(n,e,0,0,t,0,-1,-1)));return s.close(),s.delete(),r}function p(e,a,l,o,g,u,c,m){const{compressedTextureETC:E,compressedTextureS3TC:T}=e.capabilities,[h,_]=E?o?[t.ETC2_RGBA,n.COMPRESSED_RGBA8_ETC2_EAC]:[t.ETC1_RGB,n.COMPRESSED_RGB8_ETC2]:T?o?[t.BC3_RGBA,n.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[t.BC1_RGB,n.COMPRESSED_RGB_S3TC_DXT1_EXT]:[t.RGBA32,s.RGBA],p=a.hasMipmap?l:Math.min(1,l),A=[];for(let t=0;t<p;t++)A.push(new Uint8Array(c(t,h))),m(t,h,A[t]);return a.internalFormat=_,a.hasMipmap=A.length>1,a.samplingMode=a.hasMipmap?r.LINEAR_MIPMAP_LINEAR:r.LINEAR,a.width=g,a.height=u,new i(e,a,{type:\"compressed\",levels:A})}export{h as createTextureBasis,_ as createTextureKTX2,u as estimateMemoryBasis,c as estimateMemoryKTX2,g as loadBasis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport i from\"../../../../core/PooledArray.js\";import{m as t,s as e}from\"../../../../chunks/vec32.js\";import{fromValues as s,clone as r,create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{assert as h}from\"./Util.js\";class o{constructor(i,e,o){this.primitiveIndices=i,this._numIndexPerPrimitive=e,this.position=o,this._children=void 0,h(i.length>=1),h(3===o.size||4===o.size);const{data:c,size:l,indices:m}=o;h(m.length%this._numIndexPerPrimitive==0),h(m.length>=i.length*this._numIndexPerPrimitive);const d=i.length;let u=l*m[this._numIndexPerPrimitive*i[0]];a.clear(),a.push(u);const f=s(c[u],c[u+1],c[u+2]),x=r(f);for(let t=0;t<d;++t){const e=this._numIndexPerPrimitive*i[t];for(let i=0;i<this._numIndexPerPrimitive;++i){u=l*m[e+i],a.push(u);let t=c[u];f[0]=Math.min(t,f[0]),x[0]=Math.max(t,x[0]),t=c[u+1],f[1]=Math.min(t,f[1]),x[1]=Math.max(t,x[1]),t=c[u+2],f[2]=Math.min(t,f[2]),x[2]=Math.max(t,x[2])}}this.bbMin=f,this.bbMax=x;const P=t(n(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(x[0]-f[0],x[1]-f[1]),x[2]-f[2]);let v=this.radius*this.radius;for(let t=0;t<a.length;++t){u=a.at(t);const i=c[u]-P[0],e=c[u+1]-P[1],s=c[u+2]-P[2],r=i*i+e*e+s*s;if(r<=v)continue;const n=Math.sqrt(r),h=.5*(n-this.radius);this.radius=this.radius+h,v=this.radius*this.radius;const o=h/n;P[0]+=i*o,P[1]+=e*o,P[2]+=s*o}this.center=P,a.clear()}getChildren(){if(this._children||e(this.bbMin,this.bbMax)<=1)return this._children;const i=t(n(),this.bbMin,this.bbMax,.5),s=this.primitiveIndices.length,r=new Uint8Array(s),h=new Array(8);for(let t=0;t<8;++t)h[t]=0;const{data:a,size:c,indices:l}=this.position;for(let t=0;t<s;++t){let e=0;const s=this._numIndexPerPrimitive*this.primitiveIndices[t];let n=c*l[s],o=a[n],m=a[n+1],d=a[n+2];for(let i=1;i<this._numIndexPerPrimitive;++i){n=c*l[s+i];const t=a[n],e=a[n+1],r=a[n+2];t<o&&(o=t),e<m&&(m=e),r<d&&(d=r)}o<i[0]&&(e|=1),m<i[1]&&(e|=2),d<i[2]&&(e|=4),r[t]=e,++h[e]}let m=0;for(let t=0;t<8;++t)h[t]>0&&++m;if(m<2)return;const d=new Array(8);for(let t=0;t<8;++t)d[t]=h[t]>0?new Uint32Array(h[t]):void 0;for(let t=0;t<8;++t)h[t]=0;for(let t=0;t<s;++t){const i=r[t];d[i][h[i]++]=this.primitiveIndices[t]}this._children=new Array;for(let t=0;t<8;++t)void 0!==d[t]&&this._children.push(new o(d[t],this._numIndexPerPrimitive,this.position));return this._children}static prune(){a.prune()}}const a=new i({deallocator:null});export{o as BoundingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{generateUID as o}from\"../../../../core/uid.js\";class r{constructor(){this.id=o()}}export{r as ContentObject};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar e;!function(e){e[e.Layer=0]=\"Layer\",e[e.Object=1]=\"Object\",e[e.Mesh=2]=\"Mesh\",e[e.Line=3]=\"Line\",e[e.Point=4]=\"Point\",e[e.Material=5]=\"Material\",e[e.Texture=6]=\"Texture\",e[e.COUNT=7]=\"COUNT\"}(e||(e={}));export{e as ContentObjectType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{TextureSamplingMode as t,CompressedTextureFormat as r}from\"../../../webgl/enums.js\";import{Texture as n}from\"../../../webgl/Texture.js\";const o=()=>e.getLogger(\"esri.views.3d.webgl-engine.lib.DDSUtil\"),a=542327876,i=131072,s=4;function l(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function u(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const c=l(\"DXT1\"),h=l(\"DXT3\"),m=l(\"DXT5\"),f=31,d=0,p=1,g=2,D=3,C=4,w=7,T=20,_=21;function E(e,r,o){const a=S(o,r.hasMipmap??!1);if(null==a)throw new Error(\"DDS texture data is null\");const{textureData:i,internalFormat:s,width:l,height:u}=a;return r.samplingMode=i.levels.length>1?t.LINEAR_MIPMAP_LINEAR:t.LINEAR,r.hasMipmap=i.levels.length>1,r.internalFormat=s,r.width=l,r.height=u,new n(e,r,i)}function S(e,t){const n=new Int32Array(e.buffer,e.byteOffset,f);if(n[d]!==a)return o().error(\"Invalid magic number in DDS header\"),null;if(!(n[T]&s))return o().error(\"Unsupported format, must contain a FourCC code\"),null;const l=n[_];let E,S;switch(l){case c:E=8,S=r.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case h:E=16,S=r.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case m:E=16,S=r.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return o().error(\"Unsupported FourCC code:\",u(l)),null}let b=1,A=n[C],M=n[D];(3&A||3&M)&&(o().warn(\"Rounding up compressed texture size to nearest multiple of 4.\"),A=A+3&-4,M=M+3&-4);const x=A,R=M;let X,I;n[g]&i&&!1!==t&&(b=Math.max(1,n[w]));let v=e.byteOffset+n[p]+4;const y=[];for(let r=0;r<b;++r)I=(A+3>>2)*(M+3>>2)*E,X=new Uint8Array(e.buffer,v,I),y.push(X),v+=I,A=Math.max(1,A>>1),M=Math.max(1,M>>1);return{textureData:{type:\"compressed\",levels:y},internalFormat:S,width:x,height:R}}export{E as createDDSTexture,S as createDDSTextureData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VertexAttribute as E}from\"./VertexAttribute.js\";const O=new Map([[E.POSITION,0],[E.NORMAL,1],[E.NORMALCOMPRESSED,1],[E.UV0,2],[E.COLOR,3],[E.COLORFEATUREATTRIBUTE,3],[E.SIZE,4],[E.TANGENT,4],[E.CENTEROFFSETANDDISTANCE,5],[E.SYMBOLCOLOR,5],[E.FEATUREATTRIBUTE,6],[E.INSTANCEFEATUREATTRIBUTE,6],[E.INSTANCECOLOR,7],[E.OBJECTANDLAYERIDCOLOR,7],[E.INSTANCEOBJECTANDLAYERIDCOLOR,7],[E.ROTATION,8],[E.INSTANCEMODEL,8],[E.INSTANCEMODELNORMAL,12],[E.INSTANCEMODELORIGINHI,11],[E.INSTANCEMODELORIGINLO,15]]);export{O as Default3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ResourceState as e}from\"./basicInterfaces.js\";class t{constructor(e){this._material=e.material,this._techniques=e.techniques,this._output=e.output}dispose(){}get _stippleTextures(){return this._techniques.context.stippleTextures}get _markerTextures(){return this._techniques.context.markerTextures}acquireTechnique(e,t){return this._techniques.acquire(e,this._material.getConfiguration(this._output,t))}ensureResources(t){return e.LOADED}}export{t as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as t}from\"../../../../core/maybe.js\";import{isPromiseLike as e}from\"../../../../core/promiseUtils.js\";import{NoParameters as s}from\"../core/shaderModules/interfaces.js\";import{ResourceState as i}from\"./basicInterfaces.js\";import r from\"./GLMaterial.js\";class u extends r{constructor(t){super(t),this._numLoading=0,this._disposed=!1,this._textures=t.textures,this._textureId=t.textureId,this._acquire(t.textureId,(t=>this._texture=t)),this._acquire(t.normalTextureId,(t=>this._textureNormal=t)),this._acquire(t.emissiveTextureId,(t=>this._textureEmissive=t)),this._acquire(t.occlusionTextureId,(t=>this._textureOcclusion=t)),this._acquire(t.metallicRoughnessTextureId,(t=>this._textureMetallicRoughness=t))}dispose(){super.dispose(),this._texture=t(this._texture),this._textureNormal=t(this._textureNormal),this._textureEmissive=t(this._textureEmissive),this._textureOcclusion=t(this._textureOcclusion),this._textureMetallicRoughness=t(this._textureMetallicRoughness),this._disposed=!0}ensureResources(t){return 0===this._numLoading?i.LOADED:i.LOADING}get textureBindParameters(){return new h(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}updateTexture(e){null!=this._texture&&e===this._texture.id||(this._texture=t(this._texture),this._textureId=e,this._acquire(this._textureId,(t=>this._texture=t)))}_acquire(s,i){if(null==s)return void i(null);const r=this._textures.acquire(s);if(e(r))return++this._numLoading,void r.then((e=>{if(this._disposed)return t(e),void i(null);i(e)})).finally((()=>--this._numLoading));i(r)}}class l extends s{constructor(t=null){super(),this.textureEmissive=t}}class h extends l{constructor(t=null,e=null,s=null,i=null,r=null,u,l){super(s),this.texture=t,this.textureNormal=e,this.textureOcclusion=i,this.textureMetallicRoughness=r,this.scale=u,this.normalTextureTransformMatrix=l}}export{l as GLEmissiveTexturePassParameters,u as GLTextureMaterial,h as GLTextureMaterialBindParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{IDENTITY as t,clone as i}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as e}from\"../../../../chunks/vec32.js\";import{compactIndices as s,getContinuousIndexArray as n}from\"../../../../geometry/support/Indices.js\";import{cloneAttributeData as r}from\"./AttributeArray.js\";import{BoundingInfo as h}from\"./BoundingInfo.js\";import{ContentObject as o}from\"./ContentObject.js\";import{ContentObjectType as u}from\"./ContentObjectType.js\";import{computeAttachmentOriginTriangles as g,computeAttachmentOriginLines as a,computeAttachmentOriginPoints as l}from\"./geometryDataUtils.js\";import{Object3DHighlightStateID as c}from\"./Object3DStateID.js\";import{assert as m}from\"./Util.js\";import{VertexAttribute as d}from\"./VertexAttribute.js\";class p extends o{constructor(t,i,e=null,n=u.Mesh,r=null,h=-1){super(),this.material=t,this.mapPositions=e,this.type=n,this.objectAndLayerIdColor=r,this.edgeIndicesLength=h,this.highlights=new Set,this._highlightGroupCounts=new Map,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[o,u]of i)this._attributes.set(o,{...u,indices:s(u.indices)}),o===d.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(o).indices.length:this.edgeIndicesLength)}instantiate(t={}){const i=new p(t.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach(((t,e)=>{t.exclusive=!1,i._attributes.set(e,t)})),i._boundingInfo=this._boundingInfo,i.transformation=t.transformation||this.transformation,i}get attributes(){return this._attributes}getMutableAttribute(t){let i=this._attributes.get(t);return i&&!i.exclusive&&(i={...i,exclusive:!0,data:r(i.data)},this._attributes.set(t,i)),i}setAttributeData(t,i){const e=this._attributes.get(t);e&&this._attributes.set(t,{...e,exclusive:!0,data:i})}get indexCount(){const t=this._attributes.values().next().value.indices;return t?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return!!(this.type===u.Mesh?this._computeAttachmentOriginTriangles(t):this.type===u.Line?this._computeAttachmentOriginLines(t):this._computeAttachmentOriginPoints(t))&&(null!=this._transformation&&e(t,t,this._transformation),!0)}_computeAttachmentOriginTriangles(t){const i=this.attributes.get(d.POSITION);return g(i,t)}_computeAttachmentOriginLines(t){const i=this.attributes.get(d.POSITION);return a(i,f(this.material.parameters,i),t)}_computeAttachmentOriginPoints(t){const i=this.attributes.get(d.POSITION);return l(i,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.attributes.get(d.POSITION);if(!t||0===t.indices.length)return null;const i=this.type===u.Mesh?3:1;m(t.indices.length%i==0,\"Indexing error: \"+t.indices.length+\" not divisible by \"+i);const e=n(t.indices.length/i);return new h(e,i,t)}get transformation(){return this._transformation??t}set transformation(e){this._transformation=e&&e!==t?i(e):null}get highlightGroups(){return this._highlightGroupCounts}get hasHighlights(){return this._highlightGroupCounts.size>0}foreachHighlightGroup(t){this._highlightGroupCounts.forEach(((i,e)=>t(e)))}allocateIdAndHighlight(t){const i=new c(t);return this.addHighlight(i)}addHighlight(t){this.highlights.add(t);const{highlightGroupName:i}=t,e=(this._highlightGroupCounts.get(i)??0)+1;return this._highlightGroupCounts.set(i,e),t}removeHighlight(t){if(this.highlights.delete(t)){const{highlightGroupName:i}=t,e=this._highlightGroupCounts.get(i)??0;e<=1?this._highlightGroupCounts.delete(i):this._highlightGroupCounts.set(i,e-1)}}}function f(t,i){return!(!(\"isClosed\"in t)||!t.isClosed)&&i.indices.length>2}export{p as Geometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}export{l as add,t as dotProduct,n as elementwiseProduct,e as scalarProduct};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{fromValues as e}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{NoParameters as r}from\"../core/shaderModules/interfaces.js\";import{ContentObject as t}from\"./ContentObject.js\";import{ContentObjectType as s}from\"./ContentObjectType.js\";import{Default3D as i}from\"./DefaultVertexAttributeLocations.js\";import{updateParameters as a}from\"../materials/internal/MaterialUtil.js\";class n extends t{constructor(r,t){super(),this.type=s.Material,this.supportsEdges=!1,this._renderPriority=0,this.vertexAttributeLocations=i,this._pp0=e(0,0,1),this._pp1=e(0,0,0),this._parameters=new t,a(this._parameters,r),this.validateParameters(this._parameters)}get parameters(){return this._parameters}update(e){return!1}setParameters(e,r=!0){a(this._parameters,e)&&(this.validateParameters(this._parameters),r&&this._parametersChanged())}validateParameters(e){}shouldRender(e){return this.visible&&this.isVisibleForOutput(e.output)&&(!this.parameters.isDecoration||e.bind.decorations)&&!!(this.parameters.renderOccluded&e.renderOccludedMask)}isVisibleForOutput(e){return!0}get renderPriority(){return this._renderPriority}set renderPriority(e){e!==this._renderPriority&&(this._renderPriority=e,this._parametersChanged())}_parametersChanged(){this.repository?.materialChanged(this)}queryRenderOccludedState(e){return this.visible&&this.parameters.renderOccluded===e}get hasEmissions(){return!1}intersectDraped(e,r,t,s,i,a){return this._pp0[0]=this._pp1[0]=s[0],this._pp0[1]=this._pp1[1]=s[1],this.intersect(e,r,t,this._pp0,this._pp1,i)}}var p;!function(e){e[e.None=0]=\"None\",e[e.Occlude=1]=\"Occlude\",e[e.Transparent=2]=\"Transparent\",e[e.OccludeAndTransparent=4]=\"OccludeAndTransparent\",e[e.OccludeAndTransparentStencil=8]=\"OccludeAndTransparentStencil\",e[e.Opaque=16]=\"Opaque\"}(p||(p={}));class d extends r{constructor(){super(...arguments),this.renderOccluded=p.Occlude,this.isDecoration=!1}}export{n as Material,d as MaterialParameters,p as RenderOccludedFlag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar o;!function(o){o[o.NONE=0]=\"NONE\",o[o.ColorAlpha=1]=\"ColorAlpha\",o[o.FrontFace=2]=\"FrontFace\",o[o.COUNT=3]=\"COUNT\"}(o||(o={}));export{o as OITPass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{generateUID as s}from\"../../../../core/uid.js\";import{Object3DState as t}from\"./basicInterfaces.js\";class c{constructor(){this.uid=s()}}class r extends c{constructor(s){super(),this.highlightGroupName=s,this.channel=t.Highlight}}class e extends c{constructor(){super(...arguments),this.channel=t.MaskOccludee}}export{r as Object3DHighlightStateID,e as Object3DOccludeeStateID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isColorEmission as r}from\"../core/shaderLibrary/ShaderOutput.js\";import{OITPass as e}from\"./OITPass.js\";import{BlendFactor as n,CompareFunction as t,ColorAttachment as o}from\"../../../webgl/enums.js\";import{separateBlendingParams as u,premultipliedAlphaToPremultipliedAlpha as s,defaultDepthWrite as c}from\"../../../webgl/renderState.js\";const O=u(n.ONE,n.ZERO,n.ONE,n.ONE_MINUS_SRC_ALPHA);function T(r){return r===e.FrontFace?null:O}function a(r){switch(r){case e.NONE:return s;case e.ColorAlpha:return O;case e.FrontFace:case e.COUNT:return null}}function l(r){if(r.draped)return null;switch(r.oitPass){case e.NONE:case e.FrontFace:return r.writeDepth?c:null;case e.ColorAlpha:case e.COUNT:return null}}const A=5e5,C={factor:-1,units:-2};function N(r){return r?C:null}function f(r,n=t.LESS){return r===e.NONE||r===e.FrontFace?n:t.LEQUAL}function i(n,t){const u=r(t);return n===e.ColorAlpha?u?{buffers:[o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1,o.COLOR_ATTACHMENT2]}:{buffers:[o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]}:u?{buffers:[o.COLOR_ATTACHMENT0,o.COLOR_ATTACHMENT1]}:null}export{C as OITPolygonOffset,A as OITPolygonOffsetLimit,a as blending,O as blendingColorAlpha,l as depthWrite,i as getDrawBuffers,N as getOITPolygonOffset,T as oitBlending,f as oitDepthTest};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/PooledArray.js\";import{webglDebugEnabled as e}from\"../../../webgl/checkWebGLError.js\";class r{constructor(r,i,s){this._context=r,this._locations=s,this._textures=new Map,this._freeTextureUnits=new t({deallocator:null}),this._glProgram=r.programCache.acquire(i.generate(\"vertex\"),i.generate(\"fragment\"),s),this._glProgram.stop=()=>{throw new Error(\"Wrapped _glProgram used directly\")},this.bindPass=i.generateBindPass(this),this.bindDraw=i.generateBindDraw(this),this._fragmentUniforms=e()?i.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get hasTransformFeedbackVaryings(){return this._glProgram.hasTransformFeedbackVaryings}get compiled(){return this._glProgram.compiled}setUniform1b(t,e){this._glProgram.setUniform1i(t,e?1:0)}setUniform1i(t,e){this._glProgram.setUniform1i(t,e)}setUniform1f(t,e){this._glProgram.setUniform1f(t,e)}setUniform2fv(t,e){this._glProgram.setUniform2fv(t,e)}setUniform3fv(t,e){this._glProgram.setUniform3fv(t,e)}setUniform4fv(t,e){this._glProgram.setUniform4fv(t,e)}setUniformMatrix3fv(t,e){this._glProgram.setUniformMatrix3fv(t,e)}setUniformMatrix4fv(t,e){this._glProgram.setUniformMatrix4fv(t,e)}setUniform1fv(t,e){this._glProgram.setUniform1fv(t,e)}setUniform1iv(t,e){this._glProgram.setUniform1iv(t,e)}setUniform2iv(t,e){this._glProgram.setUniform2iv(t,e)}setUniform3iv(t,e){this._glProgram.setUniform3iv(t,e)}setUniform4iv(t,e){this._glProgram.setUniform4iv(t,e)}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error(\"VertexAttributeLocations are incompatible\")}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(t,e){if(null==e?.glName){const e=this._textures.get(t);return e&&(this._context.bindTexture(null,e.unit),this._freeTextureUnit(e),this._textures.delete(t)),null}let r=this._textures.get(t);return null==r?(r=this._allocTextureUnit(e),this._textures.set(t,r)):r.texture=e,this._context.useProgram(this),this.setUniform1i(t,r.unit),this._context.bindTexture(e,r.unit),r.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach(((t,e)=>{this._context.bindTexture(t.texture,t.unit),this.setUniform1i(e,t.unit)})),this._fragmentUniforms?.forEach((t=>{\"sampler2D\"!==t.type&&\"samplerCube\"!==t.type||this._textures.has(t.name)||console.error(`Texture sampler ${t.name} has no bound texture`)}))}_allocTextureUnit(t){return{texture:t,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(t){this._freeTextureUnits.push(t.unit)}}export{r as Program};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{a as t,i as n,c as o,e as i,n as e}from\"../../../../chunks/vec32.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as c,setMin as r,setMax as a}from\"../../../../geometry/support/aaBoundingBox.js\";import{ContentObjectType as f}from\"./ContentObjectType.js\";import{assert as u}from\"./Util.js\";import{VertexAttribute as l}from\"./VertexAttribute.js\";class m{constructor(t=!1,n=!0){this.isVerticalRay=t,this.normalRequired=n}}const h=c();function p(n,o,i,e,s,c){if(!n.visible)return;const r=t(S,e,i),a=(t,n,o)=>{c(t,o,n,!1)},h=new m(!1,o.options.normalRequired);if(n.boundingInfo){u(n.type===f.Mesh);const t=o.tolerance;b(n.boundingInfo,i,r,t,s,h,a)}else{const t=n.attributes.get(l.POSITION),o=t.indices;V(i,r,0,o.length/3,o,t.data,t.stride,s,h,a)}}const M=s();function b(t,n,o,i,e,s,c){if(null==t)return;const f=C(o,M);if(r(h,t.bbMin),a(h,t.bbMax),null!=e&&e.applyToAabb(h),k(h,n,f,i)){const{primitiveIndices:r,position:a}=t,f=r?r.length:a.indices.length/3;if(f>N){const r=t.getChildren();if(void 0!==r){for(const t of r)b(t,n,o,i,e,s,c);return}}T(n,o,0,f,a.indices,a.data,a.stride,r,e,s,c)}}const d=s();function x(n,o,i,e,s,c,r,a,f){const{data:u,stride:l}=c;V(n,t(S,o,n),i,e,s,u,l,r,a,f)}function g(t,n,o,i,e,s,c,r,a,f=null,u=0){const l=t[0],m=t[1],h=t[2],p=n[0],M=n[1],b=n[2];for(let x=o;x<i;++x){const t=u+(f?f[x]:x),n=3*t,o=c*e[n],i=s[o],g=s[o+1],y=s[o+2],T=c*e[n+1],V=s[T],j=s[T+1],q=s[T+2],v=c*e[n+2],R=V-i,O=j-g,A=q-y,B=s[v]-i,C=s[v+1]-g,k=s[v+2]-y,w=M*k-C*b,N=b*B-k*p,S=p*C-B*M,U=R*w+O*N+A*S;if(Math.abs(U)<=P)continue;const z=l-i,D=m-g,E=h-y,F=z*w+D*N+E*S;if(U>0){if(F<0||F>U)continue}else if(F>0||F<U)continue;const G=D*A-O*E,H=E*R-A*z,J=z*O-R*D,K=p*G+M*H+b*J;if(U>0){if(K<0||F+K>U)continue}else if(K>0||F+K<U)continue;const L=(B*G+C*H+k*J)/U;if(L>=0){a(L,t,r?I(R,O,A,B,C,k,d):null)}}}function y(t,n,o,i,e,s,c,r,a,f,u,l=null,m=0){const h=t[0],p=t[1],M=t[2],b=n[0],x=n[1],g=n[2];for(let y=o;y<i;++y){const t=m+(l?l[y]:y),n=3*t,o=c*e[n],i=s[o],T=s[o+1],V=s[o+2],j=c*e[n+1],q=s[j],v=s[j+1],R=s[j+2],O=c*e[n+2],A=s[O],B=s[O+1],C=s[O+2],k=V-a,w=r/Math.sqrt(i*i+T*T+k*k),N=i+i*w,S=T+T*w,U=V+k*w,z=R-a,D=r/Math.sqrt(q*q+v*v+z*z),E=q+q*D,F=v+v*D,G=R+z*D,H=C-a,J=r/Math.sqrt(A*A+B*B+H*H),K=E-N,L=F-S,Q=G-U,W=A+A*J-N,X=B+B*J-S,Y=C+H*J-U,Z=x*Y-X*g,$=g*W-Y*b,_=b*X-W*x,tt=K*Z+L*$+Q*_;if(Math.abs(tt)<=P)continue;const nt=h-N,ot=p-S,it=M-U,et=nt*Z+ot*$+it*_;if(tt>0){if(et<0||et>tt)continue}else if(et>0||et<tt)continue;const st=ot*Q-L*it,ct=it*K-Q*nt,rt=nt*L-K*ot,at=b*st+x*ct+g*rt;if(tt>0){if(at<0||et+at>tt)continue}else if(at>0||et+at<tt)continue;const ft=(W*st+X*ct+Y*rt)/tt;if(ft>=0){u(ft,t,f?I(K,L,Q,W,X,Y,d):null)}}}function T(t,n,o,i,e,s,c,r,a,f,u){const l=t[0],m=t[1],h=t[2],p=n[0],M=n[1],b=n[2],{normalRequired:x}=f;for(let g=o;g<i;++g){const t=r[g],n=3*t,o=c*e[n];let i=s[o],f=s[o+1],y=s[o+2];const T=c*e[n+1];let V=s[T],j=s[T+1],q=s[T+2];const v=c*e[n+2];let R=s[v],O=s[v+1],A=s[v+2];null!=a&&([i,f,y]=a.applyToVertex(i,f,y,g),[V,j,q]=a.applyToVertex(V,j,q,g),[R,O,A]=a.applyToVertex(R,O,A,g));const B=V-i,C=j-f,k=q-y,w=R-i,N=O-f,S=A-y,U=M*S-N*b,z=b*w-S*p,D=p*N-w*M,E=B*U+C*z+k*D;if(Math.abs(E)<=P)continue;const F=l-i,G=m-f,H=h-y,J=F*U+G*z+H*D;if(E>0){if(J<0||J>E)continue}else if(J>0||J<E)continue;const K=G*k-C*H,L=H*B-k*F,Q=F*C-B*G,W=p*K+M*L+b*Q;if(E>0){if(W<0||J+W>E)continue}else if(W>0||J+W<E)continue;const X=(w*K+N*L+S*Q)/E;if(X>=0){u(X,t,x?I(B,C,k,w,N,S,d):null)}}}function V(i,e,s,c,r,a,f,u,l,m){const h=e,p=U,M=Math.abs(h[0]),b=Math.abs(h[1]),d=Math.abs(h[2]),x=M>=b?M>=d?0:2:b>=d?1:2,g=x,y=h[g]<0?2:1,T=(x+y)%3,V=(x+(3-y))%3,I=h[T]/h[g],O=h[V]/h[g],A=1/h[g],B=j,C=q,k=v,{normalRequired:w}=l;for(let j=s;j<c;++j){const e=3*j,s=f*r[e];n(p[0],a[s+0],a[s+1],a[s+2]);const c=f*r[e+1];n(p[1],a[c+0],a[c+1],a[c+2]);const l=f*r[e+2];n(p[2],a[l+0],a[l+1],a[l+2]),u&&(o(p[0],u.applyToVertex(p[0][0],p[0][1],p[0][2],j)),o(p[1],u.applyToVertex(p[1][0],p[1][1],p[1][2],j)),o(p[2],u.applyToVertex(p[2][0],p[2][1],p[2][2],j))),t(B,p[0],i),t(C,p[1],i),t(k,p[2],i);const h=B[T]-I*B[g],M=B[V]-O*B[g],b=C[T]-I*C[g],d=C[V]-O*C[g],x=k[T]-I*k[g],y=k[V]-O*k[g],q=x*d-y*b,v=h*y-M*x,N=b*M-d*h;if((q<0||v<0||N<0)&&(q>0||v>0||N>0))continue;const P=q+v+N;if(0===P)continue;const S=q*(A*B[g])+v*(A*C[g])+N*(A*k[g]);if(S*Math.sign(P)<0)continue;const U=S/P;if(U>=0){m(U,j,w?R(p):null)}}}const j=s(),q=s(),v=s();function I(t,o,s,c,r,a,f){return n(O,t,o,s),n(A,c,r,a),i(f,O,A),e(f,f),f}function R(n){return t(O,n[1],n[0]),t(A,n[2],n[0]),i(d,O,A),e(d,d),d}const O=s(),A=s();function B(t,o,i){return n(i,1/(o[0]-t[0]),1/(o[1]-t[1]),1/(o[2]-t[2]))}function C(t,o){return n(o,1/t[0],1/t[1],1/t[2])}function k(t,n,o,i){return w(t,n,o,i,1/0)}function w(t,n,o,i,e){const s=(t[0]-i-n[0])*o[0],c=(t[3]+i-n[0])*o[0];let r=Math.min(s,c),a=Math.max(s,c);const f=(t[1]-i-n[1])*o[1],u=(t[4]+i-n[1])*o[1];if(a=Math.min(a,Math.max(f,u)),a<0)return!1;if(r=Math.max(r,Math.min(f,u)),r>a)return!1;const l=(t[2]-i-n[2])*o[2],m=(t[5]+i-n[2])*o[2];return a=Math.min(a,Math.max(l,m)),!(a<0)&&(r=Math.max(r,Math.min(l,m)),!(r>a)&&r<e)}const N=1e3,P=1e-7,S=s(),U=[s(),s(),s()];export{m as MeshIntersectionOptions,B as computeInvDir,C as computeInvDirFromDirection,I as computeNormalFromBarycentric,k as intersectAabbInvDir,w as intersectAabbInvDirBefore,g as intersectRayTriangles,V as intersectRayTrianglesWithDisplacementWatertight,y as intersectRayTrianglesWithVerticalOffsetENUGlobal,p as intersectTriangleGeometry,x as intersectTriangles,P as triangleRayParallelTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar A;!function(A){A[A.INTEGRATED_MESH=0]=\"INTEGRATED_MESH\",A[A.OPAQUE_TERRAIN=1]=\"OPAQUE_TERRAIN\",A[A.OPAQUE_MATERIAL=2]=\"OPAQUE_MATERIAL\",A[A.OPAQUE_MATERIAL_WITHOUT_NORMALS=3]=\"OPAQUE_MATERIAL_WITHOUT_NORMALS\",A[A.TRANSPARENT_MATERIAL=4]=\"TRANSPARENT_MATERIAL\",A[A.TRANSPARENT_MATERIAL_WITHOUT_NORMALS=5]=\"TRANSPARENT_MATERIAL_WITHOUT_NORMALS\",A[A.TRANSPARENT_TERRAIN=6]=\"TRANSPARENT_TERRAIN\",A[A.TRANSPARENT_MATERIAL_WITHOUT_DEPTH=7]=\"TRANSPARENT_MATERIAL_WITHOUT_DEPTH\",A[A.OCCLUDED_TERRAIN=8]=\"OCCLUDED_TERRAIN\",A[A.OCCLUDER_MATERIAL=9]=\"OCCLUDER_MATERIAL\",A[A.TRANSPARENT_OCCLUDER_MATERIAL=10]=\"TRANSPARENT_OCCLUDER_MATERIAL\",A[A.OCCLUSION_PIXELS=11]=\"OCCLUSION_PIXELS\",A[A.HUD_MATERIAL=12]=\"HUD_MATERIAL\",A[A.LABEL_MATERIAL=13]=\"LABEL_MATERIAL\",A[A.LINE_CALLOUTS=14]=\"LINE_CALLOUTS\",A[A.LINE_CALLOUTS_HUD_DEPTH=15]=\"LINE_CALLOUTS_HUD_DEPTH\",A[A.DRAPED_MATERIAL=16]=\"DRAPED_MATERIAL\",A[A.DRAPED_WATER=17]=\"DRAPED_WATER\",A[A.VOXEL=18]=\"VOXEL\",A[A.MAX_SLOTS=19]=\"MAX_SLOTS\"}(A||(A={}));export{A as RenderSlot};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{StencilBits as a}from\"./basicInterfaces.js\";import{CompareFunction as E,StencilOperation as n}from\"../../../webgl/enums.js\";const i={func:E.LESS},s={func:E.ALWAYS},e={mask:255},l={mask:0},t=a=>({function:{func:E.NOTEQUAL,ref:a,mask:a},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.KEEP}}),u=a=>({function:{func:E.ALWAYS,ref:a,mask:a},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.REPLACE}}),f={function:{func:E.ALWAYS,ref:a.OutlineVisualElementMask,mask:a.OutlineVisualElementMask},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.ZERO}},o={function:{func:E.ALWAYS,ref:a.OutlineVisualElementMask,mask:a.OutlineVisualElementMask},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.REPLACE}},P={function:{func:E.EQUAL,ref:a.OutlineVisualElementMask,mask:a.OutlineVisualElementMask},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.KEEP}},m={function:{func:E.NOTEQUAL,ref:a.OutlineVisualElementMask,mask:a.OutlineVisualElementMask},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.KEEP}};export{s as depthCompareAlways,i as depthCompareLess,t as renderWhenBitIsNotSet,u as replaceBitWhenDepthTestPasses,f as stencilBaseAllZerosParams,o as stencilToolMaskBaseParams,P as stencilToolMaskOccluderParams,m as stencilToolTransparentOccluderParams,l as stencilWriteMaskOff,e as stencilWriteMaskOn};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import e from\"../../../../core/Error.js\";import t from\"../../../../core/Evented.js\";import{disposeMaybe as r,removeMaybe as s}from\"../../../../core/maybe.js\";import{throwIfAborted as a,onAbort as i,createAbortError as o}from\"../../../../core/promiseUtils.js\";import{isUint8Array as n,isArrayBuffer as l}from\"../../../../core/typedArrayUtil.js\";import{isBlobProtocol as m,isDataProtocol as h}from\"../../../../core/urlUtils.js\";import{requestImage as _}from\"../../../../support/requestImageUtils.js\";import{loadImageAsync as p}from\"../../../../support/requestUtils.js\";import{TextureEncodingMimeType as d}from\"./basicInterfaces.js\";import{createTextureKTX2 as c,createTextureBasis as u,estimateMemoryKTX2 as g,estimateMemoryBasis as A}from\"./BasisUtil.js\";import{ContentObject as E}from\"./ContentObject.js\";import{ContentObjectType as T}from\"./ContentObjectType.js\";import{createDDSTexture as f}from\"./DDSUtil.js\";import{downsampleImage as D,ensureImageMaxSize as x}from\"./textureUtils.js\";import{assert as y}from\"./Util.js\";import{TextureWrapMode as I,TextureSamplingMode as U,PixelFormat as F}from\"../../../webgl/enums.js\";import{Texture as w}from\"../../../webgl/Texture.js\";import{TextureDescriptor as N}from\"../../../webgl/TextureDescriptor.js\";class C extends E{get parameters(){return this._parameters}constructor(e,r){super(),this._data=e,this.type=T.Texture,this._glTexture=null,this._loadingPromise=null,this._loadingController=null,this.events=new t,this._parameters={...M,...r},this._startPreload(e)}dispose(){this.unload(),this._data=this.frameUpdate=void 0}_startPreload(e){null!=e&&(e instanceof HTMLVideoElement?(this.frameUpdate=t=>this._frameUpdate(e,t),this._startPreloadVideoElement(e)):e instanceof HTMLImageElement&&this._startPreloadImageElement(e))}_startPreloadVideoElement(e){if(!(m(e.src)||\"auto\"===e.preload&&e.crossOrigin)){e.preload=\"auto\",e.crossOrigin=\"anonymous\";const t=!e.paused;if(e.src=e.src,t&&e.autoplay){const t=()=>{e.removeEventListener(\"canplay\",t),e.play()};e.addEventListener(\"canplay\",t)}}}_startPreloadImageElement(e){h(e.src)||m(e.src)||e.crossOrigin||(e.crossOrigin=\"anonymous\",e.src=e.src)}_createDescriptor(e){const t=new N;return t.wrapMode=this._parameters.wrap??I.REPEAT,t.flipped=!this._parameters.noUnpackFlip,t.samplingMode=this._parameters.mipmap?U.LINEAR_MIPMAP_LINEAR:U.LINEAR,t.hasMipmap=!!this._parameters.mipmap,t.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha,t.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?e.parameters.maxMaxAnisotropy:1),t}get glTexture(){return this._glTexture}get memoryEstimate(){return this._glTexture?.usedMemory||H(this._data,this._parameters)}load(e){if(this._glTexture)return this._glTexture;if(this._loadingPromise)return this._loadingPromise;const t=this._data;return null==t?(this._glTexture=new w(e,this._createDescriptor(e),null),this._glTexture):(this._parameters.reloadable||(this._data=void 0),\"string\"==typeof t?this._loadFromURL(e,t):t instanceof Image?this._loadFromImageElement(e,t):t instanceof HTMLVideoElement?this._loadFromVideoElement(e,t):t instanceof ImageData||t instanceof HTMLCanvasElement?this._loadFromImage(e,t):n(t)&&this._parameters.encoding===d.DDS_ENCODING?this._loadFromDDSData(e,t):l(t)&&this._parameters.encoding===d.DDS_ENCODING?this._loadFromDDSData(e,new Uint8Array(t)):(l(t)||n(t))&&this._parameters.encoding===d.KTX2_ENCODING?this._loadFromKTX2(e,t):(l(t)||n(t))&&this._parameters.encoding===d.BASIS_ENCODING?this._loadFromBasis(e,t):n(t)?this._loadFromPixelData(e,t):l(t)?this._loadFromPixelData(e,new Uint8Array(t)):null)}_frameUpdate(e,t){return null==this._glTexture||e.readyState<V.HAVE_CURRENT_DATA||t===e.currentTime?t:(this._glTexture.setData(e),this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this._parameters.updateCallback&&this._parameters.updateCallback(),e.currentTime)}_loadFromDDSData(e,t){return this._glTexture=f(e,this._createDescriptor(e),t),this._glTexture}_loadFromKTX2(e,t){return this._loadAsync((()=>c(e,this._createDescriptor(e),t).then((e=>(this._glTexture=e,e)))))}_loadFromBasis(e,t){return this._loadAsync((()=>u(e,this._createDescriptor(e),t).then((e=>(this._glTexture=e,e)))))}_loadFromPixelData(e,t){y(this._parameters.width>0&&this._parameters.height>0);const r=this._createDescriptor(e);return r.pixelFormat=1===this._parameters.components?F.LUMINANCE:3===this._parameters.components?F.RGB:F.RGBA,r.width=this._parameters.width??0,r.height=this._parameters.height??0,this._glTexture=new w(e,r,t),this._glTexture}_loadFromURL(e,t){return this._loadAsync((async r=>{const s=await _(t,{signal:r});return a(r),this._loadFromImage(e,s)}))}_loadFromImageElement(e,t){return t.complete?this._loadFromImage(e,t):this._loadAsync((async r=>{const s=await p(t,t.src,!1,r);return a(r),this._loadFromImage(e,s)}))}_loadFromVideoElement(e,t){return t.readyState>=V.HAVE_CURRENT_DATA?this._loadFromImage(e,t):this._loadFromVideoElementAsync(e,t)}_loadFromVideoElementAsync(t,r){return this._loadAsync((a=>new Promise(((n,l)=>{const m=()=>{r.removeEventListener(\"loadeddata\",h),r.removeEventListener(\"error\",_),s(p)},h=()=>{r.readyState>=V.HAVE_CURRENT_DATA&&(m(),n(this._loadFromImage(t,r)))},_=t=>{m(),l(t||new e(\"Failed to load video\"))};r.addEventListener(\"loadeddata\",h),r.addEventListener(\"error\",_);const p=i(a,(()=>_(o())))}))))}_loadFromImage(e,t){let r=t;if(!(r instanceof HTMLVideoElement)){const{maxTextureSize:t}=e.parameters;r=this._parameters.downsampleUncompressed?D(r,t):x(r,t)}const s=R(r);this._parameters.width=s.width,this._parameters.height=s.height;const a=this._createDescriptor(e);return a.pixelFormat=3===this._parameters.components?F.RGB:F.RGBA,a.width=s.width,a.height=s.height,this._glTexture=new w(e,a,r),this._glTexture}_loadAsync(e){const t=new AbortController;this._loadingController=t;const r=e(t.signal);this._loadingPromise=r;const s=()=>{this._loadingController===t&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null)};return r.then(s,s),r}unload(){if(this._glTexture=r(this._glTexture),null!=this._loadingController){const e=this._loadingController;this._loadingController=null,this._loadingPromise=null,e.abort()}this.events.emit(\"unloaded\")}}function H(e,t){if(null==e)return 0;if(l(e)||n(e))return t.encoding===d.KTX2_ENCODING?g(e,!!t.mipmap):t.encoding===d.BASIS_ENCODING?A(e,!!t.mipmap):e.byteLength;const{width:r,height:s}=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?R(e):t;return(t.mipmap?4/3:1)*r*s*(t.components||4)||0}function R(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}var V;!function(e){e[e.HAVE_NOTHING=0]=\"HAVE_NOTHING\",e[e.HAVE_METADATA=1]=\"HAVE_METADATA\",e[e.HAVE_CURRENT_DATA=2]=\"HAVE_CURRENT_DATA\",e[e.HAVE_FUTURE_DATA=3]=\"HAVE_FUTURE_DATA\",e[e.HAVE_ENOUGH_DATA=4]=\"HAVE_ENOUGH_DATA\"}(V||(V={}));const M={wrap:{s:I.REPEAT,t:I.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1,downsampleUncompressed:!1};export{C as Texture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as r}from\"../../../../chunks/vec42.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";const e=n();class o{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function s(t,r=\"Assertion\"){if(!t){const t=new Error(r).stack;throw new o(`${r} at ${t}`)}}function c(t,r){t||(r=r||\"\",console.warn(\"Verify failed: \"+r+\"\\n\"+new Error(\"verify\").stack))}function i(t,r,n,e){let o,s=(n[0]-t[0])/r[0],c=(e[0]-t[0])/r[0];s>c&&(o=s,s=c,c=o);let i=(n[1]-t[1])/r[1],f=(e[1]-t[1])/r[1];if(i>f&&(o=i,i=f,f=o),s>f||i>c)return!1;i>s&&(s=i),f<c&&(c=f);let a=(n[2]-t[2])/r[2],u=(e[2]-t[2])/r[2];return a>u&&(o=a,a=u,u=o),!(s>u||a>c)&&(u<c&&(c=u),!(c<0))}function f(r,n,e,o,s,c=t()){const i=(o[s]-e[s])*(n[0]-r[0])-(o[0]-e[0])*(n[s]-r[s]),f=(o[0]-e[0])*(r[s]-e[s])-(o[s]-e[s])*(r[0]-e[0]);if(0===i)return!1;const a=f/i;return c[0]=r[0]+a*(n[0]-r[0]),c[1]=r[s]+a*(n[s]-r[s]),!0}function a(t,n,o,c,i){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,r(e,e,n),i.length>2&&(i[2]=-e[2]),r(e,e,o),s(0!==e[3]),i[0]=e[0]/e[3],i[1]=e[1]/e[3],i[2]=e[2]/e[3],i[0]=(.5*i[0]+.5)*c[2]+c[0],i[1]=(.5*i[1]+.5)*c[3]+c[1]}function u(t,r){return Math.log(t)/Math.log(r)}function l(t,r,n,e){t[12]=r,t[13]=n,t[14]=e}function m(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}export{s as assert,m as isTranslationMatrix,u as logWithBase,a as project,i as rayBoxTest,f as rayRay2D,l as setMatrixTranslation3,c as verify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar e;function E(E){return E===e.POSITION}!function(e){e.POSITION=\"position\",e.NORMAL=\"normal\",e.NORMALCOMPRESSED=\"normalCompressed\",e.UV0=\"uv0\",e.COLOR=\"color\",e.SYMBOLCOLOR=\"symbolColor\",e.SIZE=\"size\",e.ROTATION=\"rotation\",e.TANGENT=\"tangent\",e.OFFSET=\"offset\",e.PERSPECTIVEDIVIDE=\"perspectiveDivide\",e.CENTEROFFSETANDDISTANCE=\"centerOffsetAndDistance\",e.LENGTH=\"length\",e.PREVPOSITION=\"prevPosition\",e.NEXTPOSITION=\"nextPosition\",e.SUBDIVISIONFACTOR=\"subdivisionFactor\",e.COLORFEATUREATTRIBUTE=\"colorFeatureAttribute\",e.SIZEFEATUREATTRIBUTE=\"sizeFeatureAttribute\",e.OPACITYFEATUREATTRIBUTE=\"opacityFeatureAttribute\",e.DISTANCETOSTART=\"distanceToStart\",e.UVMAPSPACE=\"uvMapSpace\",e.BOUNDINGRECT=\"boundingRect\",e.UVREGION=\"uvRegion\",e.PROFILERIGHT=\"profileRight\",e.PROFILEUP=\"profileUp\",e.PROFILEVERTEXANDNORMAL=\"profileVertexAndNormal\",e.FEATUREVALUE=\"featureValue\",e.INSTANCEMODELORIGINHI=\"instanceModelOriginHi\",e.INSTANCEMODELORIGINLO=\"instanceModelOriginLo\",e.INSTANCEMODEL=\"instanceModel\",e.INSTANCEMODELNORMAL=\"instanceModelNormal\",e.INSTANCECOLOR=\"instanceColor\",e.INSTANCEFEATUREATTRIBUTE=\"instanceFeatureAttribute\",e.LOCALTRANSFORM=\"localTransform\",e.GLOBALTRANSFORM=\"globalTransform\",e.BOUNDINGSPHERE=\"boundingSphere\",e.MODELORIGIN=\"modelOrigin\",e.MODELSCALEFACTORS=\"modelScaleFactors\",e.FEATUREATTRIBUTE=\"featureAttribute\",e.STATE=\"state\",e.LODLEVEL=\"lodLevel\",e.POSITION0=\"position0\",e.POSITION1=\"position1\",e.NORMAL2COMPRESSED=\"normal2Compressed\",e.COMPONENTINDEX=\"componentIndex\",e.VARIANTOFFSET=\"variantOffset\",e.VARIANTSTROKE=\"variantStroke\",e.VARIANTEXTENSION=\"variantExtension\",e.SIDENESS=\"sideness\",e.START=\"start\",e.END=\"end\",e.UP=\"up\",e.START_UP=\"startUp\",e.END_UP=\"endUp\",e.EXTRUDE=\"extrude\",e.OBJECTANDLAYERIDCOLOR=\"objectAndLayerIdColor\",e.INSTANCEOBJECTANDLAYERIDCOLOR=\"instanceObjectAndLayerIdColor\"}(e||(e={}));export{e as VertexAttribute,E as affectsGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar e,n,a,O,s,t,i,u;!function(e){e[e.None=0]=\"None\",e[e.Front=1]=\"Front\",e[e.Back=2]=\"Back\",e[e.COUNT=3]=\"COUNT\"}(e||(e={})),function(e){e[e.Less=0]=\"Less\",e[e.Lequal=1]=\"Lequal\",e[e.COUNT=2]=\"COUNT\"}(n||(n={})),function(e){e[e.BACKGROUND=0]=\"BACKGROUND\",e[e.UPDATE=1]=\"UPDATE\"}(a||(a={})),function(e){e[e.NOT_LOADED=0]=\"NOT_LOADED\",e[e.LOADING=1]=\"LOADING\",e[e.LOADED=2]=\"LOADED\"}(O||(O={})),function(e){e[e.IntegratedMeshMaskExcluded=1]=\"IntegratedMeshMaskExcluded\",e[e.OutlineVisualElementMask=2]=\"OutlineVisualElementMask\"}(s||(s={})),function(e){e[e.Highlight=0]=\"Highlight\",e[e.MaskOccludee=1]=\"MaskOccludee\"}(t||(t={})),function(e){e[e.Blend=0]=\"Blend\",e[e.Opaque=1]=\"Opaque\",e[e.Mask=2]=\"Mask\",e[e.MaskBlend=3]=\"MaskBlend\",e[e.COUNT=4]=\"COUNT\"}(i||(i={})),function(e){e.DDS_ENCODING=\"image/vnd-ms.dds\",e.KTX2_ENCODING=\"image/ktx2\",e.BASIS_ENCODING=\"image/x.basis\"}(u||(u={}));export{i as AlphaDiscardMode,e as CullFaceOptions,n as DepthTestFunction,t as Object3DState,a as RenderRequestType,O as ResourceState,s as StencilBits,u as TextureEncodingMimeType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{i as t,g as e,h as n,F as r}from\"../../../../chunks/vec32.js\";import{create as o}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{areaPoints3d as s}from\"../../../../geometry/support/triangle.js\";function i(r,o){if(!r)return!1;const{size:i,data:c,indices:f}=r;t(o,0,0,0),t(m,0,0,0);let g=0,d=0;for(let p=0;p<f.length-2;p+=3){const r=f[p]*i,h=f[p+1]*i,j=f[p+2]*i;t(a,c[r],c[r+1],c[r+2]),t(l,c[h],c[h+1],c[h+2]),t(u,c[j],c[j+1],c[j+2]);const z=s(a,l,u);z?(e(a,a,l),e(a,a,u),n(a,a,1/3*z),e(o,o,a),g+=z):(e(m,m,a),e(m,m,l),e(m,m,u),d+=3)}return(0!==d||0!==g)&&(0!==g?(n(o,o,1/g),!0):0!==d&&(n(o,m,1/d),!0))}function c(e,r){if(!e)return!1;const{size:o,data:s,indices:i}=e;t(r,0,0,0);let c=-1,f=0;for(let t=0;t<i.length;t++){const e=i[t]*o;c!==e&&(r[0]+=s[e],r[1]+=s[e+1],r[2]+=s[e+2],f++),c=e}return f>1&&n(r,r,1/f),f>0}function f(o,s,i){if(!o)return!1;t(i,0,0,0),t(m,0,0,0);let c=0,f=0;const{size:u,data:g,indices:d}=o,p=d.length-1,h=p+(s?2:0);for(let t=0;t<h;t+=2){const o=t<p?t+1:0,s=d[t<p?t:p]*u,h=d[o]*u;a[0]=g[s],a[1]=g[s+1],a[2]=g[s+2],l[0]=g[h],l[1]=g[h+1],l[2]=g[h+2],n(a,e(a,a,l),.5);const j=r(a,l);j>0?(e(i,i,n(a,a,j)),c+=j):0===c&&(e(m,m,a),f++)}return 0!==c?(n(i,i,1/c),!0):0!==f&&(n(i,m,1/f),!0)}const a=o(),l=o(),u=o(),m=o();export{f as computeAttachmentOriginLines,c as computeAttachmentOriginPoints,i as computeAttachmentOriginTriangles};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{lerp as e,deg2rad as t,clamp as a}from\"../../../../core/mathUtils.js\";import{d as r}from\"../../../../chunks/boundedPlane.js\";import{b as n,d as i,c}from\"../../../../chunks/sphere.js\";import{ViewingMode as l}from\"../../../ViewingMode.js\";function s(e,t){return new F(e,g,t)}function o(e,t){const{curvatureDependent:a,scaleStart:r,scaleFallOffRange:n}=g;return new F(e,{curvatureDependent:{min:{curvature:a.min.curvature,tiltAngle:a.min.tiltAngle,scaleFallOffFactor:_.curvatureDependent.min.scaleFallOffFactor},max:{curvature:a.max.curvature,tiltAngle:a.max.tiltAngle,scaleFallOffFactor:_.curvatureDependent.max.scaleFallOffFactor}},scaleStart:r,scaleFallOffRange:n,minPixelSize:_.minPixelSize},t)}function u(e){return Math.abs(e*e*e)}function f(e,t,a){const r=a.parameters;return C.scale=Math.min(r.divisor/(t-r.offset),1),C.factor=u(e),C}function m(t,a){return e(t*Math.max(a.scale,a.minScaleFactor),t,a.factor)}function h(e,t,a){const r=f(e,t,a);return r.minScaleFactor=0,m(1,r)}function d(e,t,a,r){r.scale=h(e,t,a),r.factor=0,r.minScaleFactor=a.minScaleFactor}function p(e,t,a=[0,0]){const r=Math.min(Math.max(t.scale,t.minScaleFactor),1);return a[0]=e[0]*r,a[1]=e[1]*r,a}function v(e,t,a,r){return m(e,f(t,a,r))}class F{get minScaleFactor(){return null!=this._fontHeight?Math.min(this._description.minPixelSize/this._fontHeight,1):0}constructor(e,t,a,r=O(),n){this._viewingMode=e,this._description=t,this._ellipsoidRadius=a,this.parameters=r,this._fontHeight=n,this._viewingMode===l.Local?(this._coverageCompensation=this._surfaceCoverageCompensationLocal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this._coverageCompensation=this._surfaceCoverageCompensationGlobal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}update(e){return(!this.parameters||this.parameters.camera.fovY!==e.fovY||this.parameters.camera.distance!==e.distance)&&(this._calculateParameters(e,this._ellipsoidRadius,this.parameters),!0)}overrideFontHeight(e){return e!==this._fontHeight?new F(this._viewingMode,this._description,this._ellipsoidRadius,this.parameters,e):this}_calculateParameters(e,t,a){const{scaleStart:r,scaleFallOffRange:n}=this._description,{fovY:i,distance:c}=e,l=this._calculateCurvatureDependentParameters(e,t),s=this._coverageCompensation(e,t,l),{tiltAngle:o,scaleFallOffFactor:u}=l,f=Math.sin(o)*c,m=.5*Math.PI-o-i*(.5-r*s),h=f/Math.cos(m),d=m+i*n*s,p=(h-u*(f/Math.cos(d)))/(1-u);return a.camera.fovY=e.fovY,a.camera.distance=e.distance,a.offset=p,a.divisor=h-p,a}_calculateCurvatureDependentParametersLocal(e,t,a=x){return a.tiltAngle=this._description.curvatureDependent.min.tiltAngle,a.scaleFallOffFactor=this._description.curvatureDependent.min.scaleFallOffFactor,a}_calculateCurvatureDependentParametersGlobal(t,r,n=x){const i=this._description.curvatureDependent,c=1+t.distance/r,l=Math.sqrt(c*c-1),[s,o]=[i.min.curvature,i.max.curvature],u=a((l-s)/(o-s),0,1),[f,m]=[i.min,i.max];return n.tiltAngle=e(f.tiltAngle,m.tiltAngle,u),n.scaleFallOffFactor=e(f.scaleFallOffFactor,m.scaleFallOffFactor,u),n}_surfaceCoverageCompensationLocal(e,t,a){return r(a.tiltAngle,e.fovY)}_surfaceCoverageCompensationGlobal(e,t,a){return n(D,t),i(D,a.tiltAngle,e.distance,e.fovY)}}const g={curvatureDependent:{min:{curvature:t(10),tiltAngle:t(12),scaleFallOffFactor:.5},max:{curvature:t(70),tiltAngle:t(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},_={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};function O(){return{camera:{distance:0,fovY:0},divisor:0,offset:0}}const C={scale:0,factor:0,minScaleFactor:0},x={tiltAngle:0,scaleFallOffFactor:0},D=c();export{p as applyPrecomputedScaleFactor,m as applyScaleFactor,o as getLabelSettings,s as getSettings,d as precomputeScaleFactor,v as scale};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";const e=16;function n(t){return Math.ceil(t/e)*e}function i(t){return Math.floor(t/e)*e}function r(t,e){const n=1048576,i=4096,r=2;let h=t.width*t.height;if(h<i)return t instanceof ImageData?a(t):t;let c=t.width,u=t.height;do{c=Math.ceil(c/r),u=Math.ceil(u/r),h=c*u}while(h>n||null!=e&&(c>e||u>e));return o(t,c,u)}function h(t,e){const n=Math.max(t.width,t.height);if(n<=e)return t;const i=e/n;return o(t,Math.round(t.width*i),Math.round(t.height*i))}function o(t,e,n){if(t instanceof ImageData)return o(a(t),e,n);const i=document.createElement(\"canvas\");i.width=e,i.height=n;return i.getContext(\"2d\").drawImage(t,0,0,i.width,i.height),i}function a(e){const n=document.createElement(\"canvas\");n.width=e.width,n.height=e.height;const i=n.getContext(\"2d\");if(null==i)throw new t(\"Failed to create 2d context from HTMLCanvasElement\");return i.putImageData(e,0,0),n}export{i as applyTextureResizeFloorModulo,n as applyTextureResizeModulo,r as downsampleImage,h as ensureImageMaxSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{normalFromMat4Legacy as t}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as s}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as r,transpose as e,copy as i,multiply as o}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as n,g as h,l as f,b as l,t as m}from\"../../../../chunks/vec32.js\";import{create as p}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{c,a as _}from\"../../../../chunks/sphere.js\";import{ViewingMode as u}from\"../../../ViewingMode.js\";import{Obb as g,computeOffsetObb as M}from\"../../support/orientedBoundingBox.js\";class b{constructor(){this._transform=a(),this._transformInverse=new v({value:this._transform},r,a),this._transformInverseTranspose=new v(this._transformInverse,e,a),this._transformTranspose=new v({value:this._transform},e,a),this._transformInverseRotation=new v({value:this._transform},t,s)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){i(this._transform,t)}multiplyTransform(t){o(this._transform,this._transform,t)}set(t){i(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this._invalidateLazyTransforms()}}class v{constructor(t,s,r){this._original=t,this._update=s,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}class T{constructor(t=0){this.offset=t,this.tmpVertex=p()}applyToVertex(t,s,r){const e=n(q,t,s,r),i=h(z,e,this.localOrigin),o=this.offset/f(i);return l(this.tmpVertex,e,i,o),this.tmpVertex}applyToAabb(t){const s=A,r=R,e=B;for(let n=0;n<3;++n)s[n]=t[0+n]+this.localOrigin[n],r[n]=t[3+n]+this.localOrigin[n],e[n]=s[n];const i=this.applyToVertex(s[0],s[1],s[2]);for(let n=0;n<3;++n)t[n]=i[n],t[n+3]=i[n];const o=s=>{const r=this.applyToVertex(s[0],s[1],s[2]);for(let e=0;e<3;++e)t[e]=Math.min(t[e],r[e]),t[e+3]=Math.max(t[e+3],r[e])};for(let n=1;n<8;++n){for(let t=0;t<3;++t)e[t]=n&1<<t?r[t]:s[t];o(e)}let a=0;for(let n=0;n<3;++n){s[n]*r[n]<0&&(a|=1<<n)}if(0!==a&&7!==a)for(let n=0;n<8;++n)if(!(a&n)){for(let t=0;t<3;++t)e[t]=a&1<<t?0:n&1<<t?s[t]:r[t];o(e)}for(let n=0;n<3;++n)t[n]-=this.localOrigin[n],t[n+3]-=this.localOrigin[n];return t}}class x{constructor(t=0){this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=p(),this._tmpMbs=c(),this._tmpObb=new g,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=f(t)}applyToVertex(t,s,r){const e=n(q,t,s,r),i=n(z,t,s,r+this.componentLocalOriginLength),o=this._totalOffset/f(i);return l(this._tmpVertex,e,i,o),this._tmpVertex}applyToAabb(t){const s=this.componentLocalOriginLength,r=t[0],e=t[1],i=t[2]+s,o=t[3],a=t[4],n=t[5]+s,h=Math.abs(r),f=Math.abs(e),l=Math.abs(i),m=Math.abs(o),p=Math.abs(a),c=Math.abs(n),_=.5*(1+Math.sign(r*o))*Math.min(h,m),u=.5*(1+Math.sign(e*a))*Math.min(f,p),g=.5*(1+Math.sign(i*n))*Math.min(l,c),M=Math.max(h,m),b=Math.max(f,p),v=Math.max(l,c),T=Math.sqrt(_*_+u*u+g*g),x=Math.sign(h+r),O=Math.sign(f+e),y=Math.sign(l+i),d=Math.sign(m+o),V=Math.sign(p+a),L=Math.sign(c+n),j=this._totalOffset;if(T<j)return t[0]-=(1-x)*j,t[1]-=(1-O)*j,t[2]-=(1-y)*j,t[3]+=d*j,t[4]+=V*j,t[5]+=L*j,t;const I=j/Math.sqrt(M*M+b*b+v*v),w=j/T,q=w-I,z=-q;return t[0]+=r*(x*z+w),t[1]+=e*(O*z+w),t[2]+=i*(y*z+w),t[3]+=o*(d*q+I),t[4]+=a*(V*q+I),t[5]+=n*(L*q+I),t}applyToMbs(t){const s=f(_(t)),r=this._totalOffset/s;return l(_(this._tmpMbs),_(t),_(t),r),this._tmpMbs[3]=t[3]+t[3]*this._totalOffset/s,this._tmpMbs}applyToObb(t){return M(t,this._totalOffset,this._totalOffset,u.Global,this._tmpObb),this._tmpObb}}class O{constructor(t=0){this.offset=t,this.sphere=c(),this.tmpVertex=p()}applyToVertex(t,s,r){const e=this.objectTransform.transform,i=n(q,t,s,r),o=m(i,i,e),a=this.offset/f(o);l(o,o,o,a);const h=this.objectTransform.inverse;return m(this.tmpVertex,o,h),this.tmpVertex}applyToMinMax(t,s){const r=this.offset/f(t);l(t,t,t,r);const e=this.offset/f(s);l(s,s,s,e)}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t){const s=f(_(t)),r=this.offset/s;return l(_(this.sphere),_(t),_(t),r),this.sphere[3]=t[3]+t[3]*this.offset/s,this.sphere}}const y=new O;function d(t){return null!=t?(y.offset=t,y):null}const V=new x;function L(t){return null!=t?(V.offset=t,V):null}const j=new T;function I(t){return null!=t?(j.offset=t,j):null}const w=\"terrain\",q=p(),z=p(),A=p(),R=p(),B=p();export{x as I3SVerticalOffsetGlobalViewingMode,b as IntersectorTransform,O as Object3DVerticalOffsetGlobalViewingMode,T as TerrainVerticalOffsetGlobalViewingMode,L as getVerticalOffsetI3S,d as getVerticalOffsetObject3D,I as getVerticalOffsetTerrain,w as terrainId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{zeros as t,fromValues as s}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class i{constructor(s=t()){this.intensity=s}}class r{constructor(i=t(),r=s(.57735,.57735,.57735)){this.intensity=i,this.direction=r}}class c{constructor(i=t(),r=s(.57735,.57735,.57735),c=!0,n=1,o=1){this.intensity=i,this.direction=r,this.castShadows=c,this.specularStrength=n,this.environmentStrength=o}}class n{constructor(){this.r=[0],this.g=[0],this.b=[0]}}export{i as AmbientLight,r as FillLight,c as MainLight,n as SphericalHarmonicsAmbientLight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{lerp as i}from\"../../../../core/mathUtils.js\";import{c as t,h as s,g as h,m as r}from\"../../../../chunks/vec32.js\";import{create as n,fromValues as a}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{SphericalHarmonicsAmbientLight as o,MainLight as e}from\"./Lightsources.js\";import{combineLights as c}from\"./SphericalHarmonics.js\";class g{constructor(){this.color=n(),this.intensity=1}}class m{constructor(){this.direction=n(),this.ambient=new g,this.diffuse=new g}}const l=.4;class _{constructor(){this._shOrder=2,this._legacy=new m,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new o,this._mainLight=new e(n(),a(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){c(i,this._shOrder,this._mainLight,this._sphericalHarmonics),t(this._legacy.direction,this._mainLight.direction);const r=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*r,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*r,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*r,s(this._legacy.diffuse.color,this._mainLight.intensity,r),t(L,this._legacy.diffuse.color),s(L,L,l*this.globalFactor),h(this._legacy.ambient.color,this._legacy.ambient.color,L)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),t(this._mainLight.direction,i.mainLight.direction),t(this._mainLight.intensity,i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(s,h,n){if(r(this._mainLight.intensity,s.mainLight.intensity,h.mainLight.intensity,n),this._mainLight.environmentStrength=i(s.mainLight.environmentStrength,h.mainLight.environmentStrength,n),this._mainLight.specularStrength=i(s.mainLight.specularStrength,h.mainLight.specularStrength,n),t(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=i(s.globalFactor,h.globalFactor,n),this.noonFactor=i(s.noonFactor,h.noonFactor,n),s.sh.r.length===h.sh.r.length)for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=i(s.sh.r[t],h.sh.r[t],n),this._sphericalHarmonics.g[t]=i(s.sh.g[t],h.sh.g[t],n),this._sphericalHarmonics.b[t]=i(s.sh.b[t],h.sh.b[t],n);else for(let i=0;i<h.sh.r.length;i++)this._sphericalHarmonics.r[i]=h.sh.r[i],this._sphericalHarmonics.g[i]=h.sh.g[i],this._sphericalHarmonics.b[i]=h.sh.b[i]}}const L=n();export{_ as SceneLighting,m as SunLight,l as ambientBoost};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";import{v as n,i as o,c as r}from\"../../../../chunks/vec32.js\";import{create as e}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{elementwiseProduct as i,scalarProduct as s,add as c}from\"../lib/LongVectorMath.js\";import{MainLight as f,FillLight as h,AmbientLight as a,SphericalHarmonicsAmbientLight as g}from\"./Lightsources.js\";function u(t){return(t+1)*(t+1)}function l(n){return t(Math.floor(Math.sqrt(n)-1),0,2)}function m(t,n,o){const r=t[0],e=t[1],i=t[2],s=o||[];return s.length=u(n),n>=0&&(s[0]=.28209479177),n>=1&&(s[1]=.4886025119*r,s[2]=.4886025119*i,s[3]=.4886025119*e),n>=2&&(s[4]=1.09254843059*r*e,s[5]=1.09254843059*e*i,s[6]=.31539156525*(3*i*i-1),s[7]=1.09254843059*r*i,s[8]=.54627421529*(r*r-e*e)),s}function p(t,n){const o=u(t),r=n||{r:[],g:[],b:[]};r.r.length=r.g.length=r.b.length=o;for(let e=0;e<o;e++)r.r[e]=r.g[e]=r.b[e]=0;return r}function b(t,o){const r=l(o.r.length);for(const e of t)n(P,e.direction),m(P,r,v),i(v,w),s(v,e.intensity[0],I),c(o.r,I),s(v,e.intensity[1],I),c(o.g,I),s(v,e.intensity[2],I),c(o.b,I);return o}function y(t,n){m(P,0,v);for(const o of t)n.r[0]+=v[0]*w[0]*o.intensity[0]*4*Math.PI,n.g[0]+=v[0]*w[0]*o.intensity[1]*4*Math.PI,n.b[0]+=v[0]*w[0]*o.intensity[2]*4*Math.PI;return n}function M(t,n,e,i){p(n,i),o(e.intensity,0,0,0);let s=!1;const u=S,l=d,m=j;u.length=0,l.length=0,m.length=0;for(const o of t)o instanceof f&&!s?(r(e.direction,o.direction),r(e.intensity,o.intensity),e.specularStrength=o.specularStrength,e.environmentStrength=o.environmentStrength,e.castShadows=o.castShadows,s=!0):o instanceof f||o instanceof h?u.push(o):o instanceof a?l.push(o):o instanceof g&&m.push(o);b(u,i),y(l,i);for(const o of m)c(i.r,o.r),c(i.g,o.g),c(i.b,o.b)}const S=[],d=[],j=[],v=[0],I=[0],P=e(),w=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];export{M as combineLights,m as computeCoefficients,p as initSHCoefficients,u as numberOfCoefficients,l as orderFromNumberOfCoefficients,y as projectAmbientLights,b as projectFillLights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VertexAttribute as t}from\"../lib/VertexAttribute.js\";import{writeDefaultAttributes as e}from\"./internal/bufferWriterUtils.js\";class r{constructor(t){this.vertexBufferLayout=t}elementCount(e){return e.get(t.POSITION).indices.length}write(t,r,i,o,s,u){e(i,o,this.vertexBufferLayout,t,r,s,u)}}export{r as DefaultBufferWriter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{p as e,i as r,c as t,n as i,d as s,l as a,h as o,f as n,q as c}from\"../../../../chunks/vec32.js\";import{ZEROS as l,create as u,fromValues as h}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ViewingMode as f}from\"../../../ViewingMode.js\";import{newLayout as m}from\"../../support/buffer/InterleavedLayout.js\";import{is3DGeometryOutputMRT as p,isShadowRelatedOutput as d,is3DGeometryOutput as g,ShaderOutput as T}from\"../core/shaderLibrary/ShaderOutput.js\";import{NormalType as x}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{EmissionSource as v}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{NormalsDoubleSidedMode as _}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as b}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{alphaCutoff as S}from\"../core/shaderLibrary/util/AlphaCutoff.js\";import{olidEnabled as O}from\"../effects/geometry/olidUtils.js\";import{CullFaceOptions as M}from\"../lib/basicInterfaces.js\";import{GLTextureMaterial as w}from\"../lib/GLTextureMaterial.js\";import{Material as R}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as y}from\"../lib/OrderIndependentTransparency.js\";import{intersectTriangleGeometry as C}from\"../lib/RayIntersections.js\";import{RenderSlot as A}from\"../lib/RenderSlot.js\";import{VertexAttribute as I}from\"../lib/VertexAttribute.js\";import{getVerticalOffsetObject3D as P}from\"../lib/verticalOffsetUtils.js\";import{DefaultBufferWriter as j}from\"./DefaultBufferWriter.js\";import{verticalOffsetAtDistance as L}from\"./internal/MaterialUtil.js\";import{DefaultMaterialTechnique as D,DefaultMaterialPassParameters as N}from\"../shaders/DefaultMaterialTechnique.js\";import{DefaultMaterialTechniqueConfiguration as E}from\"../shaders/DefaultMaterialTechniqueConfiguration.js\";import{RealisticTreeTechnique as V}from\"../shaders/RealisticTreeTechnique.js\";class B extends R{constructor(e,r){super(e,z),this.materialType=\"default\",this.supportsEdges=!0,this.produces=new Map([[A.OPAQUE_MATERIAL,e=>(p(e)||d(e))&&!this.parameters.transparent],[A.TRANSPARENT_MATERIAL,e=>(p(e)||d(e))&&this.parameters.transparent&&this.parameters.writeDepth],[A.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(g(e)||d(e))&&this.parameters.transparent&&!this.parameters.writeDepth]]),this._vertexBufferLayout=U(this.parameters),this._configuration=new E(r.spherical,r.doublePrecisionRequiresObfuscation)}isVisibleForOutput(e){return e!==T.Shadow&&e!==T.ShadowExcludeHighlight&&e!==T.ShadowHighlight||this.parameters.castShadows}get visible(){const e=this.parameters;if(e.layerOpacity<S)return!1;const{hasInstancedColor:r,hasVertexColors:t,hasSymbolColors:i,vvColor:s}=e,a=r||s||i,o=\"replace\"===e.colorMixMode,n=e.opacity>=S;if(t&&a)return o||n;const c=e.externalColor&&e.externalColor[3]>=S;return t?o?c:n:a?o||n:o?c:n}get hasEmissions(){return!!this.parameters.emissiveTextureId||!e(this.parameters.emissiveFactor,l)}getConfiguration(e,r){const t=this.parameters,{treeRendering:i,doubleSided:s,doubleSidedType:a}=t;return this._configuration.output=e,this._configuration.hasNormalTexture=!i&&!!t.normalTextureId,this._configuration.hasColorTexture=!!t.textureId,this._configuration.hasVertexTangents=!i&&t.hasVertexTangents,this._configuration.instanced=t.isInstanced,this._configuration.instancedDoublePrecision=t.instancedDoublePrecision,this._configuration.vvSize=!!t.vvSize,this._configuration.hasVerticalOffset=null!=t.verticalOffset,this._configuration.hasScreenSizePerspective=null!=t.screenSizePerspective,this._configuration.hasSlicePlane=t.hasSlicePlane,this._configuration.hasSliceHighlight=t.hasSliceHighlight,this._configuration.alphaDiscardMode=t.textureAlphaMode,this._configuration.normalType=i?x.Attribute:t.normalType,this._configuration.transparent=t.transparent,this._configuration.writeDepth=t.writeDepth,null!=t.customDepthTest&&(this._configuration.customDepthTest=t.customDepthTest),this._configuration.hasOccludees=r.hasOccludees,this._configuration.cullFace=t.hasSlicePlane?M.None:t.cullFace,this._configuration.terrainDepthTest=r.terrainDepthTest,this._configuration.cullAboveTerrain=r.cullAboveTerrain,this._configuration.hasModelTransformation=!i&&null!=t.modelTransformation,this._configuration.hasVertexColors=t.hasVertexColors,this._configuration.hasSymbolColors=t.hasSymbolColors,this._configuration.doubleSidedMode=i?_.WindingOrder:s&&\"normal\"===a?_.View:s&&\"winding-order\"===a?_.WindingOrder:_.None,this._configuration.instancedColor=t.hasInstancedColor,this._configuration.receiveShadows=t.receiveShadows&&t.receiveShadows,this._configuration.receiveAmbientOcclusion=t.receiveAmbientOcclusion&&null!=r.ssao,this._configuration.vvColor=!!t.vvColor,this._configuration.textureAlphaPremultiplied=!!t.textureAlphaPremultiplied,this._configuration.pbrMode=t.usePBR?t.isSchematic?b.Schematic:b.Normal:b.Disabled,this._configuration.hasMetallicRoughnessTexture=!i&&!!t.metallicRoughnessTextureId,this._configuration.emissionSource=i?v.None:null!=t.emissiveTextureId?v.Texture:t.usePBR?v.Value:v.None,this._configuration.hasOcclusionTexture=!i&&!!t.occlusionTextureId,this._configuration.offsetBackfaces=!(!t.transparent||!t.offsetTransparentBackfaces),this._configuration.oitPass=r.oitPass,this._configuration.enableOffset=r.camera.relativeElevation<y,this._configuration.snowCover=H(r),this._configuration.hasColorTextureTransform=!!t.colorTextureTransformMatrix,this._configuration.hasNormalTextureTransform=!!t.normalTextureTransformMatrix,this._configuration.hasEmissionTextureTransform=!!t.emissiveTextureTransformMatrix,this._configuration.hasOcclusionTextureTransform=!!t.occlusionTextureTransformMatrix,this._configuration.hasMetallicRoughnessTextureTransform=!!t.metallicRoughnessTextureTransformMatrix,this._configuration}intersect(e,l,u,h,m,p){if(null!=this.parameters.verticalOffset){const e=u.camera;r(J,l[12],l[13],l[14]);let p=null;switch(u.viewingMode){case f.Global:p=i(G,J);break;case f.Local:p=t(G,F)}let d=0;const g=s(Q,J,e.eye),T=a(g),x=o(g,g,1/T);let v=null;this.parameters.screenSizePerspective&&(v=n(p,x)),d+=L(e,T,this.parameters.verticalOffset,v??0,this.parameters.screenSizePerspective),o(p,p,d),c(Y,p,u.transform.inverseRotation),h=s(W,h,Y),m=s(k,m,Y)}C(e,u,h,m,P(u.verticalOffset),p)}createGLMaterial(e){return new q(e)}createBufferWriter(){return new j(this._vertexBufferLayout)}}class q extends w{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){this._material.setParameters({receiveShadows:e.shadowMap.enabled});const t=this._material.parameters;this.updateTexture(t.textureId);const i=e.camera.viewInverseTransposeMatrix;return r(t.origin,i[3],i[7],i[11]),this._material.setParameters(this.textureBindParameters),this.acquireTechnique(t.treeRendering?V:D,e)}}class z extends N{constructor(){super(...arguments),this.initTextureTransparent=!1,this.treeRendering=!1,this.hasVertexTangents=!1}}function H(e){return null!=e.weather&&e.weatherVisible&&\"snowy\"===e.weather.type&&\"enabled\"===e.weather.snowCover}function U(e){const r=m().vec3f(I.POSITION);e.normalType===x.Compressed?r.vec2i16(I.NORMALCOMPRESSED,{glNormalized:!0}):r.vec3f(I.NORMAL),e.hasVertexTangents&&r.vec4f(I.TANGENT);return(e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId)&&r.vec2f(I.UV0),e.hasVertexColors&&r.vec4u8(I.COLOR),e.hasSymbolColors&&r.vec4u8(I.SYMBOLCOLOR),O()&&r.vec4u8(I.OBJECTANDLAYERIDCOLOR),r}const W=u(),k=u(),F=h(0,0,1),G=u(),Y=u(),J=u(),Q=u();export{q as DefaultGLMaterial,B as DefaultMaterial,z as DefaultMaterialParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst o=2.1;export{o as colorGamma};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{ShaderOutput as r}from\"../core/shaderLibrary/ShaderOutput.js\";import{InstancedDoubleConfiguration as o}from\"../core/shaderLibrary/attributes/InstancedDoubleConfiguration.js\";import{BindType as s}from\"../core/shaderTechnique/BindType.js\";import{parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{OITPass as e}from\"../lib/OITPass.js\";class a extends o{constructor(){super(...arguments),this.output=r.Color,this.oitPass=e.NONE,this.hasSliceHighlight=!0,this.hasSliceInVertexProgram=!1,this.bindType=s.Pass,this.writeDepth=!0}}t([i({count:r.COUNT})],a.prototype,\"output\",void 0),t([i({count:e.COUNT})],a.prototype,\"oitPass\",void 0);export{a as DefaultTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VisualVariablesParameters as s}from\"../../layers/support/FastSymbolUpdates.js\";import{RenderOccludedFlag as r}from\"../lib/Material.js\";class t extends s{constructor(){super(...arguments),this.renderOccluded=r.Occlude,this.isDecoration=!1}}const e=8;export{t as VisualVariablePassParameters,e as vvColorNumber};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{equals as r}from\"../../../../../core/arrayUtils.js\";import{clamp as t}from\"../../../../../core/mathUtils.js\";import{scale as e}from\"../../lib/screenSizePerspectiveUtils.js\";function i(r,i,n,o,l){let s=(n.screenLength||0)*r.pixelRatio;null!=l&&(s=e(s,o,i,l));const a=s*Math.tan(.5*r.fovY)/(.5*r.fullHeight);return t(a*i,n.minWorldLength||0,null!=n.maxWorldLength?n.maxWorldLength:1/0)}function n(t,e){let i=!1;for(const n in e){const o=e[n];void 0!==o&&(Array.isArray(o)?Array.isArray(t[n])&&r(o,t[n])||(t[n]=o.slice(),i=!0):t[n]!==o&&(i=!0,t[n]=o))}return i}const o={multiply:1,ignore:2,replace:3,tint:4};export{o as colorMixModes,n as updateParameters,i as verticalOffsetAtDistance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{hasIdentityRotation as e,isOrthoNormal as t}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{BufferViewVec4u8 as f,BufferViewVec4f as o,BufferViewFloat as r,BufferViewVec2f as i,BufferViewVec2i16 as s,BufferViewVec3f as n}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as c}from\"../../lib/Util.js\";import{VertexAttribute as l}from\"../../lib/VertexAttribute.js\";function d(e,t,f,o=1){const{data:r,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===o)for(let l=0;l<c;++l)s[f]=r[i[l]],f+=n;else for(let l=0;l<c;++l){const e=r[i[l]];for(let t=0;t<o;t++)s[f]=e,f+=n}}function u(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length;f*=s;for(let c=0;c<n;++c){const e=2*r[c];i[f]=o[e],i[f+1]=o[e+1],f+=s}}function a(e,t,f,o){const{data:r,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,null==o||1===o)for(let l=0;l<c;++l){const e=3*i[l];s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],f+=n}else for(let l=0;l<c;++l){const e=3*i[l];for(let t=0;t<o;++t)s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],f+=n}}function p(e,t,f,o=1){const{data:r,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===o)for(let l=0;l<c;++l){const e=4*i[l];s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],s[f+3]=r[e+3],f+=n}else for(let l=0;l<c;++l){const e=4*i[l];for(let t=0;t<o;++t)s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],s[f+3]=r[e+3],f+=n}}function B(e,t,f){const o=e.typedBuffer,r=e.typedBufferStride;t*=r;for(let i=0;i<f;++i)o[t]=0,o[t+1]=0,o[t+2]=0,o[t+3]=0,t+=r}function y(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length;f*=s;for(let c=0;c<n;++c){const e=9*r[c];for(let t=0;t<9;++t)i[f+t]=o[e+t];f+=s}}function g(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length;f*=s;for(let c=0;c<n;++c){const e=16*r[c];for(let t=0;t<16;++t)i[f+t]=o[e+t];f+=s}}function b(t,f,o,r,i=1){if(!f)return void a(t,o,r,i);const{data:s,indices:n}=t,c=o.typedBuffer,l=o.typedBufferStride,d=n.length,u=f[0],p=f[1],B=f[2],y=f[4],g=f[5],b=f[6],O=f[8],h=f[9],S=f[10],N=f[12],R=f[13],E=f[14];r*=l;let F=0,z=0,A=0;const L=e(f)?e=>{F=s[e]+N,z=s[e+1]+R,A=s[e+2]+E}:e=>{const t=s[e],f=s[e+1],o=s[e+2];F=u*t+y*f+O*o+N,z=p*t+g*f+h*o+R,A=B*t+b*f+S*o+E};if(1===i)for(let e=0;e<d;++e)L(3*n[e]),c[r]=F,c[r+1]=z,c[r+2]=A,r+=l;else for(let e=0;e<d;++e){L(3*n[e]);for(let e=0;e<i;++e)c[r]=F,c[r+1]=z,c[r+2]=A,r+=l}}function O(f,o,r,i,s=1){if(!o)return void a(f,r,i,s);const{data:n,indices:c}=f,l=o,d=r.typedBuffer,u=r.typedBufferStride,p=c.length,B=l[0],y=l[1],g=l[2],b=l[4],O=l[5],h=l[6],S=l[8],N=l[9],R=l[10],E=!t(l),F=1e-6,z=1-F;i*=u;let A=0,L=0,m=0;const T=e(l)?e=>{A=n[e],L=n[e+1],m=n[e+2]}:e=>{const t=n[e],f=n[e+1],o=n[e+2];A=B*t+b*f+S*o,L=y*t+O*f+N*o,m=g*t+h*f+R*o};if(1===s)if(E)for(let e=0;e<p;++e){T(3*c[e]);const t=A*A+L*L+m*m;if(t<z&&t>F){const e=1/Math.sqrt(t);d[i]=A*e,d[i+1]=L*e,d[i+2]=m*e}else d[i]=A,d[i+1]=L,d[i+2]=m;i+=u}else for(let e=0;e<p;++e)T(3*c[e]),d[i]=A,d[i+1]=L,d[i+2]=m,i+=u;else for(let e=0;e<p;++e){if(T(3*c[e]),E){const e=A*A+L*L+m*m;if(e<z&&e>F){const t=1/Math.sqrt(e);A*=t,L*=t,m*=t}}for(let e=0;e<s;++e)d[i]=A,d[i+1]=L,d[i+2]=m,i+=u}}function h(e,f,o,r,i=1){if(!f)return void p(e,o,r,i);const{data:s,indices:n}=e,c=f,l=o.typedBuffer,d=o.typedBufferStride,u=n.length,a=c[0],B=c[1],y=c[2],g=c[4],b=c[5],O=c[6],h=c[8],S=c[9],N=c[10],R=!t(c),E=1e-6,F=1-E;if(r*=d,1===i)for(let t=0;t<u;++t){const e=4*n[t],f=s[e],o=s[e+1],i=s[e+2],c=s[e+3];let u=a*f+g*o+h*i,p=B*f+b*o+S*i,z=y*f+O*o+N*i;if(R){const e=u*u+p*p+z*z;if(e<F&&e>E){const t=1/Math.sqrt(e);u*=t,p*=t,z*=t}}l[r]=u,l[r+1]=p,l[r+2]=z,l[r+3]=c,r+=d}else for(let t=0;t<u;++t){const e=4*n[t],f=s[e],o=s[e+1],c=s[e+2],u=s[e+3];let p=a*f+g*o+h*c,z=B*f+b*o+S*c,A=y*f+O*o+N*c;if(R){const e=p*p+z*z+A*A;if(e<F&&e>E){const t=1/Math.sqrt(e);p*=t,z*=t,A*=t}}for(let t=0;t<i;++t)l[r]=p,l[r+1]=z,l[r+2]=A,l[r+3]=u,r+=d}}function S(e,t,f,o,r=1){const{data:i,indices:s}=e,n=f.typedBuffer,c=f.typedBufferStride,l=s.length;if(o*=c,t!==i.length||4!==t)if(1!==r)if(4!==t)for(let d=0;d<l;++d){const e=3*s[d];for(let t=0;t<r;++t)n[o]=i[e],n[o+1]=i[e+1],n[o+2]=i[e+2],n[o+3]=255,o+=c}else for(let d=0;d<l;++d){const e=4*s[d];for(let t=0;t<r;++t)n[o]=i[e],n[o+1]=i[e+1],n[o+2]=i[e+2],n[o+3]=i[e+3],o+=c}else{if(4===t){for(let e=0;e<l;++e){const t=4*s[e];n[o]=i[t],n[o+1]=i[t+1],n[o+2]=i[t+2],n[o+3]=i[t+3],o+=c}return}for(let e=0;e<l;++e){const t=3*s[e];n[o]=i[t],n[o+1]=i[t+1],n[o+2]=i[t+2],n[o+3]=255,o+=c}}else{n[o]=i[0],n[o+1]=i[1],n[o+2]=i[2],n[o+3]=i[3];const e=new Uint32Array(f.typedBuffer.buffer,f.start),t=c/4,s=e[o/=4];o+=t;const d=l*r;for(let f=1;f<d;++f)e[o]=s,o+=t}}function N(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length,c=o[0];f*=s;for(let l=0;l<n;++l)i[f]=c,f+=s}function R(e,t,f,o,r=1){const i=t.typedBuffer,s=t.typedBufferStride;if(o*=s,1===r)for(let n=0;n<f;++n)i[o]=e[0],i[o+1]=e[1],i[o+2]=e[2],i[o+3]=e[3],o+=s;else for(let n=0;n<f;++n)for(let t=0;t<r;++t)i[o]=e[0],i[o+1]=e[1],i[o+2]=e[2],i[o+3]=e[3],o+=s}function E(e,t,o,r,i,s,n){for(const c of o.fields.keys()){const o=e.get(c),d=o?.indices;if(o&&d)F(c,o,r,i,s,n);else if(c===l.OBJECTANDLAYERIDCOLOR&&null!=t){const o=e.get(l.POSITION)?.indices;if(o){const e=o.length;R(t,s.getField(c,f),e,n)}}}}function F(e,t,d,a,B,y){switch(e){case l.POSITION:{c(3===t.size);const f=B.getField(e,n);c(!!f,`No buffer view for ${e}`),f&&b(t,d,f,y);break}case l.NORMAL:{c(3===t.size);const f=B.getField(e,n);c(!!f,`No buffer view for ${e}`),f&&O(t,a,f,y);break}case l.NORMALCOMPRESSED:{c(2===t.size);const f=B.getField(e,s);c(!!f,`No buffer view for ${e}`),f&&u(t,f,y);break}case l.UV0:{c(2===t.size);const f=B.getField(e,i);c(!!f,`No buffer view for ${e}`),f&&u(t,f,y);break}case l.COLOR:case l.SYMBOLCOLOR:{const o=B.getField(e,f);c(!!o,`No buffer view for ${e}`),c(3===t.size||4===t.size),!o||3!==t.size&&4!==t.size||S(t,t.size,o,y);break}case l.COLORFEATUREATTRIBUTE:{const f=B.getField(e,r);c(!!f,`No buffer view for ${e}`),c(1===t.size),f&&1===t.size&&N(t,f,y);break}case l.TANGENT:{c(4===t.size);const f=B.getField(e,o);c(!!f,`No buffer view for ${e}`),f&&h(t,d,f,y);break}case l.PROFILERIGHT:case l.PROFILEUP:case l.PROFILEVERTEXANDNORMAL:case l.FEATUREVALUE:{c(4===t.size);const f=B.getField(e,o);c(!!f,`No buffer view for ${e}`),f&&p(t,f,y)}}}export{d as writeBufferFloat,y as writeBufferMat3f,g as writeBufferMat4f,u as writeBufferVec2,a as writeBufferVec3,p as writeBufferVec4,B as writeBufferVec4Zeros,S as writeColor,N as writeColorFeatureAttribute,F as writeDefaultAttribute,E as writeDefaultAttributes,O as writeNormal,R as writeObjectAndLayerIdColor,b as writePosition,h as writeTangent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{p as l}from\"../../../../chunks/vec32.js\";import{ZEROS as e,freeze as u}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";function n({normalTexture:u,metallicRoughnessTexture:n,metallicFactor:r,roughnessFactor:t,emissiveTexture:o,emissiveFactor:s,occlusionTexture:c}){return null==u&&null==n&&null==o&&(null==s||l(s,e))&&null==c&&(null==t||1===t)&&(null==r||1===r)}function r({normalTexture:u,metallicRoughnessTexture:n,metallicFactor:r,roughnessFactor:t,emissiveTexture:o,emissiveFactor:s,occlusionTexture:c}){return null==u&&null==n&&null==o&&(null==s||l(s,e))&&null==c&&(null==t||1===t)&&(null==r||1===r||0===r)}const t=u(1,1,.5),o=u(0,.6,.2),s=u(0,1,.2);export{t as advancedMRRFactors,s as esriSymbologyMRRFactors,o as schematicMRRFactors,n as useSchematicPBR,r as useSchematicPBRI3S};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ZEROS as e,freeze as t,create as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as s}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{isColorOrColorEmission as r,ShaderOutput as l}from\"../core/shaderLibrary/ShaderOutput.js\";import{NormalType as o}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{VertexNormalPassParameters as a,VertexNormalDrawParameters as n}from\"../core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{alphaCutoff as h}from\"../core/shaderLibrary/util/AlphaCutoff.js\";import{ReloadableShaderModule as c}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as u}from\"../core/shaderTechnique/ShaderTechnique.js\";import{CullFaceOptions as m,DepthTestFunction as p,AlphaDiscardMode as d}from\"../lib/basicInterfaces.js\";import{RenderOccludedFlag as f}from\"../lib/Material.js\";import{OITPass as b}from\"../lib/OITPass.js\";import{blending as S,oitDepthTest as g,depthWrite as j,getDrawBuffers as y,getOITPolygonOffset as P}from\"../lib/OrderIndependentTransparency.js\";import{stencilWriteMaskOn as v,stencilToolMaskBaseParams as x,stencilBaseAllZerosParams as O}from\"../lib/StencilUtils.js\";import{advancedMRRFactors as T}from\"../materials/pbrUtils.js\";import{D}from\"../../../../chunks/DefaultMaterial.glsl.js\";import{SpecialDrawBuffers as L,CompareFunction as M}from\"../../../webgl/enums.js\";import{makePipelineState as A,cullingParams as w,defaultColorWrite as C}from\"../../../webgl/renderState.js\";class F extends a{constructor(){super(...arguments),this.isSchematic=!1,this.usePBR=!1,this.mrrFactors=T,this.hasVertexColors=!1,this.hasSymbolColors=!1,this.doubleSided=!1,this.doubleSidedType=\"normal\",this.cullFace=m.Back,this.isInstanced=!1,this.hasInstancedColor=!1,this.emissiveFactor=e,this.instancedDoublePrecision=!1,this.normalType=o.Attribute,this.receiveShadows=!0,this.receiveAmbientOcclusion=!0,this.castShadows=!0,this.ambient=t(.2,.2,.2),this.diffuse=t(.8,.8,.8),this.externalColor=s(1,1,1,1),this.colorMixMode=\"multiply\",this.opacity=1,this.layerOpacity=1,this.origin=i(),this.hasSlicePlane=!1,this.hasSliceHighlight=!0,this.offsetTransparentBackfaces=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.modelTransformation=null,this.transparent=!1,this.writeDepth=!0,this.customDepthTest=p.Less,this.textureAlphaMode=d.Blend,this.textureAlphaCutoff=h,this.textureAlphaPremultiplied=!1,this.renderOccluded=f.Occlude,this.isDecoration=!1}}class N extends n{constructor(){super(...arguments),this.origin=i(),this.slicePlaneLocalOrigin=this.origin}}class k extends u{constructor(e,t,i,s=new c(D,(()=>import(/* webpackChunkName: \"DefaultMaterial.glsl\" */ \"./DefaultMaterial.glsl.js\")))){super(e,t,s,i),this.type=\"DefaultMaterialTechnique\"}_makePipeline(e,t){const{oitPass:i,output:s,transparent:o,cullFace:a,customDepthTest:n,hasOccludees:h,enableOffset:c}=e,u=i===b.NONE,m=i===b.FrontFace;return A({blending:r(s)&&o?S(i):null,culling:B(e)?w(a):null,depthTest:{func:g(i,q(n))},depthWrite:j(e),drawBuffers:s===l.Depth?{buffers:[L.NONE]}:y(i,s),colorWrite:C,stencilWrite:h?v:null,stencilTest:h?t?x:O:null,polygonOffset:u||m?null:P(c)})}initializePipeline(e){return this._occludeePipelineState=this._makePipeline(e,!0),this._makePipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}function q(e){return e===p.Lequal?M.LEQUAL:M.LESS}function B(e){return e.cullFace!==m.None||!e.hasSlicePlane&&(!e.transparent&&!e.doubleSidedMode)}export{N as DefaultMaterialDrawParameters,F as DefaultMaterialPassParameters,k as DefaultMaterialTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{NormalType as t}from\"../core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{TextureCoordinateType as o}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as s}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{NormalsDoubleSidedMode as r}from\"../core/shaderLibrary/shading/Normals.glsl.js\";import{PBRMode as i}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{parameter as a}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{AlphaDiscardMode as h,CullFaceOptions as p,DepthTestFunction as n}from\"../lib/basicInterfaces.js\";import{DefaultTechniqueConfiguration as l}from\"../materials/DefaultTechniqueConfiguration.js\";class c extends l{constructor(e,o){super(),this.spherical=e,this.doublePrecisionRequiresObfuscation=o,this.alphaDiscardMode=h.Opaque,this.doubleSidedMode=r.None,this.pbrMode=i.Disabled,this.cullFace=p.None,this.normalType=t.Attribute,this.customDepthTest=n.Less,this.emissionSource=s.None,this.hasVertexColors=!1,this.hasSymbolColors=!1,this.hasVerticalOffset=!1,this.hasSlicePlane=!1,this.hasSliceHighlight=!0,this.hasColorTexture=!1,this.hasMetallicRoughnessTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.hasScreenSizePerspective=!1,this.hasVertexTangents=!1,this.hasOccludees=!1,this.hasModelTransformation=!1,this.offsetBackfaces=!1,this.vvSize=!1,this.vvColor=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.textureAlphaPremultiplied=!1,this.instanced=!1,this.instancedColor=!1,this.writeDepth=!0,this.transparent=!1,this.enableOffset=!0,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.snowCover=!1,this.hasColorTextureTransform=!1,this.hasEmissionTextureTransform=!1,this.hasNormalTextureTransform=!1,this.hasOcclusionTextureTransform=!1,this.hasMetallicRoughnessTextureTransform=!1,this.occlusionPass=!1,this.hasVvInstancing=!0,this.useCustomDTRExponentForWater=!1,this.useFillLights=!0}get textureCoordinateType(){return this.hasColorTexture||this.hasMetallicRoughnessTexture||this.emissionSource===s.Texture||this.hasOcclusionTexture||this.hasNormalTexture?o.Default:o.None}get objectAndLayerIdColorInstanced(){return this.instanced}get discardInvisibleFragments(){return this.transparent}}e([a({count:h.COUNT})],c.prototype,\"alphaDiscardMode\",void 0),e([a({count:r.COUNT})],c.prototype,\"doubleSidedMode\",void 0),e([a({count:i.COUNT})],c.prototype,\"pbrMode\",void 0),e([a({count:p.COUNT})],c.prototype,\"cullFace\",void 0),e([a({count:t.COUNT})],c.prototype,\"normalType\",void 0),e([a({count:n.COUNT})],c.prototype,\"customDepthTest\",void 0),e([a({count:s.COUNT})],c.prototype,\"emissionSource\",void 0),e([a()],c.prototype,\"hasVertexColors\",void 0),e([a()],c.prototype,\"hasSymbolColors\",void 0),e([a()],c.prototype,\"hasVerticalOffset\",void 0),e([a()],c.prototype,\"hasSlicePlane\",void 0),e([a()],c.prototype,\"hasSliceHighlight\",void 0),e([a()],c.prototype,\"hasColorTexture\",void 0),e([a()],c.prototype,\"hasMetallicRoughnessTexture\",void 0),e([a()],c.prototype,\"hasOcclusionTexture\",void 0),e([a()],c.prototype,\"hasNormalTexture\",void 0),e([a()],c.prototype,\"hasScreenSizePerspective\",void 0),e([a()],c.prototype,\"hasVertexTangents\",void 0),e([a()],c.prototype,\"hasOccludees\",void 0),e([a()],c.prototype,\"hasModelTransformation\",void 0),e([a()],c.prototype,\"offsetBackfaces\",void 0),e([a()],c.prototype,\"vvSize\",void 0),e([a()],c.prototype,\"vvColor\",void 0),e([a()],c.prototype,\"receiveShadows\",void 0),e([a()],c.prototype,\"receiveAmbientOcclusion\",void 0),e([a()],c.prototype,\"textureAlphaPremultiplied\",void 0),e([a()],c.prototype,\"instanced\",void 0),e([a()],c.prototype,\"instancedColor\",void 0),e([a()],c.prototype,\"writeDepth\",void 0),e([a()],c.prototype,\"transparent\",void 0),e([a()],c.prototype,\"enableOffset\",void 0),e([a()],c.prototype,\"terrainDepthTest\",void 0),e([a()],c.prototype,\"cullAboveTerrain\",void 0),e([a()],c.prototype,\"snowCover\",void 0),e([a()],c.prototype,\"hasColorTextureTransform\",void 0),e([a()],c.prototype,\"hasEmissionTextureTransform\",void 0),e([a()],c.prototype,\"hasNormalTextureTransform\",void 0),e([a()],c.prototype,\"hasOcclusionTextureTransform\",void 0),e([a()],c.prototype,\"hasMetallicRoughnessTextureTransform\",void 0);export{c as DefaultMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as o,isColorEmission as r,isColorOrColorEmission as t}from\"../core/shaderLibrary/ShaderOutput.js\";import{Emissions as i}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{OutputHighlight as l}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{alphaCutoff as a}from\"../core/shaderLibrary/util/AlphaCutoff.js\";import{ColorConversion as s}from\"../core/shaderLibrary/util/ColorConversion.glsl.js\";import{glsl as e,If as u}from\"../core/shaderModules/interfaces.js\";import{OITPass as n}from\"../lib/OITPass.js\";function d(d,f){d.include(l,f),d.include(i,f),d.fragment.include(s);const p=f.output===o.ObjectAndLayerIdColor,c=r(f.output),g=t(f.output)&&f.oitPass===n.ColorAlpha,h=t(f.output)&&f.oitPass!==n.ColorAlpha,m=f.discardInvisibleFragments;let C=0;(h||c||g)&&d.outputs.add(\"fragColor\",\"vec4\",C++),c&&d.outputs.add(\"fragEmission\",\"vec4\",C++),g&&d.outputs.add(\"fragAlpha\",\"float\",C++),d.fragment.code.add(e`\n    void outputColorHighlightOID(vec4 finalColor, const in vec3 vWorldPosition) {\n      ${u(p,e`finalColor.a = 1.0;`)}\n\n      ${u(m,e`if (finalColor.a < ${e.float(a)}){\n              discard;\n              return;\n            }`)}\n\n      finalColor = highlightSlice(finalColor, vWorldPosition);\n      ${u(g,e`fragColor = premultiplyAlpha(finalColor);\n             fragAlpha = finalColor.a;`)}\n      ${u(h,\"fragColor = finalColor;\")}\n      ${u(c,\"fragEmission = getEmissions();\")}\n      calculateOcclusionAndOutputHighlight();\n      ${u(p,\"outputObjectAndLayerIdColor();\")}\n    }\n  `)}export{d as outputColorHighlightOID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{DefaultMaterialTechnique as r}from\"./DefaultMaterialTechnique.js\";import{R as s}from\"../../../../chunks/RealisticTree.glsl.js\";class i extends r{constructor(r,i,t){super(r,i,t,new e(s,(()=>import(/* webpackChunkName: \"RealisticTree.glsl\" */ \"./RealisticTree.glsl.js\")))),this.type=\"RealisticTreeTechnique\"}}export{i as RealisticTreeTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{computeTranslationToOriginAndRotation as o}from\"../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectBuffer as r}from\"../../geometry/projection/projectBuffer.js\";var n,t;!function(e){e.OPAQUE=\"opaque-color\",e.TRANSPARENT=\"transparent-color\",e.COMPOSITE=\"composite-color\",e.FINAL=\"final-color\"}(n||(n={})),function(e){e.SSAO=\"ssao\",e.LASERLINES=\"laserline-color\",e.ANTIALIASING=\"aa-color\",e.HIGHLIGHTS=\"highlight-color\",e.MAGNIFIER=\"magnifier-color\",e.OCCLUDED=\"occluded-color\",e.VIEWSHED=\"viewshed-color\",e.OPAQUE_ENVIRONMENT=\"opaque-environment-color\",e.TRANSPARENT_ENVIRONMENT=\"transparent-environment-color\"}(t||(t={}));const l=null;function c(e,o,n,t,l,c,i){return t=t||e.spatialReference,r(o,t,n,l,e.renderCoordsHelper.spatialReference,c,i)?l:null}function i(e,o,n,t,l,c,i){return c=c||e.spatialReference,r(o,e.renderCoordsHelper.spatialReference,n,t,c,l,i)?t:null}function a(r,n,t,l){return l||(l=e()),t=t||r.spatialReference,o(t,n,l,r.renderCoordsHelper.spatialReference)?l:null}export{t as InternalRenderCategory,n as RenderCategory,i as fromRenderCoordinates,a as renderCoordinateTransformAt,c as toRenderCoordinates,l as webgl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Accessor.js\";import t from\"../../../core/Error.js\";import{watch as i,initial as s}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{RenderCategory as d}from\"../webgl.js\";import{RenderRequestType as a}from\"../webgl-engine/lib/basicInterfaces.js\";let u=class extends r{constructor(e){super(e),this.view=null,this.consumes={required:[]},this.produces=d.COMPOSITE,this.requireGeometryDepth=!1,this._dirty=!0}initialize(){this.addHandles([i((()=>this.view.ready),(e=>{e&&this.view._stage?.renderer.addRenderNode(this)}),s)])}destroy(){this.view._stage?.renderer?.removeRenderNode(this)}precompile(){}render(){throw new t(\"RenderNode:render-function-not-implemented\",\"render() is not implemented.\")}get camera(){return this.view.state.camera.clone()}get sunLight(){return this.bindParameters.lighting.legacy}get gl(){return this.view._stage.renderView.renderingContext.gl}acquireOutputFramebuffer(){const e=this._frameBuffer?.getTexture()?.descriptor,r=this.view._stage.renderer.fboCache.acquire(e?.width??640,e?.height??480,this.produces);return r.fbo?.initializeAndBind(),r}bindRenderTarget(){return this._frameBuffer?.fbo?.initializeAndBind(),this._frameBuffer}requestRender(e){e===a.UPDATE&&this.view._stage?.renderView.requestRender(e),this._dirty=!0}resetWebGLState(){this.renderingContext.resetState(),this.renderingContext.bindFramebuffer(this._frameBuffer?.fbo)}get fboCache(){return this.view._stage.renderer.fboCache}get bindParameters(){return this.renderContext.bind}get renderingContext(){return this.view._stage.renderView.renderingContext}get renderContext(){return this.view._stage?.renderer.renderContext}updateAnimation(e){return!!this._dirty&&(this._dirty=!1,!0)}doRender(e){this._frameBuffer=e.find((({name:e})=>e===this.produces));try{return this.render(e)}finally{this._frameBuffer=null}}};e([n({constructOnly:!0})],u.prototype,\"view\",void 0),e([n({constructOnly:!0})],u.prototype,\"consumes\",void 0),e([n()],u.prototype,\"produces\",void 0),u=e([o(\"esri.views.3d.webgl.RenderNode\")],u);const c=u;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar R,E;!function(R){R[R.RED=0]=\"RED\",R[R.RG=1]=\"RG\",R[R.RGBA4=2]=\"RGBA4\",R[R.RGBA=3]=\"RGBA\",R[R.RGBA_MIPMAP=4]=\"RGBA_MIPMAP\",R[R.R16F=5]=\"R16F\",R[R.RGBA16F=6]=\"RGBA16F\"}(R||(R={})),function(R){R[R.DEPTH_STENCIL_TEXTURE=0]=\"DEPTH_STENCIL_TEXTURE\",R[R.DEPTH16_BUFFER=1]=\"DEPTH16_BUFFER\"}(E||(E={}));export{R as ColorFormat,E as DepthFormat};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar l;function o(o){return\"global\"===o?l.Global:l.Local}function a(o){return o===l.Global?\"global\":\"local\"}!function(l){l[l.Global=1]=\"Global\",l[l.Local=2]=\"Local\"}(l||(l={}));export{l as ViewingMode,a as stringFromViewingMode,o as viewingModeFromString};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar e;!function(e){e[e.Texture=0]=\"Texture\",e[e.RenderBuffer=1]=\"RenderBuffer\"}(e||(e={}));export{e as GLObjectType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import\"../../core/has.js\";import{checkWebGLError as e}from\"./checkWebGLError.js\";import{TextureType as i,ResourceType as r,TextureSamplingMode as s,PixelFormat as o,PixelType as a,SizedPixelFormat as n,CompressedTextureFormat as l}from\"./enums.js\";import{GLObjectType as h}from\"./GLObjectType.js\";import{estimateMemory as p}from\"./TextureDescriptor.js\";import{ValidatedTextureDescriptor as d}from\"./ValidatedTextureDescriptor.js\";const _=null;let m=class l{constructor(e,r=null,s=null){if(this.type=h.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,\"context\"in e)this._descriptor=e,s=r;else{const i=d.validate(e,r);if(!i)throw new t(\"Texture descriptor invalid\");this._descriptor=i}this._descriptor.target===i.TEXTURE_CUBE_MAP?this._setDataCubeMap(s):this.setData(s)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return p(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(r.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,r){const s=this._descriptor;if(s.width!==e||s.height!==r){if(this._wasImmutablyAllocated)throw new t(\"Immutable textures can't be resized!\");s.width=e,s.height=r,this._descriptor.target===i.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let e=i.TEXTURE_CUBE_MAP_POSITIVE_X;e<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z;e++)this._setData(t,e)}setData(t){this._setData(t)}_setData(i,s){const o=this._descriptor.context?.gl;if(!o)return;e(o),this._glName||(this._glName=o.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(r.Texture,this));const a=this._descriptor,n=s??a.target,h=f(n),p=this._descriptor.context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(l.TEXTURE_UNIT_FOR_UPDATES),c(a),this._configurePixelStorage(),e(o);const d=this._deriveInternalFormat();if(I(i)){let t=\"width\"in i?i.width:i.codedWidth,r=\"height\"in i?i.height:i.codedHeight;const s=1;i instanceof HTMLVideoElement&&(t=i.videoWidth,r=i.videoHeight),a.width&&a.height,h&&a.depth,a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,d,a.hasMipmap,t,r,s),this._texImage(n,0,d,t,r,s,i),e(o),a.hasMipmap&&(this.generateMipmap(),e(o)),a.width||(a.width=t),a.height||(a.height=r),h&&!a.depth&&(a.depth=s)}else{const{width:r,height:s,depth:l}=a;if(null==r||null==s)throw new t(\"Width and height must be specified!\");if(h&&null==l)throw new t(\"Depth must be specified!\");if(a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,d,a.hasMipmap,r,s,l),M(i)){const e=i.levels,h=R(n,r,s,l),p=Math.min(h-1,e.length-1);o.texParameteri(a.target,this._descriptor.context.gl.TEXTURE_MAX_LEVEL,p);const _=d;if(!x(_))throw new t(\"Attempting to use compressed data with an uncompressed format!\");this._forEachMipmapLevel(((t,i,r,s)=>{const o=e[Math.min(t,e.length-1)];this._compressedTexImage(n,t,_,i,r,s,o)}),p)}else this._texImage(n,0,d,r,s,l,i),e(o),a.hasMipmap&&this.generateMipmap()}u(o,this._descriptor),T(o,this._descriptor),E(this._descriptor.context,this._descriptor),e(o),this._descriptor.context.bindTexture(p,l.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,i,r,s,o,a,n=0){a||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const h=this._descriptor,p=this._deriveInternalFormat(),{context:d,pixelFormat:_,dataType:m,target:c,isImmutable:u}=h;if(u&&!this._wasImmutablyAllocated)throw new t(\"Cannot update immutable texture before allocation!\");const T=d.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES,!0);(i<0||r<0||i+s>h.width||r+o>h.height)&&console.error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:E}=d;n&&E.pixelStorei(E.UNPACK_SKIP_ROWS,n),I(a)?E.texSubImage2D(c,e,i,r,s,o,_,m,a):M(a)?E.compressedTexSubImage2D(c,e,i,r,s,o,p,a.levels[e]):E.texSubImage2D(c,e,i,r,s,o,_,m,a),n&&E.pixelStorei(E.UNPACK_SKIP_ROWS,0),d.bindTexture(T,l.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,o,a,n,h){h||console.error(\"An attempt to use uninitialized data!\"),this._glName||console.error(\"An attempt to update uninitialized texture!\");const p=this._descriptor,d=this._deriveInternalFormat(),{context:_,pixelFormat:m,dataType:c,isImmutable:u,target:T}=p;if(u&&!this._wasImmutablyAllocated)throw new t(\"Cannot update immutable texture before allocation!\");f(T)||console.warn(\"Attempting to set 3D texture data on a non-3D texture\");const E=_.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES);_.setActiveTexture(l.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||i+o>p.width||r+a>p.height||s+n>p.depth)&&console.error(\"An attempt to update out of bounds of the texture!\"),this._configurePixelStorage();const{gl:g}=_;if(M(h))h=h.levels[e],g.compressedTexSubImage3D(T,e,i,r,s,o,a,n,d,h);else{const t=h;g.texSubImage3D(T,e,i,r,s,o,a,n,m,c,t)}_.bindTexture(E,l.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"Cannot add mipmaps to immutable texture after allocation\");e.hasMipmap=!0,this._samplingModeDirty=!0,c(e)}e.samplingMode===s.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=s.LINEAR_MIPMAP_NEAREST):e.samplingMode===s.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=s.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,l.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(l.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,l.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new t(\"Cannot delete mipmaps to immutable texture after allocation\");e.hasMipmap=!1,this._samplingModeDirty=!0,c(e)}e.samplingMode===s.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,e.samplingMode=s.LINEAR):e.samplingMode===s.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=s.NEAREST)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,c(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor,e=t.context.gl;this._samplingModeDirty&&(u(e,t),this._samplingModeDirty=!1),this._wrapModeDirty&&(T(e,t),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===o.DEPTH_STENCIL&&(this._descriptor.internalFormat=o.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case a.FLOAT:switch(this._descriptor.pixelFormat){case o.RGBA:return this._descriptor.internalFormat=n.RGBA32F;case o.RGB:return this._descriptor.internalFormat=n.RGB32F;default:throw new t(\"Unable to derive format\")}case a.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case o.RGBA:return this._descriptor.internalFormat=n.RGBA8;case o.RGB:return this._descriptor.internalFormat=n.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===o.DEPTH_STENCIL?o.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:e,flipped:i,preMultiplyAlpha:r}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_texStorage(e,i,r,s,o,a){const{gl:n}=this._descriptor.context;if(!g(i))throw new t(\"Immutable textures must have a sized internal format\");if(!this._descriptor.isImmutable)return;const l=r?R(e,s,o,a):1;if(f(e)){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");n.texStorage3D(e,l,i,s,o,a)}else n.texStorage2D(e,l,i,s,o);this._wasImmutablyAllocated=!0}_texImage(e,i,r,s,o,a,n){const l=this._descriptor.context.gl,h=f(e),{isImmutable:p,pixelFormat:d,dataType:_}=this._descriptor;if(p){if(null!=n){const r=n;if(h){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.texSubImage3D(e,i,0,0,0,s,o,a,d,_,r)}else l.texSubImage2D(e,i,0,0,s,o,d,_,r)}}else{const p=n;if(h){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.texImage3D(e,i,r,s,o,a,0,d,_,p)}else l.texImage2D(e,i,r,s,o,0,d,_,p)}}_compressedTexImage(e,i,r,s,o,a,n){const l=this._descriptor.context.gl,h=f(e);if(this._descriptor.isImmutable){if(null!=n)if(h){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.compressedTexSubImage3D(e,i,0,0,0,s,o,a,r,n)}else l.compressedTexSubImage2D(e,i,0,0,s,o,r,n)}else if(h){if(null==a)throw new t(\"Missing depth dimension for 3D texture upload\");l.compressedTexImage3D(e,i,r,s,o,a,0,n)}else l.compressedTexImage2D(e,i,r,s,o,0,n)}_forEachMipmapLevel(e,r=1/0){let{width:s,height:o,depth:a,hasMipmap:n,target:l}=this._descriptor;const h=l===i.TEXTURE_3D;if(null==s||null==o||h&&null==a)throw new t(\"Missing texture dimensions for mipmap calculation\");for(let t=0;e(t,s,o,a),n&&(1!==s||1!==o||h&&1!==a)&&!(t>=r);++t)s=Math.max(1,s>>1),o=Math.max(1,o>>1),h&&(a=Math.max(1,a>>1))}};function c(t){(null!=t.width&&t.width<0||null!=t.height&&t.height<0||null!=t.depth&&t.depth<0)&&console.error(\"Negative dimension parameters are not allowed!\")}function u(t,e){let i=e.samplingMode,r=e.samplingMode;i===s.LINEAR_MIPMAP_NEAREST||i===s.LINEAR_MIPMAP_LINEAR?(i=s.LINEAR,e.hasMipmap||(r=s.LINEAR)):i!==s.NEAREST_MIPMAP_NEAREST&&i!==s.NEAREST_MIPMAP_LINEAR||(i=s.NEAREST,e.hasMipmap||(r=s.NEAREST)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,r)}function T(t,e){\"number\"==typeof e.wrapMode?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}function E(t,e){const i=t.capabilities.textureFilterAnisotropic;if(!i)return;t.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}function g(t){return t in n}function x(t){return t in l}function M(t){return null!=t&&\"type\"in t&&\"compressed\"===t.type}function A(t){return null!=t&&\"byteLength\"in t}function I(t){return null!=t&&!M(t)&&!A(t)}function f(t){return t===i.TEXTURE_3D||t===i.TEXTURE_2D_ARRAY}function R(t,e,r,s=1){let o=Math.max(e,r);return t===i.TEXTURE_3D&&(o=Math.max(o,s)),Math.round(Math.log(o)/Math.LN2)+1}m.TEXTURE_UNIT_FOR_UPDATES=0;export{m as Texture,_ as tracer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{TextureType as t,PixelFormat as i,PixelType as h,TextureSamplingMode as s,TextureWrapMode as a}from\"./enums.js\";import{getBytesPerElementFormat as e}from\"./Util.js\";class p{constructor(e=0,p=e){this.width=e,this.height=p,this.target=t.TEXTURE_2D,this.pixelFormat=i.RGBA,this.dataType=h.UNSIGNED_BYTE,this.samplingMode=s.LINEAR,this.wrapMode=a.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}}function r(i){return i.width<=0||i.height<=0?0:Math.round(i.width*i.height*(i.hasMipmap?4/3:1)*(null==i.internalFormat?4:e(i.internalFormat))*(i.target===t.TEXTURE_CUBE_MAP?6:1))}export{p as TextureDescriptor,r as estimateMemory};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{webglDebugEnabled as e}from\"./checkWebGLError.js\";import{BufferType as r,CompressedTextureFormat as t,SizedPixelFormat as s,RenderbufferFormat as a,PixelFormat as c}from\"./enums.js\";import{getDataTypeBytes as n}from\"./getDataTypeBytes.js\";function o(e){const r=e.gl;switch(r.getError()){case r.NO_ERROR:return null;case r.INVALID_ENUM:return\"An unacceptable value has been specified for an enumerated argument\";case r.INVALID_VALUE:return\"An unacceptable value has been specified for an argument\";case r.INVALID_OPERATION:return\"The specified command is not allowed for the current state\";case r.INVALID_FRAMEBUFFER_OPERATION:return\"The currently bound framebuffer is not framebuffer complete\";case r.OUT_OF_MEMORY:return\"Not enough memory is left to execute the command\";case r.CONTEXT_LOST_WEBGL:return\"WebGL context is lost\"}return\"Unknown error\"}function i(e,r){return(e.vertexBuffers.get(r)?.usedMemory??0)/R(e.layout.get(r))}function R(e){return e[0].stride}function E(r,t,s,a,c=0){const i=r.gl;r.bindBuffer(s);for(const R of a){const s=t.get(R.name);if(null==s){console.warn(`There is no location for vertex attribute '${R.name}' defined.`);continue}const a=c*R.stride;if(R.count<=4)i.vertexAttribPointer(s,R.count,R.type,R.normalized,R.stride,R.offset+a),i.enableVertexAttribArray(s),R.divisor>0&&r.gl.vertexAttribDivisor(s,R.divisor);else if(9===R.count)for(let e=0;e<3;e++)i.vertexAttribPointer(s+e,3,R.type,R.normalized,R.stride,R.offset+12*e+a),i.enableVertexAttribArray(s+e),R.divisor>0&&r.gl.vertexAttribDivisor(s+e,R.divisor);else if(16===R.count)for(let e=0;e<4;e++)i.vertexAttribPointer(s+e,4,R.type,R.normalized,R.stride,R.offset+16*e+a),i.enableVertexAttribArray(s+e),R.divisor>0&&r.gl?.vertexAttribDivisor(s+e,R.divisor);else console.error(\"Unsupported vertex attribute element count: \"+R.count);if(e()){const e=o(r),t=n(R.type),s=R.offset,c=Math.round(t/s)!==t/s?`. Offset not a multiple of stride. DataType requires ${t} bytes, but descriptor has an offset of ${s}`:\"\";e&&console.error(`Unable to bind vertex attribute \"${R.name}\" with baseInstanceOffset ${a}${c}:`,e,R)}}}function _(e,t,s,a){const c=e.gl;e.bindBuffer(s);for(const r of a){const s=t.get(r.name);if(r.count<=4)c.disableVertexAttribArray(s),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(s,0);else if(9===r.count)for(let t=0;t<3;t++)c.disableVertexAttribArray(s+t),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(s+t,0);else if(16===r.count)for(let t=0;t<4;t++)c.disableVertexAttribArray(s+t),r.divisor&&r.divisor>0&&e.gl?.vertexAttribDivisor(s+t,0);else console.error(\"Unsupported vertex attribute element count: \"+r.count)}e.unbindBuffer(r.ARRAY_BUFFER)}function u(e){switch(e){case c.ALPHA:case c.LUMINANCE:case c.RED:case c.RED_INTEGER:case s.R8:case s.R8I:case s.R8UI:case s.R8_SNORM:case a.STENCIL_INDEX8:return 1;case c.LUMINANCE_ALPHA:case c.RG:case c.RG_INTEGER:case s.RGBA4:case s.R16F:case s.R16I:case s.R16UI:case s.RG8:case s.RG8I:case s.RG8UI:case s.RG8_SNORM:case s.RGB565:case s.RGB5_A1:case a.DEPTH_COMPONENT16:return 2;case c.DEPTH_COMPONENT:case c.RGB:case c.RGB_INTEGER:case s.RGB8:case s.RGB8I:case s.RGB8UI:case s.RGB8_SNORM:case s.SRGB8:case a.DEPTH_COMPONENT24:return 3;case c.DEPTH_STENCIL:case c.DEPTH24_STENCIL8:case c.RGBA:case c.RGBA_INTEGER:case s.RGBA8:case s.R32F:case s.R11F_G11F_B10F:case s.RG16F:case s.R32I:case s.R32UI:case s.RG16I:case s.RG16UI:case s.RGBA8I:case s.RGBA8UI:case s.RGBA8_SNORM:case s.SRGB8_ALPHA8:case s.RGB9_E5:case s.RGB10_A2UI:case s.RGB10_A2:case a.DEPTH_STENCIL:case a.DEPTH_COMPONENT32F:case a.DEPTH24_STENCIL8:return 4;case a.DEPTH32F_STENCIL8:return 5;case s.RGB16F:case s.RGB16I:case s.RGB16UI:return 6;case s.RG32F:case s.RG32I:case s.RG32UI:case s.RGBA16F:case s.RGBA16I:case s.RGBA16UI:return 8;case s.RGB32F:case s.RGB32I:case s.RGB32UI:return 12;case s.RGBA32F:case s.RGBA32I:case s.RGBA32UI:return 16;case t.COMPRESSED_RGB_S3TC_DXT1_EXT:case t.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case t.COMPRESSED_RGBA_S3TC_DXT3_EXT:case t.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case t.COMPRESSED_R11_EAC:case t.COMPRESSED_SIGNED_R11_EAC:case t.COMPRESSED_RGB8_ETC2:case t.COMPRESSED_SRGB8_ETC2:case t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case t.COMPRESSED_RG11_EAC:case t.COMPRESSED_SIGNED_RG11_EAC:case t.COMPRESSED_RGBA8_ETC2_EAC:case t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}export{E as bindVertexBufferLayout,u as getBytesPerElementFormat,o as getErrorString,R as getStride,_ as unbindVertexBufferLayout,i as vertexCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{SizedPixelFormat as s,PixelFormat as e}from\"./enums.js\";import{TextureDescriptor as t}from\"./TextureDescriptor.js\";class a extends t{constructor(t,a){switch(super(),this.context=t,Object.assign(this,a),this.internalFormat){case s.R16F:case s.R16I:case s.R16UI:case s.R32F:case s.R32I:case s.R32UI:case s.R8_SNORM:case s.R8:case s.R8I:case s.R8UI:this.pixelFormat=e.RED}}static validate(s,e){return new a(s,e)}}export{a as ValidatedTextureDescriptor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import has from\"../../core/has.js\";import r from\"../../core/Logger.js\";const o=()=>r.getLogger(\"esri.views.webgl.checkWebGLError\");function t(e,r){switch(r){case e.INVALID_ENUM:return\"Invalid Enum. An unacceptable value has been specified for an enumerated argument.\";case e.INVALID_VALUE:return\"Invalid Value. A numeric argument is out of range.\";case e.INVALID_OPERATION:return\"Invalid Operation. The specified command is not allowed for the current state.\";case e.INVALID_FRAMEBUFFER_OPERATION:return\"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.\";case e.OUT_OF_MEMORY:return\"Out of memory. Not enough memory is left to execute the command.\";case e.CONTEXT_LOST_WEBGL:return\"WebGL context has been lost\";default:return\"Unknown error\"}}const n=!!has(\"enable-feature:webgl-debug\");function a(){return n}function c(){return n}function u(r){if(a()){const n=r.getError();if(n){const a=t(r,n),c=(new Error).stack;o().error(new e(\"webgl-error\",\"WebGL error occurred\",{message:a,stack:c}))}}}export{u as checkWebGLError,n as hasFeatureFlagWebGLDebug,a as webglDebugEnabled,c as webglValidateShadersEnabled};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t,n,o){for(let r=0;r<o;++r)n[2*r]=t[r],n[2*r+1]=t[r]-n[2*r]}function n(t,n,o){for(let r=0;r<o;++r)n[r]=t[2*r]+t[2*r+1]}function o(t,n){const o=t.length;for(let r=0;r<o;++r)e[0]=t[r],n[r]=e[0];return n}function r(t,n){const o=t.length;for(let r=0;r<o;++r)e[0]=t[r],e[1]=t[r]-e[0],n[r]=e[1];return n}const e=new Float32Array(2);export{n as decodeDoubleArray,t as encodeDoubleArray,o as encodeDoubleHi,r as encodeDoubleLo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar _,E,R,T,A,N,S,C,O,I,L,D,M,G,P,U,B,F,H,n;!function(_){_[_.DEPTH=256]=\"DEPTH\",_[_.STENCIL=1024]=\"STENCIL\",_[_.COLOR=16384]=\"COLOR\"}(_||(_={})),function(_){_[_.POINTS=0]=\"POINTS\",_[_.LINES=1]=\"LINES\",_[_.LINE_LOOP=2]=\"LINE_LOOP\",_[_.LINE_STRIP=3]=\"LINE_STRIP\",_[_.TRIANGLES=4]=\"TRIANGLES\",_[_.TRIANGLE_STRIP=5]=\"TRIANGLE_STRIP\",_[_.TRIANGLE_FAN=6]=\"TRIANGLE_FAN\"}(E||(E={})),function(_){_[_.ZERO=0]=\"ZERO\",_[_.ONE=1]=\"ONE\",_[_.SRC_COLOR=768]=\"SRC_COLOR\",_[_.ONE_MINUS_SRC_COLOR=769]=\"ONE_MINUS_SRC_COLOR\",_[_.SRC_ALPHA=770]=\"SRC_ALPHA\",_[_.ONE_MINUS_SRC_ALPHA=771]=\"ONE_MINUS_SRC_ALPHA\",_[_.DST_ALPHA=772]=\"DST_ALPHA\",_[_.ONE_MINUS_DST_ALPHA=773]=\"ONE_MINUS_DST_ALPHA\",_[_.DST_COLOR=774]=\"DST_COLOR\",_[_.ONE_MINUS_DST_COLOR=775]=\"ONE_MINUS_DST_COLOR\",_[_.SRC_ALPHA_SATURATE=776]=\"SRC_ALPHA_SATURATE\",_[_.CONSTANT_COLOR=32769]=\"CONSTANT_COLOR\",_[_.ONE_MINUS_CONSTANT_COLOR=32770]=\"ONE_MINUS_CONSTANT_COLOR\",_[_.CONSTANT_ALPHA=32771]=\"CONSTANT_ALPHA\",_[_.ONE_MINUS_CONSTANT_ALPHA=32772]=\"ONE_MINUS_CONSTANT_ALPHA\"}(R||(R={})),function(_){_[_.ADD=32774]=\"ADD\",_[_.MIN=32775]=\"MIN\",_[_.MAX=32776]=\"MAX\",_[_.SUBTRACT=32778]=\"SUBTRACT\",_[_.REVERSE_SUBTRACT=32779]=\"REVERSE_SUBTRACT\"}(T||(T={})),function(_){_[_.ARRAY_BUFFER=34962]=\"ARRAY_BUFFER\",_[_.ELEMENT_ARRAY_BUFFER=34963]=\"ELEMENT_ARRAY_BUFFER\",_[_.UNIFORM_BUFFER=35345]=\"UNIFORM_BUFFER\",_[_.PIXEL_PACK_BUFFER=35051]=\"PIXEL_PACK_BUFFER\",_[_.PIXEL_UNPACK_BUFFER=35052]=\"PIXEL_UNPACK_BUFFER\",_[_.COPY_READ_BUFFER=36662]=\"COPY_READ_BUFFER\",_[_.COPY_WRITE_BUFFER=36663]=\"COPY_WRITE_BUFFER\",_[_.TRANSFORM_FEEDBACK_BUFFER=35982]=\"TRANSFORM_FEEDBACK_BUFFER\"}(A||(A={})),function(_){_[_.FRONT=1028]=\"FRONT\",_[_.BACK=1029]=\"BACK\",_[_.FRONT_AND_BACK=1032]=\"FRONT_AND_BACK\"}(N||(N={})),function(_){_[_.CW=2304]=\"CW\",_[_.CCW=2305]=\"CCW\"}(S||(S={})),function(_){_[_.BYTE=5120]=\"BYTE\",_[_.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",_[_.SHORT=5122]=\"SHORT\",_[_.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",_[_.INT=5124]=\"INT\",_[_.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",_[_.FLOAT=5126]=\"FLOAT\",_[_.HALF_FLOAT=5131]=\"HALF_FLOAT\"}(C||(C={})),function(_){_[_.NEVER=512]=\"NEVER\",_[_.LESS=513]=\"LESS\",_[_.EQUAL=514]=\"EQUAL\",_[_.LEQUAL=515]=\"LEQUAL\",_[_.GREATER=516]=\"GREATER\",_[_.NOTEQUAL=517]=\"NOTEQUAL\",_[_.GEQUAL=518]=\"GEQUAL\",_[_.ALWAYS=519]=\"ALWAYS\"}(O||(O={})),function(_){_[_.ZERO=0]=\"ZERO\",_[_.KEEP=7680]=\"KEEP\",_[_.REPLACE=7681]=\"REPLACE\",_[_.INCR=7682]=\"INCR\",_[_.DECR=7683]=\"DECR\",_[_.INVERT=5386]=\"INVERT\",_[_.INCR_WRAP=34055]=\"INCR_WRAP\",_[_.DECR_WRAP=34056]=\"DECR_WRAP\"}(I||(I={})),function(_){_[_.NEAREST=9728]=\"NEAREST\",_[_.LINEAR=9729]=\"LINEAR\",_[_.NEAREST_MIPMAP_NEAREST=9984]=\"NEAREST_MIPMAP_NEAREST\",_[_.LINEAR_MIPMAP_NEAREST=9985]=\"LINEAR_MIPMAP_NEAREST\",_[_.NEAREST_MIPMAP_LINEAR=9986]=\"NEAREST_MIPMAP_LINEAR\",_[_.LINEAR_MIPMAP_LINEAR=9987]=\"LINEAR_MIPMAP_LINEAR\"}(L||(L={})),function(_){_[_.CLAMP_TO_EDGE=33071]=\"CLAMP_TO_EDGE\",_[_.REPEAT=10497]=\"REPEAT\",_[_.MIRRORED_REPEAT=33648]=\"MIRRORED_REPEAT\"}(D||(D={})),function(_){_[_.TEXTURE_2D=3553]=\"TEXTURE_2D\",_[_.TEXTURE_CUBE_MAP=34067]=\"TEXTURE_CUBE_MAP\",_[_.TEXTURE_3D=32879]=\"TEXTURE_3D\",_[_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]=\"TEXTURE_CUBE_MAP_POSITIVE_X\",_[_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]=\"TEXTURE_CUBE_MAP_NEGATIVE_X\",_[_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=\"TEXTURE_CUBE_MAP_POSITIVE_Y\",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]=\"TEXTURE_CUBE_MAP_NEGATIVE_Y\",_[_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]=\"TEXTURE_CUBE_MAP_POSITIVE_Z\",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]=\"TEXTURE_CUBE_MAP_NEGATIVE_Z\",_[_.TEXTURE_2D_ARRAY=35866]=\"TEXTURE_2D_ARRAY\"}(M||(M={})),function(_){_[_.DEPTH_COMPONENT=6402]=\"DEPTH_COMPONENT\",_[_.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\",_[_.DEPTH24_STENCIL8=35056]=\"DEPTH24_STENCIL8\",_[_.ALPHA=6406]=\"ALPHA\",_[_.RGB=6407]=\"RGB\",_[_.RGBA=6408]=\"RGBA\",_[_.LUMINANCE=6409]=\"LUMINANCE\",_[_.LUMINANCE_ALPHA=6410]=\"LUMINANCE_ALPHA\",_[_.RED=6403]=\"RED\",_[_.RG=33319]=\"RG\",_[_.RED_INTEGER=36244]=\"RED_INTEGER\",_[_.RG_INTEGER=33320]=\"RG_INTEGER\",_[_.RGB_INTEGER=36248]=\"RGB_INTEGER\",_[_.RGBA_INTEGER=36249]=\"RGBA_INTEGER\"}(G||(G={})),function(_){_[_.RGBA4=32854]=\"RGBA4\",_[_.R16F=33325]=\"R16F\",_[_.RG16F=33327]=\"RG16F\",_[_.RGB32F=34837]=\"RGB32F\",_[_.RGBA16F=34842]=\"RGBA16F\",_[_.R32F=33326]=\"R32F\",_[_.RG32F=33328]=\"RG32F\",_[_.RGBA32F=34836]=\"RGBA32F\",_[_.R11F_G11F_B10F=35898]=\"R11F_G11F_B10F\",_[_.RGB8=32849]=\"RGB8\",_[_.RGBA8=32856]=\"RGBA8\",_[_.RGB5_A1=32855]=\"RGB5_A1\",_[_.R8=33321]=\"R8\",_[_.RG8=33323]=\"RG8\",_[_.R8I=33329]=\"R8I\",_[_.R8UI=33330]=\"R8UI\",_[_.R16I=33331]=\"R16I\",_[_.R16UI=33332]=\"R16UI\",_[_.R32I=33333]=\"R32I\",_[_.R32UI=33334]=\"R32UI\",_[_.RG8I=33335]=\"RG8I\",_[_.RG8UI=33336]=\"RG8UI\",_[_.RG16I=33337]=\"RG16I\",_[_.RG16UI=33338]=\"RG16UI\",_[_.RG32I=33339]=\"RG32I\",_[_.RG32UI=33340]=\"RG32UI\",_[_.RGB16F=34843]=\"RGB16F\",_[_.RGB9_E5=35901]=\"RGB9_E5\",_[_.SRGB8=35905]=\"SRGB8\",_[_.SRGB8_ALPHA8=35907]=\"SRGB8_ALPHA8\",_[_.RGB565=36194]=\"RGB565\",_[_.RGBA32UI=36208]=\"RGBA32UI\",_[_.RGB32UI=36209]=\"RGB32UI\",_[_.RGBA16UI=36214]=\"RGBA16UI\",_[_.RGB16UI=36215]=\"RGB16UI\",_[_.RGBA8UI=36220]=\"RGBA8UI\",_[_.RGB8UI=36221]=\"RGB8UI\",_[_.RGBA32I=36226]=\"RGBA32I\",_[_.RGB32I=36227]=\"RGB32I\",_[_.RGBA16I=36232]=\"RGBA16I\",_[_.RGB16I=36233]=\"RGB16I\",_[_.RGBA8I=36238]=\"RGBA8I\",_[_.RGB8I=36239]=\"RGB8I\",_[_.R8_SNORM=36756]=\"R8_SNORM\",_[_.RG8_SNORM=36757]=\"RG8_SNORM\",_[_.RGB8_SNORM=36758]=\"RGB8_SNORM\",_[_.RGBA8_SNORM=36759]=\"RGBA8_SNORM\",_[_.RGB10_A2=32857]=\"RGB10_A2\",_[_.RGB10_A2UI=36975]=\"RGB10_A2UI\"}(P||(P={})),function(_){_[_.FLOAT=5126]=\"FLOAT\",_[_.UNSIGNED_BYTE=5121]=\"UNSIGNED_BYTE\",_[_.UNSIGNED_INT_24_8=34042]=\"UNSIGNED_INT_24_8\",_[_.UNSIGNED_SHORT_4_4_4_4=32819]=\"UNSIGNED_SHORT_4_4_4_4\",_[_.UNSIGNED_SHORT_5_5_5_1=32820]=\"UNSIGNED_SHORT_5_5_5_1\",_[_.UNSIGNED_SHORT_5_6_5=33635]=\"UNSIGNED_SHORT_5_6_5\",_[_.BYTE=5120]=\"BYTE\",_[_.UNSIGNED_SHORT=5123]=\"UNSIGNED_SHORT\",_[_.SHORT=5122]=\"SHORT\",_[_.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",_[_.INT=5124]=\"INT\",_[_.HALF_FLOAT=5131]=\"HALF_FLOAT\",_[_.UNSIGNED_INT_2_10_10_10_REV=33640]=\"UNSIGNED_INT_2_10_10_10_REV\",_[_.UNSIGNED_INT_10F_11F_11F_REV=35899]=\"UNSIGNED_INT_10F_11F_11F_REV\",_[_.UNSIGNED_INT_5_9_9_9_REV=35902]=\"UNSIGNED_INT_5_9_9_9_REV\",_[_.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]=\"FLOAT_32_UNSIGNED_INT_24_8_REV\"}(U||(U={})),function(_){_[_.DEPTH_COMPONENT16=33189]=\"DEPTH_COMPONENT16\",_[_.STENCIL_INDEX8=36168]=\"STENCIL_INDEX8\",_[_.DEPTH_STENCIL=34041]=\"DEPTH_STENCIL\",_[_.DEPTH_COMPONENT24=33190]=\"DEPTH_COMPONENT24\",_[_.DEPTH_COMPONENT32F=36012]=\"DEPTH_COMPONENT32F\",_[_.DEPTH24_STENCIL8=35056]=\"DEPTH24_STENCIL8\",_[_.DEPTH32F_STENCIL8=36013]=\"DEPTH32F_STENCIL8\"}(B||(B={})),function(_){_[_.STATIC_DRAW=35044]=\"STATIC_DRAW\",_[_.DYNAMIC_DRAW=35048]=\"DYNAMIC_DRAW\",_[_.STREAM_DRAW=35040]=\"STREAM_DRAW\",_[_.STATIC_READ=35045]=\"STATIC_READ\",_[_.DYNAMIC_READ=35049]=\"DYNAMIC_READ\",_[_.STREAM_READ=35041]=\"STREAM_READ\",_[_.STATIC_COPY=35046]=\"STATIC_COPY\",_[_.DYNAMIC_COPY=35050]=\"DYNAMIC_COPY\",_[_.STREAM_COPY=35042]=\"STREAM_COPY\"}(F||(F={})),function(_){_[_.FRAGMENT_SHADER=35632]=\"FRAGMENT_SHADER\",_[_.VERTEX_SHADER=35633]=\"VERTEX_SHADER\"}(H||(H={})),function(_){_[_.FRAMEBUFFER=36160]=\"FRAMEBUFFER\",_[_.READ_FRAMEBUFFER=36008]=\"READ_FRAMEBUFFER\",_[_.DRAW_FRAMEBUFFER=36009]=\"DRAW_FRAMEBUFFER\"}(n||(n={}));const Y=33984;var V,X,f;!function(_){_[_.Texture=0]=\"Texture\",_[_.BufferObject=1]=\"BufferObject\",_[_.VertexArrayObject=2]=\"VertexArrayObject\",_[_.Shader=3]=\"Shader\",_[_.Program=4]=\"Program\",_[_.FramebufferObject=5]=\"FramebufferObject\",_[_.Renderbuffer=6]=\"Renderbuffer\",_[_.TransformFeedback=7]=\"TransformFeedback\",_[_.Sync=8]=\"Sync\",_[_.UNCOUNTED=9]=\"UNCOUNTED\",_[_.LinesOfCode=9]=\"LinesOfCode\",_[_.Uniform=10]=\"Uniform\",_[_.COUNT=11]=\"COUNT\"}(V||(V={})),function(_){_[_.COLOR_ATTACHMENT0=36064]=\"COLOR_ATTACHMENT0\",_[_.COLOR_ATTACHMENT1=36065]=\"COLOR_ATTACHMENT1\",_[_.COLOR_ATTACHMENT2=36066]=\"COLOR_ATTACHMENT2\",_[_.COLOR_ATTACHMENT3=36067]=\"COLOR_ATTACHMENT3\",_[_.COLOR_ATTACHMENT4=36068]=\"COLOR_ATTACHMENT4\",_[_.COLOR_ATTACHMENT5=36069]=\"COLOR_ATTACHMENT5\",_[_.COLOR_ATTACHMENT6=36070]=\"COLOR_ATTACHMENT6\",_[_.COLOR_ATTACHMENT7=36071]=\"COLOR_ATTACHMENT7\",_[_.COLOR_ATTACHMENT8=36072]=\"COLOR_ATTACHMENT8\",_[_.COLOR_ATTACHMENT9=36073]=\"COLOR_ATTACHMENT9\",_[_.COLOR_ATTACHMENT10=36074]=\"COLOR_ATTACHMENT10\",_[_.COLOR_ATTACHMENT11=36075]=\"COLOR_ATTACHMENT11\",_[_.COLOR_ATTACHMENT12=36076]=\"COLOR_ATTACHMENT12\",_[_.COLOR_ATTACHMENT13=36077]=\"COLOR_ATTACHMENT13\",_[_.COLOR_ATTACHMENT14=36078]=\"COLOR_ATTACHMENT14\",_[_.COLOR_ATTACHMENT15=36079]=\"COLOR_ATTACHMENT15\"}(X||(X={})),function(_){_[_.NONE=0]=\"NONE\",_[_.BACK=1029]=\"BACK\"}(f||(f={}));const t=33306;var c,o,u,e,i,r,W;!function(_){_[_.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]=\"COMPRESSED_RGB_S3TC_DXT1_EXT\",_[_.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]=\"COMPRESSED_RGBA_S3TC_DXT1_EXT\",_[_.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]=\"COMPRESSED_RGBA_S3TC_DXT3_EXT\",_[_.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]=\"COMPRESSED_RGBA_S3TC_DXT5_EXT\",_[_.COMPRESSED_R11_EAC=37488]=\"COMPRESSED_R11_EAC\",_[_.COMPRESSED_SIGNED_R11_EAC=37489]=\"COMPRESSED_SIGNED_R11_EAC\",_[_.COMPRESSED_RG11_EAC=37490]=\"COMPRESSED_RG11_EAC\",_[_.COMPRESSED_SIGNED_RG11_EAC=37491]=\"COMPRESSED_SIGNED_RG11_EAC\",_[_.COMPRESSED_RGB8_ETC2=37492]=\"COMPRESSED_RGB8_ETC2\",_[_.COMPRESSED_SRGB8_ETC2=37493]=\"COMPRESSED_SRGB8_ETC2\",_[_.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]=\"COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2\",_[_.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]=\"COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\",_[_.COMPRESSED_RGBA8_ETC2_EAC=37496]=\"COMPRESSED_RGBA8_ETC2_EAC\",_[_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]=\"COMPRESSED_SRGB8_ALPHA8_ETC2_EAC\"}(c||(c={})),function(_){_[_.FLOAT=5126]=\"FLOAT\",_[_.FLOAT_VEC2=35664]=\"FLOAT_VEC2\",_[_.FLOAT_VEC3=35665]=\"FLOAT_VEC3\",_[_.FLOAT_VEC4=35666]=\"FLOAT_VEC4\",_[_.INT=5124]=\"INT\",_[_.INT_VEC2=35667]=\"INT_VEC2\",_[_.INT_VEC3=35668]=\"INT_VEC3\",_[_.INT_VEC4=35669]=\"INT_VEC4\",_[_.BOOL=35670]=\"BOOL\",_[_.BOOL_VEC2=35671]=\"BOOL_VEC2\",_[_.BOOL_VEC3=35672]=\"BOOL_VEC3\",_[_.BOOL_VEC4=35673]=\"BOOL_VEC4\",_[_.FLOAT_MAT2=35674]=\"FLOAT_MAT2\",_[_.FLOAT_MAT3=35675]=\"FLOAT_MAT3\",_[_.FLOAT_MAT4=35676]=\"FLOAT_MAT4\",_[_.SAMPLER_2D=35678]=\"SAMPLER_2D\",_[_.SAMPLER_CUBE=35680]=\"SAMPLER_CUBE\",_[_.UNSIGNED_INT=5125]=\"UNSIGNED_INT\",_[_.UNSIGNED_INT_VEC2=36294]=\"UNSIGNED_INT_VEC2\",_[_.UNSIGNED_INT_VEC3=36295]=\"UNSIGNED_INT_VEC3\",_[_.UNSIGNED_INT_VEC4=36296]=\"UNSIGNED_INT_VEC4\",_[_.FLOAT_MAT2x3=35685]=\"FLOAT_MAT2x3\",_[_.FLOAT_MAT2x4=35686]=\"FLOAT_MAT2x4\",_[_.FLOAT_MAT3x2=35687]=\"FLOAT_MAT3x2\",_[_.FLOAT_MAT3x4=35688]=\"FLOAT_MAT3x4\",_[_.FLOAT_MAT4x2=35689]=\"FLOAT_MAT4x2\",_[_.FLOAT_MAT4x3=35690]=\"FLOAT_MAT4x3\",_[_.SAMPLER_3D=35679]=\"SAMPLER_3D\",_[_.SAMPLER_2D_SHADOW=35682]=\"SAMPLER_2D_SHADOW\",_[_.SAMPLER_2D_ARRAY=36289]=\"SAMPLER_2D_ARRAY\",_[_.SAMPLER_2D_ARRAY_SHADOW=36292]=\"SAMPLER_2D_ARRAY_SHADOW\",_[_.SAMPLER_CUBE_SHADOW=36293]=\"SAMPLER_CUBE_SHADOW\",_[_.INT_SAMPLER_2D=36298]=\"INT_SAMPLER_2D\",_[_.INT_SAMPLER_3D=36299]=\"INT_SAMPLER_3D\",_[_.INT_SAMPLER_CUBE=36300]=\"INT_SAMPLER_CUBE\",_[_.INT_SAMPLER_2D_ARRAY=36303]=\"INT_SAMPLER_2D_ARRAY\",_[_.UNSIGNED_INT_SAMPLER_2D=36306]=\"UNSIGNED_INT_SAMPLER_2D\",_[_.UNSIGNED_INT_SAMPLER_3D=36307]=\"UNSIGNED_INT_SAMPLER_3D\",_[_.UNSIGNED_INT_SAMPLER_CUBE=36308]=\"UNSIGNED_INT_SAMPLER_CUBE\",_[_.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]=\"UNSIGNED_INT_SAMPLER_2D_ARRAY\"}(o||(o={})),function(_){_[_.OBJECT_TYPE=37138]=\"OBJECT_TYPE\",_[_.SYNC_CONDITION=37139]=\"SYNC_CONDITION\",_[_.SYNC_STATUS=37140]=\"SYNC_STATUS\",_[_.SYNC_FLAGS=37141]=\"SYNC_FLAGS\"}(u||(u={})),function(_){_[_.UNSIGNALED=37144]=\"UNSIGNALED\",_[_.SIGNALED=37145]=\"SIGNALED\"}(e||(e={})),function(_){_[_.ALREADY_SIGNALED=37146]=\"ALREADY_SIGNALED\",_[_.TIMEOUT_EXPIRED=37147]=\"TIMEOUT_EXPIRED\",_[_.CONDITION_SATISFIED=37148]=\"CONDITION_SATISFIED\",_[_.WAIT_FAILED=37149]=\"WAIT_FAILED\"}(i||(i={})),function(_){_[_.SYNC_GPU_COMMANDS_COMPLETE=37143]=\"SYNC_GPU_COMMANDS_COMPLETE\"}(r||(r={})),function(_){_[_.SYNC_FLUSH_COMMANDS_BIT=1]=\"SYNC_FLUSH_COMMANDS_BIT\"}(W||(W={}));export{R as BlendFactor,T as BlendOperation,A as BufferType,i as ClientWaitSyncStatus,X as ColorAttachment,O as CompareFunction,c as CompressedTextureFormat,S as CullMode,C as DataType,t as DepthStencilAttachment,N as Face,_ as FramebufferBit,n as FramebufferTarget,G as PixelFormat,U as PixelType,E as PrimitiveType,B as RenderbufferFormat,V as ResourceType,H as ShaderType,P as SizedPixelFormat,f as SpecialDrawBuffers,I as StencilOperation,r as SyncCondition,W as SyncFlag,u as SyncParameter,e as SyncStatus,L as TextureSamplingMode,M as TextureType,D as TextureWrapMode,o as UniformType,F as Usage,Y as baseTextureUnit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{DataType as e}from\"./enums.js\";function s(s){switch(s){case e.BYTE:case e.UNSIGNED_BYTE:return 1;case e.SHORT:case e.UNSIGNED_SHORT:case e.HALF_FLOAT:return 2;case e.FLOAT:case e.INT:case e.UNSIGNED_INT:return 4}}export{s as getDataTypeBytes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{CullFaceOptions as t}from\"../3d/webgl-engine/lib/basicInterfaces.js\";import{BlendFactor as e,Face as i,CullMode as n,BlendOperation as s}from\"./enums.js\";function l(t,e,i=s.ADD,n=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:n[0],g:n[1],b:n[2],a:n[3]}}}function r(t,e,i,n,l=s.ADD,r=s.ADD,a=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:n,opRgb:l,opAlpha:r,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}const a=l(e.ZERO,e.ONE_MINUS_SRC_ALPHA),_=l(e.ONE,e.ZERO),h=l(e.ONE,e.ONE),o=l(e.ONE,e.ONE_MINUS_SRC_ALPHA),c=r(e.SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),d={face:i.BACK,mode:n.CCW},u={face:i.FRONT,mode:n.CCW},f=e=>e===t.Back?d:e===t.Front?u:null,p={zNear:0,zFar:1},g={r:!0,g:!0,b:!0,a:!0};function v(t){return R.intern(t)}function I(t){return N.intern(t)}function S(t){return P.intern(t)}function W(t){return k.intern(t)}function b(t){return F.intern(t)}function T(t){return L.intern(t)}function w(t){return U.intern(t)}function O(t){return K.intern(t)}function A(t){return x.intern(t)}function B(t){return G.intern(t)}class D{constructor(t,e){this._makeKey=t,this._makeRef=e,this._interns=new Map}intern(t){if(!t)return null;const e=this._makeKey(t),i=this._interns;return i.has(e)||i.set(e,this._makeRef(t)),i.get(e)??null}}function C(t){return\"[\"+t.join(\",\")+\"]\"}const R=new D(y,(t=>({__tag:\"Blending\",...t})));function y(t){return t?C([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const N=new D(m,(t=>({__tag:\"Culling\",...t})));function m(t){return t?C([t.face,t.mode]):null}const P=new D(E,(t=>({__tag:\"PolygonOffset\",...t})));function E(t){return t?C([t.factor,t.units]):null}const k=new D(z,(t=>({__tag:\"DepthTest\",...t})));function z(t){return t?C([t.func]):null}const F=new D(H,(t=>({__tag:\"StencilTest\",...t})));function H(t){return t?C([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const L=new D(M,(t=>({__tag:\"DepthWrite\",...t})));function M(t){return t?C([t.zNear,t.zFar]):null}const U=new D(j,(t=>({__tag:\"ColorWrite\",...t})));function j(t){return t?C([t.r,t.g,t.b,t.a]):null}const K=new D(Z,(t=>({__tag:\"StencilWrite\",...t})));function Z(t){return t?C([t.mask]):null}const x=new D(q,(t=>({__tag:\"DrawBuffers\",...t})));function q(t){return t?C(t.buffers):null}const G=new D(J,(t=>({blending:v(t.blending),culling:I(t.culling),polygonOffset:S(t.polygonOffset),depthTest:W(t.depthTest),stencilTest:b(t.stencilTest),depthWrite:T(t.depthWrite),colorWrite:w(t.colorWrite),stencilWrite:O(t.stencilWrite),drawBuffers:A(t.drawBuffers)})));function J(t){return t?C([y(t.blending),m(t.culling),E(t.polygonOffset),z(t.depthTest),H(t.stencilTest),M(t.depthWrite),j(t.colorWrite),Z(t.stencilWrite),q(t.drawBuffers)]):null}class Q{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._setDrawBuffers(t.drawBuffers),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(t){this._drawBuffers=this._setSubState(t,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}export{Q as StateTracker,d as backFaceCullingParams,o as blendWithPremultipliedAlpha,f as cullingParams,g as defaultColorWrite,p as defaultDepthWrite,u as frontFaceCullingParams,_ as keepSourceValues,v as makeBlending,w as makeColorWrite,I as makeCulling,W as makeDepthTest,T as makeDepthWrite,A as makeDrawBuffers,B as makePipelineState,S as makePolygonOffset,b as makeStencilTest,O as makeStencilWrite,c as premultipliedAlphaToPremultipliedAlpha,r as separateBlendingParams,l as simpleBlendingParams,h as weightedAdd,a as writeDestinationPremultipliedAlpha};\n"],"names":[],"sourceRoot":""}