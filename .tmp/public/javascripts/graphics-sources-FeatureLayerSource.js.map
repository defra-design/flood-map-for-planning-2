{"version":3,"file":"graphics-sources-FeatureLayerSource.js","mappings":"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","sources":["webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/quatf64.js","webpack://defra/./node_modules/@arcgis/core/core/libs/gl-matrix-2/math/quat.js","webpack://defra/./node_modules/@arcgis/core/core/pbf.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/MeshGeoreferencedVertexSpace.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/MeshLocalVertexSpace.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/MeshTransform.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/meshUtils/External.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/normalizeUtils.js","webpack://defra/./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/OptimizedFeatureSet.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/applyEditsUtils.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/editingSupport.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/sources/FeatureLayerSource.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/sources/support/QueryTask.js","webpack://defra/./node_modules/@arcgis/core/layers/graphics/sources/support/clientSideDefaults.js","webpack://defra/./node_modules/@arcgis/core/layers/support/capabilities.js","webpack://defra/./node_modules/@arcgis/core/layers/support/infoFor3D.js","webpack://defra/./node_modules/@arcgis/core/rest/geometryService/cut.js","webpack://defra/./node_modules/@arcgis/core/rest/geometryService/simplify.js","webpack://defra/./node_modules/@arcgis/core/rest/geometryService/utils.js","webpack://defra/./node_modules/@arcgis/core/rest/operations/urlUtils.js","webpack://defra/./node_modules/@arcgis/core/rest/query/executeForCount.js","webpack://defra/./node_modules/@arcgis/core/rest/query/executeForExtent.js","webpack://defra/./node_modules/@arcgis/core/rest/query/executeForIds.js","webpack://defra/./node_modules/@arcgis/core/rest/query/executeQueryJSON.js","webpack://defra/./node_modules/@arcgis/core/rest/query/executeQueryPBF.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/editsZScale.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/pbfFeatureServiceParser.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/pbfOptimizedFeatureSet.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/pbfQueryUtils.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/query.js","webpack://defra/./node_modules/@arcgis/core/rest/query/operations/queryZScale.js","webpack://defra/./node_modules/@arcgis/core/rest/support/FeatureSet.js","webpack://defra/./node_modules/@arcgis/core/rest/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,0,1,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function t(e,r,t,n,o,u,c,a,l){return[e,r,t,n,o,u,c,a,l]}function n(e,r){return new Float64Array(e,r,9)}const o=e(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{o as IDENTITY,r as clone,e as create,n as createView,t as fromValues,u as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function t(e,r,t,n,o,u,c,a,l,f,i,_,b,m,p,s){return[e,r,t,n,o,u,c,a,l,f,i,_,b,m,p,s]}function n(e,r){return new Float64Array(e,r,16)}const o=e(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{o as IDENTITY,r as clone,e as create,n as createView,t as fromValues,u as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(){return[0,0,0,1]}function t(e){return[e[0],e[1],e[2],e[3]]}function n(e,t,n,r){return[e,t,n,r]}const r=e(),o=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:r,clone:t,create:e,fromValues:n},Symbol.toStringTag,{value:\"Module\"}));export{r as IDENTITY,t as clone,e as create,n as fromValues,o as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../factories/mat3f64.js\";import{create as n}from\"../factories/quatf64.js\";import{create as s,fromValues as o}from\"../factories/vec3f64.js\";import{getEpsilon as a,RANDOM as r}from\"./common.js\";import{f as e,e as c,G as i,n as u}from\"../../../../chunks/vec32.js\";import{c as h,s as M,g as f,d as l,h as m,l as p,j as q,b as j,n as d,a as g,e as P}from\"../../../../chunks/vec42.js\";function I(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function b(t,n,s){s*=.5;const o=Math.sin(s);return t[0]=o*n[0],t[1]=o*n[1],t[2]=o*n[2],t[3]=Math.cos(s),t}function v(t,n){const s=2*Math.acos(n[3]),o=Math.sin(s/2);return o>a()?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),s}function x(t,n,s){const o=n[0],a=n[1],r=n[2],e=n[3],c=s[0],i=s[1],u=s[2],h=s[3];return t[0]=o*h+e*c+a*u-r*i,t[1]=a*h+e*i+r*c-o*u,t[2]=r*h+e*u+o*i-a*c,t[3]=e*h-o*c-a*i-r*u,t}function y(t,n,s){s*=.5;const o=n[0],a=n[1],r=n[2],e=n[3],c=Math.sin(s),i=Math.cos(s);return t[0]=o*i+e*c,t[1]=a*i+r*c,t[2]=r*i-a*c,t[3]=e*i-o*c,t}function A(t,n,s){s*=.5;const o=n[0],a=n[1],r=n[2],e=n[3],c=Math.sin(s),i=Math.cos(s);return t[0]=o*i-r*c,t[1]=a*i+e*c,t[2]=r*i+o*c,t[3]=e*i-a*c,t}function _(t,n,s){s*=.5;const o=n[0],a=n[1],r=n[2],e=n[3],c=Math.sin(s),i=Math.cos(s);return t[0]=o*i+a*c,t[1]=a*i-o*c,t[2]=r*i+e*c,t[3]=e*i-r*c,t}function k(t,n){const s=n[0],o=n[1],a=n[2];return t[0]=s,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-s*s-o*o-a*a)),t}function z(t,n,s,o){const r=n[0],e=n[1],c=n[2],i=n[3];let u,h,M,f,l,m=s[0],p=s[1],q=s[2],j=s[3];return h=r*m+e*p+c*q+i*j,h<0&&(h=-h,m=-m,p=-p,q=-q,j=-j),1-h>a()?(u=Math.acos(h),M=Math.sin(u),f=Math.sin((1-o)*u)/M,l=Math.sin(o*u)/M):(f=1-o,l=o),t[0]=f*r+l*m,t[1]=f*e+l*p,t[2]=f*c+l*q,t[3]=f*i+l*j,t}function E(t){const n=r,s=n(),o=n(),a=n(),e=Math.sqrt(1-s),c=Math.sqrt(s);return t[0]=e*Math.sin(2*Math.PI*o),t[1]=e*Math.cos(2*Math.PI*o),t[2]=c*Math.sin(2*Math.PI*a),t[3]=c*Math.cos(2*Math.PI*a),t}function L(t,n){const s=n[0],o=n[1],a=n[2],r=n[3],e=s*s+o*o+a*a+r*r,c=e?1/e:0;return t[0]=-s*c,t[1]=-o*c,t[2]=-a*c,t[3]=r*c,t}function O(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function S(t,n){const s=n[0]+n[4]+n[8];let o;if(s>0)o=Math.sqrt(s+1),t[3]=.5*o,o=.5/o,t[0]=(n[5]-n[7])*o,t[1]=(n[6]-n[2])*o,t[2]=(n[1]-n[3])*o;else{let s=0;n[4]>n[0]&&(s=1),n[8]>n[3*s+s]&&(s=2);const a=(s+1)%3,r=(s+2)%3;o=Math.sqrt(n[3*s+s]-n[3*a+a]-n[3*r+r]+1),t[s]=.5*o,o=.5/o,t[3]=(n[3*a+r]-n[3*r+a])*o,t[a]=(n[3*a+s]+n[3*s+a])*o,t[r]=(n[3*r+s]+n[3*s+r])*o}return t}function T(t,n,s,o){const a=.5*Math.PI/180;n*=a,s*=a,o*=a;const r=Math.sin(n),e=Math.cos(n),c=Math.sin(s),i=Math.cos(s),u=Math.sin(o),h=Math.cos(o);return t[0]=r*i*h-e*c*u,t[1]=e*c*h+r*i*u,t[2]=e*i*u-r*c*h,t[3]=e*i*h+r*c*u,t}function G(t){return\"quat(\"+t[0]+\", \"+t[1]+\", \"+t[2]+\", \"+t[3]+\")\"}const W=h,X=M,Y=f,Z=x,w=l,B=m,C=p,D=q,F=D,H=j,J=H,K=d,N=g,Q=P;function R(t,n,s){const o=e(n,s);return o<-.999999?(c(U,V,n),i(U)<1e-6&&c(U,$,n),u(U,U),b(t,U,Math.PI),t):o>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(c(U,n,s),t[0]=U[0],t[1]=U[1],t[2]=U[2],t[3]=1+o,K(t,t))}const U=s(),V=o(1,0,0),$=o(0,1,0);function tt(t,n,s,o,a,r){return z(nt,n,a,r),z(st,s,o,r),z(t,nt,st,2*r*(1-r)),t}const nt=n(),st=n();function ot(t,n,s,o){const a=at;return a[0]=s[0],a[3]=s[1],a[6]=s[2],a[1]=o[0],a[4]=o[1],a[7]=o[2],a[2]=-n[0],a[5]=-n[1],a[8]=-n[2],K(t,S(t,a))}const at=t(),rt=Object.freeze(Object.defineProperty({__proto__:null,add:Y,calculateW:k,conjugate:O,copy:W,dot:B,equals:Q,exactEquals:N,fromEuler:T,fromMat3:S,getAxisAngle:v,identity:I,invert:L,len:F,length:D,lerp:C,mul:Z,multiply:x,normalize:K,random:E,rotateX:y,rotateY:A,rotateZ:_,rotationTo:R,scale:w,set:X,setAxes:ot,setAxisAngle:b,slerp:z,sqlerp:tt,sqrLen:J,squaredLength:H,str:G},Symbol.toStringTag,{value:\"Module\"}));export{Y as add,k as calculateW,O as conjugate,W as copy,B as dot,Q as equals,N as exactEquals,T as fromEuler,S as fromMat3,v as getAxisAngle,I as identity,L as invert,F as len,D as length,C as lerp,Z as mul,x as multiply,K as normalize,rt as q,E as random,y as rotateX,A as rotateY,_ as rotateZ,R as rotationTo,w as scale,X as set,ot as setAxes,b as setAxisAngle,z as slerp,tt as sqlerp,J as sqrLen,H as squaredLength,G as str};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport has from\"./has.js\";import t from\"./ObjectPool.js\";var e;!function(t){t[t.varint=0]=\"varint\",t[t.fixed64=1]=\"fixed64\",t[t.delimited=2]=\"delimited\",t[t.fixed32=5]=\"fixed32\",t[t.unknown=99]=\"unknown\"}(e||(e={}));const i=4294967296,s=new TextDecoder(\"utf-8\"),r=has(\"safari\")||has(\"ios\")?6:has(\"ff\")?12:32;class n{constructor(t,i,s=0,r=(t?t.byteLength:0)){this._tag=0,this._dataType=e.unknown,this._init(t,i,s,r)}_init(t,e,i,s){this._data=t,this._dataView=e,this._pos=i,this._end=s}asUnsafe(){return this}clone(){return new n(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return t;if(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return t;throw new Error(\"Varint overflow\")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+t.getUint32(e+4,!0)*i;return this._skip(8),s}getSFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+t.getInt32(e+4,!0)*i;return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,i=this._toString(this._data,e,e+t);return this._skip(t),i}getBytes(){const t=this._getLength(),e=this._pos,i=this._toBytes(this._data,e,e+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,i,s){const r=this.getMessage(),n=t(r,e,i,s);return r.release(),n}processMessage(t){const e=this.getMessage(),i=t(e);return e.release(),i}getMessage(){const t=this._getLength(),e=n.pool.acquire();return e._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){n.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case e.varint:this._decodeVarint();break;case e.fixed64:this._skip(8);break;case e.delimited:this._skip(this._getLength());break;case e.fixed32:this._skip(4);break;default:throw new Error(\"Invalid data type!\")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error(\"Attempt to skip past the end of buffer!\");this._pos+=t}_decodeVarint(){const t=this._data;let e=this._pos,i=0,s=0;if(this._end-e>=10)do{if(s=t[e++],i|=127&s,!(128&s))break;if(s=t[e++],i|=(127&s)<<7,!(128&s))break;if(s=t[e++],i|=(127&s)<<14,!(128&s))break;if(s=t[e++],i|=(127&s)<<21,!(128&s))break;if(s=t[e++],i+=268435456*(127&s),!(128&s))break;if(s=t[e++],i+=34359738368*(127&s),!(128&s))break;if(s=t[e++],i+=4398046511104*(127&s),!(128&s))break;if(s=t[e++],i+=562949953421312*(127&s),!(128&s))break;if(s=t[e++],i+=72057594037927940*(127&s),!(128&s))break;if(s=t[e++],i+=0x8000000000000000*(127&s),!(128&s))break;throw new Error(\"Varint too long!\")}while(0);else{let r=1;for(;e!==this._end&&(s=t[e],128&s);)++e,i+=(127&s)*r,r*=128;if(e===this._end)throw new Error(\"Varint overrun!\");++e,i+=s*r}return this._pos=e,i}_decodeSVarint(){const t=this._data;let e,i=0,s=0;const r=1&t[this._pos];if(s=t[this._pos++],i|=127&s,!(128&s))return r?-(i+1)/2:i/2;if(s=t[this._pos++],i|=(127&s)<<7,!(128&s))return r?-(i+1)/2:i/2;if(s=t[this._pos++],i|=(127&s)<<14,!(128&s))return r?-(i+1)/2:i/2;if(s=t[this._pos++],i|=(127&s)<<21,!(128&s))return r?-(i+1)/2:i/2;if(s=t[this._pos++],i+=268435456*(127&s),!(128&s))return r?-(i+1)/2:i/2;if(s=t[this._pos++],i+=34359738368*(127&s),!(128&s))return r?-(i+1)/2:i/2;if(s=t[this._pos++],i+=4398046511104*(127&s),!(128&s))return r?-(i+1)/2:i/2;if(e=BigInt(i),s=t[this._pos++],e+=0x2000000000000n*BigInt(127&s),!(128&s))return Number(r?-(e+1n)/2n:e/2n);if(s=t[this._pos++],e+=0x100000000000000n*BigInt(127&s),!(128&s))return Number(r?-(e+1n)/2n:e/2n);if(s=t[this._pos++],e+=0x8000000000000000n*BigInt(127&s),!(128&s))return Number(r?-(e+1n)/2n:e/2n);throw new Error(\"Varint too long!\")}_getLength(){if(this._dataType!==e.delimited)throw new Error(\"Not a delimited data type!\");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,i){if((i=Math.min(this._end,i))-e>r){const r=t.subarray(e,i);return s.decode(r)}let n=\"\",h=\"\";for(let s=e;s<i;++s){const e=t[s];128&e?h+=\"%\"+e.toString(16):(n+=decodeURIComponent(h)+String.fromCharCode(e),h=\"\")}return h.length&&(n+=decodeURIComponent(h)),n}_toBytes(t,e,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,e,i-e)}}n.pool=new t(n,void 0,(t=>{t._data=null,t._dataView=null}));export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{ClonableMixin as r}from\"../../core/Clonable.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{enumeration as t}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";var c;let i=c=class extends(r(o)){constructor(e){super(e),this.type=\"georeferenced\",this.origin=null}};i.absolute=new c,e([t({georeferenced:\"georeferenced\"},{readOnly:!0})],i.prototype,\"type\",void 0),e([s({type:[Number],nonNullable:!1,json:{write:!0}})],i.prototype,\"origin\",void 0),i=c=e([p(\"esri.geometry.support.MeshGeoreferencedVertexSpace\")],i);const a=i;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import{ClonableMixin as r}from\"../../core/Clonable.js\";import{JSONSupport as e}from\"../../core/JSONSupport.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{enumeration as t}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import{create as c}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";let i=class extends(r(e)){constructor(o){super(o),this.type=\"local\",this.origin=c()}};o([t({local:\"local\"},{readOnly:!0})],i.prototype,\"type\",void 0),o([s({type:[Number],nonNullable:!0,json:{write:!0}})],i.prototype,\"origin\",void 0),i=o([p(\"esri.geometry.support.MeshLocalVertexSpace\")],i);const a=i;export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{fromRotationTranslationScale as i,invert as e,exactEquals as a}from\"../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{setAxisAngle as n}from\"../../core/libs/gl-matrix-2/math/quat.js\";import{create as c}from\"../../core/libs/gl-matrix-2/factories/quatf64.js\";import{create as p,fromArray as m,fromValues as u,clone as h}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{up as x,fromAxisAndAngle as g,axis as f,angle as j,angleRad as b}from\"./axisAngleDegrees.js\";var y;let A=y=class extends o{constructor(t){super(t),this.translation=p(),this.rotationAxis=m(x),this.rotationAngle=0,this.scale=u(1,1,1)}get rotation(){return g(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=h(f(t)),this.rotationAngle=j(t)}get localMatrix(){const t=l();return n(d,f(this.rotation),b(this.rotation)),i(t,d,this.translation,this.scale),t}get localMatrixInverse(){return e(l(),this.localMatrix)}equals(t){return this===t||null!=t&&a(this.localMatrix,t.localMatrix)}clone(){const t={translation:h(this.translation),rotationAxis:h(this.rotationAxis),rotationAngle:this.rotationAngle,scale:h(this.scale)};return new y(t)}};t([r({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,\"translation\",void 0),t([r({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,\"rotationAxis\",void 0),t([r({type:Number,nonNullable:!0,json:{write:!0}})],A.prototype,\"rotationAngle\",void 0),t([r({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,\"scale\",void 0),t([r()],A.prototype,\"rotation\",null),t([r()],A.prototype,\"localMatrix\",null),t([r()],A.prototype,\"localMatrixInverse\",null),A=y=t([s(\"esri.geometry.support.MeshTransform\")],A);const d=c(),N=A;export{N as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{rad2deg as r,deg2rad as t}from\"../../core/mathUtils.js\";import{getRotation as n}from\"../../core/libs/gl-matrix-2/math/mat4.js\";import{getAxisAngle as o,setAxisAngle as i,multiply as u}from\"../../core/libs/gl-matrix-2/math/quat.js\";import{create as c}from\"../../core/libs/gl-matrix-2/factories/quatf64.js\";import{c as e,e as f,n as s,r as m}from\"../../chunks/vec32.js\";import{UNIT_X as a,UNIT_Y as l,UNIT_Z as p}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";function j(r=B){return[r[0],r[1],r[2],r[3]]}function x(r,t,n,o){return h(r,t,n,o,E)}function b(r,t){return h(r[0],r[1],r[2],t,E)}function g(r,t=j()){return h(r[0],r[1],r[2],r[3],t)}function h(r,t,n,o,i=j()){return i[0]=r,i[1]=t,i[2]=n,i[3]=o,i}function q(r,t,n=j()){return e(w(n),r),n[3]=t,n}function v(r,t,n){return f(n,r,t),s(n,n),n[3]=-m(r,t),n}function k(t,i=j()){const u=n(C,t);return A(i,r(o(i,u))),i}function U(t,n,c=j()){return i(C,w(t),z(t)),i(D,w(n),z(n)),u(C,D,C),A(c,r(o(w(c),C)))}function d(r,t,n,o=j()){return q(a,r,F),q(l,t,G),q(p,n,H),U(F,G,F),U(F,H,o),o}function w(r){return r}function y(r){return r[3]}function z(r){return t(r[3])}function A(r,t){return r[3]=t,r}const B=[0,0,1,0],C=c(),D=c(),E=j(),F=j(),G=j(),H=j();export{y as angle,z as angleRad,w as axis,U as compose,d as composeAxes,g as copy,j as create,q as fromAxisAndAngle,k as fromMatrix,v as fromPoints,h as fromValues,A as setAngle,B as up,x as wrap,b as wrapAxisAngle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{equals as r}from\"../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as s,getMimeTypeOrFilenameFormatId as n}from\"../../../layers/support/infoFor3D.js\";class a{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t=\"\";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return e(t),new Blob(s)}}class i{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await t(this.partUrl,{responseType:\"blob\"});return e(r),s}}function o(t){return l(t?.source)}function u(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof a))}const c=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,f=/\\.(gltf|glb)/i;function l(t){if(!t)return!1;if(Array.isArray(t)){return t.some(p)}return p(t)}function p(t){if(t instanceof File){const{type:r,name:e}=t;return c.test(r)||f.test(e)}return c.test(t.assetMimeType)||f.test(t.assetName)}function m(t,r){if(!t)return!1;const{source:e}=t;return y(e,r)}function h(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(u(e)&&u(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function y(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>g(t,r)))}return g(t,r)}function g(t,r){return t instanceof a&&t.isOnService(r)}function b(t,r){return t instanceof File?s(t,r):n(t.assetMimeType,t.assetName,r)}function N(t){return Array.isArray(t)?t:[t]}function A(t){return!!t.original}export{a as ServiceAsset,i as ServiceAssetPart,b as assetFormatId,g as assetIsOnService,m as externalIsOnService,N as externalSourceToMultiPart,h as externalSourcesAreEqual,p as isDisplayAsset,o as isDisplayExternal,l as isDisplaySource,A as isOriginalExternal,y as sourceIsOnService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{deprecated as e}from\"../../core/deprecate.js\";import r from\"../../core/Logger.js\";import{p as n}from\"../../chunks/vec32.js\";import o from\"../Point.js\";import i from\"./MeshGeoreferencedVertexSpace.js\";import t from\"./MeshLocalVertexSpace.js\";function c(){return r.getLogger(\"esri.geometry.Mesh\")}function p(e){return!a(e)}function a(e){return null!=e.origin}function g(e){return a(e.vertexSpace)}function u(e,r){if(!a(e))return null;const[n,i,t]=e.origin;return new o({x:n,y:i,z:t,spatialReference:r})}function s(r,n){const{x:o,y:p,z:a,spatialReference:g}=r,u=[o,p,a??0];void 0!==n?.geographic&&(e(c(),\"option: geographic\",{replacement:\"Use the `vertexSpace` option instead.\",version:\"4.29\",warnOnce:!0}),n.vertexSpace&&c().warn(\"Deprecated geographic flag ignored since vertexSpace option is provided.\"));return\"local\"===(n?.vertexSpace??l(n?.geographic)??f(g))?new t({origin:u}):new i({origin:u})}function f(e){return e.isGeographic||e.isWebMercator?\"local\":\"georeferenced\"}function l(e){return null==e?void 0:e?\"local\":\"georeferenced\"}function m(e,r){return e.type===r.type&&(e.origin===r.origin||null!=e.origin&&null!=r.origin&&n(e.origin,r.origin))}export{p as isAbsoluteVertexSpace,g as isMeshWithRelativeVertexSpace,a as isRelativeVertexSpace,s as selectVertexSpace,m as vertexSpaceEquals,u as vertexSpaceOriginToPoint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../config.js\";import e from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import o from\"../Polygon.js\";import s from\"../Polyline.js\";import{getGeometryParts as r,cutParams as i,offsetMagnitude as l,updatePolyGeometry as c}from\"./normalizeUtilsCommon.js\";import{getInfo as f}from\"./spatialReferenceUtils.js\";import{geographicToWebMercator as u,webMercatorToGeographic as p}from\"./webMercatorUtils.js\";import{cut as a}from\"../../rest/geometryService/cut.js\";import{simplify as h}from\"../../rest/geometryService/simplify.js\";const m=()=>n.getLogger(\"esri.geometry.support.normalizeUtils\");function g(t){return\"polygon\"===t.type}function y(t){return\"polygon\"===t[0].type}function x(t){return\"polyline\"===t[0].type}function d(t){const e=[];let n=0,o=0;for(let s=0;s<t.length;s++){const r=t[s];let i=null;for(let t=0;t<r.length;t++)i=r[t],e.push(i),0===t?(n=i[0],o=n):(n=Math.min(n,i[0]),o=Math.max(o,i[0]));i&&e.push([(n+o)/2,0])}return e}function M(t,n){if(!(t instanceof s||t instanceof o)){const t=\"straightLineDensify: the input geometry is neither polyline nor polygon\";throw m().error(t),new e(t)}const i=r(t),l=[];for(const e of i){const t=[];l.push(t),t.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],r=e[o][1],i=e[o+1][0],l=e[o+1][1],c=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),f=(l-r)/c,u=(i-s)/c,p=c/n;if(p>1){for(let l=1;l<=p-1;l++){const e=l*n,o=u*e+s,i=f*e+r;t.push([o,i])}const e=(c+Math.floor(p-1)*n)/2,o=u*e+s,i=f*e+r;t.push([o,i])}t.push([i,l])}}return g(t)?new o({rings:l,spatialReference:t.spatialReference}):new s({paths:l,spatialReference:t.spatialReference})}function w(t,e,n){if(e){const e=M(t,1e6);t=p(e,!0)}return n&&(t=c(t,n)),t}function b(t,e,n){if(Array.isArray(t)){const o=t[0];if(o>e){const n=l(o,e);t[0]=o+n*(-2*e)}else if(o<n){const e=l(o,n);t[0]=o+e*(-2*n)}}else{const o=t.x;if(o>e){const n=l(o,e);t=t.clone().offset(n*(-2*e),0)}else if(o<n){const e=l(o,n);t=t.clone().offset(e*(-2*n),0)}}return t}function j(t,e){let n=-1;for(let o=0;o<e.cutIndexes.length;o++){const s=e.cutIndexes[o],i=e.geometries[o],c=r(i);for(let t=0;t<c.length;t++){const e=c[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const o=e[t][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*l(n,180);for(let s=0;s<e.length;s++){const e=i.getPoint(t,s);i.setPoint(t,s,e.clone().offset(o,0))}return!0}}))}if(s===n){if(y(t))for(const e of r(i))t[s]=t[s].addRing(e);else if(x(t))for(const e of r(i))t[s]=t[s].addPath(e)}else n=s,t[s]=i}return t}async function R(e,n,r){if(!Array.isArray(e))return R([e],n);n&&\"string\"!=typeof n&&m().warn(\"normalizeCentralMeridian()\",\"The url object is deprecated, use the url string instead\");const p=\"string\"==typeof n?n:n?.url??t.geometryServiceUrl;let g,y,x,d,M,v,P,L,U=0;const z=[],A=[];for(const t of e)if(null!=t)if(g||(g=t.spatialReference,y=f(g),x=g.isWebMercator,v=x?102100:4326,d=i[v].maxX,M=i[v].minX,P=i[v].plus180Line,L=i[v].minus180Line),y)if(\"mesh\"===t.type)A.push(t);else if(\"point\"===t.type)A.push(b(t.clone(),d,M));else if(\"multipoint\"===t.type){const e=t.clone();e.points=e.points.map((t=>b(t,d,M))),A.push(e)}else if(\"extent\"===t.type){const e=t.clone()._normalize(!1,!1,y);A.push(e.rings?new o(e):e)}else if(t.extent){const e=t.extent,n=l(e.xmin,M)*(2*d);let o=0===n?t.clone():c(t.clone(),n);e.offset(n,0);let{xmin:s,xmax:r}=e;s=Number(s.toFixed(9)),r=Number(r.toFixed(9)),e.intersects(P)&&r!==d?(U=r>U?r:U,o=w(o,x),z.push(o),A.push(\"cut\")):e.intersects(L)&&s!==M?(U=r*(2*d)>U?r*(2*d):U,o=w(o,x,360),z.push(o),A.push(\"cut\")):A.push(o)}else A.push(t.clone());else A.push(t);else A.push(t);let F=l(U,d),N=-90;const S=F,k=new s;for(;F>0;){const t=360*F-180;k.addPath([[t,N],[t,-1*N]]),N*=-1,F--}if(z.length>0&&S>0){const t=j(z,await a(p,z,k,r)),n=[],o=[];for(let r=0;r<A.length;r++){const s=A[r];if(\"cut\"!==s)o.push(s);else{const s=t.shift(),i=e[r];null!=i&&\"polygon\"===i.type&&i.rings&&i.rings.length>1&&s.rings.length>=i.rings.length?(n.push(s),o.push(\"simplify\")):o.push(x?u(s):s)}}if(!n.length)return o;const s=await h(p,n,r),i=[];for(let e=0;e<o.length;e++){const t=o[e];\"simplify\"!==t?i.push(t):i.push(x?u(s.shift()):s.shift())}return i}const C=[];for(let t=0;t<A.length;t++){const e=A[t];if(\"cut\"!==e)C.push(e);else{const t=z.shift();C.push(!0===x?u(t):t)}}return C}function v(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&f(t.spatialReference);if(!n)return e;const[o,s]=n.valid,r=2*s,{width:i}=e;let l,{xmin:c,xmax:u}=e;if([c,u]=[u,c],\"extent\"===t.type||0===i||i<=s||i>r||c<o||u>s)return e;switch(t.type){case\"polygon\":if(!(t.rings.length>1))return e;l=d(t.rings);break;case\"polyline\":if(!(t.paths.length>1))return e;l=d(t.paths);break;case\"multipoint\":l=t.points}const p=e.clone();for(let f=0;f<l.length;f++){let t=l[f][0];t<0?(t+=s,u=Math.max(t,u)):(t-=s,c=Math.min(t,c))}return p.xmin=c,p.xmax=u,p.width<i?(p.xmin-=s,p.xmax-=s,p):e}function P(t,e,n){const o=f(n);if(null==o)return t;const[s,r]=o.valid,i=2*r;let l=0,c=0;e>r?l=Math.ceil(Math.abs(e-r)/i):e<s&&(l=-Math.ceil(Math.abs(e-s)/i)),t>r?c=Math.ceil(Math.abs(t-r)/i):t<s&&(c=-Math.ceil(Math.abs(t-s)/i));let u=t+(l-c)*i;const p=u-e;return p>r?u-=i:p<s&&(u+=i),u}function L(t,e){const n=f(e);if(n){const[e,o]=n.valid,s=o-e;if(t<e)for(;t<e;)t+=s;if(t>o)for(;t>o;)t-=s}return t}export{P as getClosestDenormalizedXToReference,v as getDenormalizedExtent,R as normalizeCentralMeridian,L as normalizeMapX,M as straightLineDensify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../Polyline.js\";import n from\"../SpatialReference.js\";import{isPolygon as t}from\"./jsonUtils.js\";const r={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new e({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:n.WebMercator}),minus180Line:new e({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:n.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:n.WGS84}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:n.WGS84})}};function i(e,n){return Math.ceil((e-n)/(2*n))}function s(e,n){const t=o(e);for(const r of t)for(const e of r)e[0]+=n;return e}function o(e){return t(e)?e.rings:e.paths}export{r as cutParams,o as getGeometryParts,i as offsetMagnitude,s as updatePolyGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"./OptimizedGeometry.js\";class e{constructor(t=null,e={},s,o){this.geometry=t,this.attributes=e,this.centroid=s,this.objectId=o,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(s,o){const h=s.geometry?t.fromJSON(s.geometry):null,i=s.centroid?t.fromJSON(s.centroid):null,r=s.attributes[o];return new e(h,s.attributes,i,r)}weakClone(){const t=new e(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){const t=this.geometry?.clone(),s=new e(t,{...this.attributes},this.centroid?.clone(),this.objectId);return s.displayId=this.displayId,s.geohashX=this.geohashX,s.geohashY=this.geohashY,s}}function s(t){return!!t.geometry?.coords?.length}class o extends e{}export{e as OptimizedFeature,o as OptimizedFeatureWithGeometry,s as hasGeometry};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass e{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst t=2;class s{constructor(t=[],s=[]){this.lengths=t??[],this.coords=s??[]}static fromJSON(t){return new s(t.lengths,t.coords)}static fromRect(t){const[e,r,h,o]=t,n=h-e,l=o-r;return new s([5],[e,r,n,0,0,l,-n,0,0,-l])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,s)=>t+s))}forEachVertex(s){let e=0;this.lengths.length||s(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const h=this.lengths[r];for(let r=0;r<h;r++){s(this.coords[t*(r+e)],this.coords[t*(r+e)+1])}e+=h}}deltaDecode(){const t=this.clone(),{coords:s,lengths:e}=t;let r=0;for(const h of e){for(let t=1;t<h;t++)s[2*(r+t)]+=s[2*(r+t)-2],s[2*(r+t)+1]+=s[2*(r+t)-1];r+=h}return t}clone(e){if(0===this.lengths.length)return new s([],[this.coords[0],this.coords[1]]);const r=(0===this.lengths.length?1:this.lengths.reduce(((t,s)=>t+s)))*t,h=this.coords.slice(0,r);return e?(e.set(h),new s(this.lengths,e)):new s(Array.from(this.lengths),Array.from(h))}}export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../Graphic.js\";import e from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{getMetersPerCartesianUnitForSR as a}from\"../../core/unitUtils.js\";import{parseData as o}from\"../../core/urlUtils.js\";import{isEqualBaseGCS as s,canProjectWithoutEngine as n,projectWithoutEngine as l}from\"../../geometry/projection.js\";import{fromJSON as i}from\"../../geometry/support/jsonUtils.js\";import u from\"../../geometry/support/MeshTransform.js\";import{equals as d}from\"../../geometry/support/spatialReferenceUtils.js\";import{isFeatureIdentifierArrayWithGlobalId as c,isFeatureIdentifierArrayWithObjectId as p}from\"./editingSupport.js\";async function m(t,e,r){const{geometry:o}=e,i={...e.attributes};if(null!=r&&\"mesh\"===o?.type){const{transformFieldRoles:e}=r,{origin:c,spatialReference:p,vertexSpace:m}=o,f=o.transform??new u,g=\"local\"===m.type,b=t.spatialReference,y=b.isGeographic,R=d(b,p),h=s(p,b)&&n(p,b);if(!(g&&y&&h||!g&&!y&&R))return null;const I=l(c,p,b);if(null==I)return null;if(i[e.originX]=I.x,i[e.originY]=I.y,i[e.originZ]=I.z??0,null!=f){const{translation:t,scale:r,rotation:o}=f,s=g?1:a(p)/a(b);i[e.translationX]=t[0]*s,i[e.translationY]=t[2]*s,i[e.translationZ]=-t[1]*s,i[e.scaleX]=r[0],i[e.scaleY]=r[2],i[e.scaleZ]=r[1],i[e.rotationX]=o[0],i[e.rotationY]=o[2],i[e.rotationZ]=-o[1],i[e.rotationDeg]=o[3]}return{attributes:i}}return null==o?{attributes:i}:\"mesh\"===o.type||\"extent\"===o.type?null:{geometry:o.toJSON(),attributes:i}}async function f(t,e){const r=await Promise.all((e.addAttachments??[]).map((e=>g(t,e)))),a=await Promise.all((e.updateAttachments??[]).map((e=>g(t,e)))),o=e.deleteAttachments??[];return r.length||a.length||o.length?{adds:r,updates:a,deletes:[...o]}:null}async function g(t,e){const{feature:r,attachment:a}=e,{globalId:s,name:n,contentType:l,data:i,uploadId:u}=a,d={globalId:s};if(r&&(\"attributes\"in r?d.parentGlobalId=r.attributes?.[t.globalIdField]:r.globalId&&(d.parentGlobalId=r.globalId)),u)d.uploadId=u;else if(i){const t=await o(i);t&&(d.contentType=t.mediaType,d.data=t.data),i instanceof File&&(d.name=i.name)}return n&&(d.name=n),l&&(d.contentType=l),d}function b(t,e,r){if(!e||0===e.length)return[];if(r&&c(e))return e.map((t=>t.globalId));if(p(e))return e.map((t=>t.objectId));const a=r?t.globalIdField:t.objectIdField;return a?e.map((t=>t.getAttribute(a))):[]}function y(t){const e=t?.assetMaps;if(e){for(const t of e.addResults)t.success||r.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`);for(const t of e.updateResults)t.success||r.getLogger(\"esri.layers.graphics.sources.support.sourceUtils\").error(`Failed to map asset to feature with globalId ${t.globalId}.`)}const a=t?.attachments,o={addFeatureResults:t?.addResults?.map(R)??[],updateFeatureResults:t?.updateResults?.map(R)??[],deleteFeatureResults:t?.deleteResults?.map(R)??[],addAttachmentResults:a?.addResults?a.addResults.map(R):[],updateAttachmentResults:a?.updateResults?a.updateResults.map(R):[],deleteAttachmentResults:a?.deleteResults?a.deleteResults.map(R):[]};return t?.editMoment&&(o.editMoment=t.editMoment),o}function R(t){const r=!0===t.success?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new e(\"feature-layer-source:edit-failure\",r.description,{code:r.code}):null}}function h(e,r){return new t({attributes:e.attributes,geometry:i({...e.geometry,spatialReference:r})})}function I(t,e){return{adds:t?.adds?.map((t=>h(t,e)))||[],updates:t?.updates?.map((t=>({original:h(t[0],e),current:h(t[1],e)})))||[],deletes:t?.deletes?.map((t=>h(t,e)))||[],spatialReference:e}}function j(t){const e=t.details.raw,r=+e.code,a=+e.extendedCode;return 500===r&&(-2147217144===a||-2147467261===a)}export{I as createEditedFeatures,R as createFeatureEditResult,f as getAttachmentEditsJSON,b as getFeatureIds,m as getFeatureJSON,j as isProtectedOrPrivateVersionError,y as unpackEditResultData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};export{t as queryCapabilities};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Collection.js\";import a from\"../../core/Error.js\";import{clone as r}from\"../../core/lang.js\";import s from\"../../core/Logger.js\";import{createResolver as i}from\"../../core/promiseUtils.js\";import{dataComponents as n}from\"../../core/urlUtils.js\";import{generateBracedUUID as o}from\"../../core/uuid.js\";import{normalizeCentralMeridian as l}from\"../../geometry/support/normalizeUtils.js\";import{isGeographic as d,equals as u,isWGS84 as p,isWebMercator as c}from\"../../geometry/support/spatialReferenceUtils.js\";import{isEditBusLayer as h,emitApplyEditsEvent as m}from\"../mixins/EditBusLayer.js\";import{isValidFieldValue as f}from\"../support/fieldUtils.js\";import{isGlbSupportedEditFormat as y}from\"../support/infoFor3D.js\";import{getEffectiveEditingEnabled as g,getEffectiveLayerCapabilities as b}from\"../support/layerUtils.js\";function w(e){return null!=e?.applyEdits}function F(e){return\"object\"==typeof e&&null!=e&&\"objectId\"in e&&!!e.objectId}function A(e){return e.every(F)}function v(e){return\"object\"==typeof e&&null!=e&&\"globalId\"in e&&!!e.globalId}function I(e){return e.every(v)}async function $(e,t,a,s={}){let n;const o=\"gdbVersion\"in e?e.gdbVersion:null,l=s.gdbVersion??o;if(h(e)&&e.url)n=m(e.url,e.layerId,l,\"original-and-current-features\"===s.returnServiceEditsOption);else{n=i(),n.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit(\"edits\",t)}));const t={result:n.promise};e.emit(\"apply-edits\",t)}try{const{results:i,edits:o}=await E(e,t,a,s),l=e=>e.filter((e=>!e.error)).map(r),d={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return i.editedFeatureResults?.length&&(d.editedFeatures=i.editedFeatureResults),n.resolve(d),i}catch(d){throw n.reject(d),d}}async function E(e,t,r,s){if(await e.load(),!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!g(e))throw new a(`${e.type}-layer:editing-disabled`,\"Editing is disabled for layer\",{layer:e});const{edits:i,options:n}=await S(e,r,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,n)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function S(e,t,r){const i=b(e),n=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),o=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),l=null!=e.infoFor3D;if(V(t,i,r,!!n,!!o,`${e.type}-layer`),!i.data.isVersioned&&r?.gdbVersion)throw new a(`${e.type}-layer:invalid-parameter`,\"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'\");if(!i.editing.supportsRollbackOnFailure&&r?.rollbackOnFailureEnabled)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'\");const d={...r};if(null!=d.rollbackOnFailureEnabled||i.editing.supportsRollbackOnFailure||(d.rollbackOnFailureEnabled=!0),d.rollbackOnFailureEnabled||\"original-and-current-features\"!==d.returnServiceEditsOption||(!1===d.rollbackOnFailureEnabled&&s.getLogger(\"esri.layers.graphics.editingSupport\").warn(`${e.type}-layer:invalid-parameter`,\"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true.\"),d.rollbackOnFailureEnabled=!0),!i.editing.supportsReturnServiceEditsInSourceSpatialReference&&d.returnServiceEditsInSourceSR)throw new a(`${e.type}-layer:invalid-parameter`,\"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'\");if(d.returnServiceEditsInSourceSR&&\"original-and-current-features\"!==d.returnServiceEditsOption)throw new a(`${e.type}-layer:invalid-parameter`,\"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'\");const u=G(t,i,`${e.type}-layer`),p=r?.globalIdUsed||l,c=e.fields.filter((e=>\"big-integer\"===e.type||\"oid\"===e.type&&(e.length||0)>=8));if(p){const{globalIdField:t}=e;if(null==t)throw new a(`${e.type}-layer:invalid-parameter`,\"Layer does not specify a global id field.\");u.addFeatures.forEach((e=>B(e,t)))}u.addFeatures.forEach((t=>O(t,e,p,c))),u.updateFeatures.forEach((t=>k(t,e,p,c))),u.deleteFeatures.forEach((t=>U(t,e,p,c))),u.addAttachments.forEach((t=>L(t,e))),u.updateAttachments.forEach((t=>L(t,e))),l&&await x(u,e);return{edits:await T(u),options:d}}function R(e,t,r,s){if(r){if(\"attributes\"in e&&!e.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!(\"attributes\"in e)&&!e.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"`'globalId' of the feature should be passed when 'globalIdUsed' is true\")}if(s.length&&\"attributes\"in e)for(const i of s){const r=e.attributes[i.name];if(void 0!==r&&!f(i,r))throw new a(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if(\"geometry\"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new a(`${t.type}-layer:z-unsupported`,\"Layer does not support z values while feature has z values.\");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new a(`${t.type}-layer:m-unsupported`,\"Layer does not support m values while feature has m values.\")}}function j(e,t){if(\"geometry\"in e&&\"mesh\"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:r}=e,{spatialReference:s,vertexSpace:i}=r,n=t.spatialReference,o=\"local\"===i.type,l=d(n),h=u(n,s),m=h||p(n)&&(p(s)||c(s));if(!(o&&l&&m||!o&&!l&&h))throw new a(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${n.wkid} is not supported.`)}}function O(e,t,a,r){R(e,t,a,r),j(e,t)}function U(e,t,a,r){R(e,t,a,r)}function k(e,t,r,s){R(e,t,r,s),j(e,t);const i=b(t);if(\"geometry\"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new a(`${t.type}-layer:unsupported-operation`,\"Layer does not support geometry updates.\")}function L(e,t){const{feature:r,attachment:s}=e;if(!r||\"attributes\"in r&&!r.attributes[t.globalIdField])throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to a feature with 'globalId'\");if(!(\"attributes\"in r)&&!r.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have reference to 'globalId' of the parent feature\");if(!s.globalId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'globalId'\");if(!s.data&&!s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment should have 'data' or 'uploadId'\");if(!(s.data instanceof File&&!!s.data.name)&&!s.name)throw new a(`${t.type}-layer:invalid-parameter`,\"'name' is required when attachment is specified as Base64 encoded string using 'data'\");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new a(`${t.type}-layer:invalid-parameter`,\"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'\");if(\"string\"==typeof s.data){const e=n(s.data);if(e&&!e.isBase64)throw new a(`${t.type}-layer:invalid-parameter`,\"Attachment 'data' should be a Blob, File or Base64 encoded string\")}}function B(e,t){const{attributes:a}=e;null==a[t]&&(a[t]=o())}async function T(e){const t=e.addFeatures??[],a=e.updateFeatures??[],r=t.concat(a).map((e=>e.geometry)),s=await l(r),i=t.length,n=a.length;return s.slice(0,i).forEach(((e,a)=>t[a].geometry=e)),s.slice(i,i+n).forEach(((e,t)=>a[t].geometry=e)),e}function D(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&t.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function G(e,t,r){const s=D(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new a(`${r}:unsupported-operation`,\"Layer does not support adding features.\");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new a(`${r}:unsupported-operation`,\"Layer does not support updating features.\");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new a(`${r}:unsupported-operation`,\"Layer does not support deleting features.\");return s.addFeatures=s.addFeatures.map(M),s.updateFeatures=s.updateFeatures.map(M),s.addAssetFeatures=[],s}function V(e,t,r,s,i,n){if(!e||!s&&!i)throw new a(`${n}:missing-parameters`,\"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required\");if(!t.editing.supportsGlobalId&&r?.globalIdUsed)throw new a(`${n}:invalid-parameter`,\"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'\");if(!t.editing.supportsGlobalId&&i)throw new a(`${n}:invalid-parameter`,\"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'\");if(!r?.globalIdUsed&&i)throw new a(`${n}:invalid-parameter`,\"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true\")}function M(t){const a=new e;return t.attributes||(t.attributes={}),a.geometry=t.geometry,a.attributes=t.attributes,a}async function x(e,t){const{infoFor3D:r}=t;if(null==r)return;if(!y(r))throw new a(`${t.type}-layer:binary-gltf-asset-not-supported`,\"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.\");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const a of e.addFeatures??[])z(a)&&s.push(a);for(const a of e.updateFeatures??[])z(a)&&s.push(a)}function z(e){return\"mesh\"===e?.geometry?.type}function q(e,t,r,s){if(!w(t))throw new a(`${e.type}-layer:no-editing-support`,\"Layer source does not support applyEdits capability\",{layer:e});if(!t.uploadAssets)throw new a(`${e.type}-layer:no-asset-upload-support`,\"Layer source does not support uploadAssets capability\",{layer:e});return t.uploadAssets(r,s)}export{$ as applyEdits,V as checkEditingCapabilities,I as isFeatureIdentifierArrayWithGlobalId,A as isFeatureIdentifierArrayWithObjectId,v as isFeatureIdentifierWithGlobalId,F as isFeatureIdentifierWithObjectId,D as normalizeCollections,G as normalizeEdits,T as normalizeGeometries,M as shallowCloneFeature,q as uploadAssets};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../core/Error.js\";import e from\"../../core/Logger.js\";import{assertIsSome as n}from\"../../core/maybe.js\";import{is as o,fromRectValues as r}from\"../../geometry/support/aaBoundingBox.js\";import{fromValues as s}from\"../../geometry/support/aaBoundingRect.js\";import{isPoint as u,isPolygon as l,isPolyline as c,isMultipoint as i}from\"../../geometry/support/jsonUtils.js\";import{OptimizedFeature as f}from\"./OptimizedFeature.js\";import a from\"./OptimizedFeatureSet.js\";import h from\"./OptimizedGeometry.js\";function d(t,e){return t?e?4:3:e?3:2}const m=()=>e.getLogger(\"esri.layers.graphics.featureConversionUtils\"),g={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},y=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s},p=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+2]},I=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+3]},b=(t,e,n,o,r,s)=>{t[n]=r,t[n+1]=s,t[n+2]=e[o+2],t[n+3]=e[o+3]};function M(t,e,n,o){if(t){if(n)return e&&o?b:p;if(e&&o)return I}else if(e&&o)return p;return y}function N({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function w({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function G(t,e){return F(t,e,0)}function T(t,e){return F(t,-e,1)}function F({scale:t,translate:e},n,o){return n*t[o]+e[o]}function P(t,e,n){return t?e?n?k(t):Z(t):n?v(t):x(t):null}function x(t){const e=t.coords;return{x:e[0],y:e[1]}}function j(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function Z(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function E(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function v(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function z(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function k(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function V(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function Y(t,e,n,o){let r=x;n&&o?r=k:n?r=Z:o&&(r=v);for(const s of e){const{geometry:e,attributes:n}=s,o=null!=e?r(e):null;t.push({attributes:n,geometry:o})}return t}function _(t,e){return t&&e?V:t?E:e?z:j}function L(t,e,n,o,r){const s=_(n,o);for(const{geometry:u,attributes:l}of e){const e=null!=u?s(new h,u):null;t.push(new f(e,l,null,r?l[r]:void 0))}return t}function O(t,e,n=_(null!=e.z,null!=e.m)){return n(t,e)}function S(t,e,n,o){for(const{geometry:r,attributes:s}of e)t.push({attributes:s,geometry:null!=r?U(r,n,o):null});return t}function U(t,e,n){if(null==t)return null;const o=d(e,n),r=[];for(let s=0;s<t.coords.length;s+=o){const e=[];for(let n=0;n<o;n++)e.push(t.coords[s+n]);r.push(e)}return e?n?{points:r,hasZ:e,hasM:n}:{points:r,hasZ:e}:n?{points:r,hasM:n}:{points:r}}function q(t,e,n,o,r){const s=d(n,o);for(const{geometry:u,attributes:l}of e){const e=null!=u?R(new h,u,s):null;t.push(new f(e,l,null,r?l[r]:void 0))}return t}function R(t,e,n=d(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const o=t.coords;let r=0;for(const s of e.points)for(let t=0;t<n;t++)o[r++]=s[t];return t}function A(t,e,n,o){for(const{geometry:r,attributes:s}of e)t.push({attributes:s,geometry:null!=r?$(r,n,o):null});return t}function $(t,e,n){if(!t)return null;const o=d(e,n),{coords:r,lengths:s}=t,u=[];let l=0;for(const c of s){const t=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<o;t++)e.push(r[l++]);t.push(e)}u.push(t)}return e?n?{paths:u,hasZ:e,hasM:n}:{paths:u,hasZ:e}:n?{paths:u,hasM:n}:{paths:u}}function B(t,e,n,o,r){const s=d(n,o);for(const{geometry:u,attributes:l,centroid:c}of e){const e=null!=u?C(new h,u,s):null,n=null!=c?O(new h,c):null;t.push(new f(e,l,n,r?l[r]:void 0))}return t}function C(t,e,n=d(e.hasZ,e.hasM)){const{lengths:o,coords:r}=t;let s=0;for(const u of e.paths){for(const t of u)for(let e=0;e<n;e++)r[s++]=t[e];o.push(u.length)}return t}function D(t,e,n,o){for(const{geometry:r,attributes:s,centroid:u}of e){const e=null!=r?H(r,n,o):null;if(null!=u){const n=x(u);t.push({attributes:s,centroid:n,geometry:e})}else t.push({attributes:s,geometry:e})}return t}function H(t,e,n){if(!t)return null;const o=d(e,n),{coords:r,lengths:s}=t,u=[];let l=0;for(const c of s){const t=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<o;t++)e.push(r[l++]);t.push(e)}u.push(t)}return e?n?{rings:u,hasZ:e,hasM:n}:{rings:u,hasZ:e}:n?{rings:u,hasM:n}:{rings:u}}function J(t,e,n,o,r){for(const{geometry:s,centroid:u,attributes:l}of e){const e=null!=s?K(new h,s,n,o):null,c=r?l[r]:void 0;null!=u?t.push(new f(e,l,j(new h,u),c)):t.push(new f(e,l,null,c))}return t}function K(t,e,n=e.hasZ,o=e.hasM){return Q(t,e.rings,n,o)}function Q(t,e,n,o){const r=d(n,o),{lengths:s,coords:u}=t;let l=0;wt(t);for(const c of e){for(const t of c)for(let e=0;e<r;e++)u[l++]=t[e];s.push(c.length)}return t}const W=[],X=[];function tt(t,e,n,o,r){W[0]=t;const[s]=et(X,W,e,n,o,r);return Gt(W),Gt(X),s}function et(e,n,o,r,s,u){if(Gt(e),!o){for(const t of n){const n=u?t.attributes[u]:void 0;e.push(new f(null,t.attributes,null,n))}return e}switch(o){case\"esriGeometryPoint\":return L(e,n,r,s,u);case\"esriGeometryMultipoint\":return q(e,n,r,s,u);case\"esriGeometryPolyline\":return B(e,n,r,s,u);case\"esriGeometryPolygon\":case\"esriGeometryMultiPatch\":return J(e,n,r,s,u);default:m().error(\"convertToFeatureSet:unknown-geometry\",new t(`Unable to parse unknown geometry type '${o}'`)),Gt(e)}return e}function nt(t,e,n,o){X[0]=t,ut(W,X,e,n,o);const r=W[0];return Gt(W),Gt(X),r}function ot(e,n,o){if(null==e)return null;const r=new h;if(\"hasZ\"in e&&null==n&&(n=e.hasZ),\"hasM\"in e&&null==o&&(o=e.hasM),u(e)){return _(null!=n?n:null!=e.z,null!=o?o:null!=e.m)(r,e)}return l(e)?K(r,e,n,o):c(e)?C(r,e,d(n,o)):i(e)?R(r,e,d(n,o)):void m().error(\"convertFromGeometry:unknown-geometry\",new t(`Unable to parse unknown geometry type '${e}'`))}function rt(e,n,o,r){const s=e&&(\"coords\"in e?e:e.geometry);if(null==s)return null;switch(n){case\"esriGeometryPoint\":{let t=x;return o&&r?t=k:o?t=Z:r&&(t=v),t(s)}case\"esriGeometryMultipoint\":return U(s,o,r);case\"esriGeometryPolyline\":return $(s,o,r);case\"esriGeometryPolygon\":return H(s,o,r);default:return m().error(\"convertToGeometry:unknown-geometry\",new t(`Unable to parse unknown geometry type '${n}'`)),null}}function st(t,e){for(const n of e)t.push({attributes:n.attributes});return t}function ut(e,n,o,r,s){if(Gt(e),null==o)return st(e,n);switch(o){case\"esriGeometryPoint\":return Y(e,n,r,s);case\"esriGeometryMultipoint\":return S(e,n,r,s);case\"esriGeometryPolyline\":return A(e,n,r,s);case\"esriGeometryPolygon\":return D(e,n,r,s);default:m().error(\"convertToFeatureSet:unknown-geometry\",new t(`Unable to parse unknown geometry type '${o}'`))}return e}function lt(t){const{objectIdFieldName:e,spatialReference:n,transform:o,fields:r,hasM:s,hasZ:u,features:l,geometryType:c,exceededTransferLimit:i,uniqueIdField:f,queryGeometry:a,queryGeometryType:h}=t,d={features:ut([],l,c,u,s),fields:r,geometryType:c,objectIdFieldName:e,spatialReference:n,uniqueIdField:f,queryGeometry:rt(a,h,!1,!1)};return o&&(d.transform=o),i&&(d.exceededTransferLimit=i),s&&(d.hasM=s),u&&(d.hasZ=u),d}function ct(e,n){const o=new a,{hasM:r,hasZ:s,features:u,objectIdFieldName:l,spatialReference:c,geometryType:i,exceededTransferLimit:f,transform:h,fields:d}=e;return d&&(o.fields=d),o.geometryType=i??null,o.objectIdFieldName=l??n??null,o.spatialReference=c??null,o.objectIdFieldName?(u&&et(o.features,u,i,s,r,o.objectIdFieldName),f&&(o.exceededTransferLimit=f),r&&(o.hasM=r),s&&(o.hasZ=s),h&&(o.transform=h),o):(m().error(new t(\"optimized-features:invalid-objectIdFieldName\",\"objectIdFieldName is missing\")),o)}function it(t){const{transform:e,features:n,hasM:o,hasZ:r}=t;if(!e)return t;for(const s of n)null!=s.geometry&&pt(s.geometry,s.geometry,o,r,e),null!=s.centroid&&pt(s.centroid,s.centroid,o,r,e);return t.transform=null,t}function ft(t,e){const{geometryType:n,features:o,hasM:r,hasZ:s}=e;if(!t)return e;for(let u=0;u<o.length;u++){const e=o[u],l=e.weakClone();l.geometry=new h,at(l.geometry,e.geometry,r,s,n,t),e.centroid&&(l.centroid=new h,at(l.centroid,e.centroid,r,s,\"esriGeometryPoint\",t)),o[u]=l}return e.transform=t,e}function at(t,e,n,o,r,s,u=n,l=o){if(wt(t),!e?.coords.length)return null;const c=g[r],{coords:i,lengths:f}=e,a=d(n,o),h=d(n&&u,o&&l),m=M(n,o,u,l);if(!f.length)return m(t.coords,i,0,0,N(s,i[0]),w(s,i[1])),wt(t,a,0),t;let y,p,I,b,G=0,T=0,F=T;for(const d of f){if(d<c)continue;let e=0;T=F,I=y=N(s,i[G]),b=p=w(s,i[G+1]),m(t.coords,i,T,G,I,b),e++,G+=a,T+=h;for(let n=1;n<d;n++,G+=a)I=N(s,i[G]),b=w(s,i[G+1]),I===y&&b===p||(m(t.coords,i,T,G,I-y,b-p),T+=h,e++,y=I,p=b);e>=c&&(t.lengths.push(e),F=T)}return Gt(t.coords,F),t.coords.length?t:null}function ht(t,e,n,o,r,s,u=n,l=o){if(wt(t),!e?.coords.length)return null;const c=g[r],{coords:i,lengths:f}=e,a=d(n,o),h=d(n&&u,o&&l),m=M(n,o,u,l);if(!f.length)return m(t.coords,i,0,0,i[0],i[1]),wt(t,a,0),t;let y=0;const p=s*s;for(const d of f){if(d<c){y+=d*a;continue}const e=t.coords.length/h,n=y,o=y+(d-1)*a;m(t.coords,i,t.coords.length,n,i[n],i[n+1]),mt(t.coords,i,a,p,m,n,o),m(t.coords,i,t.coords.length,o,i[o],i[o+1]);const r=t.coords.length/h-e;r>=c?t.lengths.push(r):Gt(t.coords,e*h),y+=d*a}return t.coords.length?t:null}function dt(t,e,n,o){const r=t[e],s=t[e+1],u=t[n],l=t[n+1],c=t[o],i=t[o+1];let f=u,a=l,h=c-f,d=i-a;if(0!==h||0!==d){const t=((r-f)*h+(s-a)*d)/(h*h+d*d);t>1?(f=c,a=i):t>0&&(f+=h*t,a+=d*t)}return h=r-f,d=s-a,h*h+d*d}function mt(t,e,n,o,r,s,u){let l,c=o,i=0;for(let f=s+n;f<u;f+=n)l=dt(e,f,s,u),l>c&&(i=f,c=l);c>o&&(i-s>n&&mt(t,e,n,o,r,s,i),r(t,e,t.length,i,e[i],e[i+1]),u-i>n&&mt(t,e,n,o,r,i,u))}function gt(t,e,n,u){if(!e?.coords?.length)return null;const l=d(n,u);let c=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=l){const n=t[e],o=t[e+1];c=Math.min(c,n),f=Math.max(f,n),i=Math.min(i,o),a=Math.max(a,o)}}return o(t)?r(t,c,i,f,a):s(c,i,f,a,t),t}function yt(t,e,n,o){const r=d(n,o),{lengths:s,coords:u}=e;let l=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,a=0;for(const h of s){let t=u[a],e=u[a+1];l=Math.min(t,l),c=Math.min(e,c),i=Math.max(t,i),f=Math.max(e,f),a+=r;for(let n=1;n<h;n++,a+=r){const n=u[a],o=u[a+1];t+=n,e+=o,n<0&&(l=Math.min(l,t)),n>0&&(i=Math.max(i,t)),o<0?c=Math.min(c,e):o>0&&(f=Math.max(f,e))}}return t[0]=l,t[1]=c,t[2]=i,t[3]=f,t}function pt(t,e,o,r,s){const{coords:u,lengths:l}=e,c=d(o,r);if(!u.length)return t!==e&&wt(t),t;n(s);const{originPosition:i,scale:f,translate:a}=s,h=Tt;h.originPosition=i;const m=h.scale;m[0]=f[0]??1,m[1]=-(f[1]??1),m[2]=f[2]??1,m[3]=f[3]??1;const g=h.translate;if(g[0]=a[0]??0,g[1]=a[1]??0,g[2]=a[2]??0,g[3]=a[3]??0,!l.length){for(let e=0;e<c;++e)t.coords[e]=F(h,u[e],e);return t!==e&&wt(t,c,0),t}let y=0;for(let n=0;n<l.length;n++){const e=l[n];t.lengths[n]=e;for(let n=0;n<c;++n)t.coords[y+n]=F(h,u[y+n],n);let o=t.coords[y],r=t.coords[y+1];y+=c;for(let n=1;n<e;n++,y+=c){o+=u[y]*m[0],r+=u[y+1]*m[1],t.coords[y]=o,t.coords[y+1]=r;for(let e=2;e<c;++e)t.coords[y+e]=F(h,u[y+e],e)}}return t!==e&&wt(t,u.length,l.length),t}function It(t,e,n,o,r,s){if(wt(t),t.lengths.push(...e.lengths),n===r&&o===s)for(let u=0;u<e.coords.length;u++)t.coords.push(e.coords[u]);else{const u=d(n,o),l=M(n,o,r,s),c=e.coords;for(let e=0;e<c.length;e+=u)l(t.coords,c,t.coords.length,e,c[e],c[e+1])}return t}function bt(t,e,n,o,r){if(!e?.coords?.length)return null;const s=g[n],{coords:u,lengths:l}=e,c=M(o,r,o,r),i=d(o,r);let f=0,a=0,h=0,m=0;for(const d of l){a=m,c(t.coords,u,a,f,u[f],u[f+1]),f+=i;let e=u[f],n=u[f+1],o=e,r=n,l=n/e;a+=i,c(t.coords,u,a,f,o,r),f+=i;for(let s=2;s<d;s++){e=u[f],n=u[f+1];const s=n/e,h=l===s||!isFinite(l)&&!isFinite(s),d=h&&isFinite(s)?l>=0&&s>=0||l<=0&&s<=0:r>=0&&n>=0||r<=0&&n<=0;h&&d?(o+=e,r+=n):(o=e,r=n,a+=i),c(t.coords,u,a,f,o,r),f+=i,l=s}a+=i;const g=(a-m)/i;g>=s&&(t.lengths[h]=g,m=a,h++)}return t.coords.length>m&&(t.coords.length=m),t.lengths.length>h&&(t.lengths.length=h),t.coords.length&&t.lengths.length?t:null}function Mt(t,e,n,o){let r=0,s=t[o*e],u=t[o*(e+1)];for(let l=1;l<n;l++){const n=s+t[o*(e+l)],c=u+t[o*(e+l)+1],i=(n-s)*(c+u);s=n,u=c,r+=i}return.5*r}function Nt(t,e){const{coords:n,lengths:o}=t;let r=0,s=0;for(let u=0;u<o.length;u++){const t=o[u];s+=Mt(n,r,t,e),r+=t}return Math.abs(s)}function wt(t,e=0,n=0){Gt(t.lengths,n),Gt(t.coords,e)}function Gt(t,e=0){t.length!==e&&(t.length=e)}const Tt={originPosition:\"lowerLeft\",scale:[1,1,1,1],translate:[0,0,0,0]};export{tt as convertFromFeature,ct as convertFromFeatureSet,et as convertFromFeatures,ot as convertFromGeometry,R as convertFromMultipoint,q as convertFromMultipointFeatures,Q as convertFromNestedArray,O as convertFromPoint,L as convertFromPointFeatures,K as convertFromPolygon,C as convertFromPolyline,B as convertFromPolylineFeatures,nt as convertToFeature,lt as convertToFeatureSet,ut as convertToFeatures,rt as convertToGeometry,U as convertToMultipoint,S as convertToMultipointFeatures,P as convertToPoint,H as convertToPolygon,$ as convertToPolyline,ht as generalizeOptimizedGeometry,gt as getBoundsOptimizedGeometry,Nt as getQuantizedArea,yt as getQuantizedBoundsOptimizedGeometry,Mt as getSignedQuantizedRingArea,ft as quantizeOptimizedFeatureSet,at as quantizeOptimizedGeometry,N as quantizeX,w as quantizeY,bt as removeCollinearVertices,It as removeZMValues,it as unquantizeOptimizedFeatureSet,pt as unquantizeOptimizedGeometry,F as unquantizeValue,G as unquantizeX,T as unquantizeY};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../config.js\";import\"../../../geometry.js\";import r from\"../../../request.js\";import{isSome as s,remove as a}from\"../../../core/arrayUtils.js\";import i from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{JSONMap as n}from\"../../../core/jsonMap.js\";import o from\"../../../core/Loadable.js\";import u from\"../../../core/Logger.js\";import{setDeepValue as l}from\"../../../core/object.js\";import{debounce as c,after as d,throwIfAbortError as p}from\"../../../core/promiseUtils.js\";import{watch as y}from\"../../../core/reactiveUtils.js\";import{join as h}from\"../../../core/urlUtils.js\";import{generateBracedUUID as m}from\"../../../core/uuid.js\";import{property as f}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as g}from\"../../../core/accessorSupport/decorators/subclass.js\";import w from\"../../../geometry/Extent.js\";import q from\"../../../geometry/support/MeshGeoreferencedVertexSpace.js\";import{isRelativeVertexSpace as S}from\"../../../geometry/support/meshVertexSpaceUtils.js\";import{isOriginalExternal as E}from\"../../../geometry/support/meshUtils/External.js\";import{createFeatureEditResult as O,getFeatureJSON as _,getFeatureIds as b,getAttachmentEditsJSON as R,isProtectedOrPrivateVersionError as A,unpackEditResultData as F,createEditedFeatures as I}from\"../applyEditsUtils.js\";import{createDrawingInfo as x}from\"./support/clientSideDefaults.js\";import j from\"./support/QueryTask.js\";import{isHostedAgolService as v}from\"../../support/arcgisLayerUrl.js\";import{ensureLayerCredential as T}from\"../../support/featureLayerUtils.js\";import{getAssetMapTable as M}from\"../../support/infoFor3D.js\";import{executeQueryJSON as N}from\"../../../rest/query/executeQueryJSON.js\";import{unapplyEditsZUnitScaling as U}from\"../../../rest/query/operations/editsZScale.js\";import J from\"../../../rest/support/Query.js\";import D from\"../../../time/TimeExtent.js\";import{isSafeToEditVersion as k,isVersionInEditSession as C,isHistoricVersion as L,currentSessionId as Q}from\"../../../versionManagement/support/versionManagementUtils.js\";import P from\"../../../geometry/SpatialReference.js\";const V=new n({originalAndCurrentFeatures:\"original-and-current-features\",none:\"none\"}),$=new n({Started:\"published\",Publishing:\"publishing\",Stopped:\"unavailable\"});let G=class extends o{constructor(e){super(e),this.type=\"feature-layer\",this.supportedSourceTypes=new Set([\"Feature Layer\",\"Oriented Imagery Layer\",\"Table\",\"Catalog Layer\"]),this.refresh=c((async()=>{await this.load();const e=this.sourceJSON.editingInfo?.lastEditDate;if(null==e)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const t=e!==this.sourceJSON.editingInfo?.lastEditDate;return{dataChanged:t,updates:t?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(e){const t=this.layer.sourceJSON,r=this._fetchService(t,{...e}).then((()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,e))).then((()=>this._ensureLatestMetadata(e)));return this.addResolvingPromise(r),Promise.resolve(this)}initialize(){this.addHandles([y((()=>{const e=this.layer;return e&&\"lastEditsEventDate\"in e?e.lastEditsEventDate:null}),(e=>this._handleLastEditsEventChange(e)))])}destroy(){this._removeEditInterceptor()}get queryTask(){const{capabilities:e,parsedUrl:t,gdbVersion:r,spatialReference:s,fieldsIndex:a}=this.layer,i=\"infoFor3D\"in this.layer?this.layer.infoFor3D:null,n=\"dynamicDataSource\"in this.layer?this.layer.dynamicDataSource:null,o=has(\"featurelayer-pbf\")&&e?.query.supportsFormatPBF&&null==i,u=e?.operations?.supportsQueryAttachments??!1;return new j({url:t.path,pbfSupported:o,fieldsIndex:a,infoFor3D:i,dynamicDataSource:n,gdbVersion:r,sourceSpatialReference:s,queryAttachmentsSupported:u})}async addAttachment(e,t){await this.load();const{layer:s}=this;await T(s,\"editing\");const a=e.attributes[s.objectIdField],i=s.parsedUrl.path+\"/\"+a+\"/addAttachment\",n=this._getLayerRequestOptions(),o=this._getFormDataForAttachment(t,n.query);try{const e=await r(i,{body:o});return O(e.data.addAttachmentResult)}catch(u){throw this._createAttachmentErrorResult(a,u)}}async updateAttachment(e,t,s){await this.load();const{layer:a}=this;await T(a,\"editing\");const i=e.attributes[a.objectIdField],n=a.parsedUrl.path+\"/\"+i+\"/updateAttachment\",o=this._getLayerRequestOptions({query:{attachmentId:t}}),u=this._getFormDataForAttachment(s,o.query);try{const e=await r(n,{body:u});return O(e.data.updateAttachmentResult)}catch(l){throw this._createAttachmentErrorResult(i,l)}}async applyEdits(e,t){await this.load();const{layer:a}=this;await T(a,\"editing\");const n=\"infoFor3D\"in a?a.infoFor3D:null,o=null!=n,u=o||(t?.globalIdUsed??!1),l=o?await this._uploadMeshesAndGetAssetMapEditsJSON(e):null,c=e.addFeatures?.map((e=>_(this.layer,e,n)))??[],d=(await Promise.all(c)).filter(s),p=e.updateFeatures?.map((e=>_(this.layer,e,n)))??[],y=(await Promise.all(p)).filter(s),h=b(this.layer,e.deleteFeatures,u);U(d,y,a.spatialReference);const m=await R(this.layer,e),f=a.capabilities.editing.supportsAsyncApplyEdits&&o,g=t?.gdbVersion||a.gdbVersion,w={gdbVersion:g,rollbackOnFailure:t?.rollbackOnFailureEnabled,useGlobalIds:u,returnEditMoment:t?.returnEditMoment,usePreviousEditMoment:t?.usePreviousEditMoment,async:f};await k(this.layer.url,g,!0);const q=C(this.layer.url,g||null);if(await L(a.url,g,a.historicMoment))throw new i(\"feature-layer-source:historic-version\",\"Editing a historic version is not allowed\");t?.returnServiceEditsOption?(w.edits=JSON.stringify([{id:a.layerId,adds:d.length?d:null,updates:y.length?y:null,deletes:h.length?h:null,attachments:m,assetMaps:l}]),w.returnServiceEditsOption=V.toJSON(t?.returnServiceEditsOption),w.returnServiceEditsInSourceSR=t?.returnServiceEditsInSourceSR):(w.adds=d.length?JSON.stringify(d):null,w.updates=y.length?JSON.stringify(y):null,w.deletes=h.length?u?JSON.stringify(h):h.join(\",\"):null,w.attachments=m&&JSON.stringify(m),w.assetMaps=null!=l?JSON.stringify(l):void 0);const S=this._getLayerRequestOptions({method:\"post\",query:w});q&&(S.authMode=\"immediate\",S.query.returnEditMoment=!0,S.query.sessionId=Q);const E=t?.returnServiceEditsOption?a.url:a.parsedUrl.path;let O;try{O=f?await this._asyncApplyEdits(E+\"/applyEdits\",S):await r(E+\"/applyEdits\",S)}catch(F){if(!A(F))throw F;S.authMode=\"immediate\",O=f?await this._asyncApplyEdits(E+\"/applyEdits\",S):await r(E+\"/applyEdits\",S)}return this._createEditsResult(O)}async deleteAttachments(e,t){await this.load();const{layer:s}=this;await T(s,\"editing\");const a=e.attributes[s.objectIdField],i=s.parsedUrl.path+\"/\"+a+\"/deleteAttachments\";try{return(await r(i,this._getLayerRequestOptions({query:{attachmentIds:t.join(\",\")},method:\"post\"}))).data.deleteAttachmentResults.map(O)}catch(n){throw this._createAttachmentErrorResult(a,n)}}fetchRecomputedExtents(e={}){const t=e.signal;return this.load({signal:t}).then((async()=>{const t=this._getLayerRequestOptions({...e,query:{returnUpdates:!0}}),{layerId:s,url:a}=this.layer,{data:i}=await r(`${a}/${s}`,t),{id:n,extent:o,fullExtent:u,timeExtent:l}=i,c=o||u;return{id:n,fullExtent:c&&w.fromJSON(c),timeExtent:l&&D.fromJSON({start:l[0],end:l[1]})}}))}async queryAttachments(e,t={}){await this.load();const r=this._getLayerRequestOptions(t);return this.queryTask.executeAttachmentQuery(e,r)}async queryFeatures(e,t){await this.load();const r=await this.queryTask.execute(e,{...t,query:this._createRequestQueryOptions(t)});return e.outStatistics?.length&&r.features.length&&r.features.forEach((t=>{const r=t.attributes;e.outStatistics?.forEach((({outStatisticFieldName:e})=>{if(e){const t=e.toLowerCase();t&&t in r&&e!==t&&(r[e]=r[t],delete r[t])}}))})),r}async queryFeaturesJSON(e,t){return await this.load(),this.queryTask.executeJSON(e,{...t,query:this._createRequestQueryOptions(t)})}async queryObjectIds(e,t){return await this.load(),this.queryTask.executeForIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryFeatureCount(e,t){return await this.load(),this.queryTask.executeForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryExtent(e,t){return await this.load(),this.queryTask.executeForExtent(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeatures(e,t){return await this.load(),this.queryTask.executeRelationshipQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryRelatedFeaturesCount(e,t){return await this.load(),this.queryTask.executeRelationshipQueryForCount(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopFeatures(e,t){return await this.load(),this.queryTask.executeTopFeaturesQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryBins(e,t){return await this.load(),this.queryTask.executeBinsQuery(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopObjectIds(e,t){return await this.load(),this.queryTask.executeForTopIds(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopExtents(e,t){return await this.load(),this.queryTask.executeForTopExtents(e,{...t,query:this._createRequestQueryOptions(t)})}async queryTopCount(e,t){return await this.load(),this.queryTask.executeForTopCount(e,{...t,query:this._createRequestQueryOptions(t)})}async fetchPublishingStatus(){if(!v(this.layer.url))return\"unavailable\";const e=h(this.layer.url,\"status\"),t=await r(e,{query:{f:\"json\"}});return $.fromJSON(t.data.status)}async uploadAssets(e,t){const{uploadAssets:r}=await import(/* webpackChunkName: \"support-uploadAssets\" */ \"./support/uploadAssets.js\");return r(e,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},t)}_handleLastEditsEventChange(e){const t=this.layer;if(null==e||!(\"capabilities\"in t)||!(\"effectiveCapabilities\"in t))return;if(!(!t.capabilities?.operations?.supportsEditing&&t.effectiveCapabilities?.operations?.supportsEditing))return;const r=t.url;if(null==r)return;\"layerId\"in t&&h(r,t.layerId.toString());this._getOrCreateEditInterceptor(r).before=t=>{const r=t.requestOptions.method??\"auto\";if(\"auto\"===r||\"head\"===r){const r=t.requestOptions.query??{};r._ts=e.getTime(),t.requestOptions.query=r}}}_getOrCreateEditInterceptor(e){return null==this._editInterceptor&&(this._editInterceptor={urls:e},t.request.internalInterceptors.push(this._editInterceptor)),this._editInterceptor}_removeEditInterceptor(){null!=this._editInterceptor&&(a(t.request.internalInterceptors,this._editInterceptor),this._editInterceptor=null)}async _asyncApplyEdits(e,t){const s=(await r(e,t)).data.statusUrl;for(;;){const e=(await r(s,{query:{f:\"json\"},responseType:\"json\"})).data;switch(e.status){case\"Completed\":return r(e.resultUrl,{query:{f:\"json\"},responseType:\"json\"});case\"CompletedWithErrors\":throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed.\");case\"Failed ImportChanges\":case\"InProgress\":case\"Pending\":case\"ExportAttachments\":case\"ExportChanges\":case\"ExportingData\":case\"ExportingSnapshot\":case\"ImportAttachments\":case\"ProvisioningReplica\":case\"UnRegisteringReplica\":break;default:throw new i(\"async-applyEdits-failed\",\"asynchronous applyEdits call failed (undefined response status)\")}await d(H)}}_createRequestQueryOptions(e){const t={...this.layer.customParameters,token:this.layer.apiKey,...e?.query};return this.layer.datesInUnknownTimezone&&(t.timeReferenceUnknownClient=!0),t}async _fetchService(e,t){if(!e){const s={};has(\"featurelayer-advanced-symbols\")&&(s.returnAdvancedSymbols=!0),t?.cacheBust&&(s._ts=Date.now());const{data:a}=await r(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:s,signal:t?.signal}));e=a}this.sourceJSON=await this._patchServiceJSON(e,t?.signal);const s=e.type;if(!this.supportedSourceTypes.has(s))throw new i(\"feature-layer-source:unsupported-type\",`Source type \"${s}\" is not supported`)}async _patchServiceJSON(e,t){if(\"Table\"!==e.type&&e.geometryType&&!e?.drawingInfo?.renderer&&!e.defaultSymbol){const t=x(e.geometryType).renderer;l(\"drawingInfo.renderer\",t,e)}if(\"esriGeometryMultiPatch\"===e.geometryType&&e.infoFor3D&&(e.geometryType=\"mesh\"),null==e.extent)try{const{data:s}=await r(this.layer.url,this._getLayerRequestOptions({signal:t}));s.spatialReference&&(e.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:s.spatialReference})}catch(s){p(s)}return e}async _ensureLatestMetadata(e){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...e,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(e){const{addAssetFeatures:t}=e;if(!t?.length)return null;if(await this._areAllAssetsAlreadyMapped(t))return null;const r=e.addFeatures.filter((e=>e.geometry));if(t.length!==r.length+e.updateFeatures.length)throw new i(\"feature-layer-source:unsupported-mesh-edits\",\"Mixing attribute only edits with mesh geometry edits is not currently supported\");const s=new Array,a=new Map;for(const i of t){const{geometry:e}=i,{vertexSpace:t}=e;if(S(t))s.push(e);else{const t=e.origin,{convertMeshVertexSpace:r}=await import(/* webpackChunkName: \"geometry-support-meshUtils-convertMeshVertexSpace\" */ \"../../../geometry/support/meshUtils/convertMeshVertexSpace.js\"),n=await r(e,new q({origin:[t.x,t.y,t.z??0]}));a.set(n,e),i.geometry=n,s.push(n)}}await this.uploadAssets(s);for(const[i,n]of a)n.addExternalSources(i.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(t),updates:[],deletes:[]}}_getAssetMapEditsJSON(e){const t=new Array,r=this.layer.globalIdField,s=this.layer.parsedUrl;for(const a of e){const e=a.geometry,{metadata:i}=e,n=i.getExternalSourcesOnService(s),o=a.getAttribute(r);if(0===n.length){u.getLogger(this).error(`Skipping feature ${o}. The mesh it is associated with has not been uploaded to the service and cannot be mapped to it.`);continue}const{source:l}=n.find(E)??n[0];for(const r of l)1===r.parts.length?t.push({globalId:m(),parentGlobalId:o,assetName:r.assetName,assetHash:r.parts[0].partHash,flags:[]}):u.getLogger(this).error(`Skipping asset ${r.assetName}. It does not have exactly one part, so we cannot map it to a feature.`)}return t}_createEditsResult(e){const t=e.data,{layerId:r}=this.layer,s=[];let a=null;if(Array.isArray(t))for(const n of t)s.push({id:n.id,editedFeatures:n.editedFeatures}),n.id===r&&(a={addResults:n.addResults??[],updateResults:n.updateResults??[],deleteResults:n.deleteResults??[],attachments:n.attachments,editMoment:n.editMoment});else a=t;const i=F(a);if(s.length>0){i.editedFeatureResults=[];for(const e of s){const{editedFeatures:t}=e,r=t?.spatialReference?new P(t.spatialReference):null;i.editedFeatureResults.push({layerId:e.id,editedFeatures:I(t,r)})}}return i}_createAttachmentErrorResult(e,t){const r=t.details.messages?.[0]||t.message,s=t.details.httpStatus||t.details.messageCode;return{objectId:e,globalId:null,error:new i(\"feature-layer-source:attachment-failure\",r,{code:s})}}_getFormDataForAttachment(e,t){const r=e instanceof FormData?e:e&&e.elements?new FormData(e):null;if(r)for(const s in t){const e=t[s];null!=e&&(r.set?r.set(s,e):r.append(s,e))}return r}_getLayerRequestOptions(e={}){const{layer:t,layer:{parsedUrl:r,gdbVersion:s}}=this;return{...e,query:{gdbVersion:s,layer:\"dynamicDataSource\"in t&&t.dynamicDataSource?JSON.stringify({source:t.dynamicDataSource}):void 0,...r.query,f:\"json\",...this._createRequestQueryOptions(e)},responseType:\"json\"}}async _areAllAssetsAlreadyMapped(e){const{layer:t}=this,{globalIdField:r,parsedUrl:a}=t,i=\"infoFor3D\"in t?t.infoFor3D:null;if(null==i||null==r)return!1;const n=M(i);if(null==n)return!1;const o=h(a.path,`../${n.id}`),u=new Array;for(const s of e){if(!(s.geometry.metadata.getExternalSourcesOnService(a).length>0))return!1;u.push(s)}const l=u.map((e=>e.getAttribute(r))).filter(s);if(0===l.length)return!1;const{assetMapFieldRoles:{parentGlobalId:c,assetHash:d}}=i,p=new J({where:`${c} IN (${l.map((e=>`'${e}'`))})`,outFields:[d,c],returnGeometry:!1}),y=await N(o,p),{features:m}=y;return 0!==m.length&&!u.some((e=>{const t=e.getAttribute(r);if(!t)return!0;const{metadata:s}=e.geometry,i=m.filter((e=>e.getAttribute(c)===t));if(0===i.length)return!0;const n=i.map((e=>e.getAttribute(d)));return s.getExternalSourcesOnService(a).flatMap((({source:e})=>e.flatMap((e=>e.parts.map((e=>e.partHash)))))).some((e=>n.every((t=>e!==t))))}))}};e([f()],G.prototype,\"type\",void 0),e([f({constructOnly:!0})],G.prototype,\"layer\",void 0),e([f({constructOnly:!0})],G.prototype,\"supportedSourceTypes\",void 0),e([f({readOnly:!0})],G.prototype,\"queryTask\",null),G=e([g(\"esri.layers.graphics.sources.FeatureLayerSource\")],G);const H=1e3,B=G;export{B as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Error.js\";import has from\"../../../../core/has.js\";import{whenOrAbort as o}from\"../../../../core/promiseUtils.js\";import{urlToObject as s}from\"../../../../core/urlUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{equals as a}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getGlbFormatId as n,getGltfFormatId as c}from\"../../../support/infoFor3D.js\";import{DataLayerSource as p}from\"../../../support/source/DataLayerSource.js\";import{parseUrl as l}from\"../../../../rest/utils.js\";import{executeForCount as m}from\"../../../../rest/query/executeForCount.js\";import{executeForExtent as y}from\"../../../../rest/query/executeForExtent.js\";import{executeForIds as f}from\"../../../../rest/query/executeForIds.js\";import{executeRawQueryJSON as d}from\"../../../../rest/query/executeQueryJSON.js\";import{executeRawQueryPBF as h}from\"../../../../rest/query/executeQueryPBF.js\";import S from\"../../../../rest/support/FeatureSet.js\";import F from\"../../../../rest/support/Query.js\";let x=class extends t{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return s(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),o=null!=e.outStatistics?.[0],s=has(\"featurelayer-pbf-statistics\"),i=!o||s;let u;if(this.pbfSupported&&i)try{u=await h(this.url,r,t)}catch(a){if(\"query:parsing-pbf\"!==a.name)throw a;this.pbfSupported=!1}return this.pbfSupported&&i||(u=await d(this.url,r,t)),this._normalizeFields(u.fields),u}async featureSetFromJSON(e,t,r){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return S.fromJSON(t);const{meshFeatureSetFromJSON:s}=await o(import(/* webpackChunkName: \"rest-support-meshFeatureSet\" */ \"../../../../rest/support/meshFeatureSet.js\"),r);return s(e,this.infoFor3D,t)}executeForCount(e,t){return m(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return y(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return f(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:r},{executeRelationshipQuery:s}]=await o(Promise.all([import(/* webpackChunkName: \"rest-support-RelationshipQuery\" */ \"../../../../rest/support/RelationshipQuery.js\"),import(/* webpackChunkName: \"rest-query-executeRelationshipQuery\" */ \"../../../../rest/query/executeRelationshipQuery.js\")]),t);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:r},{executeRelationshipQueryForCount:s}]=await o(Promise.all([import(/* webpackChunkName: \"rest-support-RelationshipQuery\" */ \"../../../../rest/support/RelationshipQuery.js\"),import(/* webpackChunkName: \"rest-query-executeRelationshipQuery\" */ \"../../../../rest/query/executeRelationshipQuery.js\")]),t);return e=r.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),s(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:r,fetchAttachments:s,processAttachmentQueryResult:i}=await o(import(/* webpackChunkName: \"rest-query-operations-queryAttachments\" */ \"../../../../rest/query/operations/queryAttachments.js\"),t),u=l(this.url);return i(u,await(this.queryAttachmentsSupported?r(u,e,t):s(u,e,t)))}async executeBinsQuery(e,t){const{executeBinsQuery:r}=await o(import(/* webpackChunkName: \"rest-query-executeBinsQuery\" */ \"../../../../rest/query/executeBinsQuery.js\"),t);return r(this.parsedUrl,e,t)}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:r}=await o(import(/* webpackChunkName: \"rest-query-executeTopFeaturesQuery\" */ \"../../../../rest/query/executeTopFeaturesQuery.js\"),t);return r(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:r}=await o(import(/* webpackChunkName: \"rest-query-executeForTopIds\" */ \"../../../../rest/query/executeForTopIds.js\"),t);return r(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:r}=await o(import(/* webpackChunkName: \"rest-query-executeForTopExtents\" */ \"../../../../rest/query/executeForTopExtents.js\"),t);return r(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:r}=await o(import(/* webpackChunkName: \"rest-query-executeForTopCount\" */ \"../../../../rest/query/executeForTopCount.js\"),t);return r(this.parsedUrl,e,t)}_normalizeQuery(e){let t=F.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?p.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:o}=this;if(null!=o&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const s=n(o),i=c(o);for(const e of o.queryFormats){if(e===s){t.formatOf3DObjects=e;break}e!==i||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new r(\"query:unsupported-3d-query-formats\",\"Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf\");if(t.outSpatialReference&&!a(t.outSpatialReference,this.sourceSpatialReference))throw new r(\"query:unsupported-out-spatial-reference\",\"3D object feature services do not support projection of geometries\");if(null==t.outFields||!t.outFields.includes(\"*\")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:r,originY:s,originZ:i,translationX:u,translationY:a,translationZ:n,scaleX:c,scaleY:p,scaleZ:l,rotationX:m,rotationY:y,rotationZ:f,rotationDeg:d}=o.transformFieldRoles;t.outFields.push(r,s,i,u,a,n,c,p,l,m,y,f,d)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&\"xyFootprint\"!==e.multipatchOption&&!e.outStatistics}};e([i({type:p})],x.prototype,\"dynamicDataSource\",void 0),e([i()],x.prototype,\"fieldsIndex\",void 0),e([i()],x.prototype,\"gdbVersion\",void 0),e([i()],x.prototype,\"infoFor3D\",void 0),e([i({readOnly:!0})],x.prototype,\"parsedUrl\",null),e([i()],x.prototype,\"pbfSupported\",void 0),e([i()],x.prototype,\"queryAttachmentsSupported\",void 0),e([i()],x.prototype,\"sourceSpatialReference\",void 0),e([i({type:String})],x.prototype,\"url\",void 0),x=e([u(\"esri.layers.graphics.sources.support.QueryTask\")],x);const j=x;export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import{queryCapabilities as s}from\"../../data/QueryEngineCapabilities.js\";import{zeroQueryBins as r}from\"../../../support/capabilities.js\";import{defaultPointSymbolJSON as e,defaultPolylineSymbolJSON as p,defaultPolygonSymbolJSON as o}from\"../../../../symbols/support/defaultsJSON.js\";function u(t){return{renderer:{type:\"simple\",symbol:\"esriGeometryPoint\"===t||\"esriGeometryMultipoint\"===t?e:\"esriGeometryPolyline\"===t?p:o}}}const n=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let i=1;function a(t,s){if(has(\"esri-csp-restrictions\"))return()=>({[s]:null,...t});try{let r=`this${c(s)} = null;`;for(const s in t){r+=`this${c(s)} = ${JSON.stringify(t[s])};`}const e=new Function(`\\n      return class AttributesClass$${i++} {\\n        constructor() {\\n          ${r};\\n        }\\n      }\\n    `)();return()=>new e}catch(r){return()=>({[s]:null,...t})}}function c(t){return n.test(t)?`.${t}`:`[\"${t}\"]`}function l(s={}){return[{name:\"New Feature\",description:\"\",prototype:{attributes:t(s)}}]}function y(t,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:t},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:s,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:r,editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}export{y as createCapabilities,a as createDefaultAttributesFunction,l as createDefaultTemplate,u as createDrawingInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst s={supportsDate:!1,supportsFixedInterval:!1,supportsAutoInterval:!1,supportsFixedBoundaries:!1,supportedStatistics:void 0},t={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:s,query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}};export{t as zeroCapabilities,s as zeroQueryBins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst t=[[\"binary\",\"application/octet-stream\",\"bin\",\"\"]];function n(t,n){return null!=C(n.name,t?.supportedFormats??[])}function r(t,n){if(!t)return!1;const r=c(n,t.supportedFormats??[]);return null!=r&&t.editFormats.includes(r)}function o(t){return F(t?.supportedFormats??[]).flatMap(j).map((t=>`.${t}`))}function e(t){const n={};for(const r of F(t?.supportedFormats??[])){const[t,o]=g(r).split(\";\"),e=t.trim().toLowerCase(),u=j(r).map((t=>`.${t}`));n[e]??=[],n[e].push(...u)}return{description:\"3D Models\",accept:n}}function u(t,n){return L(b(t,n))}function i(t,n){return L(C(t,n))}function s(t,n){return g(w(t,n))}function c(t,n){return i(t.name,n)??u(t.type,n)}function p(t,n,r){return u(t,r)??i(n,r)}function a({supportedFormats:t}){return p(\"model/gltf-binary\",\"glb\",t)}function f(t){const n=a(t);return null!=n&&t.editFormats.includes(n)}function d({supportedFormats:t}){return p(\"model/gltf+json\",\"gltf\",t)}function l({supportedFormats:t}){return p(\"application/esri3do-SR_world\",\"wld\",t)}function m({supportedFormats:t}){return p(\"application/esri3do-SR_prj\",\"prj\",t)}function F(n){return[...t,...n]}function w(t,n){return F(n).find((n=>L(n)===t))}function b(t,n){const r=t.toLowerCase();return F(n).find((t=>g(t)===r))}function C(t,n){const r=t.toLowerCase();return F(n).find((t=>j(t).some((t=>r.endsWith(t)))))}function L(t){return t?.[0]}function g(t){return t?.[1].toLowerCase()}function j(t){return t?.[2].split(\",\").map((t=>t.toLowerCase()))??[]}function y(t){return t?.[3]}function M(t){return t.tables?.find((t=>\"assetMaps\"===t.role))}export{M as getAssetMapTable,c as getFileFormatId,e as getFilePickerAcceptType,i as getFilenameFormatId,y as getFormatDescription,j as getFormatExtensions,L as getFormatId,s as getFormatIdMimeType,g as getFormatMimeType,a as getGlbFormatId,d as getGltfFormatId,u as getMimeTypeFormatId,p as getMimeTypeOrFilenameFormatId,m as getPrjFormatId,o as getSupportedExtensions,l as getWorldFileFormatId,r as isFileEditFormat,n as isFileSupported,f as isGlbSupportedEditFormat};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import e from\"../../request.js\";import{getJsonType as t,fromJSON as r}from\"../../geometry/support/jsonUtils.js\";import{srToRESTValue as s}from\"../../geometry/support/spatialReferenceUtils.js\";import{parseUrl as o}from\"../utils.js\";async function i(i,n,p,m){const a=o(i),u=n[0].spatialReference,c={...m,responseType:\"json\",query:{...a.query,f:\"json\",sr:s(u),target:JSON.stringify({geometryType:t(n[0]),geometries:n}),cutter:JSON.stringify(p)}},f=await e(a.path+\"/cut\",c),{cutIndexes:y,geometries:g=[]}=f.data;return{cutIndexes:y,geometries:g.map((e=>{const t=r(e);return t.spatialReference=u,t}))}}export{i as cut};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport r from\"../../request.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import{getJsonType as e}from\"../../geometry/support/jsonUtils.js\";import{srToRESTValue as s}from\"../../geometry/support/spatialReferenceUtils.js\";import{encodeGeometries as o,decodeGeometries as i}from\"./utils.js\";async function m(m,p,f){const n=\"string\"==typeof m?t(m):m,a=p[0].spatialReference,u=e(p[0]),l={...f,query:{...n.query,f:\"json\",sr:s(a),geometries:JSON.stringify(o(p))}},{data:y}=await r(n.path+\"/simplify\",l);return i(y.geometries,u,a)}export{m as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getJsonType as e,getGeometryType as t}from\"../../geometry/support/jsonUtils.js\";function r(t){return{geometryType:e(t[0]),geometries:t.map((e=>e.toJSON()))}}function o(e,r,o){const n=t(r);return e.map((e=>{const t=n.fromJSON(e);return t.spatialReference=o,t}))}export{o as decodeGeometries,r as encodeGeometries};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(n){const o={};for(const e in n){if(\"declaredClass\"===e)continue;const r=n[e];if(null!=r&&\"function\"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else\"object\"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}export{t as mapParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{parseUrl as o}from\"../utils.js\";import{executeQueryForCount as r}from\"./operations/query.js\";import t from\"../support/Query.js\";async function s(s,i,m){const n=o(s),{data:p}=await r(n,t.from(i),m);return p.count}export{s as executeForCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{parseUrl as t}from\"../utils.js\";import{executeQueryForExtent as o}from\"./operations/query.js\";import r from\"../support/Query.js\";import m from\"../../geometry/Extent.js\";async function n(n,a,e){const i=t(n),s=await o(i,r.from(a),{...e}),u=s.data.extent;return!u||isNaN(u.xmin)||isNaN(u.ymin)||isNaN(u.xmax)||isNaN(u.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:m.fromJSON(u)}}export{n as executeForExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{parseUrl as o}from\"../utils.js\";import{executeQueryForIds as r}from\"./operations/query.js\";import t from\"../support/Query.js\";async function s(s,i,m){const p=o(s),{data:a}=await r(p,t.from(i),m);return a.objectIds}export{s as executeForIds};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{executeQuery as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import e from\"../support/Query.js\";async function s(r,t,e){const s=await a(r,t,e);return o.fromJSON(s)}async function a(o,s,a){const n=r(o),i={...a},p=e.from(s),{data:u}=await t(n,p,p.sourceSpatialReference,i);return u}export{s as executeQueryJSON,a as executeRawQueryJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{parseUrl as r}from\"../utils.js\";import{JSONFeatureSetParserContext as e}from\"./operations/pbfJSONFeatureSet.js\";import{executeQueryPBF as t}from\"./operations/query.js\";import o from\"../support/FeatureSet.js\";import a from\"../support/Query.js\";async function s(r,e,t){const s=await n(r,a.from(e),t);return o.fromJSON(s)}async function n(o,s,n){const p=r(o),i={...n},u=a.from(s),m=!u.quantizationParameters,{data:f}=await t(p,u,new e({sourceSpatialReference:u.sourceSpatialReference,applyTransform:m}),i);return f}export{s as executeQueryPBF,n as executeRawQueryPBF};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getMetersPerVerticalUnitForSR as n}from\"../../../core/unitUtils.js\";import{equals as e}from\"../../../geometry/support/spatialReferenceUtils.js\";function t(n,e,t){if(null==n.hasM||n.hasZ)for(const i of e)for(const n of i)n.length>2&&(n[2]*=t)}function i(e,t,i){if(!e&&!t||!i)return;const s=n(i);o(e,i,s),o(t,i,s)}function o(n,e,t){if(n)for(const i of n)s(i.geometry,e,t)}function s(i,o,s){if(!i?.spatialReference||e(i.spatialReference,o))return;const f=n(i.spatialReference)/s;if(1!==f)if(\"x\"in i)null!=i.z&&(i.z*=f);else if(\"rings\"in i)t(i,i.rings,f);else if(\"paths\"in i)t(i,i.paths,f);else if(\"points\"in i&&(null==i.hasM||i.hasZ))for(const n of i.points)n.length>2&&(n[2]*=f)}export{i as unapplyEditsZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import t from\"../../../core/pbf.js\";import s from\"../../../layers/graphics/OptimizedGeometry.js\";import{optimizedGeometryTypes as r}from\"./pbfOptimizedFeatureSet.js\";const a=[\"esriFieldTypeSmallInteger\",\"esriFieldTypeInteger\",\"esriFieldTypeSingle\",\"esriFieldTypeDouble\",\"esriFieldTypeString\",\"esriFieldTypeDate\",\"esriFieldTypeOID\",\"esriFieldTypeGeometry\",\"esriFieldTypeBlob\",\"esriFieldTypeRaster\",\"esriFieldTypeGUID\",\"esriFieldTypeGlobalID\",\"esriFieldTypeXML\",\"esriFieldTypeBigInteger\",\"esriFieldTypeDateOnly\",\"esriFieldTypeTimeOnly\",\"esriFieldTypeTimestampOffset\"],n=[\"sqlTypeBigInt\",\"sqlTypeBinary\",\"sqlTypeBit\",\"sqlTypeChar\",\"sqlTypeDate\",\"sqlTypeDecimal\",\"sqlTypeDouble\",\"sqlTypeFloat\",\"sqlTypeGeometry\",\"sqlTypeGUID\",\"sqlTypeInteger\",\"sqlTypeLongNVarchar\",\"sqlTypeLongVarbinary\",\"sqlTypeLongVarchar\",\"sqlTypeNChar\",\"sqlTypeNVarchar\",\"sqlTypeOther\",\"sqlTypeReal\",\"sqlTypeSmallInt\",\"sqlTypeSqlXml\",\"sqlTypeTime\",\"sqlTypeTimestamp\",\"sqlTypeTimestamp2\",\"sqlTypeTinyInt\",\"sqlTypeVarbinary\",\"sqlTypeVarchar\"],i=[\"upperLeft\",\"lowerLeft\"];function o(e){return e>=a.length?null:a[e]}function c(e){return e>=n.length?null:n[e]}function l(e){return e>=i.length?null:i[e]}function g(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function p(e,t,s){const r=3,a=e.asUnsafe(),n=t.createPointGeometry(s);for(;a.next();)switch(a.tag()){case r:{const e=a.getUInt32(),s=a.pos()+e;let r=0;for(;a.pos()<s;)t.addCoordinatePoint(n,a.getSInt64(),r++);break}default:a.skip()}return n}function u(e,t,s){const r=2,a=3,n=e.asUnsafe(),i=t.createGeometry(s),o=2+(s.hasZ?1:0)+(s.hasM?1:0);for(;n.next();)switch(n.tag()){case r:{const e=n.getUInt32(),s=n.pos()+e;let r=0;for(;n.pos()<s;)t.addLength(i,n.getUInt32(),r++);break}case a:{const e=n.getUInt32(),s=n.pos()+e;let r=0;for(t.allocateCoordinates(i);n.pos()<s;)t.addCoordinate(i,n.getSInt64(),r),r++,r===o&&(r=0);break}default:n.skip()}return i}function f(e){const t=1,a=2,n=3,i=e.asUnsafe(),o=new s;let c=\"esriGeometryPoint\";for(;i.next();)switch(i.tag()){case a:{const e=i.getUInt32(),t=i.pos()+e;for(;i.pos()<t;)o.lengths.push(i.getUInt32());break}case n:{const e=i.getUInt32(),t=i.pos()+e;for(;i.pos()<t;)o.coords.push(i.getSInt64());break}case t:c=r[i.getEnum()];break;default:i.skip()}return{queryGeometry:o,queryGeometryType:c}}function y(e){const t=1,s=2,r=3,a=4,n=5,i=6,o=7,c=8,l=9,g=e.asUnsafe();for(;g.next();)switch(g.tag()){case t:return g.getString();case s:return g.getFloat();case r:return g.getDouble();case a:return g.getSInt32();case n:return g.getUInt32();case i:return g.getInt64();case o:return g.getUInt64();case c:return g.getSInt64();case l:return g.getBool();default:return g.skip(),null}return null}function b(e){const t=1,s=2,r=3,a=4,n=5,i=6,l=e.asUnsafe(),g={type:o(0)};for(;l.next();)switch(l.tag()){case t:g.name=l.getString();break;case s:g.type=o(l.getEnum());break;case r:g.alias=l.getString();break;case a:g.sqlType=c(l.getEnum());break;case n:l.skip();break;case i:g.defaultValue=l.getString();break;default:l.skip()}return g}function k(e){const t=1,s=2,r={},a=e.asUnsafe();for(;a.next();)switch(a.tag()){case t:r.name=a.getString();break;case s:r.isSystemMaintained=a.getBool();break;default:a.skip()}return r}function d(e,t,s,r){const a=1,n=2,i=4,o=t.createFeature(s);let c=0;for(;e.next();)switch(e.tag()){case a:{const t=r[c++].name;o.attributes[t]=e.processMessage(y);break}case n:o.geometry=e.processMessageWithArgs(u,t,s);break;case i:o.centroid=e.processMessageWithArgs(p,t,s);break;default:e.skip()}return o}function T(e){const t=1,s=2,r=3,a=4,n=[1,1,1,1],i=e.asUnsafe();for(;i.next();)switch(i.tag()){case t:n[0]=i.getDouble();break;case s:n[1]=i.getDouble();break;case a:n[2]=i.getDouble();break;case r:n[3]=i.getDouble();break;default:i.skip()}return n}function m(e){const t=1,s=2,r=3,a=4,n=[0,0,0,0],i=e.asUnsafe();for(;i.next();)switch(i.tag()){case t:n[0]=i.getDouble();break;case s:n[1]=i.getDouble();break;case a:n[2]=i.getDouble();break;case r:n[3]=i.getDouble();break;default:i.skip()}return n}function h(e){const t=1,s=2,r=3,a={originPosition:l(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case t:a.originPosition=l(n.getEnum());break;case s:a.scale=n.processMessage(T);break;case r:a.translate=n.processMessage(m);break;default:n.skip()}return a}function F(e){const t=1,s=2,r=3,a={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case t:a.shapeAreaFieldName=n.getString();break;case s:a.shapeLengthFieldName=n.getString();break;case r:a.units=n.getString();break;default:n.skip()}return a}function q(e,t){const s=1,r=2,a=3,n=4,i=5,o=t.createSpatialReference();for(;e.next();)switch(e.tag()){case s:o.wkid=e.getUInt32();break;case i:o.wkt=e.getString();break;case r:o.latestWkid=e.getUInt32();break;case a:o.vcsWkid=e.getUInt32();break;case n:o.latestVcsWkid=e.getUInt32();break;default:e.skip()}return o}function I(e,t){const s=1,r=2,a=3,n=4,i=5,o=7,c=8,l=9,p=10,u=11,f=12,y=13,T=15,m=t.createFeatureResult(),I=e.asUnsafe();m.geometryType=g(t,0);let U=!1;for(;I.next();)switch(I.tag()){case s:m.objectIdFieldName=I.getString();break;case a:m.globalIdFieldName=I.getString();break;case n:m.geohashFieldName=I.getString();break;case i:m.geometryProperties=I.processMessage(F);break;case o:m.geometryType=g(t,I.getEnum());break;case c:m.spatialReference=I.processMessageWithArgs(q,t);break;case p:m.hasZ=I.getBool();break;case u:m.hasM=I.getBool();break;case f:m.transform=I.processMessage(h);break;case l:m.exceededTransferLimit=I.getBool();break;case y:t.addField(m,I.processMessage(b));break;case T:U||(t.prepareFeatures(m),U=!0),t.addFeature(m,I.processMessageWithArgs(d,t,m,m.fields));break;case r:m.uniqueIdField=I.processMessage(k);break;default:I.skip()}return t.finishFeatureResult(m),m}function U(e,t){const s=1,r=4,a={};let n=null;for(;e.next();)switch(e.tag()){case r:n=e.processMessageWithArgs(f);break;case s:a.featureResult=e.processMessageWithArgs(I,t);break;default:e.skip()}return null!=n&&a.featureResult&&t.addQueryGeometry(a,n),a}function S(s,r){try{const e=2,a=new t(new Uint8Array(s),new DataView(s)),n={};for(;a.next();)if(a.tag()===e)n.queryResult=a.processMessageWithArgs(U,r);else a.skip();return n}catch(a){throw new e(\"query:parsing-pbf\",\"Error while parsing FeatureSet PBF payload\",{error:a})}}export{S as parseFeatureQuery,b as parseField,o as parseFieldType,h as parseTransform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{assertIsSome as e}from\"../../../core/maybe.js\";import{getGeometryZScaler as t}from\"../../../geometry/support/zscale.js\";import{unquantizeOptimizedGeometry as r,convertToGeometry as s}from\"../../../layers/graphics/featureConversionUtils.js\";function o(e,t){return t}function i(e,t,r,s){switch(r){case 0:return u(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?u(e,t+s,1):l(e,t+s,1)}}function n(e,t,r,s){return 2===r?u(e,t,2):i(e,t,r,s)}function a(e,t,r,s){return 2===r?0===t?0:u(e,t,3):i(e,t,r,s)}function h(e,t,r,s){return 3===r?0===t?0:u(e,t,3):n(e,t,r,s)}function u({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l({translate:e,scale:t},r,s){return e[s]-r*t[s]}class d{constructor(e){this._options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=o,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const r=t(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=r)for(const t of e.features)r(t.geometry)}createSpatialReference(){return{}}addField(t,r){const s=t.fields;e(s),s.push(r);const o=s.map((e=>e.name));this._attributesConstructor=function(){for(const e of o)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:o,queryGeometryType:i}=t,n=r(o.clone(),o,!1,!1,this._transform),a=s(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const s=this._transform;switch(t=this._applyTransform(s,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const s=this._transform;return null!==this._mValueOffset&&0===e&&t>0&&!(t%this._mValueOffset)?0:this._applyTransform(s,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?h:t?n:r?a:i}}export{d as JSONFeatureSetParserContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getMetersPerVerticalUnitForSR as e}from\"../../../core/unitUtils.js\";import{equals as t}from\"../../../geometry/support/spatialReferenceUtils.js\";import{hasGeometry as r,OptimizedFeature as o}from\"../../../layers/graphics/OptimizedFeature.js\";import i from\"../../../layers/graphics/OptimizedFeatureSet.js\";import s from\"../../../layers/graphics/OptimizedGeometry.js\";const n=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"];class a{constructor(e){this._options=e,this.geometryTypes=n,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new i}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(o){if(!o?.features||!o.hasZ||!this._options.sourceSpatialReference||!o.spatialReference||t(o.spatialReference,this._options.sourceSpatialReference)||o.spatialReference.vcsWkid)return;const i=e(this._options.sourceSpatialReference)/e(o.spatialReference);if(1!==i)for(const e of o.features){if(!r(e))continue;const t=e.geometry.coords;for(let e=2;e<t.length;e+=3)t[e]*=i}}addFeature(e,t){e.features.push(t)}createFeature(){return new o}createSpatialReference(){return{wkid:0}}createGeometry(){return new s}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new s}}export{a as OptimizedFeatureSetParserContext,n as optimizedGeometryTypes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{parseFeatureQuery as e}from\"./pbfFeatureServiceParser.js\";function t(t,r){const u=e(t,r),o=u.queryResult.featureResult,s=u.queryResult.queryGeometry,y=u.queryResult.queryGeometryType;if(o&&o.features&&o.features.length&&o.objectIdFieldName){const e=o.objectIdFieldName;for(const t of o.features)t.attributes&&(t.objectId=t.attributes[e])}return o&&(o.queryGeometry=s,o.queryGeometryType=y),o}export{t as parsePBFFeatureQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{urlToObject as e,join as n}from\"../../../core/urlUtils.js\";import{getJsonType as r}from\"../../../geometry/support/jsonUtils.js\";import{normalizeCentralMeridian as i}from\"../../../geometry/support/normalizeUtils.js\";import{srToRESTValue as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{mapParameters as o}from\"../../operations/urlUtils.js\";import{parsePBFFeatureQuery as u}from\"./pbfQueryUtils.js\";import{applyFeatureSetZUnitScaling as l}from\"./queryZScale.js\";const s=\"Layer does not support extent calculation.\";function m(t,e){if(e&&\"extent\"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&\"point\"===t.type)return`${t.x},${t.y}`;const n=t.toJSON();return delete n.spatialReference,JSON.stringify(n)}function y(t,e){const n=t.geometry,i=t.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const o=i;let u,l,s;if(null!=n&&(l=n.spatialReference,s=a(l),o.geometryType=r(n),o.geometry=m(n,t.compactGeometryEnabled),o.inSR=s),i.groupByFieldsForStatistics&&(o.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(\",\")),i.objectIds&&(o.objectIds=i.objectIds.join(\",\")),i.orderByFields&&(o.orderByFields=i.orderByFields.join(\",\")),!i.outFields||!i.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete o.outFields:i.outFields.includes(\"*\")?o.outFields=\"*\":o.outFields=i.outFields.join(\",\"),i.outSR?(o.outSR=a(i.outSR),u=t.outSpatialReference):n&&(i.returnGeometry||i.returnCentroid)&&(o.outSR=o.inSR,u=l),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(o.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(o.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(o.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=l&&null!=t.quantizationParameters?.extent&&l.equals(t.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,o.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(o.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(o.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(o.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const t=i.timeExtent,{start:e,end:n}=t;null==e&&null==n||(o.time=e===n?e:`${e??\"null\"},${n??\"null\"}`),delete i.timeExtent}return t.defaultSpatialReferenceEnabled&&null!=l&&null!=u&&l.equals(u)&&(o.defaultSR=o.inSR,delete o.inSR,delete o.outSR),o}async function c(t,e,n,r){const i=null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{features:[]}}:await E(t,e,\"json\",r);return l(e,n,i.data),i}async function f(t,e,n,r){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:n.createFeatureResult()};const i=await d(t,e,r),a=i;return a.data=u(i.data,n),a}function d(t,e,n){return E(t,e,\"pbf\",n)}function p(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E(t,e,\"json\",n,{returnIdsOnly:!0})}function S(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E(t,e,\"json\",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function x(t,e,n){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await E(t,e,\"json\",n,{returnExtentOnly:!0,returnCountOnly:!0}),i=r.data;if(i.hasOwnProperty(\"extent\"))return r;if(i.features)throw new Error(s);if(i.hasOwnProperty(\"count\"))throw new Error(s);return r}async function E(r,a,u,l={},s={}){const m=\"string\"==typeof r?e(r):r,c=a.geometry?[a.geometry]:[],f=await i(c,null,{signal:l.signal}),d=f?.[0];null!=d&&((a=a.clone()).geometry=d);const p=o({...m.query,f:u,...s,...y(a,s)});return t(n(m.path,g(a,s)?\"query3d\":\"query\"),{...l,responseType:\"pbf\"===u?\"array-buffer\":\"json\",query:{...p,...l.query}})}function g(t,e){return null!=t.formatOf3DObjects&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}export{m as encodeGeometry,c as executeQuery,S as executeQueryForCount,x as executeQueryForExtent,p as executeQueryForIds,f as executeQueryPBF,d as executeQueryPBFBuffer,y as queryToQueryStringParameters,E as runQuery};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getGeometryZScaler as e}from\"../../../geometry/support/zscale.js\";function t(t,o,r){if(!r?.features||!r.hasZ)return;const f=e(r.geometryType,o,t.outSpatialReference);if(null!=f)for(const e of r.features)f(e.geometry)}export{t as applyFeatureSetZUnitScaling};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../geometry.js\";import r from\"../../Graphic.js\";import{JSONMap as o}from\"../../core/jsonMap.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{clone as n}from\"../../core/lang.js\";import{property as i}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import m from\"../../geometry/SpatialReference.js\";import{fromJSON as c,isPolygon as f}from\"../../geometry/support/jsonUtils.js\";import u from\"../../layers/support/Field.js\";var y;const h=new o({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let g=y=class extends s{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const o=m.fromJSON(t.spatialReference),s=[];for(let n=0;n<e.length;n++){const t=e[n],i=r.fromJSON(t),l=t.geometry?.spatialReference;null==i.geometry||l||(i.geometry.spatialReference=o);const a=t.aggregateGeometries,p=i.aggregateGeometries;if(a&&null!=p)for(const e in p){const t=p[e],r=a[e],s=r?.spatialReference;null==t||s||(t.spatialReference=o)}s.push(i)}return s}writeGeometryType(e,t,r,o){if(e)return void h.write(e,t,r,o);const{features:s}=this;if(s)for(const n of s)if(null!=n?.geometry)return void h.write(n.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=c(e);return o&&!r&&t.spatialReference&&(o.spatialReference=m.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&null!=o.geometry&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new y(this.cloneProperties())}cloneProperties(){return n({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e?.[r];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,n=e=>Math.round((e-o)/t),i=e=>Math.round((s-e)/r),l=this.features,a=this._getQuantizationFunction(this.geometryType,n,i);for(let p=0,m=l.length;p<m;p++)a?.(l[p].geometry)||(l.splice(p,1),p--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[n,i]}=r,l=e=>e*n+o,a=e=>s-e*i;let p=null,m=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;p=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;m=r=>null==r?r:r*t+e}const c=this._getHydrationFunction(e,l,a,p,m);for(const{geometry:f}of t)null!=f&&c&&c(f);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const n=[];for(let i=0,l=e.length;i<l;i++){const l=e[i];if(i>0){const e=t(l[0]),i=r(l[1]);e===o&&i===s||(n.push([e-o,i-s]),o=e,s=i)}else o=t(l[0]),s=r(l[1]),n.push([o,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=f(e)?e.rings:e.paths,s=[];for(let n=0,i=o.length;n<i;n++){const e=o[n],i=this._quantizePoints(e,t,r);i&&s.push(i)}return s.length>0?(f(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r,o,s){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y),o&&(e.z=o(e.z))}:\"polyline\"===e||\"polygon\"===e?e=>{const n=f(e)?e.rings:e.paths;let i,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];for(let o=0,s=e.length;o<s;o++){const s=e[o];o>0?(i+=s[0],l+=s[1]):(i=s[0],l=s[1]),s[0]=t(i),s[1]=r(l)}}if(o&&s)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2]),r[3]=s(r[3])}}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2])}}else if(s)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=s(r[2])}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),s&&null!=e.mmax&&null!=e.mmin&&(e.mmax=s(e.mmax),e.mmin=s(e.mmin))}:\"multipoint\"===e?e=>{const n=e.points;let i,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];o>0?(i+=e[0],l+=e[1]):(i=e[0],l=e[1]),e[0]=t(i),e[1]=r(l)}if(o&&s)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2]),e[3]=s(e[3])}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2])}else if(s)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=s(e[2])}}:null}};e([i({type:String,json:{write:!0}})],g.prototype,\"displayFieldName\",void 0),e([i({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,\"exceededTransferLimit\",void 0),e([i({type:[r],json:{write:!0}})],g.prototype,\"features\",void 0),e([l(\"features\")],g.prototype,\"readFeatures\",null),e([i({type:[u],json:{write:!0}})],g.prototype,\"fields\",void 0),e([i({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:h.read}}})],g.prototype,\"geometryType\",void 0),e([p(\"geometryType\")],g.prototype,\"writeGeometryType\",null),e([i({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,\"hasM\",void 0),e([i({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],g.prototype,\"hasZ\",void 0),e([i({types:t,json:{write:!0}})],g.prototype,\"queryGeometry\",void 0),e([l(\"queryGeometry\")],g.prototype,\"readQueryGeometry\",null),e([i({type:m,json:{write:!0}})],g.prototype,\"spatialReference\",void 0),e([p(\"spatialReference\")],g.prototype,\"writeSpatialReference\",null),e([i({json:{write:!0}})],g.prototype,\"transform\",void 0),g=y=e([a(\"esri.rest.support.FeatureSet\")],g),g.prototype.toJSON.isDefaultToJSON=!0;const d=g;export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport r from\"../config.js\";import{id as t}from\"../kernel.js\";import{clone as o}from\"../core/lang.js\";import{urlToObject as n}from\"../core/urlUtils.js\";import{isApiKeyApplicable as e}from\"../support/apiKeyUtils.js\";function i(r,t){return t?{...t,query:{...r??{},...t.query}}:{query:r}}function f(r){return\"string\"==typeof r?n(r):o(r)}function s(r,t,o){const n={};for(const e in r){if(\"declaredClass\"===e)continue;const i=r[e];if(null!=i&&\"function\"!=typeof i)if(Array.isArray(i))n[e]=i.map((r=>s(r)));else if(\"object\"==typeof i)if(i.toJSON){const r=i.toJSON(o?.[e]);n[e]=t?r:JSON.stringify(r)}else n[e]=t?i:JSON.stringify(i);else n[e]=i}return n}function u(o,n){return o?e(o,n)?n||r.apiKey:t?.findCredential(o)?.token:null}export{i as asValidOptions,s as encode,u as getToken,f as parseUrl};\n"],"names":[],"sourceRoot":""}