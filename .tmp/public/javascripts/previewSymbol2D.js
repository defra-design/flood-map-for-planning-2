"use strict";
(self["webpackChunkdefra"] = self["webpackChunkdefra"] || []).push([["previewSymbol2D"],{

/***/ "./node_modules/@arcgis/core/core/fontUtils.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/core/fontUtils.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearFonts: function() { return /* binding */ a; },
/* harmony export */   defaultFontFamily: function() { return /* binding */ t; },
/* harmony export */   getFontFamily: function() { return /* binding */ u; },
/* harmony export */   getFullyQualifiedFontName: function() { return /* binding */ f; },
/* harmony export */   isCachedFontFace: function() { return /* binding */ i; },
/* harmony export */   loadFont: function() { return /* binding */ c; }
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config.js */ "./node_modules/@arcgis/core/config.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const t="arial-unicode-ms",n="woff2",r=new Map,o=new Set;class s{constructor(e,t){this.fontFace=e,this.promise=t}}async function c(t){const c=l(t),a=f(t),i=r.get(c);if(i)return i.promise;const u=new FontFace(t.family,`url('${_config_js__WEBPACK_IMPORTED_MODULE_0__["default"].fontsUrl}/woff2/${a}.${n}') format('${n}')`,{style:t.style,weight:t.weight}),d=document.fonts;if(d.has(u)&&"loading"===u.status)return u.loaded;const h=u.load().then((()=>(d.add(u),u)));return r.set(c,new s(u,h)),o.add(u),h}function a(){const e=document.fonts;r.forEach((t=>{e.delete(t.fontFace)})),r.clear(),o.clear()}function i(e){return o.has(e)}function u(e){if(!e)return t;const n=e.toLowerCase().split(" ").join("-");switch(n){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return n}}function f(e){const t=d(e)+h(e);return u(e.family)+(t.length>0?t:"-regular")}function l(e){const n=d(e)+h(e);return(e.family||t)+(n.length>0?n:"-regular")}function d(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function h(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/previewSymbol2D.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/previewSymbol2D.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getContrastingBackgroundTheme: function() { return /* binding */ A; },
/* harmony export */   getRenderSymbolParameters: function() { return /* binding */ D; },
/* harmony export */   previewSymbol2D: function() { return /* binding */ Z; }
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../Color.js */ "./node_modules/@arcgis/core/Color.js");
/* harmony import */ var _core_colorUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/colorUtils.js */ "./node_modules/@arcgis/core/core/colorUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_fontUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/fontUtils.js */ "./node_modules/@arcgis/core/core/fontUtils.js");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./gfxUtils.js */ "./node_modules/@arcgis/core/symbols/support/gfxUtils.js");
/* harmony import */ var _previewUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./previewUtils.js */ "./node_modules/@arcgis/core/symbols/support/previewUtils.js");
/* harmony import */ var _renderUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./renderUtils.js */ "./node_modules/@arcgis/core/symbols/support/renderUtils.js");
/* harmony import */ var _textUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./textUtils.js */ "./node_modules/@arcgis/core/symbols/support/textUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const d="picture-fill",f="picture-marker",y="simple-fill",g="simple-line",w="simple-marker",v="text",x="Aa",b=_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.SymbolSizeDefaults.size,M=_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.SymbolSizeDefaults.maxSize,k=_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.SymbolSizeDefaults.maxOutlineSize,L=_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.SymbolSizeDefaults.lineWidth,z=225,j=document.createElement("canvas");function C(e,t){const a=j.getContext("2d"),o=[];t&&(t.weight&&o.push(t.weight),t.size&&o.push(t.size+"px"),t.family&&o.push(t.family)),a.font=o.join(" ");const{width:i,actualBoundingBoxLeft:l,actualBoundingBoxRight:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:r}=a.measureText(e);return{width:Math.ceil(Math.max(i,l+n)),height:Math.ceil(s+r),x:Math.floor(l),y:Math.floor((s-r)/2)}}function S(e){const t=e?.size;return{width:null!=t&&"object"==typeof t&&"width"in t?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(t.width):null,height:null!=t&&"object"==typeof t&&"height"in t?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(t.height):null}}async function B(e,t){const a=t.fill,o=e.color;if("pattern"===a?.type&&o&&e.type!==d){const e=await (0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__.getPatternUrlWithColor)(a.src,o.toCss(!0));a.src=e,t.fill=a}}async function U(e,t,a,i){if(!("font"in e)||!e.font||"text"!==t.shape.type)return;try{await (0,_core_fontUtils_js__WEBPACK_IMPORTED_MODULE_3__.loadFont)(e.font)}catch{}const{width:l,height:n}=S(i);if(!/[\uE600-\uE6FF]/.test(t.shape.text)){const{width:o,height:s,x:r,y:c}=C(t.shape.text,{weight:t.font?.weight,size:t.font?.size,family:t.font?.family});a[0]=l??o,a[1]=n??s,t.shape.x=r,t.shape.y=c;let h="angle"in e?e.angle:null;if(null!=i?.rotation&&(h=(h??0)+i.rotation),h){const e=h*(Math.PI/180),t=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));a[1]=a[0]*t+a[1]*o}}}function E(e,t,a,o,l){if(null!=e.haloColor&&null!=e.haloSize){l.masking??=a.map((()=>[]));const n=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(e.haloSize);o[0]+=n,o[1]+=n,a.unshift([{...t,fill:null,stroke:{color:e.haloColor,width:2*n,join:"round",cap:"round"}}]),l.masking.unshift([{shape:{type:"rect",x:0,y:0,width:o[0]+2*_textUtils_js__WEBPACK_IMPORTED_MODULE_8__.backgroundPadding,height:o[1]+2*_textUtils_js__WEBPACK_IMPORTED_MODULE_8__.backgroundPadding},fill:[255,255,255],stroke:null},{...t,fill:[0,0,0,0],stroke:null}])}null==e.backgroundColor&&null==e.borderLineColor||(o[0]+=2*_textUtils_js__WEBPACK_IMPORTED_MODULE_8__.backgroundPadding,o[1]+=2*_textUtils_js__WEBPACK_IMPORTED_MODULE_8__.backgroundPadding,a.unshift([{shape:{type:"rect",x:0,y:0,width:o[0],height:o[1]},fill:e.backgroundColor,stroke:{color:e.borderLineColor,width:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(e.borderLineSize)}}]),l.masking?.unshift([]))}function F(e,t){return e>t?"dark":"light"}function D(e,t){const a="number"==typeof t?.size?t?.size:null,o=null!=a?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(a):null,r=null!=t?.maxSize?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(t.maxSize):null;let c="angle"in e?e.angle:null;null!=t?.rotation&&(c=(c??0)+t.rotation);const u=(0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__.getFill)(e);let m=(0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__.getStroke)(e);"dark"!==A(e,245)||t?.ignoreWhiteSymbols||(m={width:.75,...m,color:"#bdc3c7"});const p={shape:null,fill:u,stroke:m,offset:[0,0]};m?.width&&(m.width=Math.min(m.width,k));const z=m?.width||0;let j=null!=t?.size&&(null==t?.scale||t?.scale),B=0,U=0,E=!1;switch(e.type){case w:{const a=e.style,{width:l,height:n}=S(t),s=l===n&&null!=l?l:null!=o?o:Math.min((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(e.size),r||M);switch(B=s,U=s,a){case"circle":p.shape={type:"circle",cx:0,cy:0,r:.5*s},j||(B+=z,U+=z);break;case"cross":p.shape={type:"path",path:[{command:"M",values:[0,.5*U]},{command:"L",values:[B,.5*U]},{command:"M",values:[.5*B,0]},{command:"L",values:[.5*B,U]}]};break;case"diamond":p.shape={type:"path",path:[{command:"M",values:[0,.5*U]},{command:"L",values:[.5*B,0]},{command:"L",values:[B,.5*U]},{command:"L",values:[.5*B,U]},{command:"Z",values:[]}]},j||(B+=z,U+=z);break;case"square":p.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[B,U]},{command:"L",values:[0,U]},{command:"Z",values:[]}]},j||(B+=z,U+=z),c&&(E=!0);break;case"triangle":p.shape={type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,U]},{command:"L",values:[0,U]},{command:"Z",values:[]}]},j||(B+=z,U+=z),c&&(E=!0);break;case"x":p.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,U]},{command:"M",values:[B,0]},{command:"L",values:[0,U]}]},c&&(E=!0);break;case"path":p.shape={type:"path",path:e.path||""},j||(B+=z,U+=z),c&&(E=!0),j=!0}break}case g:{const{width:e,height:a}=S(t),i=(0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__.getDashArray)(m).reduce(((e,t)=>e+t),0),l=i&&Math.ceil(L/i),n=a??o??z,r=e??(i*l||L);m&&(m.width=n),B=r,U=n,j=!0,p.shape={type:"path",path:[{command:"M",values:[n/2,U/2]},{command:"L",values:[B-n/2,U/2]}]};break}case d:case y:{const e="object"==typeof t?.symbolConfig&&!!t?.symbolConfig?.isSquareFill,{width:a,height:i}=S(t);B=!e&&a!==i||null==a?null!=o?o:b:a,U=!e&&a!==i||null==i?B:i,j||(B+=z,U+=z),j=!0,p.shape=e?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[B,U]},{command:"L",values:[0,U]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.shapes.fill[0];break}case f:{const a=Math.min((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(e.width),r||M),l=Math.min((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(e.height),r||M),{width:n,height:s}=S(t),h=n===s&&null!=n?n:null!=o?o:Math.max(a,l),u=a/l;B=u<=1?Math.ceil(h*u):h,U=u<=1?h:Math.ceil(h/u),p.shape={type:"image",x:-Math.round(B/2),y:-Math.round(U/2),width:B,height:U,src:e.url||""},c&&(E=!0);break}case v:{const a=e,l=t?.overrideText||a.text||x,n=a.font,{width:s,height:c}=S(t),h=null!=c?c:null!=o?o:Math.min((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__.pt2px)(n.size),r||M),{width:u,height:m}=C(l,{weight:n.weight,size:h,family:n.family}),d=/[\uE600-\uE6FF]/.test(l);B=s??(d?h:u),U=d?h:m;let f=.5*(d?h:m);d&&(f+=5),p.shape={type:"text",text:l,x:a.xoffset||0,y:a.yoffset||f,align:"middle",alignBaseline:a.verticalAlignment,decoration:n&&n.decoration,rotated:a.rotated,kerning:a.kerning},p.font=n&&{size:h,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}return{shapeDescriptor:p,size:[B,U],renderOptions:{node:t?.node,scale:j,opacity:t?.opacity,rotations:[c],useRotationSize:E,effectView:t?.effectView,ariaLabel:t?.ariaLabel}}}async function Z(e,t){const{shapeDescriptor:o,size:i,renderOptions:l}=D(e,t);if(!o.shape)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("symbolPreview: renderPreviewHTML2D","symbol not supported.");await B(e,o),await U(e,o,i,t);const n=[[o]];if("object"==typeof t?.symbolConfig&&t?.symbolConfig?.applyColorModulation){const e=.6*i[0];n.unshift([{...o,offset:[-e,0],fill:(0,_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.adjustColorBrightness)(o.fill,-.3)}]),n.push([{...o,offset:[e,0],fill:(0,_previewUtils_js__WEBPACK_IMPORTED_MODULE_6__.adjustColorBrightness)(o.fill,.3)}]),i[0]+=2*e,l.scale=!1}return"text"===e.type&&E(e,o,n,i,l),(0,_renderUtils_js__WEBPACK_IMPORTED_MODULE_7__.renderSymbol)(n,i,l)}function A(a,o=z){const i=(0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__.getFill)(a),s=(0,_gfxUtils_js__WEBPACK_IMPORTED_MODULE_5__.getStroke)(a),r=!i||"type"in i?null:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](i),c=s?.color?new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](s?.color):null,h=r?F((0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_1__.getColorLuminance)(r),o):null,u=c?F((0,_core_colorUtils_js__WEBPACK_IMPORTED_MODULE_1__.getColorLuminance)(c),o):null;return u?h?h===u?h:o>=z?"light":"dark":u:h}


/***/ })

}]);
//# sourceMappingURL=previewSymbol2D.js.map