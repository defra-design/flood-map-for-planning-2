"use strict";(self.webpackChunkdefra=self.webpackChunkdefra||[]).push([[9722],{87725:function(t,e,n){function r(){return[1,0,0,0,1,0,0,0,1]}function o(t,e,n,r,o,i,s,a,u){return[t,e,n,r,o,i,s,a,u]}n.d(e,{fA:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:r,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},39714:function(t,e,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,e,n,r,o,i,s,a,u,c,l,f,d,h,p,b){return[t,e,n,r,o,i,s,a,u,c,l,f,d,h,p,b]}n.d(e,{fA:function(){return i},o8:function(){return o},vt:function(){return r},zK:function(){return s}});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,createView:function(t,e){return new Float64Array(t,e,16)},fromValues:i},Symbol.toStringTag,{value:"Module"}))},61769:function(t,e,n){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}n.d(e,{o8:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,fromValues:function(t,e,n,r){return[t,e,n,r]}},Symbol.toStringTag,{value:"Module"}))},43274:function(t,e,n){function r(){return new Float32Array(3)}function o(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function i(t,e,n){const r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=n,r}function s(){return r()}function a(){return i(1,1,1)}function u(){return i(1,0,0)}function c(){return i(0,1,0)}function l(){return i(0,0,1)}n.d(e,{fA:function(){return i},o8:function(){return o},vt:function(){return r}});const f=s(),d=a(),h=u(),p=c(),b=l();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:h,UNIT_Y:p,UNIT_Z:b,ZEROS:f,clone:o,create:r,createView:function(t,e){return new Float32Array(t,e,3)},fromValues:i,ones:a,unitX:u,unitY:c,unitZ:l,zeros:s},Symbol.toStringTag,{value:"Module"}))},32237:function(t,e,n){n.d(e,{A6:function(){return y},B8:function(){return h},Xd:function(){return l},Xr:function(){return p},Yc:function(){return P},hZ:function(){return m},lw:function(){return f},t2:function(){return E},x8:function(){return c}});var r=n(87725),o=n(61769),i=n(32501),s=n(8527),a=n(20551),u=n(33400);function c(t,e,n){n*=.5;const r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function l(t,e){const n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>(0,s.FD)()?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function f(t,e,n){const r=e[0],o=e[1],i=e[2],s=e[3],a=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+s*a+o*c-i*u,t[1]=o*l+s*u+i*a-r*c,t[2]=i*l+s*c+r*u-o*a,t[3]=s*l-r*a-o*u-i*c,t}function d(t,e,n,r){const o=e[0],i=e[1],a=e[2],u=e[3];let c,l,f,d,h,p=n[0],b=n[1],y=n[2],g=n[3];return l=o*p+i*b+a*y+u*g,l<0&&(l=-l,p=-p,b=-b,y=-y,g=-g),1-l>(0,s.FD)()?(c=Math.acos(l),f=Math.sin(c),d=Math.sin((1-r)*c)/f,h=Math.sin(r*c)/f):(d=1-r,h=r),t[0]=d*o+h*p,t[1]=d*i+h*b,t[2]=d*a+h*y,t[3]=d*u+h*g,t}function h(t,e){const n=e[0],r=e[1],o=e[2],i=e[3],s=n*n+r*r+o*o+i*i,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-o*a,t[3]=i*a,t}function p(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function b(t,e){const n=e[0]+e[4]+e[8];let r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const o=(n+1)%3,i=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*o+o]-e[3*i+i]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+n]+e[3*n+o])*r,t[i]=(e[3*i+n]+e[3*n+i])*r}return t}function y(t,e,n,r){const o=.5*Math.PI/180;e*=o,n*=o,r*=o;const i=Math.sin(e),s=Math.cos(e),a=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=i*u*l-s*a*c,t[1]=s*a*l+i*u*c,t[2]=s*u*c-i*a*l,t[3]=s*u*l+i*a*c,t}const g=u.c,m=u.s,v=u.g,A=f,w=u.d,M=u.h,I=u.l,_=u.j,T=_,S=u.b,C=S,O=u.n,E=u.a,N=u.e;function P(t,e,n){const r=(0,a.f)(e,n);return r<-.999999?((0,a.e)(U,z,e),(0,a.G)(U)<1e-6&&(0,a.e)(U,R,e),(0,a.n)(U,U),c(t,U,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,a.e)(U,e,n),t[0]=U[0],t[1]=U[1],t[2]=U[2],t[3]=1+r,O(t,t))}const U=(0,i.vt)(),z=(0,i.fA)(1,0,0),R=(0,i.fA)(0,1,0),j=(0,o.vt)(),V=(0,o.vt)(),x=(0,r.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:v,calculateW:function(t,e){const n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},conjugate:p,copy:g,dot:M,equals:N,exactEquals:E,fromEuler:y,fromMat3:b,getAxisAngle:l,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},invert:h,len:T,length:_,lerp:I,mul:A,multiply:f,normalize:O,random:function(t){const e=s.Ov,n=e(),r=e(),o=e(),i=Math.sqrt(1-n),a=Math.sqrt(n);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*o),t[3]=a*Math.cos(2*Math.PI*o),t},rotateX:function(t,e,n){n*=.5;const r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*a,t[1]=o*u+i*a,t[2]=i*u-o*a,t[3]=s*u-r*a,t},rotateY:function(t,e,n){n*=.5;const r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*a,t[1]=o*u+s*a,t[2]=i*u+r*a,t[3]=s*u-o*a,t},rotateZ:function(t,e,n){n*=.5;const r=e[0],o=e[1],i=e[2],s=e[3],a=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*a,t[1]=o*u-r*a,t[2]=i*u+s*a,t[3]=s*u-i*a,t},rotationTo:P,scale:w,set:m,setAxes:function(t,e,n,r){const o=x;return o[0]=n[0],o[3]=n[1],o[6]=n[2],o[1]=r[0],o[4]=r[1],o[7]=r[2],o[2]=-e[0],o[5]=-e[1],o[8]=-e[2],O(t,b(t,o))},setAxisAngle:c,slerp:d,sqlerp:function(t,e,n,r,o,i){return d(j,e,o,i),d(V,n,r,i),d(t,j,V,2*i*(1-i)),t},sqrLen:C,squaredLength:S,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}},Symbol.toStringTag,{value:"Module"}))},7456:function(t,e,n){n.d(e,{l:function(){return c}});var r=n(15774),o=n(73364),i=n(32501),s=n(46098),a=n(61441),u=n(57652);function c(t,e,n,r){if(null==t||null==r)return!1;const i=(0,a.Qk)(t,a.Wv),c=(0,a.Qk)(r,a.zp);if(i===c&&!l(c)&&(i!==a.rz.UNKNOWN||(0,u.aI)(t,r)))return(0,o.kN)(n,e),!0;if(l(c)){const t=a.w5[i][a.rz.LON_LAT],r=a.w5[a.rz.LON_LAT][c];return null!=t&&null!=r&&(t(e,0,d,0),r(d,0,h,0),(0,s.z)(f*d[0],f*d[1],n),n[12]=h[0],n[13]=h[1],n[14]=h[2],!0)}const p=l(i);if((c===a.rz.WEB_MERCATOR||c===a.rz.PLATE_CARREE||c===a.rz.WGS84||c===a.rz.CGCS2000)&&(i===a.rz.WGS84||p||i===a.rz.WEB_MERCATOR||i===a.rz.CGCS2000)){const t=a.w5[i][a.rz.LON_LAT],r=a.w5[a.rz.LON_LAT][c];return null!=t&&null!=r&&(t(e,0,d,0),r(d,0,h,0),p?(0,s.Z)(f*d[0],f*d[1],n):(0,o.D_)(n),n[12]=h[0],n[13]=h[1],n[14]=h[2],!0)}return!1}function l(t){return t===a.rz.SPHERICAL_ECEF||t===a.rz.SPHERICAL_MARS_PCPF||t===a.rz.SPHERICAL_MOON_PCPF||t===a.rz.WGS84_ECEF}const f=(0,r.kU)(1),d=(0,i.vt)(),h=(0,i.vt)()},46098:function(t,e,n){n.d(e,{Z:function(){return i},z:function(){return o}});var r=n(73364);function o(t,e,n){const r=Math.sin(t),o=Math.cos(t),i=Math.sin(e),s=Math.cos(e),a=n;return a[0]=-r,a[4]=-i*o,a[8]=s*o,a[12]=0,a[1]=o,a[5]=-i*r,a[9]=s*r,a[13]=0,a[2]=0,a[6]=s,a[10]=i,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function i(t,e,n){return o(t,e,n),(0,r.mg)(n,n),n}},96611:function(t,e,n){n.d(e,{Y0:function(){return c},lO:function(){return l}});var r=n(61714),o=n(57165),i=n(57652);const s=new o.A(r.fv),a=new o.A(r.FY),u=new o.A(r.LJ),c=new o.A(r.Ro);function l(t){const e=f.get(t);if(e)return e;let n=s;if(t)if(t===a)n=a;else if(t===u)n=u;else{const e=t.wkid,r=t.latestWkid;if(null!=e||null!=r)(0,i.tl)(e)||(0,i.tl)(r)?n=a:((0,i.ZL)(e)||(0,i.ZL)(r))&&(n=u);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===d?n=a:t===h&&(n=u)}}}return f.set(t,n),n}const f=new Map,d=a.wkt.toUpperCase(),h=u.wkt.toUpperCase()},5596:function(t,e,n){n.d(e,{C:function(){return f},Cr:function(){return b},Io:function(){return j},LV:function(){return l},O_:function(){return p},Qj:function(){return d},T7:function(){return E},Tj:function(){return P},U5:function(){return C},Ui:function(){return O},Z1:function(){return R},_I:function(){return z},b6:function(){return U},ci:function(){return g},fA:function(){return h},gv:function(){return N},lU:function(){return y},mN:function(){return V},mP:function(){return _},mR:function(){return S},vt:function(){return c},ze:function(){return T}});var r=n(15774),o=n(20551),i=n(32501),s=(n(33400),n(29531)),a=n(50973),u=n(76185);function c(t=B){return[t[0],t[1],t[2],t[3]]}function l(t=B[0],e=B[1],n=B[2],r=B[3]){return h(t,e,n,r,a.Km.get())}function f(t,e){return h(e[0],e[1],e[2],e[3],t)}function d(t){return t}function h(t,e,n,r,o=c()){return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o}function p(t,e,n){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function b(t,e,n,r=c()){const o=n[0]-e[0],i=n[1]-e[1],s=n[2]-e[2],a=t[0]-e[0],u=t[1]-e[1],l=t[2]-e[2],f=i*l-s*u,d=s*a-o*l,h=o*u-i*a,p=f*f+d*d+h*h,b=Math.abs(p-1)>1e-5&&p>1e-12?1/Math.sqrt(p):1;return r[0]=f*b,r[1]=d*b,r[2]=h*b,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function y(t,e,n,r=0,i=Math.floor(n*(1/3)),s=Math.floor(n*(2/3))){if(n<3)return!1;e(v,r);let a=i,u=!1;for(;a<n-1&&!u;)e(A,a),a++,u=!(0,o.p)(v,A);if(!u)return!1;for(a=Math.max(a,s),u=!1;a<n&&!u;)e(w,a),a++,(0,o.d)(M,v,A),(0,o.n)(M,M),(0,o.d)(I,A,w),(0,o.n)(I,I),u=!(0,o.p)(v,w)&&!(0,o.p)(A,w)&&Math.abs((0,o.f)(M,I))<m;return u?(b(v,A,w,t),!0):(0!==r||1!==i||2!==s)&&y(t,e,n,0,1,2)}function g(t,e,n=!0){const r=e.length/3;return y(t,((t,n)=>(0,o.i)(t,e[3*n+0],e[3*n+1],e[3*n+2])),n?r-1:r)}const m=.99619469809,v=(0,i.vt)(),A=(0,i.vt)(),w=(0,i.vt)(),M=(0,i.vt)(),I=(0,i.vt)();function _(t,e,n){return e!==t&&f(t,e),t[3]=-(0,o.f)(t,n),t}function T(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function S(t,e,n,r){return(0,o.e)(w,e,t),p(n,w,r)}function C(t,e,n,r){return D(L(t,e,(0,o.d)(a.rq.get(),n,e),q,r))}function O(t,e,n){return null!=e&&D(L(t,e.origin,e.direction,k,n))}function E(t,e,n){return D(L(t,e.origin,e.vector,Z.NONE,n))}function N(t,e,n){return D(L(t,e.origin,e.vector,Z.CLAMP,n))}function P(t,e){return V(t,e)>=0}function U(t,e){const n=(0,o.f)(t,e.ray.direction),r=-V(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const i=r/n;return n>0?i<e.c1&&(e.c1=i):i>e.c0&&(e.c0=i),e.c0<=e.c1}function z(t,e,n){const r=(0,o.h)(a.rq.get(),t,-t[3]),i=function(t,e,n){const r=(0,o.h)(a.rq.get(),t,(0,o.f)(t,e));return(0,o.d)(n,e,r),n}(t,(0,o.d)(a.rq.get(),e,r),a.rq.get());return(0,o.g)(n,i,r),n}function R(t,e,n,r){const i=t,c=a.rq.get(),l=a.rq.get();(0,u.VV)(i,c,l);const f=(0,o.d)(a.rq.get(),n,e),d=(0,s.gr)(c,f),h=(0,s.gr)(l,f),p=(0,s.gr)(i,f);return(0,o.i)(r,d,h,p)}function j(t,e){return Math.abs(V(t,e))}function V(t,e){return(0,o.f)(t,e)+t[3]}var x,F;function D(t){return t===x.INTERSECTS_INSIDE_OUT||t===x.INTERSECTS_OUTSIDE_IN}function L(t,e,n,i,s){const a=(0,o.f)(t,n),u=V(t,e);if(0===a)return u>=0?x.INSIDE:x.OUTSIDE;let c=-u/a;return i&Z.CLAMP&&(c=(0,r.qE)(c,0,1)),!(i&Z.INFINITE_MIN)&&c<0||!(i&Z.INFINITE_MAX)&&c>1?u>=0?x.INSIDE:x.OUTSIDE:((0,o.g)(s,e,(0,o.h)(s,n,c)),u>=0?x.INTERSECTS_INSIDE_OUT:x.INTERSECTS_OUTSIDE_IN)}(F=x||(x={}))[F.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",F[F.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",F[F.INSIDE=2]="INSIDE",F[F.OUTSIDE=3]="OUTSIDE";const B=[0,0,1,0];var Z;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(Z||(Z={}));const q=Z.INFINITE_MIN|Z.INFINITE_MAX,k=Z.INFINITE_MAX},29531:function(t,e,n){n.d(e,{EJ:function(){return c},_I:function(){return s},g7:function(){return u},gr:function(){return a}});var r=n(15774),o=n(20551),i=n(32501);function s(t,e,n){const r=(0,o.f)(t,e)/(0,o.f)(t,t);return(0,o.h)(n,t,r)}function a(t,e){return(0,o.f)(t,e)/(0,o.l)(t)}function u(t,e){const n=(0,o.f)(t,e)/((0,o.l)(t)*(0,o.l)(e));return-(0,r.XM)(n)}function c(t,e,n){(0,o.n)(l,t),(0,o.n)(f,e);const i=(0,o.f)(l,f),s=(0,r.XM)(i),a=(0,o.e)(l,l,f);return(0,o.f)(a,n)<0?2*Math.PI-s:s}const l=(0,i.vt)(),f=(0,i.vt)()},50973:function(t,e,n){n.d(e,{Rc:function(){return p},J8:function(){return b},oG:function(){return f},rq:function(){return d},Km:function(){return h}}),n(58941);var r=n(29601),o=n(87725),i=n(39714),s=n(61769),a=n(1932),u=n(32501),c=n(41546);class l{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new l(a.vt)}static createVec3f64(){return new l(u.vt)}static createVec4f64(){return new l(c.vt)}static createMat3f64(){return new l(o.vt)}static createMat4f64(){return new l(i.vt)}static createQuatf64(){return new l(s.vt)}get test(){}}const f=l.createVec2f64(),d=l.createVec3f64(),h=l.createVec4f64(),p=(l.createMat3f64(),l.createMat4f64()),b=l.createQuatf64()},33746:function(t,e,n){n.d(e,{A:function(){return m}});var r,o=n(53804),i=n(21609),s=n(23502),a=(n(58941),n(40633),n(74376)),u=n(65953),c=n(39319),l=n(16986),f=n(52874),d=n(30905),h=n(67888);let p=r=class extends d.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new r({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:(0,i.o8)(this.color)})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,o._)([(0,s.MZ)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],p.prototype,"minValue",void 0),(0,o._)([(0,s.MZ)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],p.prototype,"maxValue",void 0),(0,o._)([(0,s.MZ)({type:f.A,json:{type:[h.jz],write:!0}})],p.prototype,"color",void 0),p=r=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],p);const b=p;var y;let g=y=class extends c.A{constructor(t){super(t),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new y({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:(0,i.o8)(this.colorClassBreakInfos),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],g.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],g.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:l.A,json:{write:!0}})],g.prototype,"legendOptions",void 0),(0,o._)([(0,s.MZ)({type:c.A.fieldTransformTypeKebabDict.apiValues,json:{type:c.A.fieldTransformTypeKebabDict.jsonValues,read:c.A.fieldTransformTypeKebabDict.read,write:c.A.fieldTransformTypeKebabDict.write}})],g.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[b],json:{write:!0}})],g.prototype,"colorClassBreakInfos",void 0),g=y=(0,o._)([(0,u.$)("esri.renderers.PointCloudClassBreaksRenderer")],g);const m=g},39319:function(t,e,n){n.d(e,{A:function(){return _}});var r,o=n(53804),i=n(73037),s=n(30905),a=n(21609),u=n(23502),c=(n(58941),n(40633),n(65953));n(13798);let l=r=class extends s.oY{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new r({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};(0,o._)([(0,u.MZ)({type:String,json:{write:!0}})],l.prototype,"field",void 0),(0,o._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"minValue",void 0),(0,o._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],l.prototype,"maxValue",void 0),l=r=(0,o._)([(0,c.$)("esri.renderers.support.pointCloud.ColorModulation")],l);const f=l,d=new i.J({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let h=class extends s.oY{};(0,o._)([(0,u.MZ)({type:d.apiValues,readOnly:!0,nonNullable:!0,json:{type:d.jsonValues,read:!1,write:d.write}})],h.prototype,"type",void 0),h=(0,o._)([(0,c.$)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],h);const p=h;var b,y=n(74376);let g=b=class extends p{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new b({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};(0,o._)([(0,y.e)({pointCloudFixedSizeAlgorithm:"fixed-size"})],g.prototype,"type",void 0),(0,o._)([(0,u.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],g.prototype,"size",void 0),(0,o._)([(0,u.MZ)({type:Boolean,json:{write:!0}})],g.prototype,"useRealWorldSymbolSizes",void 0),g=b=(0,o._)([(0,c.$)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],g);const m=g;var v;let A=v=class extends p{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new v({scaleFactor:this.scaleFactor})}};(0,o._)([(0,y.e)({pointCloudSplatAlgorithm:"splat"})],A.prototype,"type",void 0),(0,o._)([(0,u.MZ)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],A.prototype,"scaleFactor",void 0),A=v=(0,o._)([(0,c.$)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],A);const w={key:"type",base:p,typeMap:{"fixed-size":m,splat:A}},M=(0,i.O)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let I=class extends s.oY{constructor(t){super(t),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:(0,a.o8)(this.pointSizeAlgorithm),colorModulation:(0,a.o8)(this.colorModulation),pointsPerInch:(0,a.o8)(this.pointsPerInch)}}};(0,o._)([(0,u.MZ)({type:M.apiValues,readOnly:!0,nonNullable:!0,json:{type:M.jsonValues,read:!1,write:M.write}})],I.prototype,"type",void 0),(0,o._)([(0,u.MZ)({types:w,json:{write:!0}})],I.prototype,"pointSizeAlgorithm",void 0),(0,o._)([(0,u.MZ)({type:f,json:{write:!0}})],I.prototype,"colorModulation",void 0),(0,o._)([(0,u.MZ)({json:{write:!0},nonNullable:!0,type:Number})],I.prototype,"pointsPerInch",void 0),I=(0,o._)([(0,c.$)("esri.renderers.PointCloudRenderer")],I),(I||(I={})).fieldTransformTypeKebabDict=new i.J({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"});const _=I},88509:function(t,e,n){n.d(e,{A:function(){return h}});var r,o=n(53804),i=n(21609),s=n(23502),a=(n(58941),n(40633),n(74376)),u=n(65953),c=n(39319),l=n(16986),f=n(71859);let d=r=class extends c.A{constructor(t){super(t),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new r({...this.cloneProperties(),field:(0,i.o8)(this.field),fieldTransformType:(0,i.o8)(this.fieldTransformType),stops:(0,i.o8)(this.stops),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudStretchRenderer:"point-cloud-stretch"})],d.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],d.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:l.A,json:{write:!0}})],d.prototype,"legendOptions",void 0),(0,o._)([(0,s.MZ)({type:c.A.fieldTransformTypeKebabDict.apiValues,json:{type:c.A.fieldTransformTypeKebabDict.jsonValues,read:c.A.fieldTransformTypeKebabDict.read,write:c.A.fieldTransformTypeKebabDict.write}})],d.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[f.A],json:{write:!0}})],d.prototype,"stops",void 0),d=r=(0,o._)([(0,u.$)("esri.renderers.PointCloudStretchRenderer")],d);const h=d},24904:function(t,e,n){n.d(e,{A:function(){return m}});var r,o=n(53804),i=n(21609),s=n(23502),a=(n(58941),n(40633),n(74376)),u=n(65953),c=n(39319),l=n(16986),f=n(52874),d=n(30905),h=n(67888);let p=r=class extends d.oY{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new r({description:this.description,label:this.label,values:(0,i.o8)(this.values),color:(0,i.o8)(this.color)})}};(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"description",void 0),(0,o._)([(0,s.MZ)({type:String,json:{write:!0}})],p.prototype,"label",void 0),(0,o._)([(0,s.MZ)({type:[String],json:{write:!0}})],p.prototype,"values",void 0),(0,o._)([(0,s.MZ)({type:f.A,json:{type:[h.jz],write:!0}})],p.prototype,"color",void 0),p=r=(0,o._)([(0,u.$)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],p);const b=p;var y;let g=y=class extends c.A{constructor(t){super(t),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new y({...this.cloneProperties(),field:(0,i.o8)(this.field),fieldTransformType:(0,i.o8)(this.fieldTransformType),colorUniqueValueInfos:(0,i.o8)(this.colorUniqueValueInfos),legendOptions:(0,i.o8)(this.legendOptions)})}};(0,o._)([(0,a.e)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],g.prototype,"type",void 0),(0,o._)([(0,s.MZ)({json:{write:!0},type:String})],g.prototype,"field",void 0),(0,o._)([(0,s.MZ)({type:c.A.fieldTransformTypeKebabDict.apiValues,json:{type:c.A.fieldTransformTypeKebabDict.jsonValues,read:c.A.fieldTransformTypeKebabDict.read,write:c.A.fieldTransformTypeKebabDict.write}})],g.prototype,"fieldTransformType",void 0),(0,o._)([(0,s.MZ)({type:[b],json:{write:!0}})],g.prototype,"colorUniqueValueInfos",void 0),(0,o._)([(0,s.MZ)({type:l.A,json:{write:!0}})],g.prototype,"legendOptions",void 0),g=y=(0,o._)([(0,u.$)("esri.renderers.PointCloudUniqueValueRenderer")],g);const m=g},16986:function(t,e,n){n.d(e,{A:function(){return d}});var r=n(53804),o=n(75743),i=n(73037),s=n(30905),a=n(23502),u=(n(58941),n(40633),n(13798),n(74376)),c=n(65953);const l=(0,i.O)()({ascendingValues:"ascending-values",descendingValues:"descending-values"});let f=class extends((0,o.O)(s.oY)){constructor(t){super(t),this.title=null,this.order=null}};(0,r._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"title",void 0),(0,r._)([(0,u.e)(l)],f.prototype,"order",void 0),f=(0,r._)([(0,c.$)("esri.renderers.support.RendererLegendOptions")],f);const d=f},71859:function(t,e,n){n.d(e,{A:function(){return d}});var r,o=n(53804),i=n(52874),s=n(30905),a=n(23502),u=n(67888),c=(n(13798),n(58941),n(65953)),l=n(81392);let f=r=class extends s.oY{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,n){e[n]=t??0}clone(){return new r({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,o._)([(0,a.MZ)({type:i.A,json:{type:[u.jz],write:!0}})],f.prototype,"color",void 0),(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],f.prototype,"label",void 0),(0,o._)([(0,a.MZ)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],f.prototype,"value",void 0),(0,o._)([(0,l.K)("value")],f.prototype,"writeValue",null),f=r=(0,o._)([(0,c.$)("esri.renderers.visualVariables.support.ColorStop")],f);const d=f},33764:function(t,e,n){n.r(e),n.d(e,{default:function(){return I}});var r=n(50659),o=n(24540),i=n(32237),s=n(61769),a=n(20551),u=n(43274),c=n(57165),l=n(57617),f=(n(58941),n(33746)),d=n(88509),h=n(24904),p=n(33188),b=n(40131);function y(t,e,n){return t?.attributeInfo.useElevation?e?function(t,e){const n=new Float64Array(e);for(let r=0;r<e;r++)n[r]=t[3*r+2];return n}(e,n):null:t?.attributeInfo.storageInfo?(0,p.m0)(t.attributeInfo.storageInfo,t.buffer,n):null}function g(t){switch(t){default:case null:case"none":return t=>t;case"low-four-bit":return t=>15&t;case"high-four-bit":return t=>(240&t)>>4;case"absolute-value":return t=>Math.abs(t);case"modulo-ten":return t=>t%10}}function m(t){let e=0;for(const n of t||[])e|=1<<n;return e}var v=n(89765);class A{transform(t){const e=this._transform(t),n=[e.points.buffer,e.rgb.buffer];null!=e.pointIdFilterMap&&n.push(e.pointIdFilterMap.buffer);for(const t of e.attributes)"buffer"in t.values&&(0,o.mw)(t.values.buffer)&&t.values.buffer!==e.rgb.buffer&&n.push(t.values.buffer);return Promise.resolve({result:e,transferList:n})}_transform(t){const e=function(t,e){if(null==t.encoding||""===t.encoding){const n=(0,p.wH)(e,t);if(null==n.vertexAttributes.position)return;const r=(0,p.MA)(e,n.vertexAttributes.position),o=n.header.fields,i=[o.offsetX,o.offsetY,o.offsetZ],s=[o.scaleX,o.scaleY,o.scaleZ],a=r.length/3,u=new Float64Array(3*a);for(let t=0;t<a;t++)u[3*t]=r[3*t]*s[0]+i[0],u[3*t+1]=r[3*t+1]*s[1]+i[1],u[3*t+2]=r[3*t+2]*s[2]+i[2];return u}if("lepcc-xyz"===t.encoding)return(0,b.Me)(e).result}(t.schema,t.geometryBuffer);let n=e.length/3,o=null;const i=new Array,s=y(t.primaryAttributeData,e,n);null!=t.primaryAttributeData&&s&&i.push({attributeInfo:t.primaryAttributeData.attributeInfo,values:s});const a=y(t.modulationAttributeData,e,n);null!=t.modulationAttributeData&&a&&i.push({attributeInfo:t.modulationAttributeData.attributeInfo,values:a});let u=function(t,e,n,r){const{rendererJSON:o,isRGBRenderer:i}=t;let s=null,a=null;if(e&&i)s=e;else if(e&&"pointCloudUniqueValueRenderer"===o?.type){a=h.A.fromJSON(o);const t=a.colorUniqueValueInfos;s=new Uint8Array(3*r);const n=g(a.fieldTransformType);for(let o=0;o<r;o++){const r=(n?n(e[o]):e[o])+"";for(let e=0;e<t.length;e++)if(t[e].values.includes(r)){s[3*o]=t[e].color.r,s[3*o+1]=t[e].color.g,s[3*o+2]=t[e].color.b;break}}}else if(e&&"pointCloudStretchRenderer"===o?.type){a=d.A.fromJSON(o);const t=a.stops;s=new Uint8Array(3*r);const n=g(a.fieldTransformType);for(let o=0;o<r;o++){const r=n?n(e[o]):e[o],i=t.length-1;if(r<t[0].value)s[3*o]=t[0].color.r,s[3*o+1]=t[0].color.g,s[3*o+2]=t[0].color.b;else if(r>=t[i].value)s[3*o]=t[i].color.r,s[3*o+1]=t[i].color.g,s[3*o+2]=t[i].color.b;else for(let e=1;e<t.length;e++)if(r<t[e].value){const n=(r-t[e-1].value)/(t[e].value-t[e-1].value);s[3*o]=t[e].color.r*n+t[e-1].color.r*(1-n),s[3*o+1]=t[e].color.g*n+t[e-1].color.g*(1-n),s[3*o+2]=t[e].color.b*n+t[e-1].color.b*(1-n);break}}}else if(e&&"pointCloudClassBreaksRenderer"===o?.type){a=f.A.fromJSON(o);const t=a.colorClassBreakInfos;s=new Uint8Array(3*r);const n=g(a.fieldTransformType);for(let o=0;o<r;o++){const r=n?n(e[o]):e[o];for(let e=0;e<t.length;e++)if(r>=t[e].minValue&&r<=t[e].maxValue){s[3*o]=t[e].color.r,s[3*o+1]=t[e].color.g,s[3*o+2]=t[e].color.b;break}}}else s=new Uint8Array(3*r).fill(255);if(n&&a?.colorModulation){const t=a.colorModulation.minValue,e=a.colorModulation.maxValue,o=.3;for(let i=0;i<r;i++){const r=n[i],a=r>=e?1:r<=t?o:o+(1-o)*(r-t)/(e-t);s[3*i]=a*s[3*i],s[3*i+1]=a*s[3*i+1],s[3*i+2]=a*s[3*i+2]}}return s}(t.rendererInfo,s,a,n);if(t.filterInfo&&t.filterInfo.length>0&&null!=t.filterAttributesData){const s=t.filterAttributesData.filter(r.Ru).map((t=>{const r=y(t,e,n),o={attributeInfo:t.attributeInfo,values:r};return i.push(o),o}));o=new Uint32Array(n),n=function(t,e,n,r,o){const i=t.length/3;let s=0;for(let a=0;a<i;a++){let i=!0;for(let t=0;t<r.length&&i;t++){const{filterJSON:e}=r[t],n=o[t].values[a];switch(e.type){case"pointCloudValueFilter":{const t="exclude"===e.mode;e.values.includes(n)===t&&(i=!1);break}case"pointCloudBitfieldFilter":{const t=m(e.requiredSetBits),r=m(e.requiredClearBits);((n&t)!==t||n&r)&&(i=!1);break}case"pointCloudReturnFilter":{const t=15&n,r=n>>>4&15,o=r>1,s=1===t,a=t===r;let u=!1;for(const t of e.includedReturns)if("last"===t&&a||"firstOfMany"===t&&s&&o||"lastOfMany"===t&&a&&o||"single"===t&&!o){u=!0;break}u||(i=!1);break}}}i&&(n[s]=a,t[3*s]=t[3*a],t[3*s+1]=t[3*a+1],t[3*s+2]=t[3*a+2],e[3*s]=e[3*a],e[3*s+1]=e[3*a+1],e[3*s+2]=e[3*a+2],s++)}return s}(e,u,o,t.filterInfo,s)}for(const r of t.userAttributesData){const t=y(r,e,n);i.push({attributeInfo:r.attributeInfo,values:t})}3*n<u.length&&(u=new Uint8Array(u.buffer.slice(0,3*n))),function(t,e,n){if(0!==n)for(let r=0;r<e;r++)t[3*r+2]+=n}(e,n,t.elevationOffset);const l=w(e,n,v.ab.fromData(t.obbData),c.A.fromJSON(t.inSR),c.A.fromJSON(t.outSR));return{obbData:t.obbData,points:l,rgb:u,attributes:i,pointIdFilterMap:o}}}function w(t,e,n,r,o){if(!(0,l.projectBuffer)(t,r,0,t,o,0,e))throw new Error("Can't reproject");const s=(0,u.o8)(n.center),c=(0,u.vt)(),f=(0,u.vt)(),d=(0,u.o8)(n.halfSize);(0,i.Xr)(M,n.quaternion);const h=new Float32Array(3*e);for(let n=0;n<e;n++){let e=3*n;c[0]=t[e]-s[0],c[1]=t[e+1]-s[1],c[2]=t[e+2]-s[2],(0,a.w)(f,c,M),d[0]=Math.max(d[0],Math.abs(f[0])),d[1]=Math.max(d[1],Math.abs(f[1])),d[2]=Math.max(d[2],Math.abs(f[2])),h[e++]=c[0],h[e++]=c[1],h[e]=c[2]}return n.halfSize=d,h}const M=(0,s.vt)();function I(){return new A}},33188:function(t,e,n){n.d(e,{MA:function(){return d},m0:function(){return g},wH:function(){return b}});var r=n(39819),o=n(21609),i=n(40633),s=n(40131),a=n(65839);const u=()=>i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function c(t,e,n){let o="",i=0;for(;i<n;){const s=t[e+i];if(s<128)o+=String.fromCharCode(s),i++;else if(s>=192&&s<224){if(i+1>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const a=(31&s)<<6|63&t[e+i+1];o+=String.fromCharCode(a),i+=2}else if(s>=224&&s<240){if(i+2>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(15&s)<<12|(63&t[e+i+1])<<6|63&t[e+i+2];o+=String.fromCharCode(a),i+=3}else{if(!(s>=240&&s<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const a=(7&s)<<18|(63&t[e+i+1])<<12|(63&t[e+i+2])<<6|63&t[e+i+3];if(a>=65536){const t=55296+(a-65536>>10),e=56320+(1023&a);o+=String.fromCharCode(t,e)}else o+=String.fromCharCode(a);i+=4}}}return o}function l(t,e){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<e.length;o++){const i=e[o],s=i.valueType||i.type,a=v[s];n.fields[i.property]=a(t,r),r+=m[s].BYTES_PER_ELEMENT}return n.byteCount=r,n}function f(t,e,n){const o=[];let i,s,a=0;for(s=0;s<t;s+=1){if(i=e[s],i>0){if(o.push(c(n,a,i-1)),0!==n[a+i-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);a+=i}return o}function d(t,e){return new(0,m[e.valueType])(t,e.byteOffset,e.count*e.valuesPerElement)}function h(t,e,n){const i=null!=e.header?l(t,e.header):{byteOffset:0,byteCount:0,fields:{count:n}},s={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let a=i.byteCount;for(let t=0;t<e.ordering.length;t++){const n=e.ordering[t],u=(0,o.o8)(e[n]);if(u.count=i.fields.count??0,"String"===u.valueType){if(u.byteOffset=a,u.byteCount=i.fields[n+"ByteCount"],"UTF-8"!==u.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:u.encoding});if(u.timeEncoding&&"ECMA_ISO8601"!==u.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:u.timeEncoding})}else{if(!A(u.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:u.valueType});{const t=w(u.valueType);a+=a%t!=0?t-a%t:0,u.byteOffset=a,u.byteCount=t*u.valuesPerElement*u.count}}a+=u.byteCount??0,s.entries[n]=u}return s.byteCount=a-s.byteOffset,s}function p(t,e,n){if(e!==t&&u().error(`Invalid ${n} buffer size\n expected: ${t}, actual: ${e})`),e<t)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:t,actualSize:e})}function b(t,e){const n=l(t,e&&e.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,s=null!=i.vertexCount?i.vertexCount:i.count;for(const t of e.ordering){if(!e.vertexAttributes[t])continue;const n={...e.vertexAttributes[t],byteOffset:r,count:s},i=y[t]||"_"+t;o.vertexAttributes[i]=n,r+=w(n.valueType)*n.valuesPerElement*s}const a=i.faceCount;if(e.faces&&a){o.faces={};for(const t of e.ordering){if(!e.faces[t])continue;const n={...e.faces[t],byteOffset:r,count:a};o.faces[t]=n,r+=w(n.valueType)*n.valuesPerElement*a}}const u=i.featureCount;if(e.featureAttributes&&e.featureAttributeOrder&&u){o.featureAttributes={};for(const t of e.featureAttributeOrder){if(!e.featureAttributes[t])continue;const n={...e.featureAttributes[t],byteOffset:r,count:u};o.featureAttributes[t]=n,r+=("UInt64"===n.valueType?8:w(n.valueType))*n.valuesPerElement*u}}return p(r,t.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}const y={position:a.r.POSITION,normal:a.r.NORMAL,color:a.r.COLOR,uv0:a.r.UV0,region:a.r.UVREGION};function g(t,e,n){if("lepcc-rgb"===t.encoding)return(0,s.mb)(e);if("lepcc-intensity"===t.encoding)return(0,s.Ax)(e);if(null!=t.encoding&&""!==t.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");t["attributeByteCounts "]&&!t.attributeByteCounts&&(u().warn("Warning: Trailing space in 'attributeByteCounts '."),t.attributeByteCounts=t["attributeByteCounts "]),"ObjectIds"===t.ordering[0]&&t.hasOwnProperty("objectIds")&&(u().warn("Warning: Case error in objectIds"),t.ordering[0]="objectIds");const o=h(e,t,n);p(o.byteOffset+o.byteCount,e.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const t=o.entries.attributeByteCounts,n=d(e,t),r=function(t,e){return new Uint8Array(t,e.byteOffset,e.byteCount)}(e,i);return i.timeEncoding?function(t,e,n){return f(t,e,n).map((t=>{const e=t?Date.parse(t):null;return null==e||Number.isNaN(e)?null:e}))}(t.count,n,r):f(t.count,n,r)}return d(e,i)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const m={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},v={Float32:(t,e)=>new DataView(t,0).getFloat32(e,!0),Float64:(t,e)=>new DataView(t,0).getFloat64(e,!0),UInt8:(t,e)=>new DataView(t,0).getUint8(e),Int8:(t,e)=>new DataView(t,0).getInt8(e),UInt16:(t,e)=>new DataView(t,0).getUint16(e,!0),Int16:(t,e)=>new DataView(t,0).getInt16(e,!0),UInt32:(t,e)=>new DataView(t,0).getUint32(e,!0),Int32:(t,e)=>new DataView(t,0).getInt32(e,!0)};function A(t){return m.hasOwnProperty(t)}function w(t){return A(t)?m[t].BYTES_PER_ELEMENT:0}},40131:function(t,e,n){n.d(e,{Ax:function(){return g},Me:function(){return c},mb:function(){return p}});var r=n(39819);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function s(t,e,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(t,n+i.identifierOffset,i.identifierLength)),version:e.getUint16(n+i.versionOffset,o),checksum:e.getUint32(n+i.checksumOffset,o)}}const a={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function u(t,e){return{sizeLo:t.getUint32(e+a.sizeLo,o),sizeHi:t.getUint32(e+a.sizeHi,o),minX:t.getFloat64(e+a.minX,o),minY:t.getFloat64(e+a.minY,o),minZ:t.getFloat64(e+a.minZ,o),maxX:t.getFloat64(e+a.maxX,o),maxY:t.getFloat64(e+a.maxY,o),maxZ:t.getFloat64(e+a.maxZ,o),errorX:t.getFloat64(e+a.errorX,o),errorY:t.getFloat64(e+a.errorY,o),errorZ:t.getFloat64(e+a.errorZ,o),count:t.getUint32(e+a.count,o),reserved:t.getUint32(e+a.reserved,o)}}function c(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:c}=s(t,e,n);if(n+=i.byteCount,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(c>1)throw new r.A("lepcc-decode-error","Unknown version");const f=u(e,n);if(n+=a.byteCount,f.sizeHi*2**32+f.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const d=new Float64Array(3*f.count),h=[],p=[],b=[],y=[];if(n=l(t,n,h),n=l(t,n,p),n=l(t,n,b),n=l(t,n,y),n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad length");let g=0,m=0;for(let t=0;t<h.length;t++){m+=h[t];let e=0;for(let n=0;n<p[t];n++){e+=b[g];const t=y[g];d[3*g]=Math.min(f.maxX,f.minX+2*f.errorX*e),d[3*g+1]=Math.min(f.maxY,f.minY+2*f.errorY*m),d[3*g+2]=Math.min(f.maxZ,f.minZ+2*f.errorZ*t),g++}}return{errorX:f.errorX,errorY:f.errorY,errorZ:f.errorZ,result:d}}function l(t,e,n){const r=[];e=f(t,e,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,e=f(t,e,o);for(let t=0;t<o.length;t++)n.push(o[t]+r[i])}return e}function f(t,e,n){const i=new DataView(t,e),s=i.getUint8(0),a=31&s,u=!!(32&s),c=(192&s)>>6;let l=0;if(0===c)l=i.getUint32(1,o),e+=5;else if(1===c)l=i.getUint16(1,o),e+=3;else{if(2!==c)throw new r.A("lepcc-decode-error","Bad count type");l=i.getUint8(1),e+=2}if(u)throw new r.A("lepcc-decode-error","LUT not implemented");const f=Math.ceil(l*a/8),d=new Uint8Array(t,e,f);let h=0,p=0,b=0;const y=-1>>>32-a;for(let t=0;t<l;t++){for(;p<a;)h|=d[b]<<p,p+=8,b+=1;n[t]=h&y,h>>>=a,p-=a,p+a>32&&(h|=d[b-1]>>8-p)}return e+b}const d={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function h(t,e){return{sizeLo:t.getUint32(e+d.sizeLo,o),sizeHi:t.getUint32(e+d.sizeHi,o),count:t.getUint32(e+d.count,o),colorMapCount:t.getUint16(e+d.colorMapCount,o),lookupMethod:t.getUint8(e+d.lookupMethod),compressionMethod:t.getUint8(e+d.compressionMethod)}}function p(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:a}=s(t,e,n);if(n+=i.byteCount,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const u=h(e,n);if(n+=d.byteCount,u.sizeHi*2**32+u.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===u.lookupMethod||1===u.lookupMethod)&&0===u.compressionMethod){if(3*u.colorMapCount+u.count+n!==t.byteLength||u.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const e=new Uint8Array(t,n,3*u.colorMapCount),o=new Uint8Array(t,n+3*u.colorMapCount,u.count),i=new Uint8Array(3*u.count);for(let t=0;t<u.count;t++){const n=o[t];i[3*t]=e[3*n],i[3*t+1]=e[3*n+1],i[3*t+2]=e[3*n+2]}return i}if(0===u.lookupMethod&&0===u.compressionMethod){if(3*u.count+n!==t.byteLength||0!==u.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(t,n).slice()}if(u.lookupMethod<=2&&1===u.compressionMethod){if(n+3!==t.byteLength||1!==u.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=e.getUint8(n),i=e.getUint8(n+1),s=e.getUint8(n+2),a=new Uint8Array(3*u.count);for(let t=0;t<u.count;t++)a[3*t]=o,a[3*t+1]=i,a[3*t+2]=s;return a}throw new r.A("lepcc-decode-error","Bad method "+u.lookupMethod+","+u.compressionMethod)}const b={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function y(t,e){return{sizeLo:t.getUint32(e+b.sizeLo,o),sizeHi:t.getUint32(e+b.sizeHi,o),count:t.getUint32(e+b.count,o),scaleFactor:t.getUint16(e+b.scaleFactor,o),bitsPerPoint:t.getUint8(e+b.bitsPerPoint),reserved:t.getUint8(e+b.reserved)}}function g(t){const e=new DataView(t,0);let n=0;const{identifier:o,version:a}=s(t,e,n);if(n+=i.byteCount,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(a>1)throw new r.A("lepcc-decode-error","Unknown version");const u=y(e,n);if(n+=b.byteCount,u.sizeHi*2**32+u.sizeLo!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const c=new Uint16Array(u.count);if(8===u.bitsPerPoint){if(u.count+n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const e=new Uint8Array(t,n,u.count);for(let t=0;t<u.count;t++)c[t]=e[t]*u.scaleFactor}else if(16===u.bitsPerPoint){if(2*u.count+n!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");const e=new Uint16Array(t,n,u.count);for(let t=0;t<u.count;t++)c[t]=e[t]*u.scaleFactor}else{const e=[];if(f(t,n,e)!==t.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let t=0;t<u.count;t++)c[t]=e[t]*u.scaleFactor}return c}},76185:function(t,e,n){n.d(e,{VV:function(){return a},hG:function(){return i},wp:function(){return s}}),n(15774);var r=n(20551),o=n(32501);function i(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],n=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}function s(t,e){const n=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),o=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),i=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return(0,r.i)(t,n,o,i),t}function a(t,e,n){Math.abs(t[0])>Math.abs(t[1])?(0,r.i)(e,0,1,0):(0,r.i)(e,1,0,0),(0,r.e)(n,t,e),(0,r.e)(e,n,t),(0,r.n)(n,n),(0,r.n)(e,e)}(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,o.vt)()},89765:function(t,e,n){n.d(e,{ab:function(){return At},gm:function(){return Nt}});var r=n(44705),o=n(87725),i=n(39714),s=n(32237),a=n(61769),u=n(20551),c=n(32501),l=n(33400),f=n(41546),d=n(61714),h=n(96611),p=n(7456),b=n(57617),y=n(61441),g=n(5596),m=n(57652),v=n(50973),A=n(65420),w=n(1932),M=n(14905);const I=1e-6,_=(0,c.vt)(),T=(0,c.vt)();function S(t,e,n,r,o,i,s,a,u,c){return function(t,e,n){let r=mt(t.maxVert[0],t.minVert[0]),o=0;for(let e=1;e<7;++e){const n=mt(t.maxVert[e],t.minVert[e]);n>r&&(r=n,o=e)}pt(e,t.minVert[o]),pt(n,t.maxVert[o])}(t,r,o),mt(r,o)<I?1:(dt(s,r,o),yt(s,s),function(t,e,n,r){const{data:o,size:i}=t;let s=Number.NEGATIVE_INFINITY,a=0;for(let t=0;t<o.length;t+=i){V[0]=o[t]-e[0],V[1]=o[t+1]-e[1],V[2]=o[t+2]-e[2];const r=n[0]*V[0]+n[1]*V[1]+n[2]*V[2],i=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],u=V[0]*V[0]+V[1]*V[1]+V[2]*V[2]-r*r/i;u>s&&(s=u,a=t)}return pt(r,o,a),s}(e,r,s,i)<I?2:(dt(a,o,i),yt(a,a),dt(u,i,r),yt(u,u),bt(n,a,s),yt(n,n),k(e,n,s,a,u,c),0))}const C=(0,c.vt)(),O=(0,c.vt)(),E=(0,c.vt)(),N=(0,c.vt)(),P=(0,c.vt)(),U=(0,c.vt)(),z=(0,c.vt)(),R=(0,c.vt)();function j(t,e,n,r,o,i,s,a,u){(function(t,e,n,r,o){!function(t,e,n,r,o){const{data:i,size:s}=t;pt(r,i),pt(o,r),n[0]=vt(Y,e),n[1]=n[0];for(let t=s;t<i.length;t+=s){const s=i[t]*e[0]+i[t+1]*e[1]+i[t+2]*e[2];s<n[0]&&(n[0]=s,pt(r,i,t)),s>n[1]&&(n[1]=s,pt(o,i,t))}}(t,e,x,o,r);const i=vt(n,e);x[1]-I<=i&&(r[0]=void 0),x[0]+I>=i&&(o[0]=void 0)})(t,e,n,C,O),void 0!==C[0]&&(dt(E,C,n),yt(E,E),dt(N,C,r),yt(N,N),dt(P,C,o),yt(P,P),bt(U,N,i),yt(U,U),bt(z,P,s),yt(z,z),bt(R,E,a),yt(R,R),k(t,U,i,N,E,u),k(t,z,s,P,N,u),k(t,R,a,E,P,u)),void 0!==O[0]&&(dt(E,O,n),yt(E,E),dt(N,O,r),yt(N,N),dt(P,O,o),yt(P,P),bt(U,N,i),yt(U,U),bt(z,P,s),yt(z,z),bt(R,E,a),yt(R,R),k(t,U,i,N,E,u),k(t,z,s,P,N,u),k(t,R,a,E,P,u))}const V=[0,0,0],x=(0,w.vt)(),F=(0,c.vt)(),D=(0,c.vt)(),L=(0,c.vt)(),B=(0,c.vt)(),Z=(0,c.vt)(),q=(0,c.vt)();function k(t,e,n,r,o,i){if(gt(e)<I)return;bt(F,n,e),bt(D,r,e),bt(L,o,e),X(t,e,x),Z[1]=x[0],B[1]=x[1],q[1]=B[1]-Z[1];const s=[n,r,o],a=[F,D,L];for(let n=0;n<3;++n){X(t,s[n],x),Z[0]=x[0],B[0]=x[1],X(t,a[n],x),Z[2]=x[0],B[2]=x[1],q[0]=B[0]-Z[0],q[2]=B[2]-Z[2];const r=lt(q);r<i.quality&&(pt(i.b0,s[n]),pt(i.b1,e),pt(i.b2,a[n]),i.quality=r)}}const Y=(0,c.vt)();function X(t,e,n){const{data:r,size:o}=t;n[0]=Number.POSITIVE_INFINITY,n[1]=Number.NEGATIVE_INFINITY;for(let t=0;t<r.length;t+=o){const o=r[t]*e[0]+r[t+1]*e[1]+r[t+2]*e[2];n[0]=Math.min(n[0],o),n[1]=Math.max(n[1],o)}}function G(t,e,n){n.center=t,n.halfSize=(0,u.h)(e,e,.5),n.quaternion=a.zK}const H=(0,c.vt)(),K=(0,c.vt)(),Q=(0,c.vt)(),W=(0,c.vt)(),J=(0,c.vt)(),$=(0,c.vt)();function tt(t,e,n){pt(H,e),Math.abs(e[0])>Math.abs(e[1])&&Math.abs(e[0])>Math.abs(e[2])?H[0]=0:Math.abs(e[1])>Math.abs(e[2])?H[1]=0:H[2]=0,gt(H)<I&&(H[0]=H[1]=H[2]=1),bt(K,e,H),yt(K,K),bt(Q,e,K),yt(Q,Q),et(t,e,K,Q,W,J),dt($,J,W),at(e,K,Q,W,J,$,n)}function et(t,e,n,r,o,i){X(t,e,x),o[0]=x[0],i[0]=x[1],X(t,n,x),o[1]=x[0],i[1]=x[1],X(t,r,x),o[2]=x[0],i[2]=x[1]}const nt=(0,c.vt)(),rt=(0,c.vt)(),ot=(0,c.vt)(),it=(0,o.fA)(1,0,0,0,1,0,0,0,1),st=(0,a.vt)();function at(t,e,n,r,o,i,s){it[0]=t[0],it[1]=t[1],it[2]=t[2],it[3]=e[0],it[4]=e[1],it[5]=e[2],it[6]=n[0],it[7]=n[1],it[8]=n[2],s.quaternion=function(t,e){const n=e[0]+e[4]+e[8];if(n>0){let r=Math.sqrt(n+1);t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r}else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,o=(n+2)%3;let i=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*o+o]+1);t[n]=.5*i,i=.5/i,t[3]=(e[3*r+o]-e[3*o+r])*i,t[r]=(e[3*r+n]+e[3*n+r])*i,t[o]=(e[3*o+n]+e[3*n+o])*i}return t}(st,it),ft(nt,r,o),ht(nt,nt,.5),ht(rt,t,nt[0]),ht(ot,e,nt[1]),ft(rt,rt,ot),ht(ot,n,nt[2]),s.center=(0,u.g)(rt,rt,ot),s.halfSize=(0,u.h)(nt,i,.5)}class ut{constructor(t){this.minVert=new Array(7),this.maxVert=new Array(7),this.buffer=new ArrayBuffer(448);let e=0;this.minProj=new Float64Array(this.buffer,e,7),e+=56,this.maxProj=new Float64Array(this.buffer,e,7),e+=56;for(let t=0;t<7;++t)this.minVert[t]=new Float64Array(this.buffer,e,3),e+=24;for(let t=0;t<7;++t)this.maxVert[t]=new Float64Array(this.buffer,e,3),e+=24;for(let t=0;t<7;++t)this.minProj[t]=Number.POSITIVE_INFINITY,this.maxProj[t]=Number.NEGATIVE_INFINITY;const n=new Array(7),r=new Array(7),{data:o,size:i}=t;for(let t=0;t<o.length;t+=i){let e=o[t];e<this.minProj[0]&&(this.minProj[0]=e,n[0]=t),e>this.maxProj[0]&&(this.maxProj[0]=e,r[0]=t),e=o[t+1],e<this.minProj[1]&&(this.minProj[1]=e,n[1]=t),e>this.maxProj[1]&&(this.maxProj[1]=e,r[1]=t),e=o[t+2],e<this.minProj[2]&&(this.minProj[2]=e,n[2]=t),e>this.maxProj[2]&&(this.maxProj[2]=e,r[2]=t),e=o[t]+o[t+1]+o[t+2],e<this.minProj[3]&&(this.minProj[3]=e,n[3]=t),e>this.maxProj[3]&&(this.maxProj[3]=e,r[3]=t),e=o[t]+o[t+1]-o[t+2],e<this.minProj[4]&&(this.minProj[4]=e,n[4]=t),e>this.maxProj[4]&&(this.maxProj[4]=e,r[4]=t),e=o[t]-o[t+1]+o[t+2],e<this.minProj[5]&&(this.minProj[5]=e,n[5]=t),e>this.maxProj[5]&&(this.maxProj[5]=e,r[5]=t),e=o[t]-o[t+1]-o[t+2],e<this.minProj[6]&&(this.minProj[6]=e,n[6]=t),e>this.maxProj[6]&&(this.maxProj[6]=e,r[6]=t)}for(let t=0;t<7;++t){let e=n[t];pt(this.minVert[t],o,e),e=r[t],pt(this.maxVert[t],o,e)}}}class ct{constructor(){this.b0=(0,c.fA)(1,0,0),this.b1=(0,c.fA)(0,1,0),this.b2=(0,c.fA)(0,0,1),this.quality=0}}function lt(t){return t[0]*t[1]+t[0]*t[2]+t[1]*t[2]}function ft(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}function dt(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}function ht(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n}function pt(t,e,n=0){t[0]=e[n],t[1]=e[n+1],t[2]=e[n+2]}function bt(t,e,n){const r=e[0],o=e[1],i=e[2],s=n[0],a=n[1],u=n[2];t[0]=o*u-i*a,t[1]=i*s-r*u,t[2]=r*a-o*s}function yt(t,e){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];if(n>0){const r=1/Math.sqrt(n);t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r}}function gt(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function mt(t,e){const n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function vt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}class At{constructor(t=c.uY,e=kt,n=a.zK){this._data=[t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2],n[3]]}clone(){const t=new At;return t._data=this._data.slice(),t}invalidate(){this._data[3]=-1}get isValid(){return this._data[3]>=0}static fromData(t){const e=new At;return e._data=t.slice(),e}static fromJSON(t){return new At(t.center,t.halfSize,t.quaternion)}copy(t){this._data=t.data.slice()}get center(){return(0,u.i)(v.rq.get(),this._data[0],this._data[1],this._data[2])}get centerX(){return this._data[0]}get centerY(){return this._data[1]}get centerZ(){return this._data[2]}getCenter(t){return t[0]=this._data[0],t[1]=this._data[1],t[2]=this._data[2],t}set center(t){this._data[0]=t[0],this._data[1]=t[1],this._data[2]=t[2]}setCenter(t,e,n){this._data[0]=t,this._data[1]=e,this._data[2]=n}get halfSize(){return(0,u.i)(v.rq.get(),this._data[3],this._data[4],this._data[5])}get halfSizeX(){return this._data[3]}get halfSizeY(){return this._data[4]}get halfSizeZ(){return this._data[5]}getHalfSize(t){return t[0]=this._data[3],t[1]=this._data[4],t[2]=this._data[5],t}set halfSize(t){this._data[3]=t[0],this._data[4]=t[1],this._data[5]=t[2]}get quaternion(){return(0,s.hZ)(v.J8.get(),this._data[6],this._data[7],this._data[8],this._data[9])}getQuaternion(t){return t[0]=this._data[6],t[1]=this._data[7],t[2]=this._data[8],t[3]=this._data[9],t}set quaternion(t){this._data[6]=t[0],this._data[7]=t[1],this._data[8]=t[2],this._data[9]=t[3]}get data(){return this._data}getCorners(t){const e=wt,n=this._data;e[0]=n[6],e[1]=n[7],e[2]=n[8],e[3]=n[9];for(let r=0;r<8;++r){const o=t[r];o[0]=(1&r?-1:1)*n[3],o[1]=(2&r?-1:1)*n[4],o[2]=(4&r?-1:1)*n[5],(0,u.w)(o,o,e),o[0]+=n[0],o[1]+=n[1],o[2]+=n[2]}}doesIntersectFrustumConservativeApproximation(t){return this.intersectPlane(t[0])<=0&&this.intersectPlane(t[1])<=0&&this.intersectPlane(t[2])<=0&&this.intersectPlane(t[3])<=0&&this.intersectPlane(t[4])<=0&&this.intersectPlane(t[5])<=0}get radius(){const t=this._data[3],e=this._data[4],n=this._data[5];return Math.sqrt(t*t+e*e+n*n)}intersectSphere(t){_t[0]=this._data[0]-t[0],_t[1]=this._data[1]-t[1],_t[2]=this._data[2]-t[2];const e=this.getQuaternion(Mt);return(0,s.Xr)(wt,e),(0,u.w)(_t,_t,wt),(0,u.x)(_t,_t),Tt[0]=Math.min(_t[0],this._data[3]),Tt[1]=Math.min(_t[1],this._data[4]),Tt[2]=Math.min(_t[2],this._data[5]),(0,u.y)(Tt,_t)<t[3]*t[3]}intersectSphereWithMBS(t,e=this.radius){const n=this._data;_t[0]=n[0]-t[0],_t[1]=n[1]-t[1],_t[2]=n[2]-t[2];const r=t[3],o=r+e;return!((0,u.z)(_t)>o*o)&&(wt[0]=-n[6],wt[1]=-n[7],wt[2]=-n[8],wt[3]=n[9],(0,u.w)(_t,_t,wt),(0,u.x)(_t,_t),Tt[0]=Math.min(_t[0],n[3]),Tt[1]=Math.min(_t[1],n[4]),Tt[2]=Math.min(_t[2],n[5]),(0,u.y)(Tt,_t)<r*r)}intersectPlane(t){const e=t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3],n=this.projectedRadius((0,g.Qj)(t));return e>n?1:e<-n?-1:0}intersectRay(t,e,n=0){const r=this._data,o=wt;o[0]=-r[6],o[1]=-r[7],o[2]=-r[8],o[3]=r[9],_t[0]=t[0]-r[0],_t[1]=t[1]-r[1],_t[2]=t[2]-r[2];const i=(0,u.w)(_t,_t,wt),s=(0,u.w)(Tt,e,wt);let a=-1/0,c=1/0;const l=this.getHalfSize(xt);for(let t=0;t<3;t++){const e=i[t],r=s[t],o=l[t]+n;if(Math.abs(r)>1e-6){const t=(o-e)/r,n=(-o-e)/r;a=Math.max(a,Math.min(t,n)),c=Math.min(c,Math.max(t,n))}else if(e>o||e<-o)return!1}return a<=c}projectedArea(t,e,n,o){const i=this.getQuaternion(Mt);(0,s.Xr)(wt,i),_t[0]=t[0]-this._data[0],_t[1]=t[1]-this._data[1],_t[2]=t[2]-this._data[2],(0,u.w)(_t,_t,wt);const a=this.getHalfSize(xt),c=_t[0]<-a[0]?-1:_t[0]>a[0]?1:0,f=_t[1]<-a[1]?-1:_t[1]>a[1]?1:0,d=_t[2]<-a[2]?-1:_t[2]>a[2]?1:0,h=Math.abs(c)+Math.abs(f)+Math.abs(d);if(0===h)return 1/0;const p=1===h?4:6,b=6*(c+3*f+9*d+13);(0,r.I0)(Ft,i),(0,r.hs)(Ft,Ft,a);const y=this.getCenter(jt);for(let t=0;t<p;t++){const n=Et[b+t];(0,u.i)(_t,((1&n)<<1)-1,(2&n)-1,((4&n)>>1)-1),(0,u.q)(_t,_t,Ft),(0,u.g)(St,y,_t),St[3]=1,(0,l.t)(St,St,e);const r=1/Math.max(1e-6,St[3]);Ot[2*t]=St[0]*r,Ot[2*t+1]=St[1]*r}const g=2*p-2;let m=Ot[0]*(Ot[3]-Ot[g+1])+Ot[g]*(Ot[1]-Ot[g-1]);for(let t=2;t<g;t+=2)m+=Ot[t]*(Ot[t+3]-Ot[t-1]);return Math.abs(m)*n*o*.125}projectedRadius(t){const e=this.getQuaternion(Mt);return(0,s.Xr)(wt,e),(0,u.w)(_t,t,wt),Math.abs(_t[0]*this._data[3])+Math.abs(_t[1]*this._data[4])+Math.abs(_t[2]*this._data[5])}minimumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]-this.projectedRadius((0,g.Qj)(t))}maximumDistancePlane(t){return t[0]*this._data[0]+t[1]*this._data[1]+t[2]*this._data[2]+t[3]+this.projectedRadius((0,g.Qj)(t))}toAaBoundingBox(t){const e=this.getQuaternion(Mt),n=(0,r.I0)(Ft,e),o=this._data[3]*Math.abs(n[0])+this._data[4]*Math.abs(n[3])+this._data[5]*Math.abs(n[6]),i=this._data[3]*Math.abs(n[1])+this._data[4]*Math.abs(n[4])+this._data[5]*Math.abs(n[7]),s=this._data[3]*Math.abs(n[2])+this._data[4]*Math.abs(n[5])+this._data[5]*Math.abs(n[8]);t[0]=this._data[0]-o,t[1]=this._data[1]-i,t[2]=this._data[2]-s,t[3]=this._data[0]+o,t[4]=this._data[1]+i,t[5]=this._data[2]+s}transform(t,e,n,r=0,o=(0,h.lO)(n),i=(0,h.lO)(e),a=(0,y.jd)(e,i)){if(n===o)e.isGeographic?function(t,e,n,r,o=(0,h.lO)(n)){const i=(0,d.tO)(n),a=1+Math.max(0,r)/(i.radius+t.centerZ);t.getCenter(Rt),Rt[2]+=r,(0,b.projectBuffer)(Rt,n,0,Rt,o,0),e.center=Rt;const c=t.getQuaternion(Mt);e.quaternion=c,(0,s.Xr)(wt,c),(0,u.i)(Bt,0,0,1),(0,u.w)(Bt,Bt,wt);const l=t.getHalfSize(xt);(0,u.i)(Bt,l[0]*Math.abs(Bt[0]),l[1]*Math.abs(Bt[1]),l[2]*Math.abs(Bt[2])),(0,u.h)(Bt,Bt,i.inverseFlattening),(0,u.g)(Bt,l,Bt),e.halfSize=(0,u.h)(Bt,Bt,a)}(this,t,e,r,i):function(t,e,n,r,o=(0,h.lO)(n),i=(0,y.jd)(n,o)){t.getCorners(Lt),t.getCenter(Rt),Rt[2]+=r,(0,p.l)(n,Rt,Dt,o),e.setCenter(Dt[12],Dt[13],Dt[14]);const a=2*Math.sqrt(1+Dt[0]+Dt[5]+Dt[10]);wt[0]=(Dt[6]-Dt[9])/a,wt[1]=(Dt[8]-Dt[2])/a,wt[2]=(Dt[1]-Dt[4])/a,wt[3]=.25*a;const c=t.getQuaternion(Mt);e.quaternion=(0,s.lw)(wt,wt,c),(0,s.Xr)(wt,wt),(0,u.i)(Zt,0,0,0);const l=e.getCenter(Vt);for(const t of Lt)t[2]+=r,i(t,0,t,0),(0,u.a)(Bt,t,l),(0,u.w)(Bt,Bt,wt),(0,u.x)(Bt,Bt),(0,u.D)(Zt,Zt,Bt);e.halfSize=Zt}(this,t,e,r,i,a);else if(e.isWGS84&&(n.isWebMercator||(0,m.r1)(n)))!function(t,e,n,r,o){e.getCenter(jt),jt[2]+=o;const i=(0,h.lO)(n);(0,b.projectBuffer)(jt,t,0,jt,i,0),Pt(i,e,jt,n,r)}(e,this,n,t,r);else if(e.isWebMercator&&(0,m.r1)(n))!function(t,e,n,r,o){e.getCenter(jt),jt[2]+=o,Pt(t,e,jt,n,r)}(e,this,n,t,r);else{const o=this.getCenter(jt);o[2]+=r,(0,b.projectBuffer)(o,e,0,o,n,0),t.center=o,this!==t&&(t.quaternion=this.getQuaternion(Mt),t.halfSize=this.getHalfSize(xt))}}}const wt=(0,a.vt)(),Mt=(0,a.vt)(),It=(0,a.vt)(),_t=(0,c.vt)(),Tt=(0,c.vt)(),St=(0,f.vt)();function Ct(t,e=new At){return function(t,e){const{data:n,size:r}=t,o=n.length/r;if(o<=0)return;const i=new ut(t);ft(_,i.minProj,i.maxProj),ht(_,_,.5),dt(T,i.maxProj,i.minProj);const s=lt(T),a=new ct;a.quality=s,o<14&&(t=new M.K(new Float64Array(i.buffer,112,42),3));const u=(0,c.vt)(),l=(0,c.vt)(),f=(0,c.vt)(),d=(0,c.vt)(),h=(0,c.vt)(),p=(0,c.vt)(),b=(0,c.vt)();switch(S(i,t,b,u,l,f,d,h,p,a)){case 1:return void G(_,T,e);case 2:return void tt(t,d,e)}j(t,b,u,l,f,d,h,p,a),et(t,a.b0,a.b1,a.b2,W,J);const y=(0,c.vt)();dt(y,J,W),a.quality=lt(y),a.quality<s?at(a.b0,a.b1,a.b2,W,J,y,e):G(_,T,e)}(t,e),e}const Ot=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.2],Et=(()=>{const t=new Int8Array(162);let e=0;const n=n=>{for(let r=0;r<n.length;r++)t[e+r]=n[r];e+=6};return n([6,2,3,1,5,4]),n([0,2,3,1,5,4]),n([0,2,3,7,5,4]),n([0,1,3,2,6,4]),n([0,1,3,2,0,0]),n([0,1,5,7,3,2]),n([0,1,3,7,6,4]),n([0,1,3,7,6,2]),n([0,1,5,7,6,2]),n([0,1,5,4,6,2]),n([0,1,5,4,0,0]),n([0,1,3,7,5,4]),n([0,2,6,4,0,0]),n([0,0,0,0,0,0]),n([1,3,7,5,0,0]),n([2,3,7,6,4,0]),n([2,3,7,6,0,0]),n([2,3,1,5,7,6]),n([0,1,5,7,6,2]),n([0,1,5,7,6,4]),n([0,1,3,7,6,4]),n([4,5,7,6,2,0]),n([4,5,7,6,0,0]),n([4,5,1,3,7,6]),n([0,2,3,7,5,4]),n([6,2,3,7,5,4]),n([6,2,3,1,5,4]),t})();function Nt(t,e,n,r,o){const i=t.getQuaternion(Mt);o.quaternion=i,(0,s.Xr)(wt,i);const a=t.getCenter(jt),l=t.getHalfSize(xt);if(r===A.RT.Global){(0,u.w)(Bt,a,wt),(0,u.x)(Zt,Bt),(0,u.A)(qt,Zt,l),(0,u.a)(qt,Zt,qt);const r=(0,u.l)(qt);(0,u.g)(qt,Zt,l);const i=(0,u.l)(qt);if(r<n)o.center=a,(0,u.i)(Bt,n,n,n),o.halfSize=(0,u.g)(Bt,l,Bt);else{const s=i>0?1+e/i:1,a=r>0?1+n/r:1,c=(a+s)/2,f=(a-s)/2;(0,u.h)(qt,Zt,f),o.halfSize=(0,u.b)(qt,qt,l,c),(0,u.h)(qt,Zt,c),(0,u.b)(qt,qt,l,f),(0,u.B)(Bt,Bt),(0,u.C)(Bt,qt,Bt);const d=t.getQuaternion(It);o.center=(0,u.w)(Bt,Bt,d)}}else{o.center=(0,u.b)(Bt,a,c.Cb,(n+e)/2);const t=(0,u.w)(Bt,c.Cb,wt);(0,u.x)(t,t),o.halfSize=(0,u.b)(Zt,l,t,(n-e)/2)}return o}function Pt(t,e,n,o,i){const s=e.getQuaternion(Mt),a=(0,r.I0)(Ft,s),u=e.getHalfSize(xt);for(let t=0;t<8;++t){for(let e=0;e<3;++e)Rt[e]=u[e]*(t&1<<e?-1:1);for(let e=0;e<3;++e){let r=n[e];for(let t=0;t<3;++t)r+=Rt[t]*a[3*t+e];Ut[3*t+e]=r}}(0,b.projectBuffer)(Ut,t,0,Ut,o,0,8),Ct(zt,i)}const Ut=new Array(24),zt=new M.K(Ut,3),Rt=(0,c.vt)(),jt=(0,c.vt)(),Vt=(0,c.vt)(),xt=(0,c.vt)(),Ft=(0,o.vt)(),Dt=(0,i.vt)(),Lt=[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],Bt=(0,c.vt)(),Zt=(0,c.vt)(),qt=(0,c.vt)(),kt=(0,c.CN)(-1,-1,-1)},14905:function(t,e,n){n.d(e,{K:function(){return r},n:function(){return o}});class r{constructor(t,e,n=e){this.data=t,this.size=e,this.stride=n}}class o extends r{constructor(t,e,n,r=!1,o=n){super(t,n,o),this.indices=e,this.exclusive=r}}},65839:function(t,e,n){var r;function o(t){return t===r.POSITION}n.d(e,{b:function(){return o},r:function(){return r}}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.ROTATION="rotation",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.START_UP="startUp",t.END_UP="endUp",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},65420:function(t,e,n){var r;n.d(e,{RT:function(){return r}}),function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"}(r||(r={}))}}]);
//# sourceMappingURL=views-3d-layers-PointCloudWorker.js.map