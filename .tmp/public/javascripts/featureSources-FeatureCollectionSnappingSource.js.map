{"version":3,"file":"featureSources-FeatureCollectionSnappingSource.js","mappings":"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","sources":["webpack://defra/./node_modules/@arcgis/core/core/LRUCache.js","webpack://defra/./node_modules/@arcgis/core/core/MemCache.js","webpack://defra/./node_modules/@arcgis/core/core/memoize.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureCollectionSnappingSource.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js","webpack://defra/./node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{MemCacheStorage as t}from\"./MemCache.js\";class e{constructor(e,s){this._storage=new t,this.id=\"\",this.name=\"\",this.size=0,this._storage.maxSize=e,this._storage.register(this),s&&this._storage.registerRemoveFunc(\"\",s)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,s=1){this._storage.put(this,t,e,s,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}export{e as LRUCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"./PooledArray.js\";const e=-3,s=e-1;var i;!function(t){t[t.ALL=0]=\"ALL\",t[t.SOME=1]=\"SOME\"}(i||(i={}));class r{constructor(t,e,s){this.name=t,this._storage=e,this.id=o+++\":\",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),s&&(this._storage.registerRemoveFunc(this.id,s),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,e,s,i=0){this._storage.put(this,t,e,s,i)}pop(t){const e=this._storage.pop(this,t);return void 0===e?++this._miss:++this._hit,e}get(t){const e=this._storage.get(this,t);return void 0===e?++this._miss:++this._hit,e}peek(t){return this._storage.peek(this,t)}updateSize(t,e,s){this._storage.updateSize(this,t,e,s)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class h{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new t,this._users=new t}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){const s=this._db.get(t.id+e);return s?.size??0}put(t,r,h,o,_){r=t.id+r;const a=this._db.get(r);if(a&&(this._size-=a.size,t.size-=a.size,this._db.delete(r),a.entry!==h&&this._notifyRemove(r,a.entry,a.size,i.ALL)),o>this._maxSize)return void this._notifyRemove(r,h,o,i.ALL);if(void 0===h)return void console.warn(\"Refusing to cache undefined entry \");if(!o||o<0)return console.warn(`Refusing to cache entry with size ${o} for key ${r}`),void this._notifyRemove(r,h,0,i.ALL);const c=1+Math.max(_,s)-e;this._db.set(r,new n(h,o,c)),this._size+=o,t.size+=o,this._checkSize()}updateSize(t,e,s,r){e=t.id+e;const h=this._db.get(e);if(h&&h.entry===s){for(this._size-=h.size,t.size-=h.size;r>this._maxSize;){const t=this._notifyRemove(e,s,r,i.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);r=t}h.size=r,this._size+=r,t.size+=r,this._checkSize()}}pop(t,e){e=t.id+e;const s=this._db.get(e);if(s)return this._size-=s.size,t.size-=s.size,this._db.delete(e),++this._hit,s.entry;++this._miss}get(t,e){e=t.id+e;const s=this._db.get(e);if(void 0!==s)return this._db.delete(e),s.lives=s.lifetime,this._db.set(e,s),++this._hit,s.entry;++this._miss}peek(t,e){const s=this._db.get(t.id+e);return s?++this._hit:++this._miss,s?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+\"/\"+Math.round(this._maxSize/1048576)+\"MB\",\"Hit rate\":Math.round(100*this._getHitRate())+\"%\",Entries:this._db.size.toString()},s={},i=new Array;this._db.forEach(((t,e)=>{const r=t.lifetime;i[r]=(i[r]||0)+t.size,this._users.forAll((i=>{const{id:r,name:h}=i;if(e.startsWith(r)){const e=s[h]||0;s[h]=e+t.size}}))}));const r={};this._users.forAll((t=>{const e=t.name;if(\"hitRate\"in t&&\"number\"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const i=s[e]||0;s[e]=i,r[e]=Math.round(100*t.hitRate)+\"%\"}else r[e]=\"0%\"}));const h=Object.keys(s);h.sort(((t,e)=>s[e]-s[t])),h.forEach((e=>t[e]=Math.round(s[e]/2**20)+\"MB / \"+r[e]));for(let o=i.length-1;o>=0;--o){const s=i[o];s&&(t[\"Priority \"+(o+e-1)]=Math.round(s/this._size*100)+\"%\")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,s)=>{s.startsWith(e)&&(this._size-=t.size,this._db.delete(s),this._notifyRemove(s,t.entry,t.size,i.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,i.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,s,i){let r;return this._removeFuncs.some((h=>{if(t.startsWith(h[0])){const t=h[1](e,i,s);return\"number\"==typeof t&&(r=t),!0}return!1})),r}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=t??this;if(e.maxSize<0||e.size<=e.maxSize)return;const s=t?.id;let i=!0;for(;i;){i=!1;for(const[r,h]of this._db)if(0===h.lifetime&&(!s||r.startsWith(s))){if(this._purgeItem(r,h,t),e.size<=.9*e.maxSize)return;i||=this._db.has(r)}}for(const[r,h]of this._db)if((!s||r.startsWith(s))&&(this._purgeItem(r,h,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e,s=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,s&&(s.size-=e.size);const r=this._notifyRemove(t,e.entry,e.size,i.SOME);null!=r&&r>0&&(this._size+=r,s&&(s.size+=r),e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}let o=0;class n{constructor(t,e,s){this.entry=t,this.size=e,this.lifetime=s,this.lives=s}}export{r as MemCache,h as MemCacheStorage,e as MinPriority,s as NoPriority,i as RemoveMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction t(t){let r,e,i=[],u=!1;function f(...f){return u&&r===this&&n(f,i)||(e=t.apply(this,f),r=this,i=f,u=!0),e}return f}function n(t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==n[r])return!1;return!0}export{t as memoize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{PointConstraint as t}from\"../../sketch/constraints.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointSnappingHint as i}from\"../hints/PointSnappingHint.js\";class r extends n{constructor(n){super({...n,constraint:new t(n.targetPoint)})}get hints(){return[new i(this.targetPoint,this.isDraped,this.domain)]}}export{r as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{memoize as i}from\"../../../../core/memoize.js\";import{throwIfAborted as n,whenOrAbort as o}from\"../../../../core/promiseUtils.js\";import{watch as r,on as a,initial as s}from\"../../../../core/reactiveUtils.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as l}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{elevationContextAffectsAlignment as y}from\"../../../../support/elevationInfoUtils.js\";import{makeFilter as c,makeSnappingQuery as u}from\"../snappingUtils.js\";import{convertSnappingCandidate as g,makeGetGroundElevation as m}from\"./queryEngineUtils.js\";import{getSnappingCandidateElevationAligner as h}from\"./snappingCandidateElevationAlignment.js\";import{getSnappingCandidateElevationFilter as d}from\"./snappingCandidateElevationFilter.js\";import{getSymbologySnappingCandidatesFetcher as v}from\"./symbologySnappingCandidates.js\";let f=class extends t{get availability(){return 1}get _snappingElevationAligner(){const{view:e}=this,{layer:t}=this.layerSource,i=null!=e&&\"3d\"===e.type;if(!i||\"subtype-group\"===t.type)return h();const n=async(i,n)=>(await o(e.whenLayerView(t),n)).elevationAlignPointsInFeatures(i,n);return h(i,{elevationInfo:t.elevationInfo,alignPointsInFeatures:n})}get _snappingElevationFilter(){const{view:e}=this,t=null!=e&&\"3d\"===e.type&&\"subtype-group\"!==this.layerSource.layer.type;return d(t)}get _symbologySnappingFetcher(){const{view:e}=this,{layer:t}=this.layerSource;return null!=e&&\"3d\"===e.type&&\"subtype-group\"!==t.type?v(this._symbologySnappingSupported,(async(i,o)=>{const r=await e.whenLayerView(t);return n(o),r.queryForSymbologySnapping({candidates:i,spatialReference:e.spatialReference},o)})):v()}get _layerView3D(){const{view:e}=this;if(null==e||\"2d\"===e.type)return null;const{layer:t}=this.layerSource;return e.allLayerViews.find((e=>e.layer===t))}get _symbologySnappingSupported(){return null!=this._layerView3D&&this._layerView3D.symbologySnappingSupported}initialize(){const{view:e}=this,{layer:t}=this.layerSource;null!=e&&\"3d\"===e.type&&\"subtype-group\"!==t.type&&this.addHandles([e.elevationProvider.on(\"elevation-change\",(({context:e})=>{const{elevationInfo:i}=t;y(e,i)&&this._snappingElevationAligner.notifyElevationSourceChange()})),r((()=>t.elevationInfo),(()=>this._snappingElevationAligner.notifyElevationSourceChange()),s),r((()=>null!=this._layerView3D?this._layerView3D.layer?.renderer:null),(()=>this._symbologySnappingFetcher.notifySymbologyChange()),s),a((()=>this._layerView3D?.layer),[\"edits\",\"apply-edits\",\"graphic-update\"],(()=>this._symbologySnappingFetcher.notifySymbologyChange()))])}constructor(e){super(e),this.view=null,this.updating=!1,this._memoizedMakeGetGroundElevation=i(m)}refresh(){}async fetchCandidates(e,t){const{layer:i}=this.layerSource,o=i.source;if(!o?.querySnapping)return[];const r=c(i),a=u(e,this.view?.type??\"2d\",r),s=await o.querySnapping(a,{signal:t});n(t);const p=e.coordinateHelper.spatialReference,l=await this._snappingElevationAligner.alignCandidates(s.candidates,p,t);n(t);const y=await this._symbologySnappingFetcher.fetch(l,t);n(t);const m=0===y.length?l:[...l,...y],h=this._snappingElevationFilter.filter(a,m),d=this._memoizedMakeGetGroundElevation(this.view,p);return h.map((e=>g(e,d)))}};e([p({constructOnly:!0})],f.prototype,\"layerSource\",void 0),e([p({constructOnly:!0})],f.prototype,\"view\",void 0),e([p()],f.prototype,\"_snappingElevationAligner\",null),e([p()],f.prototype,\"_snappingElevationFilter\",null),e([p()],f.prototype,\"_symbologySnappingFetcher\",null),e([p()],f.prototype,\"_layerView3D\",null),e([p()],f.prototype,\"_symbologySnappingSupported\",null),f=e([l(\"esri.views.interactive.snapping.featureSources.FeatureCollectionSnappingSource\")],f);export{f as FeatureCollectionSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{markAsTarget as e,fromValues as t}from\"../../sketch/normalizedPoint.js\";import{DrapedEdgeSnappingCandidate as n}from\"../candidates/DrapedEdgeSnappingCandidate.js\";import{EdgeSnappingCandidate as d}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as r}from\"../candidates/VertexSnappingCandidate.js\";function a({x:e,y:n,z:d}){return t(e,n,d??0)}function o(t,o){switch(t.type){case\"edge\":return t.draped?new n({edgeStart:a(t.start),edgeEnd:a(t.end),targetPoint:e(a(t.target)),objectId:t.objectId,getGroundElevation:o}):new d({edgeStart:a(t.start),edgeEnd:a(t.end),targetPoint:e(a(t.target)),objectId:t.objectId,isDraped:!1});case\"vertex\":return new r({targetPoint:e(a(t.target)),objectId:t.objectId,isDraped:!1})}}function i(e,t){return null!=e&&\"3d\"===e.type?(n,d)=>e.elevationProvider.getElevation(n,d,0,t,\"ground\"):()=>null}export{o as convertSnappingCandidate,i as makeGetGroundElevation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{LRUCache as e}from\"../../../../core/LRUCache.js\";import{getOrCreateMapValue as t}from\"../../../../core/MapUtils.js\";import{throwIfAborted as s}from\"../../../../core/promiseUtils.js\";import{getMetersPerVerticalUnitForSR as n}from\"../../../../core/unitUtils.js\";import{getMetersPerUnit as o}from\"../../../../symbols/support/unitConversionUtils.js\";function i(e=!1,t){if(e){const{elevationInfo:e,alignPointsInFeatures:s}=t;return new c(e,s)}return new a}class a{async alignCandidates(e,t,s){return e}notifyElevationSourceChange(){}}const r=1024;class c{constructor(t,s){this._elevationInfo=t,this._alignPointsInFeatures=s,this._alignmentsCache=new e(r),this._cacheVersion=0}async alignCandidates(e,t,s){const n=this._elevationInfo;return null==n||\"absolute-height\"!==n.mode||n.featureExpressionInfo?this._alignComputedElevationCandidates(e,t,s):(l(e,t,n),e)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}async _alignComputedElevationCandidates(e,n,o){const i=new Map;for(const s of e)t(i,s.objectId,d).push(s);const[a,r,c]=this._prepareQuery(i,n),h=await this._alignPointsInFeatures(a,o);s(o);if(c!==this._cacheVersion)return this._alignComputedElevationCandidates(e,n,o);this._applyCacheAndResponse(a,h,r);const{drapedObjectIds:u,failedObjectIds:l}=h,p=[];for(const t of e){const{objectId:e}=t;u.has(e)&&\"edge\"===t.type&&(t.draped=!0),l.has(e)||p.push(t)}return p}_prepareQuery(e,t){const s=[],n=[];for(const[o,i]of e){const e=[];for(const t of i)this._addToQueriesOrCachedResult(o,t.target,e,n),\"edge\"===t.type&&(this._addToQueriesOrCachedResult(o,t.start,e,n),this._addToQueriesOrCachedResult(o,t.end,e,n));0!==e.length&&s.push({objectId:o,points:e})}return[{spatialReference:t.toJSON(),pointsInFeatures:s},n,this._cacheVersion]}_addToQueriesOrCachedResult(e,t,s,n){const o=u(e,t),i=this._alignmentsCache.get(o);null==i?s.push(t):n.push(new h(t,i))}_applyCacheAndResponse(e,{elevations:t,drapedObjectIds:s,failedObjectIds:n},o){for(const r of o)r.apply();let i=0;const a=this._alignmentsCache;for(const{objectId:r,points:c}of e.pointsInFeatures){if(n.has(r)){i+=c.length;continue}const e=!s.has(r);for(const s of c){const n=u(r,s),o=t[i++];s.z=o,e&&a.put(n,o,1)}}}}class h{constructor(e,t){this.point=e,this.z=t}apply(){this.point.z=this.z}}function u(e,{x:t,y:s,z:n,spatialReference:o}){return`${e}-${t}-${s}-${n??0}}-wkid:${o?.wkid}`}function l(e,t,s){const{offset:i,unit:a}=s;if(null==i)return;const r=n(t),c=i*(o(a??\"meters\")/r);for(const n of e)switch(n.type){case\"edge\":n.start.z+=c,n.end.z+=c;continue;case\"vertex\":n.target.z+=c;continue}}function d(){return[]}export{i as getSnappingCandidateElevationAligner};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";class t{filter(t,n){return n}notifyElevationSourceChange(){}}class n{filter(t,n){const{point:r,distance:c}=t,{z:i}=r;if(!(null!=i))return n;if(0===n.length)return n;const o=s(c),u=this._updateCandidatesTo3D(n,r,o).filter(e);return u.sort(a),u}_updateCandidatesTo3D(t,n,e){for(const r of t)switch(r.type){case\"edge\":c(r,n,e);continue;case\"vertex\":o(r,n,e);continue}return t}}function e(t){return t.distance<=1}function r(e=!1){return e?new n:new t}function c(t,n,{x:e,y:r,z:c}){const{start:o,end:s,target:a}=t;t.draped||i(a,n,o,s);const u=(n.x-a.x)/e,d=(n.y-a.y)/r,f=(n.z-a.z)/c;t.distance=Math.sqrt(u*u+d*d+f*f)}function i(t,n,e,r){const c=r.x-e.x,i=r.y-e.y,o=r.z-e.z,s=c*c+i*i+o*o,a=(n.x-e.x)*c+(n.y-e.y)*i+o*(n.z-e.z),u=Math.min(1,Math.max(0,a/s)),d=e.x+c*u,f=e.y+i*u,x=e.z+o*u;t.x=d,t.y=f,t.z=x}function o(t,n,{x:e,y:r,z:c}){const{target:i}=t,o=(n.x-i.x)/e,s=(n.y-i.y)/r,a=(n.z-i.z)/c,u=Math.sqrt(o*o+s*s+a*a);t.distance=u}function s(t){return\"number\"==typeof t?{x:t,y:t,z:t}:t}function a(t,n){return t.distance-n.distance}export{r as getSnappingCandidateElevationFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{clone as t}from\"../../../../core/lang.js\";import{LRUCache as e}from\"../../../../core/LRUCache.js\";import{throwIfAborted as s}from\"../../../../core/promiseUtils.js\";import{numericHash as o}from\"../../../../core/string.js\";function n(t=!1,e){return t?new i(e):new c}class c{async fetch(){return[]}notifySymbologyChange(){}}const r=1024;class i{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new e(r),this._cacheVersion=0}async fetch(e,o){if(0===e.length)return[];const n=[],c=[],r=this._candidatesCache;for(const s of e){const e=a(s),o=r.get(e);if(o)for(const s of o)c.push(t(s));else n.push(s),r.put(e,[],1)}if(0===n.length)return c;const i=this._cacheVersion,{candidates:h,sourceCandidateIndices:d}=await this._getSymbologyCandidates(n,o);s(o);if(i!==this._cacheVersion)return this.fetch(e,o);const f=[],{length:g}=h;for(let s=0;s<g;++s){const e=h[s],o=a(n[d[s]]),c=r.get(o);c.push(e),r.put(o,c,c.length),f.push(t(e))}return c.concat(f)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function a(t){switch(t.type){case\"vertex\":{const{objectId:e,target:s}=t,n=`${e}-vertex-${s.x}-${s.y}-${s.z??0}`;return o(n).toString()}case\"edge\":{const{objectId:e,start:s,end:n}=t,c=`${e}-edge-${s.x}-${s.y}-${s.z??0}-to-${n.x}-${n.y}-${n.z??0}`;return o(c).toString()}default:return\"\"}}export{n as getSymbologySnappingCandidatesFetcher};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{p as t}from\"../../../../chunks/vec32.js\";import{SnappingHint as s}from\"./SnappingHint.js\";class n extends s{constructor(t,s,n){super(s,n),this.point=t}equals(s){return s instanceof n&&t(this.point,s.point)}}export{n as PointSnappingHint};\n"],"names":["e","constructor","s","this","_storage","id","name","size","maxSize","register","registerRemoveFunc","destroy","deregister","put","t","pop","get","clear","clearAll","resetHitRate","i","ALL","SOME","h","_size","_maxSize","_db","Map","_hit","_miss","_removeFuncs","_users","push","removeUnordered","deregisterRemoveFunc","filterInPlace","Math","max","_checkSize","getSize","r","o","_","a","delete","entry","_notifyRemove","console","warn","c","set","n","updateSize","lives","lifetime","peek","performanceInfo","Size","round","_getHitRate","Entries","toString","Array","forEach","forAll","startsWith","hitRate","isNaN","Object","keys","sort","length","resetStats","some","_checkSizeLimits","_purgeItem","has","find","u","f","apply","super","constraint","targetPoint","hints","isDraped","domain","availability","_snappingElevationAligner","view","layer","layerSource","type","elevationInfo","alignPointsInFeatures","async","whenLayerView","elevationAlignPointsInFeatures","_snappingElevationFilter","_symbologySnappingFetcher","_symbologySnappingSupported","queryForSymbologySnapping","candidates","spatialReference","_layerView3D","allLayerViews","symbologySnappingSupported","initialize","addHandles","elevationProvider","on","context","notifyElevationSourceChange","renderer","notifySymbologyChange","updating","_memoizedMakeGetGroundElevation","refresh","fetchCandidates","source","querySnapping","signal","p","coordinateHelper","l","alignCandidates","y","fetch","m","filter","d","map","constructOnly","prototype","x","z","draped","edgeStart","start","edgeEnd","end","target","objectId","getGroundElevation","getElevation","_elevationInfo","_alignPointsInFeatures","_alignmentsCache","_cacheVersion","mode","featureExpressionInfo","_alignComputedElevationCandidates","offset","unit","_prepareQuery","_applyCacheAndResponse","drapedObjectIds","failedObjectIds","_addToQueriesOrCachedResult","points","toJSON","pointsInFeatures","elevations","point","wkid","distance","_updateCandidatesTo3D","min","sqrt","_getSymbologyCandidates","_candidatesCache","sourceCandidateIndices","g","concat","equals"],"sourceRoot":""}